(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[35],{

/***/ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/defineProperty.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _defineProperty; });
/* harmony import */ var _toPropertyKey_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toPropertyKey.js */ "./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js");


function _defineProperty(e, r, t) {
  return (r = Object(_toPropertyKey_js__WEBPACK_IMPORTED_MODULE_0__["default"])(r)) in e ? Object.defineProperty(e, r, {
    value: t,
    enumerable: !0,
    configurable: !0,
    writable: !0
  }) : e[r] = t, e;
}



/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/objectSpread2.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _objectSpread2; });
/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.keys.js */ "./node_modules/core-js/modules/es.object.keys.js");
/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ "./node_modules/core-js/modules/es.symbol.js");
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.array.filter.js */ "./node_modules/core-js/modules/es.array.filter.js");
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ "./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");
/* harmony import */ var core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ "./node_modules/core-js/modules/es.object.get-own-property-descriptors.js");
/* harmony import */ var core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _defineProperty_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./defineProperty.js */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");









function ownKeys(e, r) {
  var t = Object.keys(e);

  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r && (o = o.filter(function (r) {
      return Object.getOwnPropertyDescriptor(e, r).enumerable;
    })), t.push.apply(t, o);
  }

  return t;
}

function _objectSpread2(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = null != arguments[r] ? arguments[r] : {};
    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {
      Object(_defineProperty_js__WEBPACK_IMPORTED_MODULE_7__["default"])(e, r, t[r]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {
      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));
    });
  }

  return e;
}



/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/toPrimitive.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/toPrimitive.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return toPrimitive; });
/* harmony import */ var core_js_modules_es_symbol_to_primitive_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ "./node_modules/core-js/modules/es.symbol.to-primitive.js");
/* harmony import */ var core_js_modules_es_symbol_to_primitive_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_to_primitive_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_date_to_primitive_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ "./node_modules/core-js/modules/es.date.to-primitive.js");
/* harmony import */ var core_js_modules_es_date_to_primitive_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_to_primitive_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ "./node_modules/core-js/modules/es.symbol.js");
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.symbol.description.js */ "./node_modules/core-js/modules/es.symbol.description.js");
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.number.constructor.js */ "./node_modules/core-js/modules/es.number.constructor.js");
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _typeof_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./typeof.js */ "./node_modules/@babel/runtime/helpers/esm/typeof.js");








function toPrimitive(t, r) {
  if ("object" != Object(_typeof_js__WEBPACK_IMPORTED_MODULE_6__["default"])(t) || !t) return t;
  var e = t[Symbol.toPrimitive];

  if (void 0 !== e) {
    var i = e.call(t, r || "default");
    if ("object" != Object(_typeof_js__WEBPACK_IMPORTED_MODULE_6__["default"])(i)) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }

  return ("string" === r ? String : Number)(t);
}



/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return toPropertyKey; });
/* harmony import */ var _typeof_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./typeof.js */ "./node_modules/@babel/runtime/helpers/esm/typeof.js");
/* harmony import */ var _toPrimitive_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./toPrimitive.js */ "./node_modules/@babel/runtime/helpers/esm/toPrimitive.js");



function toPropertyKey(t) {
  var i = Object(_toPrimitive_js__WEBPACK_IMPORTED_MODULE_1__["default"])(t, "string");
  return "symbol" == Object(_typeof_js__WEBPACK_IMPORTED_MODULE_0__["default"])(i) ? i : i + "";
}



/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/typeof.js":
/*!***********************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/typeof.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _typeof; });
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ "./node_modules/core-js/modules/es.symbol.js");
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.symbol.description.js */ "./node_modules/core-js/modules/es.symbol.description.js");
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ "./node_modules/core-js/modules/es.symbol.iterator.js");
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5__);







function _typeof(o) {
  "@babel/helpers - typeof";

  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) {
    return typeof o;
  } : function (o) {
    return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o;
  }, _typeof(o);
}



/***/ }),

/***/ "./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/components/common/test/chat.vue?vue&type=script&lang=js&":
/*!*************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js??ref--13-0!./node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/common/test/chat.vue?vue&type=script&lang=js& ***!
  \*************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var D_helipingWork_APP_kmEnvPortable_webappOS_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ "./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var D_helipingWork_APP_kmEnvPortable_webappOS_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js */ "./node_modules/@babel/runtime/helpers/esm/objectSpread2.js");
/* harmony import */ var regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! regenerator-runtime/runtime.js */ "./node_modules/regenerator-runtime/runtime.js");
/* harmony import */ var regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.array.map.js */ "./node_modules/core-js/modules/es.array.map.js");
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.function.name.js */ "./node_modules/core-js/modules/es.function.name.js");
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "./node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/web.url.js */ "./node_modules/core-js/modules/web.url.js");
/* harmony import */ var core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/web.url-search-params.js */ "./node_modules/core-js/modules/web.url-search-params.js");
/* harmony import */ var core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.string.split.js */ "./node_modules/core-js/modules/es.string.split.js");
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/es.string.trim.js */ "./node_modules/core-js/modules/es.string.trim.js");
/* harmony import */ var core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var core_js_modules_es_string_pad_start_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! core-js/modules/es.string.pad-start.js */ "./node_modules/core-js/modules/es.string.pad-start.js");
/* harmony import */ var core_js_modules_es_string_pad_start_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_pad_start_js__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ "./node_modules/core-js/modules/es.regexp.to-string.js");
/* harmony import */ var core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var _api_dyy_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @/api/dyy.js */ "./src/api/dyy.js");
/* harmony import */ var _views_searchComponents_index_vue__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @/views/searchComponents/index.vue */ "./src/views/searchComponents/index.vue");
/* harmony import */ var _utils_SpeechRecord_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @/utils/SpeechRecord.js */ "./src/utils/SpeechRecord.js");



















//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//


var speechRecognizer;

/* harmony default export */ __webpack_exports__["default"] = ({
  name: "index",
  data: function data() {
    return {
      active: false,
      // 语音输入框是否激活
      isLongPress: false,
      // 是否长按
      timer: null,
      // 计时器
      iconShow: false,
      nowTime: "",
      question: "",
      result: "",
      chatList: [{
        question: "",
        //问题
        answer: [],
        timestamp: new Date(),
        //时间戳
        to: "",
        //接收者
        form: "" //发送者

      }],
      scrollbarRef: null,
      loading: false,
      error: null,
      streamedData: [],
      test: [{
        id: "8578",
        siteId: "b113c638-6e7b-4319-adcd-240d79b44b43",
        siteName: "盘龙区兴荣酒房",
        siteLabel: "",
        siteLabelColor: "",
        siteType: "poll",
        createTime: "2023-07-17 00:00:00",
        siteUrlType: "",
        jd: "102.84928",
        wd: "24.8554",
        distance: ""
      }, {
        id: "3079",
        siteId: "183809f1-582c-4af1-a400-6af85141e1ec",
        siteName: "昆明市盘龙区上水井食品厂",
        siteLabel: "",
        siteLabelColor: "",
        siteType: "poll",
        createTime: "2023-07-17 00:00:00",
        siteUrlType: "",
        jd: "102.80307",
        wd: "25.222",
        distance: ""
      }, {
        id: "253",
        moduleName: "水生态",
        grandId: "81,39,41,93",
        parentId: "83",
        resourcePath: "/waterEcology",
        type: "water",
        parameter: "盘龙区",
        detailsParameter: "盘龙区",
        componentName: "盘龙区水生态",
        children: []
      }, {
        id: "241",
        moduleName: "水资源",
        grandId: "81,39,41,93",
        parentId: "45",
        resourcePath: "/waterSource",
        type: "water",
        parameter: "盘龙区",
        detailsParameter: "盘龙区",
        componentName: "盘龙区水资源",
        children: []
      }, {
        id: "192",
        moduleName: "水环境概括",
        grandId: "81,39,147",
        parentId: "43",
        resourcePath: "/baseInfo",
        type: "water",
        parameter: "盘龙区",
        detailsParameter: "盘龙区",
        componentName: "盘龙区水环境概括",
        children: []
      }, {
        id: "202",
        moduleName: "水环境总体概况",
        grandId: "0",
        parentId: "81",
        resourcePath: "/baseInfo、/competition、/warningInfo、/waterSource、/waterEcology",
        type: "water",
        parameter: "盘龙区",
        detailsParameter: "盘龙区",
        componentName: "盘龙区水环境总体概况",
        children: [{
          id: "192",
          moduleName: "水环境概括",
          grandId: "81,39,147",
          parentId: "43",
          resourcePath: "/baseInfo",
          type: "water",
          parameter: "盘龙区",
          detailsParameter: "盘龙区",
          componentName: "盘龙区水环境概括",
          children: []
        }, {
          id: "197",
          moduleName: "告警信息",
          grandId: "81,39,41,42,93",
          parentId: "37",
          resourcePath: "/warningInfo",
          type: "water",
          parameter: "盘龙区",
          detailsParameter: "盘龙区",
          componentName: "盘龙区告警信息",
          children: []
        }, {
          id: "230",
          moduleName: "大竞赛",
          grandId: "81,147",
          parentId: "63",
          resourcePath: "/competition",
          type: "water",
          parameter: "盘龙区",
          detailsParameter: "盘龙区",
          componentName: "盘龙区大竞赛",
          children: []
        }, {
          id: "241",
          moduleName: "水资源",
          grandId: "81,39,41,93",
          parentId: "45",
          resourcePath: "/waterSource",
          type: "water",
          parameter: "盘龙区",
          detailsParameter: "盘龙区",
          componentName: "盘龙区水资源",
          children: []
        }, {
          id: "253",
          moduleName: "水生态",
          grandId: "81,39,41,93",
          parentId: "83",
          resourcePath: "/waterEcology",
          type: "water",
          parameter: "盘龙区",
          detailsParameter: "盘龙区",
          componentName: "盘龙区水生态",
          children: []
        }]
      }],
      showComponent: false,
      transcript: "",
      recognition: null
    };
  },
  components: {
    searchComponents: _views_searchComponents_index_vue__WEBPACK_IMPORTED_MODULE_20__["default"]
  },
  computed: {
    messagesWithTimestamps: function messagesWithTimestamps() {
      var _this = this;

      return this.chatList.map(function (item, index) {
        return Object(D_helipingWork_APP_kmEnvPortable_webappOS_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["default"])(Object(D_helipingWork_APP_kmEnvPortable_webappOS_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["default"])({}, item), {}, {
          showTime: index === 0 || _this.shouldShowTime(index)
        });
      });
    }
  },
  mounted: function mounted() {
    var text = document.getElementById("text-container").textContent;
    var index = 0;
    var container = document.getElementById("text-container");
    container.textContent = ""; // 清空原文本

    var interval = setInterval(function () {
      if (index < text.length) {
        container.textContent += text[index++];
      } else {
        clearInterval(interval); // 所有字符都显示后清除定时器
      }
    }, 100);
  },
  // 获取路由，判断路由缓存
  beforeRouteLeave: function beforeRouteLeave(to, from, next) {
    console.log("beforeRouteLeave", to, from);

    if (to.name === "companyDetail" || to.name === "stationDetail" || to.name === "airStationDetail") {
      from.meta.keepAlive = true;
    } else {
      from.meta.keepAlive = false;
    }

    next();
  },
  created: function created() {},
  methods: {
    setRecordingEvent: function setRecordingEvent() {
      var _this2 = this;

      speechRecognizer = Object(_utils_SpeechRecord_js__WEBPACK_IMPORTED_MODULE_21__["sttFromMic"])();
      console.log(speechRecognizer);

      speechRecognizer.recognizing = function (s, e) {
        console.log(e.result);
      };

      speechRecognizer.recognized = function (s, e) {
        console.log("s", s);
        console.log("RECOGNIZED: Text=".concat(e.result.text));
        _this2.result = e.result.text;
        _this2.question = e.result.text.replace(/\。/g, "");
      };

      speechRecognizer.canceled = function (s, e) {
        console.log("CANCELED: Reason=".concat(e.reason));

        if (e.reason === 0) {
          console.log("\"CANCELED: ErrorCode=".concat(e.errorCode));
          console.log("\"CANCELED: ErrorDetails=".concat(e.errorDetails));
          console.log("CANCELED: Did you set the speech resource key and region values?");
        }

        speechRecognizer.stopContinuousRecognitionAsync();
      };

      speechRecognizer.sessionStopped = function (s, e) {
        console.log("\n    Session stopped event.");
        speechRecognizer.stopContinuousRecognitionAsync();
      };
    },
    goBack: function goBack() {
      if (this.showComponent) {
        this.showComponent = false;
      } else {
        this.$router.go(-1);
      }
    },
    shouldShowTime: function shouldShowTime(index) {
      var current = new Date(this.chatList[index - 1].timestamp);
      var next = new Date(this.chatList[index].timestamp);
      var diff = next ? next - current : 0;
      return diff > 3 * 60 * 1000;
    },
    toDetail: function toDetail(item) {
      var _this3 = this;

      if (!item.children) {
        if (item.siteType === "air") {
          this.$router.push({
            name: "airStationDetail",
            query: {
              siteId: item.siteId,
              siteName: item.siteName,
              siteLevel: item.siteLabel,
              title: "空气质量站点详情"
            }
          });
        } else if (item.siteType === "water") {
          var monitorMethod = "";

          if (item.monitorMethod) {
            if (item.monitorMethod === "自动监测") {
              monitorMethod = "自动";
            } else if (item.monitorMethod === "手工监测") {
              monitorMethod = "手工";
            } else {
              monitorMethod = "自动";
            }
          } else {
            monitorMethod = "自动";
          }

          this.$router.push({
            name: "stationDetail",
            query: {
              type: monitorMethod == "自动" ? "时" : "月",
              id: item.siteId,
              time: monitorMethod == "自动" ? this.nowTime : this.nowTime.substr(0, 7)
            }
          });
        } else if (item.siteType === "poll") {
          this.$router.push({
            name: "companyDetail",
            query: {
              id: item.siteId,
              type: "red"
            }
          });
        }
      } else {
        var tempD = {
          componentName: item.componentName,
          moduleName: item.moduleName,
          resourcePath: item.resourcePath,
          type: item.type,
          parameter: item.parameter,
          detailsParameter: item.detailsParameter
        };
        this.$emit("showModule", tempD);
        this.showComponent = true;
        this.$refs.page.scrollTop = 0; // this.list = [];

        this.$store.commit("setSearchObj", tempD);
        this.$nextTick(function () {
          _this3.$refs.summaryAllRef.getComponent(item.type, item.resourcePath);
        });
      }
    },
    open: function open() {
      var _this4 = this;

      this.iconShow = !this.iconShow;
      this.question = "按住  说话"; // 使用Cordova麦克风录音

      navigator.mediaDevices.getUserMedia({
        audio: true
      }).then(function (stream) {
        var mediaRecorder = new MediaRecorder(stream);
        var audioChunks = [];
        mediaRecorder.addEventListener("dataavailable", function (event) {
          audioChunks.push(event.data);
        });
        mediaRecorder.addEventListener("stop", function () {
          var audioBlob = new Blob(audioChunks, {
            type: "audio/wav"
          });
          var audioUrl = URL.createObjectURL(audioBlob); // 创建一个Audio元素来播放录音

          var audio = new Audio(audioUrl);
          audio.play(); // 初始化语音识别

          _this4.recognition = new webkitSpeechRecognition() || new SpeechRecognition();
          _this4.recognition.continuous = true;
          _this4.recognition.interimResults = true;
          _this4.recognition.onresult = _this4.onResult;

          try {
            _this4.recognition.start();

            mediaRecorder.start();
          } catch (e) {
            console.error(e);
          }
        }); // 停止录音并处理结果

        mediaRecorder.stop();
      }).catch(function (error) {
        return console.error(error);
      }); //   this.setRecordingEvent();
      //   speechRecognizer.startContinuousRecognitionAsync();
    },
    onResult: function onResult(event) {
      var result = "";

      for (var i = event.resultIndex; i < event.results.length; i++) {
        result += event.results[i][0].transcript;
      }

      this.transcript = result;
      this.recognition.stop();
    },
    startSpeaking: function startSpeaking(event) {
      var _this5 = this;

      // 当按下时开始计时
      this.timer = setTimeout(function () {
        _this5.isLongPress = true; // 长按后的处理逻辑，比如开始说话

        _this5.startRecording();
      }, 500); // 设置长按的阈值时间，这里是500毫秒
    },
    stopSpeaking: function stopSpeaking(event) {
      this.active = false; // 当手指移开时取消计时

      clearTimeout(this.timer);
      this.isLongPress = false;
      console.log("Stop recording.");

      if (speechRecognizer) {
        speechRecognizer.stopContinuousRecognitionAsync();
        speechRecognizer = null;
      } // 如果是长按，处理结束逻辑，比如停止说话


      if (this.isLongPress) {
        this.stopRecording();
      }
    },
    startRecording: function startRecording() {
      this.active = true; // 开始录音的逻辑

      console.log("Start recording...");
      this.setRecordingEvent();
      speechRecognizer.startContinuousRecognitionAsync();
    },
    stopRecording: function stopRecording() {
      this.active = false; // 结束录音的逻辑

      console.log("Stop recording.");

      if (speechRecognizer) {
        speechRecognizer.stopContinuousRecognitionAsync();
        speechRecognizer = null;
      }

      clearTimeout(this.timer);
      this.isLongPress = false; // 如果是长按，处理结束逻辑，比如停止说话

      if (this.isLongPress) {
        this.stopRecording();
      }
    },
    close: function close() {
      this.iconShow = !this.iconShow;
      this.question = "";

      if (speechRecognizer) {
        speechRecognizer.stopContinuousRecognitionAsync();
        speechRecognizer = null;
      }
    },
    askClick: function askClick(val) {
      var _this6 = this;

      return Object(D_helipingWork_APP_kmEnvPortable_webappOS_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
        var data, response, events;
        return regeneratorRuntime.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                //   this.iconShow = !this.iconShow;
                if (speechRecognizer) {
                  speechRecognizer.stopContinuousRecognitionAsync();
                  speechRecognizer = null;
                }

                if (_this6.iconShow) {
                  _this6.question = "按住  说话";
                }

                _this6.loading = true;
                _this6.error = null;
                _this6.streamedData = [];

                _this6.chatList.push({
                  question: val,
                  //问题
                  answer: [],
                  timestamp: new Date(),
                  //时间戳
                  to: "",
                  //接收者
                  form: "" //发送者

                });

                data = {
                  query: val,
                  inputs: {},
                  response_mode: "streaming",
                  user: "sthjj@local.locahost"
                };
                _context.prev = 7;
                _context.next = 10;
                return Object(_api_dyy_js__WEBPACK_IMPORTED_MODULE_19__["getResult"])(data);

              case 10:
                response = _context.sent;
                // 如果 API 不是真正的流式响应，可能需要在这里处理最终的响应
                events = response.data.split("\ndata: ");
                events.forEach(function (eventStr, index) {
                  if (eventStr.trim()) {
                    if (eventStr.includes("workflow_finished")) {
                      _this6.chatList.forEach(function (item, index) {
                        if (index == _this6.chatList.length - 1) {
                          _this6.chatList[index].answer = JSON.parse(JSON.parse(eventStr).data.outputs.answer).data;
                        }
                      });
                    }
                  }
                });
                _context.next = 18;
                break;

              case 15:
                _context.prev = 15;
                _context.t0 = _context["catch"](7);
                _this6.error = _context.t0.message || "未知错误";

              case 18:
                _context.prev = 18;
                _this6.loading = false;
                return _context.finish(18);

              case 21:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, null, [[7, 15, 18, 21]]);
      }))();
    },
    scrollToBottom: function scrollToBottom() {
      var _this7 = this;

      nextTick(function () {
        var chat = document.querySelector(".main_content_center");
        _this7.scrollbarRef.wrapRef.scrollTop = chat.scrollHeight;
      });
    },
    formatSendTime: function formatSendTime(sendTime) {
      var now = new Date();
      var sendDate = new Date(sendTime); // 计算时间差（以毫秒为单位）

      var timeDiff = now - sendDate;
      var startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
      var startOfTargetDate = new Date(sendDate.getFullYear(), sendDate.getMonth(), sendDate.getDate()); // 一天内的毫秒数

      var oneDay = 24 * 60 * 60 * 1000; // 如果发送时间在当前时间之前

      if (timeDiff < 0) {
        return "Invalid time"; // 或者其他错误处理
      } // 发生在同一天


      if (startOfToday.getTime() === startOfTargetDate.getTime()) {
        return this.formatTime(sendDate);
      } // 如果发送时间在一天内


      if (timeDiff < oneDay) {
        return "昨天 " + this.formatTime(sendDate);
      } // 如果发送时间在二天至七天内


      if (timeDiff < 7 * oneDay) {
        var weekday = this.getWeekday(sendDate);
        return weekday + " " + this.formatTime(sendDate);
      } // 如果发送时间超过七天


      return sendDate.toLocaleDateString("zh-CN", {
        year: "numeric",
        month: "2-digit",
        day: "2-digit"
      }) + " " + this.formatTime(sendDate);
    },
    formatTime: function formatTime(date) {
      // 格式化时间为“时:分”
      var hours = date.getHours().toString().padStart(2, "0");
      var minutes = date.getMinutes().toString().padStart(2, "0");
      return hours + ":" + minutes;
    },
    getWeekday: function getWeekday(date) {
      // 获取星期几的中文表示
      var weekdays = ["星期天", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"];
      return weekdays[date.getDay()];
    }
  }
});

/***/ }),

/***/ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/.cache/vue-loader\",\"cacheIdentifier\":\"4bae0482-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/components/common/test/chat.vue?vue&type=template&id=7a67d9be&":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"4bae0482-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/common/test/chat.vue?vue&type=template&id=7a67d9be& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  return _c(
    "div",
    { ref: "page", staticClass: "test", staticStyle: { background: "#fff" } },
    [
      _c("van-nav-bar", {
        attrs: { title: "小彩云", "left-arrow": "" },
        on: { "click-left": _vm.goBack },
      }),
      _c(
        "div",
        { staticClass: "content" },
        [
          !_vm.showComponent
            ? _c(
                "el-container",
                { ref: "bodyform", staticStyle: { height: "100%" } },
                [
                  _c("div", { staticClass: "el_main_content" }, [
                    _c(
                      "div",
                      { staticClass: "main_content_center" },
                      [
                        _c(
                          "el-scrollbar",
                          {
                            ref: "scrollbarRef",
                            staticClass: "faultExpertConsultation_scrollbar",
                          },
                          _vm._l(
                            _vm.messagesWithTimestamps,
                            function (item, index) {
                              return _c(
                                "div",
                                {
                                  directives: [
                                    {
                                      name: "show",
                                      rawName: "v-show",
                                      value:
                                        _vm.messagesWithTimestamps.length > 0,
                                      expression:
                                        "messagesWithTimestamps.length > 0",
                                    },
                                  ],
                                  key: index,
                                },
                                [
                                  item.showTime
                                    ? _c("div", { staticClass: "chat_time" }, [
                                        _vm._v(
                                          " " +
                                            _vm._s(
                                              _vm.formatSendTime(item.timestamp)
                                            ) +
                                            " "
                                        ),
                                      ])
                                    : _vm._e(),
                                  _c(
                                    "div",
                                    {
                                      directives: [
                                        {
                                          name: "show",
                                          rawName: "v-show",
                                          value: item.question !== "",
                                          expression: "item.question !== ''",
                                        },
                                      ],
                                      staticClass: "question chat",
                                    },
                                    [
                                      _c(
                                        "div",
                                        {
                                          staticClass:
                                            "chat_question chat_common",
                                        },
                                        [
                                          _c("span", [
                                            _vm._v(_vm._s(item.question)),
                                          ]),
                                        ]
                                      ),
                                      _c(
                                        "el-avatar",
                                        { staticClass: "avatar" },
                                        [
                                          _c("span", { staticClass: "me" }, [
                                            _vm._v("我"),
                                          ]),
                                        ]
                                      ),
                                    ],
                                    1
                                  ),
                                  item.answer
                                    ? _c(
                                        "div",
                                        { staticClass: "answer chat" },
                                        [
                                          _c(
                                            "el-avatar",
                                            { staticClass: "avatar" },
                                            [
                                              _c("img", {
                                                attrs: {
                                                  src: __webpack_require__(/*! @/assets/xcy.png */ "./src/assets/xcy.png"),
                                                  alt: "",
                                                },
                                              }),
                                            ]
                                          ),
                                          _c(
                                            "div",
                                            {
                                              directives: [
                                                {
                                                  name: "show",
                                                  rawName: "v-show",
                                                  value: item.answer.length > 0,
                                                  expression:
                                                    "item.answer.length > 0",
                                                },
                                              ],
                                              staticClass: "chat_answer",
                                            },
                                            [
                                              _c("p", [
                                                _vm._v(
                                                  "为你找到以下内容，请点击查看。"
                                                ),
                                              ]),
                                              _vm._l(
                                                item.answer,
                                                function (e, index) {
                                                  return _c(
                                                    "div",
                                                    {
                                                      directives: [
                                                        {
                                                          name: "show",
                                                          rawName: "v-show",
                                                          value:
                                                            item.answer.length >
                                                            1,
                                                          expression:
                                                            "item.answer.length > 1",
                                                        },
                                                      ],
                                                      staticClass:
                                                        "chat_answer_content",
                                                      on: {
                                                        click: function (
                                                          $event
                                                        ) {
                                                          return _vm.toDetail(e)
                                                        },
                                                      },
                                                    },
                                                    [
                                                      _vm._v(
                                                        _vm._s(index + 1) +
                                                          ". " +
                                                          _vm._s(
                                                            e.siteName ||
                                                              e.componentName
                                                          )
                                                      ),
                                                    ]
                                                  )
                                                }
                                              ),
                                              _vm._l(
                                                item.answer,
                                                function (e, index) {
                                                  return _c(
                                                    "div",
                                                    {
                                                      directives: [
                                                        {
                                                          name: "show",
                                                          rawName: "v-show",
                                                          value:
                                                            item.answer
                                                              .length == 1,
                                                          expression:
                                                            "item.answer.length == 1",
                                                        },
                                                      ],
                                                      staticClass:
                                                        "chat_answer_content",
                                                      on: {
                                                        click: function (
                                                          $event
                                                        ) {
                                                          return _vm.toDetail(e)
                                                        },
                                                      },
                                                    },
                                                    [
                                                      _vm._v(
                                                        " " +
                                                          _vm._s(index + 1) +
                                                          ". " +
                                                          _vm._s(
                                                            e.siteName ||
                                                              e.componentName
                                                          )
                                                      ),
                                                      _c("br"),
                                                      _c(
                                                        "span",
                                                        {
                                                          staticClass: "words",
                                                        },
                                                        [
                                                          _vm._v(
                                                            _vm._s(e.content)
                                                          ),
                                                        ]
                                                      ),
                                                    ]
                                                  )
                                                }
                                              ),
                                            ],
                                            2
                                          ),
                                          _c(
                                            "div",
                                            {
                                              directives: [
                                                {
                                                  name: "show",
                                                  rawName: "v-show",
                                                  value:
                                                    item.answer.length == 0 &&
                                                    item.question == "",
                                                  expression:
                                                    "item.answer.length == 0 && item.question == ''",
                                                },
                                              ],
                                              staticClass: "chat_answer",
                                            },
                                            [
                                              _c(
                                                "span",
                                                {
                                                  attrs: {
                                                    id: "text-container",
                                                  },
                                                },
                                                [
                                                  _vm._v(
                                                    "你好，我是小彩云，我可以帮你查询地表水、空气质量和排污单位的信息。"
                                                  ),
                                                ]
                                              ),
                                            ]
                                          ),
                                          _c(
                                            "div",
                                            {
                                              directives: [
                                                {
                                                  name: "show",
                                                  rawName: "v-show",
                                                  value:
                                                    item.answer.length == 0 &&
                                                    item.question !== "",
                                                  expression:
                                                    "item.answer.length == 0 && item.question !== ''",
                                                },
                                              ],
                                              staticClass: "chat_answer",
                                            },
                                            [
                                              _c(
                                                "div",
                                                {
                                                  staticStyle: {
                                                    float: "left",
                                                  },
                                                },
                                                [
                                                  _vm._v(
                                                    "小彩云正在努力分析中..."
                                                  ),
                                                ]
                                              ),
                                              _c("div", {
                                                staticClass: "loading-icon",
                                              }),
                                            ]
                                          ),
                                        ],
                                        1
                                      )
                                    : _vm._e(),
                                ]
                              )
                            }
                          ),
                          0
                        ),
                      ],
                      1
                    ),
                    _c("div", { staticClass: "main_content_footer" }, [
                      _c("i", {
                        directives: [
                          {
                            name: "show",
                            rawName: "v-show",
                            value: _vm.iconShow,
                            expression: "iconShow",
                          },
                        ],
                        staticClass: "el-icon-microphone",
                        on: { click: _vm.close },
                      }),
                      _c("i", {
                        directives: [
                          {
                            name: "show",
                            rawName: "v-show",
                            value: !_vm.iconShow,
                            expression: "!iconShow",
                          },
                        ],
                        staticClass: "el-icon-turn-off-microphone",
                        on: { click: _vm.open },
                      }),
                      _c("div", { staticClass: "input_box" }, [
                        _c("textarea", {
                          directives: [
                            {
                              name: "model",
                              rawName: "v-model",
                              value: _vm.question,
                              expression: "question",
                            },
                            {
                              name: "show",
                              rawName: "v-show",
                              value: !_vm.iconShow,
                              expression: "!iconShow",
                            },
                          ],
                          staticClass: "chat-input no-border",
                          domProps: { value: _vm.question },
                          on: {
                            input: function ($event) {
                              if ($event.target.composing) {
                                return
                              }
                              _vm.question = $event.target.value
                            },
                          },
                        }),
                        _vm._v(" "),
                        _c(
                          "div",
                          {
                            directives: [
                              {
                                name: "show",
                                rawName: "v-show",
                                value: _vm.iconShow,
                                expression: "iconShow",
                              },
                            ],
                            class: {
                              "chat-div": !_vm.active,
                              "chat-div-active": _vm.active,
                            },
                            on: {
                              touchstart: _vm.startSpeaking,
                              touchend: _vm.stopSpeaking,
                            },
                          },
                          [_vm._v(" " + _vm._s(_vm.question) + " ")]
                        ),
                      ]),
                      _c(
                        "div",
                        { staticClass: "btn_box" },
                        [
                          _c(
                            "el-button",
                            {
                              staticClass: "btn",
                              attrs: { type: "primary" },
                              on: {
                                click: function ($event) {
                                  return _vm.askClick(_vm.question)
                                },
                              },
                            },
                            [_vm._v("发送")]
                          ),
                        ],
                        1
                      ),
                    ]),
                  ]),
                ]
              )
            : _vm.showComponent
            ? _c("searchComponents", { ref: "summaryAllRef" })
            : _vm._e(),
        ],
        1
      ),
    ],
    1
  )
}
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ "./node_modules/core-js/internals/date-to-primitive.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/date-to-primitive.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var ordinaryToPrimitive = __webpack_require__(/*! ../internals/ordinary-to-primitive */ "./node_modules/core-js/internals/ordinary-to-primitive.js");

var $TypeError = TypeError;

// `Date.prototype[@@toPrimitive](hint)` method implementation
// https://tc39.es/ecma262/#sec-date.prototype-@@toprimitive
module.exports = function (hint) {
  anObject(this);
  if (hint === 'string' || hint === 'default') hint = 'string';
  else if (hint !== 'number') throw new $TypeError('Incorrect hint');
  return ordinaryToPrimitive(this, hint);
};


/***/ }),

/***/ "./node_modules/core-js/internals/string-pad-webkit-bug.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/internals/string-pad-webkit-bug.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/zloirock/core-js/issues/280
var userAgent = __webpack_require__(/*! ../internals/environment-user-agent */ "./node_modules/core-js/internals/environment-user-agent.js");

module.exports = /Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(userAgent);


/***/ }),

/***/ "./node_modules/core-js/internals/string-pad.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/string-pad.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/tc39/proposal-string-pad-start-end
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var toLength = __webpack_require__(/*! ../internals/to-length */ "./node_modules/core-js/internals/to-length.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var $repeat = __webpack_require__(/*! ../internals/string-repeat */ "./node_modules/core-js/internals/string-repeat.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");

var repeat = uncurryThis($repeat);
var stringSlice = uncurryThis(''.slice);
var ceil = Math.ceil;

// `String.prototype.{ padStart, padEnd }` methods implementation
var createMethod = function (IS_END) {
  return function ($this, maxLength, fillString) {
    var S = toString(requireObjectCoercible($this));
    var intMaxLength = toLength(maxLength);
    var stringLength = S.length;
    var fillStr = fillString === undefined ? ' ' : toString(fillString);
    var fillLen, stringFiller;
    if (intMaxLength <= stringLength || fillStr === '') return S;
    fillLen = intMaxLength - stringLength;
    stringFiller = repeat(fillStr, ceil(fillLen / fillStr.length));
    if (stringFiller.length > fillLen) stringFiller = stringSlice(stringFiller, 0, fillLen);
    return IS_END ? S + stringFiller : stringFiller + S;
  };
};

module.exports = {
  // `String.prototype.padStart` method
  // https://tc39.es/ecma262/#sec-string.prototype.padstart
  start: createMethod(false),
  // `String.prototype.padEnd` method
  // https://tc39.es/ecma262/#sec-string.prototype.padend
  end: createMethod(true)
};


/***/ }),

/***/ "./node_modules/core-js/internals/string-punycode-to-ascii.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/string-punycode-to-ascii.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// based on https://github.com/bestiejs/punycode.js/blob/master/punycode.js
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");

var maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1
var base = 36;
var tMin = 1;
var tMax = 26;
var skew = 38;
var damp = 700;
var initialBias = 72;
var initialN = 128; // 0x80
var delimiter = '-'; // '\x2D'
var regexNonASCII = /[^\0-\u007E]/; // non-ASCII chars
var regexSeparators = /[.\u3002\uFF0E\uFF61]/g; // RFC 3490 separators
var OVERFLOW_ERROR = 'Overflow: input needs wider integers to process';
var baseMinusTMin = base - tMin;

var $RangeError = RangeError;
var exec = uncurryThis(regexSeparators.exec);
var floor = Math.floor;
var fromCharCode = String.fromCharCode;
var charCodeAt = uncurryThis(''.charCodeAt);
var join = uncurryThis([].join);
var push = uncurryThis([].push);
var replace = uncurryThis(''.replace);
var split = uncurryThis(''.split);
var toLowerCase = uncurryThis(''.toLowerCase);

/**
 * Creates an array containing the numeric code points of each Unicode
 * character in the string. While JavaScript uses UCS-2 internally,
 * this function will convert a pair of surrogate halves (each of which
 * UCS-2 exposes as separate characters) into a single code point,
 * matching UTF-16.
 */
var ucs2decode = function (string) {
  var output = [];
  var counter = 0;
  var length = string.length;
  while (counter < length) {
    var value = charCodeAt(string, counter++);
    if (value >= 0xD800 && value <= 0xDBFF && counter < length) {
      // It's a high surrogate, and there is a next character.
      var extra = charCodeAt(string, counter++);
      if ((extra & 0xFC00) === 0xDC00) { // Low surrogate.
        push(output, ((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);
      } else {
        // It's an unmatched surrogate; only append this code unit, in case the
        // next code unit is the high surrogate of a surrogate pair.
        push(output, value);
        counter--;
      }
    } else {
      push(output, value);
    }
  }
  return output;
};

/**
 * Converts a digit/integer into a basic code point.
 */
var digitToBasic = function (digit) {
  //  0..25 map to ASCII a..z or A..Z
  // 26..35 map to ASCII 0..9
  return digit + 22 + 75 * (digit < 26);
};

/**
 * Bias adaptation function as per section 3.4 of RFC 3492.
 * https://tools.ietf.org/html/rfc3492#section-3.4
 */
var adapt = function (delta, numPoints, firstTime) {
  var k = 0;
  delta = firstTime ? floor(delta / damp) : delta >> 1;
  delta += floor(delta / numPoints);
  while (delta > baseMinusTMin * tMax >> 1) {
    delta = floor(delta / baseMinusTMin);
    k += base;
  }
  return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));
};

/**
 * Converts a string of Unicode symbols (e.g. a domain name label) to a
 * Punycode string of ASCII-only symbols.
 */
var encode = function (input) {
  var output = [];

  // Convert the input in UCS-2 to an array of Unicode code points.
  input = ucs2decode(input);

  // Cache the length.
  var inputLength = input.length;

  // Initialize the state.
  var n = initialN;
  var delta = 0;
  var bias = initialBias;
  var i, currentValue;

  // Handle the basic code points.
  for (i = 0; i < input.length; i++) {
    currentValue = input[i];
    if (currentValue < 0x80) {
      push(output, fromCharCode(currentValue));
    }
  }

  var basicLength = output.length; // number of basic code points.
  var handledCPCount = basicLength; // number of code points that have been handled;

  // Finish the basic string with a delimiter unless it's empty.
  if (basicLength) {
    push(output, delimiter);
  }

  // Main encoding loop:
  while (handledCPCount < inputLength) {
    // All non-basic code points < n have been handled already. Find the next larger one:
    var m = maxInt;
    for (i = 0; i < input.length; i++) {
      currentValue = input[i];
      if (currentValue >= n && currentValue < m) {
        m = currentValue;
      }
    }

    // Increase `delta` enough to advance the decoder's <n,i> state to <m,0>, but guard against overflow.
    var handledCPCountPlusOne = handledCPCount + 1;
    if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {
      throw new $RangeError(OVERFLOW_ERROR);
    }

    delta += (m - n) * handledCPCountPlusOne;
    n = m;

    for (i = 0; i < input.length; i++) {
      currentValue = input[i];
      if (currentValue < n && ++delta > maxInt) {
        throw new $RangeError(OVERFLOW_ERROR);
      }
      if (currentValue === n) {
        // Represent delta as a generalized variable-length integer.
        var q = delta;
        var k = base;
        while (true) {
          var t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;
          if (q < t) break;
          var qMinusT = q - t;
          var baseMinusT = base - t;
          push(output, fromCharCode(digitToBasic(t + qMinusT % baseMinusT)));
          q = floor(qMinusT / baseMinusT);
          k += base;
        }

        push(output, fromCharCode(digitToBasic(q)));
        bias = adapt(delta, handledCPCountPlusOne, handledCPCount === basicLength);
        delta = 0;
        handledCPCount++;
      }
    }

    delta++;
    n++;
  }
  return join(output, '');
};

module.exports = function (input) {
  var encoded = [];
  var labels = split(replace(toLowerCase(input), regexSeparators, '\u002E'), '.');
  var i, label;
  for (i = 0; i < labels.length; i++) {
    label = labels[i];
    push(encoded, exec(regexNonASCII, label) ? 'xn--' + encode(label) : label);
  }
  return join(encoded, '.');
};


/***/ }),

/***/ "./node_modules/core-js/internals/string-trim-forced.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/internals/string-trim-forced.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var PROPER_FUNCTION_NAME = __webpack_require__(/*! ../internals/function-name */ "./node_modules/core-js/internals/function-name.js").PROPER;
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var whitespaces = __webpack_require__(/*! ../internals/whitespaces */ "./node_modules/core-js/internals/whitespaces.js");

var non = '\u200B\u0085\u180E';

// check that a method works with the correct list
// of whitespaces and has a correct name
module.exports = function (METHOD_NAME) {
  return fails(function () {
    return !!whitespaces[METHOD_NAME]()
      || non[METHOD_NAME]() !== non
      || (PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME);
  });
};


/***/ }),

/***/ "./node_modules/core-js/internals/url-constructor-detection.js":
/*!*********************************************************************!*\
  !*** ./node_modules/core-js/internals/url-constructor-detection.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");

var ITERATOR = wellKnownSymbol('iterator');

module.exports = !fails(function () {
  // eslint-disable-next-line unicorn/relative-url-style -- required for testing
  var url = new URL('b?a=1&b=2&c=3', 'https://a');
  var params = url.searchParams;
  var params2 = new URLSearchParams('a=1&a=2&b=3');
  var result = '';
  url.pathname = 'c%20d';
  params.forEach(function (value, key) {
    params['delete']('b');
    result += key + value;
  });
  params2['delete']('a', 2);
  // `undefined` case is a Chromium 117 bug
  // https://bugs.chromium.org/p/v8/issues/detail?id=14222
  params2['delete']('b', undefined);
  return (IS_PURE && (!url.toJSON || !params2.has('a', 1) || params2.has('a', 2) || !params2.has('a', undefined) || params2.has('b')))
    || (!params.size && (IS_PURE || !DESCRIPTORS))
    || !params.sort
    || url.href !== 'https://a/c%20d?a=1&c=3'
    || params.get('c') !== '3'
    || String(new URLSearchParams('?a=1')) !== 'a=1'
    || !params[ITERATOR]
    // throws in Edge
    || new URL('https://a@b').username !== 'a'
    || new URLSearchParams(new URLSearchParams('a=b')).get('a') !== 'b'
    // not punycoded in Edge
    || new URL('https://тест').host !== 'xn--e1aybc'
    // not escaped in Chrome 62-
    || new URL('https://a#б').hash !== '#%D0%B1'
    // fails in Chrome 66-
    || result !== 'a1c3'
    // throws in Safari
    || new URL('https://x', undefined).host !== 'x';
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.map.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.map.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $map = __webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").map;
var arrayMethodHasSpeciesSupport = __webpack_require__(/*! ../internals/array-method-has-species-support */ "./node_modules/core-js/internals/array-method-has-species-support.js");

var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');

// `Array.prototype.map` method
// https://tc39.es/ecma262/#sec-array.prototype.map
// with adding support of @@species
$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {
  map: function map(callbackfn /* , thisArg */) {
    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.date.to-primitive.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/modules/es.date.to-primitive.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var defineBuiltIn = __webpack_require__(/*! ../internals/define-built-in */ "./node_modules/core-js/internals/define-built-in.js");
var dateToPrimitive = __webpack_require__(/*! ../internals/date-to-primitive */ "./node_modules/core-js/internals/date-to-primitive.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var TO_PRIMITIVE = wellKnownSymbol('toPrimitive');
var DatePrototype = Date.prototype;

// `Date.prototype[@@toPrimitive]` method
// https://tc39.es/ecma262/#sec-date.prototype-@@toprimitive
if (!hasOwn(DatePrototype, TO_PRIMITIVE)) {
  defineBuiltIn(DatePrototype, TO_PRIMITIVE, dateToPrimitive);
}


/***/ }),

/***/ "./node_modules/core-js/modules/es.object.get-own-property-descriptor.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/core-js/modules/es.object.get-own-property-descriptor.js ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var nativeGetOwnPropertyDescriptor = __webpack_require__(/*! ../internals/object-get-own-property-descriptor */ "./node_modules/core-js/internals/object-get-own-property-descriptor.js").f;
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");

var FORCED = !DESCRIPTORS || fails(function () { nativeGetOwnPropertyDescriptor(1); });

// `Object.getOwnPropertyDescriptor` method
// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor
$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {
  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {
    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.object.get-own-property-descriptors.js":
/*!********************************************************************************!*\
  !*** ./node_modules/core-js/modules/es.object.get-own-property-descriptors.js ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var ownKeys = __webpack_require__(/*! ../internals/own-keys */ "./node_modules/core-js/internals/own-keys.js");
var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var getOwnPropertyDescriptorModule = __webpack_require__(/*! ../internals/object-get-own-property-descriptor */ "./node_modules/core-js/internals/object-get-own-property-descriptor.js");
var createProperty = __webpack_require__(/*! ../internals/create-property */ "./node_modules/core-js/internals/create-property.js");

// `Object.getOwnPropertyDescriptors` method
// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors
$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {
  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {
    var O = toIndexedObject(object);
    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
    var keys = ownKeys(O);
    var result = {};
    var index = 0;
    var key, descriptor;
    while (keys.length > index) {
      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);
      if (descriptor !== undefined) createProperty(result, key, descriptor);
    }
    return result;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.object.keys.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/es.object.keys.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var nativeKeys = __webpack_require__(/*! ../internals/object-keys */ "./node_modules/core-js/internals/object-keys.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

var FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });

// `Object.keys` method
// https://tc39.es/ecma262/#sec-object.keys
$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {
  keys: function keys(it) {
    return nativeKeys(toObject(it));
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.string.from-code-point.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/modules/es.string.from-code-point.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var toAbsoluteIndex = __webpack_require__(/*! ../internals/to-absolute-index */ "./node_modules/core-js/internals/to-absolute-index.js");

var $RangeError = RangeError;
var fromCharCode = String.fromCharCode;
// eslint-disable-next-line es/no-string-fromcodepoint -- required for testing
var $fromCodePoint = String.fromCodePoint;
var join = uncurryThis([].join);

// length should be 1, old FF problem
var INCORRECT_LENGTH = !!$fromCodePoint && $fromCodePoint.length !== 1;

// `String.fromCodePoint` method
// https://tc39.es/ecma262/#sec-string.fromcodepoint
$({ target: 'String', stat: true, arity: 1, forced: INCORRECT_LENGTH }, {
  // eslint-disable-next-line no-unused-vars -- required for `.length`
  fromCodePoint: function fromCodePoint(x) {
    var elements = [];
    var length = arguments.length;
    var i = 0;
    var code;
    while (length > i) {
      code = +arguments[i++];
      if (toAbsoluteIndex(code, 0x10FFFF) !== code) throw new $RangeError(code + ' is not a valid code point');
      elements[i] = code < 0x10000
        ? fromCharCode(code)
        : fromCharCode(((code -= 0x10000) >> 10) + 0xD800, code % 0x400 + 0xDC00);
    } return join(elements, '');
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.string.pad-start.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/es.string.pad-start.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $padStart = __webpack_require__(/*! ../internals/string-pad */ "./node_modules/core-js/internals/string-pad.js").start;
var WEBKIT_BUG = __webpack_require__(/*! ../internals/string-pad-webkit-bug */ "./node_modules/core-js/internals/string-pad-webkit-bug.js");

// `String.prototype.padStart` method
// https://tc39.es/ecma262/#sec-string.prototype.padstart
$({ target: 'String', proto: true, forced: WEBKIT_BUG }, {
  padStart: function padStart(maxLength /* , fillString = ' ' */) {
    return $padStart(this, maxLength, arguments.length > 1 ? arguments[1] : undefined);
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.string.trim.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/es.string.trim.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $trim = __webpack_require__(/*! ../internals/string-trim */ "./node_modules/core-js/internals/string-trim.js").trim;
var forcedStringTrimMethod = __webpack_require__(/*! ../internals/string-trim-forced */ "./node_modules/core-js/internals/string-trim-forced.js");

// `String.prototype.trim` method
// https://tc39.es/ecma262/#sec-string.prototype.trim
$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {
  trim: function trim() {
    return $trim(this);
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.symbol.to-primitive.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/modules/es.symbol.to-primitive.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var defineWellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol-define */ "./node_modules/core-js/internals/well-known-symbol-define.js");
var defineSymbolToPrimitive = __webpack_require__(/*! ../internals/symbol-define-to-primitive */ "./node_modules/core-js/internals/symbol-define-to-primitive.js");

// `Symbol.toPrimitive` well-known symbol
// https://tc39.es/ecma262/#sec-symbol.toprimitive
defineWellKnownSymbol('toPrimitive');

// `Symbol.prototype[@@toPrimitive]` method
// https://tc39.es/ecma262/#sec-symbol.prototype-@@toprimitive
defineSymbolToPrimitive();


/***/ }),

/***/ "./node_modules/core-js/modules/web.url-search-params.constructor.js":
/*!***************************************************************************!*\
  !*** ./node_modules/core-js/modules/web.url-search-params.constructor.js ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// TODO: in core-js@4, move /modules/ dependencies to public entries for better optimization by tools like `preset-env`
__webpack_require__(/*! ../modules/es.array.iterator */ "./node_modules/core-js/modules/es.array.iterator.js");
__webpack_require__(/*! ../modules/es.string.from-code-point */ "./node_modules/core-js/modules/es.string.from-code-point.js");
var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var globalThis = __webpack_require__(/*! ../internals/global-this */ "./node_modules/core-js/internals/global-this.js");
var safeGetBuiltIn = __webpack_require__(/*! ../internals/safe-get-built-in */ "./node_modules/core-js/internals/safe-get-built-in.js");
var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var USE_NATIVE_URL = __webpack_require__(/*! ../internals/url-constructor-detection */ "./node_modules/core-js/internals/url-constructor-detection.js");
var defineBuiltIn = __webpack_require__(/*! ../internals/define-built-in */ "./node_modules/core-js/internals/define-built-in.js");
var defineBuiltInAccessor = __webpack_require__(/*! ../internals/define-built-in-accessor */ "./node_modules/core-js/internals/define-built-in-accessor.js");
var defineBuiltIns = __webpack_require__(/*! ../internals/define-built-ins */ "./node_modules/core-js/internals/define-built-ins.js");
var setToStringTag = __webpack_require__(/*! ../internals/set-to-string-tag */ "./node_modules/core-js/internals/set-to-string-tag.js");
var createIteratorConstructor = __webpack_require__(/*! ../internals/iterator-create-constructor */ "./node_modules/core-js/internals/iterator-create-constructor.js");
var InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js");
var anInstance = __webpack_require__(/*! ../internals/an-instance */ "./node_modules/core-js/internals/an-instance.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var classof = __webpack_require__(/*! ../internals/classof */ "./node_modules/core-js/internals/classof.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var $toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var create = __webpack_require__(/*! ../internals/object-create */ "./node_modules/core-js/internals/object-create.js");
var createPropertyDescriptor = __webpack_require__(/*! ../internals/create-property-descriptor */ "./node_modules/core-js/internals/create-property-descriptor.js");
var getIterator = __webpack_require__(/*! ../internals/get-iterator */ "./node_modules/core-js/internals/get-iterator.js");
var getIteratorMethod = __webpack_require__(/*! ../internals/get-iterator-method */ "./node_modules/core-js/internals/get-iterator-method.js");
var createIterResultObject = __webpack_require__(/*! ../internals/create-iter-result-object */ "./node_modules/core-js/internals/create-iter-result-object.js");
var validateArgumentsLength = __webpack_require__(/*! ../internals/validate-arguments-length */ "./node_modules/core-js/internals/validate-arguments-length.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var arraySort = __webpack_require__(/*! ../internals/array-sort */ "./node_modules/core-js/internals/array-sort.js");

var ITERATOR = wellKnownSymbol('iterator');
var URL_SEARCH_PARAMS = 'URLSearchParams';
var URL_SEARCH_PARAMS_ITERATOR = URL_SEARCH_PARAMS + 'Iterator';
var setInternalState = InternalStateModule.set;
var getInternalParamsState = InternalStateModule.getterFor(URL_SEARCH_PARAMS);
var getInternalIteratorState = InternalStateModule.getterFor(URL_SEARCH_PARAMS_ITERATOR);

var nativeFetch = safeGetBuiltIn('fetch');
var NativeRequest = safeGetBuiltIn('Request');
var Headers = safeGetBuiltIn('Headers');
var RequestPrototype = NativeRequest && NativeRequest.prototype;
var HeadersPrototype = Headers && Headers.prototype;
var TypeError = globalThis.TypeError;
var encodeURIComponent = globalThis.encodeURIComponent;
var fromCharCode = String.fromCharCode;
var fromCodePoint = getBuiltIn('String', 'fromCodePoint');
var $parseInt = parseInt;
var charAt = uncurryThis(''.charAt);
var join = uncurryThis([].join);
var push = uncurryThis([].push);
var replace = uncurryThis(''.replace);
var shift = uncurryThis([].shift);
var splice = uncurryThis([].splice);
var split = uncurryThis(''.split);
var stringSlice = uncurryThis(''.slice);
var exec = uncurryThis(/./.exec);

var plus = /\+/g;
var FALLBACK_REPLACER = '\uFFFD';
var VALID_HEX = /^[0-9a-f]+$/i;

var parseHexOctet = function (string, start) {
  var substr = stringSlice(string, start, start + 2);
  if (!exec(VALID_HEX, substr)) return NaN;

  return $parseInt(substr, 16);
};

var getLeadingOnes = function (octet) {
  var count = 0;
  for (var mask = 0x80; mask > 0 && (octet & mask) !== 0; mask >>= 1) {
    count++;
  }
  return count;
};

var utf8Decode = function (octets) {
  var codePoint = null;

  switch (octets.length) {
    case 1:
      codePoint = octets[0];
      break;
    case 2:
      codePoint = (octets[0] & 0x1F) << 6 | (octets[1] & 0x3F);
      break;
    case 3:
      codePoint = (octets[0] & 0x0F) << 12 | (octets[1] & 0x3F) << 6 | (octets[2] & 0x3F);
      break;
    case 4:
      codePoint = (octets[0] & 0x07) << 18 | (octets[1] & 0x3F) << 12 | (octets[2] & 0x3F) << 6 | (octets[3] & 0x3F);
      break;
  }

  return codePoint > 0x10FFFF ? null : codePoint;
};

var decode = function (input) {
  input = replace(input, plus, ' ');
  var length = input.length;
  var result = '';
  var i = 0;

  while (i < length) {
    var decodedChar = charAt(input, i);

    if (decodedChar === '%') {
      if (charAt(input, i + 1) === '%' || i + 3 > length) {
        result += '%';
        i++;
        continue;
      }

      var octet = parseHexOctet(input, i + 1);

      // eslint-disable-next-line no-self-compare -- NaN check
      if (octet !== octet) {
        result += decodedChar;
        i++;
        continue;
      }

      i += 2;
      var byteSequenceLength = getLeadingOnes(octet);

      if (byteSequenceLength === 0) {
        decodedChar = fromCharCode(octet);
      } else {
        if (byteSequenceLength === 1 || byteSequenceLength > 4) {
          result += FALLBACK_REPLACER;
          i++;
          continue;
        }

        var octets = [octet];
        var sequenceIndex = 1;

        while (sequenceIndex < byteSequenceLength) {
          i++;
          if (i + 3 > length || charAt(input, i) !== '%') break;

          var nextByte = parseHexOctet(input, i + 1);

          // eslint-disable-next-line no-self-compare -- NaN check
          if (nextByte !== nextByte) {
            i += 3;
            break;
          }
          if (nextByte > 191 || nextByte < 128) break;

          push(octets, nextByte);
          i += 2;
          sequenceIndex++;
        }

        if (octets.length !== byteSequenceLength) {
          result += FALLBACK_REPLACER;
          continue;
        }

        var codePoint = utf8Decode(octets);
        if (codePoint === null) {
          result += FALLBACK_REPLACER;
        } else {
          decodedChar = fromCodePoint(codePoint);
        }
      }
    }

    result += decodedChar;
    i++;
  }

  return result;
};

var find = /[!'()~]|%20/g;

var replacements = {
  '!': '%21',
  "'": '%27',
  '(': '%28',
  ')': '%29',
  '~': '%7E',
  '%20': '+'
};

var replacer = function (match) {
  return replacements[match];
};

var serialize = function (it) {
  return replace(encodeURIComponent(it), find, replacer);
};

var URLSearchParamsIterator = createIteratorConstructor(function Iterator(params, kind) {
  setInternalState(this, {
    type: URL_SEARCH_PARAMS_ITERATOR,
    target: getInternalParamsState(params).entries,
    index: 0,
    kind: kind
  });
}, URL_SEARCH_PARAMS, function next() {
  var state = getInternalIteratorState(this);
  var target = state.target;
  var index = state.index++;
  if (!target || index >= target.length) {
    state.target = null;
    return createIterResultObject(undefined, true);
  }
  var entry = target[index];
  switch (state.kind) {
    case 'keys': return createIterResultObject(entry.key, false);
    case 'values': return createIterResultObject(entry.value, false);
  } return createIterResultObject([entry.key, entry.value], false);
}, true);

var URLSearchParamsState = function (init) {
  this.entries = [];
  this.url = null;

  if (init !== undefined) {
    if (isObject(init)) this.parseObject(init);
    else this.parseQuery(typeof init == 'string' ? charAt(init, 0) === '?' ? stringSlice(init, 1) : init : $toString(init));
  }
};

URLSearchParamsState.prototype = {
  type: URL_SEARCH_PARAMS,
  bindURL: function (url) {
    this.url = url;
    this.update();
  },
  parseObject: function (object) {
    var entries = this.entries;
    var iteratorMethod = getIteratorMethod(object);
    var iterator, next, step, entryIterator, entryNext, first, second;

    if (iteratorMethod) {
      iterator = getIterator(object, iteratorMethod);
      next = iterator.next;
      while (!(step = call(next, iterator)).done) {
        entryIterator = getIterator(anObject(step.value));
        entryNext = entryIterator.next;
        if (
          (first = call(entryNext, entryIterator)).done ||
          (second = call(entryNext, entryIterator)).done ||
          !call(entryNext, entryIterator).done
        ) throw new TypeError('Expected sequence with length 2');
        push(entries, { key: $toString(first.value), value: $toString(second.value) });
      }
    } else for (var key in object) if (hasOwn(object, key)) {
      push(entries, { key: key, value: $toString(object[key]) });
    }
  },
  parseQuery: function (query) {
    if (query) {
      var entries = this.entries;
      var attributes = split(query, '&');
      var index = 0;
      var attribute, entry;
      while (index < attributes.length) {
        attribute = attributes[index++];
        if (attribute.length) {
          entry = split(attribute, '=');
          push(entries, {
            key: decode(shift(entry)),
            value: decode(join(entry, '='))
          });
        }
      }
    }
  },
  serialize: function () {
    var entries = this.entries;
    var result = [];
    var index = 0;
    var entry;
    while (index < entries.length) {
      entry = entries[index++];
      push(result, serialize(entry.key) + '=' + serialize(entry.value));
    } return join(result, '&');
  },
  update: function () {
    this.entries.length = 0;
    this.parseQuery(this.url.query);
  },
  updateURL: function () {
    if (this.url) this.url.update();
  }
};

// `URLSearchParams` constructor
// https://url.spec.whatwg.org/#interface-urlsearchparams
var URLSearchParamsConstructor = function URLSearchParams(/* init */) {
  anInstance(this, URLSearchParamsPrototype);
  var init = arguments.length > 0 ? arguments[0] : undefined;
  var state = setInternalState(this, new URLSearchParamsState(init));
  if (!DESCRIPTORS) this.size = state.entries.length;
};

var URLSearchParamsPrototype = URLSearchParamsConstructor.prototype;

defineBuiltIns(URLSearchParamsPrototype, {
  // `URLSearchParams.prototype.append` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-append
  append: function append(name, value) {
    var state = getInternalParamsState(this);
    validateArgumentsLength(arguments.length, 2);
    push(state.entries, { key: $toString(name), value: $toString(value) });
    if (!DESCRIPTORS) this.length++;
    state.updateURL();
  },
  // `URLSearchParams.prototype.delete` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-delete
  'delete': function (name /* , value */) {
    var state = getInternalParamsState(this);
    var length = validateArgumentsLength(arguments.length, 1);
    var entries = state.entries;
    var key = $toString(name);
    var $value = length < 2 ? undefined : arguments[1];
    var value = $value === undefined ? $value : $toString($value);
    var index = 0;
    while (index < entries.length) {
      var entry = entries[index];
      if (entry.key === key && (value === undefined || entry.value === value)) {
        splice(entries, index, 1);
        if (value !== undefined) break;
      } else index++;
    }
    if (!DESCRIPTORS) this.size = entries.length;
    state.updateURL();
  },
  // `URLSearchParams.prototype.get` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-get
  get: function get(name) {
    var entries = getInternalParamsState(this).entries;
    validateArgumentsLength(arguments.length, 1);
    var key = $toString(name);
    var index = 0;
    for (; index < entries.length; index++) {
      if (entries[index].key === key) return entries[index].value;
    }
    return null;
  },
  // `URLSearchParams.prototype.getAll` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-getall
  getAll: function getAll(name) {
    var entries = getInternalParamsState(this).entries;
    validateArgumentsLength(arguments.length, 1);
    var key = $toString(name);
    var result = [];
    var index = 0;
    for (; index < entries.length; index++) {
      if (entries[index].key === key) push(result, entries[index].value);
    }
    return result;
  },
  // `URLSearchParams.prototype.has` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-has
  has: function has(name /* , value */) {
    var entries = getInternalParamsState(this).entries;
    var length = validateArgumentsLength(arguments.length, 1);
    var key = $toString(name);
    var $value = length < 2 ? undefined : arguments[1];
    var value = $value === undefined ? $value : $toString($value);
    var index = 0;
    while (index < entries.length) {
      var entry = entries[index++];
      if (entry.key === key && (value === undefined || entry.value === value)) return true;
    }
    return false;
  },
  // `URLSearchParams.prototype.set` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-set
  set: function set(name, value) {
    var state = getInternalParamsState(this);
    validateArgumentsLength(arguments.length, 1);
    var entries = state.entries;
    var found = false;
    var key = $toString(name);
    var val = $toString(value);
    var index = 0;
    var entry;
    for (; index < entries.length; index++) {
      entry = entries[index];
      if (entry.key === key) {
        if (found) splice(entries, index--, 1);
        else {
          found = true;
          entry.value = val;
        }
      }
    }
    if (!found) push(entries, { key: key, value: val });
    if (!DESCRIPTORS) this.size = entries.length;
    state.updateURL();
  },
  // `URLSearchParams.prototype.sort` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-sort
  sort: function sort() {
    var state = getInternalParamsState(this);
    arraySort(state.entries, function (a, b) {
      return a.key > b.key ? 1 : -1;
    });
    state.updateURL();
  },
  // `URLSearchParams.prototype.forEach` method
  forEach: function forEach(callback /* , thisArg */) {
    var entries = getInternalParamsState(this).entries;
    var boundFunction = bind(callback, arguments.length > 1 ? arguments[1] : undefined);
    var index = 0;
    var entry;
    while (index < entries.length) {
      entry = entries[index++];
      boundFunction(entry.value, entry.key, this);
    }
  },
  // `URLSearchParams.prototype.keys` method
  keys: function keys() {
    return new URLSearchParamsIterator(this, 'keys');
  },
  // `URLSearchParams.prototype.values` method
  values: function values() {
    return new URLSearchParamsIterator(this, 'values');
  },
  // `URLSearchParams.prototype.entries` method
  entries: function entries() {
    return new URLSearchParamsIterator(this, 'entries');
  }
}, { enumerable: true });

// `URLSearchParams.prototype[@@iterator]` method
defineBuiltIn(URLSearchParamsPrototype, ITERATOR, URLSearchParamsPrototype.entries, { name: 'entries' });

// `URLSearchParams.prototype.toString` method
// https://url.spec.whatwg.org/#urlsearchparams-stringification-behavior
defineBuiltIn(URLSearchParamsPrototype, 'toString', function toString() {
  return getInternalParamsState(this).serialize();
}, { enumerable: true });

// `URLSearchParams.prototype.size` getter
// https://github.com/whatwg/url/pull/734
if (DESCRIPTORS) defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {
  get: function size() {
    return getInternalParamsState(this).entries.length;
  },
  configurable: true,
  enumerable: true
});

setToStringTag(URLSearchParamsConstructor, URL_SEARCH_PARAMS);

$({ global: true, constructor: true, forced: !USE_NATIVE_URL }, {
  URLSearchParams: URLSearchParamsConstructor
});

// Wrap `fetch` and `Request` for correct work with polyfilled `URLSearchParams`
if (!USE_NATIVE_URL && isCallable(Headers)) {
  var headersHas = uncurryThis(HeadersPrototype.has);
  var headersSet = uncurryThis(HeadersPrototype.set);

  var wrapRequestOptions = function (init) {
    if (isObject(init)) {
      var body = init.body;
      var headers;
      if (classof(body) === URL_SEARCH_PARAMS) {
        headers = init.headers ? new Headers(init.headers) : new Headers();
        if (!headersHas(headers, 'content-type')) {
          headersSet(headers, 'content-type', 'application/x-www-form-urlencoded;charset=UTF-8');
        }
        return create(init, {
          body: createPropertyDescriptor(0, $toString(body)),
          headers: createPropertyDescriptor(0, headers)
        });
      }
    } return init;
  };

  if (isCallable(nativeFetch)) {
    $({ global: true, enumerable: true, dontCallGetSet: true, forced: true }, {
      fetch: function fetch(input /* , init */) {
        return nativeFetch(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});
      }
    });
  }

  if (isCallable(NativeRequest)) {
    var RequestConstructor = function Request(input /* , init */) {
      anInstance(this, RequestPrototype);
      return new NativeRequest(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});
    };

    RequestPrototype.constructor = RequestConstructor;
    RequestConstructor.prototype = RequestPrototype;

    $({ global: true, constructor: true, dontCallGetSet: true, forced: true }, {
      Request: RequestConstructor
    });
  }
}

module.exports = {
  URLSearchParams: URLSearchParamsConstructor,
  getState: getInternalParamsState
};


/***/ }),

/***/ "./node_modules/core-js/modules/web.url-search-params.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/modules/web.url-search-params.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// TODO: Remove this module from `core-js@4` since it's replaced to module below
__webpack_require__(/*! ../modules/web.url-search-params.constructor */ "./node_modules/core-js/modules/web.url-search-params.constructor.js");


/***/ }),

/***/ "./node_modules/core-js/modules/web.url.constructor.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/web.url.constructor.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// TODO: in core-js@4, move /modules/ dependencies to public entries for better optimization by tools like `preset-env`
__webpack_require__(/*! ../modules/es.string.iterator */ "./node_modules/core-js/modules/es.string.iterator.js");
var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var USE_NATIVE_URL = __webpack_require__(/*! ../internals/url-constructor-detection */ "./node_modules/core-js/internals/url-constructor-detection.js");
var globalThis = __webpack_require__(/*! ../internals/global-this */ "./node_modules/core-js/internals/global-this.js");
var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var defineBuiltIn = __webpack_require__(/*! ../internals/define-built-in */ "./node_modules/core-js/internals/define-built-in.js");
var defineBuiltInAccessor = __webpack_require__(/*! ../internals/define-built-in-accessor */ "./node_modules/core-js/internals/define-built-in-accessor.js");
var anInstance = __webpack_require__(/*! ../internals/an-instance */ "./node_modules/core-js/internals/an-instance.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var assign = __webpack_require__(/*! ../internals/object-assign */ "./node_modules/core-js/internals/object-assign.js");
var arrayFrom = __webpack_require__(/*! ../internals/array-from */ "./node_modules/core-js/internals/array-from.js");
var arraySlice = __webpack_require__(/*! ../internals/array-slice */ "./node_modules/core-js/internals/array-slice.js");
var codeAt = __webpack_require__(/*! ../internals/string-multibyte */ "./node_modules/core-js/internals/string-multibyte.js").codeAt;
var toASCII = __webpack_require__(/*! ../internals/string-punycode-to-ascii */ "./node_modules/core-js/internals/string-punycode-to-ascii.js");
var $toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var setToStringTag = __webpack_require__(/*! ../internals/set-to-string-tag */ "./node_modules/core-js/internals/set-to-string-tag.js");
var validateArgumentsLength = __webpack_require__(/*! ../internals/validate-arguments-length */ "./node_modules/core-js/internals/validate-arguments-length.js");
var URLSearchParamsModule = __webpack_require__(/*! ../modules/web.url-search-params.constructor */ "./node_modules/core-js/modules/web.url-search-params.constructor.js");
var InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js");

var setInternalState = InternalStateModule.set;
var getInternalURLState = InternalStateModule.getterFor('URL');
var URLSearchParams = URLSearchParamsModule.URLSearchParams;
var getInternalSearchParamsState = URLSearchParamsModule.getState;

var NativeURL = globalThis.URL;
var TypeError = globalThis.TypeError;
var parseInt = globalThis.parseInt;
var floor = Math.floor;
var pow = Math.pow;
var charAt = uncurryThis(''.charAt);
var exec = uncurryThis(/./.exec);
var join = uncurryThis([].join);
var numberToString = uncurryThis(1.0.toString);
var pop = uncurryThis([].pop);
var push = uncurryThis([].push);
var replace = uncurryThis(''.replace);
var shift = uncurryThis([].shift);
var split = uncurryThis(''.split);
var stringSlice = uncurryThis(''.slice);
var toLowerCase = uncurryThis(''.toLowerCase);
var unshift = uncurryThis([].unshift);

var INVALID_AUTHORITY = 'Invalid authority';
var INVALID_SCHEME = 'Invalid scheme';
var INVALID_HOST = 'Invalid host';
var INVALID_PORT = 'Invalid port';

var ALPHA = /[a-z]/i;
// eslint-disable-next-line regexp/no-obscure-range -- safe
var ALPHANUMERIC = /[\d+-.a-z]/i;
var DIGIT = /\d/;
var HEX_START = /^0x/i;
var OCT = /^[0-7]+$/;
var DEC = /^\d+$/;
var HEX = /^[\da-f]+$/i;
/* eslint-disable regexp/no-control-character -- safe */
var FORBIDDEN_HOST_CODE_POINT = /[\0\t\n\r #%/:<>?@[\\\]^|]/;
var FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT = /[\0\t\n\r #/:<>?@[\\\]^|]/;
var LEADING_C0_CONTROL_OR_SPACE = /^[\u0000-\u0020]+/;
var TRAILING_C0_CONTROL_OR_SPACE = /(^|[^\u0000-\u0020])[\u0000-\u0020]+$/;
var TAB_AND_NEW_LINE = /[\t\n\r]/g;
/* eslint-enable regexp/no-control-character -- safe */
var EOF;

// https://url.spec.whatwg.org/#ipv4-number-parser
var parseIPv4 = function (input) {
  var parts = split(input, '.');
  var partsLength, numbers, index, part, radix, number, ipv4;
  if (parts.length && parts[parts.length - 1] === '') {
    parts.length--;
  }
  partsLength = parts.length;
  if (partsLength > 4) return input;
  numbers = [];
  for (index = 0; index < partsLength; index++) {
    part = parts[index];
    if (part === '') return input;
    radix = 10;
    if (part.length > 1 && charAt(part, 0) === '0') {
      radix = exec(HEX_START, part) ? 16 : 8;
      part = stringSlice(part, radix === 8 ? 1 : 2);
    }
    if (part === '') {
      number = 0;
    } else {
      if (!exec(radix === 10 ? DEC : radix === 8 ? OCT : HEX, part)) return input;
      number = parseInt(part, radix);
    }
    push(numbers, number);
  }
  for (index = 0; index < partsLength; index++) {
    number = numbers[index];
    if (index === partsLength - 1) {
      if (number >= pow(256, 5 - partsLength)) return null;
    } else if (number > 255) return null;
  }
  ipv4 = pop(numbers);
  for (index = 0; index < numbers.length; index++) {
    ipv4 += numbers[index] * pow(256, 3 - index);
  }
  return ipv4;
};

// https://url.spec.whatwg.org/#concept-ipv6-parser
// eslint-disable-next-line max-statements -- TODO
var parseIPv6 = function (input) {
  var address = [0, 0, 0, 0, 0, 0, 0, 0];
  var pieceIndex = 0;
  var compress = null;
  var pointer = 0;
  var value, length, numbersSeen, ipv4Piece, number, swaps, swap;

  var chr = function () {
    return charAt(input, pointer);
  };

  if (chr() === ':') {
    if (charAt(input, 1) !== ':') return;
    pointer += 2;
    pieceIndex++;
    compress = pieceIndex;
  }
  while (chr()) {
    if (pieceIndex === 8) return;
    if (chr() === ':') {
      if (compress !== null) return;
      pointer++;
      pieceIndex++;
      compress = pieceIndex;
      continue;
    }
    value = length = 0;
    while (length < 4 && exec(HEX, chr())) {
      value = value * 16 + parseInt(chr(), 16);
      pointer++;
      length++;
    }
    if (chr() === '.') {
      if (length === 0) return;
      pointer -= length;
      if (pieceIndex > 6) return;
      numbersSeen = 0;
      while (chr()) {
        ipv4Piece = null;
        if (numbersSeen > 0) {
          if (chr() === '.' && numbersSeen < 4) pointer++;
          else return;
        }
        if (!exec(DIGIT, chr())) return;
        while (exec(DIGIT, chr())) {
          number = parseInt(chr(), 10);
          if (ipv4Piece === null) ipv4Piece = number;
          else if (ipv4Piece === 0) return;
          else ipv4Piece = ipv4Piece * 10 + number;
          if (ipv4Piece > 255) return;
          pointer++;
        }
        address[pieceIndex] = address[pieceIndex] * 256 + ipv4Piece;
        numbersSeen++;
        if (numbersSeen === 2 || numbersSeen === 4) pieceIndex++;
      }
      if (numbersSeen !== 4) return;
      break;
    } else if (chr() === ':') {
      pointer++;
      if (!chr()) return;
    } else if (chr()) return;
    address[pieceIndex++] = value;
  }
  if (compress !== null) {
    swaps = pieceIndex - compress;
    pieceIndex = 7;
    while (pieceIndex !== 0 && swaps > 0) {
      swap = address[pieceIndex];
      address[pieceIndex--] = address[compress + swaps - 1];
      address[compress + --swaps] = swap;
    }
  } else if (pieceIndex !== 8) return;
  return address;
};

var findLongestZeroSequence = function (ipv6) {
  var maxIndex = null;
  var maxLength = 1;
  var currStart = null;
  var currLength = 0;
  var index = 0;
  for (; index < 8; index++) {
    if (ipv6[index] !== 0) {
      if (currLength > maxLength) {
        maxIndex = currStart;
        maxLength = currLength;
      }
      currStart = null;
      currLength = 0;
    } else {
      if (currStart === null) currStart = index;
      ++currLength;
    }
  }
  return currLength > maxLength ? currStart : maxIndex;
};

// https://url.spec.whatwg.org/#host-serializing
var serializeHost = function (host) {
  var result, index, compress, ignore0;

  // ipv4
  if (typeof host == 'number') {
    result = [];
    for (index = 0; index < 4; index++) {
      unshift(result, host % 256);
      host = floor(host / 256);
    }
    return join(result, '.');
  }

  // ipv6
  if (typeof host == 'object') {
    result = '';
    compress = findLongestZeroSequence(host);
    for (index = 0; index < 8; index++) {
      if (ignore0 && host[index] === 0) continue;
      if (ignore0) ignore0 = false;
      if (compress === index) {
        result += index ? ':' : '::';
        ignore0 = true;
      } else {
        result += numberToString(host[index], 16);
        if (index < 7) result += ':';
      }
    }
    return '[' + result + ']';
  }

  return host;
};

var C0ControlPercentEncodeSet = {};
var fragmentPercentEncodeSet = assign({}, C0ControlPercentEncodeSet, {
  ' ': 1, '"': 1, '<': 1, '>': 1, '`': 1
});
var pathPercentEncodeSet = assign({}, fragmentPercentEncodeSet, {
  '#': 1, '?': 1, '{': 1, '}': 1
});
var userinfoPercentEncodeSet = assign({}, pathPercentEncodeSet, {
  '/': 1, ':': 1, ';': 1, '=': 1, '@': 1, '[': 1, '\\': 1, ']': 1, '^': 1, '|': 1
});

var percentEncode = function (chr, set) {
  var code = codeAt(chr, 0);
  return code > 0x20 && code < 0x7F && !hasOwn(set, chr) ? chr : encodeURIComponent(chr);
};

// https://url.spec.whatwg.org/#special-scheme
var specialSchemes = {
  ftp: 21,
  file: null,
  http: 80,
  https: 443,
  ws: 80,
  wss: 443
};

// https://url.spec.whatwg.org/#windows-drive-letter
var isWindowsDriveLetter = function (string, normalized) {
  var second;
  return string.length === 2 && exec(ALPHA, charAt(string, 0))
    && ((second = charAt(string, 1)) === ':' || (!normalized && second === '|'));
};

// https://url.spec.whatwg.org/#start-with-a-windows-drive-letter
var startsWithWindowsDriveLetter = function (string) {
  var third;
  return string.length > 1 && isWindowsDriveLetter(stringSlice(string, 0, 2)) && (
    string.length === 2 ||
    ((third = charAt(string, 2)) === '/' || third === '\\' || third === '?' || third === '#')
  );
};

// https://url.spec.whatwg.org/#single-dot-path-segment
var isSingleDot = function (segment) {
  return segment === '.' || toLowerCase(segment) === '%2e';
};

// https://url.spec.whatwg.org/#double-dot-path-segment
var isDoubleDot = function (segment) {
  segment = toLowerCase(segment);
  return segment === '..' || segment === '%2e.' || segment === '.%2e' || segment === '%2e%2e';
};

// States:
var SCHEME_START = {};
var SCHEME = {};
var NO_SCHEME = {};
var SPECIAL_RELATIVE_OR_AUTHORITY = {};
var PATH_OR_AUTHORITY = {};
var RELATIVE = {};
var RELATIVE_SLASH = {};
var SPECIAL_AUTHORITY_SLASHES = {};
var SPECIAL_AUTHORITY_IGNORE_SLASHES = {};
var AUTHORITY = {};
var HOST = {};
var HOSTNAME = {};
var PORT = {};
var FILE = {};
var FILE_SLASH = {};
var FILE_HOST = {};
var PATH_START = {};
var PATH = {};
var CANNOT_BE_A_BASE_URL_PATH = {};
var QUERY = {};
var FRAGMENT = {};

var URLState = function (url, isBase, base) {
  var urlString = $toString(url);
  var baseState, failure, searchParams;
  if (isBase) {
    failure = this.parse(urlString);
    if (failure) throw new TypeError(failure);
    this.searchParams = null;
  } else {
    if (base !== undefined) baseState = new URLState(base, true);
    failure = this.parse(urlString, null, baseState);
    if (failure) throw new TypeError(failure);
    searchParams = getInternalSearchParamsState(new URLSearchParams());
    searchParams.bindURL(this);
    this.searchParams = searchParams;
  }
};

URLState.prototype = {
  type: 'URL',
  // https://url.spec.whatwg.org/#url-parsing
  // eslint-disable-next-line max-statements -- TODO
  parse: function (input, stateOverride, base) {
    var url = this;
    var state = stateOverride || SCHEME_START;
    var pointer = 0;
    var buffer = '';
    var seenAt = false;
    var seenBracket = false;
    var seenPasswordToken = false;
    var codePoints, chr, bufferCodePoints, failure;

    input = $toString(input);

    if (!stateOverride) {
      url.scheme = '';
      url.username = '';
      url.password = '';
      url.host = null;
      url.port = null;
      url.path = [];
      url.query = null;
      url.fragment = null;
      url.cannotBeABaseURL = false;
      input = replace(input, LEADING_C0_CONTROL_OR_SPACE, '');
      input = replace(input, TRAILING_C0_CONTROL_OR_SPACE, '$1');
    }

    input = replace(input, TAB_AND_NEW_LINE, '');

    codePoints = arrayFrom(input);

    while (pointer <= codePoints.length) {
      chr = codePoints[pointer];
      switch (state) {
        case SCHEME_START:
          if (chr && exec(ALPHA, chr)) {
            buffer += toLowerCase(chr);
            state = SCHEME;
          } else if (!stateOverride) {
            state = NO_SCHEME;
            continue;
          } else return INVALID_SCHEME;
          break;

        case SCHEME:
          if (chr && (exec(ALPHANUMERIC, chr) || chr === '+' || chr === '-' || chr === '.')) {
            buffer += toLowerCase(chr);
          } else if (chr === ':') {
            if (stateOverride && (
              (url.isSpecial() !== hasOwn(specialSchemes, buffer)) ||
              (buffer === 'file' && (url.includesCredentials() || url.port !== null)) ||
              (url.scheme === 'file' && !url.host)
            )) return;
            url.scheme = buffer;
            if (stateOverride) {
              if (url.isSpecial() && specialSchemes[url.scheme] === url.port) url.port = null;
              return;
            }
            buffer = '';
            if (url.scheme === 'file') {
              state = FILE;
            } else if (url.isSpecial() && base && base.scheme === url.scheme) {
              state = SPECIAL_RELATIVE_OR_AUTHORITY;
            } else if (url.isSpecial()) {
              state = SPECIAL_AUTHORITY_SLASHES;
            } else if (codePoints[pointer + 1] === '/') {
              state = PATH_OR_AUTHORITY;
              pointer++;
            } else {
              url.cannotBeABaseURL = true;
              push(url.path, '');
              state = CANNOT_BE_A_BASE_URL_PATH;
            }
          } else if (!stateOverride) {
            buffer = '';
            state = NO_SCHEME;
            pointer = 0;
            continue;
          } else return INVALID_SCHEME;
          break;

        case NO_SCHEME:
          if (!base || (base.cannotBeABaseURL && chr !== '#')) return INVALID_SCHEME;
          if (base.cannotBeABaseURL && chr === '#') {
            url.scheme = base.scheme;
            url.path = arraySlice(base.path);
            url.query = base.query;
            url.fragment = '';
            url.cannotBeABaseURL = true;
            state = FRAGMENT;
            break;
          }
          state = base.scheme === 'file' ? FILE : RELATIVE;
          continue;

        case SPECIAL_RELATIVE_OR_AUTHORITY:
          if (chr === '/' && codePoints[pointer + 1] === '/') {
            state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
            pointer++;
          } else {
            state = RELATIVE;
            continue;
          } break;

        case PATH_OR_AUTHORITY:
          if (chr === '/') {
            state = AUTHORITY;
            break;
          } else {
            state = PATH;
            continue;
          }

        case RELATIVE:
          url.scheme = base.scheme;
          if (chr === EOF) {
            url.username = base.username;
            url.password = base.password;
            url.host = base.host;
            url.port = base.port;
            url.path = arraySlice(base.path);
            url.query = base.query;
          } else if (chr === '/' || (chr === '\\' && url.isSpecial())) {
            state = RELATIVE_SLASH;
          } else if (chr === '?') {
            url.username = base.username;
            url.password = base.password;
            url.host = base.host;
            url.port = base.port;
            url.path = arraySlice(base.path);
            url.query = '';
            state = QUERY;
          } else if (chr === '#') {
            url.username = base.username;
            url.password = base.password;
            url.host = base.host;
            url.port = base.port;
            url.path = arraySlice(base.path);
            url.query = base.query;
            url.fragment = '';
            state = FRAGMENT;
          } else {
            url.username = base.username;
            url.password = base.password;
            url.host = base.host;
            url.port = base.port;
            url.path = arraySlice(base.path);
            url.path.length--;
            state = PATH;
            continue;
          } break;

        case RELATIVE_SLASH:
          if (url.isSpecial() && (chr === '/' || chr === '\\')) {
            state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
          } else if (chr === '/') {
            state = AUTHORITY;
          } else {
            url.username = base.username;
            url.password = base.password;
            url.host = base.host;
            url.port = base.port;
            state = PATH;
            continue;
          } break;

        case SPECIAL_AUTHORITY_SLASHES:
          state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
          if (chr !== '/' || charAt(buffer, pointer + 1) !== '/') continue;
          pointer++;
          break;

        case SPECIAL_AUTHORITY_IGNORE_SLASHES:
          if (chr !== '/' && chr !== '\\') {
            state = AUTHORITY;
            continue;
          } break;

        case AUTHORITY:
          if (chr === '@') {
            if (seenAt) buffer = '%40' + buffer;
            seenAt = true;
            bufferCodePoints = arrayFrom(buffer);
            for (var i = 0; i < bufferCodePoints.length; i++) {
              var codePoint = bufferCodePoints[i];
              if (codePoint === ':' && !seenPasswordToken) {
                seenPasswordToken = true;
                continue;
              }
              var encodedCodePoints = percentEncode(codePoint, userinfoPercentEncodeSet);
              if (seenPasswordToken) url.password += encodedCodePoints;
              else url.username += encodedCodePoints;
            }
            buffer = '';
          } else if (
            chr === EOF || chr === '/' || chr === '?' || chr === '#' ||
            (chr === '\\' && url.isSpecial())
          ) {
            if (seenAt && buffer === '') return INVALID_AUTHORITY;
            pointer -= arrayFrom(buffer).length + 1;
            buffer = '';
            state = HOST;
          } else buffer += chr;
          break;

        case HOST:
        case HOSTNAME:
          if (stateOverride && url.scheme === 'file') {
            state = FILE_HOST;
            continue;
          } else if (chr === ':' && !seenBracket) {
            if (buffer === '') return INVALID_HOST;
            failure = url.parseHost(buffer);
            if (failure) return failure;
            buffer = '';
            state = PORT;
            if (stateOverride === HOSTNAME) return;
          } else if (
            chr === EOF || chr === '/' || chr === '?' || chr === '#' ||
            (chr === '\\' && url.isSpecial())
          ) {
            if (url.isSpecial() && buffer === '') return INVALID_HOST;
            if (stateOverride && buffer === '' && (url.includesCredentials() || url.port !== null)) return;
            failure = url.parseHost(buffer);
            if (failure) return failure;
            buffer = '';
            state = PATH_START;
            if (stateOverride) return;
            continue;
          } else {
            if (chr === '[') seenBracket = true;
            else if (chr === ']') seenBracket = false;
            buffer += chr;
          } break;

        case PORT:
          if (exec(DIGIT, chr)) {
            buffer += chr;
          } else if (
            chr === EOF || chr === '/' || chr === '?' || chr === '#' ||
            (chr === '\\' && url.isSpecial()) ||
            stateOverride
          ) {
            if (buffer !== '') {
              var port = parseInt(buffer, 10);
              if (port > 0xFFFF) return INVALID_PORT;
              url.port = (url.isSpecial() && port === specialSchemes[url.scheme]) ? null : port;
              buffer = '';
            }
            if (stateOverride) return;
            state = PATH_START;
            continue;
          } else return INVALID_PORT;
          break;

        case FILE:
          url.scheme = 'file';
          if (chr === '/' || chr === '\\') state = FILE_SLASH;
          else if (base && base.scheme === 'file') {
            switch (chr) {
              case EOF:
                url.host = base.host;
                url.path = arraySlice(base.path);
                url.query = base.query;
                break;
              case '?':
                url.host = base.host;
                url.path = arraySlice(base.path);
                url.query = '';
                state = QUERY;
                break;
              case '#':
                url.host = base.host;
                url.path = arraySlice(base.path);
                url.query = base.query;
                url.fragment = '';
                state = FRAGMENT;
                break;
              default:
                if (!startsWithWindowsDriveLetter(join(arraySlice(codePoints, pointer), ''))) {
                  url.host = base.host;
                  url.path = arraySlice(base.path);
                  url.shortenPath();
                }
                state = PATH;
                continue;
            }
          } else {
            state = PATH;
            continue;
          } break;

        case FILE_SLASH:
          if (chr === '/' || chr === '\\') {
            state = FILE_HOST;
            break;
          }
          if (base && base.scheme === 'file' && !startsWithWindowsDriveLetter(join(arraySlice(codePoints, pointer), ''))) {
            if (isWindowsDriveLetter(base.path[0], true)) push(url.path, base.path[0]);
            else url.host = base.host;
          }
          state = PATH;
          continue;

        case FILE_HOST:
          if (chr === EOF || chr === '/' || chr === '\\' || chr === '?' || chr === '#') {
            if (!stateOverride && isWindowsDriveLetter(buffer)) {
              state = PATH;
            } else if (buffer === '') {
              url.host = '';
              if (stateOverride) return;
              state = PATH_START;
            } else {
              failure = url.parseHost(buffer);
              if (failure) return failure;
              if (url.host === 'localhost') url.host = '';
              if (stateOverride) return;
              buffer = '';
              state = PATH_START;
            } continue;
          } else buffer += chr;
          break;

        case PATH_START:
          if (url.isSpecial()) {
            state = PATH;
            if (chr !== '/' && chr !== '\\') continue;
          } else if (!stateOverride && chr === '?') {
            url.query = '';
            state = QUERY;
          } else if (!stateOverride && chr === '#') {
            url.fragment = '';
            state = FRAGMENT;
          } else if (chr !== EOF) {
            state = PATH;
            if (chr !== '/') continue;
          } break;

        case PATH:
          if (
            chr === EOF || chr === '/' ||
            (chr === '\\' && url.isSpecial()) ||
            (!stateOverride && (chr === '?' || chr === '#'))
          ) {
            if (isDoubleDot(buffer)) {
              url.shortenPath();
              if (chr !== '/' && !(chr === '\\' && url.isSpecial())) {
                push(url.path, '');
              }
            } else if (isSingleDot(buffer)) {
              if (chr !== '/' && !(chr === '\\' && url.isSpecial())) {
                push(url.path, '');
              }
            } else {
              if (url.scheme === 'file' && !url.path.length && isWindowsDriveLetter(buffer)) {
                if (url.host) url.host = '';
                buffer = charAt(buffer, 0) + ':'; // normalize windows drive letter
              }
              push(url.path, buffer);
            }
            buffer = '';
            if (url.scheme === 'file' && (chr === EOF || chr === '?' || chr === '#')) {
              while (url.path.length > 1 && url.path[0] === '') {
                shift(url.path);
              }
            }
            if (chr === '?') {
              url.query = '';
              state = QUERY;
            } else if (chr === '#') {
              url.fragment = '';
              state = FRAGMENT;
            }
          } else {
            buffer += percentEncode(chr, pathPercentEncodeSet);
          } break;

        case CANNOT_BE_A_BASE_URL_PATH:
          if (chr === '?') {
            url.query = '';
            state = QUERY;
          } else if (chr === '#') {
            url.fragment = '';
            state = FRAGMENT;
          } else if (chr !== EOF) {
            url.path[0] += percentEncode(chr, C0ControlPercentEncodeSet);
          } break;

        case QUERY:
          if (!stateOverride && chr === '#') {
            url.fragment = '';
            state = FRAGMENT;
          } else if (chr !== EOF) {
            if (chr === "'" && url.isSpecial()) url.query += '%27';
            else if (chr === '#') url.query += '%23';
            else url.query += percentEncode(chr, C0ControlPercentEncodeSet);
          } break;

        case FRAGMENT:
          if (chr !== EOF) url.fragment += percentEncode(chr, fragmentPercentEncodeSet);
          break;
      }

      pointer++;
    }
  },
  // https://url.spec.whatwg.org/#host-parsing
  parseHost: function (input) {
    var result, codePoints, index;
    if (charAt(input, 0) === '[') {
      if (charAt(input, input.length - 1) !== ']') return INVALID_HOST;
      result = parseIPv6(stringSlice(input, 1, -1));
      if (!result) return INVALID_HOST;
      this.host = result;
    // opaque host
    } else if (!this.isSpecial()) {
      if (exec(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT, input)) return INVALID_HOST;
      result = '';
      codePoints = arrayFrom(input);
      for (index = 0; index < codePoints.length; index++) {
        result += percentEncode(codePoints[index], C0ControlPercentEncodeSet);
      }
      this.host = result;
    } else {
      input = toASCII(input);
      if (exec(FORBIDDEN_HOST_CODE_POINT, input)) return INVALID_HOST;
      result = parseIPv4(input);
      if (result === null) return INVALID_HOST;
      this.host = result;
    }
  },
  // https://url.spec.whatwg.org/#cannot-have-a-username-password-port
  cannotHaveUsernamePasswordPort: function () {
    return !this.host || this.cannotBeABaseURL || this.scheme === 'file';
  },
  // https://url.spec.whatwg.org/#include-credentials
  includesCredentials: function () {
    return this.username !== '' || this.password !== '';
  },
  // https://url.spec.whatwg.org/#is-special
  isSpecial: function () {
    return hasOwn(specialSchemes, this.scheme);
  },
  // https://url.spec.whatwg.org/#shorten-a-urls-path
  shortenPath: function () {
    var path = this.path;
    var pathSize = path.length;
    if (pathSize && (this.scheme !== 'file' || pathSize !== 1 || !isWindowsDriveLetter(path[0], true))) {
      path.length--;
    }
  },
  // https://url.spec.whatwg.org/#concept-url-serializer
  serialize: function () {
    var url = this;
    var scheme = url.scheme;
    var username = url.username;
    var password = url.password;
    var host = url.host;
    var port = url.port;
    var path = url.path;
    var query = url.query;
    var fragment = url.fragment;
    var output = scheme + ':';
    if (host !== null) {
      output += '//';
      if (url.includesCredentials()) {
        output += username + (password ? ':' + password : '') + '@';
      }
      output += serializeHost(host);
      if (port !== null) output += ':' + port;
    } else if (scheme === 'file') output += '//';
    output += url.cannotBeABaseURL ? path[0] : path.length ? '/' + join(path, '/') : '';
    if (query !== null) output += '?' + query;
    if (fragment !== null) output += '#' + fragment;
    return output;
  },
  // https://url.spec.whatwg.org/#dom-url-href
  setHref: function (href) {
    var failure = this.parse(href);
    if (failure) throw new TypeError(failure);
    this.searchParams.update();
  },
  // https://url.spec.whatwg.org/#dom-url-origin
  getOrigin: function () {
    var scheme = this.scheme;
    var port = this.port;
    if (scheme === 'blob') try {
      return new URLConstructor(scheme.path[0]).origin;
    } catch (error) {
      return 'null';
    }
    if (scheme === 'file' || !this.isSpecial()) return 'null';
    return scheme + '://' + serializeHost(this.host) + (port !== null ? ':' + port : '');
  },
  // https://url.spec.whatwg.org/#dom-url-protocol
  getProtocol: function () {
    return this.scheme + ':';
  },
  setProtocol: function (protocol) {
    this.parse($toString(protocol) + ':', SCHEME_START);
  },
  // https://url.spec.whatwg.org/#dom-url-username
  getUsername: function () {
    return this.username;
  },
  setUsername: function (username) {
    var codePoints = arrayFrom($toString(username));
    if (this.cannotHaveUsernamePasswordPort()) return;
    this.username = '';
    for (var i = 0; i < codePoints.length; i++) {
      this.username += percentEncode(codePoints[i], userinfoPercentEncodeSet);
    }
  },
  // https://url.spec.whatwg.org/#dom-url-password
  getPassword: function () {
    return this.password;
  },
  setPassword: function (password) {
    var codePoints = arrayFrom($toString(password));
    if (this.cannotHaveUsernamePasswordPort()) return;
    this.password = '';
    for (var i = 0; i < codePoints.length; i++) {
      this.password += percentEncode(codePoints[i], userinfoPercentEncodeSet);
    }
  },
  // https://url.spec.whatwg.org/#dom-url-host
  getHost: function () {
    var host = this.host;
    var port = this.port;
    return host === null ? ''
      : port === null ? serializeHost(host)
      : serializeHost(host) + ':' + port;
  },
  setHost: function (host) {
    if (this.cannotBeABaseURL) return;
    this.parse(host, HOST);
  },
  // https://url.spec.whatwg.org/#dom-url-hostname
  getHostname: function () {
    var host = this.host;
    return host === null ? '' : serializeHost(host);
  },
  setHostname: function (hostname) {
    if (this.cannotBeABaseURL) return;
    this.parse(hostname, HOSTNAME);
  },
  // https://url.spec.whatwg.org/#dom-url-port
  getPort: function () {
    var port = this.port;
    return port === null ? '' : $toString(port);
  },
  setPort: function (port) {
    if (this.cannotHaveUsernamePasswordPort()) return;
    port = $toString(port);
    if (port === '') this.port = null;
    else this.parse(port, PORT);
  },
  // https://url.spec.whatwg.org/#dom-url-pathname
  getPathname: function () {
    var path = this.path;
    return this.cannotBeABaseURL ? path[0] : path.length ? '/' + join(path, '/') : '';
  },
  setPathname: function (pathname) {
    if (this.cannotBeABaseURL) return;
    this.path = [];
    this.parse(pathname, PATH_START);
  },
  // https://url.spec.whatwg.org/#dom-url-search
  getSearch: function () {
    var query = this.query;
    return query ? '?' + query : '';
  },
  setSearch: function (search) {
    search = $toString(search);
    if (search === '') {
      this.query = null;
    } else {
      if (charAt(search, 0) === '?') search = stringSlice(search, 1);
      this.query = '';
      this.parse(search, QUERY);
    }
    this.searchParams.update();
  },
  // https://url.spec.whatwg.org/#dom-url-searchparams
  getSearchParams: function () {
    return this.searchParams.facade;
  },
  // https://url.spec.whatwg.org/#dom-url-hash
  getHash: function () {
    var fragment = this.fragment;
    return fragment ? '#' + fragment : '';
  },
  setHash: function (hash) {
    hash = $toString(hash);
    if (hash === '') {
      this.fragment = null;
      return;
    }
    if (charAt(hash, 0) === '#') hash = stringSlice(hash, 1);
    this.fragment = '';
    this.parse(hash, FRAGMENT);
  },
  update: function () {
    this.query = this.searchParams.serialize() || null;
  }
};

// `URL` constructor
// https://url.spec.whatwg.org/#url-class
var URLConstructor = function URL(url /* , base */) {
  var that = anInstance(this, URLPrototype);
  var base = validateArgumentsLength(arguments.length, 1) > 1 ? arguments[1] : undefined;
  var state = setInternalState(that, new URLState(url, false, base));
  if (!DESCRIPTORS) {
    that.href = state.serialize();
    that.origin = state.getOrigin();
    that.protocol = state.getProtocol();
    that.username = state.getUsername();
    that.password = state.getPassword();
    that.host = state.getHost();
    that.hostname = state.getHostname();
    that.port = state.getPort();
    that.pathname = state.getPathname();
    that.search = state.getSearch();
    that.searchParams = state.getSearchParams();
    that.hash = state.getHash();
  }
};

var URLPrototype = URLConstructor.prototype;

var accessorDescriptor = function (getter, setter) {
  return {
    get: function () {
      return getInternalURLState(this)[getter]();
    },
    set: setter && function (value) {
      return getInternalURLState(this)[setter](value);
    },
    configurable: true,
    enumerable: true
  };
};

if (DESCRIPTORS) {
  // `URL.prototype.href` accessors pair
  // https://url.spec.whatwg.org/#dom-url-href
  defineBuiltInAccessor(URLPrototype, 'href', accessorDescriptor('serialize', 'setHref'));
  // `URL.prototype.origin` getter
  // https://url.spec.whatwg.org/#dom-url-origin
  defineBuiltInAccessor(URLPrototype, 'origin', accessorDescriptor('getOrigin'));
  // `URL.prototype.protocol` accessors pair
  // https://url.spec.whatwg.org/#dom-url-protocol
  defineBuiltInAccessor(URLPrototype, 'protocol', accessorDescriptor('getProtocol', 'setProtocol'));
  // `URL.prototype.username` accessors pair
  // https://url.spec.whatwg.org/#dom-url-username
  defineBuiltInAccessor(URLPrototype, 'username', accessorDescriptor('getUsername', 'setUsername'));
  // `URL.prototype.password` accessors pair
  // https://url.spec.whatwg.org/#dom-url-password
  defineBuiltInAccessor(URLPrototype, 'password', accessorDescriptor('getPassword', 'setPassword'));
  // `URL.prototype.host` accessors pair
  // https://url.spec.whatwg.org/#dom-url-host
  defineBuiltInAccessor(URLPrototype, 'host', accessorDescriptor('getHost', 'setHost'));
  // `URL.prototype.hostname` accessors pair
  // https://url.spec.whatwg.org/#dom-url-hostname
  defineBuiltInAccessor(URLPrototype, 'hostname', accessorDescriptor('getHostname', 'setHostname'));
  // `URL.prototype.port` accessors pair
  // https://url.spec.whatwg.org/#dom-url-port
  defineBuiltInAccessor(URLPrototype, 'port', accessorDescriptor('getPort', 'setPort'));
  // `URL.prototype.pathname` accessors pair
  // https://url.spec.whatwg.org/#dom-url-pathname
  defineBuiltInAccessor(URLPrototype, 'pathname', accessorDescriptor('getPathname', 'setPathname'));
  // `URL.prototype.search` accessors pair
  // https://url.spec.whatwg.org/#dom-url-search
  defineBuiltInAccessor(URLPrototype, 'search', accessorDescriptor('getSearch', 'setSearch'));
  // `URL.prototype.searchParams` getter
  // https://url.spec.whatwg.org/#dom-url-searchparams
  defineBuiltInAccessor(URLPrototype, 'searchParams', accessorDescriptor('getSearchParams'));
  // `URL.prototype.hash` accessors pair
  // https://url.spec.whatwg.org/#dom-url-hash
  defineBuiltInAccessor(URLPrototype, 'hash', accessorDescriptor('getHash', 'setHash'));
}

// `URL.prototype.toJSON` method
// https://url.spec.whatwg.org/#dom-url-tojson
defineBuiltIn(URLPrototype, 'toJSON', function toJSON() {
  return getInternalURLState(this).serialize();
}, { enumerable: true });

// `URL.prototype.toString` method
// https://url.spec.whatwg.org/#URL-stringification-behavior
defineBuiltIn(URLPrototype, 'toString', function toString() {
  return getInternalURLState(this).serialize();
}, { enumerable: true });

if (NativeURL) {
  var nativeCreateObjectURL = NativeURL.createObjectURL;
  var nativeRevokeObjectURL = NativeURL.revokeObjectURL;
  // `URL.createObjectURL` method
  // https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL
  if (nativeCreateObjectURL) defineBuiltIn(URLConstructor, 'createObjectURL', bind(nativeCreateObjectURL, NativeURL));
  // `URL.revokeObjectURL` method
  // https://developer.mozilla.org/en-US/docs/Web/API/URL/revokeObjectURL
  if (nativeRevokeObjectURL) defineBuiltIn(URLConstructor, 'revokeObjectURL', bind(nativeRevokeObjectURL, NativeURL));
}

setToStringTag(URLConstructor, 'URL');

$({ global: true, constructor: true, forced: !USE_NATIVE_URL, sham: !DESCRIPTORS }, {
  URL: URLConstructor
});


/***/ }),

/***/ "./node_modules/core-js/modules/web.url.js":
/*!*************************************************!*\
  !*** ./node_modules/core-js/modules/web.url.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// TODO: Remove this module from `core-js@4` since it's replaced to module below
__webpack_require__(/*! ../modules/web.url.constructor */ "./node_modules/core-js/modules/web.url.constructor.js");


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/components/common/test/chat.vue?vue&type=style&index=0&lang=scss&":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--9-oneOf-1-2!./node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/common/test/chat.vue?vue&type=style&index=0&lang=scss& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, "@charset \"UTF-8\";\n.no-border {\n  border: none;\n  /* 可选的样式，以去除焦点时的边框（如果需要的话） */\n  outline: none;\n  width: none;\n  height: none;\n  resize: none;\n}\n.content {\n  width: 100%;\n  height: calc(100vh - 55px);\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.content .el_main_content {\n  width: 100%;\n  height: calc(100% - 3px);\n  margin: auto;\n}\n.content .el_main_content .main_content_header {\n  width: 100%;\n  height: 50px;\n  border-radius: 5px;\n  background-color: #7de0bd;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 16px;\n}\n.content .el_main_content .main_content_center {\n  width: 100%;\n  position: relative;\n  height: calc(100% - 70px);\n  margin: 10px 0px;\n  overflow-y: auto;\n}\n.content .el_main_content .main_content_center .chat_time {\n  display: flex;\n  justify-content: center;\n  font-size: 12px;\n}\n.content .el_main_content .main_content_center .question {\n  justify-content: flex-end;\n}\n.content .el_main_content .main_content_center .chat_question {\n  background-color: #8ce45f;\n  margin-right: 5px;\n  color: #ffffff;\n  font-size: 14px;\n}\n.content .el_main_content .main_content_center .chat_answer {\n  max-width: 60%;\n  background-color: #f2f3f5;\n  margin-left: 5px;\n  padding: 5px 10px 10px 10px;\n  border-radius: 2px;\n  font-size: 14px;\n}\n.content .el_main_content .main_content_center .chat_answer p {\n  font-size: 14px;\n  margin-bottom: 10px;\n}\n.content .el_main_content .main_content_center .chat_answer .chat_answer_content {\n  width: 100%;\n  height: auto;\n  padding: 5px 0;\n  color: #6492ff;\n}\n.content .el_main_content .main_content_center .chat_answer .chat_answer_content .words {\n  font-size: 13px;\n  line-height: 18px;\n  padding-left: 26px;\n  color: #666;\n}\n.content .el_main_content .main_content_center .chat_answer .loading-icon {\n  border: 2px solid #ddd;\n  /* Light grey background */\n  border-top: 2px solid #3498db;\n  /* Blue background for the top half */\n  border-radius: 50%;\n  width: 16px;\n  height: 16px;\n  -webkit-animation: spin 1s linear infinite;\n          animation: spin 1s linear infinite;\n  float: left;\n}\n@-webkit-keyframes spin {\nto {\n    transform: rotate(360deg);\n}\n}\n@keyframes spin {\nto {\n    transform: rotate(360deg);\n}\n}\n.content .el_main_content .main_content_center .chat {\n  width: 98%;\n  margin: 10px auto;\n  display: flex;\n}\n.content .el_main_content .main_content_center .chat_common {\n  max-width: 40%;\n  padding: 2px 5px;\n  border-radius: 2px;\n  word-break: break-all;\n  display: flex;\n  align-items: center;\n}\n.content .el_main_content .main_content_center .avatar {\n  background-color: #409eff;\n}\n.content .el_main_content .main_content_center .me {\n  font-size: 14px;\n  color: #ffffff;\n}\n.content .el_main_content .main_content_footer {\n  width: 100%;\n  height: 50px;\n  border-top: 1px solid #e4e7ed;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: #f5f5f5;\n}\n.content .el_main_content .main_content_footer .el-icon-microphone {\n  font-size: 28px;\n  color: #6492ff;\n  margin-left: 15px;\n}\n.content .el_main_content .main_content_footer .el-icon-turn-off-microphone {\n  font-size: 28px;\n  margin-left: 15px;\n}\n.content .el_main_content .main_content_footer .input_box {\n  width: calc(100% - 130px);\n  height: 50px;\n  float: left;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.content .el_main_content .main_content_footer .input_box .chat-input {\n  width: 100%;\n  height: 34px;\n  line-height: 24px;\n  font-size: 14px;\n  padding: 3px 8px;\n  color: #666;\n  margin-left: 5px;\n  border-radius: 5px;\n}\n.content .el_main_content .main_content_footer .input_box .chat-div {\n  width: 100%;\n  height: 40px;\n  line-height: 40px;\n  font-size: 14px;\n  text-align: center;\n  color: #666;\n  margin-left: 5px;\n  border-radius: 5px;\n  background: #fff;\n  position: relative;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.content .el_main_content .main_content_footer .input_box .chat-div .chat-mask {\n  width: 100%;\n  height: 24px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  border-radius: 5px;\n  z-index: 9999;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.content .el_main_content .main_content_footer .input_box .chat-div-active {\n  width: 100%;\n  height: 40px;\n  line-height: 40px;\n  font-size: 14px;\n  text-align: center;\n  color: #fff;\n  margin-left: 5px;\n  border-radius: 5px;\n  background: #409eff;\n  position: relative;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  -webkit-animation: blink 1s linear infinite;\n          animation: blink 1s linear infinite;\n}\n.content .el_main_content .main_content_footer .btn_box {\n  width: 90px;\n  height: 50px;\n  float: left;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/components/common/test/chat.vue?vue&type=style&index=1&lang=scss&":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--9-oneOf-1-2!./node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/common/test/chat.vue?vue&type=style&index=1&lang=scss& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".el-avatar {\n  width: 30px;\n  height: 30px;\n  line-height: 30px;\n}", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/microsoft.cognitiveservices.speech.sdk.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/microsoft.cognitiveservices.speech.sdk.js ***!
  \**********************************************************************************************************************/
/*! exports provided: AudioConfig, AudioStreamFormat, AudioFormatTag, AudioInputStream, PullAudioInputStream, PushAudioInputStream, AudioOutputStream, PullAudioOutputStream, PushAudioOutputStream, CancellationReason, PullAudioInputStreamCallback, PushAudioOutputStreamCallback, KeywordRecognitionModel, SessionEventArgs, RecognitionEventArgs, OutputFormat, IntentRecognitionEventArgs, RecognitionResult, SpeechRecognitionResult, IntentRecognitionResult, LanguageUnderstandingModel, SpeechRecognitionEventArgs, ConversationTranscriptionEventArgs, SpeechRecognitionCanceledEventArgs, TranslationRecognitionEventArgs, TranslationSynthesisEventArgs, TranslationRecognitionResult, TranslationSynthesisResult, ResultReason, SpeechConfig, SpeechConfigImpl, SpeechTranslationConfig, SpeechTranslationConfigImpl, PropertyCollection, PropertyId, Recognizer, SpeechRecognizer, IntentRecognizer, VoiceProfileType, TranslationRecognizer, Translations, NoMatchReason, NoMatchDetails, TranslationRecognitionCanceledEventArgs, IntentRecognitionCanceledEventArgs, CancellationDetailsBase, CancellationDetails, CancellationErrorCode, ConnectionEventArgs, ServiceEventArgs, Connection, PhraseListGrammar, DialogServiceConfig, BotFrameworkConfig, CustomCommandsConfig, DialogServiceConnector, ActivityReceivedEventArgs, TurnStatusReceivedEventArgs, ServicePropertyChannel, ProfanityOption, BaseAudioPlayer, ConnectionMessageEventArgs, ConnectionMessage, VoiceProfile, VoiceProfileEnrollmentResult, VoiceProfileEnrollmentCancellationDetails, VoiceProfileResult, VoiceProfileCancellationDetails, VoiceProfilePhraseResult, VoiceProfileClient, SpeakerRecognizer, SpeakerIdentificationModel, SpeakerVerificationModel, AutoDetectSourceLanguageConfig, AutoDetectSourceLanguageResult, SourceLanguageConfig, SpeakerRecognitionResult, SpeakerRecognitionResultType, SpeakerRecognitionCancellationDetails, Conversation, ConversationExpirationEventArgs, ConversationParticipantsChangedEventArgs, ConversationTranslationCanceledEventArgs, ConversationTranslationEventArgs, ConversationTranslationResult, ConversationTranslator, ConversationTranscriber, Participant, ParticipantChangedReason, User, SpeechSynthesisOutputFormat, SpeechSynthesizer, SynthesisResult, SpeechSynthesisResult, SpeechSynthesisEventArgs, SpeechSynthesisWordBoundaryEventArgs, SpeechSynthesisBookmarkEventArgs, SpeechSynthesisVisemeEventArgs, SpeechSynthesisBoundaryType, SynthesisVoicesResult, VoiceInfo, SpeakerAudioDestination, ConversationTranscriptionCanceledEventArgs, PronunciationAssessmentGradingSystem, PronunciationAssessmentGranularity, PronunciationAssessmentConfig, PronunciationAssessmentResult, LanguageIdMode, Diagnostics, LogLevel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _src_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _src_common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioConfig", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioStreamFormat", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamFormat"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioFormatTag", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioFormatTag"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioInputStream", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioInputStream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PullAudioInputStream", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PullAudioInputStream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PushAudioInputStream", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PushAudioInputStream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioOutputStream", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioOutputStream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PullAudioOutputStream", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PullAudioOutputStream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PushAudioOutputStream", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PushAudioOutputStream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CancellationReason", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PullAudioInputStreamCallback", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PullAudioInputStreamCallback"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PushAudioOutputStreamCallback", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PushAudioOutputStreamCallback"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KeywordRecognitionModel", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["KeywordRecognitionModel"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SessionEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SessionEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["RecognitionEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OutputFormat", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentRecognitionEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["IntentRecognitionEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["RecognitionResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechRecognitionResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentRecognitionResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["IntentRecognitionResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LanguageUnderstandingModel", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["LanguageUnderstandingModel"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechRecognitionEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranscriptionEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ConversationTranscriptionEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionCanceledEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechRecognitionCanceledEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognitionEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationRecognitionEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationSynthesisEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationSynthesisEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognitionResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationRecognitionResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationSynthesisResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationSynthesisResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ResultReason", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechConfig", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechConfigImpl", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechConfigImpl"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechTranslationConfig", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechTranslationConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechTranslationConfigImpl", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechTranslationConfigImpl"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PropertyCollection", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyCollection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PropertyId", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Recognizer", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["Recognizer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognizer", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechRecognizer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentRecognizer", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["IntentRecognizer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VoiceProfileType", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["VoiceProfileType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognizer", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationRecognizer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Translations", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["Translations"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NoMatchReason", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["NoMatchReason"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NoMatchDetails", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["NoMatchDetails"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognitionCanceledEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationRecognitionCanceledEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentRecognitionCanceledEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["IntentRecognitionCanceledEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CancellationDetailsBase", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationDetailsBase"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CancellationDetails", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationDetails"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CancellationErrorCode", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ServiceEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ServiceEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Connection", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["Connection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PhraseListGrammar", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PhraseListGrammar"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DialogServiceConfig", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["DialogServiceConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BotFrameworkConfig", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["BotFrameworkConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomCommandsConfig", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CustomCommandsConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DialogServiceConnector", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["DialogServiceConnector"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ActivityReceivedEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ActivityReceivedEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TurnStatusReceivedEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["TurnStatusReceivedEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ServicePropertyChannel", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ServicePropertyChannel"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ProfanityOption", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ProfanityOption"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BaseAudioPlayer", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["BaseAudioPlayer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessageEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionMessageEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessage", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionMessage"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VoiceProfile", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["VoiceProfile"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VoiceProfileEnrollmentResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["VoiceProfileEnrollmentResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VoiceProfileEnrollmentCancellationDetails", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["VoiceProfileEnrollmentCancellationDetails"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VoiceProfileResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["VoiceProfileResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VoiceProfileCancellationDetails", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["VoiceProfileCancellationDetails"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VoiceProfilePhraseResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["VoiceProfilePhraseResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VoiceProfileClient", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["VoiceProfileClient"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeakerRecognizer", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeakerRecognizer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeakerIdentificationModel", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeakerIdentificationModel"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeakerVerificationModel", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeakerVerificationModel"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AutoDetectSourceLanguageConfig", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["AutoDetectSourceLanguageConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AutoDetectSourceLanguageResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["AutoDetectSourceLanguageResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SourceLanguageConfig", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SourceLanguageConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeakerRecognitionResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeakerRecognitionResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeakerRecognitionResultType", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeakerRecognitionResultType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeakerRecognitionCancellationDetails", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeakerRecognitionCancellationDetails"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Conversation", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["Conversation"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationExpirationEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ConversationExpirationEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationParticipantsChangedEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ConversationParticipantsChangedEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslationCanceledEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ConversationTranslationCanceledEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslationEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ConversationTranslationEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslationResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ConversationTranslationResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslator", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ConversationTranslator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranscriber", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ConversationTranscriber"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Participant", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["Participant"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ParticipantChangedReason", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ParticipantChangedReason"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "User", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["User"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisOutputFormat", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechSynthesisOutputFormat"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesizer", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechSynthesizer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SynthesisResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SynthesisResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechSynthesisResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechSynthesisEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisWordBoundaryEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechSynthesisWordBoundaryEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisBookmarkEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechSynthesisBookmarkEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisVisemeEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechSynthesisVisemeEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisBoundaryType", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechSynthesisBoundaryType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SynthesisVoicesResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SynthesisVoicesResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VoiceInfo", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["VoiceInfo"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeakerAudioDestination", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeakerAudioDestination"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranscriptionCanceledEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ConversationTranscriptionCanceledEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PronunciationAssessmentGradingSystem", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PronunciationAssessmentGradingSystem"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PronunciationAssessmentGranularity", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PronunciationAssessmentGranularity"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PronunciationAssessmentConfig", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PronunciationAssessmentConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PronunciationAssessmentResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PronunciationAssessmentResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LanguageIdMode", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["LanguageIdMode"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Diagnostics", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["Diagnostics"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LogLevel", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["LogLevel"]; });

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


// Common.Storage.SetLocalStorage(new Common.Browser.LocalStorage());
// Common.Storage.SetSessionStorage(new Common.Browser.SessionStorage());
_src_common_Exports__WEBPACK_IMPORTED_MODULE_1__["Events"].instance.attachConsoleListener(new _src_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ConsoleLoggingListener"]());
// Speech SDK API


//# sourceMappingURL=microsoft.cognitiveservices.speech.sdk.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/CertChecks.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/CertChecks.js ***!
  \*************************************************************************************************************/
/*! exports provided: CertCheckAgent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(process, Buffer) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CertCheckAgent", function() { return CertCheckAgent; });
/* harmony import */ var tls__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tls */ 4);
/* harmony import */ var tls__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(tls__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _external_ocsp_ocsp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../external/ocsp/ocsp */ 5);
/* harmony import */ var _external_ocsp_ocsp__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_external_ocsp_ocsp__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var agent_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! agent-base */ 6);
/* harmony import */ var agent_base__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(agent_base__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var async_disk_cache__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! async-disk-cache */ 7);
/* harmony import */ var async_disk_cache__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(async_disk_cache__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var https_proxy_agent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! https-proxy-agent */ 8);
/* harmony import */ var https_proxy_agent__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(https_proxy_agent__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var net__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! net */ 9);
/* harmony import */ var net__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(net__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _common_OCSPEvents__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/OCSPEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/OCSPEvents.js");
/* eslint-disable import/order */
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




// eslint-disable-next-line @typescript-eslint/ban-ts-comment
// @ts-ignore




class CertCheckAgent {
    constructor(proxyInfo) {
        if (!!proxyInfo) {
            this.privProxyInfo = proxyInfo;
        }
        // Initialize this here to allow tests to set the env variable before the cache is constructed.
        if (!CertCheckAgent.privDiskCache) {
            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-call
            CertCheckAgent.privDiskCache = new async_disk_cache__WEBPACK_IMPORTED_MODULE_4___default.a("microsoft-cognitiveservices-speech-sdk-cache", { supportBuffer: true, location: (typeof process !== "undefined" && !!Object({"NODE_ENV":"development","VUE_APP_URL_app":"http://10.221.29.4:7001","BASE_URL":""}).SPEECH_OCSP_CACHE_ROOT) ? Object({"NODE_ENV":"development","VUE_APP_URL_app":"http://10.221.29.4:7001","BASE_URL":""}).SPEECH_OCSP_CACHE_ROOT : undefined });
        }
    }
    // Test hook to force the disk cache to be recreated.
    static forceReinitDiskCache() {
        CertCheckAgent.privDiskCache = undefined;
        CertCheckAgent.privMemCache = {};
    }
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    GetAgent(disableStapling) {
        // eslint-disable-next-line @typescript-eslint/unbound-method
        const agent = new agent_base__WEBPACK_IMPORTED_MODULE_3___default.a.Agent(this.CreateConnection);
        if (this.privProxyInfo !== undefined &&
            this.privProxyInfo.HostName !== undefined &&
            this.privProxyInfo.Port > 0) {
            const proxyName = "privProxyInfo";
            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
            agent[proxyName] = this.privProxyInfo;
        }
        return agent;
    }
    static GetProxyAgent(proxyInfo) {
        const httpProxyOptions = {
            host: proxyInfo.HostName,
            port: proxyInfo.Port,
        };
        if (!!proxyInfo.UserName) {
            httpProxyOptions.headers = {
                "Proxy-Authentication": "Basic " + new Buffer(`${proxyInfo.UserName}:${(proxyInfo.Password === undefined) ? "" : proxyInfo.Password}`).toString("base64"),
            };
        }
        else {
            httpProxyOptions.headers = {};
        }
        httpProxyOptions.headers.requestOCSP = "true";
        const httpProxyAgent = new https_proxy_agent__WEBPACK_IMPORTED_MODULE_5___default.a(httpProxyOptions);
        return httpProxyAgent;
    }
    static OCSPCheck(socketPromise, proxyInfo) {
        return __awaiter(this, void 0, void 0, function* () {
            let ocspRequest;
            let stapling;
            let resolved = false;
            const socket = yield socketPromise;
            socket.cork();
            const tlsSocket = socket;
            return new Promise((resolve, reject) => {
                socket.on("OCSPResponse", (data) => {
                    if (!!data) {
                        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["OCSPStapleReceivedEvent"]());
                        stapling = data;
                    }
                });
                socket.on("error", (error) => {
                    if (!resolved) {
                        resolved = true;
                        socket.destroy();
                        reject(error);
                    }
                });
                // eslint-disable-next-line @typescript-eslint/no-misused-promises, @typescript-eslint/explicit-function-return-type
                tlsSocket.on("secure", () => __awaiter(this, void 0, void 0, function* () {
                    const peer = tlsSocket.getPeerCertificate(true);
                    try {
                        const issuer = yield this.GetIssuer(peer);
                        // We always need a request to verify the response.
                        ocspRequest = _external_ocsp_ocsp__WEBPACK_IMPORTED_MODULE_1__["request"].generate(peer.raw, issuer.raw);
                        // Do we have a result for this certificate in our memory cache?
                        const sig = ocspRequest.id.toString("hex");
                        // Stapled response trumps cached response.
                        if (!stapling) {
                            const cacheEntry = yield CertCheckAgent.GetResponseFromCache(sig, ocspRequest, proxyInfo);
                            stapling = cacheEntry;
                        }
                        yield this.VerifyOCSPResponse(stapling, ocspRequest, proxyInfo);
                        socket.uncork();
                        resolved = true;
                        resolve(socket);
                    }
                    catch (e) {
                        socket.destroy();
                        resolved = true;
                        reject(e);
                    }
                }));
            });
        });
    }
    static GetIssuer(peer) {
        if (peer.issuerCertificate) {
            return Promise.resolve(peer.issuerCertificate);
        }
        return new Promise((resolve, reject) => {
            const ocspAgent = new _external_ocsp_ocsp__WEBPACK_IMPORTED_MODULE_1__["Agent"]({});
            ocspAgent.fetchIssuer(peer, null, (error, value) => {
                if (!!error) {
                    reject(error);
                    return;
                }
                resolve(value);
            });
        });
    }
    static GetResponseFromCache(signature, ocspRequest, proxyInfo) {
        return __awaiter(this, void 0, void 0, function* () {
            let cachedResponse = CertCheckAgent.privMemCache[signature];
            if (!!cachedResponse) {
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["OCSPMemoryCacheHitEvent"](signature));
            }
            // Do we have a result for this certificate on disk in %TMP%?
            if (!cachedResponse) {
                try {
                    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-call
                    const diskCacheResponse = yield CertCheckAgent.privDiskCache.get(signature);
                    if (!!diskCacheResponse.isCached) {
                        CertCheckAgent.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["OCSPDiskCacheHitEvent"](signature));
                        CertCheckAgent.StoreMemoryCacheEntry(signature, diskCacheResponse.value);
                        cachedResponse = diskCacheResponse.value;
                    }
                }
                catch (error) {
                    cachedResponse = null;
                }
            }
            if (!cachedResponse) {
                return cachedResponse;
            }
            try {
                const cachedOcspResponse = _external_ocsp_ocsp__WEBPACK_IMPORTED_MODULE_1__["utils"].parseResponse(cachedResponse);
                const responseValue = cachedOcspResponse.value;
                const tbsData = responseValue.tbsResponseData;
                if (tbsData.responses.length < 1) {
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["OCSPCacheFetchErrorEvent"](signature, "Not enough data in cached response"));
                    return;
                }
                const cachedStartTime = tbsData.responses[0].thisUpdate;
                const cachedNextTime = tbsData.responses[0].nextUpdate;
                if (cachedNextTime < (Date.now() + this.testTimeOffset - 60000)) {
                    // Cached entry has expired.
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["OCSPCacheEntryExpiredEvent"](signature, cachedNextTime));
                    cachedResponse = null;
                }
                else {
                    // If we're within one day of the next update, or 50% of the way through the validity period,
                    // background an update to the cache.
                    const minUpdate = Math.min(24 * 60 * 60 * 1000, (cachedNextTime - cachedStartTime) / 2);
                    if ((cachedNextTime - (Date.now() + this.testTimeOffset)) < minUpdate) {
                        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["OCSPCacheEntryNeedsRefreshEvent"](signature, cachedStartTime, cachedNextTime));
                        this.UpdateCache(ocspRequest, proxyInfo).catch((error) => {
                            // Well, not much we can do here.
                            this.onEvent(new _common_OCSPEvents__WEBPACK_IMPORTED_MODULE_7__["OCSPCacheUpdateErrorEvent"](signature, error.toString()));
                        });
                    }
                    else {
                        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["OCSPCacheHitEvent"](signature, cachedStartTime, cachedNextTime));
                    }
                }
            }
            catch (error) {
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["OCSPCacheFetchErrorEvent"](signature, error));
                cachedResponse = null;
            }
            if (!cachedResponse) {
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["OCSPCacheMissEvent"](signature));
            }
            return cachedResponse;
        });
    }
    static VerifyOCSPResponse(cacheValue, ocspRequest, proxyInfo) {
        return __awaiter(this, void 0, void 0, function* () {
            let ocspResponse = cacheValue;
            // Do we have a valid response?
            if (!ocspResponse) {
                ocspResponse = yield CertCheckAgent.GetOCSPResponse(ocspRequest, proxyInfo);
            }
            return new Promise((resolve, reject) => {
                _external_ocsp_ocsp__WEBPACK_IMPORTED_MODULE_1__["verify"]({ request: ocspRequest, response: ocspResponse }, (error) => {
                    if (!!error) {
                        CertCheckAgent.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["OCSPVerificationFailedEvent"](ocspRequest.id.toString("hex"), error));
                        // Bad Cached Value? One more try without the cache.
                        if (!!cacheValue) {
                            this.VerifyOCSPResponse(null, ocspRequest, proxyInfo).then(() => {
                                resolve();
                            }, (error) => {
                                reject(error);
                            });
                        }
                        else {
                            reject(error);
                        }
                    }
                    else {
                        if (!cacheValue) {
                            CertCheckAgent.StoreCacheEntry(ocspRequest.id.toString("hex"), ocspResponse);
                        }
                        resolve();
                    }
                });
            });
        });
    }
    static UpdateCache(req, proxyInfo) {
        return __awaiter(this, void 0, void 0, function* () {
            const signature = req.id.toString("hex");
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["OCSPCacheUpdateNeededEvent"](signature));
            const rawResponse = yield this.GetOCSPResponse(req, proxyInfo);
            this.StoreCacheEntry(signature, rawResponse);
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["OCSPCacheUpdateCompleteEvent"](req.id.toString("hex")));
        });
    }
    static StoreCacheEntry(sig, rawResponse) {
        this.StoreMemoryCacheEntry(sig, rawResponse);
        this.StoreDiskCacheEntry(sig, rawResponse);
    }
    static StoreMemoryCacheEntry(sig, rawResponse) {
        this.privMemCache[sig] = rawResponse;
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["OCSPMemoryCacheStoreEvent"](sig));
    }
    static StoreDiskCacheEntry(sig, rawResponse) {
        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-call
        this.privDiskCache.set(sig, rawResponse).then(() => {
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["OCSPDiskCacheStoreEvent"](sig));
        });
    }
    static GetOCSPResponse(req, proxyInfo) {
        const ocspMethod = "1.3.6.1.5.5.7.48.1";
        let options = {};
        if (!!proxyInfo) {
            const agent = CertCheckAgent.GetProxyAgent(proxyInfo);
            options.agent = agent;
        }
        return new Promise((resolve, reject) => {
            _external_ocsp_ocsp__WEBPACK_IMPORTED_MODULE_1__["utils"].getAuthorityInfo(req.cert, ocspMethod, (error, uri) => {
                if (error) {
                    reject(error);
                    return;
                }
                const url = new URL(uri);
                options = Object.assign(Object.assign({}, options), { host: url.host, protocol: url.protocol, port: url.port, path: url.pathname, hostname: url.host });
                _external_ocsp_ocsp__WEBPACK_IMPORTED_MODULE_1__["utils"].getResponse(options, req.data, (error, raw) => {
                    if (error) {
                        reject(error);
                        return;
                    }
                    const certID = req.certID;
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["OCSPResponseRetrievedEvent"](certID.toString("hex")));
                    resolve(raw);
                });
            });
        });
    }
    static onEvent(event) {
        _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Events"].instance.onEvent(event);
    }
    CreateConnection(request, options) {
        const enableOCSP = (typeof process !== "undefined" && Object({"NODE_ENV":"development","VUE_APP_URL_app":"http://10.221.29.4:7001","BASE_URL":""}).NODE_TLS_REJECT_UNAUTHORIZED !== "0" && Object({"NODE_ENV":"development","VUE_APP_URL_app":"http://10.221.29.4:7001","BASE_URL":""}).SPEECH_CONDUCT_OCSP_CHECK !== "0") && options.secureEndpoint;
        let socketPromise;
        options = Object.assign(Object.assign({}, options), {
            requestOCSP: !CertCheckAgent.forceDisableOCSPStapling,
            servername: options.host
        });
        if (!!this.privProxyInfo) {
            const httpProxyAgent = CertCheckAgent.GetProxyAgent(this.privProxyInfo);
            const baseAgent = httpProxyAgent;
            socketPromise = new Promise((resolve, reject) => {
                baseAgent.callback(request, options, (error, socket) => {
                    if (!!error) {
                        reject(error);
                    }
                    else {
                        resolve(socket);
                    }
                });
            });
        }
        else {
            if (!!options.secureEndpoint) {
                socketPromise = Promise.resolve(tls__WEBPACK_IMPORTED_MODULE_0__["connect"](options));
            }
            else {
                socketPromise = Promise.resolve(net__WEBPACK_IMPORTED_MODULE_6__["connect"](options));
            }
        }
        if (!!enableOCSP) {
            return CertCheckAgent.OCSPCheck(socketPromise, this.privProxyInfo);
        }
        else {
            return socketPromise;
        }
    }
}
// Test hook to enable forcing expiration / refresh to happen.
CertCheckAgent.testTimeOffset = 0;
// Test hook to disable stapling for cache testing.
CertCheckAgent.forceDisableOCSPStapling = false;
// An in memory cache for recived responses.
CertCheckAgent.privMemCache = {};

//# sourceMappingURL=CertChecks.js.map

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../../node-libs-browser/mock/process.js */ "./node_modules/node-libs-browser/mock/process.js"), __webpack_require__(/*! ./../../../../../buffer/index.js */ "./node_modules/buffer/index.js").Buffer))

/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ConsoleLoggingListener.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ConsoleLoggingListener.js ***!
  \*************************************************************************************************************************/
/*! exports provided: ConsoleLoggingListener */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConsoleLoggingListener", function() { return ConsoleLoggingListener; });
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ 1);
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _sdk_LogLevel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/LogLevel */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LogLevel.js");
/* harmony import */ var _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sdk/Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* eslint-disable @typescript-eslint/no-unsafe-assignment */
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



class ConsoleLoggingListener {
    constructor(logLevelFilter = _sdk_LogLevel__WEBPACK_IMPORTED_MODULE_1__["LogLevel"].None) {
        this.privLogPath = undefined;
        this.privLogLevelFilter = logLevelFilter;
    }
    set logPath(path) {
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(fs__WEBPACK_IMPORTED_MODULE_0__["openSync"], "\nFile System access not available");
        this.privLogPath = path;
    }
    onEvent(event) {
        if (event.eventType >= this.privLogLevelFilter) {
            const log = this.toString(event);
            if (!!this.privLogPath) {
                fs__WEBPACK_IMPORTED_MODULE_0__["writeFileSync"](this.privLogPath, log + "\n", { flag: "a+" });
            }
            switch (event.eventType) {
                case _sdk_LogLevel__WEBPACK_IMPORTED_MODULE_1__["LogLevel"].Debug:
                    // eslint-disable-next-line no-console
                    console.debug(log);
                    break;
                case _sdk_LogLevel__WEBPACK_IMPORTED_MODULE_1__["LogLevel"].Info:
                    // eslint-disable-next-line no-console
                    console.info(log);
                    break;
                case _sdk_LogLevel__WEBPACK_IMPORTED_MODULE_1__["LogLevel"].Warning:
                    // eslint-disable-next-line no-console
                    console.warn(log);
                    break;
                case _sdk_LogLevel__WEBPACK_IMPORTED_MODULE_1__["LogLevel"].Error:
                    // eslint-disable-next-line no-console
                    console.error(log);
                    break;
                default:
                    // eslint-disable-next-line no-console
                    console.log(log);
                    break;
            }
        }
    }
    toString(event) {
        const logFragments = [
            `${event.eventTime}`,
            `${event.name}`,
        ];
        const e = event;
        for (const prop in e) {
            if (prop && event.hasOwnProperty(prop) &&
                prop !== "eventTime" && prop !== "eventType" &&
                prop !== "eventId" && prop !== "name" &&
                prop !== "constructor") {
                // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
                const value = e[prop];
                let valueToLog = "<NULL>";
                if (value !== undefined && value !== null) {
                    if (typeof (value) === "number" || typeof (value) === "string") {
                        valueToLog = value.toString();
                    }
                    else {
                        valueToLog = JSON.stringify(value);
                    }
                }
                logFragments.push(`${prop}: ${valueToLog}`);
            }
        }
        return logFragments.join(" | ");
    }
}

//# sourceMappingURL=ConsoleLoggingListener.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js ***!
  \**********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _ConsoleLoggingListener__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConsoleLoggingListener */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ConsoleLoggingListener.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConsoleLoggingListener", function() { return _ConsoleLoggingListener__WEBPACK_IMPORTED_MODULE_0__["ConsoleLoggingListener"]; });

/* harmony import */ var _IRecorder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./IRecorder */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/IRecorder.js");
/* harmony import */ var _IRecorder__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_IRecorder__WEBPACK_IMPORTED_MODULE_1__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _IRecorder__WEBPACK_IMPORTED_MODULE_1__) if(["default","ConsoleLoggingListener"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _IRecorder__WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _MicAudioSource__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MicAudioSource */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/MicAudioSource.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioWorkletSourceURLPropertyName", function() { return _MicAudioSource__WEBPACK_IMPORTED_MODULE_2__["AudioWorkletSourceURLPropertyName"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MicAudioSource", function() { return _MicAudioSource__WEBPACK_IMPORTED_MODULE_2__["MicAudioSource"]; });

/* harmony import */ var _FileAudioSource__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./FileAudioSource */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/FileAudioSource.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FileAudioSource", function() { return _FileAudioSource__WEBPACK_IMPORTED_MODULE_3__["FileAudioSource"]; });

/* harmony import */ var _PCMRecorder__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./PCMRecorder */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/PCMRecorder.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PcmRecorder", function() { return _PCMRecorder__WEBPACK_IMPORTED_MODULE_4__["PcmRecorder"]; });

/* harmony import */ var _WebsocketConnection__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./WebsocketConnection */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketConnection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "WebsocketConnection", function() { return _WebsocketConnection__WEBPACK_IMPORTED_MODULE_5__["WebsocketConnection"]; });

/* harmony import */ var _WebsocketMessageAdapter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./WebsocketMessageAdapter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketMessageAdapter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "WebsocketMessageAdapter", function() { return _WebsocketMessageAdapter__WEBPACK_IMPORTED_MODULE_6__["WebsocketMessageAdapter"]; });

/* harmony import */ var _ReplayableAudioNode__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ReplayableAudioNode */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ReplayableAudioNode.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ReplayableAudioNode", function() { return _ReplayableAudioNode__WEBPACK_IMPORTED_MODULE_7__["ReplayableAudioNode"]; });

/* harmony import */ var _ProxyInfo__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ProxyInfo */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ProxyInfo.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ProxyInfo", function() { return _ProxyInfo__WEBPACK_IMPORTED_MODULE_8__["ProxyInfo"]; });

/* harmony import */ var _RestMessageAdapter__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./RestMessageAdapter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/RestMessageAdapter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RestRequestType", function() { return _RestMessageAdapter__WEBPACK_IMPORTED_MODULE_9__["RestRequestType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RestMessageAdapter", function() { return _RestMessageAdapter__WEBPACK_IMPORTED_MODULE_9__["RestMessageAdapter"]; });

/* harmony import */ var _RestConfigBase__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./RestConfigBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/RestConfigBase.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RestConfigBase", function() { return _RestConfigBase__WEBPACK_IMPORTED_MODULE_10__["RestConfigBase"]; });

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.












//# sourceMappingURL=Exports.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/FileAudioSource.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/FileAudioSource.js ***!
  \******************************************************************************************************************/
/*! exports provided: FileAudioSource */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FileAudioSource", function() { return FileAudioSource; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _sdk_Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sdk/Audio/AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



class FileAudioSource {
    constructor(file, filename, audioSourceId) {
        this.privStreams = {};
        this.privHeaderEnd = 44;
        this.privId = audioSourceId ? audioSourceId : Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["createNoDashGuid"])();
        this.privEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["EventSource"]();
        this.privSource = file;
        if (typeof window !== "undefined" && typeof Blob !== "undefined" && this.privSource instanceof Blob) {
            this.privFilename = file.name;
        }
        else {
            this.privFilename = filename || "unknown.wav";
        }
        // Read the header.
        this.privAudioFormatPromise = this.readHeader();
    }
    get format() {
        return this.privAudioFormatPromise;
    }
    get blob() {
        return Promise.resolve(this.privSource);
    }
    turnOn() {
        if (this.privFilename.lastIndexOf(".wav") !== this.privFilename.length - 4) {
            const errorMsg = this.privFilename + " is not supported. Only WAVE files are allowed at the moment.";
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioSourceErrorEvent"](errorMsg, ""));
            return Promise.reject(errorMsg);
        }
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioSourceInitializingEvent"](this.privId)); // no stream id
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioSourceReadyEvent"](this.privId));
        return;
    }
    id() {
        return this.privId;
    }
    attach(audioNodeId) {
        return __awaiter(this, void 0, void 0, function* () {
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamNodeAttachingEvent"](this.privId, audioNodeId));
            const stream = yield this.upload(audioNodeId);
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamNodeAttachedEvent"](this.privId, audioNodeId));
            return Promise.resolve({
                detach: () => __awaiter(this, void 0, void 0, function* () {
                    stream.readEnded();
                    delete this.privStreams[audioNodeId];
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamNodeDetachedEvent"](this.privId, audioNodeId));
                    yield this.turnOff();
                }),
                id: () => audioNodeId,
                read: () => stream.read(),
            });
        });
    }
    detach(audioNodeId) {
        if (audioNodeId && this.privStreams[audioNodeId]) {
            this.privStreams[audioNodeId].close();
            delete this.privStreams[audioNodeId];
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamNodeDetachedEvent"](this.privId, audioNodeId));
        }
    }
    turnOff() {
        for (const streamId in this.privStreams) {
            if (streamId) {
                const stream = this.privStreams[streamId];
                if (stream && !stream.isClosed) {
                    stream.close();
                }
            }
        }
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioSourceOffEvent"](this.privId)); // no stream now
        return Promise.resolve();
    }
    get events() {
        return this.privEvents;
    }
    get deviceInfo() {
        return this.privAudioFormatPromise.then((result) => (Promise.resolve({
            bitspersample: result.bitsPerSample,
            channelcount: result.channels,
            connectivity: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["connectivity"].Unknown,
            manufacturer: "Speech SDK",
            model: "File",
            samplerate: result.samplesPerSec,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["type"].File,
        })));
    }
    readHeader() {
        // Read the wave header.
        const maxHeaderSize = 4296;
        const header = this.privSource.slice(0, maxHeaderSize);
        const headerResult = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Deferred"]();
        const processHeader = (header) => {
            const view = new DataView(header);
            const getWord = (index) => String.fromCharCode(view.getUint8(index), view.getUint8(index + 1), view.getUint8(index + 2), view.getUint8(index + 3));
            // RIFF 4 bytes.
            if ("RIFF" !== getWord(0)) {
                headerResult.reject("Invalid WAV header in file, RIFF was not found");
                return;
            }
            // length, 4 bytes
            // RIFF Type & fmt 8 bytes
            if ("WAVE" !== getWord(8) || "fmt " !== getWord(12)) {
                headerResult.reject("Invalid WAV header in file, WAVEfmt was not found");
                return;
            }
            const formatSize = view.getInt32(16, true);
            const channelCount = view.getUint16(22, true);
            const sampleRate = view.getUint32(24, true);
            const bitsPerSample = view.getUint16(34, true);
            // Confirm if header is 44 bytes long.
            let pos = 36 + Math.max(formatSize - 16, 0);
            for (; getWord(pos) !== "data"; pos += 2) {
                if (pos > maxHeaderSize - 8) {
                    headerResult.reject("Invalid WAV header in file, data block was not found");
                    return;
                }
            }
            this.privHeaderEnd = pos + 8;
            headerResult.resolve(_sdk_Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_2__["AudioStreamFormat"].getWaveFormatPCM(sampleRate, bitsPerSample, channelCount));
        };
        if (typeof window !== "undefined" && typeof Blob !== "undefined" && header instanceof Blob) {
            const reader = new FileReader();
            reader.onload = (event) => {
                const header = event.target.result;
                processHeader(header);
            };
            reader.readAsArrayBuffer(header);
        }
        else {
            const h = header;
            processHeader(h.buffer.slice(h.byteOffset, h.byteOffset + h.byteLength));
        }
        return headerResult.promise;
    }
    upload(audioNodeId) {
        return __awaiter(this, void 0, void 0, function* () {
            const onerror = (error) => {
                const errorMsg = `Error occurred while processing '${this.privFilename}'. ${error}`;
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamNodeErrorEvent"](this.privId, audioNodeId, errorMsg));
                throw new Error(errorMsg);
            };
            try {
                yield this.turnOn();
                const format = yield this.privAudioFormatPromise;
                const stream = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ChunkedArrayBufferStream"](format.avgBytesPerSec / 10, audioNodeId);
                this.privStreams[audioNodeId] = stream;
                const chunk = this.privSource.slice(this.privHeaderEnd);
                const processFile = (buff) => {
                    if (stream.isClosed) {
                        return; // output stream was closed (somebody called TurnOff). We're done here.
                    }
                    stream.writeStreamChunk({
                        buffer: buff,
                        isEnd: false,
                        timeReceived: Date.now(),
                    });
                    stream.close();
                };
                if (typeof window !== "undefined" && typeof Blob !== "undefined" && chunk instanceof Blob) {
                    const reader = new FileReader();
                    reader.onerror = (ev) => onerror(ev.toString());
                    reader.onload = (event) => {
                        const fileBuffer = event.target.result;
                        processFile(fileBuffer);
                    };
                    reader.readAsArrayBuffer(chunk);
                }
                else {
                    const c = chunk;
                    processFile(c.buffer.slice(c.byteOffset, c.byteOffset + c.byteLength));
                }
                return stream;
            }
            catch (e) {
                onerror(e);
            }
        });
    }
    onEvent(event) {
        this.privEvents.onEvent(event);
        _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Events"].instance.onEvent(event);
    }
}

//# sourceMappingURL=FileAudioSource.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/IRecorder.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/IRecorder.js ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

//# sourceMappingURL=IRecorder.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/MicAudioSource.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/MicAudioSource.js ***!
  \*****************************************************************************************************************/
/*! exports provided: AudioWorkletSourceURLPropertyName, MicAudioSource */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioWorkletSourceURLPropertyName", function() { return AudioWorkletSourceURLPropertyName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MicAudioSource", function() { return MicAudioSource; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _sdk_Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sdk/Audio/AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const AudioWorkletSourceURLPropertyName = "MICROPHONE-WorkletSourceUrl";
class MicAudioSource {
    constructor(privRecorder, deviceId, audioSourceId, mediaStream) {
        this.privRecorder = privRecorder;
        this.deviceId = deviceId;
        this.privStreams = {};
        this.privOutputChunkSize = MicAudioSource.AUDIOFORMAT.avgBytesPerSec / 10;
        this.privId = audioSourceId ? audioSourceId : Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["createNoDashGuid"])();
        this.privEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["EventSource"]();
        this.privMediaStream = mediaStream || null;
        this.privIsClosing = false;
    }
    get format() {
        return Promise.resolve(MicAudioSource.AUDIOFORMAT);
    }
    get blob() {
        return Promise.reject("Not implemented for Mic input");
    }
    turnOn() {
        if (this.privInitializeDeferral) {
            return this.privInitializeDeferral.promise;
        }
        this.privInitializeDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Deferred"]();
        try {
            this.createAudioContext();
        }
        catch (error) {
            if (error instanceof Error) {
                const typedError = error;
                this.privInitializeDeferral.reject(typedError.name + ": " + typedError.message);
            }
            else {
                this.privInitializeDeferral.reject(error);
            }
            return this.privInitializeDeferral.promise;
        }
        const nav = window.navigator;
        let getUserMedia = (
        // eslint-disable-next-line
        nav.getUserMedia ||
            nav.webkitGetUserMedia ||
            nav.mozGetUserMedia ||
            nav.msGetUserMedia);
        if (!!nav.mediaDevices) {
            getUserMedia = (constraints, successCallback, errorCallback) => {
                nav.mediaDevices
                    .getUserMedia(constraints)
                    .then(successCallback)
                    .catch(errorCallback);
            };
        }
        if (!getUserMedia) {
            const errorMsg = "Browser does not support getUserMedia.";
            this.privInitializeDeferral.reject(errorMsg);
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioSourceErrorEvent"](errorMsg, "")); // mic initialized error - no streamid at this point
        }
        else {
            const next = () => {
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioSourceInitializingEvent"](this.privId)); // no stream id
                if (this.privMediaStream && this.privMediaStream.active) {
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioSourceReadyEvent"](this.privId));
                    this.privInitializeDeferral.resolve();
                }
                else {
                    getUserMedia({ audio: this.deviceId ? { deviceId: this.deviceId } : true, video: false }, (mediaStream) => {
                        this.privMediaStream = mediaStream;
                        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioSourceReadyEvent"](this.privId));
                        this.privInitializeDeferral.resolve();
                    }, (error) => {
                        const errorMsg = `Error occurred during microphone initialization: ${error}`;
                        this.privInitializeDeferral.reject(errorMsg);
                        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioSourceErrorEvent"](this.privId, errorMsg));
                    });
                }
            };
            if (this.privContext.state === "suspended") {
                // NOTE: On iOS, the Web Audio API requires sounds to be triggered from an explicit user action.
                // https://github.com/WebAudio/web-audio-api/issues/790
                this.privContext.resume()
                    .then(next)
                    .catch((reason) => {
                    this.privInitializeDeferral.reject(`Failed to initialize audio context: ${reason}`);
                });
            }
            else {
                next();
            }
        }
        return this.privInitializeDeferral.promise;
    }
    id() {
        return this.privId;
    }
    attach(audioNodeId) {
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamNodeAttachingEvent"](this.privId, audioNodeId));
        return this.listen(audioNodeId).then((stream) => {
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamNodeAttachedEvent"](this.privId, audioNodeId));
            return {
                detach: () => __awaiter(this, void 0, void 0, function* () {
                    stream.readEnded();
                    delete this.privStreams[audioNodeId];
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamNodeDetachedEvent"](this.privId, audioNodeId));
                    return this.turnOff();
                }),
                id: () => audioNodeId,
                read: () => stream.read(),
            };
        });
    }
    detach(audioNodeId) {
        if (audioNodeId && this.privStreams[audioNodeId]) {
            this.privStreams[audioNodeId].close();
            delete this.privStreams[audioNodeId];
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamNodeDetachedEvent"](this.privId, audioNodeId));
        }
    }
    turnOff() {
        return __awaiter(this, void 0, void 0, function* () {
            for (const streamId in this.privStreams) {
                if (streamId) {
                    const stream = this.privStreams[streamId];
                    if (stream) {
                        stream.close();
                    }
                }
            }
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioSourceOffEvent"](this.privId)); // no stream now
            if (this.privInitializeDeferral) {
                // Correctly handle when browser forces mic off before turnOn() completes
                // eslint-disable-next-line @typescript-eslint/await-thenable
                yield this.privInitializeDeferral;
                this.privInitializeDeferral = null;
            }
            yield this.destroyAudioContext();
            return;
        });
    }
    get events() {
        return this.privEvents;
    }
    get deviceInfo() {
        return this.getMicrophoneLabel().then((label) => ({
            bitspersample: MicAudioSource.AUDIOFORMAT.bitsPerSample,
            channelcount: MicAudioSource.AUDIOFORMAT.channels,
            connectivity: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["connectivity"].Unknown,
            manufacturer: "Speech SDK",
            model: label,
            samplerate: MicAudioSource.AUDIOFORMAT.samplesPerSec,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["type"].Microphones,
        }));
    }
    setProperty(name, value) {
        if (name === AudioWorkletSourceURLPropertyName) {
            this.privRecorder.setWorkletUrl(value);
        }
        else {
            throw new Error("Property '" + name + "' is not supported on Microphone.");
        }
    }
    getMicrophoneLabel() {
        const defaultMicrophoneName = "microphone";
        // If we did this already, return the value.
        if (this.privMicrophoneLabel !== undefined) {
            return Promise.resolve(this.privMicrophoneLabel);
        }
        // If the stream isn't currently running, we can't query devices because security.
        if (this.privMediaStream === undefined || !this.privMediaStream.active) {
            return Promise.resolve(defaultMicrophoneName);
        }
        // Setup a default
        this.privMicrophoneLabel = defaultMicrophoneName;
        // Get the id of the device running the audio track.
        const microphoneDeviceId = this.privMediaStream.getTracks()[0].getSettings().deviceId;
        // If the browser doesn't support getting the device ID, set a default and return.
        if (undefined === microphoneDeviceId) {
            return Promise.resolve(this.privMicrophoneLabel);
        }
        const deferred = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Deferred"]();
        // Enumerate the media devices.
        navigator.mediaDevices.enumerateDevices().then((devices) => {
            for (const device of devices) {
                if (device.deviceId === microphoneDeviceId) {
                    // Found the device
                    this.privMicrophoneLabel = device.label;
                    break;
                }
            }
            deferred.resolve(this.privMicrophoneLabel);
        }, () => deferred.resolve(this.privMicrophoneLabel));
        return deferred.promise;
    }
    listen(audioNodeId) {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.turnOn();
            const stream = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ChunkedArrayBufferStream"](this.privOutputChunkSize, audioNodeId);
            this.privStreams[audioNodeId] = stream;
            try {
                this.privRecorder.record(this.privContext, this.privMediaStream, stream);
            }
            catch (error) {
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamNodeErrorEvent"](this.privId, audioNodeId, error));
                throw error;
            }
            const result = stream;
            return result;
        });
    }
    onEvent(event) {
        this.privEvents.onEvent(event);
        _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Events"].instance.onEvent(event);
    }
    createAudioContext() {
        if (!!this.privContext) {
            return;
        }
        this.privContext = _sdk_Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_2__["AudioStreamFormatImpl"].getAudioContext(MicAudioSource.AUDIOFORMAT.samplesPerSec);
    }
    destroyAudioContext() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.privContext) {
                return;
            }
            this.privRecorder.releaseMediaResources(this.privContext);
            // This pattern brought to you by a bug in the TypeScript compiler where it
            // confuses the ("close" in this.privContext) with this.privContext always being null as the alternate.
            // https://github.com/Microsoft/TypeScript/issues/11498
            let hasClose = false;
            if ("close" in this.privContext) {
                hasClose = true;
            }
            if (hasClose) {
                if (!this.privIsClosing) {
                    // The audio context close may take enough time that the close is called twice
                    this.privIsClosing = true;
                    yield this.privContext.close();
                    this.privContext = null;
                    this.privIsClosing = false;
                }
            }
            else if (null !== this.privContext && this.privContext.state === "running") {
                // Suspend actually takes a callback, but analogous to the
                // resume method, it'll be only fired if suspend is called
                // in a direct response to a user action. The later is not always
                // the case, as TurnOff is also called, when we receive an
                // end-of-speech message from the service. So, doing a best effort
                // fire-and-forget here.
                yield this.privContext.suspend();
            }
        });
    }
}
MicAudioSource.AUDIOFORMAT = _sdk_Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_2__["AudioStreamFormat"].getDefaultInputFormat();

//# sourceMappingURL=MicAudioSource.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/PCMRecorder.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/PCMRecorder.js ***!
  \**************************************************************************************************************/
/*! exports provided: PcmRecorder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PcmRecorder", function() { return PcmRecorder; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class PcmRecorder {
    constructor(stopInputOnRelease) {
        this.privStopInputOnRelease = stopInputOnRelease;
    }
    record(context, mediaStream, outputStream) {
        const desiredSampleRate = 16000;
        const waveStreamEncoder = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["RiffPcmEncoder"](context.sampleRate, desiredSampleRate);
        const micInput = context.createMediaStreamSource(mediaStream);
        const attachScriptProcessor = () => {
            // eslint-disable-next-line @typescript-eslint/explicit-function-return-type
            const scriptNode = (() => {
                let bufferSize = 0;
                try {
                    return context.createScriptProcessor(bufferSize, 1, 1);
                }
                catch (error) {
                    // Webkit (<= version 31) requires a valid bufferSize.
                    bufferSize = 2048;
                    let audioSampleRate = context.sampleRate;
                    while (bufferSize < 16384 && audioSampleRate >= (2 * desiredSampleRate)) {
                        bufferSize <<= 1;
                        audioSampleRate >>= 1;
                    }
                    return context.createScriptProcessor(bufferSize, 1, 1);
                }
            })();
            scriptNode.onaudioprocess = (event) => {
                const inputFrame = event.inputBuffer.getChannelData(0);
                if (outputStream && !outputStream.isClosed) {
                    const waveFrame = waveStreamEncoder.encode(inputFrame);
                    if (!!waveFrame) {
                        outputStream.writeStreamChunk({
                            buffer: waveFrame,
                            isEnd: false,
                            timeReceived: Date.now(),
                        });
                    }
                }
            };
            micInput.connect(scriptNode);
            scriptNode.connect(context.destination);
            this.privMediaResources = {
                scriptProcessorNode: scriptNode,
                source: micInput,
                stream: mediaStream,
            };
        };
        // https://webaudio.github.io/web-audio-api/#audioworklet
        // Using AudioWorklet to improve audio quality and avoid audio glitches due to blocking the UI thread
        if (!!context.audioWorklet) {
            if (!this.privSpeechProcessorScript) {
                const workletScript = `class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`;
                const blob = new Blob([workletScript], { type: "application/javascript; charset=utf-8" });
                this.privSpeechProcessorScript = URL.createObjectURL(blob);
            }
            context.audioWorklet
                .addModule(this.privSpeechProcessorScript)
                .then(() => {
                const workletNode = new AudioWorkletNode(context, "speech-processor");
                workletNode.port.onmessage = (ev) => {
                    const inputFrame = ev.data;
                    if (outputStream && !outputStream.isClosed) {
                        const waveFrame = waveStreamEncoder.encode(inputFrame);
                        if (!!waveFrame) {
                            outputStream.writeStreamChunk({
                                buffer: waveFrame,
                                isEnd: false,
                                timeReceived: Date.now(),
                            });
                        }
                    }
                };
                micInput.connect(workletNode);
                workletNode.connect(context.destination);
                this.privMediaResources = {
                    scriptProcessorNode: workletNode,
                    source: micInput,
                    stream: mediaStream,
                };
            })
                .catch(() => {
                attachScriptProcessor();
            });
        }
        else {
            try {
                attachScriptProcessor();
            }
            catch (err) {
                throw new Error(`Unable to start audio worklet node for PCMRecorder: ${err}`);
            }
        }
    }
    releaseMediaResources(context) {
        if (this.privMediaResources) {
            if (this.privMediaResources.scriptProcessorNode) {
                this.privMediaResources.scriptProcessorNode.disconnect(context.destination);
                this.privMediaResources.scriptProcessorNode = null;
            }
            if (this.privMediaResources.source) {
                this.privMediaResources.source.disconnect();
                if (this.privStopInputOnRelease) {
                    this.privMediaResources.stream.getTracks().forEach((track) => track.stop());
                }
                this.privMediaResources.source = null;
            }
        }
    }
    setWorkletUrl(url) {
        this.privSpeechProcessorScript = url;
    }
}

//# sourceMappingURL=PCMRecorder.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ProxyInfo.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ProxyInfo.js ***!
  \************************************************************************************************************/
/*! exports provided: ProxyInfo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProxyInfo", function() { return ProxyInfo; });
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class ProxyInfo {
    constructor(proxyHostName, proxyPort, proxyUserName, proxyPassword) {
        this.privProxyHostName = proxyHostName;
        this.privProxyPort = proxyPort;
        this.privProxyUserName = proxyUserName;
        this.privProxyPassword = proxyPassword;
    }
    static fromParameters(parameters) {
        return new ProxyInfo(parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceConnection_ProxyHostName), parseInt(parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceConnection_ProxyPort), 10), parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceConnection_ProxyUserName), parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceConnection_ProxyPassword));
    }
    static fromRecognizerConfig(config) {
        return this.fromParameters(config.parameters);
    }
    get HostName() {
        return this.privProxyHostName;
    }
    get Port() {
        return this.privProxyPort;
    }
    get UserName() {
        return this.privProxyUserName;
    }
    get Password() {
        return this.privProxyPassword;
    }
}

//# sourceMappingURL=ProxyInfo.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ReplayableAudioNode.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ReplayableAudioNode.js ***!
  \**********************************************************************************************************************/
/*! exports provided: ReplayableAudioNode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReplayableAudioNode", function() { return ReplayableAudioNode; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class ReplayableAudioNode {
    constructor(audioSource, bytesPerSecond) {
        this.privBuffers = [];
        this.privReplayOffset = 0;
        this.privLastShrinkOffset = 0;
        this.privBufferStartOffset = 0;
        this.privBufferSerial = 0;
        this.privBufferedBytes = 0;
        this.privReplay = false;
        this.privLastChunkAcquiredTime = 0;
        this.privAudioNode = audioSource;
        this.privBytesPerSecond = bytesPerSecond;
    }
    id() {
        return this.privAudioNode.id();
    }
    // Reads and returns the next chunk of audio buffer.
    // If replay of existing buffers are needed, read() will first seek and replay
    // existing content, and upoin completion it will read new content from the underlying
    // audio node, saving that content into the replayable buffers.
    read() {
        // if there is a replay request to honor.
        if (!!this.privReplay && this.privBuffers.length !== 0) {
            // Find the start point in the buffers.
            // Offsets are in 100ns increments.
            // So how many bytes do we need to seek to get the right offset?
            const offsetToSeek = this.privReplayOffset - this.privBufferStartOffset;
            let bytesToSeek = Math.round(offsetToSeek * this.privBytesPerSecond * 1e-7);
            if (0 !== (bytesToSeek % 2)) {
                bytesToSeek++;
            }
            let i = 0;
            while (i < this.privBuffers.length && bytesToSeek >= this.privBuffers[i].chunk.buffer.byteLength) {
                bytesToSeek -= this.privBuffers[i++].chunk.buffer.byteLength;
            }
            if (i < this.privBuffers.length) {
                const retVal = this.privBuffers[i].chunk.buffer.slice(bytesToSeek);
                this.privReplayOffset += (retVal.byteLength / this.privBytesPerSecond) * 1e+7;
                // If we've reached the end of the buffers, stop replaying.
                if (i === this.privBuffers.length - 1) {
                    this.privReplay = false;
                }
                return Promise.resolve({
                    buffer: retVal,
                    isEnd: false,
                    timeReceived: this.privBuffers[i].chunk.timeReceived,
                });
            }
        }
        return this.privAudioNode.read()
            .then((result) => {
            if (result && result.buffer) {
                this.privBuffers.push(new BufferEntry(result, this.privBufferSerial++, this.privBufferedBytes));
                this.privBufferedBytes += result.buffer.byteLength;
            }
            return result;
        });
    }
    detach() {
        this.privBuffers = undefined;
        return this.privAudioNode.detach();
    }
    replay() {
        if (this.privBuffers && 0 !== this.privBuffers.length) {
            this.privReplay = true;
            this.privReplayOffset = this.privLastShrinkOffset;
        }
    }
    // Shrinks the existing audio buffers to start at the new offset, or at the
    // beginning of the buffer closest to the requested offset.
    // A replay request will start from the last shrink point.
    shrinkBuffers(offset) {
        if (this.privBuffers === undefined || this.privBuffers.length === 0) {
            return;
        }
        this.privLastShrinkOffset = offset;
        // Find the start point in the buffers.
        // Offsets are in 100ns increments.
        // So how many bytes do we need to seek to get the right offset?
        const offsetToSeek = offset - this.privBufferStartOffset;
        let bytesToSeek = Math.round(offsetToSeek * this.privBytesPerSecond * 1e-7);
        let i = 0;
        while (i < this.privBuffers.length && bytesToSeek >= this.privBuffers[i].chunk.buffer.byteLength) {
            bytesToSeek -= this.privBuffers[i++].chunk.buffer.byteLength;
        }
        this.privBufferStartOffset = Math.round(offset - ((bytesToSeek / this.privBytesPerSecond) * 1e+7));
        this.privBuffers = this.privBuffers.slice(i);
    }
    // Finds the time a buffer of audio was first seen by offset.
    findTimeAtOffset(offset) {
        if (offset < this.privBufferStartOffset || this.privBuffers === undefined) {
            return 0;
        }
        for (const value of this.privBuffers) {
            const startOffset = (value.byteOffset / this.privBytesPerSecond) * 1e7;
            const endOffset = startOffset + ((value.chunk.buffer.byteLength / this.privBytesPerSecond) * 1e7);
            if (offset >= startOffset && offset <= endOffset) {
                return value.chunk.timeReceived;
            }
        }
        return 0;
    }
}
// Primary use of this class is to help debugging problems with the replay
// code. If the memory cost of alloc / dealloc gets too much, drop it and just use
// the ArrayBuffer directly.
class BufferEntry {
    constructor(chunk, serial, byteOffset) {
        this.chunk = chunk;
        this.serial = serial;
        this.byteOffset = byteOffset;
    }
}

//# sourceMappingURL=ReplayableAudioNode.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/RestConfigBase.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/RestConfigBase.js ***!
  \*****************************************************************************************************************/
/*! exports provided: RestConfigBase */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RestConfigBase", function() { return RestConfigBase; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class RestConfigBase {
    static get requestOptions() {
        return RestConfigBase.privDefaultRequestOptions;
    }
    static get configParams() {
        return RestConfigBase.privDefaultParams;
    }
    static get restErrors() {
        return RestConfigBase.privRestErrors;
    }
}
RestConfigBase.privDefaultRequestOptions = {
    headers: {
        Accept: "application/json",
    },
    ignoreCache: false,
    timeout: 10000,
};
RestConfigBase.privRestErrors = {
    authInvalidSubscriptionKey: "You must specify either an authentication token to use, or a Cognitive Speech subscription key.",
    authInvalidSubscriptionRegion: "You must specify the Cognitive Speech region to use.",
    invalidArgs: "Required input not found: {arg}.",
    invalidCreateJoinConversationResponse: "Creating/Joining conversation failed with HTTP {status}.",
    invalidParticipantRequest: "The requested participant was not found.",
    permissionDeniedConnect: "Required credentials not found.",
    permissionDeniedConversation: "Invalid operation: only the host can {command} the conversation.",
    permissionDeniedParticipant: "Invalid operation: only the host can {command} a participant.",
    permissionDeniedSend: "Invalid operation: the conversation is not in a connected state.",
    permissionDeniedStart: "Invalid operation: there is already an active conversation.",
};
RestConfigBase.privDefaultParams = {
    apiVersion: "api-version",
    authorization: "Authorization",
    clientAppId: "X-ClientAppId",
    contentTypeKey: "Content-Type",
    correlationId: "X-CorrelationId",
    languageCode: "language",
    nickname: "nickname",
    profanity: "profanity",
    requestId: "X-RequestId",
    roomId: "roomid",
    sessionToken: "token",
    subscriptionKey: "Ocp-Apim-Subscription-Key",
    subscriptionRegion: "Ocp-Apim-Subscription-Region",
    token: "X-CapitoToken",
};

//# sourceMappingURL=RestConfigBase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/RestMessageAdapter.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/RestMessageAdapter.js ***!
  \*********************************************************************************************************************/
/*! exports provided: RestRequestType, RestMessageAdapter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RestRequestType", function() { return RestRequestType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RestMessageAdapter", function() { return RestMessageAdapter; });
/* harmony import */ var bent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bent */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/bent/src/browser.js");
/* harmony import */ var bent__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bent__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


var RestRequestType;
(function (RestRequestType) {
    RestRequestType["Get"] = "GET";
    RestRequestType["Post"] = "POST";
    RestRequestType["Delete"] = "DELETE";
    RestRequestType["File"] = "file";
})(RestRequestType || (RestRequestType = {}));
// accept rest operations via request method and return abstracted objects from server response
class RestMessageAdapter {
    constructor(configParams) {
        if (!configParams) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ArgumentNullError"]("configParams");
        }
        this.privHeaders = configParams.headers;
        this.privIgnoreCache = configParams.ignoreCache;
    }
    static extractHeaderValue(headerKey, headers) {
        let headerValue = "";
        try {
            const arr = headers.trim().split(/[\r\n]+/);
            const headerMap = {};
            arr.forEach((line) => {
                const parts = line.split(": ");
                const header = parts.shift().toLowerCase();
                const value = parts.join(": ");
                headerMap[header] = value;
            });
            headerValue = headerMap[headerKey.toLowerCase()];
        }
        catch (e) {
            // ignore the error
        }
        return headerValue;
    }
    set options(configParams) {
        this.privHeaders = configParams.headers;
        this.privIgnoreCache = configParams.ignoreCache;
    }
    setHeaders(key, value) {
        this.privHeaders[key] = value;
    }
    request(method, uri, queryParams = {}, body = null, binaryBody = null) {
        const responseReceivedDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Deferred"]();
        const requestCommand = method === RestRequestType.File ? "POST" : method;
        const handleRestResponse = (data, j = {}) => {
            const d = data;
            return {
                data: JSON.stringify(j),
                headers: JSON.stringify(data.headers),
                json: j,
                ok: data.statusCode >= 200 && data.statusCode < 300,
                status: data.statusCode,
                statusText: j.error ? j.error.message : d.statusText ? d.statusText : d.statusMessage
            };
        };
        const blobToArrayBuffer = (blob) => {
            const reader = new FileReader();
            reader.readAsArrayBuffer(blob);
            return new Promise((resolve) => {
                reader.onloadend = () => {
                    resolve(reader.result);
                };
            });
        };
        const send = (postData) => {
            const sendRequest = bent__WEBPACK_IMPORTED_MODULE_0___default()(uri, requestCommand, this.privHeaders, 200, 201, 202, 204, 400, 401, 402, 403, 404);
            const params = this.queryParams(queryParams) === "" ? "" : `?${this.queryParams(queryParams)}`;
            sendRequest(params, postData).then((data) => __awaiter(this, void 0, void 0, function* () {
                if (method === RestRequestType.Delete || data.statusCode === 204) {
                    // No JSON from Delete and reset (204) operations
                    responseReceivedDeferral.resolve(handleRestResponse(data));
                }
                else {
                    try {
                        const j = yield data.json();
                        responseReceivedDeferral.resolve(handleRestResponse(data, j));
                    }
                    catch (_a) {
                        responseReceivedDeferral.resolve(handleRestResponse(data));
                    }
                }
            })).catch((error) => {
                responseReceivedDeferral.reject(error);
            });
        };
        if (this.privIgnoreCache) {
            this.privHeaders["Cache-Control"] = "no-cache";
        }
        if (method === RestRequestType.File && binaryBody) {
            const contentType = "multipart/form-data";
            this.privHeaders["content-type"] = contentType;
            this.privHeaders["Content-Type"] = contentType;
            if (typeof (Blob) !== "undefined" && binaryBody instanceof Blob) {
                blobToArrayBuffer(binaryBody).then((res) => {
                    send(res);
                }).catch((error) => {
                    responseReceivedDeferral.reject(error);
                });
            }
            else {
                send(binaryBody);
            }
        }
        else {
            if (method === RestRequestType.Post && body) {
                this.privHeaders["content-type"] = "application/json";
                this.privHeaders["Content-Type"] = "application/json";
            }
            send(body);
        }
        return responseReceivedDeferral.promise;
    }
    withQuery(url, params = {}) {
        const queryString = this.queryParams(params);
        return queryString ? url + (url.indexOf("?") === -1 ? "?" : "&") + queryString : url;
    }
    queryParams(params = {}) {
        return Object.keys(params)
            .map((k) => encodeURIComponent(k) + "=" + encodeURIComponent(params[k]))
            .join("&");
    }
}

//# sourceMappingURL=RestMessageAdapter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketConnection.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketConnection.js ***!
  \**********************************************************************************************************************/
/*! exports provided: WebsocketConnection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebsocketConnection", function() { return WebsocketConnection; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _WebsocketMessageAdapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WebsocketMessageAdapter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketMessageAdapter.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


class WebsocketConnection {
    constructor(uri, queryParameters, headers, messageFormatter, proxyInfo, enableCompression = false, connectionId) {
        this.privIsDisposed = false;
        if (!uri) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("uri");
        }
        if (!messageFormatter) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("messageFormatter");
        }
        this.privMessageFormatter = messageFormatter;
        let queryParams = "";
        let i = 0;
        if (queryParameters) {
            for (const paramName in queryParameters) {
                if (paramName) {
                    queryParams += ((i === 0) && (uri.indexOf("?") === -1)) ? "?" : "&";
                    const key = encodeURIComponent(paramName);
                    queryParams += key;
                    let val = queryParameters[paramName];
                    if (val) {
                        val = encodeURIComponent(val);
                        queryParams += `=${val}`;
                    }
                    i++;
                }
            }
        }
        if (headers) {
            for (const headerName in headers) {
                if (headerName) {
                    queryParams += ((i === 0) && (uri.indexOf("?") === -1)) ? "?" : "&";
                    const val = encodeURIComponent(headers[headerName]);
                    queryParams += `${headerName}=${val}`;
                    i++;
                }
            }
        }
        this.privUri = uri + queryParams;
        this.privId = connectionId ? connectionId : Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        this.privConnectionMessageAdapter = new _WebsocketMessageAdapter__WEBPACK_IMPORTED_MODULE_1__["WebsocketMessageAdapter"](this.privUri, this.id, this.privMessageFormatter, proxyInfo, headers, enableCompression);
    }
    dispose() {
        return __awaiter(this, void 0, void 0, function* () {
            this.privIsDisposed = true;
            if (this.privConnectionMessageAdapter) {
                yield this.privConnectionMessageAdapter.close();
            }
        });
    }
    isDisposed() {
        return this.privIsDisposed;
    }
    get id() {
        return this.privId;
    }
    get uri() {
        return this.privUri;
    }
    state() {
        return this.privConnectionMessageAdapter.state;
    }
    open() {
        return this.privConnectionMessageAdapter.open();
    }
    send(message) {
        return this.privConnectionMessageAdapter.send(message);
    }
    read() {
        return this.privConnectionMessageAdapter.read();
    }
    get events() {
        return this.privConnectionMessageAdapter.events;
    }
}

//# sourceMappingURL=WebsocketConnection.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketMessageAdapter.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketMessageAdapter.js ***!
  \**************************************************************************************************************************/
/*! exports provided: WebsocketMessageAdapter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebsocketMessageAdapter", function() { return WebsocketMessageAdapter; });
/* harmony import */ var ws__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ws */ 3);
/* harmony import */ var ws__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ws__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_speech_HeaderNames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common.speech/HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _CertChecks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CertChecks */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/CertChecks.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
// Node.JS specific web socket / browser support.




class WebsocketMessageAdapter {
    constructor(uri, connectionId, messageFormatter, proxyInfo, headers, enableCompression) {
        if (!uri) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ArgumentNullError"]("uri");
        }
        if (!messageFormatter) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ArgumentNullError"]("messageFormatter");
        }
        this.proxyInfo = proxyInfo;
        this.privConnectionEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["EventSource"]();
        this.privConnectionId = connectionId;
        this.privMessageFormatter = messageFormatter;
        this.privConnectionState = _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionState"].None;
        this.privUri = uri;
        this.privHeaders = headers;
        this.privEnableCompression = enableCompression;
        // Add the connection ID to the headers
        this.privHeaders[_common_speech_HeaderNames__WEBPACK_IMPORTED_MODULE_1__["HeaderNames"].ConnectionId] = this.privConnectionId;
        this.privLastErrorReceived = "";
    }
    get state() {
        return this.privConnectionState;
    }
    open() {
        if (this.privConnectionState === _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionState"].Disconnected) {
            return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);
        }
        if (this.privConnectionEstablishDeferral) {
            return this.privConnectionEstablishDeferral.promise;
        }
        this.privConnectionEstablishDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Deferred"]();
        this.privCertificateValidatedDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Deferred"]();
        this.privConnectionState = _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionState"].Connecting;
        try {
            if (typeof WebSocket !== "undefined" && !WebsocketMessageAdapter.forceNpmWebSocket) {
                // Browser handles cert checks.
                this.privCertificateValidatedDeferral.resolve();
                this.privWebsocketClient = new WebSocket(this.privUri);
            }
            else {
                const options = { headers: this.privHeaders, perMessageDeflate: this.privEnableCompression };
                // The ocsp library will handle validation for us and fail the connection if needed.
                this.privCertificateValidatedDeferral.resolve();
                const checkAgent = new _CertChecks__WEBPACK_IMPORTED_MODULE_3__["CertCheckAgent"](this.proxyInfo);
                options.agent = checkAgent.GetAgent();
                // Workaround for https://github.com/microsoft/cognitive-services-speech-sdk-js/issues/465
                // Which is root caused by https://github.com/TooTallNate/node-agent-base/issues/61
                const uri = new URL(this.privUri);
                let protocol = uri.protocol;
                if ((protocol === null || protocol === void 0 ? void 0 : protocol.toLocaleLowerCase()) === "wss:") {
                    protocol = "https:";
                }
                else if ((protocol === null || protocol === void 0 ? void 0 : protocol.toLocaleLowerCase()) === "ws:") {
                    protocol = "http:";
                }
                // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
                options.agent.protocol = protocol;
                this.privWebsocketClient = new ws__WEBPACK_IMPORTED_MODULE_0___default.a(this.privUri, options);
            }
            this.privWebsocketClient.binaryType = "arraybuffer";
            this.privReceivingMessageQueue = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Queue"]();
            this.privDisconnectDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Deferred"]();
            this.privSendMessageQueue = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Queue"]();
            this.processSendQueue().catch((reason) => {
                _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Events"].instance.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["BackgroundEvent"](reason));
            });
        }
        catch (error) {
            this.privConnectionEstablishDeferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionOpenResponse"](500, error));
            return this.privConnectionEstablishDeferral.promise;
        }
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionStartEvent"](this.privConnectionId, this.privUri));
        this.privWebsocketClient.onopen = () => {
            this.privCertificateValidatedDeferral.promise.then(() => {
                this.privConnectionState = _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionState"].Connected;
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionEstablishedEvent"](this.privConnectionId));
                this.privConnectionEstablishDeferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionOpenResponse"](200, ""));
            }, (error) => {
                this.privConnectionEstablishDeferral.reject(error);
            });
        };
        this.privWebsocketClient.onerror = (e) => {
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionErrorEvent"](this.privConnectionId, e.message, e.type));
            this.privLastErrorReceived = e.message;
        };
        this.privWebsocketClient.onclose = (e) => {
            if (this.privConnectionState === _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionState"].Connecting) {
                this.privConnectionState = _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionState"].Disconnected;
                // this.onEvent(new ConnectionEstablishErrorEvent(this.connectionId, e.code, e.reason));
                this.privConnectionEstablishDeferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionOpenResponse"](e.code, e.reason + " " + this.privLastErrorReceived));
            }
            else {
                this.privConnectionState = _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionState"].Disconnected;
                this.privWebsocketClient = null;
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionClosedEvent"](this.privConnectionId, e.code, e.reason));
            }
            this.onClose(e.code, e.reason).catch((reason) => {
                _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Events"].instance.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["BackgroundEvent"](reason));
            });
        };
        this.privWebsocketClient.onmessage = (e) => {
            const networkReceivedTime = new Date().toISOString();
            if (this.privConnectionState === _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionState"].Connected) {
                const deferred = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Deferred"]();
                // let id = ++this.idCounter;
                this.privReceivingMessageQueue.enqueueFromPromise(deferred.promise);
                if (e.data instanceof ArrayBuffer) {
                    const rawMessage = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["RawWebsocketMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_2__["MessageType"].Binary, e.data);
                    this.privMessageFormatter
                        .toConnectionMessage(rawMessage)
                        .then((connectionMessage) => {
                        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionMessageReceivedEvent"](this.privConnectionId, networkReceivedTime, connectionMessage));
                        deferred.resolve(connectionMessage);
                    }, (error) => {
                        // TODO: Events for these ?
                        deferred.reject(`Invalid binary message format. Error: ${error}`);
                    });
                }
                else {
                    const rawMessage = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["RawWebsocketMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_2__["MessageType"].Text, e.data);
                    this.privMessageFormatter
                        .toConnectionMessage(rawMessage)
                        .then((connectionMessage) => {
                        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionMessageReceivedEvent"](this.privConnectionId, networkReceivedTime, connectionMessage));
                        deferred.resolve(connectionMessage);
                    }, (error) => {
                        // TODO: Events for these ?
                        deferred.reject(`Invalid text message format. Error: ${error}`);
                    });
                }
            }
        };
        return this.privConnectionEstablishDeferral.promise;
    }
    send(message) {
        if (this.privConnectionState !== _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionState"].Connected) {
            return Promise.reject(`Cannot send on connection that is in ${_common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionState"][this.privConnectionState]} state`);
        }
        const messageSendStatusDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Deferred"]();
        const messageSendDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Deferred"]();
        this.privSendMessageQueue.enqueueFromPromise(messageSendDeferral.promise);
        this.privMessageFormatter
            .fromConnectionMessage(message)
            .then((rawMessage) => {
            messageSendDeferral.resolve({
                Message: message,
                RawWebsocketMessage: rawMessage,
                sendStatusDeferral: messageSendStatusDeferral,
            });
        }, (error) => {
            messageSendDeferral.reject(`Error formatting the message. ${error}`);
        });
        return messageSendStatusDeferral.promise;
    }
    read() {
        if (this.privConnectionState !== _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionState"].Connected) {
            return Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`);
        }
        return this.privReceivingMessageQueue.dequeue();
    }
    close(reason) {
        if (this.privWebsocketClient) {
            if (this.privConnectionState !== _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionState"].Disconnected) {
                this.privWebsocketClient.close(1000, reason ? reason : "Normal closure by client");
            }
        }
        else {
            return Promise.resolve();
        }
        return this.privDisconnectDeferral.promise;
    }
    get events() {
        return this.privConnectionEvents;
    }
    sendRawMessage(sendItem) {
        try {
            // indicates we are draining the queue and it came with no message;
            if (!sendItem) {
                return Promise.resolve();
            }
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionMessageSentEvent"](this.privConnectionId, new Date().toISOString(), sendItem.Message));
            // add a check for the ws readystate in order to stop the red console error 'WebSocket is already in CLOSING or CLOSED state' appearing
            if (this.isWebsocketOpen) {
                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
                this.privWebsocketClient.send(sendItem.RawWebsocketMessage.payload);
            }
            else {
                return Promise.reject("websocket send error: Websocket not ready " + this.privConnectionId + " " + sendItem.Message.id + " " + new Error().stack);
            }
            return Promise.resolve();
        }
        catch (e) {
            return Promise.reject(`websocket send error: ${e}`);
        }
    }
    onClose(code, reason) {
        return __awaiter(this, void 0, void 0, function* () {
            const closeReason = `Connection closed. ${code}: ${reason}`;
            this.privConnectionState = _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionState"].Disconnected;
            this.privDisconnectDeferral.resolve();
            yield this.privReceivingMessageQueue.drainAndDispose(() => {
                // TODO: Events for these ?
                // Logger.instance.onEvent(new LoggingEvent(LogType.Warning, null, `Failed to process received message. Reason: ${closeReason}, Message: ${JSON.stringify(pendingReceiveItem)}`));
            }, closeReason);
            yield this.privSendMessageQueue.drainAndDispose((pendingSendItem) => {
                pendingSendItem.sendStatusDeferral.reject(closeReason);
            }, closeReason);
        });
    }
    processSendQueue() {
        return __awaiter(this, void 0, void 0, function* () {
            while (true) {
                const itemToSend = this.privSendMessageQueue.dequeue();
                const sendItem = yield itemToSend;
                // indicates we are draining the queue and it came with no message;
                if (!sendItem) {
                    return;
                }
                try {
                    yield this.sendRawMessage(sendItem);
                    sendItem.sendStatusDeferral.resolve();
                }
                catch (sendError) {
                    sendItem.sendStatusDeferral.reject(sendError);
                }
            }
        });
    }
    onEvent(event) {
        this.privConnectionEvents.onEvent(event);
        _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Events"].instance.onEvent(event);
    }
    get isWebsocketOpen() {
        return this.privWebsocketClient && this.privWebsocketClient.readyState === this.privWebsocketClient.OPEN;
    }
}
WebsocketMessageAdapter.forceNpmWebSocket = false;

//# sourceMappingURL=WebsocketMessageAdapter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AddedLmIntent.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AddedLmIntent.js ***!
  \***************************************************************************************************************/
/*! exports provided: AddedLmIntent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddedLmIntent", function() { return AddedLmIntent; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * @class AddedLmIntent
 */
// eslint-disable-next-line max-classes-per-file
class AddedLmIntent {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param modelImpl - The model.
     * @param intentName - The intent name.
     */
    constructor(modelImpl, intentName) {
        this.modelImpl = modelImpl;
        this.intentName = intentName;
    }
}

//# sourceMappingURL=AddedLmIntent.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AgentConfig.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AgentConfig.js ***!
  \*************************************************************************************************************/
/*! exports provided: AgentConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AgentConfig", function() { return AgentConfig; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Represents the JSON used in the agent.config message sent to the speech service.
 */
class AgentConfig {
    toJsonString() {
        return JSON.stringify(this.iPrivConfig);
    }
    get() {
        return this.iPrivConfig;
    }
    /**
     * Setter for the agent.config object.
     * @param value a JSON serializable object.
     */
    set(value) {
        this.iPrivConfig = value;
    }
}

//# sourceMappingURL=AgentConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveSubscriptionKeyAuthentication.js":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveSubscriptionKeyAuthentication.js ***!
  \****************************************************************************************************************************************/
/*! exports provided: CognitiveSubscriptionKeyAuthentication */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CognitiveSubscriptionKeyAuthentication", function() { return CognitiveSubscriptionKeyAuthentication; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
/* harmony import */ var _IAuthentication__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./IAuthentication */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IAuthentication.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



/**
 * @class
 */
class CognitiveSubscriptionKeyAuthentication {
    /**
     * Creates and initializes an instance of the CognitiveSubscriptionKeyAuthentication class.
     * @constructor
     * @param {string} subscriptionKey - The subscription key
     */
    constructor(subscriptionKey) {
        if (!subscriptionKey) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("subscriptionKey");
        }
        this.privAuthInfo = new _IAuthentication__WEBPACK_IMPORTED_MODULE_2__["AuthInfo"](_HeaderNames__WEBPACK_IMPORTED_MODULE_1__["HeaderNames"].AuthKey, subscriptionKey);
    }
    /**
     * Fetches the subscription key.
     * @member
     * @function
     * @public
     * @param {string} authFetchEventId - The id to fetch.
     */
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    fetch(authFetchEventId) {
        return Promise.resolve(this.privAuthInfo);
    }
    /**
     * Fetches the subscription key.
     * @member
     * @function
     * @public
     * @param {string} authFetchEventId - The id to fetch.
     */
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    fetchOnExpiry(authFetchEventId) {
        return Promise.resolve(this.privAuthInfo);
    }
}

//# sourceMappingURL=CognitiveSubscriptionKeyAuthentication.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveTokenAuthentication.js":
/*!******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveTokenAuthentication.js ***!
  \******************************************************************************************************************************/
/*! exports provided: CognitiveTokenAuthentication */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CognitiveTokenAuthentication", function() { return CognitiveTokenAuthentication; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _IAuthentication__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./IAuthentication */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IAuthentication.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



class CognitiveTokenAuthentication {
    constructor(fetchCallback, fetchOnExpiryCallback) {
        if (!fetchCallback) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("fetchCallback");
        }
        if (!fetchOnExpiryCallback) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("fetchOnExpiryCallback");
        }
        this.privFetchCallback = fetchCallback;
        this.privFetchOnExpiryCallback = fetchOnExpiryCallback;
    }
    fetch(authFetchEventId) {
        return this.privFetchCallback(authFetchEventId).then((token) => new _IAuthentication__WEBPACK_IMPORTED_MODULE_1__["AuthInfo"](_HeaderNames__WEBPACK_IMPORTED_MODULE_2__["HeaderNames"].Authorization, token === undefined ? undefined : CognitiveTokenAuthentication.privTokenPrefix + token));
    }
    fetchOnExpiry(authFetchEventId) {
        return this.privFetchOnExpiryCallback(authFetchEventId).then((token) => new _IAuthentication__WEBPACK_IMPORTED_MODULE_1__["AuthInfo"](_HeaderNames__WEBPACK_IMPORTED_MODULE_2__["HeaderNames"].Authorization, token === undefined ? undefined : CognitiveTokenAuthentication.privTokenPrefix + token));
    }
}
CognitiveTokenAuthentication.privTokenPrefix = "bearer ";

//# sourceMappingURL=CognitiveTokenAuthentication.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js ***!
  \***********************************************************************************************************************/
/*! exports provided: ConnectionFactoryBase */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionFactoryBase", function() { return ConnectionFactoryBase; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./QueryParameterNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



class ConnectionFactoryBase {
    static getHostSuffix(region) {
        if (!!region) {
            if (region.toLowerCase().startsWith("china")) {
                return ".azure.cn";
            }
            if (region.toLowerCase().startsWith("usgov")) {
                return ".azure.us";
            }
        }
        return ".microsoft.com";
    }
    setCommonUrlParams(config, queryParams, endpoint) {
        const propertyIdToParameterMap = new Map([
            [_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].Speech_SegmentationSilenceTimeoutMs, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__["QueryParameterNames"].SegmentationSilenceTimeoutMs],
            [_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_EnableAudioLogging, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__["QueryParameterNames"].EnableAudioLogging],
            [_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_EndSilenceTimeoutMs, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__["QueryParameterNames"].EndSilenceTimeoutMs],
            [_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_InitialSilenceTimeoutMs, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__["QueryParameterNames"].InitialSilenceTimeoutMs],
            [_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceResponse_PostProcessingOption, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__["QueryParameterNames"].Postprocessing],
            [_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceResponse_ProfanityOption, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__["QueryParameterNames"].Profanity],
            [_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceResponse_RequestWordLevelTimestamps, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__["QueryParameterNames"].EnableWordLevelTimestamps],
            [_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceResponse_StablePartialResultThreshold, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__["QueryParameterNames"].StableIntermediateThreshold],
        ]);
        propertyIdToParameterMap.forEach((parameterName, propertyId) => {
            this.setUrlParameter(propertyId, parameterName, config, queryParams, endpoint);
        });
        const serviceProperties = JSON.parse(config.parameters.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ServicePropertiesPropertyName"], "{}"));
        Object.keys(serviceProperties).forEach((value) => {
            queryParams[value] = serviceProperties[value];
        });
    }
    setUrlParameter(propId, parameterName, config, queryParams, endpoint) {
        const value = config.parameters.getProperty(propId, undefined);
        // FIXME: The .search() check will incorrectly match parameter name anywhere in the string
        //        including e.g. the path portion, or even as a substring of other query parameters
        if (value && (!endpoint || endpoint.search(parameterName) === -1)) {
            queryParams[parameterName] = value.toLocaleLowerCase();
        }
    }
}

//# sourceMappingURL=ConnectionFactoryBase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConversationServiceRecognizer.js":
/*!*******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConversationServiceRecognizer.js ***!
  \*******************************************************************************************************************************/
/*! exports provided: ConversationServiceRecognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationServiceRecognizer", function() { return ConversationServiceRecognizer; });
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


class ConversationServiceRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_1__["ServiceRecognizerBase"] {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, recognizer) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, recognizer);
        this.handleSpeechPhraseMessage = (textBody) => __awaiter(this, void 0, void 0, function* () { return this.handleSpeechPhrase(textBody); });
        this.handleSpeechHypothesisMessage = (textBody) => this.handleSpeechHypothesis(textBody);
    }
    processTypeSpecificMessages(connectionMessage) {
        void connectionMessage;
        return;
    }
    handleRecognizedCallback(result, offset, sessionId) {
        void result;
        void offset;
        void sessionId;
        return;
    }
    handleRecognizingCallback(result, duration, sessionId) {
        void result;
        void duration;
        void sessionId;
        return;
    }
    processSpeechMessages(connectionMessage) {
        return __awaiter(this, void 0, void 0, function* () {
            let processed = false;
            switch (connectionMessage.path.toLowerCase()) {
                case "speech.hypothesis":
                case "speech.fragment":
                    if (!!this.handleSpeechHypothesisMessage) {
                        this.handleSpeechHypothesisMessage(connectionMessage.textBody);
                    }
                    processed = true;
                    break;
                case "speech.phrase":
                    if (!!this.handleSpeechPhraseMessage) {
                        yield this.handleSpeechPhraseMessage(connectionMessage.textBody);
                    }
                    processed = true;
                    break;
                default:
                    break;
            }
            return processed;
        });
    }
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error) {
        // Implementing to allow inheritance
        void sessionId;
        void requestId;
        void cancellationReason;
        void errorCode;
        void error;
    }
    handleSpeechPhrase(textBody) {
        return __awaiter(this, void 0, void 0, function* () {
            const simple = _Exports__WEBPACK_IMPORTED_MODULE_1__["SimpleSpeechPhrase"].fromJSON(textBody);
            const resultReason = _Exports__WEBPACK_IMPORTED_MODULE_1__["EnumTranslation"].implTranslateRecognitionResult(simple.RecognitionStatus);
            let result;
            const resultProps = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyCollection"]();
            resultProps.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceResponse_JsonResult, textBody);
            const simpleOffset = simple.Offset + this.privRequestSession.currentTurnAudioOffset;
            let offset = simpleOffset;
            this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset + simple.Offset + simple.Duration);
            if (_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].Canceled === resultReason) {
                const cancelReason = _Exports__WEBPACK_IMPORTED_MODULE_1__["EnumTranslation"].implTranslateCancelResult(simple.RecognitionStatus);
                const cancellationErrorCode = _Exports__WEBPACK_IMPORTED_MODULE_1__["EnumTranslation"].implTranslateCancelErrorCode(simple.RecognitionStatus);
                yield this.cancelRecognitionLocal(cancelReason, cancellationErrorCode, _Exports__WEBPACK_IMPORTED_MODULE_1__["EnumTranslation"].implTranslateErrorDetails(cancellationErrorCode));
            }
            else {
                if (!(this.privRequestSession.isSpeechEnded && resultReason === _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].NoMatch && simple.RecognitionStatus !== _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].InitialSilenceTimeout)) {
                    if (this.privRecognizerConfig.parameters.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["OutputFormatPropertyName"]) === _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["OutputFormat"][_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["OutputFormat"].Simple]) {
                        result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionResult"](this.privRequestSession.requestId, resultReason, simple.DisplayText, simple.Duration, simpleOffset, simple.Language, simple.LanguageDetectionConfidence, simple.SpeakerId, undefined, textBody, resultProps);
                    }
                    else {
                        const detailed = _Exports__WEBPACK_IMPORTED_MODULE_1__["DetailedSpeechPhrase"].fromJSON(textBody);
                        const totalOffset = detailed.Offset + this.privRequestSession.currentTurnAudioOffset;
                        const offsetCorrectedJson = detailed.getJsonWithCorrectedOffsets(totalOffset);
                        result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionResult"](this.privRequestSession.requestId, resultReason, detailed.Text, detailed.Duration, totalOffset, detailed.Language, detailed.LanguageDetectionConfidence, detailed.SpeakerId, undefined, offsetCorrectedJson, resultProps);
                        offset = result.offset;
                    }
                    this.handleRecognizedCallback(result, offset, this.privRequestSession.sessionId);
                }
            }
        });
    }
    handleSpeechHypothesis(textBody) {
        const hypothesis = _Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechHypothesis"].fromJSON(textBody);
        const offset = hypothesis.Offset + this.privRequestSession.currentTurnAudioOffset;
        const resultProps = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyCollection"]();
        resultProps.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceResponse_JsonResult, textBody);
        const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionResult"](this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].RecognizingSpeech, hypothesis.Text, hypothesis.Duration, offset, hypothesis.Language, hypothesis.LanguageDetectionConfidence, hypothesis.SpeakerId, undefined, textBody, resultProps);
        this.privRequestSession.onHypothesis(offset);
        this.handleRecognizingCallback(result, hypothesis.Duration, this.privRequestSession.sessionId);
    }
}

//# sourceMappingURL=ConversationServiceRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogConnectorFactory.js":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogConnectorFactory.js ***!
  \************************************************************************************************************************/
/*! exports provided: DialogConnectionFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogConnectionFactory", function() { return DialogConnectionFactory; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
/* harmony import */ var _QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./QueryParameterNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */







class DialogConnectionFactory extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_3__["ConnectionFactoryBase"] {
    create(config, authInfo, connectionId) {
        const applicationId = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_ApplicationId, "");
        const dialogType = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_DialogType);
        const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region);
        const language = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage, "en-US");
        const requestTurnStatus = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_Request_Bot_Status_Messages, "true");
        const queryParams = {};
        queryParams[_HeaderNames__WEBPACK_IMPORTED_MODULE_4__["HeaderNames"].ConnectionId] = connectionId;
        queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].Format] = config.parameters.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["OutputFormatPropertyName"], _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"][_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"].Simple]).toLowerCase();
        queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].Language] = language;
        queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].RequestBotStatusMessages] = requestTurnStatus;
        if (applicationId) {
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].BotId] = applicationId;
            if (dialogType === _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["DialogServiceConfig"].DialogTypes.CustomCommands) {
                queryParams[_HeaderNames__WEBPACK_IMPORTED_MODULE_4__["HeaderNames"].CustomCommandsAppId] = applicationId;
            }
        }
        const resourceInfix = dialogType === _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["DialogServiceConfig"].DialogTypes.CustomCommands ? "commands/"
            : "";
        const version = dialogType === _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["DialogServiceConfig"].DialogTypes.CustomCommands ? "v1"
            : dialogType === _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["DialogServiceConfig"].DialogTypes.BotFramework ? "v3"
                : "v0";
        const headers = {};
        if (authInfo.token != null && authInfo.token !== "") {
            headers[authInfo.headerName] = authInfo.token;
        }
        // The URL used for connection is chosen in a priority order of specification:
        //  1. If a custom endpoint is provided, that URL is used verbatim.
        //  2. If a custom host is provided (e.g. "wss://my.custom.endpoint.com:1123"), a URL is constructed from it.
        //  3. If no custom connection details are provided, a URL is constructed from default values.
        let endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Endpoint, "");
        if (!endpoint) {
            const hostSuffix = _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_3__["ConnectionFactoryBase"].getHostSuffix(region);
            const host = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Host, `wss://${region}.${DialogConnectionFactory.BaseUrl}${hostSuffix}`);
            const standardizedHost = host.endsWith("/") ? host : host + "/";
            endpoint = `${standardizedHost}${resourceInfix}${DialogConnectionFactory.ApiKey}/${version}`;
        }
        this.setCommonUrlParams(config, queryParams, endpoint);
        const enableCompression = config.parameters.getProperty("SPEECH-EnableWebsocketCompression", "false") === "true";
        return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["WebsocketConnection"](endpoint, queryParams, headers, new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["WebsocketMessageFormatter"](), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ProxyInfo"].fromRecognizerConfig(config), enableCompression, connectionId);
    }
}
DialogConnectionFactory.ApiKey = "api";
DialogConnectionFactory.BaseUrl = "convai.speech";

//# sourceMappingURL=DialogConnectorFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceAdapter.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceAdapter.js ***!
  \**********************************************************************************************************************/
/*! exports provided: DialogServiceAdapter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogServiceAdapter", function() { return DialogServiceAdapter; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _common_DialogEvents__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/DialogEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/DialogEvents.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _sdk_Audio_AudioOutputFormat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../sdk/Audio/AudioOutputFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputFormat.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _DialogServiceTurnStateManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./DialogServiceTurnStateManager */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceTurnStateManager.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _ServiceMessages_ActivityResponsePayload__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ServiceMessages/ActivityResponsePayload */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/ActivityResponsePayload.js");
/* harmony import */ var _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./SpeechConnectionMessage.Internal */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionMessage.Internal.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};









class DialogServiceAdapter extends _Exports__WEBPACK_IMPORTED_MODULE_6__["ServiceRecognizerBase"] {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, dialogServiceConnector) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, dialogServiceConnector);
        this.privEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["EventSource"]();
        this.privDialogServiceConnector = dialogServiceConnector;
        this.receiveMessageOverride = () => this.receiveDialogMessageOverride();
        this.privTurnStateManager = new _DialogServiceTurnStateManager__WEBPACK_IMPORTED_MODULE_5__["DialogServiceTurnStateManager"]();
        this.recognizeOverride =
            (recoMode, successCallback, errorCallback) => this.listenOnce(recoMode, successCallback, errorCallback);
        this.postConnectImplOverride = (connection) => this.dialogConnectImpl(connection);
        this.configConnectionOverride = (connection) => this.configConnection(connection);
        this.disconnectOverride = () => this.privDisconnect();
        this.privDialogAudioSource = audioSource;
        this.agentConfigSent = false;
        this.privLastResult = null;
        this.connectionEvents.attach((connectionEvent) => {
            if (connectionEvent.name === "ConnectionClosedEvent") {
                this.terminateMessageLoop = true;
            }
        });
    }
    sendMessage(message) {
        return __awaiter(this, void 0, void 0, function* () {
            const interactionGuid = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_2__["createGuid"])();
            const requestId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_2__["createNoDashGuid"])();
            const agentMessage = {
                context: {
                    interactionId: interactionGuid
                },
                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
                messagePayload: JSON.parse(message),
                version: 0.5
            };
            const agentMessageJson = JSON.stringify(agentMessage);
            const connection = yield this.fetchConnection();
            yield connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_8__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_2__["MessageType"].Text, "agent", requestId, "application/json", agentMessageJson));
        });
    }
    privDisconnect() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.cancelRecognition(this.privRequestSession.sessionId, this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["CancellationErrorCode"].NoError, "Disconnecting");
            this.terminateMessageLoop = true;
            this.agentConfigSent = false;
            return;
        });
    }
    processTypeSpecificMessages(connectionMessage) {
        const resultProps = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyCollection"]();
        if (connectionMessage.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_2__["MessageType"].Text) {
            resultProps.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceResponse_JsonResult, connectionMessage.textBody);
        }
        let result;
        let processed;
        switch (connectionMessage.path.toLowerCase()) {
            case "speech.phrase":
                const speechPhrase = _Exports__WEBPACK_IMPORTED_MODULE_6__["SimpleSpeechPhrase"].fromJSON(connectionMessage.textBody);
                this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset + speechPhrase.Offset + speechPhrase.Duration);
                if (speechPhrase.RecognitionStatus !== _Exports__WEBPACK_IMPORTED_MODULE_6__["RecognitionStatus"].TooManyRequests && speechPhrase.RecognitionStatus !== _Exports__WEBPACK_IMPORTED_MODULE_6__["RecognitionStatus"].Error) {
                    const args = this.fireEventForResult(speechPhrase, resultProps);
                    this.privLastResult = args.result;
                    if (!!this.privDialogServiceConnector.recognized) {
                        try {
                            this.privDialogServiceConnector.recognized(this.privDialogServiceConnector, args);
                            /* eslint-disable no-empty */
                        }
                        catch (error) {
                            // Not going to let errors in the event handler
                            // trip things up.
                        }
                    }
                }
                processed = true;
                break;
            case "speech.hypothesis":
                const hypothesis = _Exports__WEBPACK_IMPORTED_MODULE_6__["SpeechHypothesis"].fromJSON(connectionMessage.textBody);
                const offset = hypothesis.Offset + this.privRequestSession.currentTurnAudioOffset;
                result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["SpeechRecognitionResult"](this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["ResultReason"].RecognizingSpeech, hypothesis.Text, hypothesis.Duration, offset, hypothesis.Language, hypothesis.LanguageDetectionConfidence, undefined, undefined, connectionMessage.textBody, resultProps);
                this.privRequestSession.onHypothesis(offset);
                const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["SpeechRecognitionEventArgs"](result, hypothesis.Duration, this.privRequestSession.sessionId);
                if (!!this.privDialogServiceConnector.recognizing) {
                    try {
                        this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector, ev);
                        /* eslint-disable no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                processed = true;
                break;
            case "speech.keyword":
                const keyword = _Exports__WEBPACK_IMPORTED_MODULE_6__["SpeechKeyword"].fromJSON(connectionMessage.textBody);
                result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["SpeechRecognitionResult"](this.privRequestSession.requestId, keyword.Status === "Accepted" ? _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["ResultReason"].RecognizedKeyword : _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["ResultReason"].NoMatch, keyword.Text, keyword.Duration, keyword.Offset, undefined, undefined, undefined, undefined, connectionMessage.textBody, resultProps);
                if (keyword.Status !== "Accepted") {
                    this.privLastResult = result;
                }
                const event = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["SpeechRecognitionEventArgs"](result, result.duration, result.resultId);
                if (!!this.privDialogServiceConnector.recognized) {
                    try {
                        this.privDialogServiceConnector.recognized(this.privDialogServiceConnector, event);
                        /* eslint-disable no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                processed = true;
                break;
            case "audio":
                {
                    const audioRequestId = connectionMessage.requestId.toUpperCase();
                    const turn = this.privTurnStateManager.GetTurn(audioRequestId);
                    try {
                        // Empty binary message signals end of stream.
                        if (!connectionMessage.binaryBody) {
                            turn.endAudioStream();
                        }
                        else {
                            turn.audioStream.write(connectionMessage.binaryBody);
                        }
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                processed = true;
                break;
            case "response":
                {
                    this.handleResponseMessage(connectionMessage);
                }
                processed = true;
                break;
            default:
                break;
        }
        const defferal = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Deferred"]();
        defferal.resolve(processed);
        return defferal.promise;
    }
    // Cancels recognition.
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error) {
        return __awaiter(this, void 0, void 0, function* () {
            this.terminateMessageLoop = true;
            if (!!this.privRequestSession.isRecognizing) {
                yield this.privRequestSession.onStopRecognizing();
            }
            if (!!this.privDialogServiceConnector.canceled) {
                const properties = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyCollection"]();
                properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_6__["CancellationErrorCodePropertyName"], _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["CancellationErrorCode"][errorCode]);
                const cancelEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["SpeechRecognitionCanceledEventArgs"](cancellationReason, error, errorCode, undefined, sessionId);
                try {
                    this.privDialogServiceConnector.canceled(this.privDialogServiceConnector, cancelEvent);
                    /* eslint-disable no-empty */
                }
                catch (_a) { }
                if (!!this.privSuccessCallback) {
                    const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["SpeechRecognitionResult"](undefined, // ResultId
                    _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["ResultReason"].Canceled, undefined, // Text
                    undefined, // Duration
                    undefined, // Offset
                    undefined, // Language
                    undefined, // Language Detection Confidence
                    undefined, // Speaker Id
                    error, undefined, // Json
                    properties);
                    try {
                        this.privSuccessCallback(result);
                        this.privSuccessCallback = undefined;
                        /* eslint-disable no-empty */
                    }
                    catch (_b) { }
                }
            }
        });
    }
    listenOnce(recoMode, successCallback, errorCallback) {
        return __awaiter(this, void 0, void 0, function* () {
            this.privRecognizerConfig.recognitionMode = recoMode;
            this.privSuccessCallback = successCallback;
            this.privErrorCallback = errorCallback;
            this.privRequestSession.startNewRecognition();
            this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events);
            this.privRecognizerConfig.parameters.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].Speech_SessionId, this.privRequestSession.sessionId);
            // Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
            const conPromise = this.connectImpl();
            const preAudioPromise = this.sendPreAudioMessages();
            const node = yield this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId);
            const format = yield this.privDialogAudioSource.format;
            const deviceInfo = yield this.privDialogAudioSource.deviceInfo;
            const audioNode = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ReplayableAudioNode"](node, format.avgBytesPerSec);
            yield this.privRequestSession.onAudioSourceAttachCompleted(audioNode, false);
            this.privRecognizerConfig.SpeechServiceConfig.Context.audio = { source: deviceInfo };
            try {
                yield conPromise;
                yield preAudioPromise;
            }
            catch (error) {
                yield this.cancelRecognition(this.privRequestSession.sessionId, this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["CancellationErrorCode"].ConnectionFailure, error);
                return Promise.resolve();
            }
            const sessionStartEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["SessionEventArgs"](this.privRequestSession.sessionId);
            if (!!this.privRecognizer.sessionStarted) {
                this.privRecognizer.sessionStarted(this.privRecognizer, sessionStartEventArgs);
            }
            const audioSendPromise = this.sendAudio(audioNode);
            // /* eslint-disable no-empty */
            audioSendPromise.then(() => { }, (error) => __awaiter(this, void 0, void 0, function* () {
                yield this.cancelRecognition(this.privRequestSession.sessionId, this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["CancellationErrorCode"].RuntimeError, error);
            }));
        });
    }
    // Establishes a websocket connection to the end point.
    dialogConnectImpl(connection) {
        this.privConnectionLoop = this.startMessageLoop();
        return connection;
    }
    receiveDialogMessageOverride() {
        // we won't rely on the cascading promises of the connection since we want to continually be available to receive messages
        const communicationCustodian = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Deferred"]();
        const loop = () => __awaiter(this, void 0, void 0, function* () {
            try {
                const isDisposed = this.isDisposed();
                const terminateMessageLoop = (!this.isDisposed() && this.terminateMessageLoop);
                if (isDisposed || terminateMessageLoop) {
                    // We're done.
                    communicationCustodian.resolve(undefined);
                    return;
                }
                const connection = yield this.fetchConnection();
                const message = yield connection.read();
                if (!message) {
                    return loop();
                }
                const connectionMessage = _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_8__["SpeechConnectionMessage"].fromConnectionMessage(message);
                switch (connectionMessage.path.toLowerCase()) {
                    case "turn.start":
                        {
                            const turnRequestId = connectionMessage.requestId.toUpperCase();
                            const audioSessionReqId = this.privRequestSession.requestId.toUpperCase();
                            // turn started by the service
                            if (turnRequestId !== audioSessionReqId) {
                                this.privTurnStateManager.StartTurn(turnRequestId);
                            }
                            else {
                                this.privRequestSession.onServiceTurnStartResponse();
                            }
                        }
                        break;
                    case "speech.startdetected":
                        const speechStartDetected = _Exports__WEBPACK_IMPORTED_MODULE_6__["SpeechDetected"].fromJSON(connectionMessage.textBody);
                        const speechStartEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["RecognitionEventArgs"](speechStartDetected.Offset, this.privRequestSession.sessionId);
                        if (!!this.privRecognizer.speechStartDetected) {
                            this.privRecognizer.speechStartDetected(this.privRecognizer, speechStartEventArgs);
                        }
                        break;
                    case "speech.enddetected":
                        let json;
                        if (connectionMessage.textBody.length > 0) {
                            json = connectionMessage.textBody;
                        }
                        else {
                            // If the request was empty, the JSON returned is empty.
                            json = "{ Offset: 0 }";
                        }
                        const speechStopDetected = _Exports__WEBPACK_IMPORTED_MODULE_6__["SpeechDetected"].fromJSON(json);
                        this.privRequestSession.onServiceRecognized(speechStopDetected.Offset + this.privRequestSession.currentTurnAudioOffset);
                        const speechStopEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["RecognitionEventArgs"](speechStopDetected.Offset + this.privRequestSession.currentTurnAudioOffset, this.privRequestSession.sessionId);
                        if (!!this.privRecognizer.speechEndDetected) {
                            this.privRecognizer.speechEndDetected(this.privRecognizer, speechStopEventArgs);
                        }
                        break;
                    case "turn.end":
                        {
                            const turnEndRequestId = connectionMessage.requestId.toUpperCase();
                            const audioSessionReqId = this.privRequestSession.requestId.toUpperCase();
                            // turn started by the service
                            if (turnEndRequestId !== audioSessionReqId) {
                                this.privTurnStateManager.CompleteTurn(turnEndRequestId);
                            }
                            else {
                                // Audio session turn
                                const sessionStopEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["SessionEventArgs"](this.privRequestSession.sessionId);
                                yield this.privRequestSession.onServiceTurnEndResponse(false);
                                if (!this.privRecognizerConfig.isContinuousRecognition || this.privRequestSession.isSpeechEnded || !this.privRequestSession.isRecognizing) {
                                    if (!!this.privRecognizer.sessionStopped) {
                                        this.privRecognizer.sessionStopped(this.privRecognizer, sessionStopEventArgs);
                                    }
                                }
                                // report result to promise.
                                if (!!this.privSuccessCallback && this.privLastResult) {
                                    try {
                                        this.privSuccessCallback(this.privLastResult);
                                        this.privLastResult = null;
                                    }
                                    catch (e) {
                                        if (!!this.privErrorCallback) {
                                            this.privErrorCallback(e);
                                        }
                                    }
                                    // Only invoke the call back once.
                                    // and if it's successful don't invoke the
                                    // error after that.
                                    this.privSuccessCallback = undefined;
                                    this.privErrorCallback = undefined;
                                }
                            }
                        }
                        break;
                    default:
                        try {
                            const processed = yield this.processTypeSpecificMessages(connectionMessage);
                            if (!processed) {
                                if (!!this.serviceEvents) {
                                    this.serviceEvents.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ServiceEvent"](connectionMessage.path.toLowerCase(), connectionMessage.textBody));
                                }
                            }
                        }
                        catch (e) {
                            //
                        }
                }
                const ret = loop();
                return ret;
            }
            catch (error) {
                this.terminateMessageLoop = true;
                communicationCustodian.resolve();
            }
        });
        loop().catch((reason) => {
            _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Events"].instance.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["BackgroundEvent"](reason));
        });
        return communicationCustodian.promise;
    }
    startMessageLoop() {
        return __awaiter(this, void 0, void 0, function* () {
            this.terminateMessageLoop = false;
            try {
                yield this.receiveDialogMessageOverride();
            }
            catch (error) {
                yield this.cancelRecognition(this.privRequestSession.sessionId, this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["CancellationErrorCode"].RuntimeError, error);
            }
            return Promise.resolve();
        });
    }
    // Takes an established websocket connection to the endpoint and sends speech configuration information.
    configConnection(connection) {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.terminateMessageLoop) {
                this.terminateMessageLoop = false;
                return Promise.reject("Connection to service terminated.");
            }
            yield this.sendSpeechServiceConfig(connection, this.privRequestSession, this.privRecognizerConfig.SpeechServiceConfig.serialize());
            yield this.sendAgentConfig(connection);
            return connection;
        });
    }
    sendPreAudioMessages() {
        return __awaiter(this, void 0, void 0, function* () {
            const connection = yield this.fetchConnection();
            this.addKeywordContextData();
            yield this.sendSpeechContext(connection, true);
            yield this.sendAgentContext(connection);
            yield this.sendWaveHeader(connection);
        });
    }
    sendAgentConfig(connection) {
        if (this.agentConfig && !this.agentConfigSent) {
            if (this.privRecognizerConfig
                .parameters
                .getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].Conversation_DialogType) === _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["DialogServiceConfig"].DialogTypes.CustomCommands) {
                const config = this.agentConfig.get();
                config.botInfo.commandsCulture = this.privRecognizerConfig.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_RecoLanguage, "en-us");
                this.agentConfig.set(config);
            }
            this.onEvent(new _common_DialogEvents__WEBPACK_IMPORTED_MODULE_1__["SendingAgentContextMessageEvent"](this.agentConfig));
            const agentConfigJson = this.agentConfig.toJsonString();
            // guard against sending this multiple times on one connection
            this.agentConfigSent = true;
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_8__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_2__["MessageType"].Text, "agent.config", this.privRequestSession.requestId, "application/json", agentConfigJson));
        }
        return;
    }
    sendAgentContext(connection) {
        const guid = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_2__["createGuid"])();
        const speechActivityTemplate = this.privDialogServiceConnector.properties.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].Conversation_Speech_Activity_Template);
        const agentContext = {
            channelData: "",
            context: {
                interactionId: guid
            },
            messagePayload: typeof speechActivityTemplate === undefined ? undefined : speechActivityTemplate,
            version: 0.5
        };
        const agentContextJson = JSON.stringify(agentContext);
        return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_8__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_2__["MessageType"].Text, "speech.agent.context", this.privRequestSession.requestId, "application/json", agentContextJson));
    }
    fireEventForResult(serviceResult, properties) {
        const resultReason = _Exports__WEBPACK_IMPORTED_MODULE_6__["EnumTranslation"].implTranslateRecognitionResult(serviceResult.RecognitionStatus);
        const offset = serviceResult.Offset + this.privRequestSession.currentTurnAudioOffset;
        const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["SpeechRecognitionResult"](this.privRequestSession.requestId, resultReason, serviceResult.DisplayText, serviceResult.Duration, offset, serviceResult.Language, serviceResult.LanguageDetectionConfidence, undefined, undefined, JSON.stringify(serviceResult), properties);
        const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["SpeechRecognitionEventArgs"](result, offset, this.privRequestSession.sessionId);
        return ev;
    }
    handleResponseMessage(responseMessage) {
        // "response" messages can contain either "message" (activity) or "MessageStatus" data. Fire the appropriate
        // event according to the message type that's specified.
        const responsePayload = JSON.parse(responseMessage.textBody);
        switch (responsePayload.messageType.toLowerCase()) {
            case "message":
                const responseRequestId = responseMessage.requestId.toUpperCase();
                const activityPayload = _ServiceMessages_ActivityResponsePayload__WEBPACK_IMPORTED_MODULE_7__["ActivityPayloadResponse"].fromJSON(responseMessage.textBody);
                const turn = this.privTurnStateManager.GetTurn(responseRequestId);
                // update the conversation Id
                if (activityPayload.conversationId) {
                    const updateAgentConfig = this.agentConfig.get();
                    updateAgentConfig.botInfo.conversationId = activityPayload.conversationId;
                    this.agentConfig.set(updateAgentConfig);
                }
                const pullAudioOutputStream = turn.processActivityPayload(activityPayload, _sdk_Audio_AudioOutputFormat__WEBPACK_IMPORTED_MODULE_3__["AudioOutputFormatImpl"].fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_SynthOutputFormat, undefined)));
                const activity = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["ActivityReceivedEventArgs"](activityPayload.messagePayload, pullAudioOutputStream);
                if (!!this.privDialogServiceConnector.activityReceived) {
                    try {
                        this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector, activity);
                        /* eslint-disable-next-line no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                break;
            case "messagestatus":
                if (!!this.privDialogServiceConnector.turnStatusReceived) {
                    try {
                        this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector, new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__["TurnStatusReceivedEventArgs"](responseMessage.textBody));
                        /* eslint-disable-next-line no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                break;
            default:
                _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Events"].instance.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["BackgroundEvent"](`Unexpected response of type ${responsePayload.messageType}. Ignoring.`));
                break;
        }
    }
    onEvent(event) {
        this.privEvents.onEvent(event);
        _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Events"].instance.onEvent(event);
    }
    addKeywordContextData() {
        const keywordPropertyValue = this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");
        if (keywordPropertyValue === undefined) {
            return;
        }
        const keywordOffsetPropertyValue = this.privRecognizerConfig.parameters
            .getProperty("SPEECH-KeywordsToDetect-Offsets");
        const keywordDurationPropertyValue = this.privRecognizerConfig.parameters
            .getProperty("SPEECH-KeywordsToDetect-Durations");
        const keywords = keywordPropertyValue.split(";");
        const keywordOffsets = keywordOffsetPropertyValue === undefined ? [] : keywordOffsetPropertyValue.split(";");
        const keywordDurations = keywordDurationPropertyValue === undefined ? [] : keywordDurationPropertyValue.split(";");
        const keywordDefinitionArray = [];
        for (let i = 0; i < keywords.length; i++) {
            const definition = {};
            definition.text = keywords[i];
            if (i < keywordOffsets.length) {
                definition.offset = Number(keywordOffsets[i]);
            }
            if (i < keywordDurations.length) {
                definition.duration = Number(keywordDurations[i]);
            }
            keywordDefinitionArray.push(definition);
        }
        this.speechContext.setSection("invocationSource", "VoiceActivationWithKeyword");
        this.speechContext.setSection("keywordDetection", [{
                clientDetectedKeywords: keywordDefinitionArray,
                onReject: { action: "EndOfTurn" },
                type: "startTrigger"
            }]);
    }
}

//# sourceMappingURL=DialogServiceAdapter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceTurnState.js":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceTurnState.js ***!
  \************************************************************************************************************************/
/*! exports provided: DialogServiceTurnState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogServiceTurnState", function() { return DialogServiceTurnState; });
/* harmony import */ var _sdk_Audio_AudioOutputFormat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sdk/Audio/AudioOutputFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputFormat.js");
/* harmony import */ var _sdk_Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Audio/AudioOutputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js");
/* harmony import */ var _ServiceMessages_ActivityResponsePayload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ServiceMessages/ActivityResponsePayload */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/ActivityResponsePayload.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



class DialogServiceTurnState {
    constructor(manager, requestId) {
        this.privRequestId = requestId;
        this.privIsCompleted = false;
        this.privAudioStream = null;
        this.privTurnManager = manager;
        this.resetTurnEndTimeout();
    }
    get audioStream() {
        // Called when is needed to stream.
        this.resetTurnEndTimeout();
        return this.privAudioStream;
    }
    processActivityPayload(payload, audioFormat) {
        if (payload.messageDataStreamType === _ServiceMessages_ActivityResponsePayload__WEBPACK_IMPORTED_MODULE_2__["MessageDataStreamType"].TextToSpeechAudio) {
            this.privAudioStream = _sdk_Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_1__["AudioOutputStream"].createPullStream();
            this.privAudioStream.format = (audioFormat !== undefined) ? audioFormat : _sdk_Audio_AudioOutputFormat__WEBPACK_IMPORTED_MODULE_0__["AudioOutputFormatImpl"].getDefaultOutputFormat();
        }
        return this.privAudioStream;
    }
    endAudioStream() {
        if (this.privAudioStream !== null && !this.privAudioStream.isClosed) {
            this.privAudioStream.close();
        }
    }
    complete() {
        if (this.privTimeoutToken !== undefined) {
            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
            clearTimeout(this.privTimeoutToken);
        }
        this.endAudioStream();
    }
    resetTurnEndTimeout() {
        if (this.privTimeoutToken !== undefined) {
            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
            clearTimeout(this.privTimeoutToken);
        }
        this.privTimeoutToken = setTimeout(() => {
            this.privTurnManager.CompleteTurn(this.privRequestId);
            return;
        }, 2000);
    }
}

//# sourceMappingURL=DialogServiceTurnState.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceTurnStateManager.js":
/*!*******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceTurnStateManager.js ***!
  \*******************************************************************************************************************************/
/*! exports provided: DialogServiceTurnStateManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogServiceTurnStateManager", function() { return DialogServiceTurnStateManager; });
/* harmony import */ var _common_Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _DialogServiceTurnState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DialogServiceTurnState */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceTurnState.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class DialogServiceTurnStateManager {
    constructor() {
        this.privTurnMap = new Map();
        return;
    }
    StartTurn(id) {
        if (this.privTurnMap.has(id)) {
            throw new _common_Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Service error: There is already a turn with id:" + id);
        }
        const turnState = new _DialogServiceTurnState__WEBPACK_IMPORTED_MODULE_1__["DialogServiceTurnState"](this, id);
        this.privTurnMap.set(id, turnState);
        return this.privTurnMap.get(id);
    }
    GetTurn(id) {
        return this.privTurnMap.get(id);
    }
    CompleteTurn(id) {
        if (!this.privTurnMap.has(id)) {
            throw new _common_Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Service error: Received turn end for an unknown turn id:" + id);
        }
        const turnState = this.privTurnMap.get(id);
        turnState.complete();
        this.privTurnMap.delete(id);
        return turnState;
    }
}

//# sourceMappingURL=DialogServiceTurnStateManager.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DynamicGrammarBuilder.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DynamicGrammarBuilder.js ***!
  \***********************************************************************************************************************/
/*! exports provided: DynamicGrammarBuilder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DynamicGrammarBuilder", function() { return DynamicGrammarBuilder; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Responsible for building the object to be sent to the speech service to support dynamic grammars.
 * @class DynamicGrammarBuilder
 */
class DynamicGrammarBuilder {
    // Adds one more reference phrases to the dynamic grammar to send.
    // All added phrases are generic phrases.
    addPhrase(phrase) {
        if (!this.privPhrases) {
            this.privPhrases = [];
        }
        if (phrase instanceof Array) {
            this.privPhrases = this.privPhrases.concat(phrase);
        }
        else {
            this.privPhrases.push(phrase);
        }
    }
    // Clears all phrases stored in the current object.
    clearPhrases() {
        this.privPhrases = undefined;
    }
    // Adds one or more reference grammars to the current grammar.
    addReferenceGrammar(grammar) {
        if (!this.privGrammars) {
            this.privGrammars = [];
        }
        if (grammar instanceof Array) {
            this.privGrammars = this.privGrammars.concat(grammar);
        }
        else {
            this.privGrammars.push(grammar);
        }
    }
    // clears all grammars stored on the recognizer.
    clearGrammars() {
        this.privGrammars = undefined;
    }
    // Generates an object that represents the dynamic grammar used by the Speech Service.
    // This is done by building an object with the correct layout based on the phrases and reference grammars added to this instance
    // of a DynamicGrammarBuilder
    generateGrammarObject() {
        if (this.privGrammars === undefined && this.privPhrases === undefined) {
            return undefined;
        }
        const retObj = {};
        retObj.ReferenceGrammars = this.privGrammars;
        if (undefined !== this.privPhrases && 0 !== this.privPhrases.length) {
            const retPhrases = [];
            this.privPhrases.forEach((value) => {
                retPhrases.push({
                    Text: value,
                });
            });
            retObj.Groups = [{ Type: "Generic", Items: retPhrases }];
        }
        return retObj;
    }
}

//# sourceMappingURL=DynamicGrammarBuilder.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DynamicGrammarInterfaces.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DynamicGrammarInterfaces.js ***!
  \**************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

//# sourceMappingURL=DynamicGrammarInterfaces.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/EnumTranslation.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/EnumTranslation.js ***!
  \*****************************************************************************************************************/
/*! exports provided: EnumTranslation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EnumTranslation", function() { return EnumTranslation; });
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class EnumTranslation {
    static implTranslateRecognitionResult(recognitionStatus) {
        let reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].Canceled;
        switch (recognitionStatus) {
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].Success:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].RecognizedSpeech;
                break;
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].NoMatch:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].InitialSilenceTimeout:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].BabbleTimeout:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].EndOfDictation:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].NoMatch;
                break;
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].Error:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].BadRequest:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].Forbidden:
            default:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].Canceled;
                break;
        }
        return reason;
    }
    static implTranslateCancelResult(recognitionStatus) {
        let reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationReason"].EndOfStream;
        switch (recognitionStatus) {
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].Success:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].EndOfDictation:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].NoMatch:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationReason"].EndOfStream;
                break;
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].InitialSilenceTimeout:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].BabbleTimeout:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].Error:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].BadRequest:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].Forbidden:
            default:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationReason"].Error;
                break;
        }
        return reason;
    }
    static implTranslateCancelErrorCode(recognitionStatus) {
        let reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCode"].NoError;
        switch (recognitionStatus) {
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].Error:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCode"].ServiceError;
                break;
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].TooManyRequests:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCode"].TooManyRequests;
                break;
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].BadRequest:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCode"].BadRequestParameters;
                break;
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].Forbidden:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCode"].Forbidden;
                break;
            default:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCode"].NoError;
                break;
        }
        return reason;
    }
    static implTranslateErrorDetails(cancellationErrorCode) {
        let errorDetails = "The speech service encountered an internal error and could not continue.";
        switch (cancellationErrorCode) {
            case _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCode"].Forbidden:
                errorDetails = "The recognizer is using a free subscription that ran out of quota.";
                break;
            case _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCode"].BadRequestParameters:
                errorDetails = "Invalid parameter or unsupported audio format in the request.";
                break;
            case _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCode"].TooManyRequests:
                errorDetails = "The number of parallel requests exceeded the number of allowed concurrent transcriptions.";
                break;
            default:
                break;
        }
        return errorDetails;
    }
}

//# sourceMappingURL=EnumTranslation.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OutputFormatPropertyName", function() { return OutputFormatPropertyName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CancellationErrorCodePropertyName", function() { return CancellationErrorCodePropertyName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ServicePropertiesPropertyName", function() { return ServicePropertiesPropertyName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ForceDictationPropertyName", function() { return ForceDictationPropertyName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AutoDetectSourceLanguagesOpenRangeOptionName", function() { return AutoDetectSourceLanguagesOpenRangeOptionName; });
/* harmony import */ var _CognitiveSubscriptionKeyAuthentication__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CognitiveSubscriptionKeyAuthentication */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveSubscriptionKeyAuthentication.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CognitiveSubscriptionKeyAuthentication", function() { return _CognitiveSubscriptionKeyAuthentication__WEBPACK_IMPORTED_MODULE_0__["CognitiveSubscriptionKeyAuthentication"]; });

/* harmony import */ var _CognitiveTokenAuthentication__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CognitiveTokenAuthentication */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveTokenAuthentication.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CognitiveTokenAuthentication", function() { return _CognitiveTokenAuthentication__WEBPACK_IMPORTED_MODULE_1__["CognitiveTokenAuthentication"]; });

/* harmony import */ var _IAuthentication__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./IAuthentication */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IAuthentication.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AuthInfo", function() { return _IAuthentication__WEBPACK_IMPORTED_MODULE_2__["AuthInfo"]; });

/* harmony import */ var _IConnectionFactory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./IConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IConnectionFactory.js");
/* harmony import */ var _IConnectionFactory__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_IConnectionFactory__WEBPACK_IMPORTED_MODULE_3__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _IConnectionFactory__WEBPACK_IMPORTED_MODULE_3__) if(["default","OutputFormatPropertyName","CancellationErrorCodePropertyName","ServicePropertiesPropertyName","ForceDictationPropertyName","AutoDetectSourceLanguagesOpenRangeOptionName","CognitiveSubscriptionKeyAuthentication","CognitiveTokenAuthentication","AuthInfo"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _IConnectionFactory__WEBPACK_IMPORTED_MODULE_3__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _ISynthesisConnectionFactory__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ISynthesisConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ISynthesisConnectionFactory.js");
/* harmony import */ var _ISynthesisConnectionFactory__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_ISynthesisConnectionFactory__WEBPACK_IMPORTED_MODULE_4__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _ISynthesisConnectionFactory__WEBPACK_IMPORTED_MODULE_4__) if(["default","OutputFormatPropertyName","CancellationErrorCodePropertyName","ServicePropertiesPropertyName","ForceDictationPropertyName","AutoDetectSourceLanguagesOpenRangeOptionName","CognitiveSubscriptionKeyAuthentication","CognitiveTokenAuthentication","AuthInfo"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _ISynthesisConnectionFactory__WEBPACK_IMPORTED_MODULE_4__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _IntentConnectionFactory__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./IntentConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentConnectionFactory.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentConnectionFactory", function() { return _IntentConnectionFactory__WEBPACK_IMPORTED_MODULE_5__["IntentConnectionFactory"]; });

/* harmony import */ var _RecognitionEvents__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./RecognitionEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognitionEvents.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionEvent", function() { return _RecognitionEvents__WEBPACK_IMPORTED_MODULE_6__["SpeechRecognitionEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionTriggeredEvent", function() { return _RecognitionEvents__WEBPACK_IMPORTED_MODULE_6__["RecognitionTriggeredEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ListeningStartedEvent", function() { return _RecognitionEvents__WEBPACK_IMPORTED_MODULE_6__["ListeningStartedEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectingToServiceEvent", function() { return _RecognitionEvents__WEBPACK_IMPORTED_MODULE_6__["ConnectingToServiceEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionStartedEvent", function() { return _RecognitionEvents__WEBPACK_IMPORTED_MODULE_6__["RecognitionStartedEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionCompletionStatus", function() { return _RecognitionEvents__WEBPACK_IMPORTED_MODULE_6__["RecognitionCompletionStatus"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionEndedEvent", function() { return _RecognitionEvents__WEBPACK_IMPORTED_MODULE_6__["RecognitionEndedEvent"]; });

/* harmony import */ var _ServiceRecognizerBase__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ServiceRecognizerBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceRecognizerBase.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ServiceRecognizerBase", function() { return _ServiceRecognizerBase__WEBPACK_IMPORTED_MODULE_7__["ServiceRecognizerBase"]; });

/* harmony import */ var _ConversationServiceRecognizer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ConversationServiceRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConversationServiceRecognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationServiceRecognizer", function() { return _ConversationServiceRecognizer__WEBPACK_IMPORTED_MODULE_8__["ConversationServiceRecognizer"]; });

/* harmony import */ var _RecognizerConfig__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./RecognizerConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionMode", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_9__["RecognitionMode"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechResultFormat", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_9__["SpeechResultFormat"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognizerConfig", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_9__["RecognizerConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechServiceConfig", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_9__["SpeechServiceConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Context", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_9__["Context"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "System", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_9__["System"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OS", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_9__["OS"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Device", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_9__["Device"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "connectivity", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_9__["connectivity"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "type", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_9__["type"]; });

/* harmony import */ var _SpeechServiceInterfaces__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./SpeechServiceInterfaces */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechServiceInterfaces.js");
/* harmony import */ var _SpeechServiceInterfaces__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_SpeechServiceInterfaces__WEBPACK_IMPORTED_MODULE_10__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _SpeechServiceInterfaces__WEBPACK_IMPORTED_MODULE_10__) if(["default","OutputFormatPropertyName","CancellationErrorCodePropertyName","ServicePropertiesPropertyName","ForceDictationPropertyName","AutoDetectSourceLanguagesOpenRangeOptionName","CognitiveSubscriptionKeyAuthentication","CognitiveTokenAuthentication","AuthInfo","IntentConnectionFactory","SpeechRecognitionEvent","RecognitionTriggeredEvent","ListeningStartedEvent","ConnectingToServiceEvent","RecognitionStartedEvent","RecognitionCompletionStatus","RecognitionEndedEvent","ServiceRecognizerBase","ConversationServiceRecognizer","RecognitionMode","SpeechResultFormat","RecognizerConfig","SpeechServiceConfig","Context","System","OS","Device","connectivity","type"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _SpeechServiceInterfaces__WEBPACK_IMPORTED_MODULE_10__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _WebsocketMessageFormatter__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./WebsocketMessageFormatter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/WebsocketMessageFormatter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "WebsocketMessageFormatter", function() { return _WebsocketMessageFormatter__WEBPACK_IMPORTED_MODULE_11__["WebsocketMessageFormatter"]; });

/* harmony import */ var _SpeechConnectionFactory__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./SpeechConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionFactory.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechConnectionFactory", function() { return _SpeechConnectionFactory__WEBPACK_IMPORTED_MODULE_12__["SpeechConnectionFactory"]; });

/* harmony import */ var _TranscriberConnectionFactory__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./TranscriberConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranscriberConnectionFactory.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranscriberConnectionFactory", function() { return _TranscriberConnectionFactory__WEBPACK_IMPORTED_MODULE_13__["TranscriberConnectionFactory"]; });

/* harmony import */ var _TranslationConnectionFactory__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./TranslationConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationConnectionFactory.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationConnectionFactory", function() { return _TranslationConnectionFactory__WEBPACK_IMPORTED_MODULE_14__["TranslationConnectionFactory"]; });

/* harmony import */ var _SpeechSynthesisConnectionFactory__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./SpeechSynthesisConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechSynthesisConnectionFactory.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisConnectionFactory", function() { return _SpeechSynthesisConnectionFactory__WEBPACK_IMPORTED_MODULE_15__["SpeechSynthesisConnectionFactory"]; });

/* harmony import */ var _EnumTranslation__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./EnumTranslation */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/EnumTranslation.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EnumTranslation", function() { return _EnumTranslation__WEBPACK_IMPORTED_MODULE_16__["EnumTranslation"]; });

/* harmony import */ var _ServiceMessages_Enums__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./ServiceMessages/Enums */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SynthesisStatus", function() { return _ServiceMessages_Enums__WEBPACK_IMPORTED_MODULE_17__["SynthesisStatus"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionStatus", function() { return _ServiceMessages_Enums__WEBPACK_IMPORTED_MODULE_17__["RecognitionStatus"]; });

/* harmony import */ var _ServiceMessages_TranslationSynthesisEnd__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./ServiceMessages/TranslationSynthesisEnd */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationSynthesisEnd.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationSynthesisEnd", function() { return _ServiceMessages_TranslationSynthesisEnd__WEBPACK_IMPORTED_MODULE_18__["TranslationSynthesisEnd"]; });

/* harmony import */ var _ServiceMessages_TranslationHypothesis__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./ServiceMessages/TranslationHypothesis */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationHypothesis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationHypothesis", function() { return _ServiceMessages_TranslationHypothesis__WEBPACK_IMPORTED_MODULE_19__["TranslationHypothesis"]; });

/* harmony import */ var _ServiceMessages_TranslationPhrase__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./ServiceMessages/TranslationPhrase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationPhrase.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationPhrase", function() { return _ServiceMessages_TranslationPhrase__WEBPACK_IMPORTED_MODULE_20__["TranslationPhrase"]; });

/* harmony import */ var _TranslationServiceRecognizer__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./TranslationServiceRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationServiceRecognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationServiceRecognizer", function() { return _TranslationServiceRecognizer__WEBPACK_IMPORTED_MODULE_21__["TranslationServiceRecognizer"]; });

/* harmony import */ var _ServiceMessages_SpeechDetected__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./ServiceMessages/SpeechDetected */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechDetected.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechDetected", function() { return _ServiceMessages_SpeechDetected__WEBPACK_IMPORTED_MODULE_22__["SpeechDetected"]; });

/* harmony import */ var _ServiceMessages_SpeechHypothesis__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./ServiceMessages/SpeechHypothesis */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechHypothesis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechHypothesis", function() { return _ServiceMessages_SpeechHypothesis__WEBPACK_IMPORTED_MODULE_23__["SpeechHypothesis"]; });

/* harmony import */ var _ServiceMessages_SpeechKeyword__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./ServiceMessages/SpeechKeyword */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechKeyword.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechKeyword", function() { return _ServiceMessages_SpeechKeyword__WEBPACK_IMPORTED_MODULE_24__["SpeechKeyword"]; });

/* harmony import */ var _SpeechServiceRecognizer__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./SpeechServiceRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechServiceRecognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechServiceRecognizer", function() { return _SpeechServiceRecognizer__WEBPACK_IMPORTED_MODULE_25__["SpeechServiceRecognizer"]; });

/* harmony import */ var _TranscriptionServiceRecognizer__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./TranscriptionServiceRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranscriptionServiceRecognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranscriptionServiceRecognizer", function() { return _TranscriptionServiceRecognizer__WEBPACK_IMPORTED_MODULE_26__["TranscriptionServiceRecognizer"]; });

/* harmony import */ var _ServiceMessages_DetailedSpeechPhrase__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./ServiceMessages/DetailedSpeechPhrase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/DetailedSpeechPhrase.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DetailedSpeechPhrase", function() { return _ServiceMessages_DetailedSpeechPhrase__WEBPACK_IMPORTED_MODULE_27__["DetailedSpeechPhrase"]; });

/* harmony import */ var _ServiceMessages_SimpleSpeechPhrase__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./ServiceMessages/SimpleSpeechPhrase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SimpleSpeechPhrase", function() { return _ServiceMessages_SimpleSpeechPhrase__WEBPACK_IMPORTED_MODULE_28__["SimpleSpeechPhrase"]; });

/* harmony import */ var _AddedLmIntent__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./AddedLmIntent */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AddedLmIntent.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AddedLmIntent", function() { return _AddedLmIntent__WEBPACK_IMPORTED_MODULE_29__["AddedLmIntent"]; });

/* harmony import */ var _IntentServiceRecognizer__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./IntentServiceRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentServiceRecognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentServiceRecognizer", function() { return _IntentServiceRecognizer__WEBPACK_IMPORTED_MODULE_30__["IntentServiceRecognizer"]; });

/* harmony import */ var _ServiceMessages_IntentResponse__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./ServiceMessages/IntentResponse */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/IntentResponse.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentResponse", function() { return _ServiceMessages_IntentResponse__WEBPACK_IMPORTED_MODULE_31__["IntentResponse"]; });

/* harmony import */ var _RequestSession__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./RequestSession */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RequestSession.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RequestSession", function() { return _RequestSession__WEBPACK_IMPORTED_MODULE_32__["RequestSession"]; });

/* harmony import */ var _SpeechContext__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./SpeechContext */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechContext.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechContext", function() { return _SpeechContext__WEBPACK_IMPORTED_MODULE_33__["SpeechContext"]; });

/* harmony import */ var _DynamicGrammarBuilder__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./DynamicGrammarBuilder */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DynamicGrammarBuilder.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DynamicGrammarBuilder", function() { return _DynamicGrammarBuilder__WEBPACK_IMPORTED_MODULE_34__["DynamicGrammarBuilder"]; });

/* harmony import */ var _DynamicGrammarInterfaces__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./DynamicGrammarInterfaces */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DynamicGrammarInterfaces.js");
/* harmony import */ var _DynamicGrammarInterfaces__WEBPACK_IMPORTED_MODULE_35___default = /*#__PURE__*/__webpack_require__.n(_DynamicGrammarInterfaces__WEBPACK_IMPORTED_MODULE_35__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _DynamicGrammarInterfaces__WEBPACK_IMPORTED_MODULE_35__) if(["default","OutputFormatPropertyName","CancellationErrorCodePropertyName","ServicePropertiesPropertyName","ForceDictationPropertyName","AutoDetectSourceLanguagesOpenRangeOptionName","CognitiveSubscriptionKeyAuthentication","CognitiveTokenAuthentication","AuthInfo","IntentConnectionFactory","SpeechRecognitionEvent","RecognitionTriggeredEvent","ListeningStartedEvent","ConnectingToServiceEvent","RecognitionStartedEvent","RecognitionCompletionStatus","RecognitionEndedEvent","ServiceRecognizerBase","ConversationServiceRecognizer","RecognitionMode","SpeechResultFormat","RecognizerConfig","SpeechServiceConfig","Context","System","OS","Device","connectivity","type","WebsocketMessageFormatter","SpeechConnectionFactory","TranscriberConnectionFactory","TranslationConnectionFactory","SpeechSynthesisConnectionFactory","EnumTranslation","SynthesisStatus","RecognitionStatus","TranslationSynthesisEnd","TranslationHypothesis","TranslationPhrase","TranslationServiceRecognizer","SpeechDetected","SpeechHypothesis","SpeechKeyword","SpeechServiceRecognizer","TranscriptionServiceRecognizer","DetailedSpeechPhrase","SimpleSpeechPhrase","AddedLmIntent","IntentServiceRecognizer","IntentResponse","RequestSession","SpeechContext","DynamicGrammarBuilder"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _DynamicGrammarInterfaces__WEBPACK_IMPORTED_MODULE_35__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _DialogServiceAdapter__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./DialogServiceAdapter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceAdapter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DialogServiceAdapter", function() { return _DialogServiceAdapter__WEBPACK_IMPORTED_MODULE_36__["DialogServiceAdapter"]; });

/* harmony import */ var _AgentConfig__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./AgentConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AgentConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AgentConfig", function() { return _AgentConfig__WEBPACK_IMPORTED_MODULE_37__["AgentConfig"]; });

/* harmony import */ var _Transcription_Exports__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./Transcription/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/Exports.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationManager", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_38__["ConversationManager"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationConnectionConfig", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_38__["ConversationConnectionConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationRecognizerFactory", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_38__["ConversationRecognizerFactory"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranscriberRecognizer", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_38__["TranscriberRecognizer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationReceivedTranslationEventArgs", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_38__["ConversationReceivedTranslationEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LockRoomEventArgs", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_38__["LockRoomEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MuteAllEventArgs", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_38__["MuteAllEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ParticipantAttributeEventArgs", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_38__["ParticipantAttributeEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ParticipantEventArgs", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_38__["ParticipantEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ParticipantsListEventArgs", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_38__["ParticipantsListEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslatorCommandTypes", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_38__["ConversationTranslatorCommandTypes"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslatorMessageTypes", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_38__["ConversationTranslatorMessageTypes"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InternalParticipants", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_38__["InternalParticipants"]; });

/* harmony import */ var _ServiceMessages_SynthesisAudioMetadata__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./ServiceMessages/SynthesisAudioMetadata */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SynthesisAudioMetadata.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MetadataType", function() { return _ServiceMessages_SynthesisAudioMetadata__WEBPACK_IMPORTED_MODULE_39__["MetadataType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SynthesisAudioMetadata", function() { return _ServiceMessages_SynthesisAudioMetadata__WEBPACK_IMPORTED_MODULE_39__["SynthesisAudioMetadata"]; });

/* harmony import */ var _SynthesisTurn__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./SynthesisTurn */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisTurn.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SynthesisTurn", function() { return _SynthesisTurn__WEBPACK_IMPORTED_MODULE_40__["SynthesisTurn"]; });

/* harmony import */ var _SynthesisAdapterBase__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./SynthesisAdapterBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisAdapterBase.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SynthesisAdapterBase", function() { return _SynthesisAdapterBase__WEBPACK_IMPORTED_MODULE_41__["SynthesisAdapterBase"]; });

/* harmony import */ var _SynthesisRestAdapter__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./SynthesisRestAdapter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisRestAdapter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SynthesisRestAdapter", function() { return _SynthesisRestAdapter__WEBPACK_IMPORTED_MODULE_42__["SynthesisRestAdapter"]; });

/* harmony import */ var _SynthesizerConfig__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./SynthesizerConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesizerConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SynthesisServiceType", function() { return _SynthesizerConfig__WEBPACK_IMPORTED_MODULE_43__["SynthesisServiceType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SynthesizerConfig", function() { return _SynthesizerConfig__WEBPACK_IMPORTED_MODULE_43__["SynthesizerConfig"]; });

/* harmony import */ var _SynthesisContext__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./SynthesisContext */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisContext.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SynthesisContext", function() { return _SynthesisContext__WEBPACK_IMPORTED_MODULE_44__["SynthesisContext"]; });

/* harmony import */ var _SpeakerRecognitionConfig__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./SpeakerRecognitionConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeakerRecognitionConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeakerRecognitionConfig", function() { return _SpeakerRecognitionConfig__WEBPACK_IMPORTED_MODULE_45__["SpeakerRecognitionConfig"]; });

/* harmony import */ var _SpeakerIdMessageAdapter__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./SpeakerIdMessageAdapter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeakerIdMessageAdapter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeakerIdMessageAdapter", function() { return _SpeakerIdMessageAdapter__WEBPACK_IMPORTED_MODULE_46__["SpeakerIdMessageAdapter"]; });

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Make sure not to export internal modules.
//















































const OutputFormatPropertyName = "OutputFormat";
const CancellationErrorCodePropertyName = "CancellationErrorCode";
const ServicePropertiesPropertyName = "ServiceProperties";
const ForceDictationPropertyName = "ForceDictation";
const AutoDetectSourceLanguagesOpenRangeOptionName = "OpenRange";

//# sourceMappingURL=Exports.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js ***!
  \*************************************************************************************************************/
/*! exports provided: HeaderNames */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HeaderNames", function() { return HeaderNames; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class HeaderNames {
}
HeaderNames.AuthKey = "Ocp-Apim-Subscription-Key";
HeaderNames.Authorization = "Authorization";
HeaderNames.ConnectionId = "X-ConnectionId";
HeaderNames.ContentType = "Content-Type";
HeaderNames.CustomCommandsAppId = "X-CommandsAppId";
HeaderNames.Path = "Path";
HeaderNames.RequestId = "X-RequestId";
HeaderNames.RequestStreamId = "X-StreamId";
HeaderNames.RequestTimestamp = "X-Timestamp";

//# sourceMappingURL=HeaderNames.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IAuthentication.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IAuthentication.js ***!
  \*****************************************************************************************************************/
/*! exports provided: AuthInfo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthInfo", function() { return AuthInfo; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class AuthInfo {
    constructor(headerName, token) {
        this.privHeaderName = headerName;
        this.privToken = token;
    }
    get headerName() {
        return this.privHeaderName;
    }
    get token() {
        return this.privToken;
    }
}

//# sourceMappingURL=IAuthentication.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IConnectionFactory.js":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IConnectionFactory.js ***!
  \********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

//# sourceMappingURL=IConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ISynthesisConnectionFactory.js":
/*!*****************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ISynthesisConnectionFactory.js ***!
  \*****************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

//# sourceMappingURL=ISynthesisConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentConnectionFactory.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentConnectionFactory.js ***!
  \*************************************************************************************************************************/
/*! exports provided: IntentConnectionFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntentConnectionFactory", function() { return IntentConnectionFactory; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.





class IntentConnectionFactory extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_2__["ConnectionFactoryBase"] {
    create(config, authInfo, connectionId) {
        let endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Endpoint);
        if (!endpoint) {
            const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_IntentRegion);
            const hostSuffix = _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_2__["ConnectionFactoryBase"].getHostSuffix(region);
            const host = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Host, "wss://" + region + ".sr.speech" + hostSuffix);
            endpoint = host + "/speech/recognition/interactive/cognitiveservices/v1";
        }
        const queryParams = {
            format: "simple",
            language: config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_RecoLanguage),
        };
        this.setCommonUrlParams(config, queryParams, endpoint);
        const headers = {};
        if (authInfo.token !== undefined && authInfo.token !== "") {
            headers[authInfo.headerName] = authInfo.token;
        }
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_4__["HeaderNames"].ConnectionId] = connectionId;
        config.parameters.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Url, endpoint);
        const enableCompression = config.parameters.getProperty("SPEECH-EnableWebsocketCompression", "false") === "true";
        return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["WebsocketConnection"](endpoint, queryParams, headers, new _Exports__WEBPACK_IMPORTED_MODULE_3__["WebsocketMessageFormatter"](), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ProxyInfo"].fromRecognizerConfig(config), enableCompression, connectionId);
    }
    getSpeechRegionFromIntentRegion(intentRegion) {
        switch (intentRegion) {
            case "West US":
            case "US West":
            case "westus":
                return "uswest";
            case "West US 2":
            case "US West 2":
            case "westus2":
                return "uswest2";
            case "South Central US":
            case "US South Central":
            case "southcentralus":
                return "ussouthcentral";
            case "West Central US":
            case "US West Central":
            case "westcentralus":
                return "uswestcentral";
            case "East US":
            case "US East":
            case "eastus":
                return "useast";
            case "East US 2":
            case "US East 2":
            case "eastus2":
                return "useast2";
            case "West Europe":
            case "Europe West":
            case "westeurope":
                return "europewest";
            case "North Europe":
            case "Europe North":
            case "northeurope":
                return "europenorth";
            case "Brazil South":
            case "South Brazil":
            case "southbrazil":
                return "brazilsouth";
            case "Australia East":
            case "East Australia":
            case "eastaustralia":
                return "australiaeast";
            case "Southeast Asia":
            case "Asia Southeast":
            case "southeastasia":
                return "asiasoutheast";
            case "East Asia":
            case "Asia East":
            case "eastasia":
                return "asiaeast";
            default:
                return intentRegion;
        }
    }
}

//# sourceMappingURL=IntentConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentServiceRecognizer.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentServiceRecognizer.js ***!
  \*************************************************************************************************************************/
/*! exports provided: IntentServiceRecognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntentServiceRecognizer", function() { return IntentServiceRecognizer; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



// eslint-disable-next-line max-classes-per-file
class IntentServiceRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_2__["ServiceRecognizerBase"] {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, recognizer) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, recognizer);
        this.privIntentRecognizer = recognizer;
        this.privIntentDataSent = false;
    }
    setIntents(addedIntents, umbrellaIntent) {
        this.privAddedLmIntents = addedIntents;
        this.privUmbrellaIntent = umbrellaIntent;
        this.privIntentDataSent = true;
    }
    processTypeSpecificMessages(connectionMessage) {
        let result;
        let ev;
        let processed = false;
        const resultProps = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyCollection"]();
        if (connectionMessage.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text) {
            resultProps.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceResponse_JsonResult, connectionMessage.textBody);
        }
        switch (connectionMessage.path.toLowerCase()) {
            case "speech.hypothesis":
                const speechHypothesis = _Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechHypothesis"].fromJSON(connectionMessage.textBody);
                result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionResult"](undefined, this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].RecognizingIntent, speechHypothesis.Text, speechHypothesis.Duration, speechHypothesis.Offset + this.privRequestSession.currentTurnAudioOffset, speechHypothesis.Language, speechHypothesis.LanguageDetectionConfidence, undefined, connectionMessage.textBody, resultProps);
                this.privRequestSession.onHypothesis(result.offset);
                ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionEventArgs"](result, speechHypothesis.Offset + this.privRequestSession.currentTurnAudioOffset, this.privRequestSession.sessionId);
                if (!!this.privIntentRecognizer.recognizing) {
                    try {
                        this.privIntentRecognizer.recognizing(this.privIntentRecognizer, ev);
                        /* eslint-disable no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                processed = true;
                break;
            case "speech.phrase":
                const simple = _Exports__WEBPACK_IMPORTED_MODULE_2__["SimpleSpeechPhrase"].fromJSON(connectionMessage.textBody);
                result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionResult"](undefined, this.privRequestSession.requestId, _Exports__WEBPACK_IMPORTED_MODULE_2__["EnumTranslation"].implTranslateRecognitionResult(simple.RecognitionStatus), simple.DisplayText, simple.Duration, simple.Offset + this.privRequestSession.currentTurnAudioOffset, simple.Language, simple.LanguageDetectionConfidence, undefined, connectionMessage.textBody, resultProps);
                ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionEventArgs"](result, result.offset, this.privRequestSession.sessionId);
                const sendEvent = () => {
                    if (!!this.privIntentRecognizer.recognized) {
                        try {
                            this.privIntentRecognizer.recognized(this.privIntentRecognizer, ev);
                            /* eslint-disable no-empty */
                        }
                        catch (error) {
                            // Not going to let errors in the event handler
                            // trip things up.
                        }
                    }
                    // report result to promise.
                    if (!!this.privSuccessCallback) {
                        try {
                            this.privSuccessCallback(result);
                        }
                        catch (e) {
                            if (!!this.privErrorCallback) {
                                this.privErrorCallback(e);
                            }
                        }
                        // Only invoke the call back once.
                        // and if it's successful don't invoke the
                        // error after that.
                        this.privSuccessCallback = undefined;
                        this.privErrorCallback = undefined;
                    }
                };
                // If intent data was sent, the terminal result for this recognizer is an intent being found.
                // If no intent data was sent, the terminal event is speech recognition being successful.
                if (false === this.privIntentDataSent || _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].NoMatch === ev.result.reason) {
                    // Advance the buffers.
                    this.privRequestSession.onPhraseRecognized(ev.offset + ev.result.duration);
                    sendEvent();
                }
                else {
                    // Squirrel away the args, when the response event arrives it will build upon them
                    // and then return
                    this.privPendingIntentArgs = ev;
                }
                processed = true;
                break;
            case "response":
                // Response from LUIS
                ev = this.privPendingIntentArgs;
                this.privPendingIntentArgs = undefined;
                if (undefined === ev) {
                    if ("" === connectionMessage.textBody) {
                        // This condition happens if there is nothing but silence in the
                        // audio sent to the service.
                        return;
                    }
                    // Odd... Not sure this can happen
                    ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionEventArgs"](new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionResult"](), 0, this.privRequestSession.sessionId);
                }
                const intentResponse = _Exports__WEBPACK_IMPORTED_MODULE_2__["IntentResponse"].fromJSON(connectionMessage.textBody);
                // If LUIS didn't return anything, send the existing event, else
                // modify it to show the match.
                // See if the intent found is in the list of intents asked for.
                if (null !== intentResponse && !!intentResponse.topScoringIntent && !!intentResponse.topScoringIntent.intent) {
                    let addedIntent = this.privAddedLmIntents[intentResponse.topScoringIntent.intent];
                    if (this.privUmbrellaIntent !== undefined) {
                        addedIntent = this.privUmbrellaIntent;
                    }
                    if (!!addedIntent) {
                        const intentId = addedIntent === undefined || addedIntent.intentName === undefined ? intentResponse.topScoringIntent.intent : addedIntent.intentName;
                        let reason = ev.result.reason;
                        if (undefined !== intentId) {
                            reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].RecognizedIntent;
                        }
                        // make sure, properties is set.
                        const properties = (undefined !== ev.result.properties) ?
                            ev.result.properties : new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyCollection"]();
                        properties.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].LanguageUnderstandingServiceResponse_JsonResult, connectionMessage.textBody);
                        ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionEventArgs"](new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionResult"](intentId, ev.result.resultId, reason, ev.result.text, ev.result.duration, ev.result.offset, undefined, undefined, ev.result.errorDetails, ev.result.json, properties), ev.offset, ev.sessionId);
                    }
                }
                this.privRequestSession.onPhraseRecognized(ev.offset + ev.result.duration);
                if (!!this.privIntentRecognizer.recognized) {
                    try {
                        this.privIntentRecognizer.recognized(this.privIntentRecognizer, ev);
                        /* eslint-disable no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                // report result to promise.
                if (!!this.privSuccessCallback) {
                    try {
                        this.privSuccessCallback(ev.result);
                    }
                    catch (e) {
                        if (!!this.privErrorCallback) {
                            this.privErrorCallback(e);
                        }
                    }
                    // Only invoke the call back once.
                    // and if it's successful don't invoke the
                    // error after that.
                    this.privSuccessCallback = undefined;
                    this.privErrorCallback = undefined;
                }
                processed = true;
                break;
            default:
                break;
        }
        const defferal = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
        defferal.resolve(processed);
        return defferal.promise;
    }
    // Cancels recognition.
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error) {
        const properties = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyCollection"]();
        properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCodePropertyName"], _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"][errorCode]);
        if (!!this.privIntentRecognizer.canceled) {
            const cancelEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionCanceledEventArgs"](cancellationReason, error, errorCode, undefined, undefined, sessionId);
            try {
                this.privIntentRecognizer.canceled(this.privIntentRecognizer, cancelEvent);
                /* eslint-disable no-empty */
            }
            catch (_a) { }
        }
        if (!!this.privSuccessCallback) {
            const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionResult"](undefined, // Intent Id
            requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].Canceled, undefined, // Text
            undefined, // Duration
            undefined, // Offset
            undefined, // Language
            undefined, // LanguageDetectionConfidence
            error, undefined, // Json
            properties);
            try {
                this.privSuccessCallback(result);
                this.privSuccessCallback = undefined;
                /* eslint-disable no-empty */
            }
            catch (_b) { }
        }
    }
}

//# sourceMappingURL=IntentServiceRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js ***!
  \*********************************************************************************************************************/
/*! exports provided: QueryParameterNames */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryParameterNames", function() { return QueryParameterNames; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class QueryParameterNames {
}
QueryParameterNames.BotId = "botid";
QueryParameterNames.CustomSpeechDeploymentId = "cid";
QueryParameterNames.CustomVoiceDeploymentId = "deploymentId";
QueryParameterNames.EnableAudioLogging = "storeAudio";
QueryParameterNames.EnableLanguageId = "lidEnabled";
QueryParameterNames.EnableWordLevelTimestamps = "wordLevelTimestamps";
QueryParameterNames.EndSilenceTimeoutMs = "endSilenceTimeoutMs";
QueryParameterNames.SegmentationSilenceTimeoutMs = "segmentationSilenceTimeoutMs";
QueryParameterNames.Format = "format";
QueryParameterNames.InitialSilenceTimeoutMs = "initialSilenceTimeoutMs";
QueryParameterNames.Language = "language";
QueryParameterNames.Profanity = "profanity";
QueryParameterNames.RequestBotStatusMessages = "enableBotMessageStatus";
QueryParameterNames.StableIntermediateThreshold = "stableIntermediateThreshold";
QueryParameterNames.StableTranslation = "stableTranslation";
QueryParameterNames.TestHooks = "testhooks";
QueryParameterNames.Postprocessing = "postprocessing";
QueryParameterNames.CtsMeetingId = "meetingId";
QueryParameterNames.CtsDeviceId = "deviceId";
QueryParameterNames.CtsIsParticipant = "isParticipant";

//# sourceMappingURL=QueryParameterNames.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognitionEvents.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognitionEvents.js ***!
  \*******************************************************************************************************************/
/*! exports provided: SpeechRecognitionEvent, RecognitionTriggeredEvent, ListeningStartedEvent, ConnectingToServiceEvent, RecognitionStartedEvent, RecognitionCompletionStatus, RecognitionEndedEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionEvent", function() { return SpeechRecognitionEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognitionTriggeredEvent", function() { return RecognitionTriggeredEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListeningStartedEvent", function() { return ListeningStartedEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectingToServiceEvent", function() { return ConnectingToServiceEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognitionStartedEvent", function() { return RecognitionStartedEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognitionCompletionStatus", function() { return RecognitionCompletionStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognitionEndedEvent", function() { return RecognitionEndedEvent; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */

class SpeechRecognitionEvent extends _common_Exports__WEBPACK_IMPORTED_MODULE_0__["PlatformEvent"] {
    constructor(eventName, requestId, sessionId, eventType = _common_Exports__WEBPACK_IMPORTED_MODULE_0__["EventType"].Info) {
        super(eventName, eventType);
        this.privRequestId = requestId;
        this.privSessionId = sessionId;
    }
    get requestId() {
        return this.privRequestId;
    }
    get sessionId() {
        return this.privSessionId;
    }
}
class RecognitionTriggeredEvent extends SpeechRecognitionEvent {
    constructor(requestId, sessionId, audioSourceId, audioNodeId) {
        super("RecognitionTriggeredEvent", requestId, sessionId);
        this.privAudioSourceId = audioSourceId;
        this.privAudioNodeId = audioNodeId;
    }
    get audioSourceId() {
        return this.privAudioSourceId;
    }
    get audioNodeId() {
        return this.privAudioNodeId;
    }
}
class ListeningStartedEvent extends SpeechRecognitionEvent {
    constructor(requestId, sessionId, audioSourceId, audioNodeId) {
        super("ListeningStartedEvent", requestId, sessionId);
        this.privAudioSourceId = audioSourceId;
        this.privAudioNodeId = audioNodeId;
    }
    get audioSourceId() {
        return this.privAudioSourceId;
    }
    get audioNodeId() {
        return this.privAudioNodeId;
    }
}
class ConnectingToServiceEvent extends SpeechRecognitionEvent {
    constructor(requestId, authFetchEventid, sessionId) {
        super("ConnectingToServiceEvent", requestId, sessionId);
        this.privAuthFetchEventid = authFetchEventid;
    }
    get authFetchEventid() {
        return this.privAuthFetchEventid;
    }
}
class RecognitionStartedEvent extends SpeechRecognitionEvent {
    constructor(requestId, audioSourceId, audioNodeId, authFetchEventId, sessionId) {
        super("RecognitionStartedEvent", requestId, sessionId);
        this.privAudioSourceId = audioSourceId;
        this.privAudioNodeId = audioNodeId;
        this.privAuthFetchEventId = authFetchEventId;
    }
    get audioSourceId() {
        return this.privAudioSourceId;
    }
    get audioNodeId() {
        return this.privAudioNodeId;
    }
    get authFetchEventId() {
        return this.privAuthFetchEventId;
    }
}
var RecognitionCompletionStatus;
(function (RecognitionCompletionStatus) {
    RecognitionCompletionStatus[RecognitionCompletionStatus["Success"] = 0] = "Success";
    RecognitionCompletionStatus[RecognitionCompletionStatus["AudioSourceError"] = 1] = "AudioSourceError";
    RecognitionCompletionStatus[RecognitionCompletionStatus["AudioSourceTimeout"] = 2] = "AudioSourceTimeout";
    RecognitionCompletionStatus[RecognitionCompletionStatus["AuthTokenFetchError"] = 3] = "AuthTokenFetchError";
    RecognitionCompletionStatus[RecognitionCompletionStatus["AuthTokenFetchTimeout"] = 4] = "AuthTokenFetchTimeout";
    RecognitionCompletionStatus[RecognitionCompletionStatus["UnAuthorized"] = 5] = "UnAuthorized";
    RecognitionCompletionStatus[RecognitionCompletionStatus["ConnectTimeout"] = 6] = "ConnectTimeout";
    RecognitionCompletionStatus[RecognitionCompletionStatus["ConnectError"] = 7] = "ConnectError";
    RecognitionCompletionStatus[RecognitionCompletionStatus["ClientRecognitionActivityTimeout"] = 8] = "ClientRecognitionActivityTimeout";
    RecognitionCompletionStatus[RecognitionCompletionStatus["UnknownError"] = 9] = "UnknownError";
})(RecognitionCompletionStatus || (RecognitionCompletionStatus = {}));
class RecognitionEndedEvent extends SpeechRecognitionEvent {
    constructor(requestId, audioSourceId, audioNodeId, authFetchEventId, sessionId, serviceTag, status, error) {
        super("RecognitionEndedEvent", requestId, sessionId, status === RecognitionCompletionStatus.Success ? _common_Exports__WEBPACK_IMPORTED_MODULE_0__["EventType"].Info : _common_Exports__WEBPACK_IMPORTED_MODULE_0__["EventType"].Error);
        this.privAudioSourceId = audioSourceId;
        this.privAudioNodeId = audioNodeId;
        this.privAuthFetchEventId = authFetchEventId;
        this.privStatus = status;
        this.privError = error;
        this.privServiceTag = serviceTag;
    }
    get audioSourceId() {
        return this.privAudioSourceId;
    }
    get audioNodeId() {
        return this.privAudioNodeId;
    }
    get authFetchEventId() {
        return this.privAuthFetchEventId;
    }
    get serviceTag() {
        return this.privServiceTag;
    }
    get status() {
        return this.privStatus;
    }
    get error() {
        return this.privError;
    }
}

//# sourceMappingURL=RecognitionEvents.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js ***!
  \******************************************************************************************************************/
/*! exports provided: RecognitionMode, SpeechResultFormat, RecognizerConfig, SpeechServiceConfig, Context, System, OS, Device, connectivity, type */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognitionMode", function() { return RecognitionMode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechResultFormat", function() { return SpeechResultFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognizerConfig", function() { return RecognizerConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechServiceConfig", function() { return SpeechServiceConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Context", function() { return Context; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "System", function() { return System; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OS", function() { return OS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Device", function() { return Device; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "connectivity", function() { return connectivity; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "type", function() { return type; });
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */

var RecognitionMode;
(function (RecognitionMode) {
    RecognitionMode[RecognitionMode["Interactive"] = 0] = "Interactive";
    RecognitionMode[RecognitionMode["Conversation"] = 1] = "Conversation";
    RecognitionMode[RecognitionMode["Dictation"] = 2] = "Dictation";
})(RecognitionMode || (RecognitionMode = {}));
var SpeechResultFormat;
(function (SpeechResultFormat) {
    SpeechResultFormat[SpeechResultFormat["Simple"] = 0] = "Simple";
    SpeechResultFormat[SpeechResultFormat["Detailed"] = 1] = "Detailed";
})(SpeechResultFormat || (SpeechResultFormat = {}));
class RecognizerConfig {
    constructor(speechServiceConfig, parameters) {
        this.privSpeechServiceConfig = speechServiceConfig ? speechServiceConfig : new SpeechServiceConfig(new Context(null));
        this.privParameters = parameters;
        this.privMaxRetryCount = parseInt(parameters.getProperty("SPEECH-Error-MaxRetryCount", "4"), 10);
        this.privLanguageIdMode = parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceConnection_LanguageIdMode, undefined);
    }
    get parameters() {
        return this.privParameters;
    }
    get recognitionMode() {
        return this.privRecognitionMode;
    }
    set recognitionMode(value) {
        this.privRecognitionMode = value;
        this.privRecognitionActivityTimeout = value === RecognitionMode.Interactive ? 8000 : 25000;
        this.privSpeechServiceConfig.Recognition = RecognitionMode[value];
    }
    get SpeechServiceConfig() {
        return this.privSpeechServiceConfig;
    }
    get recognitionActivityTimeout() {
        return this.privRecognitionActivityTimeout;
    }
    get isContinuousRecognition() {
        return this.privRecognitionMode !== RecognitionMode.Interactive;
    }
    get languageIdMode() {
        return this.privLanguageIdMode;
    }
    get autoDetectSourceLanguages() {
        return this.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceConnection_AutoDetectSourceLanguages, undefined);
    }
    get recognitionEndpointVersion() {
        return this.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceConnection_RecognitionEndpointVersion, undefined);
    }
    get sourceLanguageModels() {
        const models = [];
        let modelsExist = false;
        if (this.autoDetectSourceLanguages !== undefined) {
            for (const language of this.autoDetectSourceLanguages.split(",")) {
                const customProperty = language + _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceConnection_EndpointId.toString();
                const modelId = this.parameters.getProperty(customProperty, undefined);
                if (modelId !== undefined) {
                    models.push({ language, endpoint: modelId });
                    modelsExist = true;
                }
                else {
                    models.push({ language, endpoint: "" });
                }
            }
        }
        return modelsExist ? models : undefined;
    }
    get maxRetryCount() {
        return this.privMaxRetryCount;
    }
}
// The config is serialized and sent as the Speech.Config
class SpeechServiceConfig {
    constructor(context) {
        this.context = context;
    }
    serialize() {
        return JSON.stringify(this, (key, value) => {
            if (value && typeof value === "object") {
                const replacement = {};
                for (const k in value) {
                    if (Object.hasOwnProperty.call(value, k)) {
                        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
                        replacement[k && k.charAt(0).toLowerCase() + k.substring(1)] = value[k];
                    }
                }
                return replacement;
            }
            return value;
        });
    }
    get Context() {
        return this.context;
    }
    get Recognition() {
        return this.recognition;
    }
    set Recognition(value) {
        this.recognition = value.toLowerCase();
    }
}
class Context {
    constructor(os) {
        this.system = new System();
        this.os = os;
    }
}
class System {
    constructor() {
        // Note: below will be patched for official builds.
        const SPEECHSDK_CLIENTSDK_VERSION = "1.25.1";
        this.name = "SpeechSDK";
        this.version = SPEECHSDK_CLIENTSDK_VERSION;
        this.build = "JavaScript";
        this.lang = "JavaScript";
    }
}
class OS {
    constructor(platform, name, version) {
        this.platform = platform;
        this.name = name;
        this.version = version;
    }
}
class Device {
    constructor(manufacturer, model, version) {
        this.manufacturer = manufacturer;
        this.model = model;
        this.version = version;
    }
}
var connectivity;
(function (connectivity) {
    connectivity["Bluetooth"] = "Bluetooth";
    connectivity["Wired"] = "Wired";
    connectivity["WiFi"] = "WiFi";
    connectivity["Cellular"] = "Cellular";
    connectivity["InBuilt"] = "InBuilt";
    connectivity["Unknown"] = "Unknown";
})(connectivity || (connectivity = {}));
var type;
(function (type) {
    type["Phone"] = "Phone";
    type["Speaker"] = "Speaker";
    type["Car"] = "Car";
    type["Headset"] = "Headset";
    type["Thermostat"] = "Thermostat";
    type["Microphones"] = "Microphones";
    type["Deskphone"] = "Deskphone";
    type["RemoteControl"] = "RemoteControl";
    type["Unknown"] = "Unknown";
    type["File"] = "File";
    type["Stream"] = "Stream";
})(type || (type = {}));

//# sourceMappingURL=RecognizerConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RequestSession.js":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RequestSession.js ***!
  \****************************************************************************************************************/
/*! exports provided: RequestSession */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RequestSession", function() { return RequestSession; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _RecognitionEvents__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RecognitionEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognitionEvents.js");
/* harmony import */ var _ServiceTelemetryListener_Internal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ServiceTelemetryListener.Internal */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceTelemetryListener.Internal.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



class RequestSession {
    constructor(audioSourceId) {
        this.privIsDisposed = false;
        this.privDetachables = new Array();
        this.privIsAudioNodeDetached = false;
        this.privIsRecognizing = false;
        this.privIsSpeechEnded = false;
        this.privTurnStartAudioOffset = 0;
        this.privLastRecoOffset = 0;
        this.privHypothesisReceived = false;
        this.privBytesSent = 0;
        this.privRecogNumber = 0;
        this.privInTurn = false;
        this.privConnectionAttempts = 0;
        this.privAudioSourceId = audioSourceId;
        this.privRequestId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        this.privAudioNodeId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        this.privTurnDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
        // We're not in a turn, so resolve.
        this.privTurnDeferral.resolve();
    }
    get sessionId() {
        return this.privSessionId;
    }
    get requestId() {
        return this.privRequestId;
    }
    get audioNodeId() {
        return this.privAudioNodeId;
    }
    get turnCompletionPromise() {
        return this.privTurnDeferral.promise;
    }
    get isSpeechEnded() {
        return this.privIsSpeechEnded;
    }
    get isRecognizing() {
        return this.privIsRecognizing;
    }
    get currentTurnAudioOffset() {
        return this.privTurnStartAudioOffset;
    }
    get recogNumber() {
        return this.privRecogNumber;
    }
    get numConnectionAttempts() {
        return this.privConnectionAttempts;
    }
    // The number of bytes sent for the current connection.
    // Counter is reset to 0 each time a connection is established.
    get bytesSent() {
        return this.privBytesSent;
    }
    listenForServiceTelemetry(eventSource) {
        if (!!this.privServiceTelemetryListener) {
            this.privDetachables.push(eventSource.attachListener(this.privServiceTelemetryListener));
        }
    }
    startNewRecognition() {
        this.privIsSpeechEnded = false;
        this.privIsRecognizing = true;
        this.privTurnStartAudioOffset = 0;
        this.privLastRecoOffset = 0;
        this.privRecogNumber++;
        this.privServiceTelemetryListener = new _ServiceTelemetryListener_Internal__WEBPACK_IMPORTED_MODULE_2__["ServiceTelemetryListener"](this.privRequestId, this.privAudioSourceId, this.privAudioNodeId);
        this.onEvent(new _RecognitionEvents__WEBPACK_IMPORTED_MODULE_1__["RecognitionTriggeredEvent"](this.requestId, this.privSessionId, this.privAudioSourceId, this.privAudioNodeId));
    }
    onAudioSourceAttachCompleted(audioNode, isError) {
        return __awaiter(this, void 0, void 0, function* () {
            this.privAudioNode = audioNode;
            this.privIsAudioNodeDetached = false;
            if (isError) {
                yield this.onComplete();
            }
            else {
                this.onEvent(new _RecognitionEvents__WEBPACK_IMPORTED_MODULE_1__["ListeningStartedEvent"](this.privRequestId, this.privSessionId, this.privAudioSourceId, this.privAudioNodeId));
            }
        });
    }
    onPreConnectionStart(authFetchEventId, connectionId) {
        this.privAuthFetchEventId = authFetchEventId;
        this.privSessionId = connectionId;
        this.onEvent(new _RecognitionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectingToServiceEvent"](this.privRequestId, this.privAuthFetchEventId, this.privSessionId));
    }
    onAuthCompleted(isError) {
        return __awaiter(this, void 0, void 0, function* () {
            if (isError) {
                yield this.onComplete();
            }
        });
    }
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    onConnectionEstablishCompleted(statusCode, reason) {
        return __awaiter(this, void 0, void 0, function* () {
            if (statusCode === 200) {
                this.onEvent(new _RecognitionEvents__WEBPACK_IMPORTED_MODULE_1__["RecognitionStartedEvent"](this.requestId, this.privAudioSourceId, this.privAudioNodeId, this.privAuthFetchEventId, this.privSessionId));
                if (!!this.privAudioNode) {
                    this.privAudioNode.replay();
                }
                this.privTurnStartAudioOffset = this.privLastRecoOffset;
                this.privBytesSent = 0;
                return;
            }
            else if (statusCode === 403) {
                yield this.onComplete();
            }
        });
    }
    onServiceTurnEndResponse(continuousRecognition) {
        return __awaiter(this, void 0, void 0, function* () {
            this.privTurnDeferral.resolve();
            if (!continuousRecognition || this.isSpeechEnded) {
                yield this.onComplete();
                this.privInTurn = false;
            }
            else {
                // Start a new request set.
                this.privTurnStartAudioOffset = this.privLastRecoOffset;
                this.privAudioNode.replay();
            }
        });
    }
    onSpeechContext() {
        this.privRequestId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
    }
    onServiceTurnStartResponse() {
        if (!!this.privTurnDeferral && !!this.privInTurn) {
            // What? How are we starting a turn with another not done?
            this.privTurnDeferral.reject("Another turn started before current completed.");
            // Avoid UnhandledPromiseRejection if privTurnDeferral is not being awaited
            // eslint-disable-next-line @typescript-eslint/no-empty-function
            this.privTurnDeferral.promise.then().catch(() => { });
        }
        this.privInTurn = true;
        this.privTurnDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
    }
    onHypothesis(offset) {
        if (!this.privHypothesisReceived) {
            this.privHypothesisReceived = true;
            this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(offset));
        }
    }
    onPhraseRecognized(offset) {
        this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(offset));
        this.onServiceRecognized(offset);
    }
    onServiceRecognized(offset) {
        this.privLastRecoOffset = offset;
        this.privHypothesisReceived = false;
        this.privAudioNode.shrinkBuffers(offset);
        this.privConnectionAttempts = 0;
    }
    onAudioSent(bytesSent) {
        this.privBytesSent += bytesSent;
    }
    onRetryConnection() {
        this.privConnectionAttempts++;
    }
    dispose() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.privIsDisposed) {
                // we should have completed by now. If we did not its an unknown error.
                this.privIsDisposed = true;
                for (const detachable of this.privDetachables) {
                    yield detachable.detach();
                }
                if (!!this.privServiceTelemetryListener) {
                    this.privServiceTelemetryListener.dispose();
                }
                this.privIsRecognizing = false;
            }
        });
    }
    getTelemetry() {
        if (this.privServiceTelemetryListener.hasTelemetry) {
            return this.privServiceTelemetryListener.getTelemetry();
        }
        else {
            return null;
        }
    }
    onStopRecognizing() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.onComplete();
        });
    }
    // Should be called with the audioNode for this session has indicated that it is out of speech.
    onSpeechEnded() {
        this.privIsSpeechEnded = true;
    }
    onEvent(event) {
        if (!!this.privServiceTelemetryListener) {
            this.privServiceTelemetryListener.onEvent(event);
        }
        _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Events"].instance.onEvent(event);
    }
    onComplete() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!!this.privIsRecognizing) {
                this.privIsRecognizing = false;
                yield this.detachAudioNode();
            }
        });
    }
    detachAudioNode() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.privIsAudioNodeDetached) {
                this.privIsAudioNodeDetached = true;
                if (this.privAudioNode) {
                    yield this.privAudioNode.detach();
                }
            }
        });
    }
}

//# sourceMappingURL=RequestSession.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/ActivityResponsePayload.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/ActivityResponsePayload.js ***!
  \*****************************************************************************************************************************************/
/*! exports provided: ActivityPayloadResponse, MessageDataStreamType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ActivityPayloadResponse", function() { return ActivityPayloadResponse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessageDataStreamType", function() { return MessageDataStreamType; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// response
class ActivityPayloadResponse {
    constructor(json) {
        this.privActivityResponse = JSON.parse(json);
    }
    static fromJSON(json) {
        return new ActivityPayloadResponse(json);
    }
    get conversationId() {
        return this.privActivityResponse.conversationId;
    }
    get messageDataStreamType() {
        return this.privActivityResponse.messageDataStreamType;
    }
    get messagePayload() {
        return this.privActivityResponse.messagePayload;
    }
    get version() {
        return this.privActivityResponse.version;
    }
}
var MessageDataStreamType;
(function (MessageDataStreamType) {
    MessageDataStreamType[MessageDataStreamType["None"] = 0] = "None";
    MessageDataStreamType[MessageDataStreamType["TextToSpeechAudio"] = 1] = "TextToSpeechAudio";
})(MessageDataStreamType || (MessageDataStreamType = {}));

//# sourceMappingURL=ActivityResponsePayload.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/DetailedSpeechPhrase.js":
/*!**************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/DetailedSpeechPhrase.js ***!
  \**************************************************************************************************************************************/
/*! exports provided: DetailedSpeechPhrase */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DetailedSpeechPhrase", function() { return DetailedSpeechPhrase; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class DetailedSpeechPhrase {
    constructor(json) {
        this.privDetailedSpeechPhrase = JSON.parse(json);
        this.privDetailedSpeechPhrase.RecognitionStatus = _Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionStatus"][this.privDetailedSpeechPhrase.RecognitionStatus];
    }
    static fromJSON(json) {
        return new DetailedSpeechPhrase(json);
    }
    getJsonWithCorrectedOffsets(baseOffset) {
        if (!!this.privDetailedSpeechPhrase.NBest) {
            let firstWordOffset;
            for (const phrase of this.privDetailedSpeechPhrase.NBest) {
                if (!!phrase.Words && !!phrase.Words[0]) {
                    firstWordOffset = phrase.Words[0].Offset;
                    break;
                }
            }
            if (!!firstWordOffset && firstWordOffset < baseOffset) {
                const offset = baseOffset - firstWordOffset;
                for (const details of this.privDetailedSpeechPhrase.NBest) {
                    if (!!details.Words) {
                        for (const word of details.Words) {
                            word.Offset += offset;
                        }
                    }
                }
            }
        }
        return JSON.stringify(this.privDetailedSpeechPhrase);
    }
    get RecognitionStatus() {
        return this.privDetailedSpeechPhrase.RecognitionStatus;
    }
    get NBest() {
        return this.privDetailedSpeechPhrase.NBest;
    }
    get Duration() {
        return this.privDetailedSpeechPhrase.Duration;
    }
    get Offset() {
        return this.privDetailedSpeechPhrase.Offset;
    }
    get Language() {
        return this.privDetailedSpeechPhrase.PrimaryLanguage === undefined ? undefined : this.privDetailedSpeechPhrase.PrimaryLanguage.Language;
    }
    get LanguageDetectionConfidence() {
        return this.privDetailedSpeechPhrase.PrimaryLanguage === undefined ? undefined : this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence;
    }
    get Text() {
        if (!!this.privDetailedSpeechPhrase.NBest && this.privDetailedSpeechPhrase.NBest[0]) {
            return this.privDetailedSpeechPhrase.NBest[0].Display || this.privDetailedSpeechPhrase.NBest[0].DisplayText;
        }
        return this.privDetailedSpeechPhrase.DisplayText;
    }
    get SpeakerId() {
        return this.privDetailedSpeechPhrase.SpeakerId;
    }
}

//# sourceMappingURL=DetailedSpeechPhrase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js ***!
  \***********************************************************************************************************************/
/*! exports provided: SynthesisStatus, RecognitionStatus */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SynthesisStatus", function() { return SynthesisStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognitionStatus", function() { return RecognitionStatus; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * @class SynthesisStatus
 * @private
 */
var SynthesisStatus;
(function (SynthesisStatus) {
    /**
     * The response contains valid audio data.
     * @member SynthesisStatus.Success
     */
    SynthesisStatus[SynthesisStatus["Success"] = 0] = "Success";
    /**
     * Indicates the end of audio data. No valid audio data is included in the message.
     * @member SynthesisStatus.SynthesisEnd
     */
    SynthesisStatus[SynthesisStatus["SynthesisEnd"] = 1] = "SynthesisEnd";
    /**
     * Indicates an error occurred during synthesis data processing.
     * @member SynthesisStatus.Error
     */
    SynthesisStatus[SynthesisStatus["Error"] = 2] = "Error";
})(SynthesisStatus || (SynthesisStatus = {}));
var RecognitionStatus;
(function (RecognitionStatus) {
    RecognitionStatus[RecognitionStatus["Success"] = 0] = "Success";
    RecognitionStatus[RecognitionStatus["NoMatch"] = 1] = "NoMatch";
    RecognitionStatus[RecognitionStatus["InitialSilenceTimeout"] = 2] = "InitialSilenceTimeout";
    RecognitionStatus[RecognitionStatus["BabbleTimeout"] = 3] = "BabbleTimeout";
    RecognitionStatus[RecognitionStatus["Error"] = 4] = "Error";
    RecognitionStatus[RecognitionStatus["EndOfDictation"] = 5] = "EndOfDictation";
    RecognitionStatus[RecognitionStatus["TooManyRequests"] = 6] = "TooManyRequests";
    RecognitionStatus[RecognitionStatus["BadRequest"] = 7] = "BadRequest";
    RecognitionStatus[RecognitionStatus["Forbidden"] = 8] = "Forbidden";
})(RecognitionStatus || (RecognitionStatus = {}));

//# sourceMappingURL=Enums.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/IntentResponse.js":
/*!********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/IntentResponse.js ***!
  \********************************************************************************************************************************/
/*! exports provided: IntentResponse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntentResponse", function() { return IntentResponse; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// response
class IntentResponse {
    constructor(json) {
        if (json === "") {
            this.privIntentResponse = {};
        }
        else {
            this.privIntentResponse = JSON.parse(json);
        }
    }
    static fromJSON(json) {
        return new IntentResponse(json);
    }
    get query() {
        return this.privIntentResponse.query;
    }
    get topScoringIntent() {
        return this.privIntentResponse.topScoringIntent;
    }
    get entities() {
        return this.privIntentResponse.entities;
    }
}

//# sourceMappingURL=IntentResponse.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js":
/*!************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js ***!
  \************************************************************************************************************************************/
/*! exports provided: SimpleSpeechPhrase */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SimpleSpeechPhrase", function() { return SimpleSpeechPhrase; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class SimpleSpeechPhrase {
    constructor(json) {
        this.privSimpleSpeechPhrase = JSON.parse(json);
        this.privSimpleSpeechPhrase.RecognitionStatus = _Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionStatus"][this.privSimpleSpeechPhrase.RecognitionStatus];
    }
    static fromJSON(json) {
        return new SimpleSpeechPhrase(json);
    }
    get RecognitionStatus() {
        return this.privSimpleSpeechPhrase.RecognitionStatus;
    }
    get DisplayText() {
        return this.privSimpleSpeechPhrase.DisplayText;
    }
    get Offset() {
        return this.privSimpleSpeechPhrase.Offset;
    }
    get Duration() {
        return this.privSimpleSpeechPhrase.Duration;
    }
    get Language() {
        return this.privSimpleSpeechPhrase.PrimaryLanguage === undefined ? undefined : this.privSimpleSpeechPhrase.PrimaryLanguage.Language;
    }
    get LanguageDetectionConfidence() {
        return this.privSimpleSpeechPhrase.PrimaryLanguage === undefined ? undefined : this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence;
    }
    get SpeakerId() {
        return this.privSimpleSpeechPhrase.SpeakerId;
    }
}

//# sourceMappingURL=SimpleSpeechPhrase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechDetected.js":
/*!********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechDetected.js ***!
  \********************************************************************************************************************************/
/*! exports provided: SpeechDetected */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechDetected", function() { return SpeechDetected; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class SpeechDetected {
    constructor(json) {
        this.privSpeechStartDetected = JSON.parse(json);
    }
    static fromJSON(json) {
        return new SpeechDetected(json);
    }
    get Offset() {
        return this.privSpeechStartDetected.Offset;
    }
}

//# sourceMappingURL=SpeechDetected.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechHypothesis.js":
/*!**********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechHypothesis.js ***!
  \**********************************************************************************************************************************/
/*! exports provided: SpeechHypothesis */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechHypothesis", function() { return SpeechHypothesis; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class SpeechHypothesis {
    constructor(json) {
        this.privSpeechHypothesis = JSON.parse(json);
    }
    static fromJSON(json) {
        return new SpeechHypothesis(json);
    }
    get Text() {
        return this.privSpeechHypothesis.Text;
    }
    get Offset() {
        return this.privSpeechHypothesis.Offset;
    }
    get Duration() {
        return this.privSpeechHypothesis.Duration;
    }
    get Language() {
        return this.privSpeechHypothesis.PrimaryLanguage === undefined ? undefined : this.privSpeechHypothesis.PrimaryLanguage.Language;
    }
    get LanguageDetectionConfidence() {
        return this.privSpeechHypothesis.PrimaryLanguage === undefined ? undefined : this.privSpeechHypothesis.PrimaryLanguage.Confidence;
    }
    get SpeakerId() {
        return this.privSpeechHypothesis.SpeakerId;
    }
}

//# sourceMappingURL=SpeechHypothesis.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechKeyword.js":
/*!*******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechKeyword.js ***!
  \*******************************************************************************************************************************/
/*! exports provided: SpeechKeyword */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechKeyword", function() { return SpeechKeyword; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class SpeechKeyword {
    constructor(json) {
        this.privSpeechKeyword = JSON.parse(json);
    }
    static fromJSON(json) {
        return new SpeechKeyword(json);
    }
    get Status() {
        return this.privSpeechKeyword.Status;
    }
    get Text() {
        return this.privSpeechKeyword.Text;
    }
    get Offset() {
        return this.privSpeechKeyword.Offset;
    }
    get Duration() {
        return this.privSpeechKeyword.Duration;
    }
}

//# sourceMappingURL=SpeechKeyword.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SynthesisAudioMetadata.js":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SynthesisAudioMetadata.js ***!
  \****************************************************************************************************************************************/
/*! exports provided: MetadataType, SynthesisAudioMetadata */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MetadataType", function() { return MetadataType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SynthesisAudioMetadata", function() { return SynthesisAudioMetadata; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var MetadataType;
(function (MetadataType) {
    MetadataType["WordBoundary"] = "WordBoundary";
    MetadataType["Bookmark"] = "Bookmark";
    MetadataType["Viseme"] = "Viseme";
    MetadataType["SentenceBoundary"] = "SentenceBoundary";
    MetadataType["SessionEnd"] = "SessionEnd";
})(MetadataType || (MetadataType = {}));
class SynthesisAudioMetadata {
    constructor(json) {
        this.privSynthesisAudioMetadata = JSON.parse(json);
    }
    static fromJSON(json) {
        return new SynthesisAudioMetadata(json);
    }
    get Metadata() {
        return this.privSynthesisAudioMetadata.Metadata;
    }
}

//# sourceMappingURL=SynthesisAudioMetadata.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationHypothesis.js":
/*!***************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationHypothesis.js ***!
  \***************************************************************************************************************************************/
/*! exports provided: TranslationHypothesis */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationHypothesis", function() { return TranslationHypothesis; });
/* harmony import */ var _TranslationStatus__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../TranslationStatus */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationStatus.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class TranslationHypothesis {
    constructor(json) {
        this.privTranslationHypothesis = JSON.parse(json);
        this.privTranslationHypothesis.Translation.TranslationStatus = _TranslationStatus__WEBPACK_IMPORTED_MODULE_0__["TranslationStatus"][this.privTranslationHypothesis.Translation.TranslationStatus];
    }
    static fromJSON(json) {
        return new TranslationHypothesis(json);
    }
    get Duration() {
        return this.privTranslationHypothesis.Duration;
    }
    get Offset() {
        return this.privTranslationHypothesis.Offset;
    }
    get Text() {
        return this.privTranslationHypothesis.Text;
    }
    get Translation() {
        return this.privTranslationHypothesis.Translation;
    }
}

//# sourceMappingURL=TranslationHypothesis.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationPhrase.js":
/*!***********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationPhrase.js ***!
  \***********************************************************************************************************************************/
/*! exports provided: TranslationPhrase */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationPhrase", function() { return TranslationPhrase; });
/* harmony import */ var _sdk_Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../sdk/Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _TranslationStatus__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../TranslationStatus */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationStatus.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



class TranslationPhrase {
    constructor(phrase) {
        this.privTranslationPhrase = phrase;
        this.privTranslationPhrase.RecognitionStatus = _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"][this.privTranslationPhrase.RecognitionStatus];
        if (this.privTranslationPhrase.Translation !== undefined) {
            this.privTranslationPhrase.Translation.TranslationStatus = _TranslationStatus__WEBPACK_IMPORTED_MODULE_2__["TranslationStatus"][this.privTranslationPhrase.Translation.TranslationStatus];
        }
    }
    static fromJSON(json) {
        return new TranslationPhrase(JSON.parse(json));
    }
    static fromTranslationResponse(translationResponse) {
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrUndefined(translationResponse, "translationResponse");
        const phrase = translationResponse.SpeechPhrase;
        translationResponse.SpeechPhrase = undefined;
        phrase.Translation = translationResponse;
        phrase.Text = phrase.DisplayText;
        return new TranslationPhrase(phrase);
    }
    get RecognitionStatus() {
        return this.privTranslationPhrase.RecognitionStatus;
    }
    get Offset() {
        return this.privTranslationPhrase.Offset;
    }
    get Duration() {
        return this.privTranslationPhrase.Duration;
    }
    get Text() {
        return this.privTranslationPhrase.Text;
    }
    get Translation() {
        return this.privTranslationPhrase.Translation;
    }
}

//# sourceMappingURL=TranslationPhrase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationSynthesisEnd.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationSynthesisEnd.js ***!
  \*****************************************************************************************************************************************/
/*! exports provided: TranslationSynthesisEnd */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationSynthesisEnd", function() { return TranslationSynthesisEnd; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class TranslationSynthesisEnd {
    constructor(json) {
        this.privSynthesisEnd = JSON.parse(json);
        this.privSynthesisEnd.SynthesisStatus = _Exports__WEBPACK_IMPORTED_MODULE_0__["SynthesisStatus"][this.privSynthesisEnd.SynthesisStatus];
    }
    static fromJSON(json) {
        return new TranslationSynthesisEnd(json);
    }
    get SynthesisStatus() {
        return this.privSynthesisEnd.SynthesisStatus;
    }
    get FailureReason() {
        return this.privSynthesisEnd.FailureReason;
    }
}

//# sourceMappingURL=TranslationSynthesisEnd.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TurnStatusPayload.js":
/*!***********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TurnStatusPayload.js ***!
  \***********************************************************************************************************************************/
/*! exports provided: TurnStatusResponsePayload */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TurnStatusResponsePayload", function() { return TurnStatusResponsePayload; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class TurnStatusResponsePayload {
    constructor(json) {
        this.privMessageStatusResponse = JSON.parse(json);
    }
    static fromJSON(json) {
        return new TurnStatusResponsePayload(json);
    }
    get interactionId() {
        return this.privMessageStatusResponse.interactionId;
    }
    get conversationId() {
        return this.privMessageStatusResponse.conversationId;
    }
    get statusCode() {
        // Payloads may contain a limited set of textual representations or a numeric status
        // code. The textual values are here converted into numeric ones.
        switch (this.privMessageStatusResponse.statusCode) {
            case "Success":
                return 200;
            case "Failed":
                return 400;
            case "TimedOut":
                return 429;
            default:
                // eslint-disable-next-line @typescript-eslint/no-unsafe-return
                return this.privMessageStatusResponse.statusCode;
        }
    }
}

//# sourceMappingURL=TurnStatusPayload.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceRecognizerBase.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceRecognizerBase.js ***!
  \***********************************************************************************************************************/
/*! exports provided: ServiceRecognizerBase */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ServiceRecognizerBase", function() { return ServiceRecognizerBase; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SpeechConnectionMessage.Internal */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionMessage.Internal.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





class ServiceRecognizerBase {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, recognizer) {
        // A promise for a configured connection.
        // Do not consume directly, call fetchConnection instead.
        this.privConnectionConfigurationPromise = undefined;
        // A promise for a connection, but one that has not had the speech context sent yet.
        // Do not consume directly, call fetchConnection instead.
        this.privConnectionPromise = undefined;
        this.privSetTimeout = setTimeout;
        this.privIsLiveAudio = false;
        this.recognizeOverride = undefined;
        this.disconnectOverride = undefined;
        this.receiveMessageOverride = undefined;
        this.sendPrePayloadJSONOverride = undefined;
        this.postConnectImplOverride = undefined;
        this.configConnectionOverride = undefined;
        this.handleSpeechPhraseMessage = undefined;
        this.handleSpeechHypothesisMessage = undefined;
        if (!authentication) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ArgumentNullError"]("authentication");
        }
        if (!connectionFactory) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ArgumentNullError"]("connectionFactory");
        }
        if (!audioSource) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ArgumentNullError"]("audioSource");
        }
        if (!recognizerConfig) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ArgumentNullError"]("recognizerConfig");
        }
        this.privMustReportEndOfStream = false;
        this.privAuthentication = authentication;
        this.privConnectionFactory = connectionFactory;
        this.privAudioSource = audioSource;
        this.privRecognizerConfig = recognizerConfig;
        this.privIsDisposed = false;
        this.privRecognizer = recognizer;
        this.privRequestSession = new _Exports__WEBPACK_IMPORTED_MODULE_3__["RequestSession"](this.privAudioSource.id());
        this.privConnectionEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["EventSource"]();
        this.privServiceEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["EventSource"]();
        this.privDynamicGrammar = new _Exports__WEBPACK_IMPORTED_MODULE_3__["DynamicGrammarBuilder"]();
        this.privSpeechContext = new _Exports__WEBPACK_IMPORTED_MODULE_3__["SpeechContext"](this.privDynamicGrammar);
        this.privAgentConfig = new _Exports__WEBPACK_IMPORTED_MODULE_3__["AgentConfig"]();
        if (typeof (Blob) !== "undefined" && typeof (Worker) !== "undefined") {
            this.privSetTimeout = _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Timeout"].setTimeout;
        }
        this.connectionEvents.attach((connectionEvent) => {
            if (connectionEvent.name === "ConnectionClosedEvent") {
                const connectionClosedEvent = connectionEvent;
                if (connectionClosedEvent.statusCode === 1003 ||
                    connectionClosedEvent.statusCode === 1007 ||
                    connectionClosedEvent.statusCode === 1002 ||
                    connectionClosedEvent.statusCode === 4000 ||
                    this.privRequestSession.numConnectionAttempts > this.privRecognizerConfig.maxRetryCount) {
                    void this.cancelRecognitionLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].Error, connectionClosedEvent.statusCode === 1007 ? _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].BadRequestParameters : _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].ConnectionFailure, `${connectionClosedEvent.reason} websocket error code: ${connectionClosedEvent.statusCode}`);
                }
            }
        });
    }
    get audioSource() {
        return this.privAudioSource;
    }
    get speechContext() {
        return this.privSpeechContext;
    }
    get dynamicGrammar() {
        return this.privDynamicGrammar;
    }
    get agentConfig() {
        return this.privAgentConfig;
    }
    set conversationTranslatorToken(token) {
        this.privRecognizerConfig.parameters.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].ConversationTranslator_Token, token);
    }
    set authentication(auth) {
        this.privAuthentication = this.authentication;
    }
    isDisposed() {
        return this.privIsDisposed;
    }
    dispose(reason) {
        return __awaiter(this, void 0, void 0, function* () {
            this.privIsDisposed = true;
            if (this.privConnectionConfigurationPromise !== undefined) {
                try {
                    const connection = yield this.privConnectionConfigurationPromise;
                    yield connection.dispose(reason);
                }
                catch (error) {
                    // The connection is in a bad state. But we're trying to kill it, so...
                    return;
                }
            }
        });
    }
    get connectionEvents() {
        return this.privConnectionEvents;
    }
    get serviceEvents() {
        return this.privServiceEvents;
    }
    get recognitionMode() {
        return this.privRecognizerConfig.recognitionMode;
    }
    recognize(recoMode, successCallback, errorCallBack) {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.recognizeOverride !== undefined) {
                yield this.recognizeOverride(recoMode, successCallback, errorCallBack);
                return;
            }
            // Clear the existing configuration promise to force a re-transmission of config and context.
            this.privConnectionConfigurationPromise = undefined;
            this.privRecognizerConfig.recognitionMode = recoMode;
            this.privSuccessCallback = successCallback;
            this.privErrorCallback = errorCallBack;
            this.privRequestSession.startNewRecognition();
            this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);
            // Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
            const conPromise = this.connectImpl();
            let audioNode;
            try {
                const audioStreamNode = yield this.audioSource.attach(this.privRequestSession.audioNodeId);
                const format = yield this.audioSource.format;
                const deviceInfo = yield this.audioSource.deviceInfo;
                this.privIsLiveAudio = deviceInfo.type && deviceInfo.type === _Exports__WEBPACK_IMPORTED_MODULE_3__["type"].Microphones;
                audioNode = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ReplayableAudioNode"](audioStreamNode, format.avgBytesPerSec);
                yield this.privRequestSession.onAudioSourceAttachCompleted(audioNode, false);
                this.privRecognizerConfig.SpeechServiceConfig.Context.audio = { source: deviceInfo };
            }
            catch (error) {
                yield this.privRequestSession.onStopRecognizing();
                throw error;
            }
            try {
                yield conPromise;
            }
            catch (error) {
                yield this.cancelRecognitionLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].ConnectionFailure, error);
                return;
            }
            const sessionStartEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SessionEventArgs"](this.privRequestSession.sessionId);
            if (!!this.privRecognizer.sessionStarted) {
                this.privRecognizer.sessionStarted(this.privRecognizer, sessionStartEventArgs);
            }
            void this.receiveMessage();
            const audioSendPromise = this.sendAudio(audioNode);
            audioSendPromise.catch((error) => __awaiter(this, void 0, void 0, function* () {
                yield this.cancelRecognitionLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].RuntimeError, error);
            }));
            return;
        });
    }
    stopRecognizing() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privRequestSession.isRecognizing) {
                try {
                    yield this.audioSource.turnOff();
                    yield this.sendFinalAudio();
                    yield this.privRequestSession.onStopRecognizing();
                    yield this.privRequestSession.turnCompletionPromise;
                }
                finally {
                    yield this.privRequestSession.dispose();
                }
            }
            return;
        });
    }
    connect() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.connectImpl();
            return Promise.resolve();
        });
    }
    connectAsync(cb, err) {
        this.connectImpl().then(() => {
            try {
                if (!!cb) {
                    cb();
                }
            }
            catch (e) {
                if (!!err) {
                    err(e);
                }
            }
        }, (reason) => {
            try {
                if (!!err) {
                    err(reason);
                }
                /* eslint-disable no-empty */
            }
            catch (error) {
            }
        });
    }
    disconnect() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.cancelRecognitionLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].NoError, "Disconnecting");
            if (this.disconnectOverride !== undefined) {
                yield this.disconnectOverride();
            }
            if (this.privConnectionPromise !== undefined) {
                try {
                    yield (yield this.privConnectionPromise).dispose();
                }
                catch (error) {
                }
            }
            this.privConnectionPromise = undefined;
        });
    }
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    sendMessage(message) {
        return;
    }
    sendNetworkMessage(path, payload) {
        return __awaiter(this, void 0, void 0, function* () {
            const type = typeof payload === "string" ? _common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Text : _common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Binary;
            const contentType = typeof payload === "string" ? "application/json" : "";
            const connection = yield this.fetchConnection();
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__["SpeechConnectionMessage"](type, path, this.privRequestSession.requestId, contentType, payload));
        });
    }
    set activityTemplate(messagePayload) {
        this.privActivityTemplate = messagePayload;
    }
    get activityTemplate() {
        return this.privActivityTemplate;
    }
    sendTelemetryData() {
        return __awaiter(this, void 0, void 0, function* () {
            const telemetryData = this.privRequestSession.getTelemetry();
            if (ServiceRecognizerBase.telemetryDataEnabled !== true ||
                this.privIsDisposed ||
                null === telemetryData) {
                return;
            }
            if (!!ServiceRecognizerBase.telemetryData) {
                try {
                    ServiceRecognizerBase.telemetryData(telemetryData);
                    /* eslint-disable no-empty */
                }
                catch (_a) { }
            }
            const connection = yield this.fetchConnection();
            yield connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Text, "telemetry", this.privRequestSession.requestId, "application/json", telemetryData));
        });
    }
    // Cancels recognition.
    cancelRecognitionLocal(cancellationReason, errorCode, error) {
        return __awaiter(this, void 0, void 0, function* () {
            if (!!this.privRequestSession.isRecognizing) {
                yield this.privRequestSession.onStopRecognizing();
                this.cancelRecognition(this.privRequestSession.sessionId, this.privRequestSession.requestId, cancellationReason, errorCode, error);
            }
        });
    }
    receiveMessage() {
        return __awaiter(this, void 0, void 0, function* () {
            try {
                if (this.privIsDisposed) {
                    // We're done.
                    return;
                }
                let connection = yield this.fetchConnection();
                const message = yield connection.read();
                if (this.receiveMessageOverride !== undefined) {
                    return this.receiveMessageOverride();
                }
                // indicates we are draining the queue and it came with no message;
                if (!message) {
                    if (!this.privRequestSession.isRecognizing) {
                        return;
                    }
                    else {
                        return this.receiveMessage();
                    }
                }
                this.privServiceHasSentMessage = true;
                const connectionMessage = _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__["SpeechConnectionMessage"].fromConnectionMessage(message);
                if (connectionMessage.requestId.toLowerCase() === this.privRequestSession.requestId.toLowerCase()) {
                    switch (connectionMessage.path.toLowerCase()) {
                        case "turn.start":
                            this.privMustReportEndOfStream = true;
                            this.privRequestSession.onServiceTurnStartResponse();
                            break;
                        case "speech.startdetected":
                            const speechStartDetected = _Exports__WEBPACK_IMPORTED_MODULE_3__["SpeechDetected"].fromJSON(connectionMessage.textBody);
                            const speechStartEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["RecognitionEventArgs"](speechStartDetected.Offset, this.privRequestSession.sessionId);
                            if (!!this.privRecognizer.speechStartDetected) {
                                this.privRecognizer.speechStartDetected(this.privRecognizer, speechStartEventArgs);
                            }
                            break;
                        case "speech.enddetected":
                            let json;
                            if (connectionMessage.textBody.length > 0) {
                                json = connectionMessage.textBody;
                            }
                            else {
                                // If the request was empty, the JSON returned is empty.
                                json = "{ Offset: 0 }";
                            }
                            const speechStopDetected = _Exports__WEBPACK_IMPORTED_MODULE_3__["SpeechDetected"].fromJSON(json);
                            // Only shrink the buffers for continuous recognition.
                            // For single shot, the speech.phrase message will come after the speech.end and it should own buffer shrink.
                            if (this.privRecognizerConfig.isContinuousRecognition) {
                                this.privRequestSession.onServiceRecognized(speechStopDetected.Offset + this.privRequestSession.currentTurnAudioOffset);
                            }
                            const speechStopEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["RecognitionEventArgs"](speechStopDetected.Offset + this.privRequestSession.currentTurnAudioOffset, this.privRequestSession.sessionId);
                            if (!!this.privRecognizer.speechEndDetected) {
                                this.privRecognizer.speechEndDetected(this.privRecognizer, speechStopEventArgs);
                            }
                            break;
                        case "turn.end":
                            yield this.sendTelemetryData();
                            if (this.privRequestSession.isSpeechEnded && this.privMustReportEndOfStream) {
                                this.privMustReportEndOfStream = false;
                                yield this.cancelRecognitionLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].EndOfStream, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].NoError, undefined);
                            }
                            const sessionStopEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SessionEventArgs"](this.privRequestSession.sessionId);
                            yield this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition);
                            if (!this.privRecognizerConfig.isContinuousRecognition || this.privRequestSession.isSpeechEnded || !this.privRequestSession.isRecognizing) {
                                if (!!this.privRecognizer.sessionStopped) {
                                    this.privRecognizer.sessionStopped(this.privRecognizer, sessionStopEventArgs);
                                }
                                return;
                            }
                            else {
                                connection = yield this.fetchConnection();
                                yield this.sendPrePayloadJSON(connection);
                            }
                            break;
                        default:
                            if (!(yield this.processTypeSpecificMessages(connectionMessage))) {
                                // here are some messages that the derived class has not processed, dispatch them to connect class
                                if (!!this.privServiceEvents) {
                                    this.serviceEvents.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ServiceEvent"](connectionMessage.path.toLowerCase(), connectionMessage.textBody));
                                }
                            }
                    }
                }
                return this.receiveMessage();
            }
            catch (error) {
                return null;
            }
        });
    }
    sendSpeechContext(connection, generateNewRequestId) {
        const speechContextJson = this.speechContext.toJSON();
        if (generateNewRequestId) {
            this.privRequestSession.onSpeechContext();
        }
        if (speechContextJson) {
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Text, "speech.context", this.privRequestSession.requestId, "application/json", speechContextJson));
        }
        return;
    }
    // Encapsulated for derived service recognizers that need to send additional JSON
    sendPrePayloadJSON(connection, generateNewRequestId = true) {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.sendPrePayloadJSONOverride !== undefined) {
                return this.sendPrePayloadJSONOverride(connection);
            }
            yield this.sendSpeechContext(connection, generateNewRequestId);
            yield this.sendWaveHeader(connection);
            return;
        });
    }
    sendWaveHeader(connection) {
        return __awaiter(this, void 0, void 0, function* () {
            const format = yield this.audioSource.format;
            // this.writeBufferToConsole(format.header);
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Binary, "audio", this.privRequestSession.requestId, "audio/x-wav", format.header));
        });
    }
    // Establishes a websocket connection to the end point.
    connectImpl() {
        if (this.privConnectionPromise !== undefined) {
            return this.privConnectionPromise.then((connection) => {
                if (connection.state() === _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ConnectionState"].Disconnected) {
                    this.privConnectionId = null;
                    this.privConnectionPromise = undefined;
                    this.privServiceHasSentMessage = false;
                    return this.connectImpl();
                }
                return this.privConnectionPromise;
            }, () => {
                this.privConnectionId = null;
                this.privConnectionPromise = undefined;
                this.privServiceHasSentMessage = false;
                return this.connectImpl();
            });
        }
        this.privConnectionPromise = this.retryableConnect();
        // Attach an empty handler to allow the promise to run in the background while
        // other startup events happen. It'll eventually be awaited on.
        // eslint-disable-next-line @typescript-eslint/no-empty-function
        this.privConnectionPromise.catch(() => { });
        if (this.postConnectImplOverride !== undefined) {
            return this.postConnectImplOverride(this.privConnectionPromise);
        }
        return this.privConnectionPromise;
    }
    sendSpeechServiceConfig(connection, requestSession, SpeechServiceConfigJson) {
        requestSession.onSpeechContext();
        // filter out anything that is not required for the service to work.
        if (ServiceRecognizerBase.telemetryDataEnabled !== true) {
            const withTelemetry = JSON.parse(SpeechServiceConfigJson);
            const replacement = {
                context: {
                    system: withTelemetry.context.system,
                },
            };
            SpeechServiceConfigJson = JSON.stringify(replacement);
        }
        if (this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2", "false").toLowerCase() === "true") {
            const json = JSON.parse(SpeechServiceConfigJson);
            json.context.DisableReferenceChannel = "True";
            json.context.MicSpec = "1_0_0";
            SpeechServiceConfigJson = JSON.stringify(json);
        }
        if (SpeechServiceConfigJson) {
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Text, "speech.config", requestSession.requestId, "application/json", SpeechServiceConfigJson));
        }
        return;
    }
    fetchConnection() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privConnectionConfigurationPromise !== undefined) {
                return this.privConnectionConfigurationPromise.then((connection) => {
                    if (connection.state() === _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ConnectionState"].Disconnected) {
                        this.privConnectionId = null;
                        this.privConnectionConfigurationPromise = undefined;
                        this.privServiceHasSentMessage = false;
                        return this.fetchConnection();
                    }
                    return this.privConnectionConfigurationPromise;
                }, () => {
                    this.privConnectionId = null;
                    this.privConnectionConfigurationPromise = undefined;
                    this.privServiceHasSentMessage = false;
                    return this.fetchConnection();
                });
            }
            this.privConnectionConfigurationPromise = this.configureConnection();
            return yield this.privConnectionConfigurationPromise;
        });
    }
    sendAudio(audioStreamNode) {
        return __awaiter(this, void 0, void 0, function* () {
            const audioFormat = yield this.audioSource.format;
            // The time we last sent data to the service.
            let nextSendTime = Date.now();
            // Max amount to send before we start to throttle
            const fastLaneSizeMs = this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs", "5000");
            const maxSendUnthrottledBytes = audioFormat.avgBytesPerSec / 1000 * parseInt(fastLaneSizeMs, 10);
            const startRecogNumber = this.privRequestSession.recogNumber;
            const readAndUploadCycle = () => __awaiter(this, void 0, void 0, function* () {
                // If speech is done, stop sending audio.
                if (!this.privIsDisposed &&
                    !this.privRequestSession.isSpeechEnded &&
                    this.privRequestSession.isRecognizing &&
                    this.privRequestSession.recogNumber === startRecogNumber) {
                    const connection = yield this.fetchConnection();
                    const audioStreamChunk = yield audioStreamNode.read();
                    // we have a new audio chunk to upload.
                    if (this.privRequestSession.isSpeechEnded) {
                        // If service already recognized audio end then don't send any more audio
                        return;
                    }
                    let payload;
                    let sendDelay;
                    if (!audioStreamChunk || audioStreamChunk.isEnd) {
                        payload = null;
                        sendDelay = 0;
                    }
                    else {
                        payload = audioStreamChunk.buffer;
                        this.privRequestSession.onAudioSent(payload.byteLength);
                        if (maxSendUnthrottledBytes >= this.privRequestSession.bytesSent) {
                            sendDelay = 0;
                        }
                        else {
                            sendDelay = Math.max(0, nextSendTime - Date.now());
                        }
                    }
                    if (0 !== sendDelay) {
                        yield this.delay(sendDelay);
                    }
                    if (payload !== null) {
                        nextSendTime = Date.now() + (payload.byteLength * 1000 / (audioFormat.avgBytesPerSec * 2));
                    }
                    // Are we still alive?
                    if (!this.privIsDisposed &&
                        !this.privRequestSession.isSpeechEnded &&
                        this.privRequestSession.isRecognizing &&
                        this.privRequestSession.recogNumber === startRecogNumber) {
                        connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Binary, "audio", this.privRequestSession.requestId, null, payload)).catch(() => {
                            // eslint-disable-next-line @typescript-eslint/no-empty-function
                            this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(() => { });
                        });
                        if (!(audioStreamChunk === null || audioStreamChunk === void 0 ? void 0 : audioStreamChunk.isEnd)) {
                            // this.writeBufferToConsole(payload);
                            // Regardless of success or failure, schedule the next upload.
                            // If the underlying connection was broken, the next cycle will
                            // get a new connection and re-transmit missing audio automatically.
                            return readAndUploadCycle();
                        }
                        else {
                            // the audio stream has been closed, no need to schedule next
                            // read-upload cycle.
                            if (!this.privIsLiveAudio) {
                                this.privRequestSession.onSpeechEnded();
                            }
                        }
                    }
                }
            });
            return readAndUploadCycle();
        });
    }
    retryableConnect() {
        return __awaiter(this, void 0, void 0, function* () {
            let isUnAuthorized = false;
            this.privAuthFetchEventId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["createNoDashGuid"])();
            const sessionId = this.privRequestSession.sessionId;
            this.privConnectionId = (sessionId !== undefined) ? sessionId : Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["createNoDashGuid"])();
            this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId, this.privConnectionId);
            let lastStatusCode = 0;
            let lastReason = "";
            while (this.privRequestSession.numConnectionAttempts <= this.privRecognizerConfig.maxRetryCount) {
                // Get the auth information for the connection. This is a bit of overkill for the current API surface, but leaving the plumbing in place to be able to raise a developer-customer
                // facing event when a connection fails to let them try and provide new auth information.
                const authPromise = isUnAuthorized ? this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId) : this.privAuthentication.fetch(this.privAuthFetchEventId);
                const auth = yield authPromise;
                yield this.privRequestSession.onAuthCompleted(false);
                // Create the connection
                const connection = this.privConnectionFactory.create(this.privRecognizerConfig, auth, this.privConnectionId);
                // Attach the telemetry handlers.
                this.privRequestSession.listenForServiceTelemetry(connection.events);
                // Attach to the underlying event. No need to hold onto the detach pointers as in the event the connection goes away,
                // it'll stop sending events.
                connection.events.attach((event) => {
                    this.connectionEvents.onEvent(event);
                });
                const response = yield connection.open();
                // 200 == everything is fine.
                if (response.statusCode === 200) {
                    yield this.privRequestSession.onConnectionEstablishCompleted(response.statusCode);
                    return Promise.resolve(connection);
                }
                else if (response.statusCode === 1006) {
                    isUnAuthorized = true;
                }
                lastStatusCode = response.statusCode;
                lastReason = response.reason;
                this.privRequestSession.onRetryConnection();
            }
            yield this.privRequestSession.onConnectionEstablishCompleted(lastStatusCode, lastReason);
            return Promise.reject(`Unable to contact server. StatusCode: ${lastStatusCode}, ${this.privRecognizerConfig.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Endpoint)} Reason: ${lastReason}`);
        });
    }
    delay(delayMs) {
        return new Promise((resolve) => this.privSetTimeout(resolve, delayMs));
    }
    writeBufferToConsole(buffer) {
        let out = "Buffer Size: ";
        if (null === buffer) {
            out += "null";
        }
        else {
            const readView = new Uint8Array(buffer);
            out += `${buffer.byteLength}\r\n`;
            for (let i = 0; i < buffer.byteLength; i++) {
                out += readView[i].toString(16).padStart(2, "0") + " ";
                if (((i + 1) % 16) === 0) {
                    // eslint-disable-next-line no-console
                    console.info(out);
                    out = "";
                }
            }
        }
        // eslint-disable-next-line no-console
        console.info(out);
    }
    sendFinalAudio() {
        return __awaiter(this, void 0, void 0, function* () {
            const connection = yield this.fetchConnection();
            yield connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Binary, "audio", this.privRequestSession.requestId, null, null));
            return;
        });
    }
    // Takes an established websocket connection to the endpoint and sends speech configuration information.
    configureConnection() {
        return __awaiter(this, void 0, void 0, function* () {
            const connection = yield this.connectImpl();
            if (this.configConnectionOverride !== undefined) {
                return this.configConnectionOverride(connection);
            }
            yield this.sendSpeechServiceConfig(connection, this.privRequestSession, this.privRecognizerConfig.SpeechServiceConfig.serialize());
            yield this.sendPrePayloadJSON(connection, false);
            return connection;
        });
    }
}
ServiceRecognizerBase.telemetryDataEnabled = true;

//# sourceMappingURL=ServiceRecognizerBase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceTelemetryListener.Internal.js":
/*!***********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceTelemetryListener.Internal.js ***!
  \***********************************************************************************************************************************/
/*! exports provided: ServiceTelemetryListener */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ServiceTelemetryListener", function() { return ServiceTelemetryListener; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _RecognitionEvents__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RecognitionEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognitionEvents.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */


class ServiceTelemetryListener {
    constructor(requestId, audioSourceId, audioNodeId) {
        this.privIsDisposed = false;
        this.privListeningTriggerMetric = null;
        this.privMicMetric = null;
        this.privConnectionEstablishMetric = null;
        this.privRequestId = requestId;
        this.privAudioSourceId = audioSourceId;
        this.privAudioNodeId = audioNodeId;
        this.privReceivedMessages = {};
        this.privPhraseLatencies = [];
        this.privHypothesisLatencies = [];
    }
    phraseReceived(audioReceivedTime) {
        if (audioReceivedTime > 0) { // 0 indicates the time is unknown. Drop it.
            this.privPhraseLatencies.push(Date.now() - audioReceivedTime);
        }
    }
    hypothesisReceived(audioReceivedTime) {
        if (audioReceivedTime > 0) { // 0 indicates the time is unknown. Drop it.
            this.privHypothesisLatencies.push(Date.now() - audioReceivedTime);
        }
    }
    onEvent(e) {
        if (this.privIsDisposed) {
            return;
        }
        if (e instanceof _RecognitionEvents__WEBPACK_IMPORTED_MODULE_1__["RecognitionTriggeredEvent"] && e.requestId === this.privRequestId) {
            this.privListeningTriggerMetric = {
                End: e.eventTime,
                Name: "ListeningTrigger",
                Start: e.eventTime,
            };
        }
        if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_0__["AudioStreamNodeAttachingEvent"] && e.audioSourceId === this.privAudioSourceId && e.audioNodeId === this.privAudioNodeId) {
            this.privMicStartTime = e.eventTime;
        }
        if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_0__["AudioStreamNodeAttachedEvent"] && e.audioSourceId === this.privAudioSourceId && e.audioNodeId === this.privAudioNodeId) {
            this.privMicStartTime = e.eventTime;
        }
        if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_0__["AudioSourceErrorEvent"] && e.audioSourceId === this.privAudioSourceId) {
            if (!this.privMicMetric) {
                this.privMicMetric = {
                    End: e.eventTime,
                    Error: e.error,
                    Name: "Microphone",
                    Start: this.privMicStartTime,
                };
            }
        }
        if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_0__["AudioStreamNodeErrorEvent"] && e.audioSourceId === this.privAudioSourceId && e.audioNodeId === this.privAudioNodeId) {
            if (!this.privMicMetric) {
                this.privMicMetric = {
                    End: e.eventTime,
                    Error: e.error,
                    Name: "Microphone",
                    Start: this.privMicStartTime,
                };
            }
        }
        if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_0__["AudioStreamNodeDetachedEvent"] && e.audioSourceId === this.privAudioSourceId && e.audioNodeId === this.privAudioNodeId) {
            if (!this.privMicMetric) {
                this.privMicMetric = {
                    End: e.eventTime,
                    Name: "Microphone",
                    Start: this.privMicStartTime,
                };
            }
        }
        if (e instanceof _RecognitionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectingToServiceEvent"] && e.requestId === this.privRequestId) {
            this.privConnectionId = e.sessionId;
        }
        if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionStartEvent"] && e.connectionId === this.privConnectionId) {
            this.privConnectionStartTime = e.eventTime;
        }
        if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionEstablishedEvent"] && e.connectionId === this.privConnectionId) {
            if (!this.privConnectionEstablishMetric) {
                this.privConnectionEstablishMetric = {
                    End: e.eventTime,
                    Id: this.privConnectionId,
                    Name: "Connection",
                    Start: this.privConnectionStartTime,
                };
            }
        }
        if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionEstablishErrorEvent"] && e.connectionId === this.privConnectionId) {
            if (!this.privConnectionEstablishMetric) {
                this.privConnectionEstablishMetric = {
                    End: e.eventTime,
                    Error: this.getConnectionError(e.statusCode),
                    Id: this.privConnectionId,
                    Name: "Connection",
                    Start: this.privConnectionStartTime,
                };
            }
        }
        if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionMessageReceivedEvent"] && e.connectionId === this.privConnectionId) {
            if (e.message && e.message.headers && e.message.headers.path) {
                if (!this.privReceivedMessages[e.message.headers.path]) {
                    this.privReceivedMessages[e.message.headers.path] = new Array();
                }
                const maxMessagesToSend = 50;
                if (this.privReceivedMessages[e.message.headers.path].length < maxMessagesToSend) {
                    this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime);
                }
            }
        }
    }
    getTelemetry() {
        const metrics = new Array();
        if (this.privListeningTriggerMetric) {
            metrics.push(this.privListeningTriggerMetric);
        }
        if (this.privMicMetric) {
            metrics.push(this.privMicMetric);
        }
        if (this.privConnectionEstablishMetric) {
            metrics.push(this.privConnectionEstablishMetric);
        }
        if (this.privPhraseLatencies.length > 0) {
            metrics.push({
                PhraseLatencyMs: this.privPhraseLatencies,
            });
        }
        if (this.privHypothesisLatencies.length > 0) {
            metrics.push({
                FirstHypothesisLatencyMs: this.privHypothesisLatencies,
            });
        }
        const telemetry = {
            Metrics: metrics,
            ReceivedMessages: this.privReceivedMessages,
        };
        const json = JSON.stringify(telemetry);
        // We dont want to send the same telemetry again. So clean those out.
        this.privReceivedMessages = {};
        this.privListeningTriggerMetric = null;
        this.privMicMetric = null;
        this.privConnectionEstablishMetric = null;
        this.privPhraseLatencies = [];
        this.privHypothesisLatencies = [];
        return json;
    }
    // Determines if there are any telemetry events to send to the service.
    get hasTelemetry() {
        return (Object.keys(this.privReceivedMessages).length !== 0 ||
            this.privListeningTriggerMetric !== null ||
            this.privMicMetric !== null ||
            this.privConnectionEstablishMetric !== null ||
            this.privPhraseLatencies.length !== 0 ||
            this.privHypothesisLatencies.length !== 0);
    }
    dispose() {
        this.privIsDisposed = true;
    }
    getConnectionError(statusCode) {
        /*
        -- Websocket status codes --
        NormalClosure = 1000,
        EndpointUnavailable = 1001,
        ProtocolError = 1002,
        InvalidMessageType = 1003,
        Empty = 1005,
        InvalidPayloadData = 1007,
        PolicyViolation = 1008,
        MessageTooBig = 1009,
        MandatoryExtension = 1010,
        InternalServerError = 1011
        */
        switch (statusCode) {
            case 400:
            case 1002:
            case 1003:
            case 1005:
            case 1007:
            case 1008:
            case 1009: return "BadRequest";
            case 401: return "Unauthorized";
            case 403: return "Forbidden";
            case 503:
            case 1001: return "ServerUnavailable";
            case 500:
            case 1011: return "ServerError";
            case 408:
            case 504: return "Timeout";
            default: return "statuscode:" + statusCode.toString();
        }
    }
}

//# sourceMappingURL=ServiceTelemetryListener.Internal.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeakerIdMessageAdapter.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeakerIdMessageAdapter.js ***!
  \*************************************************************************************************************************/
/*! exports provided: SpeakerIdMessageAdapter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeakerIdMessageAdapter", function() { return SpeakerIdMessageAdapter; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



/**
 * Implements methods for speaker recognition classes, sending requests to endpoint
 * and parsing response into expected format
 * @class SpeakerIdMessageAdapter
 */
class SpeakerIdMessageAdapter {
    constructor(config) {
        let endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Endpoint, undefined);
        if (!endpoint) {
            const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Region, "westus");
            const hostSuffix = _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_2__["ConnectionFactoryBase"].getHostSuffix(region);
            endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Host, `https://${region}.api.cognitive${hostSuffix}`);
        }
        this.privUri = `${endpoint}/speaker-recognition/{mode}/{dependency}/profiles`;
        const options = _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestConfigBase"].requestOptions;
        options.headers[_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestConfigBase"].configParams.subscriptionKey] = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Key, undefined);
        this.privApiVersion = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeakerRecognition_Api_Version, "2021-09-05");
        this.privRestAdapter = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestMessageAdapter"](options);
    }
    /**
     * Sends create profile request to endpoint.
     * @function
     * @param {VoiceProfileType} profileType - type of voice profile to create.
     * @param {string} lang - language/locale of voice profile
     * @public
     * @returns {Promise<IRestResponse>} promised rest response containing id of created profile.
     */
    createProfile(profileType, lang) {
        const uri = this.getOperationUri(profileType);
        return this.privRestAdapter.request(_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestRequestType"].Post, uri, this.getQueryParams({}), { locale: lang });
    }
    /**
     * Sends create enrollment request to endpoint.
     * @function
     * @param {VoiceProfile} profileType - voice profile for which to create new enrollment.
     * @param {IAudioSource} audioSource - audioSource from which to pull data to send
     * @public
     * @returns {Promise<IRestResponse>} rest response to enrollment request.
     */
    createEnrollment(profile, audioSource) {
        const uri = this.getOperationUri(profile.profileType) + "/" + profile.profileId + "/enrollments";
        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
        return audioSource.blob.then((result) => this.privRestAdapter.request(_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestRequestType"].File, uri, this.getQueryParams({ ignoreMinLength: "true" }), null, result));
    }
    /**
     * Sends verification request to endpoint.
     * @function
     * @param {SpeakerVerificationModel} model - voice model to verify against.
     * @param {IAudioSource} audioSource - audioSource from which to pull data to send
     * @public
     * @returns {Promise<IRestResponse>} rest response to enrollment request.
     */
    verifySpeaker(model, audioSource) {
        return __awaiter(this, void 0, void 0, function* () {
            const uri = this.getOperationUri(model.voiceProfile.profileType) + "/" + model.voiceProfile.profileId + ":verify";
            try {
                const result = yield audioSource.blob;
                return this.privRestAdapter.request(_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestRequestType"].File, uri, this.getQueryParams({ ignoreMinLength: "true" }), null, result);
            }
            catch (e) {
                return Promise.resolve({ data: e });
            }
        });
    }
    /**
     * Sends identification request to endpoint.
     * @function
     * @param {SpeakerIdentificationModel} model - voice profiles against which to identify.
     * @param {IAudioSource} audioSource - audioSource from which to pull data to send
     * @public
     * @returns {Promise<IRestResponse>} rest response to enrollment request.
     */
    identifySpeaker(model, audioSource) {
        return __awaiter(this, void 0, void 0, function* () {
            const uri = this.getOperationUri(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["VoiceProfileType"].TextIndependentIdentification) + ":identifySingleSpeaker";
            try {
                const result = yield audioSource.blob;
                return this.privRestAdapter.request(_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestRequestType"].File, uri, this.getQueryParams({ profileIds: model.voiceProfileIds, ignoreMinLength: "true" }), null, result);
            }
            catch (e) {
                return Promise.resolve({ data: e });
            }
        });
    }
    /**
     * Sends profile status request to endpoint.
     * @function
     * @param {VoiceProfile} profile - voice profile to check.
     * @public
     * @returns {Promise<IRestResponse>} rest response to status request
     */
    getProfileStatus(profile) {
        const uri = `${this.getOperationUri(profile.profileType)}/${profile.profileId}`;
        return this.privRestAdapter.request(_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestRequestType"].Get, uri, this.getQueryParams());
    }
    /**
     * Sends get all profiles request to endpoint.
     * @function
     * @param {VoiceProfileType} profileType - type of profiles to return list of
     * @public
     * @returns {Promise<IRestResponse>} promised rest response containing all profiles
     */
    getProfiles(profileType) {
        const uri = this.getOperationUri(profileType);
        return this.privRestAdapter.request(_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestRequestType"].Get, uri, this.getQueryParams());
    }
    /**
     * Sends get activation/auth phrases request to endpoint.
     * @function
     * @param {VoiceProfileType} profileType - type of profiles to return phrases for
     * @param {string} lang - language/locale of voice profile
     * @public
     * @returns {Promise<IRestResponse>} promised rest response containing list of valid phrases
     */
    getPhrases(profileType, lang) {
        const uri = `${this.getOperationUri(profileType)}`.replace("profiles", "phrases") + "/" + lang;
        return this.privRestAdapter.request(_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestRequestType"].Get, uri, this.getQueryParams());
    }
    /**
     * Sends delete profile request to endpoint.
     * @function
     * @param {VoiceProfile} profile - voice profile to delete.
     * @public
     * @returns {Promise<IRestResponse>} rest response to deletion request
     */
    deleteProfile(profile) {
        const uri = this.getOperationUri(profile.profileType) + "/" + profile.profileId;
        return this.privRestAdapter.request(_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestRequestType"].Delete, uri, this.getQueryParams());
    }
    /**
     * Sends reset profile request to endpoint.
     * @function
     * @param {VoiceProfile} profile - voice profile to reset enrollments for.
     * @public
     * @returns {Promise<IRestResponse>} rest response to reset request
     */
    resetProfile(profile) {
        const uri = this.getOperationUri(profile.profileType) + "/" + profile.profileId + ":reset";
        return this.privRestAdapter.request(_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestRequestType"].Post, uri, this.getQueryParams());
    }
    getOperationUri(profileType) {
        const mode = profileType === _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["VoiceProfileType"].TextIndependentIdentification ? "identification" : "verification";
        const dependency = profileType === _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["VoiceProfileType"].TextDependentVerification ? "text-dependent" : "text-independent";
        return this.privUri.replace("{mode}", mode).replace("{dependency}", dependency);
    }
    getQueryParams(params = {}) {
        params[_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestConfigBase"].configParams.apiVersion] = this.privApiVersion;
        return params;
    }
}

//# sourceMappingURL=SpeakerIdMessageAdapter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeakerRecognitionConfig.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeakerRecognitionConfig.js ***!
  \**************************************************************************************************************************/
/*! exports provided: SpeakerRecognitionConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeakerRecognitionConfig", function() { return SpeakerRecognitionConfig; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class SpeakerRecognitionConfig {
    constructor(context, parameters) {
        this.privContext = context ? context : new _Exports__WEBPACK_IMPORTED_MODULE_0__["Context"](null);
        this.privParameters = parameters;
    }
    get parameters() {
        return this.privParameters;
    }
    get Context() {
        return this.privContext;
    }
}

//# sourceMappingURL=SpeakerRecognitionConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionFactory.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionFactory.js ***!
  \*************************************************************************************************************************/
/*! exports provided: SpeechConnectionFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechConnectionFactory", function() { return SpeechConnectionFactory; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
/* harmony import */ var _QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./QueryParameterNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.







class SpeechConnectionFactory extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_3__["ConnectionFactoryBase"] {
    constructor() {
        super(...arguments);
        this.interactiveRelativeUri = "/speech/recognition/interactive/cognitiveservices/v1";
        this.conversationRelativeUri = "/speech/recognition/conversation/cognitiveservices/v1";
        this.dictationRelativeUri = "/speech/recognition/dictation/cognitiveservices/v1";
        this.universalUri = "/speech/universal/v";
    }
    create(config, authInfo, connectionId) {
        let endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Endpoint, undefined);
        const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region, undefined);
        const hostSuffix = _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_3__["ConnectionFactoryBase"].getHostSuffix(region);
        const host = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Host, "wss://" + region + ".stt.speech" + hostSuffix);
        const queryParams = {};
        const endpointId = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_EndpointId, undefined);
        const language = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage, undefined);
        if (endpointId) {
            if (!endpoint || endpoint.search(_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].CustomSpeechDeploymentId) === -1) {
                queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].CustomSpeechDeploymentId] = endpointId;
            }
        }
        else if (language) {
            if (!endpoint || endpoint.search(_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].Language) === -1) {
                queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].Language] = language;
            }
        }
        if (!endpoint || endpoint.search(_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].Format) === -1) {
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].Format] = config.parameters.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["OutputFormatPropertyName"], _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"][_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"].Simple]).toLowerCase();
        }
        if (config.autoDetectSourceLanguages !== undefined) {
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].EnableLanguageId] = "true";
        }
        this.setCommonUrlParams(config, queryParams, endpoint);
        if (!endpoint) {
            switch (config.recognitionMode) {
                case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionMode"].Conversation:
                    if (config.parameters.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["ForceDictationPropertyName"], "false") === "true") {
                        endpoint = host + this.dictationRelativeUri;
                    }
                    else {
                        if (config.recognitionEndpointVersion !== undefined && parseInt(config.recognitionEndpointVersion, 10) > 1) {
                            endpoint = `${host}${this.universalUri}${config.recognitionEndpointVersion}`;
                        }
                        else {
                            endpoint = host + this.conversationRelativeUri;
                        }
                    }
                    break;
                case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionMode"].Dictation:
                    endpoint = host + this.dictationRelativeUri;
                    break;
                default:
                    if (config.recognitionEndpointVersion !== undefined && parseInt(config.recognitionEndpointVersion, 10) > 1) {
                        endpoint = `${host}${this.universalUri}${config.recognitionEndpointVersion}`;
                    }
                    else {
                        endpoint = host + this.interactiveRelativeUri; // default is interactive
                    }
                    break;
            }
        }
        const headers = {};
        if (authInfo.token !== undefined && authInfo.token !== "") {
            headers[authInfo.headerName] = authInfo.token;
        }
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_4__["HeaderNames"].ConnectionId] = connectionId;
        const enableCompression = config.parameters.getProperty("SPEECH-EnableWebsocketCompression", "false") === "true";
        const webSocketConnection = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["WebsocketConnection"](endpoint, queryParams, headers, new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["WebsocketMessageFormatter"](), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ProxyInfo"].fromRecognizerConfig(config), enableCompression, connectionId);
        // Set the value of SpeechServiceConnection_Url to webSocketConnection.uri (and not to `endpoint`), since this value is the final
        // URI that was used to make the connection (including query parameters).
        const uri = webSocketConnection.uri;
        config.parameters.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Url, uri);
        return webSocketConnection;
    }
}

//# sourceMappingURL=SpeechConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionMessage.Internal.js":
/*!**********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionMessage.Internal.js ***!
  \**********************************************************************************************************************************/
/*! exports provided: SpeechConnectionMessage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechConnectionMessage", function() { return SpeechConnectionMessage; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class SpeechConnectionMessage extends _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionMessage"] {
    constructor(messageType, path, requestId, contentType, body, streamId, additionalHeaders, id) {
        if (!path) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("path");
        }
        if (!requestId) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("requestId");
        }
        const headers = {};
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_1__["HeaderNames"].Path] = path;
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_1__["HeaderNames"].RequestId] = requestId;
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_1__["HeaderNames"].RequestTimestamp] = new Date().toISOString();
        if (contentType) {
            headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_1__["HeaderNames"].ContentType] = contentType;
        }
        if (streamId) {
            headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_1__["HeaderNames"].RequestStreamId] = streamId;
        }
        if (additionalHeaders) {
            for (const headerName in additionalHeaders) {
                if (headerName) {
                    headers[headerName] = additionalHeaders[headerName];
                }
            }
        }
        if (id) {
            super(messageType, body, headers, id);
        }
        else {
            super(messageType, body, headers);
        }
        this.privPath = path;
        this.privRequestId = requestId;
        this.privContentType = contentType;
        this.privStreamId = streamId;
        this.privAdditionalHeaders = additionalHeaders;
    }
    get path() {
        return this.privPath;
    }
    get requestId() {
        return this.privRequestId;
    }
    get contentType() {
        return this.privContentType;
    }
    get streamId() {
        return this.privStreamId;
    }
    get additionalHeaders() {
        return this.privAdditionalHeaders;
    }
    static fromConnectionMessage(message) {
        let path = null;
        let requestId = null;
        let contentType = null;
        // let requestTimestamp = null;
        let streamId = null;
        const additionalHeaders = {};
        if (message.headers) {
            for (const headerName in message.headers) {
                if (headerName) {
                    if (headerName.toLowerCase() === _HeaderNames__WEBPACK_IMPORTED_MODULE_1__["HeaderNames"].Path.toLowerCase()) {
                        path = message.headers[headerName];
                    }
                    else if (headerName.toLowerCase() === _HeaderNames__WEBPACK_IMPORTED_MODULE_1__["HeaderNames"].RequestId.toLowerCase()) {
                        requestId = message.headers[headerName];
                        // } else if (headerName.toLowerCase() === HeaderNames.RequestTimestamp.toLowerCase()) {
                        //  requestTimestamp = message.headers[headerName];
                    }
                    else if (headerName.toLowerCase() === _HeaderNames__WEBPACK_IMPORTED_MODULE_1__["HeaderNames"].ContentType.toLowerCase()) {
                        contentType = message.headers[headerName];
                    }
                    else if (headerName.toLowerCase() === _HeaderNames__WEBPACK_IMPORTED_MODULE_1__["HeaderNames"].RequestStreamId.toLowerCase()) {
                        streamId = message.headers[headerName];
                    }
                    else {
                        additionalHeaders[headerName] = message.headers[headerName];
                    }
                }
            }
        }
        return new SpeechConnectionMessage(message.messageType, path, requestId, contentType, message.body, streamId, additionalHeaders, message.id);
    }
}

//# sourceMappingURL=SpeechConnectionMessage.Internal.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechContext.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechContext.js ***!
  \***************************************************************************************************************/
/*! exports provided: SpeechContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechContext", function() { return SpeechContext; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Represents the JSON used in the speech.context message sent to the speech service.
 * The dynamic grammar is always refreshed from the encapsulated dynamic grammar object.
 */
class SpeechContext {
    constructor(dynamicGrammar) {
        this.privContext = {};
        this.privDynamicGrammar = dynamicGrammar;
    }
    /**
     * Adds a section to the speech.context object.
     * @param sectionName Name of the section to add.
     * @param value JSON serializable object that represents the value.
     */
    setSection(sectionName, value) {
        this.privContext[sectionName] = value;
    }
    /**
     * @Internal
     * This is only used by pronunciation assessment config.
     * Do not use externally, object returned will change without warning or notice.
     */
    setPronunciationAssessmentParams(params) {
        if (this.privContext.phraseDetection === undefined) {
            this.privContext.phraseDetection = {
                enrichment: {
                    pronunciationAssessment: {}
                }
            };
        }
        this.privContext.phraseDetection.enrichment.pronunciationAssessment = JSON.parse(params);
        this.setWordLevelTimings();
        this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment");
        if (this.privContext.phraseOutput.detailed.options.indexOf("SNR") === -1) {
            this.privContext.phraseOutput.detailed.options.push("SNR");
        }
    }
    setWordLevelTimings() {
        if (this.privContext.phraseOutput === undefined) {
            this.privContext.phraseOutput = {
                detailed: {
                    options: []
                },
                format: {}
            };
        }
        if (this.privContext.phraseOutput.detailed === undefined) {
            this.privContext.phraseOutput.detailed = {
                options: []
            };
        }
        this.privContext.phraseOutput.format = "Detailed";
        if (this.privContext.phraseOutput.detailed.options.indexOf("WordTimings") === -1) {
            this.privContext.phraseOutput.detailed.options.push("WordTimings");
        }
    }
    toJSON() {
        const dgi = this.privDynamicGrammar.generateGrammarObject();
        this.setSection("dgi", dgi);
        const ret = JSON.stringify(this.privContext);
        return ret;
    }
}

//# sourceMappingURL=SpeechContext.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechServiceInterfaces.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechServiceInterfaces.js ***!
  \*************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

//# sourceMappingURL=SpeechServiceInterfaces.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechServiceRecognizer.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechServiceRecognizer.js ***!
  \*************************************************************************************************************************/
/*! exports provided: SpeechServiceRecognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechServiceRecognizer", function() { return SpeechServiceRecognizer; });
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


// eslint-disable-next-line max-classes-per-file
class SpeechServiceRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_1__["ServiceRecognizerBase"] {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, speechRecognizer) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, speechRecognizer);
        this.privSpeechRecognizer = speechRecognizer;
        const phraseDetection = {};
        const speechSegmentationTimeout = recognizerConfig.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].Speech_SegmentationSilenceTimeoutMs, undefined);
        if (speechSegmentationTimeout !== undefined) {
            const segmentationSilenceTimeoutMs = parseInt(speechSegmentationTimeout, 10);
            phraseDetection.mode = "INTERACTIVE";
            phraseDetection.INTERACTIVE = {
                segmentation: {
                    mode: "Custom",
                    segmentationSilenceTimeoutMs
                }
            };
        }
        if (recognizerConfig.autoDetectSourceLanguages !== undefined) {
            const sourceLanguages = recognizerConfig.autoDetectSourceLanguages.split(",");
            let speechContextLidMode;
            if (recognizerConfig.languageIdMode === "Continuous") {
                speechContextLidMode = "DetectContinuous";
            }
            else { // recognizerConfig.languageIdMode === "AtStart"
                speechContextLidMode = "DetectAtAudioStart";
            }
            this.privSpeechContext.setSection("languageId", {
                Priority: "PrioritizeLatency",
                languages: sourceLanguages,
                mode: speechContextLidMode,
                onSuccess: { action: "Recognize" },
                onUnknown: { action: "None" }
            });
            this.privSpeechContext.setSection("phraseOutput", {
                interimResults: {
                    resultType: "Auto"
                },
                phraseResults: {
                    resultType: "Always"
                }
            });
            const customModels = recognizerConfig.sourceLanguageModels;
            if (customModels !== undefined) {
                phraseDetection.customModels = customModels;
                phraseDetection.onInterim = { action: "None" };
                phraseDetection.onSuccess = { action: "None" };
            }
        }
        const isEmpty = (obj) => {
            // eslint-disable-next-line guard-for-in, brace-style
            for (const x in obj) {
                return false;
            }
            return true;
        };
        if (!isEmpty(phraseDetection)) {
            this.privSpeechContext.setSection("phraseDetection", phraseDetection);
        }
    }
    processTypeSpecificMessages(connectionMessage) {
        return __awaiter(this, void 0, void 0, function* () {
            let result;
            const resultProps = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyCollection"]();
            resultProps.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceResponse_JsonResult, connectionMessage.textBody);
            let processed = false;
            switch (connectionMessage.path.toLowerCase()) {
                case "speech.hypothesis":
                case "speech.fragment":
                    const hypothesis = _Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechHypothesis"].fromJSON(connectionMessage.textBody);
                    const offset = hypothesis.Offset + this.privRequestSession.currentTurnAudioOffset;
                    result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionResult"](this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].RecognizingSpeech, hypothesis.Text, hypothesis.Duration, offset, hypothesis.Language, hypothesis.LanguageDetectionConfidence, undefined, // Speaker Id
                    undefined, connectionMessage.textBody, resultProps);
                    this.privRequestSession.onHypothesis(offset);
                    const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionEventArgs"](result, hypothesis.Duration, this.privRequestSession.sessionId);
                    if (!!this.privSpeechRecognizer.recognizing) {
                        try {
                            this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer, ev);
                            /* eslint-disable no-empty */
                        }
                        catch (error) {
                            // Not going to let errors in the event handler
                            // trip things up.
                        }
                    }
                    processed = true;
                    break;
                case "speech.phrase":
                    const simple = _Exports__WEBPACK_IMPORTED_MODULE_1__["SimpleSpeechPhrase"].fromJSON(connectionMessage.textBody);
                    const resultReason = _Exports__WEBPACK_IMPORTED_MODULE_1__["EnumTranslation"].implTranslateRecognitionResult(simple.RecognitionStatus);
                    this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset + simple.Offset + simple.Duration);
                    if (_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].Canceled === resultReason) {
                        const cancelReason = _Exports__WEBPACK_IMPORTED_MODULE_1__["EnumTranslation"].implTranslateCancelResult(simple.RecognitionStatus);
                        const cancellationErrorCode = _Exports__WEBPACK_IMPORTED_MODULE_1__["EnumTranslation"].implTranslateCancelErrorCode(simple.RecognitionStatus);
                        yield this.cancelRecognitionLocal(cancelReason, cancellationErrorCode, _Exports__WEBPACK_IMPORTED_MODULE_1__["EnumTranslation"].implTranslateErrorDetails(cancellationErrorCode));
                    }
                    else {
                        if (!(this.privRequestSession.isSpeechEnded && resultReason === _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].NoMatch && simple.RecognitionStatus !== _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].InitialSilenceTimeout)) {
                            if (this.privRecognizerConfig.parameters.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["OutputFormatPropertyName"]) === _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["OutputFormat"][_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["OutputFormat"].Simple]) {
                                result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionResult"](this.privRequestSession.requestId, resultReason, simple.DisplayText, simple.Duration, simple.Offset + this.privRequestSession.currentTurnAudioOffset, simple.Language, simple.LanguageDetectionConfidence, undefined, // Speaker Id
                                undefined, connectionMessage.textBody, resultProps);
                            }
                            else {
                                const detailed = _Exports__WEBPACK_IMPORTED_MODULE_1__["DetailedSpeechPhrase"].fromJSON(connectionMessage.textBody);
                                const totalOffset = detailed.Offset + this.privRequestSession.currentTurnAudioOffset;
                                const offsetCorrectedJson = detailed.getJsonWithCorrectedOffsets(totalOffset);
                                result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionResult"](this.privRequestSession.requestId, resultReason, detailed.RecognitionStatus === _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].Success ? detailed.NBest[0].Display : undefined, detailed.Duration, totalOffset, detailed.Language, detailed.LanguageDetectionConfidence, undefined, // Speaker Id
                                undefined, offsetCorrectedJson, resultProps);
                            }
                            const event = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionEventArgs"](result, result.offset, this.privRequestSession.sessionId);
                            if (!!this.privSpeechRecognizer.recognized) {
                                try {
                                    this.privSpeechRecognizer.recognized(this.privSpeechRecognizer, event);
                                    /* eslint-disable no-empty */
                                }
                                catch (error) {
                                    // Not going to let errors in the event handler
                                    // trip things up.
                                }
                            }
                        }
                        if (!!this.privSuccessCallback) {
                            try {
                                this.privSuccessCallback(result);
                            }
                            catch (e) {
                                if (!!this.privErrorCallback) {
                                    this.privErrorCallback(e);
                                }
                            }
                            // Only invoke the call back once.
                            // and if it's successful don't invoke the
                            // error after that.
                            this.privSuccessCallback = undefined;
                            this.privErrorCallback = undefined;
                        }
                    }
                    processed = true;
                    break;
                default:
                    break;
            }
            return processed;
        });
    }
    // Cancels recognition.
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error) {
        const properties = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyCollection"]();
        properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCodePropertyName"], _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCode"][errorCode]);
        if (!!this.privSpeechRecognizer.canceled) {
            const cancelEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionCanceledEventArgs"](cancellationReason, error, errorCode, undefined, sessionId);
            try {
                this.privSpeechRecognizer.canceled(this.privSpeechRecognizer, cancelEvent);
                /* eslint-disable no-empty */
            }
            catch (_a) { }
        }
        if (!!this.privSuccessCallback) {
            const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionResult"](requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].Canceled, undefined, // Text
            undefined, // Duration
            undefined, // Offset
            undefined, // Language
            undefined, // Language Detection Confidence
            undefined, // Speaker Id
            error, undefined, // Json
            properties);
            try {
                this.privSuccessCallback(result);
                this.privSuccessCallback = undefined;
                /* eslint-disable no-empty */
            }
            catch (_b) { }
        }
    }
}

//# sourceMappingURL=SpeechServiceRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechSynthesisConnectionFactory.js":
/*!**********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechSynthesisConnectionFactory.js ***!
  \**********************************************************************************************************************************/
/*! exports provided: SpeechSynthesisConnectionFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisConnectionFactory", function() { return SpeechSynthesisConnectionFactory; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
/* harmony import */ var _QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./QueryParameterNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.






class SpeechSynthesisConnectionFactory {
    constructor() {
        this.synthesisUri = "/cognitiveservices/websocket/v1";
    }
    create(config, authInfo, connectionId) {
        let endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Endpoint, undefined);
        const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Region, undefined);
        const hostSuffix = _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_2__["ConnectionFactoryBase"].getHostSuffix(region);
        const endpointId = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_EndpointId, undefined);
        const hostPrefix = (endpointId === undefined) ? "tts" : "voice";
        const host = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Host, "wss://" + region + "." + hostPrefix + ".speech" + hostSuffix);
        const queryParams = {};
        if (!endpoint) {
            endpoint = host + this.synthesisUri;
        }
        const headers = {};
        if (authInfo.token !== undefined && authInfo.token !== "") {
            headers[authInfo.headerName] = authInfo.token;
        }
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_4__["HeaderNames"].ConnectionId] = connectionId;
        if (endpointId !== undefined) {
            headers[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].CustomVoiceDeploymentId] = endpointId;
        }
        config.parameters.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Url, endpoint);
        const enableCompression = config.parameters.getProperty("SPEECH-EnableWebsocketCompression", "false") === "true";
        return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["WebsocketConnection"](endpoint, queryParams, headers, new _Exports__WEBPACK_IMPORTED_MODULE_3__["WebsocketMessageFormatter"](), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ProxyInfo"].fromParameters(config.parameters), enableCompression, connectionId);
    }
}

//# sourceMappingURL=SpeechSynthesisConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisAdapterBase.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisAdapterBase.js ***!
  \**********************************************************************************************************************/
/*! exports provided: SynthesisAdapterBase */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SynthesisAdapterBase", function() { return SynthesisAdapterBase; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./SpeechConnectionMessage.Internal */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionMessage.Internal.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




class SynthesisAdapterBase {
    constructor(authentication, connectionFactory, synthesizerConfig, speechSynthesizer, audioDestination) {
        this.speakOverride = undefined;
        this.receiveMessageOverride = undefined;
        this.connectImplOverride = undefined;
        this.configConnectionOverride = undefined;
        // A promise for a configured connection.
        // Do not consume directly, call fetchConnection instead.
        this.privConnectionConfigurationPromise = undefined;
        if (!authentication) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("authentication");
        }
        if (!connectionFactory) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("connectionFactory");
        }
        if (!synthesizerConfig) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("synthesizerConfig");
        }
        this.privAuthentication = authentication;
        this.privConnectionFactory = connectionFactory;
        this.privSynthesizerConfig = synthesizerConfig;
        this.privIsDisposed = false;
        this.privSpeechSynthesizer = speechSynthesizer;
        this.privSessionAudioDestination = audioDestination;
        this.privSynthesisTurn = new _Exports__WEBPACK_IMPORTED_MODULE_2__["SynthesisTurn"]();
        this.privConnectionEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["EventSource"]();
        this.privServiceEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["EventSource"]();
        this.privSynthesisContext = new _Exports__WEBPACK_IMPORTED_MODULE_2__["SynthesisContext"](this.privSpeechSynthesizer);
        this.privAgentConfig = new _Exports__WEBPACK_IMPORTED_MODULE_2__["AgentConfig"]();
        this.connectionEvents.attach((connectionEvent) => {
            if (connectionEvent.name === "ConnectionClosedEvent") {
                const connectionClosedEvent = connectionEvent;
                if (connectionClosedEvent.statusCode !== 1000) {
                    this.cancelSynthesisLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationReason"].Error, connectionClosedEvent.statusCode === 1007 ? _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"].BadRequestParameters : _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"].ConnectionFailure, `${connectionClosedEvent.reason} websocket error code: ${connectionClosedEvent.statusCode}`);
                }
            }
        });
    }
    get synthesisContext() {
        return this.privSynthesisContext;
    }
    get agentConfig() {
        return this.privAgentConfig;
    }
    get connectionEvents() {
        return this.privConnectionEvents;
    }
    get serviceEvents() {
        return this.privServiceEvents;
    }
    set activityTemplate(messagePayload) {
        this.privActivityTemplate = messagePayload;
    }
    get activityTemplate() {
        return this.privActivityTemplate;
    }
    set audioOutputFormat(format) {
        this.privAudioOutputFormat = format;
        this.privSynthesisTurn.audioOutputFormat = format;
        if (this.privSessionAudioDestination !== undefined) {
            this.privSessionAudioDestination.format = format;
        }
        if (this.synthesisContext !== undefined) {
            this.synthesisContext.audioOutputFormat = format;
        }
    }
    static addHeader(audio, format) {
        if (!format.hasHeader) {
            return audio;
        }
        format.updateHeader(audio.byteLength);
        const tmp = new Uint8Array(audio.byteLength + format.header.byteLength);
        tmp.set(new Uint8Array(format.header), 0);
        tmp.set(new Uint8Array(audio), format.header.byteLength);
        return tmp.buffer;
    }
    isDisposed() {
        return this.privIsDisposed;
    }
    dispose(reason) {
        return __awaiter(this, void 0, void 0, function* () {
            this.privIsDisposed = true;
            if (this.privSessionAudioDestination !== undefined) {
                this.privSessionAudioDestination.close();
            }
            if (this.privConnectionConfigurationPromise !== undefined) {
                const connection = yield this.privConnectionConfigurationPromise;
                yield connection.dispose(reason);
            }
        });
    }
    connect() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.connectImpl();
        });
    }
    sendNetworkMessage(path, payload) {
        return __awaiter(this, void 0, void 0, function* () {
            const type = typeof payload === "string" ? _common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text : _common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Binary;
            const contentType = typeof payload === "string" ? "application/json" : "";
            const connection = yield this.fetchConnection();
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_3__["SpeechConnectionMessage"](type, path, this.privSynthesisTurn.requestId, contentType, payload));
        });
    }
    Speak(text, isSSML, requestId, successCallback, errorCallBack, audioDestination) {
        return __awaiter(this, void 0, void 0, function* () {
            let ssml;
            if (isSSML) {
                ssml = text;
            }
            else {
                ssml = this.privSpeechSynthesizer.buildSsml(text);
            }
            if (this.speakOverride !== undefined) {
                return this.speakOverride(ssml, requestId, successCallback, errorCallBack);
            }
            this.privSuccessCallback = successCallback;
            this.privErrorCallback = errorCallBack;
            this.privSynthesisTurn.startNewSynthesis(requestId, text, isSSML, audioDestination);
            try {
                yield this.connectImpl();
                const connection = yield this.fetchConnection();
                yield this.sendSynthesisContext(connection);
                yield this.sendSsmlMessage(connection, ssml, requestId);
                const synthesisStartEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechSynthesisEventArgs"](new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechSynthesisResult"](requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].SynthesizingAudioStarted));
                if (!!this.privSpeechSynthesizer.synthesisStarted) {
                    this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer, synthesisStartEventArgs);
                }
                void this.receiveMessage();
            }
            catch (e) {
                this.cancelSynthesisLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"].ConnectionFailure, e);
                return Promise.reject(e);
            }
        });
    }
    // Cancels synthesis.
    cancelSynthesis(requestId, cancellationReason, errorCode, error) {
        const properties = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyCollection"]();
        properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCodePropertyName"], _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"][errorCode]);
        const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechSynthesisResult"](requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].Canceled, undefined, error, properties);
        if (!!this.privSpeechSynthesizer.SynthesisCanceled) {
            const cancelEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechSynthesisEventArgs"](result);
            try {
                this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer, cancelEvent);
                /* eslint-disable no-empty */
            }
            catch (_a) { }
        }
        if (!!this.privSuccessCallback) {
            try {
                this.privSuccessCallback(result);
                /* eslint-disable no-empty */
            }
            catch (_b) { }
        }
    }
    // Cancels synthesis.
    cancelSynthesisLocal(cancellationReason, errorCode, error) {
        if (!!this.privSynthesisTurn.isSynthesizing) {
            this.privSynthesisTurn.onStopSynthesizing();
            this.cancelSynthesis(this.privSynthesisTurn.requestId, cancellationReason, errorCode, error);
        }
    }
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    processTypeSpecificMessages(connectionMessage) {
        return true;
    }
    receiveMessage() {
        return __awaiter(this, void 0, void 0, function* () {
            try {
                const connection = yield this.fetchConnection();
                const message = yield connection.read();
                if (this.receiveMessageOverride !== undefined) {
                    return this.receiveMessageOverride();
                }
                if (this.privIsDisposed) {
                    // We're done.
                    return;
                }
                // indicates we are draining the queue and it came with no message;
                if (!message) {
                    if (!this.privSynthesisTurn.isSynthesizing) {
                        return;
                    }
                    else {
                        return this.receiveMessage();
                    }
                }
                const connectionMessage = _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_3__["SpeechConnectionMessage"].fromConnectionMessage(message);
                if (connectionMessage.requestId.toLowerCase() === this.privSynthesisTurn.requestId.toLowerCase()) {
                    switch (connectionMessage.path.toLowerCase()) {
                        case "turn.start":
                            this.privSynthesisTurn.onServiceTurnStartResponse();
                            break;
                        case "response":
                            this.privSynthesisTurn.onServiceResponseMessage(connectionMessage.textBody);
                            break;
                        case "audio":
                            if (this.privSynthesisTurn.streamId.toLowerCase() === connectionMessage.streamId.toLowerCase()
                                && !!connectionMessage.binaryBody) {
                                this.privSynthesisTurn.onAudioChunkReceived(connectionMessage.binaryBody);
                                if (!!this.privSpeechSynthesizer.synthesizing) {
                                    try {
                                        const audioWithHeader = SynthesisAdapterBase.addHeader(connectionMessage.binaryBody, this.privSynthesisTurn.audioOutputFormat);
                                        const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechSynthesisEventArgs"](new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechSynthesisResult"](this.privSynthesisTurn.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].SynthesizingAudio, audioWithHeader));
                                        this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer, ev);
                                    }
                                    catch (error) {
                                        // Not going to let errors in the event handler
                                        // trip things up.
                                    }
                                }
                                if (this.privSessionAudioDestination !== undefined) {
                                    this.privSessionAudioDestination.write(connectionMessage.binaryBody);
                                }
                            }
                            break;
                        case "audio.metadata":
                            const metadataList = _Exports__WEBPACK_IMPORTED_MODULE_2__["SynthesisAudioMetadata"].fromJSON(connectionMessage.textBody).Metadata;
                            for (const metadata of metadataList) {
                                switch (metadata.Type) {
                                    case _Exports__WEBPACK_IMPORTED_MODULE_2__["MetadataType"].WordBoundary:
                                    case _Exports__WEBPACK_IMPORTED_MODULE_2__["MetadataType"].SentenceBoundary:
                                        this.privSynthesisTurn.onTextBoundaryEvent(metadata);
                                        const wordBoundaryEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechSynthesisWordBoundaryEventArgs"](metadata.Data.Offset, metadata.Data.Duration, metadata.Data.text.Text, metadata.Data.text.Length, metadata.Type === _Exports__WEBPACK_IMPORTED_MODULE_2__["MetadataType"].WordBoundary
                                            ? this.privSynthesisTurn.currentTextOffset : this.privSynthesisTurn.currentSentenceOffset, metadata.Data.text.BoundaryType);
                                        if (!!this.privSpeechSynthesizer.wordBoundary) {
                                            try {
                                                this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer, wordBoundaryEventArgs);
                                            }
                                            catch (error) {
                                                // Not going to let errors in the event handler
                                                // trip things up.
                                            }
                                        }
                                        break;
                                    case _Exports__WEBPACK_IMPORTED_MODULE_2__["MetadataType"].Bookmark:
                                        const bookmarkEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechSynthesisBookmarkEventArgs"](metadata.Data.Offset, metadata.Data.Bookmark);
                                        if (!!this.privSpeechSynthesizer.bookmarkReached) {
                                            try {
                                                this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer, bookmarkEventArgs);
                                            }
                                            catch (error) {
                                                // Not going to let errors in the event handler
                                                // trip things up.
                                            }
                                        }
                                        break;
                                    case _Exports__WEBPACK_IMPORTED_MODULE_2__["MetadataType"].Viseme:
                                        this.privSynthesisTurn.onVisemeMetadataReceived(metadata);
                                        if (metadata.Data.IsLastAnimation) {
                                            const visemeEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechSynthesisVisemeEventArgs"](metadata.Data.Offset, metadata.Data.VisemeId, this.privSynthesisTurn.getAndClearVisemeAnimation());
                                            if (!!this.privSpeechSynthesizer.visemeReceived) {
                                                try {
                                                    this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer, visemeEventArgs);
                                                }
                                                catch (error) {
                                                    // Not going to let errors in the event handler
                                                    // trip things up.
                                                }
                                            }
                                        }
                                        break;
                                    case _Exports__WEBPACK_IMPORTED_MODULE_2__["MetadataType"].SessionEnd:
                                        this.privSynthesisTurn.onSessionEnd(metadata);
                                        break;
                                }
                            }
                            break;
                        case "turn.end":
                            this.privSynthesisTurn.onServiceTurnEndResponse();
                            let result;
                            try {
                                const audioBuffer = yield this.privSynthesisTurn.getAllReceivedAudioWithHeader();
                                result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechSynthesisResult"](this.privSynthesisTurn.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].SynthesizingAudioCompleted, audioBuffer, undefined, undefined, this.privSynthesisTurn.audioDuration);
                                if (!!this.privSuccessCallback) {
                                    this.privSuccessCallback(result);
                                }
                            }
                            catch (error) {
                                if (!!this.privErrorCallback) {
                                    this.privErrorCallback(error);
                                }
                            }
                            if (this.privSpeechSynthesizer.synthesisCompleted) {
                                try {
                                    this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer, new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechSynthesisEventArgs"](result));
                                }
                                catch (e) {
                                    // Not going to let errors in the event handler
                                    // trip things up.
                                }
                            }
                            break;
                        default:
                            if (!this.processTypeSpecificMessages(connectionMessage)) {
                                // here are some messages that the derived class has not processed, dispatch them to connect class
                                if (!!this.privServiceEvents) {
                                    this.serviceEvents.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ServiceEvent"](connectionMessage.path.toLowerCase(), connectionMessage.textBody));
                                }
                            }
                    }
                }
                return this.receiveMessage();
            }
            catch (e) {
                // TODO: What goes here?
            }
        });
    }
    sendSynthesisContext(connection) {
        const synthesisContextJson = this.synthesisContext.toJSON();
        if (synthesisContextJson) {
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_3__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text, "synthesis.context", this.privSynthesisTurn.requestId, "application/json", synthesisContextJson));
        }
        return;
    }
    connectImpl(isUnAuthorized = false) {
        if (this.privConnectionPromise != null) {
            return this.privConnectionPromise.then((connection) => {
                if (connection.state() === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionState"].Disconnected) {
                    this.privConnectionId = null;
                    this.privConnectionPromise = null;
                    return this.connectImpl();
                }
                return this.privConnectionPromise;
            }, () => {
                this.privConnectionId = null;
                this.privConnectionPromise = null;
                return this.connectImpl();
            });
        }
        this.privAuthFetchEventId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        this.privConnectionId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);
        const authPromise = isUnAuthorized ? this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId) : this.privAuthentication.fetch(this.privAuthFetchEventId);
        this.privConnectionPromise = authPromise.then((result) => __awaiter(this, void 0, void 0, function* () {
            this.privSynthesisTurn.onAuthCompleted(false);
            const connection = this.privConnectionFactory.create(this.privSynthesizerConfig, result, this.privConnectionId);
            // Attach to the underlying event. No need to hold onto the detach pointers as in the event the connection goes away,
            // it'll stop sending events.
            connection.events.attach((event) => {
                this.connectionEvents.onEvent(event);
            });
            const response = yield connection.open();
            if (response.statusCode === 200) {
                this.privSynthesisTurn.onConnectionEstablishCompleted(response.statusCode);
                return Promise.resolve(connection);
            }
            else if (response.statusCode === 403 && !isUnAuthorized) {
                return this.connectImpl(true);
            }
            else {
                this.privSynthesisTurn.onConnectionEstablishCompleted(response.statusCode);
                return Promise.reject(`Unable to contact server. StatusCode: ${response.statusCode}, ${this.privSynthesizerConfig.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Endpoint)} Reason: ${response.reason}`);
            }
        }), (error) => {
            this.privSynthesisTurn.onAuthCompleted(true);
            throw new Error(error);
        });
        // Attach an empty handler to allow the promise to run in the background while
        // other startup events happen. It'll eventually be awaited on.
        // eslint-disable-next-line @typescript-eslint/no-empty-function
        this.privConnectionPromise.catch(() => { });
        return this.privConnectionPromise;
    }
    sendSpeechServiceConfig(connection, SpeechServiceConfigJson) {
        if (SpeechServiceConfigJson) {
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_3__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text, "speech.config", this.privSynthesisTurn.requestId, "application/json", SpeechServiceConfigJson));
        }
    }
    sendSsmlMessage(connection, ssml, requestId) {
        return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_3__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text, "ssml", requestId, "application/ssml+xml", ssml));
    }
    fetchConnection() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privConnectionConfigurationPromise !== undefined) {
                return this.privConnectionConfigurationPromise.then((connection) => {
                    if (connection.state() === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionState"].Disconnected) {
                        this.privConnectionId = null;
                        this.privConnectionConfigurationPromise = undefined;
                        return this.fetchConnection();
                    }
                    return this.privConnectionConfigurationPromise;
                }, () => {
                    this.privConnectionId = null;
                    this.privConnectionConfigurationPromise = undefined;
                    return this.fetchConnection();
                });
            }
            this.privConnectionConfigurationPromise = this.configureConnection();
            return yield this.privConnectionConfigurationPromise;
        });
    }
    // Takes an established websocket connection to the endpoint and sends speech configuration information.
    configureConnection() {
        return __awaiter(this, void 0, void 0, function* () {
            const connection = yield this.connectImpl();
            if (this.configConnectionOverride !== undefined) {
                return this.configConnectionOverride(connection);
            }
            yield this.sendSpeechServiceConfig(connection, this.privSynthesizerConfig.SpeechServiceConfig.serialize());
            return connection;
        });
    }
}
SynthesisAdapterBase.telemetryDataEnabled = true;

//# sourceMappingURL=SynthesisAdapterBase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisContext.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisContext.js ***!
  \******************************************************************************************************************/
/*! exports provided: SynthesisContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SynthesisContext", function() { return SynthesisContext; });
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Represents the JSON used in the synthesis.context message sent to the speech service.
 * The dynamic grammar is always refreshed from the encapsulated dynamic grammar object.
 */
class SynthesisContext {
    constructor(speechSynthesizer) {
        this.privContext = {};
        this.privSpeechSynthesizer = speechSynthesizer;
    }
    /**
     * Adds a section to the synthesis.context object.
     * @param sectionName Name of the section to add.
     * @param value JSON serializable object that represents the value.
     */
    setSection(sectionName, value) {
        this.privContext[sectionName] = value;
    }
    /**
     * Sets the audio output format for synthesis context generation.
     * @param format {AudioOutputFormatImpl} the output format
     */
    set audioOutputFormat(format) {
        this.privAudioOutputFormat = format;
    }
    toJSON() {
        const synthesisSection = this.buildSynthesisContext();
        this.setSection("synthesis", synthesisSection);
        return JSON.stringify(this.privContext);
    }
    buildSynthesisContext() {
        return {
            audio: {
                metadataOptions: {
                    bookmarkEnabled: (!!this.privSpeechSynthesizer.bookmarkReached),
                    punctuationBoundaryEnabled: this.privSpeechSynthesizer.properties.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceResponse_RequestPunctuationBoundary, (!!this.privSpeechSynthesizer.wordBoundary)),
                    sentenceBoundaryEnabled: this.privSpeechSynthesizer.properties.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceResponse_RequestSentenceBoundary, false),
                    sessionEndEnabled: true,
                    visemeEnabled: (!!this.privSpeechSynthesizer.visemeReceived),
                    wordBoundaryEnabled: this.privSpeechSynthesizer.properties.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceResponse_RequestWordBoundary, (!!this.privSpeechSynthesizer.wordBoundary)),
                },
                outputFormat: this.privAudioOutputFormat.requestAudioFormatString,
            },
            language: {
                autoDetection: this.privSpeechSynthesizer.autoDetectSourceLanguage
            }
        };
    }
}

//# sourceMappingURL=SynthesisContext.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisEvents.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisEvents.js ***!
  \*****************************************************************************************************************/
/*! exports provided: SpeechSynthesisEvent, SynthesisTriggeredEvent, ConnectingToSynthesisServiceEvent, SynthesisStartedEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisEvent", function() { return SpeechSynthesisEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SynthesisTriggeredEvent", function() { return SynthesisTriggeredEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectingToSynthesisServiceEvent", function() { return ConnectingToSynthesisServiceEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SynthesisStartedEvent", function() { return SynthesisStartedEvent; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */

class SpeechSynthesisEvent extends _common_Exports__WEBPACK_IMPORTED_MODULE_0__["PlatformEvent"] {
    constructor(eventName, requestId, eventType = _common_Exports__WEBPACK_IMPORTED_MODULE_0__["EventType"].Info) {
        super(eventName, eventType);
        this.privRequestId = requestId;
    }
    get requestId() {
        return this.privRequestId;
    }
}
class SynthesisTriggeredEvent extends SpeechSynthesisEvent {
    constructor(requestId, sessionAudioDestinationId, turnAudioDestinationId) {
        super("SynthesisTriggeredEvent", requestId);
        this.privSessionAudioDestinationId = sessionAudioDestinationId;
        this.privTurnAudioDestinationId = turnAudioDestinationId;
    }
    get audioSessionDestinationId() {
        return this.privSessionAudioDestinationId;
    }
    get audioTurnDestinationId() {
        return this.privTurnAudioDestinationId;
    }
}
class ConnectingToSynthesisServiceEvent extends SpeechSynthesisEvent {
    constructor(requestId, authFetchEventId) {
        super("ConnectingToSynthesisServiceEvent", requestId);
        this.privAuthFetchEventId = authFetchEventId;
    }
    get authFetchEventId() {
        return this.privAuthFetchEventId;
    }
}
class SynthesisStartedEvent extends SpeechSynthesisEvent {
    constructor(requestId, authFetchEventId) {
        super("SynthesisStartedEvent", requestId);
        this.privAuthFetchEventId = authFetchEventId;
    }
    get authFetchEventId() {
        return this.privAuthFetchEventId;
    }
}

//# sourceMappingURL=SynthesisEvents.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisRestAdapter.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisRestAdapter.js ***!
  \**********************************************************************************************************************/
/*! exports provided: SynthesisRestAdapter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SynthesisRestAdapter", function() { return SynthesisRestAdapter; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");




/**
 * Implements methods for speaker recognition classes, sending requests to endpoint
 * and parsing response into expected format
 * @class SynthesisRestAdapter
 */
class SynthesisRestAdapter {
    constructor(config, authentication) {
        let endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Endpoint, undefined);
        if (!endpoint) {
            const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Region, "westus");
            const hostSuffix = _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_2__["ConnectionFactoryBase"].getHostSuffix(region);
            endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Host, `https://${region}.tts.speech${hostSuffix}`);
        }
        this.privUri = `${endpoint}/cognitiveservices/voices/list`;
        const options = _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestConfigBase"].requestOptions;
        this.privRestAdapter = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestMessageAdapter"](options);
        this.privAuthentication = authentication;
    }
    /**
     * Sends list voices request to endpoint.
     * @function
     * @public
     * @param connectionId - guid for connectionId
     * @returns {Promise<IRestResponse>} rest response to status request
     */
    getVoicesList(connectionId) {
        this.privRestAdapter.setHeaders(_HeaderNames__WEBPACK_IMPORTED_MODULE_3__["HeaderNames"].ConnectionId, connectionId);
        return this.privAuthentication.fetch(connectionId).then((authInfo) => {
            this.privRestAdapter.setHeaders(authInfo.headerName, authInfo.token);
            return this.privRestAdapter.request(_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestRequestType"].Get, this.privUri);
        });
    }
}

//# sourceMappingURL=SynthesisRestAdapter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisTurn.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisTurn.js ***!
  \***************************************************************************************************************/
/*! exports provided: SynthesisTurn */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SynthesisTurn", function() { return SynthesisTurn; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _sdk_Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Audio/AudioOutputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js");
/* harmony import */ var _ServiceMessages_SynthesisAudioMetadata__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ServiceMessages/SynthesisAudioMetadata */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SynthesisAudioMetadata.js");
/* harmony import */ var _SynthesisAdapterBase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./SynthesisAdapterBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisAdapterBase.js");
/* harmony import */ var _SynthesisEvents__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SynthesisEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisEvents.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





class SynthesisTurn {
    constructor() {
        this.privIsDisposed = false;
        this.privIsSynthesizing = false;
        this.privIsSynthesisEnded = false;
        this.privBytesReceived = 0;
        this.privInTurn = false;
        this.privTextOffset = 0;
        this.privNextSearchTextIndex = 0;
        this.privSentenceOffset = 0;
        this.privNextSearchSentenceIndex = 0;
        this.privRequestId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        this.privTurnDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
        // We're not in a turn, so resolve.
        this.privTurnDeferral.resolve();
    }
    get requestId() {
        return this.privRequestId;
    }
    get streamId() {
        return this.privStreamId;
    }
    set streamId(value) {
        this.privStreamId = value;
    }
    get audioOutputFormat() {
        return this.privAudioOutputFormat;
    }
    set audioOutputFormat(format) {
        this.privAudioOutputFormat = format;
    }
    get turnCompletionPromise() {
        return this.privTurnDeferral.promise;
    }
    get isSynthesisEnded() {
        return this.privIsSynthesisEnded;
    }
    get isSynthesizing() {
        return this.privIsSynthesizing;
    }
    get currentTextOffset() {
        return this.privTextOffset;
    }
    get currentSentenceOffset() {
        return this.privSentenceOffset;
    }
    // The number of bytes received for current turn
    get bytesReceived() {
        return this.privBytesReceived;
    }
    get audioDuration() {
        return this.privAudioDuration;
    }
    getAllReceivedAudio() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!!this.privReceivedAudio) {
                return Promise.resolve(this.privReceivedAudio);
            }
            if (!this.privIsSynthesisEnded) {
                return null;
            }
            yield this.readAllAudioFromStream();
            return Promise.resolve(this.privReceivedAudio);
        });
    }
    getAllReceivedAudioWithHeader() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!!this.privReceivedAudioWithHeader) {
                return this.privReceivedAudioWithHeader;
            }
            if (!this.privIsSynthesisEnded) {
                return null;
            }
            if (this.audioOutputFormat.hasHeader) {
                const audio = yield this.getAllReceivedAudio();
                this.privReceivedAudioWithHeader = _SynthesisAdapterBase__WEBPACK_IMPORTED_MODULE_3__["SynthesisAdapterBase"].addHeader(audio, this.audioOutputFormat);
                return this.privReceivedAudioWithHeader;
            }
            else {
                return this.getAllReceivedAudio();
            }
        });
    }
    startNewSynthesis(requestId, rawText, isSSML, audioDestination) {
        this.privIsSynthesisEnded = false;
        this.privIsSynthesizing = true;
        this.privRequestId = requestId;
        this.privRawText = rawText;
        this.privIsSSML = isSSML;
        this.privAudioOutputStream = new _sdk_Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_1__["PullAudioOutputStreamImpl"]();
        this.privAudioOutputStream.format = this.privAudioOutputFormat;
        this.privReceivedAudio = null;
        this.privReceivedAudioWithHeader = null;
        this.privBytesReceived = 0;
        this.privTextOffset = 0;
        this.privNextSearchTextIndex = 0;
        this.privSentenceOffset = 0;
        this.privNextSearchSentenceIndex = 0;
        this.privPartialVisemeAnimation = "";
        if (audioDestination !== undefined) {
            this.privTurnAudioDestination = audioDestination;
            this.privTurnAudioDestination.format = this.privAudioOutputFormat;
        }
        this.onEvent(new _SynthesisEvents__WEBPACK_IMPORTED_MODULE_4__["SynthesisTriggeredEvent"](this.requestId, undefined, audioDestination === undefined ? undefined : audioDestination.id()));
    }
    onPreConnectionStart(authFetchEventId) {
        this.privAuthFetchEventId = authFetchEventId;
        this.onEvent(new _SynthesisEvents__WEBPACK_IMPORTED_MODULE_4__["ConnectingToSynthesisServiceEvent"](this.privRequestId, this.privAuthFetchEventId));
    }
    onAuthCompleted(isError) {
        if (isError) {
            this.onComplete();
        }
    }
    onConnectionEstablishCompleted(statusCode) {
        if (statusCode === 200) {
            this.onEvent(new _SynthesisEvents__WEBPACK_IMPORTED_MODULE_4__["SynthesisStartedEvent"](this.requestId, this.privAuthFetchEventId));
            this.privBytesReceived = 0;
            return;
        }
        else if (statusCode === 403) {
            this.onComplete();
        }
    }
    onServiceResponseMessage(responseJson) {
        const response = JSON.parse(responseJson);
        this.streamId = response.audio.streamId;
    }
    onServiceTurnEndResponse() {
        this.privInTurn = false;
        this.privTurnDeferral.resolve();
        this.onComplete();
    }
    onServiceTurnStartResponse() {
        if (!!this.privTurnDeferral && !!this.privInTurn) {
            // What? How are we starting a turn with another not done?
            this.privTurnDeferral.reject("Another turn started before current completed.");
            // Avoid UnhandledPromiseRejection if privTurnDeferral is not being awaited
            // eslint-disable-next-line @typescript-eslint/no-empty-function
            this.privTurnDeferral.promise.then().catch(() => { });
        }
        this.privInTurn = true;
        this.privTurnDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
    }
    onAudioChunkReceived(data) {
        if (this.isSynthesizing) {
            this.privAudioOutputStream.write(data);
            this.privBytesReceived += data.byteLength;
            if (this.privTurnAudioDestination !== undefined) {
                this.privTurnAudioDestination.write(data);
            }
        }
    }
    onTextBoundaryEvent(metadata) {
        this.updateTextOffset(metadata.Data.text.Text, metadata.Type);
    }
    onVisemeMetadataReceived(metadata) {
        if (metadata.Data.AnimationChunk !== undefined) {
            this.privPartialVisemeAnimation += metadata.Data.AnimationChunk;
        }
    }
    onSessionEnd(metadata) {
        this.privAudioDuration = metadata.Data.Offset;
    }
    dispose() {
        if (!this.privIsDisposed) {
            // we should have completed by now. If we did not its an unknown error.
            this.privIsDisposed = true;
        }
    }
    onStopSynthesizing() {
        this.onComplete();
    }
    /**
     * Gets the viseme animation string (merged from animation chunk), and clears the internal
     * partial animation.
     */
    getAndClearVisemeAnimation() {
        const animation = this.privPartialVisemeAnimation;
        this.privPartialVisemeAnimation = "";
        return animation;
    }
    onEvent(event) {
        _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Events"].instance.onEvent(event);
    }
    /**
     * Check if the text is an XML(SSML) tag
     * @param text
     * @private
     */
    static isXmlTag(text) {
        return text.length >= 2 && text[0] === "<" && text[text.length - 1] === ">";
    }
    updateTextOffset(text, type) {
        if (type === _ServiceMessages_SynthesisAudioMetadata__WEBPACK_IMPORTED_MODULE_2__["MetadataType"].WordBoundary) {
            this.privTextOffset = this.privRawText.indexOf(text, this.privNextSearchTextIndex);
            if (this.privTextOffset >= 0) {
                this.privNextSearchTextIndex = this.privTextOffset + text.length;
                if (this.privIsSSML) {
                    if (this.withinXmlTag(this.privTextOffset) && !SynthesisTurn.isXmlTag(text)) {
                        this.updateTextOffset(text, type);
                    }
                }
            }
        }
        else {
            this.privSentenceOffset = this.privRawText.indexOf(text, this.privNextSearchSentenceIndex);
            if (this.privSentenceOffset >= 0) {
                this.privNextSearchSentenceIndex = this.privSentenceOffset + text.length;
                if (this.privIsSSML) {
                    if (this.withinXmlTag(this.privSentenceOffset) && !SynthesisTurn.isXmlTag(text)) {
                        this.updateTextOffset(text, type);
                    }
                }
            }
        }
    }
    onComplete() {
        if (this.privIsSynthesizing) {
            this.privIsSynthesizing = false;
            this.privIsSynthesisEnded = true;
            this.privAudioOutputStream.close();
            this.privInTurn = false;
            if (this.privTurnAudioDestination !== undefined) {
                this.privTurnAudioDestination.close();
                this.privTurnAudioDestination = undefined;
            }
        }
    }
    readAllAudioFromStream() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privIsSynthesisEnded) {
                this.privReceivedAudio = new ArrayBuffer(this.bytesReceived);
                try {
                    yield this.privAudioOutputStream.read(this.privReceivedAudio);
                }
                catch (e) {
                    this.privReceivedAudio = new ArrayBuffer(0);
                }
            }
        });
    }
    /**
     * Check if current idx is in XML(SSML) tag
     * @param idx
     * @private
     */
    withinXmlTag(idx) {
        return this.privRawText.indexOf("<", idx + 1) > this.privRawText.indexOf(">", idx + 1);
    }
}

//# sourceMappingURL=SynthesisTurn.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesizerConfig.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesizerConfig.js ***!
  \*******************************************************************************************************************/
/*! exports provided: SynthesisServiceType, SynthesizerConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SynthesisServiceType", function() { return SynthesisServiceType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SynthesizerConfig", function() { return SynthesizerConfig; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

var SynthesisServiceType;
(function (SynthesisServiceType) {
    SynthesisServiceType[SynthesisServiceType["Standard"] = 0] = "Standard";
    SynthesisServiceType[SynthesisServiceType["Custom"] = 1] = "Custom";
})(SynthesisServiceType || (SynthesisServiceType = {}));
class SynthesizerConfig {
    constructor(speechServiceConfig, parameters) {
        this.privSynthesisServiceType = SynthesisServiceType.Standard;
        this.privSpeechServiceConfig = speechServiceConfig ? speechServiceConfig : new _Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechServiceConfig"](new _Exports__WEBPACK_IMPORTED_MODULE_0__["Context"](null));
        this.privParameters = parameters;
    }
    get parameters() {
        return this.privParameters;
    }
    get synthesisServiceType() {
        return this.privSynthesisServiceType;
    }
    set synthesisServiceType(value) {
        this.privSynthesisServiceType = value;
    }
    get SpeechServiceConfig() {
        return this.privSpeechServiceConfig;
    }
}

//# sourceMappingURL=SynthesizerConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranscriberConnectionFactory.js":
/*!******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranscriberConnectionFactory.js ***!
  \******************************************************************************************************************************/
/*! exports provided: TranscriberConnectionFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranscriberConnectionFactory", function() { return TranscriberConnectionFactory; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
/* harmony import */ var _QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./QueryParameterNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.






class TranscriberConnectionFactory extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_2__["ConnectionFactoryBase"] {
    constructor() {
        super(...arguments);
        this.multiaudioRelativeUri = "/speech/recognition/multiaudio";
    }
    create(config, authInfo, connectionId) {
        let endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Endpoint, undefined);
        const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Region, "centralus");
        const hostSuffix = _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_2__["ConnectionFactoryBase"].getHostSuffix(region);
        const hostDefault = "wss://transcribe." + region + ".cts.speech" + hostSuffix + this.multiaudioRelativeUri;
        const host = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Host, hostDefault);
        const queryParams = {};
        this.setQueryParams(queryParams, config, endpoint);
        if (!endpoint) {
            endpoint = host;
        }
        const headers = {};
        if (authInfo.token !== undefined && authInfo.token !== "") {
            headers[authInfo.headerName] = authInfo.token;
        }
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_4__["HeaderNames"].ConnectionId] = connectionId;
        config.parameters.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Url, endpoint);
        const enableCompression = config.parameters.getProperty("SPEECH-EnableWebsocketCompression", "false") === "true";
        return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["WebsocketConnection"](endpoint, queryParams, headers, new _Exports__WEBPACK_IMPORTED_MODULE_3__["WebsocketMessageFormatter"](), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ProxyInfo"].fromRecognizerConfig(config), enableCompression, connectionId);
    }
    setQueryParams(queryParams, config, endpointUrl) {
        const endpointId = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_EndpointId, undefined);
        const language = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_RecoLanguage, undefined);
        if (endpointId && !(_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].CustomSpeechDeploymentId in queryParams)) {
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].CustomSpeechDeploymentId] = endpointId;
        }
        if (language && !(_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].Language in queryParams)) {
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].Language] = language;
        }
        const wordLevelTimings = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceResponse_RequestWordLevelTimestamps, "false").toLowerCase() === "true";
        const detailed = config.parameters.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["OutputFormatPropertyName"], _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["OutputFormat"][_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["OutputFormat"].Simple]) !== _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["OutputFormat"][_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["OutputFormat"].Simple];
        if (wordLevelTimings || detailed) {
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].Format] = _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["OutputFormat"][_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["OutputFormat"].Detailed].toLowerCase();
        }
        this.setCommonUrlParams(config, queryParams, endpointUrl);
    }
}

//# sourceMappingURL=TranscriberConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionConfig.js":
/*!********************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionConfig.js ***!
  \********************************************************************************************************************************************/
/*! exports provided: ConversationConnectionConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationConnectionConfig", function() { return ConversationConnectionConfig; });
/* harmony import */ var _common_browser_RestConfigBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common.browser/RestConfigBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/RestConfigBase.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class ConversationConnectionConfig extends _common_browser_RestConfigBase__WEBPACK_IMPORTED_MODULE_0__["RestConfigBase"] {
    static get host() {
        return ConversationConnectionConfig.privHost;
    }
    static get apiVersion() {
        return ConversationConnectionConfig.privApiVersion;
    }
    static get clientAppId() {
        return ConversationConnectionConfig.privClientAppId;
    }
    static get defaultLanguageCode() {
        return ConversationConnectionConfig.privDefaultLanguageCode;
    }
    static get restPath() {
        return ConversationConnectionConfig.privRestPath;
    }
    static get webSocketPath() {
        return ConversationConnectionConfig.privWebSocketPath;
    }
    static get transcriptionEventKeys() {
        return ConversationConnectionConfig.privTranscriptionEventKeys;
    }
}
ConversationConnectionConfig.privHost = "dev.microsofttranslator.com";
ConversationConnectionConfig.privRestPath = "/capito/room";
ConversationConnectionConfig.privApiVersion = "2.0";
ConversationConnectionConfig.privDefaultLanguageCode = "en-US";
ConversationConnectionConfig.privClientAppId = "FC539C22-1767-4F1F-84BC-B4D811114F15";
ConversationConnectionConfig.privWebSocketPath = "/capito/translate";
ConversationConnectionConfig.privTranscriptionEventKeys = ["iCalUid", "callId", "organizer", "FLAC", "MTUri", "DifferentiateGuestSpeakers", "audiorecording", "Threadid", "OrganizerMri", "OrganizerTenantId", "UserToken"];

//# sourceMappingURL=ConversationConnectionConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionFactory.js":
/*!*********************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionFactory.js ***!
  \*********************************************************************************************************************************************/
/*! exports provided: ConversationConnectionFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationConnectionFactory", function() { return ConversationConnectionFactory; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../sdk/Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ConversationConnectionConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionConfig.js");
/* harmony import */ var _ConversationWebsocketMessageFormatter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ConversationWebsocketMessageFormatter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationWebsocketMessageFormatter.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.







/**
 * Create a connection to the Conversation Translator websocket for sending instant messages and commands, and for receiving translated messages.
 * The conversation must already have been started or joined.
 */
class ConversationConnectionFactory extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_4__["ConnectionFactoryBase"] {
    create(config, authInfo, connectionId) {
        const endpointHost = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].ConversationTranslator_Host, _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_5__["ConversationConnectionConfig"].host);
        const correlationId = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].ConversationTranslator_CorrelationId, Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["createGuid"])());
        const endpoint = `wss://${endpointHost}${_ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_5__["ConversationConnectionConfig"].webSocketPath}`;
        const token = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].ConversationTranslator_Token, undefined);
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(token, "token");
        const queryParams = {};
        queryParams[_ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_5__["ConversationConnectionConfig"].configParams.apiVersion] = _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_5__["ConversationConnectionConfig"].apiVersion;
        queryParams[_ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_5__["ConversationConnectionConfig"].configParams.token] = token;
        queryParams[_ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_5__["ConversationConnectionConfig"].configParams.correlationId] = correlationId;
        const enableCompression = config.parameters.getProperty("SPEECH-EnableWebsocketCompression", "false") === "true";
        return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["WebsocketConnection"](endpoint, queryParams, {}, new _ConversationWebsocketMessageFormatter__WEBPACK_IMPORTED_MODULE_6__["ConversationWebsocketMessageFormatter"](), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ProxyInfo"].fromRecognizerConfig(config), enableCompression, connectionId);
    }
}

//# sourceMappingURL=ConversationConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionMessage.js":
/*!*********************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionMessage.js ***!
  \*********************************************************************************************************************************************/
/*! exports provided: ConversationConnectionMessage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationConnectionMessage", function() { return ConversationConnectionMessage; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class ConversationConnectionMessage extends _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionMessage"] {
    constructor(messageType, body, headers, id) {
        super(messageType, body, headers, id);
        const json = JSON.parse(this.textBody);
        if (json.type !== undefined) {
            this.privConversationMessageType = json.type;
        }
    }
    get conversationMessageType() {
        return this.privConversationMessageType;
    }
}

//# sourceMappingURL=ConversationConnectionMessage.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationManager.js":
/*!***********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationManager.js ***!
  \***********************************************************************************************************************************/
/*! exports provided: ConversationManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationManager", function() { return ConversationManager; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../sdk/Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ConversationConnectionConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionConfig.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.




class ConversationManager {
    constructor() {
        //
        this.privRequestParams = _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_3__["ConversationConnectionConfig"].configParams;
        this.privErrors = _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_3__["ConversationConnectionConfig"].restErrors;
        this.privHost = _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_3__["ConversationConnectionConfig"].host;
        this.privApiVersion = _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_3__["ConversationConnectionConfig"].apiVersion;
        this.privRestPath = _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_3__["ConversationConnectionConfig"].restPath;
        this.privRestAdapter = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestMessageAdapter"]({});
    }
    /**
     * Make a POST request to the Conversation Manager service endpoint to create or join a conversation.
     * @param args
     * @param conversationCode
     * @param callback
     * @param errorCallback
     */
    createOrJoin(args, conversationCode, cb, err) {
        try {
            _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrUndefined(args, "args");
            const languageCode = args.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage, _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_3__["ConversationConnectionConfig"].defaultLanguageCode);
            const nickname = args.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].ConversationTranslator_Name, "conversation_host");
            const endpointHost = args.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].ConversationTranslator_Host, this.privHost);
            const correlationId = args.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].ConversationTranslator_CorrelationId);
            const subscriptionKey = args.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key);
            const subscriptionRegion = args.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region);
            const authToken = args.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token);
            _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(languageCode, "languageCode");
            _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(nickname, "nickname");
            _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(endpointHost, "endpointHost");
            const queryParams = {};
            queryParams[this.privRequestParams.apiVersion] = this.privApiVersion;
            queryParams[this.privRequestParams.languageCode] = languageCode;
            queryParams[this.privRequestParams.nickname] = nickname;
            const headers = {};
            if (correlationId) {
                headers[this.privRequestParams.correlationId] = correlationId;
            }
            headers[this.privRequestParams.clientAppId] = _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_3__["ConversationConnectionConfig"].clientAppId;
            if (conversationCode !== undefined) {
                queryParams[this.privRequestParams.roomId] = conversationCode;
            }
            else {
                _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrUndefined(subscriptionRegion, this.privErrors.authInvalidSubscriptionRegion);
                headers[this.privRequestParams.subscriptionRegion] = subscriptionRegion;
                if (subscriptionKey) {
                    headers[this.privRequestParams.subscriptionKey] = subscriptionKey;
                }
                else if (authToken) {
                    headers[this.privRequestParams.authorization] = `Bearer ${authToken}`;
                }
                else {
                    _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrUndefined(subscriptionKey, this.privErrors.authInvalidSubscriptionKey);
                }
            }
            const config = {};
            config.headers = headers;
            this.privRestAdapter.options = config;
            const endpoint = `https://${endpointHost}${this.privRestPath}`;
            // TODO: support a proxy and certificate validation
            this.privRestAdapter.request(_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestRequestType"].Post, endpoint, queryParams, null).then((response) => {
                const requestId = _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestMessageAdapter"].extractHeaderValue(this.privRequestParams.requestId, response.headers);
                if (!response.ok) {
                    if (!!err) {
                        // get the error
                        let errorMessage = this.privErrors.invalidCreateJoinConversationResponse.replace("{status}", response.status.toString());
                        let errMessageRaw;
                        try {
                            errMessageRaw = JSON.parse(response.data);
                            errorMessage += ` [${errMessageRaw.error.code}: ${errMessageRaw.error.message}]`;
                        }
                        catch (e) {
                            errorMessage += ` [${response.data}]`;
                        }
                        if (requestId) {
                            errorMessage += ` ${requestId}`;
                        }
                        err(errorMessage);
                    }
                    return;
                }
                const conversation = JSON.parse(response.data);
                if (conversation) {
                    conversation.requestId = requestId;
                }
                if (!!cb) {
                    try {
                        cb(conversation);
                    }
                    catch (e) {
                        if (!!err) {
                            err(e);
                        }
                    }
                    cb = undefined;
                }
                // eslint-disable-next-line @typescript-eslint/no-empty-function
            }).catch(() => { });
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
        }
    }
    /**
     * Make a DELETE request to the Conversation Manager service endpoint to leave the conversation.
     * @param args
     * @param sessionToken
     * @param callback
     */
    leave(args, sessionToken) {
        return new Promise((resolve, reject) => {
            try {
                _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrUndefined(args, this.privErrors.invalidArgs.replace("{arg}", "config"));
                _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(sessionToken, this.privErrors.invalidArgs.replace("{arg}", "token"));
                const endpointHost = args.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].ConversationTranslator_Host, this.privHost);
                const correlationId = args.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].ConversationTranslator_CorrelationId);
                const queryParams = {};
                queryParams[this.privRequestParams.apiVersion] = this.privApiVersion;
                queryParams[this.privRequestParams.sessionToken] = sessionToken;
                const headers = {};
                if (correlationId) {
                    headers[this.privRequestParams.correlationId] = correlationId;
                }
                const config = {};
                config.headers = headers;
                this.privRestAdapter.options = config;
                const endpoint = `https://${endpointHost}${this.privRestPath}`;
                // TODO: support a proxy and certificate validation
                this.privRestAdapter.request(_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestRequestType"].Delete, endpoint, queryParams, null).then((response) => {
                    if (!response.ok) {
                        // ignore errors on delete
                    }
                    resolve();
                    // eslint-disable-next-line @typescript-eslint/no-empty-function
                }).catch(() => { });
            }
            catch (error) {
                if (error instanceof Error) {
                    const typedError = error;
                    reject(typedError.name + ": " + typedError.message);
                }
                else {
                    reject(error);
                }
            }
        });
    }
}

//# sourceMappingURL=ConversationManager.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationRequestSession.js":
/*!******************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationRequestSession.js ***!
  \******************************************************************************************************************************************/
/*! exports provided: ConversationRequestSession */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationRequestSession", function() { return ConversationRequestSession; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/**
 * Placeholder class for the Conversation Request Session. Based off RequestSession.
 * TODO: define what telemetry is required.
 */
class ConversationRequestSession {
    constructor(sessionId) {
        this.privIsDisposed = false;
        this.privDetachables = new Array();
        this.privSessionId = sessionId;
        this.privRequestId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        this.privRequestCompletionDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
    }
    get sessionId() {
        return this.privSessionId;
    }
    get requestId() {
        return this.privRequestId;
    }
    get completionPromise() {
        return this.privRequestCompletionDeferral.promise;
    }
    onPreConnectionStart(authFetchEventId, connectionId) {
        this.privSessionId = connectionId;
    }
    onAuthCompleted(isError) {
        if (isError) {
            this.onComplete();
        }
    }
    onConnectionEstablishCompleted(statusCode) {
        if (statusCode === 200) {
            return;
        }
        else if (statusCode === 403) {
            this.onComplete();
        }
    }
    onServiceTurnEndResponse(continuousRecognition) {
        if (!continuousRecognition) {
            this.onComplete();
        }
        else {
            this.privRequestId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        }
    }
    dispose() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.privIsDisposed) {
                // we should have completed by now. If we did not its an unknown error.
                this.privIsDisposed = true;
                for (const detachable of this.privDetachables) {
                    yield detachable.detach();
                }
            }
        });
    }
    onComplete() {
        //
    }
}

//# sourceMappingURL=ConversationRequestSession.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationServiceAdapter.js":
/*!******************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationServiceAdapter.js ***!
  \******************************************************************************************************************************************/
/*! exports provided: ConversationServiceAdapter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationServiceAdapter", function() { return ConversationServiceAdapter; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _ConversationConnectionMessage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ConversationConnectionMessage */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionMessage.js");
/* harmony import */ var _ConversationRequestSession__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ConversationRequestSession */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationRequestSession.js");
/* harmony import */ var _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ConversationTranslatorEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorEventArgs.js");
/* harmony import */ var _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ConversationTranslatorInterfaces */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorInterfaces.js");
/* harmony import */ var _ServiceMessages_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ServiceMessages/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};








/**
 * The service adapter handles sending and receiving messages to the Conversation Translator websocket.
 */
class ConversationServiceAdapter extends _Exports__WEBPACK_IMPORTED_MODULE_2__["ServiceRecognizerBase"] {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, conversationServiceConnector) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, conversationServiceConnector);
        this.privConnectionConfigPromise = undefined;
        this.privLastPartialUtteranceId = "";
        this.privConversationServiceConnector = conversationServiceConnector;
        this.privConversationAuthentication = authentication;
        this.receiveMessageOverride = () => this.receiveConversationMessageOverride();
        this.recognizeOverride = () => this.noOp();
        this.postConnectImplOverride = (connection) => this.conversationConnectImpl(connection);
        this.configConnectionOverride = () => this.configConnection();
        this.disconnectOverride = () => this.privDisconnect();
        this.privConversationRequestSession = new _ConversationRequestSession__WEBPACK_IMPORTED_MODULE_4__["ConversationRequestSession"](Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])());
        this.privConversationConnectionFactory = connectionFactory;
        this.privConversationIsDisposed = false;
    }
    isDisposed() {
        return super.isDisposed() || this.privConversationIsDisposed;
    }
    dispose(reason) {
        const _super = Object.create(null, {
            dispose: { get: () => super.dispose }
        });
        return __awaiter(this, void 0, void 0, function* () {
            this.privConversationIsDisposed = true;
            if (this.privConnectionConfigPromise !== undefined) {
                const connection = yield this.privConnectionConfigPromise;
                yield connection.dispose(reason);
            }
            yield _super.dispose.call(this, reason);
        });
    }
    sendMessage(message) {
        return __awaiter(this, void 0, void 0, function* () {
            const connection = yield this.fetchConnection();
            return connection.send(new _ConversationConnectionMessage__WEBPACK_IMPORTED_MODULE_3__["ConversationConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text, message));
        });
    }
    sendMessageAsync(message) {
        return __awaiter(this, void 0, void 0, function* () {
            const connection = yield this.fetchConnection();
            yield connection.send(new _ConversationConnectionMessage__WEBPACK_IMPORTED_MODULE_3__["ConversationConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text, message));
        });
    }
    privDisconnect() {
        if (this.terminateMessageLoop) {
            return;
        }
        this.cancelRecognition(this.privConversationRequestSession.sessionId, this.privConversationRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"].NoError, "Disconnecting");
        this.terminateMessageLoop = true;
        return Promise.resolve();
    }
    // eslint-disable-next-line @typescript-eslint/require-await
    processTypeSpecificMessages() {
        return __awaiter(this, void 0, void 0, function* () {
            return true;
        });
    }
    // Cancels recognition.
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error) {
        this.terminateMessageLoop = true;
        const cancelEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ConversationTranslationCanceledEventArgs"](cancellationReason, error, errorCode, undefined, sessionId);
        try {
            if (!!this.privConversationServiceConnector.canceled) {
                this.privConversationServiceConnector.canceled(this.privConversationServiceConnector, cancelEvent);
            }
        }
        catch (_a) {
            // continue on error
        }
    }
    noOp() {
        // operation not supported
        return;
    }
    /**
     * Establishes a websocket connection to the end point.
     */
    conversationConnectImpl(connection) {
        return __awaiter(this, void 0, void 0, function* () {
            this.privConnectionLoop = this.startMessageLoop();
            return connection;
        });
    }
    /**
     * Process incoming websocket messages
     */
    receiveConversationMessageOverride() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.isDisposed() || this.terminateMessageLoop) {
                return Promise.resolve();
            }
            // we won't rely on the cascading promises of the connection since we want to continually be available to receive messages
            const communicationCustodian = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
            try {
                const connection = yield this.fetchConnection();
                const message = yield connection.read();
                if (this.isDisposed() || this.terminateMessageLoop) {
                    // We're done.
                    communicationCustodian.resolve();
                    return Promise.resolve();
                }
                if (!message) {
                    return this.receiveConversationMessageOverride();
                }
                const sessionId = this.privConversationRequestSession.sessionId;
                let sendFinal = false;
                try {
                    switch (message.conversationMessageType.toLowerCase()) {
                        case "info":
                        case "participant_command":
                        case "command":
                            const commandPayload = _ServiceMessages_Exports__WEBPACK_IMPORTED_MODULE_7__["CommandResponsePayload"].fromJSON(message.textBody);
                            switch (commandPayload.command.toLowerCase()) {
                                /**
                                 * 'ParticpantList' is the first message sent to the user after the websocket connection has opened.
                                 * The consuming client must wait for this message to arrive
                                 * before starting to send their own data.
                                 */
                                case "participantlist":
                                    const participantsPayload = _ServiceMessages_Exports__WEBPACK_IMPORTED_MODULE_7__["ParticipantsListPayloadResponse"].fromJSON(message.textBody);
                                    const participantsResult = participantsPayload.participants.map((p) => {
                                        const participant = {
                                            avatar: p.avatar,
                                            displayName: p.nickname,
                                            id: p.participantId,
                                            isHost: p.ishost,
                                            isMuted: p.ismuted,
                                            isUsingTts: p.usetts,
                                            preferredLanguage: p.locale
                                        };
                                        return participant;
                                    });
                                    if (!!this.privConversationServiceConnector.participantsListReceived) {
                                        this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_5__["ParticipantsListEventArgs"](participantsPayload.roomid, participantsPayload.token, participantsPayload.translateTo, participantsPayload.profanityFilter, participantsPayload.roomProfanityFilter, participantsPayload.roomLocked, participantsPayload.muteAll, participantsResult, sessionId));
                                    }
                                    break;
                                /**
                                 * 'SetTranslateToLanguages' represents the list of languages being used in the Conversation by all users(?).
                                 * This is sent at the start of the Conversation
                                 */
                                case "settranslatetolanguages":
                                    if (!!this.privConversationServiceConnector.participantUpdateCommandReceived) {
                                        this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_5__["ParticipantAttributeEventArgs"](commandPayload.participantId, _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_6__["ConversationTranslatorCommandTypes"].setTranslateToLanguages, commandPayload.value, sessionId));
                                    }
                                    break;
                                /**
                                 * 'SetProfanityFiltering' lets the client set the level of profanity filtering.
                                 * If sent by the participant the setting will effect only their own profanity level.
                                 * If sent by the host, the setting will effect all participants including the host.
                                 * Note: the profanity filters differ from Speech Service (?): 'marked', 'raw', 'removed', 'tagged'
                                 */
                                case "setprofanityfiltering":
                                    if (!!this.privConversationServiceConnector.participantUpdateCommandReceived) {
                                        this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_5__["ParticipantAttributeEventArgs"](commandPayload.participantId, _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_6__["ConversationTranslatorCommandTypes"].setProfanityFiltering, commandPayload.value, sessionId));
                                    }
                                    break;
                                /**
                                 * 'SetMute' is sent if the participant has been muted by the host.
                                 * Check the 'participantId' to determine if the current user has been muted.
                                 */
                                case "setmute":
                                    if (!!this.privConversationServiceConnector.participantUpdateCommandReceived) {
                                        this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_5__["ParticipantAttributeEventArgs"](commandPayload.participantId, _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_6__["ConversationTranslatorCommandTypes"].setMute, commandPayload.value, sessionId));
                                    }
                                    break;
                                /**
                                 * 'SetMuteAll' is sent if the Conversation has been muted by the host.
                                 */
                                case "setmuteall":
                                    if (!!this.privConversationServiceConnector.muteAllCommandReceived) {
                                        this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_5__["MuteAllEventArgs"](commandPayload.value, sessionId));
                                    }
                                    break;
                                /**
                                 * 'RoomExpirationWarning' is sent towards the end of the Conversation session to give a timeout warning.
                                 */
                                case "roomexpirationwarning":
                                    if (!!this.privConversationServiceConnector.conversationExpiration) {
                                        this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector, new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ConversationExpirationEventArgs"](commandPayload.value, this.privConversationRequestSession.sessionId));
                                    }
                                    break;
                                /**
                                 * 'SetUseTts' is sent as a confirmation if the user requests TTS to be turned on or off.
                                 */
                                case "setusetts":
                                    if (!!this.privConversationServiceConnector.participantUpdateCommandReceived) {
                                        this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_5__["ParticipantAttributeEventArgs"](commandPayload.participantId, _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_6__["ConversationTranslatorCommandTypes"].setUseTTS, commandPayload.value, sessionId));
                                    }
                                    break;
                                /**
                                 * 'SetLockState' is set if the host has locked or unlocked the Conversation.
                                 */
                                case "setlockstate":
                                    if (!!this.privConversationServiceConnector.lockRoomCommandReceived) {
                                        this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_5__["LockRoomEventArgs"](commandPayload.value, sessionId));
                                    }
                                    break;
                                /**
                                 * 'ChangeNickname' is received if a user changes their display name.
                                 * Any cached particpiants list should be updated to reflect the display name.
                                 */
                                case "changenickname":
                                    if (!!this.privConversationServiceConnector.participantUpdateCommandReceived) {
                                        this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_5__["ParticipantAttributeEventArgs"](commandPayload.participantId, _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_6__["ConversationTranslatorCommandTypes"].changeNickname, commandPayload.nickname, sessionId));
                                    }
                                    break;
                                /**
                                 * 'JoinSession' is sent when a user joins the Conversation.
                                 */
                                case "joinsession":
                                    const joinParticipantPayload = _ServiceMessages_Exports__WEBPACK_IMPORTED_MODULE_7__["ParticipantPayloadResponse"].fromJSON(message.textBody);
                                    const joiningParticipant = {
                                        avatar: joinParticipantPayload.avatar,
                                        displayName: joinParticipantPayload.nickname,
                                        id: joinParticipantPayload.participantId,
                                        isHost: joinParticipantPayload.ishost,
                                        isMuted: joinParticipantPayload.ismuted,
                                        isUsingTts: joinParticipantPayload.usetts,
                                        preferredLanguage: joinParticipantPayload.locale,
                                    };
                                    if (!!this.privConversationServiceConnector.participantJoinCommandReceived) {
                                        this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_5__["ParticipantEventArgs"](joiningParticipant, sessionId));
                                    }
                                    break;
                                /**
                                 * 'LeaveSession' is sent when a user leaves the Conversation'.
                                 */
                                case "leavesession":
                                    const leavingParticipant = {
                                        id: commandPayload.participantId
                                    };
                                    if (!!this.privConversationServiceConnector.participantLeaveCommandReceived) {
                                        this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_5__["ParticipantEventArgs"](leavingParticipant, sessionId));
                                    }
                                    break;
                                /**
                                 * 'DisconnectSession' is sent when a user is disconnected from the session (e.g. network problem).
                                 * Check the 'ParticipantId' to check whether the message is for the current user.
                                 */
                                case "disconnectsession":
                                    // eslint-disable-next-line @typescript-eslint/no-unused-vars
                                    const disconnectParticipant = {
                                        id: commandPayload.participantId
                                    };
                                    break;
                                case "token":
                                    const token = new _Exports__WEBPACK_IMPORTED_MODULE_2__["CognitiveTokenAuthentication"](() => {
                                        const authorizationToken = commandPayload.token;
                                        return Promise.resolve(authorizationToken);
                                    }, () => {
                                        const authorizationToken = commandPayload.token;
                                        return Promise.resolve(authorizationToken);
                                    });
                                    this.authentication = token;
                                    break;
                                /**
                                 * Message not recognized.
                                 */
                                default:
                                    break;
                            }
                            break;
                        /**
                         * 'partial' (or 'hypothesis') represents a unfinalized speech message.
                         */
                        case "partial":
                        /**
                         * 'final' (or 'phrase') represents a finalized speech message.
                         */
                        case "final":
                            const speechPayload = _ServiceMessages_Exports__WEBPACK_IMPORTED_MODULE_7__["SpeechResponsePayload"].fromJSON(message.textBody);
                            const speechResult = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ConversationTranslationResult"](speechPayload.participantId, this.getTranslations(speechPayload.translations), speechPayload.language, undefined, undefined, speechPayload.recognition, undefined, undefined, message.textBody, undefined);
                            if (speechPayload.isFinal) {
                                // check the length, sometimes empty finals are returned
                                if (speechResult.text !== undefined && speechResult.text.length > 0) {
                                    sendFinal = true;
                                }
                                else if (speechPayload.id === this.privLastPartialUtteranceId) {
                                    // send final as normal. We had a non-empty partial for this same utterance
                                    // so sending the empty final is important
                                    sendFinal = true;
                                }
                                else {
                                    // suppress unneeded final
                                }
                                if (sendFinal) {
                                    if (!!this.privConversationServiceConnector.translationReceived) {
                                        this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_5__["ConversationReceivedTranslationEventArgs"](_ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_6__["ConversationTranslatorMessageTypes"].final, speechResult, sessionId));
                                    }
                                }
                            }
                            else if (speechResult.text !== undefined) {
                                this.privLastPartialUtteranceId = speechPayload.id;
                                if (!!this.privConversationServiceConnector.translationReceived) {
                                    this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_5__["ConversationReceivedTranslationEventArgs"](_ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_6__["ConversationTranslatorMessageTypes"].partial, speechResult, sessionId));
                                }
                            }
                            break;
                        /**
                         * "translated_message" is a text message or instant message (IM).
                         */
                        case "translated_message":
                            const textPayload = _ServiceMessages_Exports__WEBPACK_IMPORTED_MODULE_7__["TextResponsePayload"].fromJSON(message.textBody);
                            const textResult = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ConversationTranslationResult"](textPayload.participantId, this.getTranslations(textPayload.translations), textPayload.language, undefined, undefined, textPayload.originalText, undefined, undefined, undefined, message.textBody, undefined);
                            if (!!this.privConversationServiceConnector.translationReceived) {
                                this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_5__["ConversationReceivedTranslationEventArgs"](_ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_6__["ConversationTranslatorMessageTypes"].instantMessage, textResult, sessionId));
                            }
                            break;
                        default:
                            // ignore any unsupported message types
                            break;
                    }
                }
                catch (e) {
                    // continue
                }
                return this.receiveConversationMessageOverride();
            }
            catch (e) {
                this.terminateMessageLoop = true;
            }
            return communicationCustodian.promise;
        });
    }
    startMessageLoop() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.isDisposed()) {
                return Promise.resolve();
            }
            this.terminateMessageLoop = false;
            const messageRetrievalPromise = this.receiveConversationMessageOverride();
            try {
                const r = yield messageRetrievalPromise;
                return r;
            }
            catch (error) {
                this.cancelRecognition(this.privRequestSession ? this.privRequestSession.sessionId : "", this.privRequestSession ? this.privRequestSession.requestId : "", _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"].RuntimeError, error);
                return null;
            }
        });
    }
    // Takes an established websocket connection to the endpoint
    configConnection() {
        if (this.isDisposed()) {
            return Promise.resolve(undefined);
        }
        if (this.privConnectionConfigPromise !== undefined) {
            return this.privConnectionConfigPromise.then((connection) => {
                if (connection.state() === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionState"].Disconnected) {
                    this.privConnectionId = null;
                    this.privConnectionConfigPromise = undefined;
                    return this.configConnection();
                }
                return this.privConnectionConfigPromise;
            }, () => {
                this.privConnectionId = null;
                this.privConnectionConfigPromise = undefined;
                return this.configConnection();
            });
        }
        if (this.terminateMessageLoop) {
            return Promise.resolve(undefined);
        }
        this.privConnectionConfigPromise = this.connectImpl().then((connection) => connection);
        return this.privConnectionConfigPromise;
    }
    getTranslations(serviceResultTranslations) {
        let translations;
        if (undefined !== serviceResultTranslations) {
            translations = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["Translations"]();
            for (const translation of serviceResultTranslations) {
                translations.set(translation.lang, translation.translation);
            }
        }
        return translations;
    }
}

//# sourceMappingURL=ConversationServiceAdapter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorConnectionFactory.js":
/*!*******************************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorConnectionFactory.js ***!
  \*******************************************************************************************************************************************************/
/*! exports provided: ConversationTranslatorConnectionFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslatorConnectionFactory", function() { return ConversationTranslatorConnectionFactory; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _common_StringUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/StringUtils */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/StringUtils.js");
/* harmony import */ var _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../sdk/Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
/* harmony import */ var _QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../QueryParameterNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./../ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.








/**
 * Connection factory for the conversation translator. Handles connecting to the regular translator endpoint,
 * as well as the virtual microphone array transcription endpoint
 */
class ConversationTranslatorConnectionFactory extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_6__["ConnectionFactoryBase"] {
    constructor(convGetter) {
        super();
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(convGetter, "convGetter");
        this.privConvGetter = convGetter;
    }
    create(config, authInfo, connectionId) {
        const isVirtMicArrayEndpoint = config.parameters.getProperty("ConversationTranslator_MultiChannelAudio", "").toUpperCase() === "TRUE";
        const convInfo = this.privConvGetter().room;
        const region = convInfo.cognitiveSpeechRegion || config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_Region, "");
        const replacementValues = {
            hostSuffix: _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_6__["ConnectionFactoryBase"].getHostSuffix(region),
            path: ConversationTranslatorConnectionFactory.CTS_VIRT_MIC_PATH,
            region: encodeURIComponent(region)
        };
        replacementValues[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].Language] = encodeURIComponent(config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_RecoLanguage, ""));
        replacementValues[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].CtsMeetingId] = encodeURIComponent(convInfo.roomId);
        replacementValues[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].CtsDeviceId] = encodeURIComponent(convInfo.participantId);
        replacementValues[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].CtsIsParticipant] = convInfo.isHost ? "" : ("&" + _QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].CtsIsParticipant);
        let endpointUrl = "";
        const queryParams = {};
        const headers = {};
        if (isVirtMicArrayEndpoint) {
            // connecting to the conversation transcription virtual microphone array endpoint
            endpointUrl = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_Endpoint);
            if (!endpointUrl) {
                const hostName = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_Host, "transcribe.{region}.cts.speech{hostSuffix}");
                endpointUrl = "wss://" + hostName + "{path}";
            }
            // because the region can change during a session, we support being passed a format string which we can then
            // replace with the correct information.
            endpointUrl = _common_StringUtils__WEBPACK_IMPORTED_MODULE_1__["StringUtils"].formatString(endpointUrl, replacementValues);
            const parsedUrl = new URL(endpointUrl);
            parsedUrl.searchParams.forEach((val, key) => {
                queryParams[key] = val;
            });
            const connFactory = new _Exports__WEBPACK_IMPORTED_MODULE_7__["TranscriberConnectionFactory"]();
            connFactory.setQueryParams(queryParams, config, endpointUrl);
            // Some query parameters are required for the CTS endpoint, let's explicity set them here
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].CtsMeetingId] = replacementValues[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].CtsMeetingId];
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].CtsDeviceId] = replacementValues[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].CtsDeviceId];
            if (!convInfo.isHost) {
                queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].CtsIsParticipant] = ""; // this doesn't have a value so set to an empty string
            }
            if (!(_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].Format in queryParams)) {
                queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_5__["QueryParameterNames"].Format] = "simple";
            }
            parsedUrl.searchParams.forEach((val, key) => {
                parsedUrl.searchParams.set(key, queryParams[key]);
                delete queryParams[key];
            });
            endpointUrl = parsedUrl.toString();
        }
        else {
            // connecting to regular translation endpoint
            const connFactory = new _Exports__WEBPACK_IMPORTED_MODULE_7__["TranslationConnectionFactory"]();
            endpointUrl = connFactory.getEndpointUrl(config, true);
            endpointUrl = _common_StringUtils__WEBPACK_IMPORTED_MODULE_1__["StringUtils"].formatString(endpointUrl, replacementValues);
            connFactory.setQueryParams(queryParams, config, endpointUrl);
        }
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_4__["HeaderNames"].ConnectionId] = connectionId;
        headers[_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["RestConfigBase"].configParams.token] = convInfo.token;
        if (authInfo.token) {
            headers[authInfo.headerName] = authInfo.token;
        }
        const enableCompression = config.parameters.getProperty("SPEECH-EnableWebsocketCompression", "").toUpperCase() === "TRUE";
        return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["WebsocketConnection"](endpointUrl, queryParams, headers, new _Exports__WEBPACK_IMPORTED_MODULE_7__["WebsocketMessageFormatter"](), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ProxyInfo"].fromRecognizerConfig(config), enableCompression, connectionId);
    }
}
ConversationTranslatorConnectionFactory.CTS_VIRT_MIC_PATH = "/speech/recognition/dynamicaudio";

//# sourceMappingURL=ConversationTranslatorConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorEventArgs.js":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorEventArgs.js ***!
  \***********************************************************************************************************************************************/
/*! exports provided: MuteAllEventArgs, LockRoomEventArgs, ParticipantEventArgs, ParticipantAttributeEventArgs, ParticipantsListEventArgs, ConversationReceivedTranslationEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MuteAllEventArgs", function() { return MuteAllEventArgs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LockRoomEventArgs", function() { return LockRoomEventArgs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ParticipantEventArgs", function() { return ParticipantEventArgs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ParticipantAttributeEventArgs", function() { return ParticipantAttributeEventArgs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ParticipantsListEventArgs", function() { return ParticipantsListEventArgs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationReceivedTranslationEventArgs", function() { return ConversationReceivedTranslationEventArgs; });
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */

class MuteAllEventArgs extends _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SessionEventArgs"] {
    constructor(isMuted, sessionId) {
        super(sessionId);
        this.privIsMuted = isMuted;
    }
    get isMuted() {
        return this.privIsMuted;
    }
}
class LockRoomEventArgs extends _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SessionEventArgs"] {
    constructor(isLocked, sessionId) {
        super(sessionId);
        this.privIsLocked = isLocked;
    }
    get isMuted() {
        return this.privIsLocked;
    }
}
class ParticipantEventArgs extends _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SessionEventArgs"] {
    constructor(participant, sessionId) {
        super(sessionId);
        this.privParticipant = participant;
    }
    get participant() {
        return this.privParticipant;
    }
}
class ParticipantAttributeEventArgs extends _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SessionEventArgs"] {
    constructor(participantId, key, value, sessionId) {
        super(sessionId);
        this.privKey = key;
        this.privValue = value;
        this.privParticipantId = participantId;
    }
    get value() {
        return this.privValue;
    }
    get key() {
        return this.privKey;
    }
    get id() {
        return this.privParticipantId;
    }
}
class ParticipantsListEventArgs extends _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SessionEventArgs"] {
    constructor(conversationId, token, translateTo, profanityFilter, roomProfanityFilter, isRoomLocked, isMuteAll, participants, sessionId) {
        super(sessionId);
        this.privRoomId = conversationId;
        this.privSessionToken = token;
        this.privTranslateTo = translateTo;
        this.privProfanityFilter = profanityFilter;
        this.privRoomProfanityFilter = roomProfanityFilter;
        this.privIsRoomLocked = isRoomLocked;
        this.privIsRoomLocked = isMuteAll;
        this.privParticipants = participants;
    }
    get sessionToken() {
        return this.privSessionToken;
    }
    get conversationId() {
        return this.privRoomId;
    }
    get translateTo() {
        return this.privTranslateTo;
    }
    get profanityFilter() {
        return this.privProfanityFilter;
    }
    get roomProfanityFilter() {
        return this.privRoomProfanityFilter;
    }
    get isRoomLocked() {
        return this.privIsRoomLocked;
    }
    get isMuteAll() {
        return this.privIsMuteAll;
    }
    get participants() {
        return this.privParticipants;
    }
}
class ConversationReceivedTranslationEventArgs {
    constructor(command, payload, sessionId) {
        this.privPayload = payload;
        this.privCommand = command;
        this.privSessionId = sessionId;
    }
    get payload() {
        return this.privPayload;
    }
    get command() {
        return this.privCommand;
    }
    get sessionId() {
        return this.privSessionId;
    }
}

//# sourceMappingURL=ConversationTranslatorEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorInterfaces.js":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorInterfaces.js ***!
  \************************************************************************************************************************************************/
/*! exports provided: InternalParticipants, ConversationTranslatorMessageTypes, ConversationTranslatorCommandTypes */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InternalParticipants", function() { return InternalParticipants; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslatorMessageTypes", function() { return ConversationTranslatorMessageTypes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslatorCommandTypes", function() { return ConversationTranslatorCommandTypes; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/** Users participating in the conversation */
class InternalParticipants {
    constructor(participants = [], meId) {
        this.participants = participants;
        this.meId = meId;
    }
    /**
     * Add or update a participant
     * @param value
     */
    addOrUpdateParticipant(value) {
        if (value === undefined) {
            return;
        }
        const exists = this.getParticipantIndex(value.id);
        if (exists > -1) {
            this.participants.splice(exists, 1, value);
        }
        else {
            this.participants.push(value);
        }
        // ensure it was added ok
        return this.getParticipant(value.id);
    }
    /**
     * Find the participant's position in the participants list.
     * @param id
     */
    getParticipantIndex(id) {
        return this.participants.findIndex((p) => p.id === id);
    }
    /**
     * Find the participant by id.
     * @param id
     */
    getParticipant(id) {
        return this.participants.find((p) => p.id === id);
    }
    /**
     * Remove a participant from the participants list.
     */
    deleteParticipant(id) {
        this.participants = this.participants.filter((p) => p.id !== id);
    }
    /**
     * Helper to return the conversation host.
     */
    get host() {
        return this.participants.find((p) => p.isHost === true);
    }
    /**
     * Helper to return the current user.
     */
    get me() {
        return this.getParticipant(this.meId);
    }
}
/**
 * List of command message types
 */
const ConversationTranslatorMessageTypes = {
    command: "command",
    final: "final",
    info: "info",
    instantMessage: "instant_message",
    keepAlive: "keep_alive",
    partial: "partial",
    participantCommand: "participant_command",
    translatedMessage: "translated_message"
};
/**
 * List of command types
 */
const ConversationTranslatorCommandTypes = {
    changeNickname: "ChangeNickname",
    disconnectSession: "DisconnectSession",
    ejectParticipant: "EjectParticipant",
    instant_message: "instant_message",
    joinSession: "JoinSession",
    leaveSession: "LeaveSession",
    participantList: "ParticipantList",
    roomExpirationWarning: "RoomExpirationWarning",
    setLockState: "SetLockState",
    setMute: "SetMute",
    setMuteAll: "SetMuteAll",
    setProfanityFiltering: "SetProfanityFiltering",
    setTranslateToLanguages: "SetTranslateToLanguages",
    setUseTTS: "SetUseTTS"
};

//# sourceMappingURL=ConversationTranslatorInterfaces.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorRecognizer.js":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorRecognizer.js ***!
  \************************************************************************************************************************************************/
/*! exports provided: ConversationRecognizerFactory, ConversationTranslatorRecognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationRecognizerFactory", function() { return ConversationRecognizerFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslatorRecognizer", function() { return ConversationTranslatorRecognizer; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../sdk/Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _ConversationConnectionFactory__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ConversationConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionFactory.js");
/* harmony import */ var _ConversationServiceAdapter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ConversationServiceAdapter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationServiceAdapter.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
// eslint-disable-next-line max-classes-per-file






class ConversationRecognizerFactory {
    static fromConfig(conversation, speechConfig, audioConfig) {
        return new ConversationTranslatorRecognizer(conversation, speechConfig, audioConfig);
    }
}
/**
 * Sends messages to the Conversation Translator websocket and listens for incoming events containing websocket messages.
 * Based off the recognizers in the SDK folder.
 */
class ConversationTranslatorRecognizer extends _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__["Recognizer"] {
    constructor(conversation, speechConfig, audioConfig) {
        const serviceConfigImpl = speechConfig;
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNull(serviceConfigImpl, "speechConfig");
        const conversationImpl = conversation;
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNull(conversationImpl, "conversationImpl");
        super(audioConfig, serviceConfigImpl.properties, new _ConversationConnectionFactory__WEBPACK_IMPORTED_MODULE_4__["ConversationConnectionFactory"]());
        this.privConversation = conversationImpl;
        this.privIsDisposed = false;
        this.privProperties = serviceConfigImpl.properties.clone();
        this.privConnection = _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__["Connection"].fromRecognizer(this);
        this.privSetTimeout = (typeof (Blob) !== "undefined" && typeof (Worker) !== "undefined") ? _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Timeout"].setTimeout : setTimeout;
        this.privClearTimeout = (typeof (Blob) !== "undefined" && typeof (Worker) !== "undefined") ? _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Timeout"].clearTimeout : clearTimeout;
    }
    set connected(cb) {
        this.privConnection.connected = cb;
    }
    set disconnected(cb) {
        this.privConnection.disconnected = cb;
    }
    /**
     * Return the speech language used by the recognizer
     */
    get speechRecognitionLanguage() {
        return this.privSpeechRecognitionLanguage;
    }
    /**
     * Return the properties for the recognizer
     */
    get properties() {
        return this.privProperties;
    }
    isDisposed() {
        return this.privIsDisposed;
    }
    /**
     * Connect to the recognizer
     * @param token
     */
    connect(token, cb, err) {
        try {
            _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privIsDisposed);
            _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(token, "token");
            this.privReco.conversationTranslatorToken = token;
            this.resetConversationTimeout();
            this.privReco.connectAsync(cb, err);
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
        }
    }
    /**
     * Disconnect from the recognizer
     */
    disconnect(cb, err) {
        try {
            _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privIsDisposed);
            if (this.privTimeoutToken !== undefined) {
                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
                this.privClearTimeout(this.privTimeoutToken);
            }
            this.privReco.disconnect().then(() => {
                if (!!cb) {
                    cb();
                }
            }, (error) => {
                if (!!err) {
                    err(error);
                }
            });
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true).catch((reason) => {
                _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Events"].instance.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["BackgroundEvent"](reason));
            });
        }
    }
    /**
     * Send the mute all participants command to the websocket
     * @param conversationId
     * @param participantId
     * @param isMuted
     */
    sendRequest(command, cb, err) {
        try {
            _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privIsDisposed);
            this.sendMessage(command, cb, err);
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true).catch((reason) => {
                _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Events"].instance.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["BackgroundEvent"](reason));
            });
        }
    }
    /**
     * Close and dispose the recognizer
     */
    close() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.privIsDisposed) {
                if (!!this.privConnection) {
                    this.privConnection.closeConnection();
                    this.privConnection.close();
                }
                this.privConnection = undefined;
                yield this.dispose(true);
            }
        });
    }
    /**
     * Dispose the recognizer
     * @param disposing
     */
    dispose(disposing) {
        const _super = Object.create(null, {
            dispose: { get: () => super.dispose }
        });
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privIsDisposed) {
                return;
            }
            if (disposing) {
                if (this.privTimeoutToken !== undefined) {
                    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
                    this.privClearTimeout(this.privTimeoutToken);
                }
                this.privIsDisposed = true;
                if (!!this.privConnection) {
                    this.privConnection.closeConnection();
                    this.privConnection.close();
                    this.privConnection = undefined;
                }
                yield _super.dispose.call(this, disposing);
            }
        });
    }
    /**
     * Create the config for the recognizer
     * @param speechConfig
     */
    createRecognizerConfig(speechConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognizerConfig"](speechConfig, this.privProperties);
    }
    /**
     * Create the service recognizer.
     * The audio source is redundnant here but is required by the implementation.
     * @param authentication
     * @param connectionFactory
     * @param audioConfig
     * @param recognizerConfig
     */
    createServiceRecognizer(authentication, connectionFactory, audioConfig, recognizerConfig) {
        const audioSource = audioConfig;
        return new _ConversationServiceAdapter__WEBPACK_IMPORTED_MODULE_5__["ConversationServiceAdapter"](authentication, connectionFactory, audioSource, recognizerConfig, this);
    }
    sendMessage(msg, cb, err) {
        const withAsync = this.privReco;
        const PromiseToEmptyCallback = (promise, cb, err) => {
            if (promise !== undefined) {
                promise.then(() => {
                    try {
                        if (!!cb) {
                            cb();
                        }
                    }
                    catch (e) {
                        if (!!err) {
                            err(`'Unhandled error on promise callback: ${e}'`);
                        }
                    }
                }, (reason) => {
                    try {
                        if (!!err) {
                            err(reason);
                        }
                        // eslint-disable-next-line no-empty
                    }
                    catch (error) { }
                });
            }
            else {
                if (!!err) {
                    err("Null promise");
                }
            }
        };
        PromiseToEmptyCallback(withAsync.sendMessageAsync(msg), cb, err);
        this.resetConversationTimeout();
    }
    resetConversationTimeout() {
        if (this.privTimeoutToken !== undefined) {
            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
            this.privClearTimeout(this.privTimeoutToken);
        }
        this.privTimeoutToken = this.privSetTimeout(() => {
            this.sendRequest(this.privConversation.getKeepAlive());
        }, 60000);
    }
}

//# sourceMappingURL=ConversationTranslatorRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationWebsocketMessageFormatter.js":
/*!*****************************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationWebsocketMessageFormatter.js ***!
  \*****************************************************************************************************************************************************/
/*! exports provided: ConversationWebsocketMessageFormatter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationWebsocketMessageFormatter", function() { return ConversationWebsocketMessageFormatter; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _ConversationConnectionMessage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConversationConnectionMessage */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionMessage.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * Based off WebsocketMessageFormatter. The messages for Conversation Translator have some variations from the Speech messages.
 */
class ConversationWebsocketMessageFormatter {
    /**
     * Format incoming messages: text (speech partial/final, IM) or binary (tts)
     */
    toConnectionMessage(message) {
        const deferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
        try {
            if (message.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text) {
                const incomingMessage = new _ConversationConnectionMessage__WEBPACK_IMPORTED_MODULE_1__["ConversationConnectionMessage"](message.messageType, message.textContent, {}, message.id);
                deferral.resolve(incomingMessage);
            }
            else if (message.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Binary) {
                deferral.resolve(new _ConversationConnectionMessage__WEBPACK_IMPORTED_MODULE_1__["ConversationConnectionMessage"](message.messageType, message.binaryContent, undefined, message.id));
            }
        }
        catch (e) {
            deferral.reject(`Error formatting the message. Error: ${e}`);
        }
        return deferral.promise;
    }
    /**
     * Format outgoing messages: text (commands or IM)
     */
    fromConnectionMessage(message) {
        const deferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
        try {
            if (message.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text) {
                const payload = `${message.textBody ? message.textBody : ""}`;
                deferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["RawWebsocketMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text, payload, message.id));
            }
        }
        catch (e) {
            deferral.reject(`Error formatting the message. ${e}`);
        }
        return deferral.promise;
    }
}

//# sourceMappingURL=ConversationWebsocketMessageFormatter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/Exports.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/Exports.js ***!
  \***********************************************************************************************************************/
/*! exports provided: ConversationManager, ConversationConnectionConfig, ConversationRecognizerFactory, TranscriberRecognizer, ConversationReceivedTranslationEventArgs, LockRoomEventArgs, MuteAllEventArgs, ParticipantAttributeEventArgs, ParticipantEventArgs, ParticipantsListEventArgs, ConversationTranslatorCommandTypes, ConversationTranslatorMessageTypes, InternalParticipants */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _ConversationManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConversationManager */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationManager.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationManager", function() { return _ConversationManager__WEBPACK_IMPORTED_MODULE_0__["ConversationManager"]; });

/* harmony import */ var _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConversationConnectionConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationConnectionConfig", function() { return _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_1__["ConversationConnectionConfig"]; });

/* harmony import */ var _ConversationTranslatorRecognizer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConversationTranslatorRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorRecognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationRecognizerFactory", function() { return _ConversationTranslatorRecognizer__WEBPACK_IMPORTED_MODULE_2__["ConversationRecognizerFactory"]; });

/* harmony import */ var _TranscriberRecognizer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./TranscriberRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/TranscriberRecognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranscriberRecognizer", function() { return _TranscriberRecognizer__WEBPACK_IMPORTED_MODULE_3__["TranscriberRecognizer"]; });

/* harmony import */ var _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ConversationTranslatorEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationReceivedTranslationEventArgs", function() { return _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_4__["ConversationReceivedTranslationEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LockRoomEventArgs", function() { return _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_4__["LockRoomEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MuteAllEventArgs", function() { return _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_4__["MuteAllEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ParticipantAttributeEventArgs", function() { return _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_4__["ParticipantAttributeEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ParticipantEventArgs", function() { return _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_4__["ParticipantEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ParticipantsListEventArgs", function() { return _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_4__["ParticipantsListEventArgs"]; });

/* harmony import */ var _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ConversationTranslatorInterfaces */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorInterfaces.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslatorCommandTypes", function() { return _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_5__["ConversationTranslatorCommandTypes"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslatorMessageTypes", function() { return _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_5__["ConversationTranslatorMessageTypes"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InternalParticipants", function() { return _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_5__["InternalParticipants"]; });

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.







//# sourceMappingURL=Exports.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/CommandResponsePayload.js":
/*!******************************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/CommandResponsePayload.js ***!
  \******************************************************************************************************************************************************/
/*! exports provided: CommandResponsePayload */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CommandResponsePayload", function() { return CommandResponsePayload; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
const parseCommandResponse = (json) => JSON.parse(json);
class CommandResponsePayload {
    constructor(json) {
        this.privCommandResponse = parseCommandResponse(json);
    }
    get type() {
        return this.privCommandResponse.type;
    }
    get command() {
        return this.privCommandResponse.command;
    }
    get id() {
        return this.privCommandResponse.id;
    }
    get nickname() {
        return this.privCommandResponse.nickname;
    }
    get participantId() {
        return this.privCommandResponse.participantId;
    }
    get roomid() {
        return this.privCommandResponse.roomid;
    }
    get value() {
        return this.privCommandResponse.value;
    }
    get token() {
        return this.privCommandResponse.token;
    }
    static fromJSON(json) {
        return new CommandResponsePayload(json);
    }
}

//# sourceMappingURL=CommandResponsePayload.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/Exports.js":
/*!***************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/Exports.js ***!
  \***************************************************************************************************************************************/
/*! exports provided: CommandResponsePayload, ParticipantsListPayloadResponse, ParticipantPayloadResponse, SpeechResponsePayload, TextResponsePayload */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _CommandResponsePayload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CommandResponsePayload */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/CommandResponsePayload.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CommandResponsePayload", function() { return _CommandResponsePayload__WEBPACK_IMPORTED_MODULE_0__["CommandResponsePayload"]; });

/* harmony import */ var _ParticipantResponsePayload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ParticipantResponsePayload */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/ParticipantResponsePayload.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ParticipantsListPayloadResponse", function() { return _ParticipantResponsePayload__WEBPACK_IMPORTED_MODULE_1__["ParticipantsListPayloadResponse"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ParticipantPayloadResponse", function() { return _ParticipantResponsePayload__WEBPACK_IMPORTED_MODULE_1__["ParticipantPayloadResponse"]; });

/* harmony import */ var _TranslationResponsePayload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TranslationResponsePayload */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/TranslationResponsePayload.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechResponsePayload", function() { return _TranslationResponsePayload__WEBPACK_IMPORTED_MODULE_2__["SpeechResponsePayload"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TextResponsePayload", function() { return _TranslationResponsePayload__WEBPACK_IMPORTED_MODULE_2__["TextResponsePayload"]; });





//# sourceMappingURL=Exports.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/ParticipantResponsePayload.js":
/*!**********************************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/ParticipantResponsePayload.js ***!
  \**********************************************************************************************************************************************************/
/*! exports provided: ParticipantsListPayloadResponse, ParticipantPayloadResponse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ParticipantsListPayloadResponse", function() { return ParticipantsListPayloadResponse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ParticipantPayloadResponse", function() { return ParticipantPayloadResponse; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
const parseListResponse = (json) => JSON.parse(json);
const parseParticipantResponse = (json) => JSON.parse(json);
class ParticipantsListPayloadResponse {
    constructor(json) {
        this.privParticipantsPayloadResponse = parseListResponse(json);
    }
    get roomid() {
        return this.privParticipantsPayloadResponse.roomid;
    }
    get id() {
        return this.privParticipantsPayloadResponse.id;
    }
    get command() {
        return this.privParticipantsPayloadResponse.command;
    }
    get participants() {
        return this.privParticipantsPayloadResponse.participants;
    }
    get token() {
        return this.privParticipantsPayloadResponse.token;
    }
    get translateTo() {
        return this.privParticipantsPayloadResponse.translateTo;
    }
    get profanityFilter() {
        return this.privParticipantsPayloadResponse.profanityFilter;
    }
    get roomProfanityFilter() {
        return this.privParticipantsPayloadResponse.roomProfanityFilter;
    }
    get roomLocked() {
        return this.privParticipantsPayloadResponse.roomLocked;
    }
    get muteAll() {
        return this.privParticipantsPayloadResponse.muteAll;
    }
    get type() {
        return this.privParticipantsPayloadResponse.type;
    }
    static fromJSON(json) {
        return new ParticipantsListPayloadResponse(json);
    }
}
class ParticipantPayloadResponse {
    constructor(json) {
        this.privParticipantPayloadResponse = parseParticipantResponse(json);
    }
    get nickname() {
        return this.privParticipantPayloadResponse.nickname;
    }
    get locale() {
        return this.privParticipantPayloadResponse.locale;
    }
    get usetts() {
        return this.privParticipantPayloadResponse.usetts;
    }
    get ismuted() {
        return this.privParticipantPayloadResponse.ismuted;
    }
    get ishost() {
        return this.privParticipantPayloadResponse.ishost;
    }
    get participantId() {
        return this.privParticipantPayloadResponse.participantId;
    }
    get avatar() {
        return this.privParticipantPayloadResponse.avatar;
    }
    static fromJSON(json) {
        return new ParticipantPayloadResponse(json);
    }
}

//# sourceMappingURL=ParticipantResponsePayload.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/TranslationResponsePayload.js":
/*!**********************************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/TranslationResponsePayload.js ***!
  \**********************************************************************************************************************************************************/
/*! exports provided: SpeechResponsePayload, TextResponsePayload */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechResponsePayload", function() { return SpeechResponsePayload; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextResponsePayload", function() { return TextResponsePayload; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
const parseSpeechResponse = (json) => JSON.parse(json);
const parseTextResponse = (json) => JSON.parse(json);
class SpeechResponsePayload {
    constructor(json) {
        this.privSpeechResponse = parseSpeechResponse(json);
    }
    get recognition() {
        return this.privSpeechResponse.recognition;
    }
    get translations() {
        return this.privSpeechResponse.translations;
    }
    get id() {
        return this.privSpeechResponse.id;
    }
    get language() {
        return this.privSpeechResponse.language;
    }
    get nickname() {
        return this.privSpeechResponse.nickname;
    }
    get participantId() {
        return this.privSpeechResponse.participantId;
    }
    get roomid() {
        return this.privSpeechResponse.roomid;
    }
    get timestamp() {
        return this.privSpeechResponse.timestamp;
    }
    get type() {
        return this.privSpeechResponse.type;
    }
    get isFinal() {
        return this.privSpeechResponse.type === "final";
    }
    static fromJSON(json) {
        return new SpeechResponsePayload(json);
    }
}
class TextResponsePayload {
    constructor(json) {
        this.privTextResponse = parseTextResponse(json);
    }
    get originalText() {
        return this.privTextResponse.originalText;
    }
    get translations() {
        return this.privTextResponse.translations;
    }
    get id() {
        return this.privTextResponse.id;
    }
    get language() {
        return this.privTextResponse.language;
    }
    get nickname() {
        return this.privTextResponse.nickname;
    }
    get participantId() {
        return this.privTextResponse.participantId;
    }
    get roomid() {
        return this.privTextResponse.roomid;
    }
    get timestamp() {
        return this.privTextResponse.timestamp;
    }
    get type() {
        return this.privTextResponse.type;
    }
    static fromJSON(json) {
        return new TextResponsePayload(json);
    }
}

//# sourceMappingURL=TranslationResponsePayload.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/TranscriberRecognizer.js":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/TranscriberRecognizer.js ***!
  \*************************************************************************************************************************************/
/*! exports provided: TranscriberRecognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranscriberRecognizer", function() { return TranscriberRecognizer; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../sdk/Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




class TranscriberRecognizer extends _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["Recognizer"] {
    /**
     * TranscriberRecognizer constructor.
     * @constructor
     * @param {SpeechTranslationConfig} speechTranslationConfig - Non-audio configuration associated with the recognizer
     * @param {AudioConfig} audioConfig - An audio configuration associated with the recognizer
     */
    constructor(speechTranslationConfig, audioConfig) {
        const speechTranslationConfigImpl = speechTranslationConfig;
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(speechTranslationConfigImpl, "speechTranslationConfig");
        const audioConfigImpl = audioConfig;
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(audioConfigImpl, "audioConfigImpl");
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(speechTranslationConfigImpl.speechRecognitionLanguage, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage]);
        super(audioConfig, speechTranslationConfigImpl.properties, new _Exports__WEBPACK_IMPORTED_MODULE_3__["TranscriberConnectionFactory"]());
        this.privDisposedRecognizer = false;
    }
    get speechRecognitionLanguage() {
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfDisposed(this.privDisposedRecognizer);
        return this.properties.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage);
    }
    get properties() {
        return this.privProperties;
    }
    get authorizationToken() {
        return this.properties.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token);
    }
    set authorizationToken(token) {
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(token, "token");
        this.properties.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token, token);
    }
    set conversation(c) {
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrUndefined(c, "Conversation");
        this.privConversation = c;
    }
    getConversationInfo() {
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrUndefined(this.privConversation, "Conversation");
        return this.privConversation.conversationInfo;
    }
    startContinuousRecognitionAsync(cb, err) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["marshalPromiseToCallbacks"])(this.startContinuousRecognitionAsyncImpl(_Exports__WEBPACK_IMPORTED_MODULE_3__["RecognitionMode"].Conversation), cb, err);
    }
    stopContinuousRecognitionAsync(cb, err) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["marshalPromiseToCallbacks"])(this.stopContinuousRecognitionAsyncImpl(), cb, err);
    }
    close() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.privDisposedRecognizer) {
                yield this.dispose(true);
            }
        });
    }
    // Push async join/leave conversation message via serviceRecognizer
    pushConversationEvent(conversationInfo, command) {
        return __awaiter(this, void 0, void 0, function* () {
            const reco = (this.privReco);
            _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrUndefined(reco, "serviceRecognizer");
            yield reco.sendSpeechEventAsync(conversationInfo, command);
        });
    }
    enforceAudioGating() {
        return __awaiter(this, void 0, void 0, function* () {
            const audioConfigImpl = this.audioConfig;
            const format = yield audioConfigImpl.format;
            const channels = format.channels;
            if (channels === 1) {
                if (this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2", "false").toLowerCase() !== "true") {
                    throw new Error("Single channel audio configuration for ConversationTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details");
                }
            }
            else if (channels !== 8) {
                throw new Error(`Unsupported audio configuration: Detected ${channels}-channel audio`);
            }
            return;
        });
    }
    connectCallbacks(transcriber) {
        this.canceled = (s, e) => {
            if (!!transcriber.canceled) {
                transcriber.canceled(transcriber, e);
            }
        };
        this.recognizing = (s, e) => {
            if (!!transcriber.transcribing) {
                transcriber.transcribing(transcriber, e);
            }
        };
        this.recognized = (s, e) => {
            if (!!transcriber.transcribed) {
                transcriber.transcribed(transcriber, e);
            }
        };
        this.sessionStarted = (s, e) => {
            if (!!transcriber.sessionStarted) {
                transcriber.sessionStarted(transcriber, e);
            }
        };
        this.sessionStopped = (s, e) => {
            if (!!transcriber.sessionStopped) {
                transcriber.sessionStopped(transcriber, e);
            }
        };
    }
    disconnectCallbacks() {
        this.canceled = undefined;
        this.recognizing = undefined;
        this.recognized = undefined;
        this.sessionStarted = undefined;
        this.sessionStopped = undefined;
    }
    /**
     * Disposes any resources held by the object.
     * @member ConversationTranscriber.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - true if disposing the object.
     */
    dispose(disposing) {
        const _super = Object.create(null, {
            dispose: { get: () => super.dispose }
        });
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privDisposedRecognizer) {
                return;
            }
            if (disposing) {
                this.privDisposedRecognizer = true;
                yield this.implRecognizerStop();
            }
            yield _super.dispose.call(this, disposing);
        });
    }
    createRecognizerConfig(speechConfig) {
        return new _Exports__WEBPACK_IMPORTED_MODULE_3__["RecognizerConfig"](speechConfig, this.properties);
    }
    createServiceRecognizer(authentication, connectionFactory, audioConfig, recognizerConfig) {
        const configImpl = audioConfig;
        return new _Exports__WEBPACK_IMPORTED_MODULE_3__["TranscriptionServiceRecognizer"](authentication, connectionFactory, configImpl, recognizerConfig, this);
    }
}

//# sourceMappingURL=TranscriberRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranscriptionServiceRecognizer.js":
/*!********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranscriptionServiceRecognizer.js ***!
  \********************************************************************************************************************************/
/*! exports provided: TranscriptionServiceRecognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranscriptionServiceRecognizer", function() { return TranscriptionServiceRecognizer; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./SpeechConnectionMessage.Internal */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionMessage.Internal.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




// eslint-disable-next-line max-classes-per-file
class TranscriptionServiceRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_2__["ConversationServiceRecognizer"] {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, transcriber) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, transcriber);
        this.privTranscriberRecognizer = transcriber;
        this.sendPrePayloadJSONOverride = (connection) => this.sendTranscriptionStartJSON(connection);
        if (this.privRecognizerConfig.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceResponse_RequestWordLevelTimestamps) === "true") {
            this.privSpeechContext.setWordLevelTimings();
        }
    }
    sendSpeechEventAsync(info, command) {
        return __awaiter(this, void 0, void 0, function* () {
            if (!!this.privRequestSession.isRecognizing) {
                const connection = yield this.fetchConnection();
                yield this.sendSpeechEvent(connection, this.createSpeechEventPayload(info, command));
            }
        });
    }
    processTypeSpecificMessages(connectionMessage) {
        return this.processSpeechMessages(connectionMessage);
    }
    handleRecognizedCallback(result, offset, sessionId) {
        try {
            const event = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechRecognitionEventArgs"](result, offset, sessionId);
            this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer, event);
            if (!!this.privSuccessCallback) {
                try {
                    this.privSuccessCallback(result);
                }
                catch (e) {
                    if (!!this.privErrorCallback) {
                        this.privErrorCallback(e);
                    }
                }
                // Only invoke the call back once.
                // and if it's successful don't invoke the
                // error after that.
                this.privSuccessCallback = undefined;
                this.privErrorCallback = undefined;
            }
            /* eslint-disable no-empty */
        }
        catch (error) {
            // Not going to let errors in the event handler
            // trip things up.
        }
    }
    handleRecognizingCallback(result, duration, sessionId) {
        try {
            const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechRecognitionEventArgs"](result, duration, sessionId);
            this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer, ev);
            /* eslint-disable no-empty */
        }
        catch (error) {
            // Not going to let errors in the event handler
            // trip things up.
        }
    }
    // Cancels recognition.
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error) {
        const properties = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyCollection"]();
        properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCodePropertyName"], _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"][errorCode]);
        if (!!this.privTranscriberRecognizer.canceled) {
            const cancelEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ConversationTranscriptionCanceledEventArgs"](cancellationReason, error, errorCode, undefined, sessionId);
            try {
                this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer, cancelEvent);
                /* eslint-disable no-empty */
            }
            catch (_a) { }
        }
        if (!!this.privSuccessCallback) {
            const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechRecognitionResult"](requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].Canceled, undefined, // Text
            undefined, // Duration
            undefined, // Offset
            undefined, // Language
            undefined, // Language Detection Confidence
            undefined, // Speaker Id
            error, undefined, // Json
            properties);
            try {
                this.privSuccessCallback(result);
                this.privSuccessCallback = undefined;
                /* eslint-disable no-empty */
            }
            catch (_b) { }
        }
    }
    // Encapsulated for derived service recognizers that need to send additional JSON
    sendTranscriptionStartJSON(connection) {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.sendSpeechContext(connection, true);
            const info = this.privTranscriberRecognizer.getConversationInfo();
            const payload = this.createSpeechEventPayload(info, "start");
            yield this.sendSpeechEvent(connection, payload);
            yield this.sendWaveHeader(connection);
            return;
        });
    }
    sendSpeechEvent(connection, payload) {
        const speechEventJson = JSON.stringify(payload);
        if (speechEventJson) {
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_3__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text, "speech.event", this.privRequestSession.requestId, "application/json", speechEventJson));
        }
        return;
    }
    createSpeechEventPayload(info, command) {
        const eventDict = { id: "meeting", name: command, meeting: info.conversationProperties };
        eventDict.meeting.id = info.id;
        eventDict.meeting.attendees = info.participants;
        eventDict.meeting.record = info.conversationProperties.audiorecording === "on" ? "true" : "false";
        return eventDict;
    }
}

//# sourceMappingURL=TranscriptionServiceRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationConnectionFactory.js":
/*!******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationConnectionFactory.js ***!
  \******************************************************************************************************************************/
/*! exports provided: TranslationConnectionFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationConnectionFactory", function() { return TranslationConnectionFactory; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _common_StringUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/StringUtils */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/StringUtils.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
/* harmony import */ var _QueryParameterNames__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./QueryParameterNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.







class TranslationConnectionFactory extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_3__["ConnectionFactoryBase"] {
    create(config, authInfo, connectionId) {
        const endpoint = this.getEndpointUrl(config);
        const queryParams = {};
        this.setQueryParams(queryParams, config, endpoint);
        const headers = {};
        if (authInfo.token !== undefined && authInfo.token !== "") {
            headers[authInfo.headerName] = authInfo.token;
        }
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_5__["HeaderNames"].ConnectionId] = connectionId;
        config.parameters.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Url, endpoint);
        const enableCompression = config.parameters.getProperty("SPEECH-EnableWebsocketCompression", "false") === "true";
        return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["WebsocketConnection"](endpoint, queryParams, headers, new _Exports__WEBPACK_IMPORTED_MODULE_4__["WebsocketMessageFormatter"](), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ProxyInfo"].fromRecognizerConfig(config), enableCompression, connectionId);
    }
    getEndpointUrl(config, returnRegionPlaceholder) {
        const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region);
        const hostSuffix = _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_3__["ConnectionFactoryBase"].getHostSuffix(region);
        let endpointUrl = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Endpoint, undefined);
        if (!endpointUrl) {
            const host = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Host, "wss://{region}.s2s.speech" + hostSuffix);
            endpointUrl = host + "/speech/translation/cognitiveservices/v1";
        }
        if (returnRegionPlaceholder === true) {
            return endpointUrl;
        }
        return _common_StringUtils__WEBPACK_IMPORTED_MODULE_1__["StringUtils"].formatString(endpointUrl, { region });
    }
    setQueryParams(queryParams, config, endpointUrl) {
        queryParams.from = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage);
        queryParams.to = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationToLanguages);
        this.setCommonUrlParams(config, queryParams, endpointUrl);
        this.setUrlParameter(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceResponse_TranslationRequestStablePartialResult, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_6__["QueryParameterNames"].StableTranslation, config, queryParams, endpointUrl);
        const translationVoice = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationVoice, undefined);
        if (translationVoice !== undefined) {
            queryParams.voice = translationVoice;
            queryParams.features = "texttospeech";
        }
    }
}

//# sourceMappingURL=TranslationConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationServiceRecognizer.js":
/*!******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationServiceRecognizer.js ***!
  \******************************************************************************************************************************/
/*! exports provided: TranslationServiceRecognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationServiceRecognizer", function() { return TranslationServiceRecognizer; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



// eslint-disable-next-line max-classes-per-file
class TranslationServiceRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_2__["ConversationServiceRecognizer"] {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, translationRecognizer) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, translationRecognizer);
        this.privTranslationRecognizer = translationRecognizer;
        this.connectionEvents.attach((connectionEvent) => {
            if (connectionEvent.name === "ConnectionEstablishedEvent") {
                this.privTranslationRecognizer.onConnection();
            }
            else if (connectionEvent.name === "ConnectionClosedEvent") {
                void this.privTranslationRecognizer.onDisconnection();
            }
        });
    }
    processTypeSpecificMessages(connectionMessage) {
        return __awaiter(this, void 0, void 0, function* () {
            const resultProps = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyCollection"]();
            let processed = yield this.processSpeechMessages(connectionMessage);
            if (processed) {
                return true;
            }
            const handleTranslationPhrase = (translatedPhrase) => __awaiter(this, void 0, void 0, function* () {
                this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset + translatedPhrase.Offset + translatedPhrase.Duration);
                if (translatedPhrase.RecognitionStatus === _Exports__WEBPACK_IMPORTED_MODULE_2__["RecognitionStatus"].Success) {
                    // OK, the recognition was successful. How'd the translation do?
                    const result = this.fireEventForResult(translatedPhrase, resultProps);
                    if (!!this.privTranslationRecognizer.recognized) {
                        try {
                            this.privTranslationRecognizer.recognized(this.privTranslationRecognizer, result);
                            /* eslint-disable no-empty */
                        }
                        catch (error) {
                            // Not going to let errors in the event handler
                            // trip things up.
                        }
                    }
                    // report result to promise.
                    if (!!this.privSuccessCallback) {
                        try {
                            this.privSuccessCallback(result.result);
                        }
                        catch (e) {
                            if (!!this.privErrorCallback) {
                                this.privErrorCallback(e);
                            }
                        }
                        // Only invoke the call back once.
                        // and if it's successful don't invoke the
                        // error after that.
                        this.privSuccessCallback = undefined;
                        this.privErrorCallback = undefined;
                    }
                }
                else {
                    const reason = _Exports__WEBPACK_IMPORTED_MODULE_2__["EnumTranslation"].implTranslateRecognitionResult(translatedPhrase.RecognitionStatus);
                    const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationRecognitionResult"](undefined, this.privRequestSession.requestId, reason, translatedPhrase.Text, translatedPhrase.Duration, this.privRequestSession.currentTurnAudioOffset + translatedPhrase.Offset, undefined, connectionMessage.textBody, resultProps);
                    if (reason === _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].Canceled) {
                        const cancelReason = _Exports__WEBPACK_IMPORTED_MODULE_2__["EnumTranslation"].implTranslateCancelResult(translatedPhrase.RecognitionStatus);
                        const cancellationErrorCode = _Exports__WEBPACK_IMPORTED_MODULE_2__["EnumTranslation"].implTranslateCancelErrorCode(translatedPhrase.RecognitionStatus);
                        yield this.cancelRecognitionLocal(cancelReason, cancellationErrorCode, _Exports__WEBPACK_IMPORTED_MODULE_2__["EnumTranslation"].implTranslateErrorDetails(cancellationErrorCode));
                    }
                    else {
                        if (!(this.privRequestSession.isSpeechEnded && reason === _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].NoMatch && translatedPhrase.RecognitionStatus !== _Exports__WEBPACK_IMPORTED_MODULE_2__["RecognitionStatus"].InitialSilenceTimeout)) {
                            const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationRecognitionEventArgs"](result, result.offset, this.privRequestSession.sessionId);
                            if (!!this.privTranslationRecognizer.recognized) {
                                try {
                                    this.privTranslationRecognizer.recognized(this.privTranslationRecognizer, ev);
                                    /* eslint-disable no-empty */
                                }
                                catch (error) {
                                    // Not going to let errors in the event handler
                                    // trip things up.
                                }
                            }
                        }
                        // report result to promise.
                        if (!!this.privSuccessCallback) {
                            try {
                                this.privSuccessCallback(result);
                            }
                            catch (e) {
                                if (!!this.privErrorCallback) {
                                    this.privErrorCallback(e);
                                }
                            }
                            // Only invoke the call back once.
                            // and if it's successful don't invoke the
                            // error after that.
                            this.privSuccessCallback = undefined;
                            this.privErrorCallback = undefined;
                        }
                    }
                    processed = true;
                }
            });
            if (connectionMessage.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text) {
                resultProps.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceResponse_JsonResult, connectionMessage.textBody);
            }
            switch (connectionMessage.path.toLowerCase()) {
                case "translation.hypothesis":
                    const result = this.fireEventForResult(_Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationHypothesis"].fromJSON(connectionMessage.textBody), resultProps);
                    this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset + result.offset);
                    if (!!this.privTranslationRecognizer.recognizing) {
                        try {
                            this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer, result);
                            /* eslint-disable no-empty */
                        }
                        catch (error) {
                            // Not going to let errors in the event handler
                            // trip things up.
                        }
                    }
                    processed = true;
                    break;
                case "translation.response":
                    const phrase = JSON.parse(connectionMessage.textBody);
                    if (!!phrase.SpeechPhrase) {
                        yield handleTranslationPhrase(_Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationPhrase"].fromTranslationResponse(phrase));
                    }
                    break;
                case "translation.phrase":
                    yield handleTranslationPhrase(_Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationPhrase"].fromJSON(connectionMessage.textBody));
                    break;
                case "translation.synthesis":
                    this.sendSynthesisAudio(connectionMessage.binaryBody, this.privRequestSession.sessionId);
                    processed = true;
                    break;
                case "translation.synthesis.end":
                    const synthEnd = _Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationSynthesisEnd"].fromJSON(connectionMessage.textBody);
                    switch (synthEnd.SynthesisStatus) {
                        case _Exports__WEBPACK_IMPORTED_MODULE_2__["SynthesisStatus"].Error:
                            if (!!this.privTranslationRecognizer.synthesizing) {
                                const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationSynthesisResult"](_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].Canceled, undefined);
                                const retEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationSynthesisEventArgs"](result, this.privRequestSession.sessionId);
                                try {
                                    this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer, retEvent);
                                    /* eslint-disable no-empty */
                                }
                                catch (error) {
                                    // Not going to let errors in the event handler
                                    // trip things up.
                                }
                            }
                            if (!!this.privTranslationRecognizer.canceled) {
                                // And raise a canceled event to send the rich(er) error message back.
                                const canceledResult = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationRecognitionCanceledEventArgs"](this.privRequestSession.sessionId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationReason"].Error, synthEnd.FailureReason, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"].ServiceError, null);
                                try {
                                    this.privTranslationRecognizer.canceled(this.privTranslationRecognizer, canceledResult);
                                    /* eslint-disable no-empty */
                                }
                                catch (error) {
                                    // Not going to let errors in the event handler
                                    // trip things up.
                                }
                            }
                            break;
                        case _Exports__WEBPACK_IMPORTED_MODULE_2__["SynthesisStatus"].Success:
                            this.sendSynthesisAudio(undefined, this.privRequestSession.sessionId);
                            break;
                        default:
                            break;
                    }
                    processed = true;
                    break;
                default:
                    break;
            }
            return processed;
        });
    }
    // Cancels recognition.
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error) {
        const properties = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyCollection"]();
        properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCodePropertyName"], _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"][errorCode]);
        if (!!this.privTranslationRecognizer.canceled) {
            const cancelEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationRecognitionCanceledEventArgs"](sessionId, cancellationReason, error, errorCode, undefined);
            try {
                this.privTranslationRecognizer.canceled(this.privTranslationRecognizer, cancelEvent);
                /* eslint-disable no-empty */
            }
            catch (_a) { }
        }
        if (!!this.privSuccessCallback) {
            const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationRecognitionResult"](undefined, // Translations
            requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].Canceled, undefined, // Text
            undefined, // Druation
            undefined, // Offset
            error, undefined, // Json
            properties);
            try {
                this.privSuccessCallback(result);
                /* eslint-disable no-empty */
                this.privSuccessCallback = undefined;
            }
            catch (_b) { }
        }
    }
    handleRecognizingCallback(result, duration, sessionId) {
        try {
            const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationRecognitionEventArgs"](_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationRecognitionResult"].fromSpeechRecognitionResult(result), duration, sessionId);
            this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer, ev);
            /* eslint-disable no-empty */
        }
        catch (error) {
            // Not going to let errors in the event handler
            // trip things up.
        }
    }
    handleRecognizedCallback(result, offset, sessionId) {
        try {
            const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationRecognitionEventArgs"](_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationRecognitionResult"].fromSpeechRecognitionResult(result), offset, sessionId);
            this.privTranslationRecognizer.recognized(this.privTranslationRecognizer, ev);
        }
        catch (error) {
            // Not going to let errors in the event handler
            // trip things up.
        }
    }
    fireEventForResult(serviceResult, properties) {
        let translations;
        if (undefined !== serviceResult.Translation.Translations) {
            translations = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["Translations"]();
            for (const translation of serviceResult.Translation.Translations) {
                translations.set(translation.Language, translation.Text || translation.DisplayText);
            }
        }
        let resultReason;
        if (serviceResult instanceof _Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationPhrase"]) {
            if (!!serviceResult.Translation && serviceResult.Translation.TranslationStatus === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["TranslationStatus"].Success) {
                resultReason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].TranslatedSpeech;
            }
            else {
                resultReason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].RecognizedSpeech;
            }
        }
        else {
            resultReason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].TranslatingSpeech;
        }
        const offset = serviceResult.Offset + this.privRequestSession.currentTurnAudioOffset;
        const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationRecognitionResult"](translations, this.privRequestSession.requestId, resultReason, serviceResult.Text, serviceResult.Duration, offset, serviceResult.Translation.FailureReason, JSON.stringify(serviceResult), properties);
        const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationRecognitionEventArgs"](result, offset, this.privRequestSession.sessionId);
        return ev;
    }
    sendSynthesisAudio(audio, sessionId) {
        const reason = (undefined === audio) ? _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].SynthesizingAudioCompleted : _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].SynthesizingAudio;
        const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationSynthesisResult"](reason, audio);
        const retEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationSynthesisEventArgs"](result, sessionId);
        if (!!this.privTranslationRecognizer.synthesizing) {
            try {
                this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer, retEvent);
                /* eslint-disable no-empty */
            }
            catch (error) {
                // Not going to let errors in the event handler
                // trip things up.
            }
        }
    }
}

//# sourceMappingURL=TranslationServiceRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationStatus.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationStatus.js ***!
  \*******************************************************************************************************************/
/*! exports provided: TranslationStatus */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationStatus", function() { return TranslationStatus; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines translation status.
 * @class TranslationStatus
 */
var TranslationStatus;
(function (TranslationStatus) {
    /**
     * @member TranslationStatus.Success
     */
    TranslationStatus[TranslationStatus["Success"] = 0] = "Success";
    /**
     * @member TranslationStatus.Error
     */
    TranslationStatus[TranslationStatus["Error"] = 1] = "Error";
})(TranslationStatus || (TranslationStatus = {}));

//# sourceMappingURL=TranslationStatus.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/WebsocketMessageFormatter.js":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/WebsocketMessageFormatter.js ***!
  \***************************************************************************************************************************/
/*! exports provided: WebsocketMessageFormatter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebsocketMessageFormatter", function() { return WebsocketMessageFormatter; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

const CRLF = "\r\n";
class WebsocketMessageFormatter {
    toConnectionMessage(message) {
        const deferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
        try {
            if (message.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text) {
                const textMessage = message.textContent;
                let headers = {};
                let body = null;
                if (textMessage) {
                    const headerBodySplit = textMessage.split("\r\n\r\n");
                    if (headerBodySplit && headerBodySplit.length > 0) {
                        headers = this.parseHeaders(headerBodySplit[0]);
                        if (headerBodySplit.length > 1) {
                            body = headerBodySplit[1];
                        }
                    }
                }
                deferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionMessage"](message.messageType, body, headers, message.id));
            }
            else if (message.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Binary) {
                const binaryMessage = message.binaryContent;
                let headers = {};
                let body = null;
                if (!binaryMessage || binaryMessage.byteLength < 2) {
                    throw new Error("Invalid binary message format. Header length missing.");
                }
                const dataView = new DataView(binaryMessage);
                const headerLength = dataView.getInt16(0);
                if (binaryMessage.byteLength < headerLength + 2) {
                    throw new Error("Invalid binary message format. Header content missing.");
                }
                let headersString = "";
                for (let i = 0; i < headerLength; i++) {
                    headersString += String.fromCharCode((dataView).getInt8(i + 2));
                }
                headers = this.parseHeaders(headersString);
                if (binaryMessage.byteLength > headerLength + 2) {
                    body = binaryMessage.slice(2 + headerLength);
                }
                deferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionMessage"](message.messageType, body, headers, message.id));
            }
        }
        catch (e) {
            deferral.reject(`Error formatting the message. Error: ${e}`);
        }
        return deferral.promise;
    }
    fromConnectionMessage(message) {
        const deferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
        try {
            if (message.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text) {
                const payload = `${this.makeHeaders(message)}${CRLF}${message.textBody ? message.textBody : ""}`;
                deferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["RawWebsocketMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text, payload, message.id));
            }
            else if (message.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Binary) {
                const headersString = this.makeHeaders(message);
                const content = message.binaryBody;
                const headerBuffer = this.stringToArrayBuffer(headersString);
                const headerInt8Array = new Int8Array(headerBuffer);
                const headerLength = headerInt8Array.byteLength;
                const payloadInt8Array = new Int8Array(2 + headerLength + (content ? content.byteLength : 0));
                payloadInt8Array[0] = ((headerLength >> 8) & 0xff);
                payloadInt8Array[1] = headerLength & 0xff;
                payloadInt8Array.set(headerInt8Array, 2);
                if (content) {
                    const bodyInt8Array = new Int8Array(content);
                    payloadInt8Array.set(bodyInt8Array, 2 + headerLength);
                }
                const payload = payloadInt8Array.buffer;
                deferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["RawWebsocketMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Binary, payload, message.id));
            }
        }
        catch (e) {
            deferral.reject(`Error formatting the message. ${e}`);
        }
        return deferral.promise;
    }
    makeHeaders(message) {
        let headersString = "";
        if (message.headers) {
            for (const header in message.headers) {
                if (header) {
                    headersString += `${header}: ${message.headers[header]}${CRLF}`;
                }
            }
        }
        return headersString;
    }
    parseHeaders(headersString) {
        const headers = {};
        if (headersString) {
            const headerMatches = headersString.match(/[^\r\n]+/g);
            if (headers) {
                for (const header of headerMatches) {
                    if (header) {
                        const separatorIndex = header.indexOf(":");
                        const headerName = separatorIndex > 0 ? header.substr(0, separatorIndex).trim().toLowerCase() : header;
                        const headerValue = separatorIndex > 0 && header.length > (separatorIndex + 1) ?
                            header.substr(separatorIndex + 1).trim() :
                            "";
                        headers[headerName] = headerValue;
                    }
                }
            }
        }
        return headers;
    }
    stringToArrayBuffer(str) {
        const buffer = new ArrayBuffer(str.length);
        const view = new DataView(buffer);
        for (let i = 0; i < str.length; i++) {
            view.setUint8(i, str.charCodeAt(i));
        }
        return buffer;
    }
}

//# sourceMappingURL=WebsocketMessageFormatter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/AudioSourceEvents.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/AudioSourceEvents.js ***!
  \************************************************************************************************************/
/*! exports provided: AudioSourceEvent, AudioSourceInitializingEvent, AudioSourceReadyEvent, AudioSourceOffEvent, AudioSourceErrorEvent, AudioStreamNodeEvent, AudioStreamNodeAttachingEvent, AudioStreamNodeAttachedEvent, AudioStreamNodeDetachedEvent, AudioStreamNodeErrorEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioSourceEvent", function() { return AudioSourceEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioSourceInitializingEvent", function() { return AudioSourceInitializingEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioSourceReadyEvent", function() { return AudioSourceReadyEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioSourceOffEvent", function() { return AudioSourceOffEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioSourceErrorEvent", function() { return AudioSourceErrorEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeEvent", function() { return AudioStreamNodeEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeAttachingEvent", function() { return AudioStreamNodeAttachingEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeAttachedEvent", function() { return AudioStreamNodeAttachedEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeDetachedEvent", function() { return AudioStreamNodeDetachedEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeErrorEvent", function() { return AudioStreamNodeErrorEvent; });
/* harmony import */ var _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PlatformEvent */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */

class AudioSourceEvent extends _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["PlatformEvent"] {
    constructor(eventName, audioSourceId, eventType = _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Info) {
        super(eventName, eventType);
        this.privAudioSourceId = audioSourceId;
    }
    get audioSourceId() {
        return this.privAudioSourceId;
    }
}
class AudioSourceInitializingEvent extends AudioSourceEvent {
    constructor(audioSourceId) {
        super("AudioSourceInitializingEvent", audioSourceId);
    }
}
class AudioSourceReadyEvent extends AudioSourceEvent {
    constructor(audioSourceId) {
        super("AudioSourceReadyEvent", audioSourceId);
    }
}
class AudioSourceOffEvent extends AudioSourceEvent {
    constructor(audioSourceId) {
        super("AudioSourceOffEvent", audioSourceId);
    }
}
class AudioSourceErrorEvent extends AudioSourceEvent {
    constructor(audioSourceId, error) {
        super("AudioSourceErrorEvent", audioSourceId, _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Error);
        this.privError = error;
    }
    get error() {
        return this.privError;
    }
}
class AudioStreamNodeEvent extends AudioSourceEvent {
    constructor(eventName, audioSourceId, audioNodeId) {
        super(eventName, audioSourceId);
        this.privAudioNodeId = audioNodeId;
    }
    get audioNodeId() {
        return this.privAudioNodeId;
    }
}
class AudioStreamNodeAttachingEvent extends AudioStreamNodeEvent {
    constructor(audioSourceId, audioNodeId) {
        super("AudioStreamNodeAttachingEvent", audioSourceId, audioNodeId);
    }
}
class AudioStreamNodeAttachedEvent extends AudioStreamNodeEvent {
    constructor(audioSourceId, audioNodeId) {
        super("AudioStreamNodeAttachedEvent", audioSourceId, audioNodeId);
    }
}
class AudioStreamNodeDetachedEvent extends AudioStreamNodeEvent {
    constructor(audioSourceId, audioNodeId) {
        super("AudioStreamNodeDetachedEvent", audioSourceId, audioNodeId);
    }
}
class AudioStreamNodeErrorEvent extends AudioStreamNodeEvent {
    constructor(audioSourceId, audioNodeId, error) {
        super("AudioStreamNodeErrorEvent", audioSourceId, audioNodeId);
        this.privError = error;
    }
    get error() {
        return this.privError;
    }
}

//# sourceMappingURL=AudioSourceEvents.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/BackgroundError.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/BackgroundError.js ***!
  \**********************************************************************************************************/
/*! exports provided: BackgroundEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BackgroundEvent", function() { return BackgroundEvent; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class BackgroundEvent extends _Exports__WEBPACK_IMPORTED_MODULE_0__["PlatformEvent"] {
    constructor(error) {
        super("BackgroundEvent", _Exports__WEBPACK_IMPORTED_MODULE_0__["EventType"].Error);
        this.privError = error;
    }
    get error() {
        return this.privError;
    }
}

//# sourceMappingURL=BackgroundError.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ChunkedArrayBufferStream.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ChunkedArrayBufferStream.js ***!
  \*******************************************************************************************************************/
/*! exports provided: ChunkedArrayBufferStream */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChunkedArrayBufferStream", function() { return ChunkedArrayBufferStream; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class ChunkedArrayBufferStream extends _Exports__WEBPACK_IMPORTED_MODULE_0__["Stream"] {
    constructor(targetChunkSize, streamId) {
        super(streamId);
        this.privTargetChunkSize = targetChunkSize;
        this.privNextBufferReadyBytes = 0;
    }
    writeStreamChunk(chunk) {
        // No pending write, and the buffer is the right size so write it.
        if (chunk.isEnd ||
            (0 === this.privNextBufferReadyBytes && chunk.buffer.byteLength === this.privTargetChunkSize)) {
            super.writeStreamChunk(chunk);
            return;
        }
        let bytesCopiedFromBuffer = 0;
        while (bytesCopiedFromBuffer < chunk.buffer.byteLength) {
            // Fill the next buffer.
            if (undefined === this.privNextBufferToWrite) {
                this.privNextBufferToWrite = new ArrayBuffer(this.privTargetChunkSize);
                this.privNextBufferStartTime = chunk.timeReceived;
            }
            // Find out how many bytes we can copy into the read buffer.
            const bytesToCopy = Math.min(chunk.buffer.byteLength - bytesCopiedFromBuffer, this.privTargetChunkSize - this.privNextBufferReadyBytes);
            const targetView = new Uint8Array(this.privNextBufferToWrite);
            const sourceView = new Uint8Array(chunk.buffer.slice(bytesCopiedFromBuffer, bytesToCopy + bytesCopiedFromBuffer));
            targetView.set(sourceView, this.privNextBufferReadyBytes);
            this.privNextBufferReadyBytes += bytesToCopy;
            bytesCopiedFromBuffer += bytesToCopy;
            // Are we ready to write?
            if (this.privNextBufferReadyBytes === this.privTargetChunkSize) {
                super.writeStreamChunk({
                    buffer: this.privNextBufferToWrite,
                    isEnd: false,
                    timeReceived: this.privNextBufferStartTime,
                });
                this.privNextBufferReadyBytes = 0;
                this.privNextBufferToWrite = undefined;
            }
        }
    }
    close() {
        // Send whatever is pending, then close the base class.
        if (0 !== this.privNextBufferReadyBytes && !this.isClosed) {
            super.writeStreamChunk({
                buffer: this.privNextBufferToWrite.slice(0, this.privNextBufferReadyBytes),
                isEnd: false,
                timeReceived: this.privNextBufferStartTime,
            });
        }
        super.close();
    }
}

//# sourceMappingURL=ChunkedArrayBufferStream.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionEvents.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionEvents.js ***!
  \***********************************************************************************************************/
/*! exports provided: ServiceEvent, ConnectionEvent, ConnectionStartEvent, ConnectionEstablishedEvent, ConnectionClosedEvent, ConnectionErrorEvent, ConnectionEstablishErrorEvent, ConnectionMessageReceivedEvent, ConnectionMessageSentEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ServiceEvent", function() { return ServiceEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionEvent", function() { return ConnectionEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionStartEvent", function() { return ConnectionStartEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionEstablishedEvent", function() { return ConnectionEstablishedEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionClosedEvent", function() { return ConnectionClosedEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionErrorEvent", function() { return ConnectionErrorEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionEstablishErrorEvent", function() { return ConnectionEstablishErrorEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessageReceivedEvent", function() { return ConnectionMessageReceivedEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessageSentEvent", function() { return ConnectionMessageSentEvent; });
/* harmony import */ var _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PlatformEvent */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class ServiceEvent extends _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["PlatformEvent"] {
    constructor(eventName, jsonstring, eventType = _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Info) {
        super(eventName, eventType);
        this.privJsonResult = jsonstring;
    }
    get jsonString() {
        return this.privJsonResult;
    }
}
class ConnectionEvent extends _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["PlatformEvent"] {
    constructor(eventName, connectionId, eventType = _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Info) {
        super(eventName, eventType);
        this.privConnectionId = connectionId;
    }
    get connectionId() {
        return this.privConnectionId;
    }
}
class ConnectionStartEvent extends ConnectionEvent {
    constructor(connectionId, uri, headers) {
        super("ConnectionStartEvent", connectionId);
        this.privUri = uri;
        this.privHeaders = headers;
    }
    get uri() {
        return this.privUri;
    }
    get headers() {
        return this.privHeaders;
    }
}
class ConnectionEstablishedEvent extends ConnectionEvent {
    constructor(connectionId) {
        super("ConnectionEstablishedEvent", connectionId);
    }
}
class ConnectionClosedEvent extends ConnectionEvent {
    constructor(connectionId, statusCode, reason) {
        super("ConnectionClosedEvent", connectionId, _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug);
        this.privReason = reason;
        this.privStatusCode = statusCode;
    }
    get reason() {
        return this.privReason;
    }
    get statusCode() {
        return this.privStatusCode;
    }
}
class ConnectionErrorEvent extends ConnectionEvent {
    constructor(connectionId, message, type) {
        super("ConnectionErrorEvent", connectionId, _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug);
        this.privMessage = message;
        this.privType = type;
    }
    get message() {
        return this.privMessage;
    }
    get type() {
        return this.privType;
    }
}
class ConnectionEstablishErrorEvent extends ConnectionEvent {
    constructor(connectionId, statuscode, reason) {
        super("ConnectionEstablishErrorEvent", connectionId, _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Error);
        this.privStatusCode = statuscode;
        this.privReason = reason;
    }
    get reason() {
        return this.privReason;
    }
    get statusCode() {
        return this.privStatusCode;
    }
}
class ConnectionMessageReceivedEvent extends ConnectionEvent {
    constructor(connectionId, networkReceivedTimeISO, message) {
        super("ConnectionMessageReceivedEvent", connectionId);
        this.privNetworkReceivedTime = networkReceivedTimeISO;
        this.privMessage = message;
    }
    get networkReceivedTime() {
        return this.privNetworkReceivedTime;
    }
    get message() {
        return this.privMessage;
    }
}
class ConnectionMessageSentEvent extends ConnectionEvent {
    constructor(connectionId, networkSentTimeISO, message) {
        super("ConnectionMessageSentEvent", connectionId);
        this.privNetworkSentTime = networkSentTimeISO;
        this.privMessage = message;
    }
    get networkSentTime() {
        return this.privNetworkSentTime;
    }
    get message() {
        return this.privMessage;
    }
}

//# sourceMappingURL=ConnectionEvents.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js ***!
  \************************************************************************************************************/
/*! exports provided: MessageType, ConnectionMessage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessageType", function() { return MessageType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessage", function() { return ConnectionMessage; });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _Guid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* eslint-disable @typescript-eslint/no-unsafe-return */
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


var MessageType;
(function (MessageType) {
    MessageType[MessageType["Text"] = 0] = "Text";
    MessageType[MessageType["Binary"] = 1] = "Binary";
})(MessageType || (MessageType = {}));
class ConnectionMessage {
    constructor(messageType, body, headers, id) {
        this.privBody = null;
        if (messageType === MessageType.Text && body && !(typeof (body) === "string")) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Payload must be a string");
        }
        if (messageType === MessageType.Binary && body && !(body instanceof ArrayBuffer)) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Payload must be ArrayBuffer");
        }
        this.privMessageType = messageType;
        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
        this.privBody = body;
        this.privHeaders = headers ? headers : {};
        this.privId = id ? id : Object(_Guid__WEBPACK_IMPORTED_MODULE_1__["createNoDashGuid"])();
        switch (this.messageType) {
            case MessageType.Binary:
                this.privSize = this.binaryBody !== null ? this.binaryBody.byteLength : 0;
                break;
            case MessageType.Text:
                this.privSize = this.textBody.length;
        }
    }
    get messageType() {
        return this.privMessageType;
    }
    get headers() {
        return this.privHeaders;
    }
    get body() {
        return this.privBody;
    }
    get textBody() {
        if (this.privMessageType === MessageType.Binary) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Not supported for binary message");
        }
        return this.privBody;
    }
    get binaryBody() {
        if (this.privMessageType === MessageType.Text) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Not supported for text message");
        }
        return this.privBody;
    }
    get id() {
        return this.privId;
    }
}

//# sourceMappingURL=ConnectionMessage.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionOpenResponse.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionOpenResponse.js ***!
  \*****************************************************************************************************************/
/*! exports provided: ConnectionOpenResponse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionOpenResponse", function() { return ConnectionOpenResponse; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class ConnectionOpenResponse {
    constructor(statusCode, reason) {
        this.privStatusCode = statusCode;
        this.privReason = reason;
    }
    get statusCode() {
        return this.privStatusCode;
    }
    get reason() {
        return this.privReason;
    }
}

//# sourceMappingURL=ConnectionOpenResponse.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/DialogEvents.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/DialogEvents.js ***!
  \*******************************************************************************************************/
/*! exports provided: DialogEvent, SendingAgentContextMessageEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogEvent", function() { return DialogEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SendingAgentContextMessageEvent", function() { return SendingAgentContextMessageEvent; });
/* harmony import */ var _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PlatformEvent */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class DialogEvent extends _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["PlatformEvent"] {
    constructor(eventName, eventType = _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Info) {
        super(eventName, eventType);
    }
}
class SendingAgentContextMessageEvent extends DialogEvent {
    constructor(agentConfig) {
        super("SendingAgentContextMessageEvent");
        this.privAgentConfig = agentConfig;
    }
    get agentConfig() {
        return this.privAgentConfig;
    }
}

//# sourceMappingURL=DialogEvents.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js ***!
  \************************************************************************************************/
/*! exports provided: ArgumentNullError, InvalidOperationError, ObjectDisposedError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ArgumentNullError", function() { return ArgumentNullError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvalidOperationError", function() { return InvalidOperationError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectDisposedError", function() { return ObjectDisposedError; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */
/**
 * The error that is thrown when an argument passed in is null.
 *
 * @export
 * @class ArgumentNullError
 * @extends {Error}
 */
class ArgumentNullError extends Error {
    /**
     * Creates an instance of ArgumentNullError.
     *
     * @param {string} argumentName - Name of the argument that is null
     *
     * @memberOf ArgumentNullError
     */
    constructor(argumentName) {
        super(argumentName);
        this.name = "ArgumentNull";
        this.message = argumentName;
    }
}
/**
 * The error that is thrown when an invalid operation is performed in the code.
 *
 * @export
 * @class InvalidOperationError
 * @extends {Error}
 */
class InvalidOperationError extends Error {
    /**
     * Creates an instance of InvalidOperationError.
     *
     * @param {string} error - The error
     *
     * @memberOf InvalidOperationError
     */
    constructor(error) {
        super(error);
        this.name = "InvalidOperation";
        this.message = error;
    }
}
/**
 * The error that is thrown when an object is disposed.
 *
 * @export
 * @class ObjectDisposedError
 * @extends {Error}
 */
class ObjectDisposedError extends Error {
    /**
     * Creates an instance of ObjectDisposedError.
     *
     * @param {string} objectName - The object that is disposed
     * @param {string} error - The error
     *
     * @memberOf ObjectDisposedError
     */
    constructor(objectName, error) {
        super(error);
        this.name = objectName + "ObjectDisposed";
        this.message = error;
    }
}

//# sourceMappingURL=Error.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/EventSource.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/EventSource.js ***!
  \******************************************************************************************************/
/*! exports provided: EventSource */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventSource", function() { return EventSource; });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _Guid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class EventSource {
    constructor(metadata) {
        this.privEventListeners = {};
        this.privIsDisposed = false;
        this.privConsoleListener = undefined;
        this.privMetadata = metadata;
    }
    onEvent(event) {
        if (this.isDisposed()) {
            throw (new _Error__WEBPACK_IMPORTED_MODULE_0__["ObjectDisposedError"]("EventSource"));
        }
        if (this.metadata) {
            for (const paramName in this.metadata) {
                if (paramName) {
                    if (event.metadata) {
                        if (!event.metadata[paramName]) {
                            event.metadata[paramName] = this.metadata[paramName];
                        }
                    }
                }
            }
        }
        for (const eventId in this.privEventListeners) {
            if (eventId && this.privEventListeners[eventId]) {
                this.privEventListeners[eventId](event);
            }
        }
    }
    attach(onEventCallback) {
        const id = Object(_Guid__WEBPACK_IMPORTED_MODULE_1__["createNoDashGuid"])();
        this.privEventListeners[id] = onEventCallback;
        return {
            detach: () => {
                delete this.privEventListeners[id];
                return Promise.resolve();
            },
        };
    }
    attachListener(listener) {
        return this.attach((e) => listener.onEvent(e));
    }
    attachConsoleListener(listener) {
        if (!!this.privConsoleListener) {
            void this.privConsoleListener.detach(); // Detach implementation for eventListeners is synchronous
        }
        this.privConsoleListener = this.attach((e) => listener.onEvent(e));
        return this.privConsoleListener;
    }
    isDisposed() {
        return this.privIsDisposed;
    }
    dispose() {
        this.privEventListeners = null;
        this.privIsDisposed = true;
    }
    get metadata() {
        return this.privMetadata;
    }
}

//# sourceMappingURL=EventSource.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js ***!
  \*************************************************************************************************/
/*! exports provided: Events */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Events", function() { return Events; });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _EventSource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EventSource */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/EventSource.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class Events {
    static setEventSource(eventSource) {
        if (!eventSource) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("eventSource");
        }
        Events.privInstance = eventSource;
    }
    static get instance() {
        return Events.privInstance;
    }
}
Events.privInstance = new _EventSource__WEBPACK_IMPORTED_MODULE_1__["EventSource"]();

//# sourceMappingURL=Events.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js ***!
  \**************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AudioSourceEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/AudioSourceEvents.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioSourceEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioSourceEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioSourceInitializingEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioSourceInitializingEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioSourceReadyEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioSourceReadyEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioSourceOffEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioSourceOffEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioSourceErrorEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioSourceErrorEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioStreamNodeEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeAttachingEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioStreamNodeAttachingEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeAttachedEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioStreamNodeAttachedEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeDetachedEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioStreamNodeDetachedEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeErrorEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioStreamNodeErrorEvent"]; });

/* harmony import */ var _ConnectionEvents__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConnectionEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionEvents.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ServiceEvent", function() { return _ConnectionEvents__WEBPACK_IMPORTED_MODULE_1__["ServiceEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionEvent", function() { return _ConnectionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectionEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionStartEvent", function() { return _ConnectionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectionStartEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionEstablishedEvent", function() { return _ConnectionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectionEstablishedEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionClosedEvent", function() { return _ConnectionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectionClosedEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionErrorEvent", function() { return _ConnectionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectionErrorEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionEstablishErrorEvent", function() { return _ConnectionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectionEstablishErrorEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessageReceivedEvent", function() { return _ConnectionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectionMessageReceivedEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessageSentEvent", function() { return _ConnectionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectionMessageSentEvent"]; });

/* harmony import */ var _ConnectionMessage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConnectionMessage */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MessageType", function() { return _ConnectionMessage__WEBPACK_IMPORTED_MODULE_2__["MessageType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessage", function() { return _ConnectionMessage__WEBPACK_IMPORTED_MODULE_2__["ConnectionMessage"]; });

/* harmony import */ var _ConnectionOpenResponse__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ConnectionOpenResponse */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionOpenResponse.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionOpenResponse", function() { return _ConnectionOpenResponse__WEBPACK_IMPORTED_MODULE_3__["ConnectionOpenResponse"]; });

/* harmony import */ var _DialogEvents__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./DialogEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/DialogEvents.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DialogEvent", function() { return _DialogEvents__WEBPACK_IMPORTED_MODULE_4__["DialogEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SendingAgentContextMessageEvent", function() { return _DialogEvents__WEBPACK_IMPORTED_MODULE_4__["SendingAgentContextMessageEvent"]; });

/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ArgumentNullError", function() { return _Error__WEBPACK_IMPORTED_MODULE_5__["ArgumentNullError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InvalidOperationError", function() { return _Error__WEBPACK_IMPORTED_MODULE_5__["InvalidOperationError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ObjectDisposedError", function() { return _Error__WEBPACK_IMPORTED_MODULE_5__["ObjectDisposedError"]; });

/* harmony import */ var _Events__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Events */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Events", function() { return _Events__WEBPACK_IMPORTED_MODULE_6__["Events"]; });

/* harmony import */ var _EventSource__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./EventSource */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/EventSource.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EventSource", function() { return _EventSource__WEBPACK_IMPORTED_MODULE_7__["EventSource"]; });

/* harmony import */ var _Guid__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createGuid", function() { return _Guid__WEBPACK_IMPORTED_MODULE_8__["createGuid"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createNoDashGuid", function() { return _Guid__WEBPACK_IMPORTED_MODULE_8__["createNoDashGuid"]; });

/* harmony import */ var _IAudioSource__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./IAudioSource */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IAudioSource.js");
/* harmony import */ var _IAudioSource__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_IAudioSource__WEBPACK_IMPORTED_MODULE_9__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _IAudioSource__WEBPACK_IMPORTED_MODULE_9__) if(["default","TranslationStatus","AudioSourceEvent","AudioSourceInitializingEvent","AudioSourceReadyEvent","AudioSourceOffEvent","AudioSourceErrorEvent","AudioStreamNodeEvent","AudioStreamNodeAttachingEvent","AudioStreamNodeAttachedEvent","AudioStreamNodeDetachedEvent","AudioStreamNodeErrorEvent","ServiceEvent","ConnectionEvent","ConnectionStartEvent","ConnectionEstablishedEvent","ConnectionClosedEvent","ConnectionErrorEvent","ConnectionEstablishErrorEvent","ConnectionMessageReceivedEvent","ConnectionMessageSentEvent","MessageType","ConnectionMessage","ConnectionOpenResponse","DialogEvent","SendingAgentContextMessageEvent","ArgumentNullError","InvalidOperationError","ObjectDisposedError","Events","EventSource","createGuid","createNoDashGuid"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _IAudioSource__WEBPACK_IMPORTED_MODULE_9__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _IConnection__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./IConnection */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IConnection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionState", function() { return _IConnection__WEBPACK_IMPORTED_MODULE_10__["ConnectionState"]; });

/* harmony import */ var _IDetachable__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./IDetachable */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IDetachable.js");
/* harmony import */ var _IDetachable__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_IDetachable__WEBPACK_IMPORTED_MODULE_11__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _IDetachable__WEBPACK_IMPORTED_MODULE_11__) if(["default","TranslationStatus","AudioSourceEvent","AudioSourceInitializingEvent","AudioSourceReadyEvent","AudioSourceOffEvent","AudioSourceErrorEvent","AudioStreamNodeEvent","AudioStreamNodeAttachingEvent","AudioStreamNodeAttachedEvent","AudioStreamNodeDetachedEvent","AudioStreamNodeErrorEvent","ServiceEvent","ConnectionEvent","ConnectionStartEvent","ConnectionEstablishedEvent","ConnectionClosedEvent","ConnectionErrorEvent","ConnectionEstablishErrorEvent","ConnectionMessageReceivedEvent","ConnectionMessageSentEvent","MessageType","ConnectionMessage","ConnectionOpenResponse","DialogEvent","SendingAgentContextMessageEvent","ArgumentNullError","InvalidOperationError","ObjectDisposedError","Events","EventSource","createGuid","createNoDashGuid","ConnectionState"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _IDetachable__WEBPACK_IMPORTED_MODULE_11__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _IDictionary__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./IDictionary */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IDictionary.js");
/* harmony import */ var _IDictionary__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_IDictionary__WEBPACK_IMPORTED_MODULE_12__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _IDictionary__WEBPACK_IMPORTED_MODULE_12__) if(["default","TranslationStatus","AudioSourceEvent","AudioSourceInitializingEvent","AudioSourceReadyEvent","AudioSourceOffEvent","AudioSourceErrorEvent","AudioStreamNodeEvent","AudioStreamNodeAttachingEvent","AudioStreamNodeAttachedEvent","AudioStreamNodeDetachedEvent","AudioStreamNodeErrorEvent","ServiceEvent","ConnectionEvent","ConnectionStartEvent","ConnectionEstablishedEvent","ConnectionClosedEvent","ConnectionErrorEvent","ConnectionEstablishErrorEvent","ConnectionMessageReceivedEvent","ConnectionMessageSentEvent","MessageType","ConnectionMessage","ConnectionOpenResponse","DialogEvent","SendingAgentContextMessageEvent","ArgumentNullError","InvalidOperationError","ObjectDisposedError","Events","EventSource","createGuid","createNoDashGuid","ConnectionState"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _IDictionary__WEBPACK_IMPORTED_MODULE_12__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _IDisposable__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./IDisposable */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IDisposable.js");
/* harmony import */ var _IDisposable__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_IDisposable__WEBPACK_IMPORTED_MODULE_13__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _IDisposable__WEBPACK_IMPORTED_MODULE_13__) if(["default","TranslationStatus","AudioSourceEvent","AudioSourceInitializingEvent","AudioSourceReadyEvent","AudioSourceOffEvent","AudioSourceErrorEvent","AudioStreamNodeEvent","AudioStreamNodeAttachingEvent","AudioStreamNodeAttachedEvent","AudioStreamNodeDetachedEvent","AudioStreamNodeErrorEvent","ServiceEvent","ConnectionEvent","ConnectionStartEvent","ConnectionEstablishedEvent","ConnectionClosedEvent","ConnectionErrorEvent","ConnectionEstablishErrorEvent","ConnectionMessageReceivedEvent","ConnectionMessageSentEvent","MessageType","ConnectionMessage","ConnectionOpenResponse","DialogEvent","SendingAgentContextMessageEvent","ArgumentNullError","InvalidOperationError","ObjectDisposedError","Events","EventSource","createGuid","createNoDashGuid","ConnectionState"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _IDisposable__WEBPACK_IMPORTED_MODULE_13__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _IEventSource__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./IEventSource */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IEventSource.js");
/* harmony import */ var _IEventSource__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_IEventSource__WEBPACK_IMPORTED_MODULE_14__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _IEventSource__WEBPACK_IMPORTED_MODULE_14__) if(["default","TranslationStatus","AudioSourceEvent","AudioSourceInitializingEvent","AudioSourceReadyEvent","AudioSourceOffEvent","AudioSourceErrorEvent","AudioStreamNodeEvent","AudioStreamNodeAttachingEvent","AudioStreamNodeAttachedEvent","AudioStreamNodeDetachedEvent","AudioStreamNodeErrorEvent","ServiceEvent","ConnectionEvent","ConnectionStartEvent","ConnectionEstablishedEvent","ConnectionClosedEvent","ConnectionErrorEvent","ConnectionEstablishErrorEvent","ConnectionMessageReceivedEvent","ConnectionMessageSentEvent","MessageType","ConnectionMessage","ConnectionOpenResponse","DialogEvent","SendingAgentContextMessageEvent","ArgumentNullError","InvalidOperationError","ObjectDisposedError","Events","EventSource","createGuid","createNoDashGuid","ConnectionState"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _IEventSource__WEBPACK_IMPORTED_MODULE_14__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _IErrorMessages__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./IErrorMessages */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IErrorMessages.js");
/* harmony import */ var _IErrorMessages__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_IErrorMessages__WEBPACK_IMPORTED_MODULE_15__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _IErrorMessages__WEBPACK_IMPORTED_MODULE_15__) if(["default","TranslationStatus","AudioSourceEvent","AudioSourceInitializingEvent","AudioSourceReadyEvent","AudioSourceOffEvent","AudioSourceErrorEvent","AudioStreamNodeEvent","AudioStreamNodeAttachingEvent","AudioStreamNodeAttachedEvent","AudioStreamNodeDetachedEvent","AudioStreamNodeErrorEvent","ServiceEvent","ConnectionEvent","ConnectionStartEvent","ConnectionEstablishedEvent","ConnectionClosedEvent","ConnectionErrorEvent","ConnectionEstablishErrorEvent","ConnectionMessageReceivedEvent","ConnectionMessageSentEvent","MessageType","ConnectionMessage","ConnectionOpenResponse","DialogEvent","SendingAgentContextMessageEvent","ArgumentNullError","InvalidOperationError","ObjectDisposedError","Events","EventSource","createGuid","createNoDashGuid","ConnectionState"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _IErrorMessages__WEBPACK_IMPORTED_MODULE_15__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _ITimer__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./ITimer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ITimer.js");
/* harmony import */ var _ITimer__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_ITimer__WEBPACK_IMPORTED_MODULE_16__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _ITimer__WEBPACK_IMPORTED_MODULE_16__) if(["default","TranslationStatus","AudioSourceEvent","AudioSourceInitializingEvent","AudioSourceReadyEvent","AudioSourceOffEvent","AudioSourceErrorEvent","AudioStreamNodeEvent","AudioStreamNodeAttachingEvent","AudioStreamNodeAttachedEvent","AudioStreamNodeDetachedEvent","AudioStreamNodeErrorEvent","ServiceEvent","ConnectionEvent","ConnectionStartEvent","ConnectionEstablishedEvent","ConnectionClosedEvent","ConnectionErrorEvent","ConnectionEstablishErrorEvent","ConnectionMessageReceivedEvent","ConnectionMessageSentEvent","MessageType","ConnectionMessage","ConnectionOpenResponse","DialogEvent","SendingAgentContextMessageEvent","ArgumentNullError","InvalidOperationError","ObjectDisposedError","Events","EventSource","createGuid","createNoDashGuid","ConnectionState"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _ITimer__WEBPACK_IMPORTED_MODULE_16__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _IWebsocketMessageFormatter__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./IWebsocketMessageFormatter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IWebsocketMessageFormatter.js");
/* harmony import */ var _IWebsocketMessageFormatter__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_IWebsocketMessageFormatter__WEBPACK_IMPORTED_MODULE_17__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _IWebsocketMessageFormatter__WEBPACK_IMPORTED_MODULE_17__) if(["default","TranslationStatus","AudioSourceEvent","AudioSourceInitializingEvent","AudioSourceReadyEvent","AudioSourceOffEvent","AudioSourceErrorEvent","AudioStreamNodeEvent","AudioStreamNodeAttachingEvent","AudioStreamNodeAttachedEvent","AudioStreamNodeDetachedEvent","AudioStreamNodeErrorEvent","ServiceEvent","ConnectionEvent","ConnectionStartEvent","ConnectionEstablishedEvent","ConnectionClosedEvent","ConnectionErrorEvent","ConnectionEstablishErrorEvent","ConnectionMessageReceivedEvent","ConnectionMessageSentEvent","MessageType","ConnectionMessage","ConnectionOpenResponse","DialogEvent","SendingAgentContextMessageEvent","ArgumentNullError","InvalidOperationError","ObjectDisposedError","Events","EventSource","createGuid","createNoDashGuid","ConnectionState"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _IWebsocketMessageFormatter__WEBPACK_IMPORTED_MODULE_17__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _List__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./List */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/List.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "List", function() { return _List__WEBPACK_IMPORTED_MODULE_18__["List"]; });

/* harmony import */ var _PlatformEvent__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./PlatformEvent */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EventType", function() { return _PlatformEvent__WEBPACK_IMPORTED_MODULE_19__["EventType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PlatformEvent", function() { return _PlatformEvent__WEBPACK_IMPORTED_MODULE_19__["PlatformEvent"]; });

/* harmony import */ var _Promise__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./Promise */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PromiseState", function() { return _Promise__WEBPACK_IMPORTED_MODULE_20__["PromiseState"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PromiseResult", function() { return _Promise__WEBPACK_IMPORTED_MODULE_20__["PromiseResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PromiseResultEventSource", function() { return _Promise__WEBPACK_IMPORTED_MODULE_20__["PromiseResultEventSource"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Deferred", function() { return _Promise__WEBPACK_IMPORTED_MODULE_20__["Deferred"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Sink", function() { return _Promise__WEBPACK_IMPORTED_MODULE_20__["Sink"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "marshalPromiseToCallbacks", function() { return _Promise__WEBPACK_IMPORTED_MODULE_20__["marshalPromiseToCallbacks"]; });

/* harmony import */ var _Queue__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./Queue */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Queue.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Queue", function() { return _Queue__WEBPACK_IMPORTED_MODULE_21__["Queue"]; });

/* harmony import */ var _RawWebsocketMessage__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./RawWebsocketMessage */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RawWebsocketMessage.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RawWebsocketMessage", function() { return _RawWebsocketMessage__WEBPACK_IMPORTED_MODULE_22__["RawWebsocketMessage"]; });

/* harmony import */ var _RiffPcmEncoder__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./RiffPcmEncoder */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RiffPcmEncoder.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RiffPcmEncoder", function() { return _RiffPcmEncoder__WEBPACK_IMPORTED_MODULE_23__["RiffPcmEncoder"]; });

/* harmony import */ var _Stream__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./Stream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Stream.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Stream", function() { return _Stream__WEBPACK_IMPORTED_MODULE_24__["Stream"]; });

/* harmony import */ var _common_speech_TranslationStatus__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../common.speech/TranslationStatus */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationStatus.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationStatus", function() { return _common_speech_TranslationStatus__WEBPACK_IMPORTED_MODULE_25__["TranslationStatus"]; });

/* harmony import */ var _ChunkedArrayBufferStream__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./ChunkedArrayBufferStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ChunkedArrayBufferStream.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ChunkedArrayBufferStream", function() { return _ChunkedArrayBufferStream__WEBPACK_IMPORTED_MODULE_26__["ChunkedArrayBufferStream"]; });

/* harmony import */ var _IAudioDestination__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./IAudioDestination */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IAudioDestination.js");
/* harmony import */ var _IAudioDestination__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(_IAudioDestination__WEBPACK_IMPORTED_MODULE_27__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _IAudioDestination__WEBPACK_IMPORTED_MODULE_27__) if(["default","TranslationStatus","AudioSourceEvent","AudioSourceInitializingEvent","AudioSourceReadyEvent","AudioSourceOffEvent","AudioSourceErrorEvent","AudioStreamNodeEvent","AudioStreamNodeAttachingEvent","AudioStreamNodeAttachedEvent","AudioStreamNodeDetachedEvent","AudioStreamNodeErrorEvent","ServiceEvent","ConnectionEvent","ConnectionStartEvent","ConnectionEstablishedEvent","ConnectionClosedEvent","ConnectionErrorEvent","ConnectionEstablishErrorEvent","ConnectionMessageReceivedEvent","ConnectionMessageSentEvent","MessageType","ConnectionMessage","ConnectionOpenResponse","DialogEvent","SendingAgentContextMessageEvent","ArgumentNullError","InvalidOperationError","ObjectDisposedError","Events","EventSource","createGuid","createNoDashGuid","ConnectionState","List","EventType","PlatformEvent","PromiseState","PromiseResult","PromiseResultEventSource","Deferred","Sink","marshalPromiseToCallbacks","Queue","RawWebsocketMessage","RiffPcmEncoder","Stream","ChunkedArrayBufferStream"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _IAudioDestination__WEBPACK_IMPORTED_MODULE_27__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _Timeout__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./Timeout */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Timeout.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Timeout", function() { return _Timeout__WEBPACK_IMPORTED_MODULE_28__["Timeout"]; });

/* harmony import */ var _OCSPEvents__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./OCSPEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/OCSPEvents.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OCSPEvent", function() { return _OCSPEvents__WEBPACK_IMPORTED_MODULE_29__["OCSPEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OCSPMemoryCacheHitEvent", function() { return _OCSPEvents__WEBPACK_IMPORTED_MODULE_29__["OCSPMemoryCacheHitEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OCSPCacheMissEvent", function() { return _OCSPEvents__WEBPACK_IMPORTED_MODULE_29__["OCSPCacheMissEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OCSPDiskCacheHitEvent", function() { return _OCSPEvents__WEBPACK_IMPORTED_MODULE_29__["OCSPDiskCacheHitEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OCSPCacheUpdateNeededEvent", function() { return _OCSPEvents__WEBPACK_IMPORTED_MODULE_29__["OCSPCacheUpdateNeededEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OCSPMemoryCacheStoreEvent", function() { return _OCSPEvents__WEBPACK_IMPORTED_MODULE_29__["OCSPMemoryCacheStoreEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OCSPDiskCacheStoreEvent", function() { return _OCSPEvents__WEBPACK_IMPORTED_MODULE_29__["OCSPDiskCacheStoreEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OCSPCacheUpdateCompleteEvent", function() { return _OCSPEvents__WEBPACK_IMPORTED_MODULE_29__["OCSPCacheUpdateCompleteEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OCSPStapleReceivedEvent", function() { return _OCSPEvents__WEBPACK_IMPORTED_MODULE_29__["OCSPStapleReceivedEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OCSPWSUpgradeStartedEvent", function() { return _OCSPEvents__WEBPACK_IMPORTED_MODULE_29__["OCSPWSUpgradeStartedEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OCSPCacheEntryExpiredEvent", function() { return _OCSPEvents__WEBPACK_IMPORTED_MODULE_29__["OCSPCacheEntryExpiredEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OCSPCacheEntryNeedsRefreshEvent", function() { return _OCSPEvents__WEBPACK_IMPORTED_MODULE_29__["OCSPCacheEntryNeedsRefreshEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OCSPCacheHitEvent", function() { return _OCSPEvents__WEBPACK_IMPORTED_MODULE_29__["OCSPCacheHitEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OCSPVerificationFailedEvent", function() { return _OCSPEvents__WEBPACK_IMPORTED_MODULE_29__["OCSPVerificationFailedEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OCSPCacheFetchErrorEvent", function() { return _OCSPEvents__WEBPACK_IMPORTED_MODULE_29__["OCSPCacheFetchErrorEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OCSPResponseRetrievedEvent", function() { return _OCSPEvents__WEBPACK_IMPORTED_MODULE_29__["OCSPResponseRetrievedEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OCSPCacheUpdateErrorEvent", function() { return _OCSPEvents__WEBPACK_IMPORTED_MODULE_29__["OCSPCacheUpdateErrorEvent"]; });

/* harmony import */ var _BackgroundError__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./BackgroundError */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/BackgroundError.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BackgroundEvent", function() { return _BackgroundError__WEBPACK_IMPORTED_MODULE_30__["BackgroundEvent"]; });

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
































//# sourceMappingURL=Exports.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js ***!
  \***********************************************************************************************/
/*! exports provided: createGuid, createNoDashGuid */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createGuid", function() { return createGuid; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createNoDashGuid", function() { return createNoDashGuid; });
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/index.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

const createGuid = () => Object(uuid__WEBPACK_IMPORTED_MODULE_0__["v4"])();
const createNoDashGuid = () => createGuid().replace(new RegExp("-", "g"), "").toUpperCase();


//# sourceMappingURL=Guid.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IAudioDestination.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IAudioDestination.js ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

//# sourceMappingURL=IAudioDestination.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IAudioSource.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IAudioSource.js ***!
  \*******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

//# sourceMappingURL=IAudioSource.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IConnection.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IConnection.js ***!
  \******************************************************************************************************/
/*! exports provided: ConnectionState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionState", function() { return ConnectionState; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var ConnectionState;
(function (ConnectionState) {
    ConnectionState[ConnectionState["None"] = 0] = "None";
    ConnectionState[ConnectionState["Connected"] = 1] = "Connected";
    ConnectionState[ConnectionState["Connecting"] = 2] = "Connecting";
    ConnectionState[ConnectionState["Disconnected"] = 3] = "Disconnected";
})(ConnectionState || (ConnectionState = {}));

//# sourceMappingURL=IConnection.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IDetachable.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IDetachable.js ***!
  \******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

//# sourceMappingURL=IDetachable.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IDictionary.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IDictionary.js ***!
  \******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

//# sourceMappingURL=IDictionary.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IDisposable.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IDisposable.js ***!
  \******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

//# sourceMappingURL=IDisposable.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IErrorMessages.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IErrorMessages.js ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {



//# sourceMappingURL=IErrorMessages.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IEventSource.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IEventSource.js ***!
  \*******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

//# sourceMappingURL=IEventSource.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ITimer.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ITimer.js ***!
  \*************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

//# sourceMappingURL=ITimer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IWebsocketMessageFormatter.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IWebsocketMessageFormatter.js ***!
  \*********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

//# sourceMappingURL=IWebsocketMessageFormatter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/List.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/List.js ***!
  \***********************************************************************************************/
/*! exports provided: List */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "List", function() { return List; });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class List {
    constructor(list) {
        this.privSubscriptionIdCounter = 0;
        this.privAddSubscriptions = {};
        this.privRemoveSubscriptions = {};
        this.privDisposedSubscriptions = {};
        this.privDisposeReason = null;
        this.privList = [];
        // copy the list rather than taking as is.
        if (list) {
            for (const item of list) {
                this.privList.push(item);
            }
        }
    }
    get(itemIndex) {
        this.throwIfDisposed();
        return this.privList[itemIndex];
    }
    first() {
        return this.get(0);
    }
    last() {
        return this.get(this.length() - 1);
    }
    add(item) {
        this.throwIfDisposed();
        this.insertAt(this.privList.length, item);
    }
    insertAt(index, item) {
        this.throwIfDisposed();
        if (index === 0) {
            this.privList.unshift(item);
        }
        else if (index === this.privList.length) {
            this.privList.push(item);
        }
        else {
            this.privList.splice(index, 0, item);
        }
        this.triggerSubscriptions(this.privAddSubscriptions);
    }
    removeFirst() {
        this.throwIfDisposed();
        return this.removeAt(0);
    }
    removeLast() {
        this.throwIfDisposed();
        return this.removeAt(this.length() - 1);
    }
    removeAt(index) {
        this.throwIfDisposed();
        return this.remove(index, 1)[0];
    }
    remove(index, count) {
        this.throwIfDisposed();
        const removedElements = this.privList.splice(index, count);
        this.triggerSubscriptions(this.privRemoveSubscriptions);
        return removedElements;
    }
    clear() {
        this.throwIfDisposed();
        this.remove(0, this.length());
    }
    length() {
        this.throwIfDisposed();
        return this.privList.length;
    }
    onAdded(addedCallback) {
        this.throwIfDisposed();
        const subscriptionId = this.privSubscriptionIdCounter++;
        this.privAddSubscriptions[subscriptionId] = addedCallback;
        return {
            detach: () => {
                delete this.privAddSubscriptions[subscriptionId];
                return Promise.resolve();
            },
        };
    }
    onRemoved(removedCallback) {
        this.throwIfDisposed();
        const subscriptionId = this.privSubscriptionIdCounter++;
        this.privRemoveSubscriptions[subscriptionId] = removedCallback;
        return {
            detach: () => {
                delete this.privRemoveSubscriptions[subscriptionId];
                return Promise.resolve();
            },
        };
    }
    onDisposed(disposedCallback) {
        this.throwIfDisposed();
        const subscriptionId = this.privSubscriptionIdCounter++;
        this.privDisposedSubscriptions[subscriptionId] = disposedCallback;
        return {
            detach: () => {
                delete this.privDisposedSubscriptions[subscriptionId];
                return Promise.resolve();
            },
        };
    }
    join(seperator) {
        this.throwIfDisposed();
        return this.privList.join(seperator);
    }
    toArray() {
        const cloneCopy = Array();
        this.privList.forEach((val) => {
            cloneCopy.push(val);
        });
        return cloneCopy;
    }
    any(callback) {
        this.throwIfDisposed();
        if (callback) {
            return this.where(callback).length() > 0;
        }
        else {
            return this.length() > 0;
        }
    }
    all(callback) {
        this.throwIfDisposed();
        return this.where(callback).length() === this.length();
    }
    forEach(callback) {
        this.throwIfDisposed();
        for (let i = 0; i < this.length(); i++) {
            callback(this.privList[i], i);
        }
    }
    select(callback) {
        this.throwIfDisposed();
        const selectList = [];
        for (let i = 0; i < this.privList.length; i++) {
            selectList.push(callback(this.privList[i], i));
        }
        return new List(selectList);
    }
    where(callback) {
        this.throwIfDisposed();
        const filteredList = new List();
        for (let i = 0; i < this.privList.length; i++) {
            if (callback(this.privList[i], i)) {
                filteredList.add(this.privList[i]);
            }
        }
        return filteredList;
    }
    orderBy(compareFn) {
        this.throwIfDisposed();
        const clonedArray = this.toArray();
        const orderedArray = clonedArray.sort(compareFn);
        return new List(orderedArray);
    }
    orderByDesc(compareFn) {
        this.throwIfDisposed();
        return this.orderBy((a, b) => compareFn(b, a));
    }
    clone() {
        this.throwIfDisposed();
        return new List(this.toArray());
    }
    concat(list) {
        this.throwIfDisposed();
        return new List(this.privList.concat(list.toArray()));
    }
    concatArray(array) {
        this.throwIfDisposed();
        return new List(this.privList.concat(array));
    }
    isDisposed() {
        return this.privList == null;
    }
    dispose(reason) {
        if (!this.isDisposed()) {
            this.privDisposeReason = reason;
            this.privList = null;
            this.privAddSubscriptions = null;
            this.privRemoveSubscriptions = null;
            this.triggerSubscriptions(this.privDisposedSubscriptions);
        }
    }
    throwIfDisposed() {
        if (this.isDisposed()) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__["ObjectDisposedError"]("List", this.privDisposeReason);
        }
    }
    triggerSubscriptions(subscriptions) {
        if (subscriptions) {
            for (const subscriptionId in subscriptions) {
                if (subscriptionId) {
                    subscriptions[subscriptionId]();
                }
            }
        }
    }
}

//# sourceMappingURL=List.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/OCSPEvents.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/OCSPEvents.js ***!
  \*****************************************************************************************************/
/*! exports provided: OCSPEvent, OCSPMemoryCacheHitEvent, OCSPCacheMissEvent, OCSPDiskCacheHitEvent, OCSPCacheUpdateNeededEvent, OCSPMemoryCacheStoreEvent, OCSPDiskCacheStoreEvent, OCSPCacheUpdateCompleteEvent, OCSPStapleReceivedEvent, OCSPWSUpgradeStartedEvent, OCSPCacheEntryExpiredEvent, OCSPCacheEntryNeedsRefreshEvent, OCSPCacheHitEvent, OCSPVerificationFailedEvent, OCSPCacheFetchErrorEvent, OCSPResponseRetrievedEvent, OCSPCacheUpdateErrorEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OCSPEvent", function() { return OCSPEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OCSPMemoryCacheHitEvent", function() { return OCSPMemoryCacheHitEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OCSPCacheMissEvent", function() { return OCSPCacheMissEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OCSPDiskCacheHitEvent", function() { return OCSPDiskCacheHitEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OCSPCacheUpdateNeededEvent", function() { return OCSPCacheUpdateNeededEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OCSPMemoryCacheStoreEvent", function() { return OCSPMemoryCacheStoreEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OCSPDiskCacheStoreEvent", function() { return OCSPDiskCacheStoreEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OCSPCacheUpdateCompleteEvent", function() { return OCSPCacheUpdateCompleteEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OCSPStapleReceivedEvent", function() { return OCSPStapleReceivedEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OCSPWSUpgradeStartedEvent", function() { return OCSPWSUpgradeStartedEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OCSPCacheEntryExpiredEvent", function() { return OCSPCacheEntryExpiredEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OCSPCacheEntryNeedsRefreshEvent", function() { return OCSPCacheEntryNeedsRefreshEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OCSPCacheHitEvent", function() { return OCSPCacheHitEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OCSPVerificationFailedEvent", function() { return OCSPVerificationFailedEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OCSPCacheFetchErrorEvent", function() { return OCSPCacheFetchErrorEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OCSPResponseRetrievedEvent", function() { return OCSPResponseRetrievedEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OCSPCacheUpdateErrorEvent", function() { return OCSPCacheUpdateErrorEvent; });
/* harmony import */ var _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PlatformEvent */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */

class OCSPEvent extends _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["PlatformEvent"] {
    constructor(eventName, eventType, signature) {
        super(eventName, eventType);
        this.privSignature = signature;
    }
}
class OCSPMemoryCacheHitEvent extends OCSPEvent {
    constructor(signature) {
        super("OCSPMemoryCacheHitEvent", _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug, signature);
    }
}
class OCSPCacheMissEvent extends OCSPEvent {
    constructor(signature) {
        super("OCSPCacheMissEvent", _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug, signature);
    }
}
class OCSPDiskCacheHitEvent extends OCSPEvent {
    constructor(signature) {
        super("OCSPDiskCacheHitEvent", _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug, signature);
    }
}
class OCSPCacheUpdateNeededEvent extends OCSPEvent {
    constructor(signature) {
        super("OCSPCacheUpdateNeededEvent", _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug, signature);
    }
}
class OCSPMemoryCacheStoreEvent extends OCSPEvent {
    constructor(signature) {
        super("OCSPMemoryCacheStoreEvent", _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug, signature);
    }
}
class OCSPDiskCacheStoreEvent extends OCSPEvent {
    constructor(signature) {
        super("OCSPDiskCacheStoreEvent", _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug, signature);
    }
}
class OCSPCacheUpdateCompleteEvent extends OCSPEvent {
    constructor(signature) {
        super("OCSPCacheUpdateCompleteEvent", _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug, signature);
    }
}
class OCSPStapleReceivedEvent extends OCSPEvent {
    constructor() {
        super("OCSPStapleReceivedEvent", _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug, "");
    }
}
class OCSPWSUpgradeStartedEvent extends OCSPEvent {
    constructor(serialNumber) {
        super("OCSPWSUpgradeStartedEvent", _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug, serialNumber);
    }
}
class OCSPCacheEntryExpiredEvent extends OCSPEvent {
    constructor(serialNumber, expireTime) {
        super("OCSPCacheEntryExpiredEvent", _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug, serialNumber);
        this.privExpireTime = expireTime;
    }
}
class OCSPCacheEntryNeedsRefreshEvent extends OCSPEvent {
    constructor(serialNumber, startTime, expireTime) {
        super("OCSPCacheEntryNeedsRefreshEvent", _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug, serialNumber);
        this.privExpireTime = expireTime;
        this.privStartTime = startTime;
    }
}
class OCSPCacheHitEvent extends OCSPEvent {
    constructor(serialNumber, startTime, expireTime) {
        super("OCSPCacheHitEvent", _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug, serialNumber);
        this.privExpireTime = expireTime;
        this.privExpireTimeString = new Date(expireTime).toLocaleDateString();
        this.privStartTime = startTime;
        this.privStartTimeString = new Date(startTime).toLocaleTimeString();
    }
}
class OCSPVerificationFailedEvent extends OCSPEvent {
    constructor(serialNumber, error) {
        super("OCSPVerificationFailedEvent", _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug, serialNumber);
        this.privError = error;
    }
}
class OCSPCacheFetchErrorEvent extends OCSPEvent {
    constructor(serialNumber, error) {
        super("OCSPCacheFetchErrorEvent", _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug, serialNumber);
        this.privError = error;
    }
}
class OCSPResponseRetrievedEvent extends OCSPEvent {
    constructor(serialNumber) {
        super("OCSPResponseRetrievedEvent", _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug, serialNumber);
    }
}
class OCSPCacheUpdateErrorEvent extends OCSPEvent {
    constructor(serialNumber, error) {
        super("OCSPCacheUpdateErrorEvent", _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug, serialNumber);
        this.privError = error;
    }
}

//# sourceMappingURL=OCSPEvents.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js ***!
  \********************************************************************************************************/
/*! exports provided: EventType, PlatformEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventType", function() { return EventType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlatformEvent", function() { return PlatformEvent; });
/* harmony import */ var _Guid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

var EventType;
(function (EventType) {
    EventType[EventType["Debug"] = 0] = "Debug";
    EventType[EventType["Info"] = 1] = "Info";
    EventType[EventType["Warning"] = 2] = "Warning";
    EventType[EventType["Error"] = 3] = "Error";
    EventType[EventType["None"] = 4] = "None";
})(EventType || (EventType = {}));
class PlatformEvent {
    constructor(eventName, eventType) {
        this.privName = eventName;
        this.privEventId = Object(_Guid__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        this.privEventTime = new Date().toISOString();
        this.privEventType = eventType;
        this.privMetadata = {};
    }
    get name() {
        return this.privName;
    }
    get eventId() {
        return this.privEventId;
    }
    get eventTime() {
        return this.privEventTime;
    }
    get eventType() {
        return this.privEventType;
    }
    get metadata() {
        return this.privMetadata;
    }
}

//# sourceMappingURL=PlatformEvent.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js ***!
  \**************************************************************************************************/
/*! exports provided: PromiseState, PromiseResult, PromiseResultEventSource, Deferred, Sink, marshalPromiseToCallbacks */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PromiseState", function() { return PromiseState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PromiseResult", function() { return PromiseResult; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PromiseResultEventSource", function() { return PromiseResultEventSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Deferred", function() { return Deferred; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Sink", function() { return Sink; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "marshalPromiseToCallbacks", function() { return marshalPromiseToCallbacks; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file, @typescript-eslint/typedef */
var PromiseState;
(function (PromiseState) {
    PromiseState[PromiseState["None"] = 0] = "None";
    PromiseState[PromiseState["Resolved"] = 1] = "Resolved";
    PromiseState[PromiseState["Rejected"] = 2] = "Rejected";
})(PromiseState || (PromiseState = {}));
class PromiseResult {
    constructor(promiseResultEventSource) {
        this.throwIfError = () => {
            if (this.isError) {
                throw this.error;
            }
        };
        promiseResultEventSource.on((result) => {
            if (!this.privIsCompleted) {
                this.privIsCompleted = true;
                this.privIsError = false;
                this.privResult = result;
            }
        }, (error) => {
            if (!this.privIsCompleted) {
                this.privIsCompleted = true;
                this.privIsError = true;
                this.privError = error;
            }
        });
    }
    get isCompleted() {
        return this.privIsCompleted;
    }
    get isError() {
        return this.privIsError;
    }
    get error() {
        return this.privError;
    }
    get result() {
        return this.privResult;
    }
}
class PromiseResultEventSource {
    constructor() {
        this.setResult = (result) => {
            this.privOnSetResult(result);
        };
        this.setError = (error) => {
            this.privOnSetError(error);
        };
        this.on = (onSetResult, onSetError) => {
            this.privOnSetResult = onSetResult;
            this.privOnSetError = onSetError;
        };
    }
}
class Deferred {
    constructor() {
        this.resolve = (result) => {
            this.privResolve(result);
            return this;
        };
        this.reject = (error) => {
            this.privReject(error);
            return this;
        };
        // eslint-disable-next-line @typescript-eslint/explicit-function-return-type
        this.privPromise = new Promise((resolve, reject) => {
            this.privResolve = resolve;
            this.privReject = reject;
        });
    }
    get promise() {
        return this.privPromise;
    }
}
class Sink {
    constructor() {
        this.privState = PromiseState.None;
        this.privPromiseResult = null;
        this.privPromiseResultEvents = null;
        this.privSuccessHandlers = [];
        this.privErrorHandlers = [];
        this.privPromiseResultEvents = new PromiseResultEventSource();
        this.privPromiseResult = new PromiseResult(this.privPromiseResultEvents);
    }
    get state() {
        return this.privState;
    }
    get result() {
        return this.privPromiseResult;
    }
    resolve(result) {
        if (this.privState !== PromiseState.None) {
            throw new Error("'Cannot resolve a completed promise'");
        }
        this.privState = PromiseState.Resolved;
        this.privPromiseResultEvents.setResult(result);
        for (let i = 0; i < this.privSuccessHandlers.length; i++) {
            this.executeSuccessCallback(result, this.privSuccessHandlers[i], this.privErrorHandlers[i]);
        }
        this.detachHandlers();
    }
    reject(error) {
        if (this.privState !== PromiseState.None) {
            throw new Error("'Cannot reject a completed promise'");
        }
        this.privState = PromiseState.Rejected;
        this.privPromiseResultEvents.setError(error);
        for (const errorHandler of this.privErrorHandlers) {
            this.executeErrorCallback(error, errorHandler);
        }
        this.detachHandlers();
    }
    on(successCallback, errorCallback) {
        if (successCallback == null) {
            // eslint-disable-next-line @typescript-eslint/no-empty-function
            successCallback = () => { };
        }
        if (this.privState === PromiseState.None) {
            this.privSuccessHandlers.push(successCallback);
            this.privErrorHandlers.push(errorCallback);
        }
        else {
            if (this.privState === PromiseState.Resolved) {
                this.executeSuccessCallback(this.privPromiseResult.result, successCallback, errorCallback);
            }
            else if (this.privState === PromiseState.Rejected) {
                this.executeErrorCallback(this.privPromiseResult.error, errorCallback);
            }
            this.detachHandlers();
        }
    }
    executeSuccessCallback(result, successCallback, errorCallback) {
        try {
            successCallback(result);
        }
        catch (e) {
            this.executeErrorCallback(`'Unhandled callback error: ${e}'`, errorCallback);
        }
    }
    executeErrorCallback(error, errorCallback) {
        if (errorCallback) {
            try {
                errorCallback(error);
            }
            catch (e) {
                throw new Error(`'Unhandled callback error: ${e}. InnerError: ${error}'`);
            }
        }
        else {
            throw new Error(`'Unhandled error: ${error}'`);
        }
    }
    detachHandlers() {
        this.privErrorHandlers = [];
        this.privSuccessHandlers = [];
    }
}
// eslint-disable-next-line prefer-arrow/prefer-arrow-functions
function marshalPromiseToCallbacks(promise, cb, err) {
    promise.then((val) => {
        try {
            if (!!cb) {
                cb(val);
            }
        }
        catch (error) {
            if (!!err) {
                try {
                    if (error instanceof Error) {
                        const typedError = error;
                        err(typedError.name + ": " + typedError.message);
                    }
                    else {
                        err(error);
                    }
                    // eslint-disable-next-line no-empty
                }
                catch (error) { }
            }
        }
    }, (error) => {
        if (!!err) {
            try {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
                // eslint-disable-next-line no-empty
            }
            catch (error) { }
        }
    });
}

//# sourceMappingURL=Promise.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Queue.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Queue.js ***!
  \************************************************************************************************/
/*! exports provided: Queue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Queue", function() { return Queue; });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _List__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./List */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/List.js");
/* harmony import */ var _Promise__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Promise */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



var SubscriberType;
(function (SubscriberType) {
    SubscriberType[SubscriberType["Dequeue"] = 0] = "Dequeue";
    SubscriberType[SubscriberType["Peek"] = 1] = "Peek";
})(SubscriberType || (SubscriberType = {}));
class Queue {
    constructor(list) {
        this.privPromiseStore = new _List__WEBPACK_IMPORTED_MODULE_1__["List"]();
        this.privIsDrainInProgress = false;
        this.privIsDisposing = false;
        this.privDisposeReason = null;
        this.privList = list ? list : new _List__WEBPACK_IMPORTED_MODULE_1__["List"]();
        this.privDetachables = [];
        this.privSubscribers = new _List__WEBPACK_IMPORTED_MODULE_1__["List"]();
        this.privDetachables.push(this.privList.onAdded(() => this.drain()));
    }
    enqueue(item) {
        this.throwIfDispose();
        this.enqueueFromPromise(new Promise((resolve) => resolve(item)));
    }
    enqueueFromPromise(promise) {
        this.throwIfDispose();
        promise.then((val) => {
            this.privList.add(val);
            // eslint-disable-next-line @typescript-eslint/no-empty-function
        }, () => { });
    }
    dequeue() {
        this.throwIfDispose();
        const deferredSubscriber = new _Promise__WEBPACK_IMPORTED_MODULE_2__["Deferred"]();
        if (this.privSubscribers) {
            this.privSubscribers.add({ deferral: deferredSubscriber, type: SubscriberType.Dequeue });
            this.drain();
        }
        return deferredSubscriber.promise;
    }
    peek() {
        this.throwIfDispose();
        const deferredSubscriber = new _Promise__WEBPACK_IMPORTED_MODULE_2__["Deferred"]();
        const subs = this.privSubscribers;
        if (subs) {
            this.privSubscribers.add({ deferral: deferredSubscriber, type: SubscriberType.Peek });
            this.drain();
        }
        return deferredSubscriber.promise;
    }
    length() {
        this.throwIfDispose();
        return this.privList.length();
    }
    isDisposed() {
        return this.privSubscribers == null;
    }
    drainAndDispose(pendingItemProcessor, reason) {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.isDisposed() && !this.privIsDisposing) {
                this.privDisposeReason = reason;
                this.privIsDisposing = true;
                const subs = this.privSubscribers;
                if (subs) {
                    while (subs.length() > 0) {
                        const subscriber = subs.removeFirst();
                        // TODO: this needs work (Resolve(null) instead?).
                        subscriber.deferral.resolve(undefined);
                        // subscriber.deferral.reject("Disposed");
                    }
                    // note: this block assumes cooperative multitasking, i.e.,
                    // between the if-statement and the assignment there are no
                    // thread switches.
                    // Reason is that between the initial const = this.; and this
                    // point there is the derral.resolve() operation that might have
                    // caused recursive calls to the Queue, especially, calling
                    // Dispose() on the queue alredy (which would reset the var
                    // here to null!).
                    // That should generally hold true for javascript...
                    if (this.privSubscribers === subs) {
                        this.privSubscribers = subs;
                    }
                }
                for (const detachable of this.privDetachables) {
                    yield detachable.detach();
                }
                if (this.privPromiseStore.length() > 0 && pendingItemProcessor) {
                    const promiseArray = [];
                    this.privPromiseStore.toArray().forEach((wrapper) => {
                        promiseArray.push(wrapper);
                    });
                    return Promise.all(promiseArray).finally(() => {
                        this.privSubscribers = null;
                        this.privList.forEach((item) => {
                            pendingItemProcessor(item);
                        });
                        this.privList = null;
                        return;
                    }).then();
                }
                else {
                    this.privSubscribers = null;
                    this.privList = null;
                }
            }
        });
    }
    dispose(reason) {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.drainAndDispose(null, reason);
        });
    }
    drain() {
        if (!this.privIsDrainInProgress && !this.privIsDisposing) {
            this.privIsDrainInProgress = true;
            const subs = this.privSubscribers;
            const lists = this.privList;
            if (subs && lists) {
                while (lists.length() > 0 && subs.length() > 0 && !this.privIsDisposing) {
                    const subscriber = subs.removeFirst();
                    if (subscriber.type === SubscriberType.Peek) {
                        subscriber.deferral.resolve(lists.first());
                    }
                    else {
                        const dequeuedItem = lists.removeFirst();
                        subscriber.deferral.resolve(dequeuedItem);
                    }
                }
                // note: this block assumes cooperative multitasking, i.e.,
                // between the if-statement and the assignment there are no
                // thread switches.
                // Reason is that between the initial const = this.; and this
                // point there is the derral.resolve() operation that might have
                // caused recursive calls to the Queue, especially, calling
                // Dispose() on the queue alredy (which would reset the var
                // here to null!).
                // That should generally hold true for javascript...
                if (this.privSubscribers === subs) {
                    this.privSubscribers = subs;
                }
                // note: this block assumes cooperative multitasking, i.e.,
                // between the if-statement and the assignment there are no
                // thread switches.
                // Reason is that between the initial const = this.; and this
                // point there is the derral.resolve() operation that might have
                // caused recursive calls to the Queue, especially, calling
                // Dispose() on the queue alredy (which would reset the var
                // here to null!).
                // That should generally hold true for javascript...
                if (this.privList === lists) {
                    this.privList = lists;
                }
            }
            this.privIsDrainInProgress = false;
        }
    }
    throwIfDispose() {
        if (this.isDisposed()) {
            if (this.privDisposeReason) {
                throw new _Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"](this.privDisposeReason);
            }
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__["ObjectDisposedError"]("Queue");
        }
        else if (this.privIsDisposing) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Queue disposing");
        }
    }
}

//# sourceMappingURL=Queue.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RawWebsocketMessage.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RawWebsocketMessage.js ***!
  \**************************************************************************************************************/
/*! exports provided: RawWebsocketMessage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RawWebsocketMessage", function() { return RawWebsocketMessage; });
/* harmony import */ var _ConnectionMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConnectionMessage */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _Guid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* eslint-disable @typescript-eslint/no-unsafe-assignment */
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



class RawWebsocketMessage {
    constructor(messageType, payload, id) {
        this.privPayload = null;
        if (!payload) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_1__["ArgumentNullError"]("payload");
        }
        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
        if (messageType === _ConnectionMessage__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Binary && payload.__proto__.constructor.name !== "ArrayBuffer") {
            throw new _Error__WEBPACK_IMPORTED_MODULE_1__["InvalidOperationError"]("Payload must be ArrayBuffer");
        }
        if (messageType === _ConnectionMessage__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text && !(typeof (payload) === "string")) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_1__["InvalidOperationError"]("Payload must be a string");
        }
        this.privMessageType = messageType;
        this.privPayload = payload;
        this.privId = id ? id : Object(_Guid__WEBPACK_IMPORTED_MODULE_2__["createNoDashGuid"])();
    }
    get messageType() {
        return this.privMessageType;
    }
    get payload() {
        // eslint-disable-next-line @typescript-eslint/no-unsafe-return
        return this.privPayload;
    }
    get textContent() {
        if (this.privMessageType === _ConnectionMessage__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Binary) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_1__["InvalidOperationError"]("Not supported for binary message");
        }
        return this.privPayload;
    }
    get binaryContent() {
        if (this.privMessageType === _ConnectionMessage__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_1__["InvalidOperationError"]("Not supported for text message");
        }
        return this.privPayload;
    }
    get id() {
        return this.privId;
    }
}

//# sourceMappingURL=RawWebsocketMessage.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RiffPcmEncoder.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RiffPcmEncoder.js ***!
  \*********************************************************************************************************/
/*! exports provided: RiffPcmEncoder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RiffPcmEncoder", function() { return RiffPcmEncoder; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class RiffPcmEncoder {
    constructor(actualSampleRate, desiredSampleRate) {
        this.privActualSampleRate = actualSampleRate;
        this.privDesiredSampleRate = desiredSampleRate;
    }
    encode(actualAudioFrame) {
        const audioFrame = this.downSampleAudioFrame(actualAudioFrame, this.privActualSampleRate, this.privDesiredSampleRate);
        if (!audioFrame) {
            return null;
        }
        const audioLength = audioFrame.length * 2;
        const buffer = new ArrayBuffer(audioLength);
        const view = new DataView(buffer);
        this.floatTo16BitPCM(view, 0, audioFrame);
        return buffer;
    }
    setString(view, offset, str) {
        for (let i = 0; i < str.length; i++) {
            view.setUint8(offset + i, str.charCodeAt(i));
        }
    }
    floatTo16BitPCM(view, offset, input) {
        for (let i = 0; i < input.length; i++, offset += 2) {
            const s = Math.max(-1, Math.min(1, input[i]));
            view.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7FFF, true);
        }
    }
    downSampleAudioFrame(srcFrame, srcRate, dstRate) {
        if (!srcFrame) {
            return null;
        }
        if (dstRate === srcRate || dstRate > srcRate) {
            return srcFrame;
        }
        const ratio = srcRate / dstRate;
        const dstLength = Math.round(srcFrame.length / ratio);
        const dstFrame = new Float32Array(dstLength);
        let srcOffset = 0;
        let dstOffset = 0;
        while (dstOffset < dstLength) {
            const nextSrcOffset = Math.round((dstOffset + 1) * ratio);
            let accum = 0;
            let count = 0;
            while (srcOffset < nextSrcOffset && srcOffset < srcFrame.length) {
                accum += srcFrame[srcOffset++];
                count++;
            }
            dstFrame[dstOffset++] = accum / count;
        }
        return dstFrame;
    }
}

//# sourceMappingURL=RiffPcmEncoder.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Stream.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Stream.js ***!
  \*************************************************************************************************/
/*! exports provided: Stream */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Stream", function() { return Stream; });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _Guid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _Queue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Queue */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Queue.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



class Stream {
    constructor(streamId) {
        this.privIsWriteEnded = false;
        this.privIsReadEnded = false;
        this.privId = streamId ? streamId : Object(_Guid__WEBPACK_IMPORTED_MODULE_1__["createNoDashGuid"])();
        this.privReaderQueue = new _Queue__WEBPACK_IMPORTED_MODULE_2__["Queue"]();
    }
    get isClosed() {
        return this.privIsWriteEnded;
    }
    get isReadEnded() {
        return this.privIsReadEnded;
    }
    get id() {
        return this.privId;
    }
    close() {
        if (!this.privIsWriteEnded) {
            this.writeStreamChunk({
                buffer: null,
                isEnd: true,
                timeReceived: Date.now(),
            });
            this.privIsWriteEnded = true;
        }
    }
    writeStreamChunk(streamChunk) {
        this.throwIfClosed();
        if (!this.privReaderQueue.isDisposed()) {
            try {
                this.privReaderQueue.enqueue(streamChunk);
            }
            catch (e) {
                // Do nothing
            }
        }
    }
    read() {
        if (this.privIsReadEnded) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Stream read has already finished");
        }
        return this.privReaderQueue
            .dequeue()
            .then((streamChunk) => __awaiter(this, void 0, void 0, function* () {
            if (streamChunk === undefined || streamChunk.isEnd) {
                yield this.privReaderQueue.dispose("End of stream reached");
            }
            return streamChunk;
        }));
    }
    readEnded() {
        if (!this.privIsReadEnded) {
            this.privIsReadEnded = true;
            this.privReaderQueue = new _Queue__WEBPACK_IMPORTED_MODULE_2__["Queue"]();
        }
    }
    throwIfClosed() {
        if (this.privIsWriteEnded) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Stream closed");
        }
    }
}

//# sourceMappingURL=Stream.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/StringUtils.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/StringUtils.js ***!
  \******************************************************************************************************/
/*! exports provided: StringUtils */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StringUtils", function() { return StringUtils; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * String helper functions
 */
class StringUtils {
    /**
     * Formats a string by replacing the named {keys} in the string with the values contained in the replacement dictionary.
     * @param format The format string that contains the parts to replace surrounded by {}. For example: "wss://{region}.cts.speech.microsoft.com".
     * If your string needs to contain a { or } you can use the {{ and }} escape sequences respectively.
     * @param replacements The dictionary of replacements. If a replacement is not found, it is replaced with an empty string
     * @returns The formatted string. If you pass in a null or undefined format string, an empty string will be returned
     */
    static formatString(format, replacements) {
        if (!format) {
            return "";
        }
        if (!replacements) {
            return format;
        }
        let formatted = "";
        let key = "";
        const appendToFormatted = (str) => {
            formatted += str;
        };
        const appendToKey = (str) => {
            key += str;
        };
        let appendFunc = appendToFormatted;
        for (let i = 0; i < format.length; i++) {
            const c = format[i];
            const next = i + 1 < format.length ? format[i + 1] : "";
            switch (c) {
                case "{":
                    if (next === "{") {
                        appendFunc("{");
                        i++;
                    }
                    else {
                        appendFunc = appendToKey;
                    }
                    break;
                case "}":
                    if (next === "}") {
                        appendFunc("}");
                        i++;
                    }
                    else {
                        if (replacements.hasOwnProperty(key)) {
                            formatted += replacements[key];
                        }
                        appendFunc = appendToFormatted;
                        key = "";
                    }
                    break;
                default:
                    appendFunc(c);
                    break;
            }
        }
        return formatted;
    }
}

//# sourceMappingURL=StringUtils.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Timeout.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Timeout.js ***!
  \**************************************************************************************************/
/*! exports provided: Timeout */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Timeout", function() { return Timeout; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class Timeout {
    static load() {
        // Prefilling the Maps with a function indexed by zero is necessary to be compliant with the specification.
        const scheduledTimeoutFunctions = new Map([[0, () => { }]]); // eslint-disable-line @typescript-eslint/no-empty-function
        const unhandledRequests = new Map();
        // eslint-disable-next-line
        const workerScript = `!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`;
        const workerUrl = "data:text/javascript;base64," + btoa(workerScript);
        const worker = new Worker(workerUrl);
        worker.addEventListener("message", ({ data }) => {
            if (Timeout.isCallNotification(data)) {
                const { params: { timerId } } = data;
                const idOrFunc = scheduledTimeoutFunctions.get(timerId);
                if (typeof idOrFunc === "number") {
                    const unhandledTimerId = unhandledRequests.get(idOrFunc);
                    if (unhandledTimerId === undefined ||
                        unhandledTimerId !== timerId) {
                        throw new Error("The timer is in an undefined state.");
                    }
                }
                else if (typeof idOrFunc !== "undefined") {
                    idOrFunc();
                    // A timeout can be safely deleted because it is only called once.
                    scheduledTimeoutFunctions.delete(timerId);
                }
                else {
                    throw new Error("The timer is in an undefined state.");
                }
            }
            else if (Timeout.isClearResponse(data)) {
                const { id } = data;
                const unhandledTimerId = unhandledRequests.get(id);
                if (unhandledTimerId === undefined) {
                    throw new Error("The timer is in an undefined state.");
                }
                unhandledRequests.delete(id);
                scheduledTimeoutFunctions.delete(unhandledTimerId);
            }
            else {
                const { error: { message } } = data;
                throw new Error(message);
            }
        });
        const clearTimeout = (timerId) => {
            const id = Math.random();
            unhandledRequests.set(id, timerId);
            scheduledTimeoutFunctions.set(timerId, id);
            worker.postMessage({
                id,
                method: "clear",
                params: { timerId }
            });
        };
        const setTimeout = (func, delay) => {
            const timerId = Math.random();
            scheduledTimeoutFunctions.set(timerId, func);
            worker.postMessage({
                id: null,
                method: "set",
                params: {
                    delay,
                    now: performance.now(),
                    timerId
                }
            });
            return timerId;
        };
        return {
            clearTimeout,
            setTimeout
        };
    }
    static loadWorkerTimers() {
        return () => {
            if (Timeout.workerTimers !== null) {
                return Timeout.workerTimers;
            }
            Timeout.workerTimers = Timeout.load();
            return Timeout.workerTimers;
        };
    }
    static isCallNotification(message) {
        return message.method !== undefined && message.method === "call";
    }
    static isClearResponse(message) {
        return message.error === null && typeof message.id === "number";
    }
}
Timeout.workerTimers = null;
Timeout.clearTimeout = (timerId) => Timeout.timers().clearTimeout(timerId);
Timeout.setTimeout = (func, delay) => Timeout.timers().setTimeout(func, delay);
Timeout.timers = Timeout.loadWorkerTimers();

//# sourceMappingURL=Timeout.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ActivityReceivedEventArgs.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ActivityReceivedEventArgs.js ***!
  \*****************************************************************************************************************/
/*! exports provided: ActivityReceivedEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ActivityReceivedEventArgs", function() { return ActivityReceivedEventArgs; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines contents of received message/events.
 * @class ActivityReceivedEventArgs
 */
class ActivityReceivedEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {any} activity - The activity..
     */
    constructor(activity, audioStream) {
        this.privActivity = activity;
        this.privAudioStream = audioStream;
    }
    /**
     * Gets the received activity
     * @member ActivityReceivedEventArgs.prototype.activity
     * @function
     * @public
     * @returns {any} the received activity.
     */
    get activity() {
        return this.privActivity;
    }
    get audioStream() {
        return this.privAudioStream;
    }
}

//# sourceMappingURL=ActivityReceivedEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioConfig.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioConfig.js ***!
  \*********************************************************************************************************/
/*! exports provided: AudioConfig, AudioConfigImpl, AudioOutputConfigImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioConfig", function() { return AudioConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioConfigImpl", function() { return AudioConfigImpl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioOutputConfigImpl", function() { return AudioOutputConfigImpl; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _AudioFileWriter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AudioFileWriter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioFileWriter.js");
/* harmony import */ var _AudioInputStream__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AudioInputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioInputStream.js");
/* harmony import */ var _AudioOutputStream__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./AudioOutputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.






/**
 * Represents audio input configuration used for specifying what type of input to use (microphone, file, stream).
 * @class AudioConfig
 * Updated in version 1.11.0
 */
class AudioConfig {
    /**
     * Creates an AudioConfig object representing the default microphone on the system.
     * @member AudioConfig.fromDefaultMicrophoneInput
     * @function
     * @public
     * @returns {AudioConfig} The audio input configuration being created.
     */
    static fromDefaultMicrophoneInput() {
        const pcmRecorder = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["PcmRecorder"](true);
        return new AudioConfigImpl(new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["MicAudioSource"](pcmRecorder));
    }
    /**
     * Creates an AudioConfig object representing a microphone with the specified device ID.
     * @member AudioConfig.fromMicrophoneInput
     * @function
     * @public
     * @param {string | undefined} deviceId - Specifies the device ID of the microphone to be used.
     * Default microphone is used the value is omitted.
     * @returns {AudioConfig} The audio input configuration being created.
     */
    static fromMicrophoneInput(deviceId) {
        const pcmRecorder = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["PcmRecorder"](true);
        return new AudioConfigImpl(new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["MicAudioSource"](pcmRecorder, deviceId));
    }
    /**
     * Creates an AudioConfig object representing the specified file.
     * @member AudioConfig.fromWavFileInput
     * @function
     * @public
     * @param {File} fileName - Specifies the audio input file. Currently, only WAV / PCM is supported.
     * @returns {AudioConfig} The audio input configuration being created.
     */
    static fromWavFileInput(file, name = "unnamedBuffer.wav") {
        return new AudioConfigImpl(new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["FileAudioSource"](file, name));
    }
    /**
     * Creates an AudioConfig object representing the specified stream.
     * @member AudioConfig.fromStreamInput
     * @function
     * @public
     * @param {AudioInputStream | PullAudioInputStreamCallback | MediaStream} audioStream - Specifies the custom audio input
     * stream. Currently, only WAV / PCM is supported.
     * @returns {AudioConfig} The audio input configuration being created.
     */
    static fromStreamInput(audioStream) {
        if (audioStream instanceof _Exports__WEBPACK_IMPORTED_MODULE_2__["PullAudioInputStreamCallback"]) {
            return new AudioConfigImpl(new _AudioInputStream__WEBPACK_IMPORTED_MODULE_4__["PullAudioInputStreamImpl"](audioStream));
        }
        if (audioStream instanceof _Exports__WEBPACK_IMPORTED_MODULE_2__["AudioInputStream"]) {
            return new AudioConfigImpl(audioStream);
        }
        if (typeof MediaStream !== "undefined" && audioStream instanceof MediaStream) {
            const pcmRecorder = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["PcmRecorder"](false);
            return new AudioConfigImpl(new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["MicAudioSource"](pcmRecorder, null, null, audioStream));
        }
        throw new Error("Not Supported Type");
    }
    /**
     * Creates an AudioConfig object representing the default speaker.
     * @member AudioConfig.fromDefaultSpeakerOutput
     * @function
     * @public
     * @returns {AudioConfig} The audio output configuration being created.
     * Added in version 1.11.0
     */
    static fromDefaultSpeakerOutput() {
        return new AudioOutputConfigImpl(new _Exports__WEBPACK_IMPORTED_MODULE_2__["SpeakerAudioDestination"]());
    }
    /**
     * Creates an AudioConfig object representing the custom IPlayer object.
     * You can use the IPlayer object to control pause, resume, etc.
     * @member AudioConfig.fromSpeakerOutput
     * @function
     * @public
     * @param {IPlayer} player - the IPlayer object for playback.
     * @returns {AudioConfig} The audio output configuration being created.
     * Added in version 1.12.0
     */
    static fromSpeakerOutput(player) {
        if (player === undefined) {
            return AudioConfig.fromDefaultSpeakerOutput();
        }
        if (player instanceof _Exports__WEBPACK_IMPORTED_MODULE_2__["SpeakerAudioDestination"]) {
            return new AudioOutputConfigImpl(player);
        }
        throw new Error("Not Supported Type");
    }
    /**
     * Creates an AudioConfig object representing a specified output audio file
     * @member AudioConfig.fromAudioFileOutput
     * @function
     * @public
     * @param {PathLike} filename - the filename of the output audio file
     * @returns {AudioConfig} The audio output configuration being created.
     * Added in version 1.11.0
     */
    static fromAudioFileOutput(filename) {
        return new AudioOutputConfigImpl(new _AudioFileWriter__WEBPACK_IMPORTED_MODULE_3__["AudioFileWriter"](filename));
    }
    /**
     * Creates an AudioConfig object representing a specified audio output stream
     * @member AudioConfig.fromStreamOutput
     * @function
     * @public
     * @param {AudioOutputStream | PushAudioOutputStreamCallback} audioStream - Specifies the custom audio output
     * stream.
     * @returns {AudioConfig} The audio output configuration being created.
     * Added in version 1.11.0
     */
    static fromStreamOutput(audioStream) {
        if (audioStream instanceof _Exports__WEBPACK_IMPORTED_MODULE_2__["PushAudioOutputStreamCallback"]) {
            return new AudioOutputConfigImpl(new _AudioOutputStream__WEBPACK_IMPORTED_MODULE_5__["PushAudioOutputStreamImpl"](audioStream));
        }
        if (audioStream instanceof _Exports__WEBPACK_IMPORTED_MODULE_2__["PushAudioOutputStream"]) {
            return new AudioOutputConfigImpl(audioStream);
        }
        if (audioStream instanceof _Exports__WEBPACK_IMPORTED_MODULE_2__["PullAudioOutputStream"]) {
            return new AudioOutputConfigImpl(audioStream);
        }
        throw new Error("Not Supported Type");
    }
}
/**
 * Represents audio input stream used for custom audio input configurations.
 * @private
 * @class AudioConfigImpl
 */
class AudioConfigImpl extends AudioConfig {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {IAudioSource} source - An audio source.
     */
    constructor(source) {
        super();
        this.privSource = source;
    }
    /**
     * Format information for the audio
     */
    get format() {
        return this.privSource.format;
    }
    /**
     * @member AudioConfigImpl.prototype.close
     * @function
     * @public
     */
    close(cb, err) {
        this.privSource.turnOff().then(() => {
            if (!!cb) {
                cb();
            }
        }, (error) => {
            if (!!err) {
                err(error);
            }
        });
    }
    /**
     * @member AudioConfigImpl.prototype.id
     * @function
     * @public
     */
    id() {
        return this.privSource.id();
    }
    /**
     * @member AudioConfigImpl.prototype.blob
     * @function
     * @public
     */
    get blob() {
        return this.privSource.blob;
    }
    /**
     * @member AudioConfigImpl.prototype.turnOn
     * @function
     * @public
     * @returns {Promise<void>} A promise.
     */
    turnOn() {
        return this.privSource.turnOn();
    }
    /**
     * @member AudioConfigImpl.prototype.attach
     * @function
     * @public
     * @param {string} audioNodeId - The audio node id.
     * @returns {Promise<IAudioStreamNode>} A promise.
     */
    attach(audioNodeId) {
        return this.privSource.attach(audioNodeId);
    }
    /**
     * @member AudioConfigImpl.prototype.detach
     * @function
     * @public
     * @param {string} audioNodeId - The audio node id.
     */
    detach(audioNodeId) {
        return this.privSource.detach(audioNodeId);
    }
    /**
     * @member AudioConfigImpl.prototype.turnOff
     * @function
     * @public
     * @returns {Promise<void>} A promise.
     */
    turnOff() {
        return this.privSource.turnOff();
    }
    /**
     * @member AudioConfigImpl.prototype.events
     * @function
     * @public
     * @returns {EventSource<AudioSourceEvent>} An event source for audio events.
     */
    get events() {
        return this.privSource.events;
    }
    setProperty(name, value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(value, "value");
        if (undefined !== this.privSource.setProperty) {
            this.privSource.setProperty(name, value);
        }
        else {
            throw new Error("This AudioConfig instance does not support setting properties.");
        }
    }
    getProperty(name, def) {
        if (undefined !== this.privSource.getProperty) {
            return this.privSource.getProperty(name, def);
        }
        else {
            throw new Error("This AudioConfig instance does not support getting properties.");
        }
        return def;
    }
    get deviceInfo() {
        return this.privSource.deviceInfo;
    }
}
class AudioOutputConfigImpl extends AudioConfig {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {IAudioDestination} destination - An audio destination.
     */
    constructor(destination) {
        super();
        this.privDestination = destination;
    }
    set format(format) {
        this.privDestination.format = format;
    }
    write(buffer) {
        this.privDestination.write(buffer);
    }
    close() {
        this.privDestination.close();
    }
    id() {
        return this.privDestination.id();
    }
    setProperty() {
        throw new Error("This AudioConfig instance does not support setting properties.");
    }
    getProperty() {
        throw new Error("This AudioConfig instance does not support getting properties.");
    }
}

//# sourceMappingURL=AudioConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioFileWriter.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioFileWriter.js ***!
  \*************************************************************************************************************/
/*! exports provided: AudioFileWriter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioFileWriter", function() { return AudioFileWriter; });
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ 2);
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class AudioFileWriter {
    constructor(filename) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrUndefined(fs__WEBPACK_IMPORTED_MODULE_0__["openSync"], "\nFile System access not available, please use Push or PullAudioOutputStream");
        this.privFd = fs__WEBPACK_IMPORTED_MODULE_0__["openSync"](filename, "w");
    }
    set format(format) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNotUndefined(this.privAudioFormat, "format is already set");
        this.privAudioFormat = format;
        let headerOffset = 0;
        if (this.privAudioFormat.hasHeader) {
            headerOffset = this.privAudioFormat.header.byteLength;
        }
        if (this.privFd !== undefined) {
            this.privWriteStream = fs__WEBPACK_IMPORTED_MODULE_0__["createWriteStream"]("", { fd: this.privFd, start: headerOffset, autoClose: false });
        }
    }
    write(buffer) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrUndefined(this.privAudioFormat, "must set format before writing.");
        if (this.privWriteStream !== undefined) {
            this.privWriteStream.write(new Uint8Array(buffer.slice(0)));
        }
    }
    close() {
        if (this.privFd !== undefined) {
            this.privWriteStream.on("finish", () => {
                if (this.privAudioFormat.hasHeader) {
                    this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten);
                    fs__WEBPACK_IMPORTED_MODULE_0__["writeSync"](this.privFd, new Int8Array(this.privAudioFormat.header), 0, this.privAudioFormat.header.byteLength, 0);
                }
                fs__WEBPACK_IMPORTED_MODULE_0__["closeSync"](this.privFd);
                this.privFd = undefined;
            });
            this.privWriteStream.end();
        }
    }
    id() {
        return this.privId;
    }
}

//# sourceMappingURL=AudioFileWriter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioInputStream.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioInputStream.js ***!
  \**************************************************************************************************************/
/*! exports provided: AudioInputStream, PushAudioInputStream, PushAudioInputStreamImpl, PullAudioInputStream, PullAudioInputStreamImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(Buffer) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioInputStream", function() { return AudioInputStream; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PushAudioInputStream", function() { return PushAudioInputStream; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PushAudioInputStreamImpl", function() { return PushAudioInputStreamImpl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PullAudioInputStream", function() { return PullAudioInputStream; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PullAudioInputStreamImpl", function() { return PullAudioInputStreamImpl; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _common_Guid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/* eslint-disable max-classes-per-file */





/**
 * Represents audio input stream used for custom audio input configurations.
 * @class AudioInputStream
 */
class AudioInputStream {
    /**
     * Creates and initializes an instance.
     * @constructor
     */
    constructor() {
        return;
    }
    /**
     * Creates a memory backed PushAudioInputStream with the specified audio format.
     * @member AudioInputStream.createPushStream
     * @function
     * @public
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     * written to the push audio stream's write() method (Required if format is not 16 kHz 16bit mono PCM).
     * @returns {PushAudioInputStream} The audio input stream being created.
     */
    static createPushStream(format) {
        return PushAudioInputStream.create(format);
    }
    /**
     * Creates a PullAudioInputStream that delegates to the specified callback interface for read()
     * and close() methods.
     * @member AudioInputStream.createPullStream
     * @function
     * @public
     * @param {PullAudioInputStreamCallback} callback - The custom audio input object, derived from
     * PullAudioInputStreamCallback
     * @param {AudioStreamFormat} format - The audio data format in which audio will be returned from
     * the callback's read() method (Required if format is not 16 kHz 16bit mono PCM).
     * @returns {PullAudioInputStream} The audio input stream being created.
     */
    static createPullStream(callback, format) {
        return PullAudioInputStream.create(callback, format);
        // throw new Error("Oops");
    }
}
/**
 * Represents memory backed push audio input stream used for custom audio input configurations.
 * @class PushAudioInputStream
 */
class PushAudioInputStream extends AudioInputStream {
    /**
     * Creates a memory backed PushAudioInputStream with the specified audio format.
     * @member PushAudioInputStream.create
     * @function
     * @public
     * @param {AudioStreamFormat} format - The audio data format in which audio will be written to the
     * push audio stream's write() method (Required if format is not 16 kHz 16bit mono PCM).
     * @returns {PushAudioInputStream} The push audio input stream being created.
     */
    static create(format) {
        return new PushAudioInputStreamImpl(format);
    }
}
/**
 * Represents memory backed push audio input stream used for custom audio input configurations.
 * @private
 * @class PushAudioInputStreamImpl
 */
class PushAudioInputStreamImpl extends PushAudioInputStream {
    /**
     * Creates and initalizes an instance with the given values.
     * @constructor
     * @param {AudioStreamFormat} format - The audio stream format.
     */
    constructor(format) {
        super();
        if (format === undefined) {
            this.privFormat = _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_4__["AudioStreamFormatImpl"].getDefaultInputFormat();
        }
        else {
            this.privFormat = format;
        }
        this.privEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["EventSource"]();
        this.privId = Object(_common_Guid__WEBPACK_IMPORTED_MODULE_2__["createNoDashGuid"])();
        this.privStream = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ChunkedArrayBufferStream"](this.privFormat.avgBytesPerSec / 10);
    }
    /**
     * Format information for the audio
     */
    get format() {
        return Promise.resolve(this.privFormat);
    }
    /**
     * Writes the audio data specified by making an internal copy of the data.
     * @member PushAudioInputStreamImpl.prototype.write
     * @function
     * @public
     * @param {ArrayBuffer} dataBuffer - The audio buffer of which this function will make a copy.
     */
    write(dataBuffer) {
        this.privStream.writeStreamChunk({
            buffer: dataBuffer,
            isEnd: false,
            timeReceived: Date.now()
        });
    }
    /**
     * Closes the stream.
     * @member PushAudioInputStreamImpl.prototype.close
     * @function
     * @public
     */
    close() {
        this.privStream.close();
    }
    id() {
        return this.privId;
    }
    get blob() {
        return this.attach("id").then((audioNode) => {
            const data = [];
            let bufferData = Buffer.from("");
            const readCycle = () => audioNode.read().then((audioStreamChunk) => {
                if (!audioStreamChunk || audioStreamChunk.isEnd) {
                    if (typeof (XMLHttpRequest) !== "undefined" && typeof (Blob) !== "undefined") {
                        return Promise.resolve(new Blob(data));
                    }
                    else {
                        return Promise.resolve(Buffer.from(bufferData));
                    }
                }
                else {
                    if (typeof (Blob) !== "undefined") {
                        data.push(audioStreamChunk.buffer);
                    }
                    else {
                        bufferData = Buffer.concat([bufferData, this.toBuffer(audioStreamChunk.buffer)]);
                    }
                    return readCycle();
                }
            });
            return readCycle();
        });
    }
    turnOn() {
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioSourceInitializingEvent"](this.privId)); // no stream id
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioSourceReadyEvent"](this.privId));
        return;
    }
    attach(audioNodeId) {
        return __awaiter(this, void 0, void 0, function* () {
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamNodeAttachingEvent"](this.privId, audioNodeId));
            yield this.turnOn();
            const stream = this.privStream;
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamNodeAttachedEvent"](this.privId, audioNodeId));
            return {
                detach: () => __awaiter(this, void 0, void 0, function* () {
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamNodeDetachedEvent"](this.privId, audioNodeId));
                    return this.turnOff();
                }),
                id: () => audioNodeId,
                read: () => stream.read(),
            };
        });
    }
    detach(audioNodeId) {
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamNodeDetachedEvent"](this.privId, audioNodeId));
    }
    turnOff() {
        return;
    }
    get events() {
        return this.privEvents;
    }
    get deviceInfo() {
        return Promise.resolve({
            bitspersample: this.privFormat.bitsPerSample,
            channelcount: this.privFormat.channels,
            connectivity: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["connectivity"].Unknown,
            manufacturer: "Speech SDK",
            model: "PushStream",
            samplerate: this.privFormat.samplesPerSec,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["type"].Stream,
        });
    }
    onEvent(event) {
        this.privEvents.onEvent(event);
        _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Events"].instance.onEvent(event);
    }
    toBuffer(arrayBuffer) {
        const buf = Buffer.alloc(arrayBuffer.byteLength);
        const view = new Uint8Array(arrayBuffer);
        for (let i = 0; i < buf.length; ++i) {
            buf[i] = view[i];
        }
        return buf;
    }
}
/*
 * Represents audio input stream used for custom audio input configurations.
 * @class PullAudioInputStream
 */
class PullAudioInputStream extends AudioInputStream {
    /**
     * Creates and initializes and instance.
     * @constructor
     */
    constructor() {
        super();
    }
    /**
     * Creates a PullAudioInputStream that delegates to the specified callback interface for
     * read() and close() methods, using the default format (16 kHz 16bit mono PCM).
     * @member PullAudioInputStream.create
     * @function
     * @public
     * @param {PullAudioInputStreamCallback} callback - The custom audio input object,
     * derived from PullAudioInputStreamCustomCallback
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     * returned from the callback's read() method (Required if format is not 16 kHz 16bit mono PCM).
     * @returns {PullAudioInputStream} The push audio input stream being created.
     */
    static create(callback, format) {
        return new PullAudioInputStreamImpl(callback, format);
    }
}
/**
 * Represents audio input stream used for custom audio input configurations.
 * @private
 * @class PullAudioInputStreamImpl
 */
class PullAudioInputStreamImpl extends PullAudioInputStream {
    /**
     * Creates a PullAudioInputStream that delegates to the specified callback interface for
     * read() and close() methods, using the default format (16 kHz 16bit mono PCM).
     * @constructor
     * @param {PullAudioInputStreamCallback} callback - The custom audio input object,
     * derived from PullAudioInputStreamCustomCallback
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     * returned from the callback's read() method (Required if format is not 16 kHz 16bit mono PCM).
     */
    constructor(callback, format) {
        super();
        if (undefined === format) {
            this.privFormat = _Exports__WEBPACK_IMPORTED_MODULE_3__["AudioStreamFormat"].getDefaultInputFormat();
        }
        else {
            this.privFormat = format;
        }
        this.privEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["EventSource"]();
        this.privId = Object(_common_Guid__WEBPACK_IMPORTED_MODULE_2__["createNoDashGuid"])();
        this.privCallback = callback;
        this.privIsClosed = false;
        this.privBufferSize = this.privFormat.avgBytesPerSec / 10;
    }
    /**
     * Format information for the audio
     */
    get format() {
        return Promise.resolve(this.privFormat);
    }
    /**
     * Closes the stream.
     * @member PullAudioInputStreamImpl.prototype.close
     * @function
     * @public
     */
    close() {
        this.privIsClosed = true;
        this.privCallback.close();
    }
    id() {
        return this.privId;
    }
    get blob() {
        return Promise.reject("Not implemented");
    }
    turnOn() {
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioSourceInitializingEvent"](this.privId)); // no stream id
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioSourceReadyEvent"](this.privId));
        return;
    }
    attach(audioNodeId) {
        return __awaiter(this, void 0, void 0, function* () {
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamNodeAttachingEvent"](this.privId, audioNodeId));
            yield this.turnOn();
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamNodeAttachedEvent"](this.privId, audioNodeId));
            return {
                detach: () => {
                    this.privCallback.close();
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamNodeDetachedEvent"](this.privId, audioNodeId));
                    return this.turnOff();
                },
                id: () => audioNodeId,
                read: () => {
                    let totalBytes = 0;
                    let transmitBuff;
                    // Until we have the minimum number of bytes to send in a transmission, keep asking for more.
                    while (totalBytes < this.privBufferSize) {
                        // Sizing the read buffer to the delta between the perfect size and what's left means we won't ever get too much
                        // data back.
                        const readBuff = new ArrayBuffer(this.privBufferSize - totalBytes);
                        const pulledBytes = this.privCallback.read(readBuff);
                        // If there is no return buffer yet defined, set the return buffer to the that was just populated.
                        // This was, if we have enough data there's no copy penalty, but if we don't we have a buffer that's the
                        // preferred size allocated.
                        if (undefined === transmitBuff) {
                            transmitBuff = readBuff;
                        }
                        else {
                            // Not the first bite at the apple, so fill the return buffer with the data we got back.
                            const intView = new Int8Array(transmitBuff);
                            intView.set(new Int8Array(readBuff), totalBytes);
                        }
                        // If there are no bytes to read, just break out and be done.
                        if (0 === pulledBytes) {
                            break;
                        }
                        totalBytes += pulledBytes;
                    }
                    return Promise.resolve({
                        buffer: transmitBuff.slice(0, totalBytes),
                        isEnd: this.privIsClosed || totalBytes === 0,
                        timeReceived: Date.now(),
                    });
                },
            };
        });
    }
    detach(audioNodeId) {
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamNodeDetachedEvent"](this.privId, audioNodeId));
    }
    turnOff() {
        return;
    }
    get events() {
        return this.privEvents;
    }
    get deviceInfo() {
        return Promise.resolve({
            bitspersample: this.privFormat.bitsPerSample,
            channelcount: this.privFormat.channels,
            connectivity: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["connectivity"].Unknown,
            manufacturer: "Speech SDK",
            model: "PullStream",
            samplerate: this.privFormat.samplesPerSec,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["type"].Stream,
        });
    }
    onEvent(event) {
        this.privEvents.onEvent(event);
        _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Events"].instance.onEvent(event);
    }
}

//# sourceMappingURL=AudioInputStream.js.map

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../../../buffer/index.js */ "./node_modules/buffer/index.js").Buffer))

/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputFormat.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputFormat.js ***!
  \***************************************************************************************************************/
/*! exports provided: AudioOutputFormatImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioOutputFormatImpl", function() { return AudioOutputFormatImpl; });
/* harmony import */ var _SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../SpeechSynthesisOutputFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisOutputFormat.js");
/* harmony import */ var _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * @private
 * @class AudioOutputFormatImpl
 * Updated in version 1.17.0
 */
// eslint-disable-next-line max-classes-per-file
class AudioOutputFormatImpl extends _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioStreamFormatImpl"] {
    /**
     * Creates an instance with the given values.
     * @constructor
     * @param formatTag
     * @param {number} channels - Number of channels.
     * @param {number} samplesPerSec - Samples per second.
     * @param {number} avgBytesPerSec - Average bytes per second.
     * @param {number} blockAlign - Block alignment.
     * @param {number} bitsPerSample - Bits per sample.
     * @param {string} audioFormatString - Audio format string
     * @param {string} requestAudioFormatString - Audio format string sent to service.
     * @param {boolean} hasHeader - If the format has header or not.
     */
    constructor(formatTag, channels, samplesPerSec, avgBytesPerSec, blockAlign, bitsPerSample, audioFormatString, requestAudioFormatString, hasHeader) {
        super(samplesPerSec, bitsPerSample, channels, formatTag);
        this.formatTag = formatTag;
        this.avgBytesPerSec = avgBytesPerSec;
        this.blockAlign = blockAlign;
        this.priAudioFormatString = audioFormatString;
        this.priRequestAudioFormatString = requestAudioFormatString;
        this.priHasHeader = hasHeader;
    }
    static fromSpeechSynthesisOutputFormat(speechSynthesisOutputFormat) {
        if (speechSynthesisOutputFormat === undefined) {
            return AudioOutputFormatImpl.getDefaultOutputFormat();
        }
        return AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(AudioOutputFormatImpl.SpeechSynthesisOutputFormatToString[speechSynthesisOutputFormat]);
    }
    static fromSpeechSynthesisOutputFormatString(speechSynthesisOutputFormatString) {
        switch (speechSynthesisOutputFormatString) {
            case "raw-8khz-8bit-mono-mulaw":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].MuLaw, 1, 8000, 8000, 1, 8, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "riff-16khz-16kbps-mono-siren":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].Siren, 1, 16000, 2000, 40, 0, speechSynthesisOutputFormatString, "audio-16khz-16kbps-mono-siren", true);
            case "audio-16khz-16kbps-mono-siren":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].Siren, 1, 16000, 2000, 40, 0, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-16khz-32kbitrate-mono-mp3":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].MP3, 1, 16000, 32 << 7, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-16khz-128kbitrate-mono-mp3":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].MP3, 1, 16000, 128 << 7, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-16khz-64kbitrate-mono-mp3":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].MP3, 1, 16000, 64 << 7, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-24khz-48kbitrate-mono-mp3":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].MP3, 1, 24000, 48 << 7, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-24khz-96kbitrate-mono-mp3":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].MP3, 1, 24000, 96 << 7, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-24khz-160kbitrate-mono-mp3":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].MP3, 1, 24000, 160 << 7, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "raw-16khz-16bit-mono-truesilk":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].SILKSkype, 1, 16000, 32000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "riff-8khz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].PCM, 1, 8000, 16000, 2, 16, speechSynthesisOutputFormatString, "raw-8khz-16bit-mono-pcm", true);
            case "riff-24khz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].PCM, 1, 24000, 48000, 2, 16, speechSynthesisOutputFormatString, "raw-24khz-16bit-mono-pcm", true);
            case "riff-8khz-8bit-mono-mulaw":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].MuLaw, 1, 8000, 8000, 1, 8, speechSynthesisOutputFormatString, "raw-8khz-8bit-mono-mulaw", true);
            case "raw-16khz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].PCM, 1, 16000, 32000, 2, 16, speechSynthesisOutputFormatString, "raw-16khz-16bit-mono-pcm", false);
            case "raw-24khz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].PCM, 1, 24000, 48000, 2, 16, speechSynthesisOutputFormatString, "raw-24khz-16bit-mono-pcm", false);
            case "raw-8khz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].PCM, 1, 8000, 16000, 2, 16, speechSynthesisOutputFormatString, "raw-8khz-16bit-mono-pcm", false);
            case "ogg-16khz-16bit-mono-opus":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].OGG_OPUS, 1, 16000, 8192, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "ogg-24khz-16bit-mono-opus":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].OGG_OPUS, 1, 24000, 8192, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "raw-48khz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].PCM, 1, 48000, 96000, 2, 16, speechSynthesisOutputFormatString, "raw-48khz-16bit-mono-pcm", false);
            case "riff-48khz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].PCM, 1, 48000, 96000, 2, 16, speechSynthesisOutputFormatString, "raw-48khz-16bit-mono-pcm", true);
            case "audio-48khz-96kbitrate-mono-mp3":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].MP3, 1, 48000, 96 << 7, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-48khz-192kbitrate-mono-mp3":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].MP3, 1, 48000, 192 << 7, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "ogg-48khz-16bit-mono-opus":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].OGG_OPUS, 1, 48000, 12000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "webm-16khz-16bit-mono-opus":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].WEBM_OPUS, 1, 16000, 4000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "webm-24khz-16bit-mono-opus":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].WEBM_OPUS, 1, 24000, 6000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "webm-24khz-16bit-24kbps-mono-opus":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].WEBM_OPUS, 1, 24000, 3000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-16khz-16bit-32kbps-mono-opus":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].OPUS, 1, 16000, 4000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-24khz-16bit-48kbps-mono-opus":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].OPUS, 1, 24000, 6000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-24khz-16bit-24kbps-mono-opus":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].OPUS, 1, 24000, 3000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-24khz-16bit-mono-flac":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].FLAC, 1, 24000, 24000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-48khz-16bit-mono-flac":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].FLAC, 1, 48000, 30000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "raw-24khz-16bit-mono-truesilk":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].SILKSkype, 1, 24000, 48000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "raw-8khz-8bit-mono-alaw":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].ALaw, 1, 8000, 8000, 1, 8, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "riff-8khz-8bit-mono-alaw":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].ALaw, 1, 8000, 8000, 1, 8, speechSynthesisOutputFormatString, "raw-8khz-8bit-mono-alaw", true);
            case "raw-22050hz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].PCM, 1, 22050, 44100, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "riff-22050hz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].PCM, 1, 22050, 44100, 2, 16, speechSynthesisOutputFormatString, "raw-22050hz-16bit-mono-pcm", true);
            case "raw-44100hz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].PCM, 1, 44100, 88200, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "riff-44100hz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].PCM, 1, 44100, 88200, 2, 16, speechSynthesisOutputFormatString, "raw-44100hz-16bit-mono-pcm", true);
            case "riff-16khz-16bit-mono-pcm":
            default:
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"].PCM, 1, 16000, 32000, 2, 16, "riff-16khz-16bit-mono-pcm", "raw-16khz-16bit-mono-pcm", true);
        }
    }
    static getDefaultOutputFormat() {
        return AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString((typeof window !== "undefined") ? "audio-24khz-48kbitrate-mono-mp3" : "riff-16khz-16bit-mono-pcm");
    }
    /**
     * Specifies if this audio output format has a header
     * @boolean AudioOutputFormatImpl.prototype.hasHeader
     * @function
     * @public
     */
    get hasHeader() {
        return this.priHasHeader;
    }
    /**
     * Specifies the header of this format
     * @ArrayBuffer AudioOutputFormatImpl.prototype.header
     * @function
     * @public
     */
    get header() {
        if (this.hasHeader) {
            return this.privHeader;
        }
        return undefined;
    }
    /**
     * Updates the header based on the audio length
     * @member AudioOutputFormatImpl.updateHeader
     * @function
     * @public
     * @param {number} audioLength - the audio length
     */
    updateHeader(audioLength) {
        if (this.priHasHeader) {
            const view = new DataView(this.privHeader);
            view.setUint32(4, audioLength + this.privHeader.byteLength - 8, true);
            view.setUint32(40, audioLength, true);
        }
    }
    /**
     * Specifies the audio format string to be sent to the service
     * @string AudioOutputFormatImpl.prototype.requestAudioFormatString
     * @function
     * @public
     */
    get requestAudioFormatString() {
        return this.priRequestAudioFormatString;
    }
}
AudioOutputFormatImpl.SpeechSynthesisOutputFormatToString = {
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Raw8Khz8BitMonoMULaw]: "raw-8khz-8bit-mono-mulaw",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Riff16Khz16KbpsMonoSiren]: "riff-16khz-16kbps-mono-siren",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Audio16Khz16KbpsMonoSiren]: "audio-16khz-16kbps-mono-siren",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Audio16Khz32KBitRateMonoMp3]: "audio-16khz-32kbitrate-mono-mp3",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Audio16Khz128KBitRateMonoMp3]: "audio-16khz-128kbitrate-mono-mp3",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Audio16Khz64KBitRateMonoMp3]: "audio-16khz-64kbitrate-mono-mp3",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Audio24Khz48KBitRateMonoMp3]: "audio-24khz-48kbitrate-mono-mp3",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Audio24Khz96KBitRateMonoMp3]: "audio-24khz-96kbitrate-mono-mp3",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Audio24Khz160KBitRateMonoMp3]: "audio-24khz-160kbitrate-mono-mp3",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Raw16Khz16BitMonoTrueSilk]: "raw-16khz-16bit-mono-truesilk",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Riff16Khz16BitMonoPcm]: "riff-16khz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Riff8Khz16BitMonoPcm]: "riff-8khz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Riff24Khz16BitMonoPcm]: "riff-24khz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Riff8Khz8BitMonoMULaw]: "riff-8khz-8bit-mono-mulaw",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Raw16Khz16BitMonoPcm]: "raw-16khz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Raw24Khz16BitMonoPcm]: "raw-24khz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Raw8Khz16BitMonoPcm]: "raw-8khz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Ogg16Khz16BitMonoOpus]: "ogg-16khz-16bit-mono-opus",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Ogg24Khz16BitMonoOpus]: "ogg-24khz-16bit-mono-opus",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Raw48Khz16BitMonoPcm]: "raw-48khz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Riff48Khz16BitMonoPcm]: "riff-48khz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Audio48Khz96KBitRateMonoMp3]: "audio-48khz-96kbitrate-mono-mp3",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Audio48Khz192KBitRateMonoMp3]: "audio-48khz-192kbitrate-mono-mp3",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Ogg48Khz16BitMonoOpus]: "ogg-48khz-16bit-mono-opus",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Webm16Khz16BitMonoOpus]: "webm-16khz-16bit-mono-opus",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Webm24Khz16BitMonoOpus]: "webm-24khz-16bit-mono-opus",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Webm24Khz16Bit24KbpsMonoOpus]: "webm-24khz-16bit-24kbps-mono-opus",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Raw24Khz16BitMonoTrueSilk]: "raw-24khz-16bit-mono-truesilk",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Raw8Khz8BitMonoALaw]: "raw-8khz-8bit-mono-alaw",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Riff8Khz8BitMonoALaw]: "riff-8khz-8bit-mono-alaw",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Audio16Khz16Bit32KbpsMonoOpus]: "audio-16khz-16bit-32kbps-mono-opus",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Audio24Khz16Bit48KbpsMonoOpus]: "audio-24khz-16bit-48kbps-mono-opus",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Audio24Khz16Bit24KbpsMonoOpus]: "audio-24khz-16bit-24kbps-mono-opus",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Raw22050Hz16BitMonoPcm]: "raw-22050hz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Riff22050Hz16BitMonoPcm]: "riff-22050hz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Raw44100Hz16BitMonoPcm]: "raw-44100hz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisOutputFormat"].Riff44100Hz16BitMonoPcm]: "riff-44100hz-16bit-mono-pcm",
};

//# sourceMappingURL=AudioOutputFormat.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js ***!
  \***************************************************************************************************************/
/*! exports provided: AudioOutputStream, PullAudioOutputStream, PullAudioOutputStreamImpl, PushAudioOutputStream, PushAudioOutputStreamImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioOutputStream", function() { return AudioOutputStream; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PullAudioOutputStream", function() { return PullAudioOutputStream; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PullAudioOutputStreamImpl", function() { return PullAudioOutputStreamImpl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PushAudioOutputStream", function() { return PushAudioOutputStream; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PushAudioOutputStreamImpl", function() { return PushAudioOutputStreamImpl; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _AudioOutputFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AudioOutputFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/* eslint-disable max-classes-per-file */



/**
 * Represents audio output stream used for custom audio output configurations.
 * @class AudioOutputStream
 */
class AudioOutputStream {
    /**
     * Creates and initializes an instance.
     * @constructor
     */
    constructor() {
        return;
    }
    /**
     * Creates a memory backed PullAudioOutputStream with the specified audio format.
     * @member AudioOutputStream.createPullStream
     * @function
     * @public
     * @returns {PullAudioOutputStream} The audio output stream being created.
     */
    static createPullStream() {
        return PullAudioOutputStream.create();
    }
}
/**
 * Represents memory backed push audio output stream used for custom audio output configurations.
 * @class PullAudioOutputStream
 */
class PullAudioOutputStream extends AudioOutputStream {
    /**
     * Creates a memory backed PullAudioOutputStream with the specified audio format.
     * @member PullAudioOutputStream.create
     * @function
     * @public
     * @returns {PullAudioOutputStream} The push audio output stream being created.
     */
    static create() {
        return new PullAudioOutputStreamImpl();
    }
}
/**
 * Represents memory backed push audio output stream used for custom audio output configurations.
 * @private
 * @class PullAudioOutputStreamImpl
 */
class PullAudioOutputStreamImpl extends PullAudioOutputStream {
    /**
     * Creates and initializes an instance with the given values.
     * @constructor
     */
    constructor() {
        super();
        this.privId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        this.privStream = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Stream"]();
    }
    /**
     * Sets the format information to the stream. For internal use only.
     * @param {AudioStreamFormat} format - the format to be set.
     */
    set format(format) {
        if (format === undefined || format === null) {
            this.privFormat = _AudioOutputFormat__WEBPACK_IMPORTED_MODULE_2__["AudioOutputFormatImpl"].getDefaultOutputFormat();
        }
        this.privFormat = format;
    }
    /**
     * Format information for the audio
     */
    get format() {
        return this.privFormat;
    }
    /**
     * Checks if the stream is closed
     * @member PullAudioOutputStreamImpl.prototype.isClosed
     * @property
     * @public
     */
    get isClosed() {
        return this.privStream.isClosed;
    }
    /**
     * Gets the id of the stream
     * @member PullAudioOutputStreamImpl.prototype.id
     * @property
     * @public
     */
    id() {
        return this.privId;
    }
    /**
     * Reads audio data from the internal buffer.
     * @member PullAudioOutputStreamImpl.prototype.read
     * @function
     * @public
     * @param {ArrayBuffer} dataBuffer - An ArrayBuffer to store the read data.
     * @returns {Promise<number>} - Audio buffer length has been read.
     */
    read(dataBuffer) {
        return __awaiter(this, void 0, void 0, function* () {
            const intView = new Int8Array(dataBuffer);
            let totalBytes = 0;
            if (this.privLastChunkView !== undefined) {
                if (this.privLastChunkView.length > dataBuffer.byteLength) {
                    intView.set(this.privLastChunkView.slice(0, dataBuffer.byteLength));
                    this.privLastChunkView = this.privLastChunkView.slice(dataBuffer.byteLength);
                    return Promise.resolve(dataBuffer.byteLength);
                }
                intView.set(this.privLastChunkView);
                totalBytes = this.privLastChunkView.length;
                this.privLastChunkView = undefined;
            }
            // Until we have the minimum number of bytes to send in a transmission, keep asking for more.
            while (totalBytes < dataBuffer.byteLength && !this.privStream.isReadEnded) {
                const chunk = yield this.privStream.read();
                if (chunk !== undefined && !chunk.isEnd) {
                    let tmpBuffer;
                    if (chunk.buffer.byteLength > dataBuffer.byteLength - totalBytes) {
                        tmpBuffer = chunk.buffer.slice(0, dataBuffer.byteLength - totalBytes);
                        this.privLastChunkView = new Int8Array(chunk.buffer.slice(dataBuffer.byteLength - totalBytes));
                    }
                    else {
                        tmpBuffer = chunk.buffer;
                    }
                    intView.set(new Int8Array(tmpBuffer), totalBytes);
                    totalBytes += tmpBuffer.byteLength;
                }
                else {
                    this.privStream.readEnded();
                }
            }
            return totalBytes;
        });
    }
    /**
     * Writes the audio data specified by making an internal copy of the data.
     * @member PullAudioOutputStreamImpl.prototype.write
     * @function
     * @public
     * @param {ArrayBuffer} dataBuffer - The audio buffer of which this function will make a copy.
     */
    write(dataBuffer) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrUndefined(this.privStream, "must set format before writing");
        this.privStream.writeStreamChunk({
            buffer: dataBuffer,
            isEnd: false,
            timeReceived: Date.now()
        });
    }
    /**
     * Closes the stream.
     * @member PullAudioOutputStreamImpl.prototype.close
     * @function
     * @public
     */
    close() {
        this.privStream.close();
    }
}
/*
 * Represents audio output stream used for custom audio output configurations.
 * @class PushAudioOutputStream
 */
class PushAudioOutputStream extends AudioOutputStream {
    /**
     * Creates and initializes and instance.
     * @constructor
     */
    constructor() {
        super();
    }
    /**
     * Creates a PushAudioOutputStream that delegates to the specified callback interface for
     * write() and close() methods.
     * @member PushAudioOutputStream.create
     * @function
     * @public
     * @param {PushAudioOutputStreamCallback} callback - The custom audio output object,
     * derived from PushAudioOutputStreamCallback
     * @returns {PushAudioOutputStream} The push audio output stream being created.
     */
    static create(callback) {
        return new PushAudioOutputStreamImpl(callback);
    }
}
/**
 * Represents audio output stream used for custom audio output configurations.
 * @private
 * @class PushAudioOutputStreamImpl
 */
class PushAudioOutputStreamImpl extends PushAudioOutputStream {
    /**
     * Creates a PushAudioOutputStream that delegates to the specified callback interface for
     * read() and close() methods.
     * @constructor
     * @param {PushAudioOutputStreamCallback} callback - The custom audio output object,
     * derived from PushAudioOutputStreamCallback
     */
    constructor(callback) {
        super();
        this.privId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        this.privCallback = callback;
    }
    // eslint-disable-next-line @typescript-eslint/no-empty-function
    set format(format) { }
    write(buffer) {
        if (!!this.privCallback.write) {
            this.privCallback.write(buffer);
        }
    }
    close() {
        if (!!this.privCallback.close) {
            this.privCallback.close();
        }
    }
    id() {
        return this.privId;
    }
}

//# sourceMappingURL=AudioOutputStream.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js ***!
  \***************************************************************************************************************/
/*! exports provided: AudioFormatTag, AudioStreamFormat, AudioStreamFormatImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioFormatTag", function() { return AudioFormatTag; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioStreamFormat", function() { return AudioStreamFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioStreamFormatImpl", function() { return AudioStreamFormatImpl; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// eslint-disable-next-line max-classes-per-file
var AudioFormatTag;
(function (AudioFormatTag) {
    AudioFormatTag[AudioFormatTag["PCM"] = 1] = "PCM";
    AudioFormatTag[AudioFormatTag["MuLaw"] = 2] = "MuLaw";
    AudioFormatTag[AudioFormatTag["Siren"] = 3] = "Siren";
    AudioFormatTag[AudioFormatTag["MP3"] = 4] = "MP3";
    AudioFormatTag[AudioFormatTag["SILKSkype"] = 5] = "SILKSkype";
    AudioFormatTag[AudioFormatTag["OGG_OPUS"] = 6] = "OGG_OPUS";
    AudioFormatTag[AudioFormatTag["WEBM_OPUS"] = 7] = "WEBM_OPUS";
    AudioFormatTag[AudioFormatTag["ALaw"] = 8] = "ALaw";
    AudioFormatTag[AudioFormatTag["FLAC"] = 9] = "FLAC";
    AudioFormatTag[AudioFormatTag["OPUS"] = 10] = "OPUS";
})(AudioFormatTag || (AudioFormatTag = {}));
/**
 * Represents audio stream format used for custom audio input configurations.
 * @class AudioStreamFormat
 */
class AudioStreamFormat {
    /**
     * Creates an audio stream format object representing the default audio stream
     * format (16KHz 16bit mono PCM).
     * @member AudioStreamFormat.getDefaultInputFormat
     * @function
     * @public
     * @returns {AudioStreamFormat} The audio stream format being created.
     */
    static getDefaultInputFormat() {
        return AudioStreamFormatImpl.getDefaultInputFormat();
    }
    /**
     * Creates an audio stream format object with the specified format characteristics.
     * @member AudioStreamFormat.getWaveFormat
     * @function
     * @public
     * @param {number} samplesPerSecond - Sample rate, in samples per second (Hertz).
     * @param {number} bitsPerSample - Bits per sample, typically 16.
     * @param {number} channels - Number of channels in the waveform-audio data. Monaural data
     * uses one channel and stereo data uses two channels.
     * @param {AudioFormatTag} format - Audio format (PCM, alaw or mulaw).
     * @returns {AudioStreamFormat} The audio stream format being created.
     */
    static getWaveFormat(samplesPerSecond, bitsPerSample, channels, format) {
        return new AudioStreamFormatImpl(samplesPerSecond, bitsPerSample, channels, format);
    }
    /**
     * Creates an audio stream format object with the specified pcm waveformat characteristics.
     * @member AudioStreamFormat.getWaveFormatPCM
     * @function
     * @public
     * @param {number} samplesPerSecond - Sample rate, in samples per second (Hertz).
     * @param {number} bitsPerSample - Bits per sample, typically 16.
     * @param {number} channels - Number of channels in the waveform-audio data. Monaural data
     * uses one channel and stereo data uses two channels.
     * @returns {AudioStreamFormat} The audio stream format being created.
     */
    static getWaveFormatPCM(samplesPerSecond, bitsPerSample, channels) {
        return new AudioStreamFormatImpl(samplesPerSecond, bitsPerSample, channels);
    }
}
/**
 * @private
 * @class AudioStreamFormatImpl
 */
class AudioStreamFormatImpl extends AudioStreamFormat {
    /**
     * Creates an instance with the given values.
     * @constructor
     * @param {number} samplesPerSec - Samples per second.
     * @param {number} bitsPerSample - Bits per sample.
     * @param {number} channels - Number of channels.
     * @param {AudioFormatTag} format - Audio format (PCM, alaw or mulaw).
     */
    constructor(samplesPerSec = 16000, bitsPerSample = 16, channels = 1, format = AudioFormatTag.PCM) {
        super();
        let isWavFormat = true;
        /* 1 for PCM; 6 for alaw; 7 for mulaw */
        switch (format) {
            case AudioFormatTag.PCM:
                this.formatTag = 1;
                break;
            case AudioFormatTag.ALaw:
                this.formatTag = 6;
                break;
            case AudioFormatTag.MuLaw:
                this.formatTag = 7;
                break;
            default:
                isWavFormat = false;
        }
        this.bitsPerSample = bitsPerSample;
        this.samplesPerSec = samplesPerSec;
        this.channels = channels;
        this.avgBytesPerSec = this.samplesPerSec * this.channels * (this.bitsPerSample / 8);
        this.blockAlign = this.channels * Math.max(this.bitsPerSample, 8);
        if (isWavFormat) {
            this.privHeader = new ArrayBuffer(44);
            // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView
            const view = new DataView(this.privHeader);
            /* RIFF identifier */
            this.setString(view, 0, "RIFF");
            /* file length */
            view.setUint32(4, 0, true);
            /* RIFF type & Format */
            this.setString(view, 8, "WAVEfmt ");
            /* format chunk length */
            view.setUint32(16, 16, true);
            /* audio format */
            view.setUint16(20, this.formatTag, true);
            /* channel count */
            view.setUint16(22, this.channels, true);
            /* sample rate */
            view.setUint32(24, this.samplesPerSec, true);
            /* byte rate (sample rate * block align) */
            view.setUint32(28, this.avgBytesPerSec, true);
            /* block align (channel count * bytes per sample) */
            view.setUint16(32, this.channels * (this.bitsPerSample / 8), true);
            /* bits per sample */
            view.setUint16(34, this.bitsPerSample, true);
            /* data chunk identifier */
            this.setString(view, 36, "data");
            /* data chunk length */
            view.setUint32(40, 0, true);
        }
    }
    /**
     * Retrieves the default input format.
     * @member AudioStreamFormatImpl.getDefaultInputFormat
     * @function
     * @public
     * @returns {AudioStreamFormatImpl} The default input format.
     */
    static getDefaultInputFormat() {
        return new AudioStreamFormatImpl();
    }
    /**
     * Creates an audio context appropriate to current browser
     * @member AudioStreamFormatImpl.getAudioContext
     * @function
     * @public
     * @returns {AudioContext} An audio context instance
     */
    /* eslint-disable */
    static getAudioContext(sampleRate) {
        // Workaround for Speech SDK bug in Safari.
        const AudioContext = window.AudioContext // our preferred impl
            || window.webkitAudioContext // fallback, mostly when on Safari
            || false; // could not find.
        // https://developer.mozilla.org/en-US/docs/Web/API/AudioContext
        if (!!AudioContext) {
            if (sampleRate !== undefined && navigator.mediaDevices.getSupportedConstraints().sampleRate) {
                return new AudioContext({ sampleRate });
            }
            else {
                return new AudioContext();
            }
        }
        else {
            throw new Error("Browser does not support Web Audio API (AudioContext is not available).");
        }
    }
    /* eslint-enable */
    /**
     * Closes the configuration object.
     * @member AudioStreamFormatImpl.prototype.close
     * @function
     * @public
     */
    close() {
        return;
    }
    get header() {
        return this.privHeader;
    }
    setString(view, offset, str) {
        for (let i = 0; i < str.length; i++) {
            view.setUint8(offset + i, str.charCodeAt(i));
        }
    }
}

//# sourceMappingURL=AudioStreamFormat.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/BaseAudioPlayer.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/BaseAudioPlayer.js ***!
  \*************************************************************************************************************/
/*! exports provided: BaseAudioPlayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BaseAudioPlayer", function() { return BaseAudioPlayer; });
/* harmony import */ var _common_Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



/**
 * Base audio player class
 * TODO: Plays only PCM for now.
 * @class
 */
class BaseAudioPlayer {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {AudioStreamFormat} audioFormat audio stream format recognized by the player.
     */
    constructor(audioFormat) {
        this.audioContext = null;
        this.gainNode = null;
        this.autoUpdateBufferTimer = 0;
        if (audioFormat === undefined) {
            audioFormat = _Exports__WEBPACK_IMPORTED_MODULE_1__["AudioStreamFormat"].getDefaultInputFormat();
        }
        this.init(audioFormat);
    }
    /**
     * play Audio sample
     * @param newAudioData audio data to be played.
     */
    playAudioSample(newAudioData, cb, err) {
        try {
            this.ensureInitializedContext();
            const audioData = this.formatAudioData(newAudioData);
            const newSamplesData = new Float32Array(this.samples.length + audioData.length);
            newSamplesData.set(this.samples, 0);
            newSamplesData.set(audioData, this.samples.length);
            this.samples = newSamplesData;
            if (!!cb) {
                cb();
            }
        }
        catch (e) {
            if (!!err) {
                err(e);
            }
        }
    }
    /**
     * stops audio and clears the buffers
     */
    stopAudio(cb, err) {
        if (this.audioContext !== null) {
            this.samples = new Float32Array();
            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
            clearInterval(this.autoUpdateBufferTimer);
            this.audioContext.close().then(() => {
                if (!!cb) {
                    cb();
                }
            }, (error) => {
                if (!!err) {
                    err(error);
                }
            });
            this.audioContext = null;
        }
    }
    init(audioFormat) {
        this.audioFormat = audioFormat;
        this.samples = new Float32Array();
    }
    ensureInitializedContext() {
        if (this.audioContext === null) {
            this.createAudioContext();
            const timerPeriod = 200;
            this.autoUpdateBufferTimer = setInterval(() => {
                this.updateAudioBuffer();
            }, timerPeriod);
        }
    }
    createAudioContext() {
        // new ((window as any).AudioContext || (window as any).webkitAudioContext)();
        this.audioContext = _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_2__["AudioStreamFormatImpl"].getAudioContext();
        // TODO: Various examples shows this gain node, it does not seem to be needed unless we plan
        // to control the volume, not likely
        this.gainNode = this.audioContext.createGain();
        this.gainNode.gain.value = 1;
        this.gainNode.connect(this.audioContext.destination);
        this.startTime = this.audioContext.currentTime;
    }
    formatAudioData(audioData) {
        switch (this.audioFormat.bitsPerSample) {
            case 8:
                return this.formatArrayBuffer(new Int8Array(audioData), 128);
            case 16:
                return this.formatArrayBuffer(new Int16Array(audioData), 32768);
            case 32:
                return this.formatArrayBuffer(new Int32Array(audioData), 2147483648);
            default:
                throw new _common_Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time");
        }
    }
    formatArrayBuffer(audioData, maxValue) {
        const float32Data = new Float32Array(audioData.length);
        for (let i = 0; i < audioData.length; i++) {
            float32Data[i] = audioData[i] / maxValue;
        }
        return float32Data;
    }
    updateAudioBuffer() {
        if (this.samples.length === 0) {
            return;
        }
        const channelCount = this.audioFormat.channels;
        const bufferSource = this.audioContext.createBufferSource();
        const frameCount = this.samples.length / channelCount;
        const audioBuffer = this.audioContext.createBuffer(channelCount, frameCount, this.audioFormat.samplesPerSec);
        // TODO: Should we do the conversion in the pushAudioSample instead?
        for (let channel = 0; channel < channelCount; channel++) {
            // Fill in individual channel data
            let channelOffset = channel;
            const audioData = audioBuffer.getChannelData(channel);
            for (let i = 0; i < this.samples.length; i++, channelOffset += channelCount) {
                audioData[i] = this.samples[channelOffset];
            }
        }
        if (this.startTime < this.audioContext.currentTime) {
            this.startTime = this.audioContext.currentTime;
        }
        bufferSource.buffer = audioBuffer;
        bufferSource.connect(this.gainNode);
        bufferSource.start(this.startTime);
        // Make sure we play the next sample after the current one.
        this.startTime += audioBuffer.duration;
        // Clear the samples for the next pushed data.
        this.samples = new Float32Array();
    }
    playAudio(audioData) {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.audioContext === null) {
                this.createAudioContext();
            }
            const source = this.audioContext.createBufferSource();
            const destination = this.audioContext.destination;
            yield this.audioContext.decodeAudioData(audioData, (newBuffer) => {
                source.buffer = newBuffer;
                source.connect(destination);
                source.start(0);
            });
        });
    }
}

//# sourceMappingURL=BaseAudioPlayer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/PullAudioInputStreamCallback.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/PullAudioInputStreamCallback.js ***!
  \**************************************************************************************************************************/
/*! exports provided: PullAudioInputStreamCallback */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PullAudioInputStreamCallback", function() { return PullAudioInputStreamCallback; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * An abstract base class that defines callback methods (read() and close()) for
 * custom audio input streams).
 * @class PullAudioInputStreamCallback
 */
class PullAudioInputStreamCallback {
}

//# sourceMappingURL=PullAudioInputStreamCallback.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/PushAudioOutputStreamCallback.js":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/PushAudioOutputStreamCallback.js ***!
  \***************************************************************************************************************************/
/*! exports provided: PushAudioOutputStreamCallback */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PushAudioOutputStreamCallback", function() { return PushAudioOutputStreamCallback; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * An abstract base class that defines callback methods (write() and close()) for
 * custom audio output streams).
 * @class PushAudioOutputStreamCallback
 */
class PushAudioOutputStreamCallback {
}

//# sourceMappingURL=PushAudioOutputStreamCallback.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/SpeakerAudioDestination.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/SpeakerAudioDestination.js ***!
  \*********************************************************************************************************************/
/*! exports provided: SpeakerAudioDestination */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeakerAudioDestination", function() { return SpeakerAudioDestination; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _AudioOutputStream__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AudioOutputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js");
/* harmony import */ var _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




const MediaDurationPlaceholderSeconds = 60 * 30;
const AudioFormatToMimeType = {
    [_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_3__["AudioFormatTag"].PCM]: "audio/wav",
    [_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_3__["AudioFormatTag"].MuLaw]: "audio/x-wav",
    [_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_3__["AudioFormatTag"].MP3]: "audio/mpeg",
    [_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_3__["AudioFormatTag"].OGG_OPUS]: "audio/ogg",
    [_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_3__["AudioFormatTag"].WEBM_OPUS]: "audio/webm; codecs=opus",
    [_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_3__["AudioFormatTag"].ALaw]: "audio/x-wav",
    [_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_3__["AudioFormatTag"].FLAC]: "audio/flac",
};
/**
 * Represents the speaker playback audio destination, which only works in browser.
 * Note: the SDK will try to use <a href="https://www.w3.org/TR/media-source/">Media Source Extensions</a> to play audio.
 * Mp3 format has better supports on Microsoft Edge, Chrome and Safari (desktop), so, it's better to specify mp3 format for playback.
 * @class SpeakerAudioDestination
 * Updated in version 1.17.0
 */
class SpeakerAudioDestination {
    constructor(audioDestinationId) {
        this.privPlaybackStarted = false;
        this.privAppendingToBuffer = false;
        this.privMediaSourceOpened = false;
        this.privBytesReceived = 0;
        this.privId = audioDestinationId ? audioDestinationId : Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["createNoDashGuid"])();
        this.privIsPaused = false;
        this.privIsClosed = false;
    }
    id() {
        return this.privId;
    }
    write(buffer, cb, err) {
        if (this.privAudioBuffer !== undefined) {
            this.privAudioBuffer.push(buffer);
            this.updateSourceBuffer().then(() => {
                if (!!cb) {
                    cb();
                }
            }, (error) => {
                if (!!err) {
                    err(error);
                }
            });
        }
        else if (this.privAudioOutputStream !== undefined) {
            this.privAudioOutputStream.write(buffer);
            this.privBytesReceived += buffer.byteLength;
        }
    }
    close(cb, err) {
        this.privIsClosed = true;
        if (this.privSourceBuffer !== undefined) {
            this.handleSourceBufferUpdateEnd().then(() => {
                if (!!cb) {
                    cb();
                }
            }, (error) => {
                if (!!err) {
                    err(error);
                }
            });
        }
        else if (this.privAudioOutputStream !== undefined && typeof window !== "undefined") {
            if ((this.privFormat.formatTag === _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_3__["AudioFormatTag"].PCM || this.privFormat.formatTag === _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_3__["AudioFormatTag"].MuLaw
                || this.privFormat.formatTag === _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_3__["AudioFormatTag"].ALaw) && this.privFormat.hasHeader === false) {
                // eslint-disable-next-line no-console
                console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header.");
                if (!!this.onAudioEnd) {
                    this.onAudioEnd(this);
                }
            }
            else {
                let receivedAudio = new ArrayBuffer(this.privBytesReceived);
                this.privAudioOutputStream.read(receivedAudio).then(() => {
                    receivedAudio = _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SynthesisAdapterBase"].addHeader(receivedAudio, this.privFormat);
                    const audioBlob = new Blob([receivedAudio], { type: AudioFormatToMimeType[this.privFormat.formatTag] });
                    this.privAudio.src = window.URL.createObjectURL(audioBlob);
                    this.notifyPlayback().then(() => {
                        if (!!cb) {
                            cb();
                        }
                    }, (error) => {
                        if (!!err) {
                            err(error);
                        }
                    });
                }, (error) => {
                    if (!!err) {
                        err(error);
                    }
                });
            }
        }
        else {
            // unsupported format, call onAudioEnd directly.
            if (!!this.onAudioEnd) {
                this.onAudioEnd(this);
            }
        }
    }
    set format(format) {
        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
        if (typeof (AudioContext) !== "undefined" || (typeof (window) !== "undefined" && typeof (window.webkitAudioContext) !== "undefined")) {
            this.privFormat = format;
            const mimeType = AudioFormatToMimeType[this.privFormat.formatTag];
            if (mimeType === undefined) {
                // eslint-disable-next-line no-console
                console.warn(`Unknown mimeType for format ${_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_3__["AudioFormatTag"][this.privFormat.formatTag]}; playback is not supported.`);
            }
            else if (typeof (MediaSource) !== "undefined" && MediaSource.isTypeSupported(mimeType)) {
                this.privAudio = new Audio();
                this.privAudioBuffer = [];
                this.privMediaSource = new MediaSource();
                this.privAudio.src = URL.createObjectURL(this.privMediaSource);
                this.privAudio.load();
                this.privMediaSource.onsourceopen = () => {
                    this.privMediaSourceOpened = true;
                    this.privMediaSource.duration = MediaDurationPlaceholderSeconds;
                    this.privSourceBuffer = this.privMediaSource.addSourceBuffer(mimeType);
                    this.privSourceBuffer.onupdate = () => {
                        this.updateSourceBuffer().catch((reason) => {
                            _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Events"].instance.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["BackgroundEvent"](reason));
                        });
                    };
                    this.privSourceBuffer.onupdateend = () => {
                        this.handleSourceBufferUpdateEnd().catch((reason) => {
                            _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Events"].instance.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["BackgroundEvent"](reason));
                        });
                    };
                    this.privSourceBuffer.onupdatestart = () => {
                        this.privAppendingToBuffer = false;
                    };
                };
                this.updateSourceBuffer().catch((reason) => {
                    _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Events"].instance.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["BackgroundEvent"](reason));
                });
            }
            else {
                // eslint-disable-next-line no-console
                console.warn(`Format ${_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_3__["AudioFormatTag"][this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`);
                this.privAudioOutputStream = new _AudioOutputStream__WEBPACK_IMPORTED_MODULE_2__["PullAudioOutputStreamImpl"]();
                this.privAudioOutputStream.format = this.privFormat;
                this.privAudio = new Audio();
            }
        }
    }
    get volume() {
        var _a, _b;
        return (_b = (_a = this.privAudio) === null || _a === void 0 ? void 0 : _a.volume) !== null && _b !== void 0 ? _b : -1;
    }
    set volume(volume) {
        if (!!this.privAudio) {
            this.privAudio.volume = volume;
        }
    }
    mute() {
        if (!!this.privAudio) {
            this.privAudio.muted = true;
        }
    }
    unmute() {
        if (!!this.privAudio) {
            this.privAudio.muted = false;
        }
    }
    get isClosed() {
        return this.privIsClosed;
    }
    get currentTime() {
        if (this.privAudio !== undefined) {
            return this.privAudio.currentTime;
        }
        return -1;
    }
    pause() {
        if (!this.privIsPaused && this.privAudio !== undefined) {
            this.privAudio.pause();
            this.privIsPaused = true;
        }
    }
    resume(cb, err) {
        if (this.privIsPaused && this.privAudio !== undefined) {
            this.privAudio.play().then(() => {
                if (!!cb) {
                    cb();
                }
            }, (error) => {
                if (!!err) {
                    err(error);
                }
            });
            this.privIsPaused = false;
        }
    }
    get internalAudio() {
        return this.privAudio;
    }
    updateSourceBuffer() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privAudioBuffer !== undefined && (this.privAudioBuffer.length > 0) && this.sourceBufferAvailable()) {
                this.privAppendingToBuffer = true;
                const binary = this.privAudioBuffer.shift();
                try {
                    this.privSourceBuffer.appendBuffer(binary);
                }
                catch (error) {
                    this.privAudioBuffer.unshift(binary);
                    // eslint-disable-next-line no-console
                    console.log("buffer filled, pausing addition of binaries until space is made");
                    return;
                }
                yield this.notifyPlayback();
            }
            else if (this.canEndStream()) {
                yield this.handleSourceBufferUpdateEnd();
            }
        });
    }
    handleSourceBufferUpdateEnd() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.canEndStream() && this.sourceBufferAvailable()) {
                this.privMediaSource.endOfStream();
                yield this.notifyPlayback();
            }
        });
    }
    notifyPlayback() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.privPlaybackStarted && this.privAudio !== undefined) {
                this.privPlaybackStarted = true;
                if (!!this.onAudioStart) {
                    this.onAudioStart(this);
                }
                this.privAudio.onended = () => {
                    if (!!this.onAudioEnd) {
                        this.onAudioEnd(this);
                    }
                };
                if (!this.privIsPaused) {
                    yield this.privAudio.play();
                }
            }
        });
    }
    canEndStream() {
        return (this.isClosed && this.privSourceBuffer !== undefined && (this.privAudioBuffer.length === 0)
            && this.privMediaSourceOpened && !this.privAppendingToBuffer && this.privMediaSource.readyState === "open");
    }
    sourceBufferAvailable() {
        return (this.privSourceBuffer !== undefined && !this.privSourceBuffer.updating);
    }
}

//# sourceMappingURL=SpeakerAudioDestination.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/AutoDetectSourceLanguageConfig.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/AutoDetectSourceLanguageConfig.js ***!
  \**********************************************************************************************************************/
/*! exports provided: AutoDetectSourceLanguageConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AutoDetectSourceLanguageConfig", function() { return AutoDetectSourceLanguageConfig; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _LanguageIdMode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./LanguageIdMode */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LanguageIdMode.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.




/**
 * Language auto detect configuration.
 * @class AutoDetectSourceLanguageConfig
 * Added in version 1.13.0.
 */
class AutoDetectSourceLanguageConfig {
    constructor() {
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyCollection"]();
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_LanguageIdMode, "AtStart");
        this.privLanguageIdMode = _LanguageIdMode__WEBPACK_IMPORTED_MODULE_3__["LanguageIdMode"].AtStart;
    }
    /**
     * @member AutoDetectSourceLanguageConfig.fromOpenRange
     * @function
     * @public
     * Only [[SpeechSynthesizer]] supports source language auto detection from open range,
     * for [[Recognizer]], please use AutoDetectSourceLanguageConfig with specific source languages.
     * @return {AutoDetectSourceLanguageConfig} Instance of AutoDetectSourceLanguageConfig
     * @summary Creates an instance of the AutoDetectSourceLanguageConfig with open range.
     */
    static fromOpenRange() {
        const config = new AutoDetectSourceLanguageConfig();
        config.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_AutoDetectSourceLanguages, _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["AutoDetectSourceLanguagesOpenRangeOptionName"]);
        return config;
    }
    /**
     * @member AutoDetectSourceLanguageConfig.fromLanguages
     * @function
     * @public
     * @param {string[]} languages Comma-separated string of languages (eg. "en-US,fr-FR") to populate properties of config.
     * @return {AutoDetectSourceLanguageConfig} Instance of AutoDetectSourceLanguageConfig
     * @summary Creates an instance of the AutoDetectSourceLanguageConfig with given languages.
     */
    static fromLanguages(languages) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfArrayEmptyOrWhitespace(languages, "languages");
        const config = new AutoDetectSourceLanguageConfig();
        config.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_AutoDetectSourceLanguages, languages.join());
        return config;
    }
    /**
     * @member AutoDetectSourceLanguageConfig.fromSourceLanguageConfigs
     * @function
     * @public
     * @param {SourceLanguageConfig[]} configs SourceLanguageConfigs to populate properties of config.
     * @return {AutoDetectSourceLanguageConfig} Instance of AutoDetectSourceLanguageConfig
     * @summary Creates an instance of the AutoDetectSourceLanguageConfig with given SourceLanguageConfigs.
     */
    static fromSourceLanguageConfigs(configs) {
        if (configs.length < 1) {
            throw new Error("Expected non-empty SourceLanguageConfig array.");
        }
        const autoConfig = new AutoDetectSourceLanguageConfig();
        const langs = [];
        configs.forEach((config) => {
            langs.push(config.language);
            if (config.endpointId !== undefined && config.endpointId !== "") {
                const customProperty = config.language + _Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_EndpointId.toString();
                autoConfig.properties.setProperty(customProperty, config.endpointId);
            }
        });
        autoConfig.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_AutoDetectSourceLanguages, langs.join());
        return autoConfig;
    }
    /**
     * @member AutoDetectSourceLanguageConfig.prototype.properties
     * @function
     * @public
     * @return {PropertyCollection} Properties of the config.
     * @summary Gets an auto detected language config properties
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * @member AutoDetectSourceLanguageConfig.prototype.mode
     * @function
     * @public
     * @param {LanguageIdMode} mode LID mode desired.
     * @summary Sets LID operation to desired mode
     */
    set mode(mode) {
        if (mode === _LanguageIdMode__WEBPACK_IMPORTED_MODULE_3__["LanguageIdMode"].Continuous) {
            this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecognitionEndpointVersion, "2");
            this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_LanguageIdMode, "Continuous");
        }
        else { // LanguageIdMode.AtStart
            this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecognitionEndpointVersion, "1");
            this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_LanguageIdMode, "AtStart");
        }
        this.privLanguageIdMode = mode;
    }
}

//# sourceMappingURL=AutoDetectSourceLanguageConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/AutoDetectSourceLanguageResult.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/AutoDetectSourceLanguageResult.js ***!
  \**********************************************************************************************************************/
/*! exports provided: AutoDetectSourceLanguageResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AutoDetectSourceLanguageResult", function() { return AutoDetectSourceLanguageResult; });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Output format
 * @class AutoDetectSourceLanguageResult
 */
class AutoDetectSourceLanguageResult {
    constructor(language, languageDetectionConfidence) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrUndefined(language, "language");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrUndefined(languageDetectionConfidence, "languageDetectionConfidence");
        this.privLanguage = language;
        this.privLanguageDetectionConfidence = languageDetectionConfidence;
    }
    /**
     * Creates an instance of AutoDetectSourceLanguageResult object from a SpeechRecognitionResult instance.
     * @member AutoDetectSourceLanguageResult.fromResult
     * @function
     * @public
     * @param {SpeechRecognitionResult} result - The recognition result.
     * @returns {AutoDetectSourceLanguageResult} AutoDetectSourceLanguageResult object being created.
     */
    static fromResult(result) {
        return new AutoDetectSourceLanguageResult(result.language, result.languageDetectionConfidence);
    }
    get language() {
        return this.privLanguage;
    }
    get languageDetectionConfidence() {
        return this.privLanguageDetectionConfidence;
    }
}

//# sourceMappingURL=AutoDetectSourceLanguageResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/BotFrameworkConfig.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/BotFrameworkConfig.js ***!
  \**********************************************************************************************************/
/*! exports provided: BotFrameworkConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BotFrameworkConfig", function() { return BotFrameworkConfig; });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DialogServiceConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConfig.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



/**
 * Class that defines configurations for the dialog service connector object for using a Bot Framework backend.
 * @class BotFrameworkConfig
 */
class BotFrameworkConfig extends _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfigImpl"] {
    /**
     * Creates an instance of BotFrameworkConfig.
     */
    constructor() {
        super();
    }
    /**
     * Creates a bot framework configuration instance with the provided subscription information.
     * @member BotFrameworkConfig.fromSubscription
     * @function
     * @public
     * @param subscription Subscription key associated with the bot
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @param botId Optional. Identifier for using a specific bot within an Azure resource group. Equivalent to the
     * resource name.
     * @returns {BotFrameworkConfig} A new bot framework configuration instance.
     */
    static fromSubscription(subscription, region, botId) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(subscription, "subscription");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(region, "region");
        const botFrameworkConfig = new _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfigImpl"]();
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_DialogType, _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfig"].DialogTypes.BotFramework);
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key, subscription);
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region, region);
        if (botId) {
            botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_ApplicationId, botId);
        }
        return botFrameworkConfig;
    }
    /**
     * Creates a bot framework configuration instance for the specified authorization token and region.
     * Note: The caller must ensure that an authorization token is valid. Before an authorization token expires, the
     * caller must refresh it by setting the authorizationToken property on the corresponding
     * DialogServiceConnector instance created with this config. The contents of configuration objects are copied
     * when connectors are created, so setting authorizationToken on a DialogServiceConnector will not update the
     * original configuration's authorization token. Create a new configuration instance or set the
     * SpeechServiceAuthorization_Token property to update an existing instance if it will be used to create
     * further DialogServiceConnectors.
     * @member BotFrameworkConfig.fromAuthorizationToken
     * @function
     * @public
     * @param authorizationToken The authorization token associated with the bot
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @param botId Optional. Identifier for using a specific bot within an Azure resource group. Equivalent to the
     * resource name.
     * @returns {BotFrameworkConfig} A new bot framework configuration instance.
     */
    static fromAuthorizationToken(authorizationToken, region, botId) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(authorizationToken, "authorizationToken");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(region, "region");
        const botFrameworkConfig = new _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfigImpl"]();
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_DialogType, _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfig"].DialogTypes.BotFramework);
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token, authorizationToken);
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region, region);
        if (botId) {
            botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_ApplicationId, botId);
        }
        return botFrameworkConfig;
    }
    /**
     * Creates an instance of a BotFrameworkConfig.
     * This method is intended only for users who use a non-default service host. The standard resource path will be
     * assumed. For services with a non-standard resource path or no path at all, use fromEndpoint instead.
     * Note: Query parameters are not allowed in the host URI and must be set by other APIs.
     * Note: To use an authorization token with fromHost, use fromHost(URL) and then set the AuthorizationToken
     * property on the created BotFrameworkConfig instance.
     * Note: Added in version 1.15.0.
     * @member BotFrameworkConfig.fromHost
     * @function
     * @public
     * @param {URL | string} host - If a URL is provided, the fully-qualified host with protocol (e.g.
     * wss://your.host.com:1234) will be used. If a string is provided, it will be embedded in
     * wss://{host}.convai.speech.azure.us.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization
     * token must be set.
     * @param botId Optional. Identifier for using a specific bot within an Azure resource group. Equivalent to the
     * resource name.
     * @returns {BotFrameworkConfig} A new bot framework configuration instance.
     */
    static fromHost(host, subscriptionKey, botId) {
        void botId;
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrUndefined(host, "host");
        const resolvedHost = host instanceof URL ? host : new URL(`wss://${host}.convai.speech.azure.us`);
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrUndefined(resolvedHost, "resolvedHost");
        const botFrameworkConfig = new _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfigImpl"]();
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_DialogType, _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfig"].DialogTypes.BotFramework);
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Host, resolvedHost.toString());
        if (undefined !== subscriptionKey) {
            botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key, subscriptionKey);
        }
        return botFrameworkConfig;
    }
    /**
     * Creates an instance of a BotFrameworkConfig.
     * This method is intended only for users who use a non-standard service endpoint or parameters.
     * Note: The query parameters specified in the endpoint URL are not changed, even if they are set by any other APIs.
     * Note: To use authorization token with fromEndpoint, pass an empty string to the subscriptionKey in the
     * fromEndpoint method, and then set authorizationToken="token" on the created BotFrameworkConfig instance to
     * use the authorization token.
     * Note: Added in version 1.15.0.
     * @member BotFrameworkConfig.fromEndpoint
     * @function
     * @public
     * @param {URL} endpoint - The service endpoint to connect to.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization
     * token must be set.
     * @returns {BotFrameworkConfig} - A new bot framework configuration instance using the provided endpoint.
     */
    static fromEndpoint(endpoint, subscriptionKey) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNull(endpoint, "endpoint");
        const botFrameworkConfig = new _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfigImpl"]();
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_DialogType, _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfig"].DialogTypes.BotFramework);
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Endpoint, endpoint.toString());
        if (undefined !== subscriptionKey) {
            botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key, subscriptionKey);
        }
        return botFrameworkConfig;
    }
}

//# sourceMappingURL=BotFrameworkConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetails.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetails.js ***!
  \***********************************************************************************************************/
/*! exports provided: CancellationDetails */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CancellationDetails", function() { return CancellationDetails; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _CancellationDetailsBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CancellationDetailsBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetailsBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



/**
 * Contains detailed information about why a result was canceled.
 * @class CancellationDetails
 */
class CancellationDetails extends _CancellationDetailsBase__WEBPACK_IMPORTED_MODULE_1__["CancellationDetailsBase"] {
    constructor(reason, errorDetails, errorCode) {
        super(reason, errorDetails, errorCode);
    }
    /**
     * Creates an instance of CancellationDetails object for the canceled RecognitionResult.
     * @member CancellationDetails.fromResult
     * @function
     * @public
     * @param {RecognitionResult | SpeechSynthesisResult} result - The result that was canceled.
     * @returns {CancellationDetails} The cancellation details object being created.
     */
    static fromResult(result) {
        let reason = _Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].Error;
        let errorCode = _Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].NoError;
        if (result instanceof _Exports__WEBPACK_IMPORTED_MODULE_2__["RecognitionResult"] && !!result.json) {
            const simpleSpeech = _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SimpleSpeechPhrase"].fromJSON(result.json);
            reason = _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["EnumTranslation"].implTranslateCancelResult(simpleSpeech.RecognitionStatus);
        }
        if (!!result.properties) {
            errorCode = _Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"][result.properties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCodePropertyName"], _Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"][_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].NoError])];
        }
        return new CancellationDetails(reason, result.errorDetails || _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["EnumTranslation"].implTranslateErrorDetails(errorCode), errorCode);
    }
}

//# sourceMappingURL=CancellationDetails.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetailsBase.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetailsBase.js ***!
  \***************************************************************************************************************/
/*! exports provided: CancellationDetailsBase */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CancellationDetailsBase", function() { return CancellationDetailsBase; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Contains detailed information about why a result was canceled.
 * @class CancellationDetailsBase
 */
class CancellationDetailsBase {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {CancellationReason} reason - The cancellation reason.
     * @param {string} errorDetails - The error details, if provided.
     */
    constructor(reason, errorDetails, errorCode) {
        this.privReason = reason;
        this.privErrorDetails = errorDetails;
        this.privErrorCode = errorCode;
    }
    /**
     * The reason the recognition was canceled.
     * @member CancellationDetailsBase.prototype.reason
     * @function
     * @public
     * @returns {CancellationReason} Specifies the reason canceled.
     */
    get reason() {
        return this.privReason;
    }
    /**
     * In case of an unsuccessful recognition, provides details of the occurred error.
     * @member CancellationDetailsBase.prototype.errorDetails
     * @function
     * @public
     * @returns {string} A String that represents the error details.
     */
    get errorDetails() {
        return this.privErrorDetails;
    }
    /**
     * The error code in case of an unsuccessful recognition.
     * Added in version 1.1.0.
     * @return An error code that represents the error reason.
     */
    get ErrorCode() {
        return this.privErrorCode;
    }
}

//# sourceMappingURL=CancellationDetailsBase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js ***!
  \**************************************************************************************************************/
/*! exports provided: CancellationErrorCode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CancellationErrorCode", function() { return CancellationErrorCode; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines error code in case that CancellationReason is Error.
 * Added in version 1.1.0.
 */
var CancellationErrorCode;
(function (CancellationErrorCode) {
    /**
     * Indicates that no error occurred during speech recognition.
     */
    CancellationErrorCode[CancellationErrorCode["NoError"] = 0] = "NoError";
    /**
     * Indicates an authentication error.
     */
    CancellationErrorCode[CancellationErrorCode["AuthenticationFailure"] = 1] = "AuthenticationFailure";
    /**
     * Indicates that one or more recognition parameters are invalid.
     */
    CancellationErrorCode[CancellationErrorCode["BadRequestParameters"] = 2] = "BadRequestParameters";
    /**
     * Indicates that the number of parallel requests exceeded the number of allowed
     * concurrent transcriptions for the subscription.
     */
    CancellationErrorCode[CancellationErrorCode["TooManyRequests"] = 3] = "TooManyRequests";
    /**
     * Indicates a connection error.
     */
    CancellationErrorCode[CancellationErrorCode["ConnectionFailure"] = 4] = "ConnectionFailure";
    /**
     * Indicates a time-out error when waiting for response from service.
     */
    CancellationErrorCode[CancellationErrorCode["ServiceTimeout"] = 5] = "ServiceTimeout";
    /**
     * Indicates that an error is returned by the service.
     */
    CancellationErrorCode[CancellationErrorCode["ServiceError"] = 6] = "ServiceError";
    /**
     * Indicates an unexpected runtime error.
     */
    CancellationErrorCode[CancellationErrorCode["RuntimeError"] = 7] = "RuntimeError";
    /**
     * Indicates an quota overrun on existing key.
     */
    CancellationErrorCode[CancellationErrorCode["Forbidden"] = 8] = "Forbidden";
})(CancellationErrorCode || (CancellationErrorCode = {}));

//# sourceMappingURL=CancellationErrorCodes.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationEventArgsBase.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationEventArgsBase.js ***!
  \*****************************************************************************************************************/
/*! exports provided: CancellationEventArgsBase */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CancellationEventArgsBase", function() { return CancellationEventArgsBase; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Defines content of a CancellationEvent.
 * @class CancellationEventArgsBase
 */
class CancellationEventArgsBase extends _Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionEventArgs"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {CancellationReason} reason - The cancellation reason.
     * @param {string} errorDetails - Error details, if provided.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */
    constructor(reason, errorDetails, errorCode, offset, sessionId) {
        super(offset, sessionId);
        this.privReason = reason;
        this.privErrorDetails = errorDetails;
        this.privErrorCode = errorCode;
    }
    /**
     * The reason the recognition was canceled.
     * @member CancellationEventArgsBase.prototype.reason
     * @function
     * @public
     * @returns {CancellationReason} Specifies the reason canceled.
     */
    get reason() {
        return this.privReason;
    }
    /**
     * The error code in case of an unsuccessful operation.
     * @return An error code that represents the error reason.
     */
    get errorCode() {
        return this.privErrorCode;
    }
    /**
     * In case of an unsuccessful operation, provides details of the occurred error.
     * @member CancellationEventArgsBase.prototype.errorDetails
     * @function
     * @public
     * @returns {string} A String that represents the error details.
     */
    get errorDetails() {
        return this.privErrorDetails;
    }
}

//# sourceMappingURL=CancellationEventArgsBase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js ***!
  \**********************************************************************************************************/
/*! exports provided: CancellationReason */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CancellationReason", function() { return CancellationReason; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines the possible reasons a recognition result might be canceled.
 * @class CancellationReason
 */
var CancellationReason;
(function (CancellationReason) {
    /**
     * Indicates that an error occurred during speech recognition.
     * @member CancellationReason.Error
     */
    CancellationReason[CancellationReason["Error"] = 0] = "Error";
    /**
     * Indicates that the end of the audio stream was reached.
     * @member CancellationReason.EndOfStream
     */
    CancellationReason[CancellationReason["EndOfStream"] = 1] = "EndOfStream";
})(CancellationReason || (CancellationReason = {}));

//# sourceMappingURL=CancellationReason.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Connection.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Connection.js ***!
  \**************************************************************************************************/
/*! exports provided: Connection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Connection", function() { return Connection; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _ConnectionMessage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConnectionMessage */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionMessage.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//





/**
 * Connection is a proxy class for managing connection to the speech service of the specified Recognizer.
 * By default, a Recognizer autonomously manages connection to service when needed.
 * The Connection class provides additional methods for users to explicitly open or close a connection and
 * to subscribe to connection status changes.
 * The use of Connection is optional, and mainly for scenarios where fine tuning of application
 * behavior based on connection status is needed. Users can optionally call Open() to manually set up a connection
 * in advance before starting recognition on the Recognizer associated with this Connection.
 * If the Recognizer needs to connect or disconnect to service, it will
 * setup or shutdown the connection independently. In this case the Connection will be notified by change of connection
 * status via Connected/Disconnected events.
 * Added in version 1.2.1.
 */
class Connection {
    /**
     * Gets the Connection instance from the specified recognizer.
     * @param recognizer The recognizer associated with the connection.
     * @return The Connection instance of the recognizer.
     */
    static fromRecognizer(recognizer) {
        const recoBase = recognizer.internalData;
        const ret = new Connection();
        ret.privInternalData = recoBase;
        ret.setupEvents();
        return ret;
    }
    /**
     * Gets the Connection instance from the specified synthesizer.
     * @param synthesizer The synthesizer associated with the connection.
     * @return The Connection instance of the synthesizer.
     */
    static fromSynthesizer(synthesizer) {
        const synthBase = synthesizer.internalData;
        const ret = new Connection();
        ret.privInternalData = synthBase;
        ret.setupEvents();
        return ret;
    }
    /**
     * Starts to set up connection to the service.
     * Users can optionally call openConnection() to manually set up a connection in advance before starting recognition on the
     * Recognizer associated with this Connection. After starting recognition, calling Open() will have no effect
     *
     * Note: On return, the connection might not be ready yet. Please subscribe to the Connected event to
     * be notified when the connection is established.
     */
    openConnection(cb, err) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.privInternalData.connect(), cb, err);
    }
    /**
     * Closes the connection the service.
     * Users can optionally call closeConnection() to manually shutdown the connection of the associated Recognizer.
     *
     * If closeConnection() is called during recognition, recognition will fail and cancel with an error.
     */
    closeConnection(cb, err) {
        if (this.privInternalData instanceof _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SynthesisAdapterBase"]) {
            throw new Error("Disconnecting a synthesizer's connection is currently not supported");
        }
        else {
            Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.privInternalData.disconnect(), cb, err);
        }
    }
    /**
     * Appends a parameter in a message to service.
     * Added in version 1.12.1.
     * @param path The path of the network message.
     * @param propertyName Name of the property
     * @param propertyValue Value of the property. This is a json string.
     */
    setMessageProperty(path, propertyName, propertyValue) {
        _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNullOrWhitespace(propertyName, "propertyName");
        if (this.privInternalData instanceof _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ServiceRecognizerBase"]) {
            if (path.toLowerCase() !== "speech.context") {
                throw new Error("Only speech.context message property sets are currently supported for recognizer");
            }
            else {
                this.privInternalData.speechContext.setSection(propertyName, propertyValue);
            }
        }
        else if (this.privInternalData instanceof _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SynthesisAdapterBase"]) {
            if (path.toLowerCase() !== "synthesis.context") {
                throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");
            }
            else {
                this.privInternalData.synthesisContext.setSection(propertyName, propertyValue);
            }
        }
    }
    /**
     * Sends a message to the speech service.
     * Added in version 1.13.0.
     * @param path The WebSocket path of the message
     * @param payload The payload of the message. This is a json string or a ArrayBuffer.
     * @param success A callback to indicate success.
     * @param error A callback to indicate an error.
     */
    sendMessageAsync(path, payload, success, error) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.privInternalData.sendNetworkMessage(path, payload), success, error);
    }
    /**
     * Dispose of associated resources.
     */
    close() {
        /* eslint-disable no-empty */
    }
    setupEvents() {
        this.privEventListener = this.privInternalData.connectionEvents.attach((connectionEvent) => {
            if (connectionEvent.name === "ConnectionEstablishedEvent") {
                if (!!this.connected) {
                    this.connected(new _Exports__WEBPACK_IMPORTED_MODULE_4__["ConnectionEventArgs"](connectionEvent.connectionId));
                }
            }
            else if (connectionEvent.name === "ConnectionClosedEvent") {
                if (!!this.disconnected) {
                    this.disconnected(new _Exports__WEBPACK_IMPORTED_MODULE_4__["ConnectionEventArgs"](connectionEvent.connectionId));
                }
            }
            else if (connectionEvent.name === "ConnectionMessageSentEvent") {
                if (!!this.messageSent) {
                    this.messageSent(new _Exports__WEBPACK_IMPORTED_MODULE_4__["ConnectionMessageEventArgs"](new _ConnectionMessage__WEBPACK_IMPORTED_MODULE_2__["ConnectionMessageImpl"](connectionEvent.message)));
                }
            }
            else if (connectionEvent.name === "ConnectionMessageReceivedEvent") {
                if (!!this.messageReceived) {
                    this.messageReceived(new _Exports__WEBPACK_IMPORTED_MODULE_4__["ConnectionMessageEventArgs"](new _ConnectionMessage__WEBPACK_IMPORTED_MODULE_2__["ConnectionMessageImpl"](connectionEvent.message)));
                }
            }
        });
        this.privServiceEventListener = this.privInternalData.serviceEvents.attach((e) => {
            if (!!this.receivedServiceMessage) {
                this.receivedServiceMessage(new _Exports__WEBPACK_IMPORTED_MODULE_4__["ServiceEventArgs"](e.jsonString, e.name));
            }
        });
    }
}

//# sourceMappingURL=Connection.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionEventArgs.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionEventArgs.js ***!
  \***********************************************************************************************************/
/*! exports provided: ConnectionEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionEventArgs", function() { return ConnectionEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//

/**
 * Defines payload for connection events like Connected/Disconnected.
 * Added in version 1.2.0
 */
class ConnectionEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["SessionEventArgs"] {
}

//# sourceMappingURL=ConnectionEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionMessage.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionMessage.js ***!
  \*********************************************************************************************************/
/*! exports provided: ConnectionMessage, ConnectionMessageImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessage", function() { return ConnectionMessage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessageImpl", function() { return ConnectionMessageImpl; });
/* harmony import */ var _common_speech_HeaderNames__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _PropertyCollection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PropertyCollection */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _PropertyId__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./PropertyId */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//
// eslint-disable-next-line max-classes-per-file




/**
 * ConnectionMessage represents implementation specific messages sent to and received from
 * the speech service. These messages are provided for debugging purposes and should not
 * be used for production use cases with the Azure Cognitive Services Speech Service.
 * Messages sent to and received from the Speech Service are subject to change without
 * notice. This includes message contents, headers, payloads, ordering, etc.
 * Added in version 1.11.0.
 */
class ConnectionMessage {
}
class ConnectionMessageImpl {
    constructor(message) {
        this.privConnectionMessage = message;
        this.privProperties = new _PropertyCollection__WEBPACK_IMPORTED_MODULE_2__["PropertyCollection"]();
        if (!!this.privConnectionMessage.headers[_common_speech_HeaderNames__WEBPACK_IMPORTED_MODULE_0__["HeaderNames"].ConnectionId]) {
            this.privProperties.setProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].Speech_SessionId, this.privConnectionMessage.headers[_common_speech_HeaderNames__WEBPACK_IMPORTED_MODULE_0__["HeaderNames"].ConnectionId]);
        }
        Object.keys(this.privConnectionMessage.headers).forEach((header) => {
            this.privProperties.setProperty(header, this.privConnectionMessage.headers[header]);
        });
    }
    /**
     * The message path.
     */
    get path() {
        return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find((key) => key.toLowerCase() === "path".toLowerCase())];
    }
    /**
     * Checks to see if the ConnectionMessage is a text message.
     * See also IsBinaryMessage().
     */
    get isTextMessage() {
        return this.privConnectionMessage.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Text;
    }
    /**
     * Checks to see if the ConnectionMessage is a binary message.
     * See also GetBinaryMessage().
     */
    get isBinaryMessage() {
        return this.privConnectionMessage.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Binary;
    }
    /**
     * Gets the text message payload. Typically the text message content-type is
     * application/json. To determine other content-types use
     * Properties.GetProperty("Content-Type").
     */
    get TextMessage() {
        return this.privConnectionMessage.textBody;
    }
    /**
     * Gets the binary message payload.
     */
    get binaryMessage() {
        return this.privConnectionMessage.binaryBody;
    }
    /**
     * A collection of properties and their values defined for this <see cref="ConnectionMessage"/>.
     * Message headers can be accessed via this collection (e.g. "Content-Type").
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * Returns a string that represents the connection message.
     */
    toString() {
        return "";
    }
}

//# sourceMappingURL=ConnectionMessage.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionMessageEventArgs.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionMessageEventArgs.js ***!
  \******************************************************************************************************************/
/*! exports provided: ConnectionMessageEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessageEventArgs", function() { return ConnectionMessageEventArgs; });
//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//
class ConnectionMessageEventArgs {
    constructor(message) {
        this.privConnectionMessage = message;
    }
    /**
     * Gets the <see cref="ConnectionMessage"/> associated with this <see cref="ConnectionMessageEventArgs"/>.
     */
    get message() {
        return this.privConnectionMessage;
    }
    /**
     * Returns a string that represents the connection message event.
     */
    toString() {
        return "Message: " + this.privConnectionMessage.toString();
    }
}

//# sourceMappingURL=ConnectionMessageEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js ***!
  \*************************************************************************************************/
/*! exports provided: Contracts */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Contracts", function() { return Contracts; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * @class Contracts
 * @private
 */
class Contracts {
    static throwIfNullOrUndefined(param, name) {
        if (param === undefined || param === null) {
            throw new Error("throwIfNullOrUndefined:" + name);
        }
    }
    static throwIfNull(param, name) {
        if (param === null) {
            throw new Error("throwIfNull:" + name);
        }
    }
    static throwIfNullOrWhitespace(param, name) {
        Contracts.throwIfNullOrUndefined(param, name);
        if (("" + param).trim().length < 1) {
            throw new Error("throwIfNullOrWhitespace:" + name);
        }
    }
    static throwIfDisposed(isDisposed) {
        if (isDisposed) {
            throw new Error("the object is already disposed");
        }
    }
    static throwIfArrayEmptyOrWhitespace(array, name) {
        Contracts.throwIfNullOrUndefined(array, name);
        if (array.length === 0) {
            throw new Error("throwIfArrayEmptyOrWhitespace:" + name);
        }
        for (const item of array) {
            Contracts.throwIfNullOrWhitespace(item, name);
        }
    }
    static throwIfFileDoesNotExist(param, name) {
        Contracts.throwIfNullOrWhitespace(param, name);
        // TODO check for file existence.
    }
    static throwIfNotUndefined(param, name) {
        if (param !== undefined) {
            throw new Error("throwIfNotUndefined:" + name);
        }
    }
}

//# sourceMappingURL=Contracts.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConversationTranscriptionCanceledEventArgs.js":
/*!**********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConversationTranscriptionCanceledEventArgs.js ***!
  \**********************************************************************************************************************************/
/*! exports provided: ConversationTranscriptionCanceledEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationTranscriptionCanceledEventArgs", function() { return ConversationTranscriptionCanceledEventArgs; });
/* harmony import */ var _CancellationEventArgsBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CancellationEventArgsBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationEventArgsBase.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Defines content of a RecognitionErrorEvent.
 * @class ConversationTranscriptionCanceledEventArgs
 */
class ConversationTranscriptionCanceledEventArgs extends _CancellationEventArgsBase__WEBPACK_IMPORTED_MODULE_0__["CancellationEventArgsBase"] {
}

//# sourceMappingURL=ConversationTranscriptionCanceledEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CustomCommandsConfig.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CustomCommandsConfig.js ***!
  \************************************************************************************************************/
/*! exports provided: CustomCommandsConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomCommandsConfig", function() { return CustomCommandsConfig; });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DialogServiceConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConfig.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



/**
 * Class that defines configurations for the dialog service connector object for using a CustomCommands backend.
 * @class CustomCommandsConfig
 */
class CustomCommandsConfig extends _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfigImpl"] {
    /**
     * Creates an instance of CustomCommandsConfig.
     */
    constructor() {
        super();
    }
    /**
     * Creates an instance of the bot framework config with the specified subscription and region.
     * @member CustomCommandsConfig.fromSubscription
     * @function
     * @public
     * @param applicationId Speech Commands application id.
     * @param subscription Subscription key associated with the bot
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {CustomCommandsConfig} A new bot framework config.
     */
    static fromSubscription(applicationId, subscription, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(applicationId, "applicationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(subscription, "subscription");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(region, "region");
        const customCommandsConfig = new _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfigImpl"]();
        customCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_DialogType, _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfig"].DialogTypes.CustomCommands);
        customCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_ApplicationId, applicationId);
        customCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key, subscription);
        customCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region, region);
        return customCommandsConfig;
    }
    /**
     * Creates an instance of the bot framework config with the specified Speech Commands application id, authorization token and region.
     * Note: The caller needs to ensure that the authorization token is valid. Before the authorization token
     * expires, the caller needs to refresh it by calling this setter with a new valid token.
     * As configuration values are copied when creating a new recognizer, the new token value will not apply to recognizers that have already been created.
     * For recognizers that have been created before, you need to set authorization token of the corresponding recognizer
     * to refresh the token. Otherwise, the recognizers will encounter errors during recognition.
     * @member CustomCommandsConfig.fromAuthorizationToken
     * @function
     * @public
     * @param applicationId Speech Commands application id.
     * @param authorizationToken The authorization token associated with the application.
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {CustomCommandsConfig} A new speech commands config.
     */
    static fromAuthorizationToken(applicationId, authorizationToken, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(applicationId, "applicationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(authorizationToken, "authorizationToken");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(region, "region");
        const customCommandsConfig = new _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfigImpl"]();
        customCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_DialogType, _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfig"].DialogTypes.CustomCommands);
        customCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_ApplicationId, applicationId);
        customCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token, authorizationToken);
        customCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region, region);
        return customCommandsConfig;
    }
    /**
     * Sets the corresponding backend application identifier.
     * @member CustomCommandsConfig.prototype.Conversation_ApplicationId
     * @function
     * @public
     * @param {string} value - The application identifier to set.
     */
    set applicationId(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(value, "value");
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_ApplicationId, value);
    }
    /**
     * Gets the corresponding backend application identifier.
     * @member CustomCommandsConfig.prototype.Conversation_ApplicationId
     * @function
     * @public
     * @param {string} value - The application identifier to get.
     */
    get applicationId() {
        return this.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_ApplicationId);
    }
}

//# sourceMappingURL=CustomCommandsConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Diagnostics.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Diagnostics.js ***!
  \***************************************************************************************************/
/*! exports provided: Diagnostics */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Diagnostics", function() { return Diagnostics; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//


/**
 * Defines diagnostics API for managing console output
 * Added in version 1.21.0
 */
class Diagnostics {
    static SetLoggingLevel(logLevel) {
        this.privListener = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ConsoleLoggingListener"](logLevel);
        _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Events"].instance.attachConsoleListener(this.privListener);
    }
    static SetLogOutputPath(path) {
        if (typeof window === "undefined") {
            if (!!this.privListener) {
                this.privListener.logPath = path;
            }
        }
        else {
            throw new Error("File system logging not available in browser.");
        }
    }
}
Diagnostics.privListener = undefined;

//# sourceMappingURL=Diagnostics.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConfig.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConfig.js ***!
  \***********************************************************************************************************/
/*! exports provided: DialogServiceConfig, DialogServiceConfigImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogServiceConfig", function() { return DialogServiceConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogServiceConfigImpl", function() { return DialogServiceConfigImpl; });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */


/**
 * Class that defines base configurations for dialog service connector
 * @class DialogServiceConfig
 */
class DialogServiceConfig {
    /**
     * Creates an instance of DialogService config.
     * @constructor
     */
    constructor() {
        return;
    }
    /**
     * Sets the corresponding backend application identifier.
     * @member DialogServiceConfig.prototype.Conversation_ApplicationId
     * @function
     * @public
     * @param {string} value - The application identifier to set.
     */
    // eslint-disable-next-line @typescript-eslint/no-empty-function
    set applicationId(value) { }
    static get DialogTypes() {
        return {
            BotFramework: "bot_framework",
            CustomCommands: "custom_commands"
        };
    }
}
/**
 * Dialog Service configuration.
 * @class DialogServiceConfigImpl
 */
class DialogServiceConfigImpl extends DialogServiceConfig {
    /**
     * Creates an instance of dialogService config.
     */
    constructor() {
        super();
        this.privSpeechConfig = new _Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechConfigImpl"]();
    }
    /**
     * Provides access to custom properties.
     * @member DialogServiceConfigImpl.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The properties.
     */
    get properties() {
        return this.privSpeechConfig.properties;
    }
    /**
     * Gets the speech recognition language.
     * @member DialogServiceConfigImpl.prototype.speechRecognitionLanguage
     * @function
     * @public
     */
    get speechRecognitionLanguage() {
        return this.privSpeechConfig.speechRecognitionLanguage;
    }
    /**
     * Sets the speech recognition language.
     * @member DialogServiceConfigImpl.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @param {string} value - The language to set.
     */
    set speechRecognitionLanguage(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(value, "value");
        this.privSpeechConfig.speechRecognitionLanguage = value;
    }
    get outputFormat() {
        return this.privSpeechConfig.outputFormat;
    }
    set outputFormat(value) {
        this.privSpeechConfig.outputFormat = value;
    }
    /**
     * Sets a named property as value
     * @member DialogServiceConfigImpl.prototype.setProperty
     * @function
     * @public
     * @param {PropertyId | string} name - The property to set.
     * @param {string} value - The value.
     */
    setProperty(name, value) {
        this.privSpeechConfig.setProperty(name, value);
    }
    /**
     * Sets a named property as value
     * @member DialogServiceConfigImpl.prototype.getProperty
     * @function
     * @public
     * @param {PropertyId | string} name - The property to get.
     * @param {string} def - The default value to return in case the property is not known.
     * @returns {string} The current value, or provided default, of the given property.
     */
    getProperty(name, def) {
        void def;
        return this.privSpeechConfig.getProperty(name);
    }
    /**
     * Sets the proxy configuration.
     * Only relevant in Node.js environments.
     * Added in version 1.4.0.
     * @param proxyHostName The host name of the proxy server, without the protocol scheme (http://)
     * @param proxyPort The port number of the proxy server.
     * @param proxyUserName The user name of the proxy server.
     * @param proxyPassword The password of the proxy server.
     */
    setProxy(proxyHostName, proxyPort, proxyUserName, proxyPassword) {
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_ProxyHostName, proxyHostName);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_ProxyPort, `${proxyPort}`);
        if (proxyUserName) {
            this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_ProxyUserName, proxyUserName);
        }
        if (proxyPassword) {
            this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_ProxyPassword, proxyPassword);
        }
    }
    setServiceProperty(name, value, channel) {
        void channel;
        this.privSpeechConfig.setServiceProperty(name, value);
    }
    /**
     * Dispose of associated resources.
     * @member DialogServiceConfigImpl.prototype.close
     * @function
     * @public
     */
    close() {
        return;
    }
}

//# sourceMappingURL=DialogServiceConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConnector.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConnector.js ***!
  \**************************************************************************************************************/
/*! exports provided: DialogServiceConnector */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogServiceConnector", function() { return DialogServiceConnector; });
/* harmony import */ var _common_speech_DialogConnectorFactory__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/DialogConnectorFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogConnectorFactory.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _PropertyId__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PropertyId */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};






/**
 * Dialog Service Connector
 * @class DialogServiceConnector
 */
class DialogServiceConnector extends _Exports__WEBPACK_IMPORTED_MODULE_4__["Recognizer"] {
    /**
     * Initializes an instance of the DialogServiceConnector.
     * @constructor
     * @param {DialogServiceConfig} dialogConfig - Set of properties to configure this recognizer.
     * @param {AudioConfig} audioConfig - An optional audio config associated with the recognizer
     */
    constructor(dialogConfig, audioConfig) {
        const dialogServiceConfigImpl = dialogConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNull(dialogConfig, "dialogConfig");
        super(audioConfig, dialogServiceConfigImpl.properties, new _common_speech_DialogConnectorFactory__WEBPACK_IMPORTED_MODULE_0__["DialogConnectionFactory"]());
        this.isTurnComplete = true;
        this.privIsDisposed = false;
        this.privProperties = dialogServiceConfigImpl.properties.clone();
        const agentConfig = this.buildAgentConfig();
        this.privReco.agentConfig.set(agentConfig);
    }
    /**
     * Starts a connection to the service.
     * Users can optionally call connect() to manually set up a connection in advance, before starting interactions.
     *
     * Note: On return, the connection might not be ready yet. Please subscribe to the Connected event to
     * be notified when the connection is established.
     * @member DialogServiceConnector.prototype.connect
     * @function
     * @public
     */
    connect(cb, err) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_2__["marshalPromiseToCallbacks"])(this.privReco.connect(), cb, err);
    }
    /**
     * Closes the connection the service.
     * Users can optionally call disconnect() to manually shutdown the connection of the associated DialogServiceConnector.
     *
     * If disconnect() is called during a recognition, recognition will fail and cancel with an error.
     */
    disconnect(cb, err) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_2__["marshalPromiseToCallbacks"])(this.privReco.disconnect(), cb, err);
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member DialogServiceConnector.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_5__["PropertyId"].SpeechServiceAuthorization_Token);
    }
    /**
     * Sets the authorization token used to communicate with the service.
     * @member DialogServiceConnector.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */
    set authorizationToken(token) {
        _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNullOrWhitespace(token, "token");
        this.properties.setProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_5__["PropertyId"].SpeechServiceAuthorization_Token, token);
    }
    /**
     * The collection of properties and their values defined for this DialogServiceConnector.
     * @member DialogServiceConnector.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this DialogServiceConnector.
     */
    get properties() {
        return this.privProperties;
    }
    /** Gets the template for the activity generated by service from speech.
     * Properties from the template will be stamped on the generated activity.
     * It can be empty
     */
    get speechActivityTemplate() {
        return this.properties.getProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_5__["PropertyId"].Conversation_Speech_Activity_Template);
    }
    /** Sets the template for the activity generated by service from speech.
     * Properties from the template will be stamped on the generated activity.
     * It can be null or empty.
     * Note: it has to be a valid Json object.
     */
    set speechActivityTemplate(speechActivityTemplate) {
        this.properties.setProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_5__["PropertyId"].Conversation_Speech_Activity_Template, speechActivityTemplate);
    }
    /**
     * Starts recognition and stops after the first utterance is recognized.
     * @member DialogServiceConnector.prototype.listenOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the result when the reco has completed.
     * @param err - Callback invoked in case of an error.
     */
    listenOnceAsync(cb, err) {
        if (this.isTurnComplete) {
            _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfDisposed(this.privIsDisposed);
            const callbackHolder = () => __awaiter(this, void 0, void 0, function* () {
                yield this.privReco.connect();
                yield this.implRecognizerStop();
                this.isTurnComplete = false;
                const ret = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Deferred"]();
                yield this.privReco.recognize(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionMode"].Conversation, ret.resolve, ret.reject);
                const e = yield ret.promise;
                yield this.implRecognizerStop();
                return e;
            });
            const retPromise = callbackHolder();
            retPromise.catch(() => {
                // Destroy the recognizer.
                // We've done all we can here.
                // eslint-disable-next-line @typescript-eslint/no-empty-function
                this.dispose(true).catch(() => { });
            });
            Object(_common_Exports__WEBPACK_IMPORTED_MODULE_2__["marshalPromiseToCallbacks"])(retPromise.finally(() => {
                this.isTurnComplete = true;
            }), cb, err);
        }
    }
    sendActivityAsync(activity, cb, errCb) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_2__["marshalPromiseToCallbacks"])(this.privReco.sendMessage(activity), cb, errCb);
    }
    /**
     * closes all external resources held by an instance of this class.
     * @member DialogServiceConnector.prototype.close
     * @function
     * @public
     */
    close(cb, err) {
        _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfDisposed(this.privIsDisposed);
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_2__["marshalPromiseToCallbacks"])(this.dispose(true), cb, err);
    }
    dispose(disposing) {
        const _super = Object.create(null, {
            dispose: { get: () => super.dispose }
        });
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privIsDisposed) {
                return;
            }
            if (disposing) {
                this.privIsDisposed = true;
                yield this.implRecognizerStop();
                yield _super.dispose.call(this, disposing);
            }
        });
    }
    createRecognizerConfig(speechConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["RecognizerConfig"](speechConfig, this.privProperties);
    }
    createServiceRecognizer(authentication, connectionFactory, audioConfig, recognizerConfig) {
        const audioSource = audioConfig;
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["DialogServiceAdapter"](authentication, connectionFactory, audioSource, recognizerConfig, this);
    }
    buildAgentConfig() {
        const communicationType = this.properties.getProperty("Conversation_Communication_Type", "Default");
        return {
            botInfo: {
                commType: communicationType,
                commandsCulture: undefined,
                connectionId: this.properties.getProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_5__["PropertyId"].Conversation_Agent_Connection_Id),
                conversationId: this.properties.getProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_5__["PropertyId"].Conversation_Conversation_Id, undefined),
                fromId: this.properties.getProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_5__["PropertyId"].Conversation_From_Id, undefined),
                ttsAudioFormat: this.properties.getProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_5__["PropertyId"].SpeechServiceConnection_SynthOutputFormat, undefined)
            },
            version: 0.2
        };
    }
}

//# sourceMappingURL=DialogServiceConnector.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js ***!
  \***********************************************************************************************/
/*! exports provided: AudioConfig, AudioStreamFormat, AudioFormatTag, AudioInputStream, PullAudioInputStream, PushAudioInputStream, AudioOutputStream, PullAudioOutputStream, PushAudioOutputStream, CancellationReason, PullAudioInputStreamCallback, PushAudioOutputStreamCallback, KeywordRecognitionModel, SessionEventArgs, RecognitionEventArgs, OutputFormat, IntentRecognitionEventArgs, RecognitionResult, SpeechRecognitionResult, IntentRecognitionResult, LanguageUnderstandingModel, SpeechRecognitionEventArgs, ConversationTranscriptionEventArgs, SpeechRecognitionCanceledEventArgs, TranslationRecognitionEventArgs, TranslationSynthesisEventArgs, TranslationRecognitionResult, TranslationSynthesisResult, ResultReason, SpeechConfig, SpeechConfigImpl, SpeechTranslationConfig, SpeechTranslationConfigImpl, PropertyCollection, PropertyId, Recognizer, SpeechRecognizer, IntentRecognizer, VoiceProfileType, TranslationRecognizer, Translations, NoMatchReason, NoMatchDetails, TranslationRecognitionCanceledEventArgs, IntentRecognitionCanceledEventArgs, CancellationDetailsBase, CancellationDetails, CancellationErrorCode, ConnectionEventArgs, ServiceEventArgs, Connection, PhraseListGrammar, DialogServiceConfig, BotFrameworkConfig, CustomCommandsConfig, DialogServiceConnector, ActivityReceivedEventArgs, TurnStatusReceivedEventArgs, ServicePropertyChannel, ProfanityOption, BaseAudioPlayer, ConnectionMessageEventArgs, ConnectionMessage, VoiceProfile, VoiceProfileEnrollmentResult, VoiceProfileEnrollmentCancellationDetails, VoiceProfileResult, VoiceProfileCancellationDetails, VoiceProfilePhraseResult, VoiceProfileClient, SpeakerRecognizer, SpeakerIdentificationModel, SpeakerVerificationModel, AutoDetectSourceLanguageConfig, AutoDetectSourceLanguageResult, SourceLanguageConfig, SpeakerRecognitionResult, SpeakerRecognitionResultType, SpeakerRecognitionCancellationDetails, Conversation, ConversationExpirationEventArgs, ConversationParticipantsChangedEventArgs, ConversationTranslationCanceledEventArgs, ConversationTranslationEventArgs, ConversationTranslationResult, ConversationTranslator, ConversationTranscriber, Participant, ParticipantChangedReason, User, SpeechSynthesisOutputFormat, SpeechSynthesizer, SynthesisResult, SpeechSynthesisResult, SpeechSynthesisEventArgs, SpeechSynthesisWordBoundaryEventArgs, SpeechSynthesisBookmarkEventArgs, SpeechSynthesisVisemeEventArgs, SpeechSynthesisBoundaryType, SynthesisVoicesResult, VoiceInfo, SpeakerAudioDestination, ConversationTranscriptionCanceledEventArgs, PronunciationAssessmentGradingSystem, PronunciationAssessmentGranularity, PronunciationAssessmentConfig, PronunciationAssessmentResult, LanguageIdMode, Diagnostics, LogLevel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Audio_AudioConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Audio/AudioConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioConfig", function() { return _Audio_AudioConfig__WEBPACK_IMPORTED_MODULE_0__["AudioConfig"]; });

/* harmony import */ var _Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Audio/AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioStreamFormat", function() { return _Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioStreamFormat"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioFormatTag", function() { return _Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioFormatTag"]; });

/* harmony import */ var _Audio_AudioInputStream__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Audio/AudioInputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioInputStream.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioInputStream", function() { return _Audio_AudioInputStream__WEBPACK_IMPORTED_MODULE_2__["AudioInputStream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PullAudioInputStream", function() { return _Audio_AudioInputStream__WEBPACK_IMPORTED_MODULE_2__["PullAudioInputStream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PushAudioInputStream", function() { return _Audio_AudioInputStream__WEBPACK_IMPORTED_MODULE_2__["PushAudioInputStream"]; });

/* harmony import */ var _Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Audio/AudioOutputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioOutputStream", function() { return _Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_3__["AudioOutputStream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PullAudioOutputStream", function() { return _Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_3__["PullAudioOutputStream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PushAudioOutputStream", function() { return _Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_3__["PushAudioOutputStream"]; });

/* harmony import */ var _CancellationReason__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./CancellationReason */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CancellationReason", function() { return _CancellationReason__WEBPACK_IMPORTED_MODULE_4__["CancellationReason"]; });

/* harmony import */ var _Audio_PullAudioInputStreamCallback__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Audio/PullAudioInputStreamCallback */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/PullAudioInputStreamCallback.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PullAudioInputStreamCallback", function() { return _Audio_PullAudioInputStreamCallback__WEBPACK_IMPORTED_MODULE_5__["PullAudioInputStreamCallback"]; });

/* harmony import */ var _Audio_PushAudioOutputStreamCallback__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Audio/PushAudioOutputStreamCallback */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/PushAudioOutputStreamCallback.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PushAudioOutputStreamCallback", function() { return _Audio_PushAudioOutputStreamCallback__WEBPACK_IMPORTED_MODULE_6__["PushAudioOutputStreamCallback"]; });

/* harmony import */ var _KeywordRecognitionModel__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./KeywordRecognitionModel */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/KeywordRecognitionModel.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KeywordRecognitionModel", function() { return _KeywordRecognitionModel__WEBPACK_IMPORTED_MODULE_7__["KeywordRecognitionModel"]; });

/* harmony import */ var _SessionEventArgs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./SessionEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SessionEventArgs", function() { return _SessionEventArgs__WEBPACK_IMPORTED_MODULE_8__["SessionEventArgs"]; });

/* harmony import */ var _RecognitionEventArgs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./RecognitionEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionEventArgs", function() { return _RecognitionEventArgs__WEBPACK_IMPORTED_MODULE_9__["RecognitionEventArgs"]; });

/* harmony import */ var _OutputFormat__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./OutputFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/OutputFormat.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OutputFormat", function() { return _OutputFormat__WEBPACK_IMPORTED_MODULE_10__["OutputFormat"]; });

/* harmony import */ var _IntentRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./IntentRecognitionEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentRecognitionEventArgs", function() { return _IntentRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_11__["IntentRecognitionEventArgs"]; });

/* harmony import */ var _RecognitionResult__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./RecognitionResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionResult", function() { return _RecognitionResult__WEBPACK_IMPORTED_MODULE_12__["RecognitionResult"]; });

/* harmony import */ var _SpeechRecognitionResult__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./SpeechRecognitionResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionResult", function() { return _SpeechRecognitionResult__WEBPACK_IMPORTED_MODULE_13__["SpeechRecognitionResult"]; });

/* harmony import */ var _IntentRecognitionResult__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./IntentRecognitionResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentRecognitionResult", function() { return _IntentRecognitionResult__WEBPACK_IMPORTED_MODULE_14__["IntentRecognitionResult"]; });

/* harmony import */ var _LanguageUnderstandingModel__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./LanguageUnderstandingModel */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LanguageUnderstandingModel.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LanguageUnderstandingModel", function() { return _LanguageUnderstandingModel__WEBPACK_IMPORTED_MODULE_15__["LanguageUnderstandingModel"]; });

/* harmony import */ var _SpeechRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./SpeechRecognitionEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionEventArgs", function() { return _SpeechRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_16__["SpeechRecognitionEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranscriptionEventArgs", function() { return _SpeechRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_16__["ConversationTranscriptionEventArgs"]; });

/* harmony import */ var _SpeechRecognitionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./SpeechRecognitionCanceledEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionCanceledEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionCanceledEventArgs", function() { return _SpeechRecognitionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_17__["SpeechRecognitionCanceledEventArgs"]; });

/* harmony import */ var _TranslationRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./TranslationRecognitionEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognitionEventArgs", function() { return _TranslationRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_18__["TranslationRecognitionEventArgs"]; });

/* harmony import */ var _TranslationSynthesisEventArgs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./TranslationSynthesisEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationSynthesisEventArgs", function() { return _TranslationSynthesisEventArgs__WEBPACK_IMPORTED_MODULE_19__["TranslationSynthesisEventArgs"]; });

/* harmony import */ var _TranslationRecognitionResult__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./TranslationRecognitionResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognitionResult", function() { return _TranslationRecognitionResult__WEBPACK_IMPORTED_MODULE_20__["TranslationRecognitionResult"]; });

/* harmony import */ var _TranslationSynthesisResult__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./TranslationSynthesisResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationSynthesisResult", function() { return _TranslationSynthesisResult__WEBPACK_IMPORTED_MODULE_21__["TranslationSynthesisResult"]; });

/* harmony import */ var _ResultReason__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./ResultReason */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ResultReason", function() { return _ResultReason__WEBPACK_IMPORTED_MODULE_22__["ResultReason"]; });

/* harmony import */ var _SpeechConfig__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./SpeechConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechConfig", function() { return _SpeechConfig__WEBPACK_IMPORTED_MODULE_23__["SpeechConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechConfigImpl", function() { return _SpeechConfig__WEBPACK_IMPORTED_MODULE_23__["SpeechConfigImpl"]; });

/* harmony import */ var _SpeechTranslationConfig__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./SpeechTranslationConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechTranslationConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechTranslationConfig", function() { return _SpeechTranslationConfig__WEBPACK_IMPORTED_MODULE_24__["SpeechTranslationConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechTranslationConfigImpl", function() { return _SpeechTranslationConfig__WEBPACK_IMPORTED_MODULE_24__["SpeechTranslationConfigImpl"]; });

/* harmony import */ var _PropertyCollection__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./PropertyCollection */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PropertyCollection", function() { return _PropertyCollection__WEBPACK_IMPORTED_MODULE_25__["PropertyCollection"]; });

/* harmony import */ var _PropertyId__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./PropertyId */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PropertyId", function() { return _PropertyId__WEBPACK_IMPORTED_MODULE_26__["PropertyId"]; });

/* harmony import */ var _Recognizer__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./Recognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Recognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Recognizer", function() { return _Recognizer__WEBPACK_IMPORTED_MODULE_27__["Recognizer"]; });

/* harmony import */ var _SpeechRecognizer__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./SpeechRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognizer", function() { return _SpeechRecognizer__WEBPACK_IMPORTED_MODULE_28__["SpeechRecognizer"]; });

/* harmony import */ var _IntentRecognizer__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./IntentRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentRecognizer", function() { return _IntentRecognizer__WEBPACK_IMPORTED_MODULE_29__["IntentRecognizer"]; });

/* harmony import */ var _VoiceProfileType__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./VoiceProfileType */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileType.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VoiceProfileType", function() { return _VoiceProfileType__WEBPACK_IMPORTED_MODULE_30__["VoiceProfileType"]; });

/* harmony import */ var _TranslationRecognizer__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./TranslationRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognizer", function() { return _TranslationRecognizer__WEBPACK_IMPORTED_MODULE_31__["TranslationRecognizer"]; });

/* harmony import */ var _Translations__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./Translations */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Translations.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Translations", function() { return _Translations__WEBPACK_IMPORTED_MODULE_32__["Translations"]; });

/* harmony import */ var _NoMatchReason__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./NoMatchReason */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchReason.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NoMatchReason", function() { return _NoMatchReason__WEBPACK_IMPORTED_MODULE_33__["NoMatchReason"]; });

/* harmony import */ var _NoMatchDetails__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./NoMatchDetails */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchDetails.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NoMatchDetails", function() { return _NoMatchDetails__WEBPACK_IMPORTED_MODULE_34__["NoMatchDetails"]; });

/* harmony import */ var _TranslationRecognitionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./TranslationRecognitionCanceledEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionCanceledEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognitionCanceledEventArgs", function() { return _TranslationRecognitionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_35__["TranslationRecognitionCanceledEventArgs"]; });

/* harmony import */ var _IntentRecognitionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./IntentRecognitionCanceledEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionCanceledEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentRecognitionCanceledEventArgs", function() { return _IntentRecognitionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_36__["IntentRecognitionCanceledEventArgs"]; });

/* harmony import */ var _CancellationDetailsBase__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./CancellationDetailsBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetailsBase.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CancellationDetailsBase", function() { return _CancellationDetailsBase__WEBPACK_IMPORTED_MODULE_37__["CancellationDetailsBase"]; });

/* harmony import */ var _CancellationDetails__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./CancellationDetails */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetails.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CancellationDetails", function() { return _CancellationDetails__WEBPACK_IMPORTED_MODULE_38__["CancellationDetails"]; });

/* harmony import */ var _CancellationErrorCodes__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./CancellationErrorCodes */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CancellationErrorCode", function() { return _CancellationErrorCodes__WEBPACK_IMPORTED_MODULE_39__["CancellationErrorCode"]; });

/* harmony import */ var _ConnectionEventArgs__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./ConnectionEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionEventArgs", function() { return _ConnectionEventArgs__WEBPACK_IMPORTED_MODULE_40__["ConnectionEventArgs"]; });

/* harmony import */ var _ServiceEventArgs__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./ServiceEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ServiceEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ServiceEventArgs", function() { return _ServiceEventArgs__WEBPACK_IMPORTED_MODULE_41__["ServiceEventArgs"]; });

/* harmony import */ var _Connection__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./Connection */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Connection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Connection", function() { return _Connection__WEBPACK_IMPORTED_MODULE_42__["Connection"]; });

/* harmony import */ var _PhraseListGrammar__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./PhraseListGrammar */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PhraseListGrammar.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PhraseListGrammar", function() { return _PhraseListGrammar__WEBPACK_IMPORTED_MODULE_43__["PhraseListGrammar"]; });

/* harmony import */ var _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./DialogServiceConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DialogServiceConfig", function() { return _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_44__["DialogServiceConfig"]; });

/* harmony import */ var _BotFrameworkConfig__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./BotFrameworkConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/BotFrameworkConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BotFrameworkConfig", function() { return _BotFrameworkConfig__WEBPACK_IMPORTED_MODULE_45__["BotFrameworkConfig"]; });

/* harmony import */ var _CustomCommandsConfig__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./CustomCommandsConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CustomCommandsConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomCommandsConfig", function() { return _CustomCommandsConfig__WEBPACK_IMPORTED_MODULE_46__["CustomCommandsConfig"]; });

/* harmony import */ var _DialogServiceConnector__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./DialogServiceConnector */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConnector.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DialogServiceConnector", function() { return _DialogServiceConnector__WEBPACK_IMPORTED_MODULE_47__["DialogServiceConnector"]; });

/* harmony import */ var _ActivityReceivedEventArgs__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./ActivityReceivedEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ActivityReceivedEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ActivityReceivedEventArgs", function() { return _ActivityReceivedEventArgs__WEBPACK_IMPORTED_MODULE_48__["ActivityReceivedEventArgs"]; });

/* harmony import */ var _TurnStatusReceivedEventArgs__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./TurnStatusReceivedEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TurnStatusReceivedEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TurnStatusReceivedEventArgs", function() { return _TurnStatusReceivedEventArgs__WEBPACK_IMPORTED_MODULE_49__["TurnStatusReceivedEventArgs"]; });

/* harmony import */ var _ServicePropertyChannel__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./ServicePropertyChannel */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ServicePropertyChannel.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ServicePropertyChannel", function() { return _ServicePropertyChannel__WEBPACK_IMPORTED_MODULE_50__["ServicePropertyChannel"]; });

/* harmony import */ var _ProfanityOption__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./ProfanityOption */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ProfanityOption.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ProfanityOption", function() { return _ProfanityOption__WEBPACK_IMPORTED_MODULE_51__["ProfanityOption"]; });

/* harmony import */ var _Audio_BaseAudioPlayer__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./Audio/BaseAudioPlayer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/BaseAudioPlayer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BaseAudioPlayer", function() { return _Audio_BaseAudioPlayer__WEBPACK_IMPORTED_MODULE_52__["BaseAudioPlayer"]; });

/* harmony import */ var _ConnectionMessageEventArgs__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./ConnectionMessageEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionMessageEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessageEventArgs", function() { return _ConnectionMessageEventArgs__WEBPACK_IMPORTED_MODULE_53__["ConnectionMessageEventArgs"]; });

/* harmony import */ var _ConnectionMessage__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./ConnectionMessage */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionMessage.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessage", function() { return _ConnectionMessage__WEBPACK_IMPORTED_MODULE_54__["ConnectionMessage"]; });

/* harmony import */ var _VoiceProfile__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./VoiceProfile */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfile.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VoiceProfile", function() { return _VoiceProfile__WEBPACK_IMPORTED_MODULE_55__["VoiceProfile"]; });

/* harmony import */ var _VoiceProfileEnrollmentResult__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ./VoiceProfileEnrollmentResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileEnrollmentResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VoiceProfileEnrollmentResult", function() { return _VoiceProfileEnrollmentResult__WEBPACK_IMPORTED_MODULE_56__["VoiceProfileEnrollmentResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VoiceProfileEnrollmentCancellationDetails", function() { return _VoiceProfileEnrollmentResult__WEBPACK_IMPORTED_MODULE_56__["VoiceProfileEnrollmentCancellationDetails"]; });

/* harmony import */ var _VoiceProfileResult__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ./VoiceProfileResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VoiceProfileResult", function() { return _VoiceProfileResult__WEBPACK_IMPORTED_MODULE_57__["VoiceProfileResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VoiceProfileCancellationDetails", function() { return _VoiceProfileResult__WEBPACK_IMPORTED_MODULE_57__["VoiceProfileCancellationDetails"]; });

/* harmony import */ var _VoiceProfilePhraseResult__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ./VoiceProfilePhraseResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfilePhraseResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VoiceProfilePhraseResult", function() { return _VoiceProfilePhraseResult__WEBPACK_IMPORTED_MODULE_58__["VoiceProfilePhraseResult"]; });

/* harmony import */ var _VoiceProfileClient__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ./VoiceProfileClient */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileClient.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VoiceProfileClient", function() { return _VoiceProfileClient__WEBPACK_IMPORTED_MODULE_59__["VoiceProfileClient"]; });

/* harmony import */ var _SpeakerRecognizer__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ./SpeakerRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerRecognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeakerRecognizer", function() { return _SpeakerRecognizer__WEBPACK_IMPORTED_MODULE_60__["SpeakerRecognizer"]; });

/* harmony import */ var _SpeakerIdentificationModel__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ./SpeakerIdentificationModel */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerIdentificationModel.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeakerIdentificationModel", function() { return _SpeakerIdentificationModel__WEBPACK_IMPORTED_MODULE_61__["SpeakerIdentificationModel"]; });

/* harmony import */ var _SpeakerVerificationModel__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ./SpeakerVerificationModel */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerVerificationModel.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeakerVerificationModel", function() { return _SpeakerVerificationModel__WEBPACK_IMPORTED_MODULE_62__["SpeakerVerificationModel"]; });

/* harmony import */ var _AutoDetectSourceLanguageConfig__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ./AutoDetectSourceLanguageConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/AutoDetectSourceLanguageConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AutoDetectSourceLanguageConfig", function() { return _AutoDetectSourceLanguageConfig__WEBPACK_IMPORTED_MODULE_63__["AutoDetectSourceLanguageConfig"]; });

/* harmony import */ var _AutoDetectSourceLanguageResult__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! ./AutoDetectSourceLanguageResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/AutoDetectSourceLanguageResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AutoDetectSourceLanguageResult", function() { return _AutoDetectSourceLanguageResult__WEBPACK_IMPORTED_MODULE_64__["AutoDetectSourceLanguageResult"]; });

/* harmony import */ var _SourceLanguageConfig__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ./SourceLanguageConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SourceLanguageConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SourceLanguageConfig", function() { return _SourceLanguageConfig__WEBPACK_IMPORTED_MODULE_65__["SourceLanguageConfig"]; });

/* harmony import */ var _SpeakerRecognitionResult__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ./SpeakerRecognitionResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerRecognitionResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeakerRecognitionResult", function() { return _SpeakerRecognitionResult__WEBPACK_IMPORTED_MODULE_66__["SpeakerRecognitionResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeakerRecognitionResultType", function() { return _SpeakerRecognitionResult__WEBPACK_IMPORTED_MODULE_66__["SpeakerRecognitionResultType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeakerRecognitionCancellationDetails", function() { return _SpeakerRecognitionResult__WEBPACK_IMPORTED_MODULE_66__["SpeakerRecognitionCancellationDetails"]; });

/* harmony import */ var _Transcription_Exports__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ./Transcription/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/Exports.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Conversation", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_67__["Conversation"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationExpirationEventArgs", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_67__["ConversationExpirationEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationParticipantsChangedEventArgs", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_67__["ConversationParticipantsChangedEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslationCanceledEventArgs", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_67__["ConversationTranslationCanceledEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslationEventArgs", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_67__["ConversationTranslationEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslationResult", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_67__["ConversationTranslationResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslator", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_67__["ConversationTranslator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranscriber", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_67__["ConversationTranscriber"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Participant", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_67__["Participant"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ParticipantChangedReason", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_67__["ParticipantChangedReason"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "User", function() { return _Transcription_Exports__WEBPACK_IMPORTED_MODULE_67__["User"]; });

/* harmony import */ var _SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ./SpeechSynthesisOutputFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisOutputFormat.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisOutputFormat", function() { return _SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_68__["SpeechSynthesisOutputFormat"]; });

/* harmony import */ var _SpeechSynthesizer__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! ./SpeechSynthesizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesizer", function() { return _SpeechSynthesizer__WEBPACK_IMPORTED_MODULE_69__["SpeechSynthesizer"]; });

/* harmony import */ var _SynthesisResult__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ./SynthesisResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SynthesisResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SynthesisResult", function() { return _SynthesisResult__WEBPACK_IMPORTED_MODULE_70__["SynthesisResult"]; });

/* harmony import */ var _SpeechSynthesisResult__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! ./SpeechSynthesisResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisResult", function() { return _SpeechSynthesisResult__WEBPACK_IMPORTED_MODULE_71__["SpeechSynthesisResult"]; });

/* harmony import */ var _SpeechSynthesisEventArgs__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! ./SpeechSynthesisEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisEventArgs", function() { return _SpeechSynthesisEventArgs__WEBPACK_IMPORTED_MODULE_72__["SpeechSynthesisEventArgs"]; });

/* harmony import */ var _SpeechSynthesisWordBoundaryEventArgs__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! ./SpeechSynthesisWordBoundaryEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisWordBoundaryEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisWordBoundaryEventArgs", function() { return _SpeechSynthesisWordBoundaryEventArgs__WEBPACK_IMPORTED_MODULE_73__["SpeechSynthesisWordBoundaryEventArgs"]; });

/* harmony import */ var _SpeechSynthesisBookmarkEventArgs__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! ./SpeechSynthesisBookmarkEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisBookmarkEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisBookmarkEventArgs", function() { return _SpeechSynthesisBookmarkEventArgs__WEBPACK_IMPORTED_MODULE_74__["SpeechSynthesisBookmarkEventArgs"]; });

/* harmony import */ var _SpeechSynthesisVisemeEventArgs__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! ./SpeechSynthesisVisemeEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisVisemeEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisVisemeEventArgs", function() { return _SpeechSynthesisVisemeEventArgs__WEBPACK_IMPORTED_MODULE_75__["SpeechSynthesisVisemeEventArgs"]; });

/* harmony import */ var _SpeechSynthesisBoundaryType__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! ./SpeechSynthesisBoundaryType */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisBoundaryType.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisBoundaryType", function() { return _SpeechSynthesisBoundaryType__WEBPACK_IMPORTED_MODULE_76__["SpeechSynthesisBoundaryType"]; });

/* harmony import */ var _SynthesisVoicesResult__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! ./SynthesisVoicesResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SynthesisVoicesResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SynthesisVoicesResult", function() { return _SynthesisVoicesResult__WEBPACK_IMPORTED_MODULE_77__["SynthesisVoicesResult"]; });

/* harmony import */ var _VoiceInfo__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! ./VoiceInfo */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceInfo.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VoiceInfo", function() { return _VoiceInfo__WEBPACK_IMPORTED_MODULE_78__["VoiceInfo"]; });

/* harmony import */ var _Audio_SpeakerAudioDestination__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! ./Audio/SpeakerAudioDestination */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/SpeakerAudioDestination.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeakerAudioDestination", function() { return _Audio_SpeakerAudioDestination__WEBPACK_IMPORTED_MODULE_79__["SpeakerAudioDestination"]; });

/* harmony import */ var _ConversationTranscriptionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! ./ConversationTranscriptionCanceledEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConversationTranscriptionCanceledEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranscriptionCanceledEventArgs", function() { return _ConversationTranscriptionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_80__["ConversationTranscriptionCanceledEventArgs"]; });

/* harmony import */ var _PronunciationAssessmentGradingSystem__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! ./PronunciationAssessmentGradingSystem */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentGradingSystem.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PronunciationAssessmentGradingSystem", function() { return _PronunciationAssessmentGradingSystem__WEBPACK_IMPORTED_MODULE_81__["PronunciationAssessmentGradingSystem"]; });

/* harmony import */ var _PronunciationAssessmentGranularity__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(/*! ./PronunciationAssessmentGranularity */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentGranularity.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PronunciationAssessmentGranularity", function() { return _PronunciationAssessmentGranularity__WEBPACK_IMPORTED_MODULE_82__["PronunciationAssessmentGranularity"]; });

/* harmony import */ var _PronunciationAssessmentConfig__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(/*! ./PronunciationAssessmentConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PronunciationAssessmentConfig", function() { return _PronunciationAssessmentConfig__WEBPACK_IMPORTED_MODULE_83__["PronunciationAssessmentConfig"]; });

/* harmony import */ var _PronunciationAssessmentResult__WEBPACK_IMPORTED_MODULE_84__ = __webpack_require__(/*! ./PronunciationAssessmentResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PronunciationAssessmentResult", function() { return _PronunciationAssessmentResult__WEBPACK_IMPORTED_MODULE_84__["PronunciationAssessmentResult"]; });

/* harmony import */ var _LanguageIdMode__WEBPACK_IMPORTED_MODULE_85__ = __webpack_require__(/*! ./LanguageIdMode */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LanguageIdMode.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LanguageIdMode", function() { return _LanguageIdMode__WEBPACK_IMPORTED_MODULE_85__["LanguageIdMode"]; });

/* harmony import */ var _Diagnostics__WEBPACK_IMPORTED_MODULE_86__ = __webpack_require__(/*! ./Diagnostics */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Diagnostics.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Diagnostics", function() { return _Diagnostics__WEBPACK_IMPORTED_MODULE_86__["Diagnostics"]; });

/* harmony import */ var _LogLevel__WEBPACK_IMPORTED_MODULE_87__ = __webpack_require__(/*! ./LogLevel */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LogLevel.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LogLevel", function() { return _LogLevel__WEBPACK_IMPORTED_MODULE_87__["LogLevel"]; });

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

























































































//# sourceMappingURL=Exports.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionCanceledEventArgs.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionCanceledEventArgs.js ***!
  \**************************************************************************************************************************/
/*! exports provided: IntentRecognitionCanceledEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntentRecognitionCanceledEventArgs", function() { return IntentRecognitionCanceledEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Define payload of intent recognition canceled result events.
 * @class IntentRecognitionCanceledEventArgs
 */
class IntentRecognitionCanceledEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["IntentRecognitionEventArgs"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {CancellationReason} result - The result of the intent recognition.
     * @param {string} offset - The offset.
     * @param {IntentRecognitionResult} sessionId - The session id.
     */
    constructor(reason, errorDetails, errorCode, result, offset, sessionId) {
        super(result, offset, sessionId);
        this.privReason = reason;
        this.privErrorDetails = errorDetails;
        this.privErrorCode = errorCode;
    }
    /**
     * The reason the recognition was canceled.
     * @member IntentRecognitionCanceledEventArgs.prototype.reason
     * @function
     * @public
     * @returns {CancellationReason} Specifies the reason canceled.
     */
    get reason() {
        return this.privReason;
    }
    /**
     * The error code in case of an unsuccessful recognition.
     * Added in version 1.1.0.
     * @return An error code that represents the error reason.
     */
    get errorCode() {
        return this.privErrorCode;
    }
    /**
     * In case of an unsuccessful recognition, provides details of the occurred error.
     * @member IntentRecognitionCanceledEventArgs.prototype.errorDetails
     * @function
     * @public
     * @returns {string} A String that represents the error details.
     */
    get errorDetails() {
        return this.privErrorDetails;
    }
}

//# sourceMappingURL=IntentRecognitionCanceledEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionEventArgs.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionEventArgs.js ***!
  \******************************************************************************************************************/
/*! exports provided: IntentRecognitionEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntentRecognitionEventArgs", function() { return IntentRecognitionEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Intent recognition result event arguments.
 * @class
 */
class IntentRecognitionEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionEventArgs"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param result - The result of the intent recognition.
     * @param offset - The offset.
     * @param sessionId - The session id.
     */
    constructor(result, offset, sessionId) {
        super(offset, sessionId);
        this.privResult = result;
    }
    /**
     * Represents the intent recognition result.
     * @member IntentRecognitionEventArgs.prototype.result
     * @function
     * @public
     * @returns {IntentRecognitionResult} Represents the intent recognition result.
     */
    get result() {
        return this.privResult;
    }
}

//# sourceMappingURL=IntentRecognitionEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionResult.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionResult.js ***!
  \***************************************************************************************************************/
/*! exports provided: IntentRecognitionResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntentRecognitionResult", function() { return IntentRecognitionResult; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Intent recognition result.
 * @class
 */
class IntentRecognitionResult extends _Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionResult"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param intentId - The intent id.
     * @param resultId - The result id.
     * @param reason - The reason.
     * @param text - The recognized text.
     * @param duration - The duration.
     * @param offset - The offset into the stream.
     * @param language - Primary Language detected, if provided.
     * @param languageDetectionConfidence - Primary Language confidence ("Unknown," "Low," "Medium," "High"...), if provided.
     * @param errorDetails - Error details, if provided.
     * @param json - Additional Json, if provided.
     * @param properties - Additional properties, if provided.
     */
    constructor(intentId, resultId, reason, text, duration, offset, language, languageDetectionConfidence, errorDetails, json, properties) {
        super(resultId, reason, text, duration, offset, language, languageDetectionConfidence, undefined, errorDetails, json, properties);
        this.privIntentId = intentId;
    }
    /**
     * A String that represents the intent identifier being recognized.
     * @member IntentRecognitionResult.prototype.intentId
     * @function
     * @public
     * @returns {string} A String that represents the intent identifier being recognized.
     */
    get intentId() {
        return this.privIntentId;
    }
}

//# sourceMappingURL=IntentRecognitionResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognizer.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognizer.js ***!
  \********************************************************************************************************/
/*! exports provided: IntentRecognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntentRecognizer", function() { return IntentRecognizer; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




/**
 * Intent recognizer.
 * @class
 */
class IntentRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_3__["Recognizer"] {
    /**
     * Initializes an instance of the IntentRecognizer.
     * @constructor
     * @param {SpeechConfig} speechConfig - The set of configuration properties.
     * @param {AudioConfig} audioConfig - An optional audio input config associated with the recognizer
     */
    constructor(speechConfig, audioConfig) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(speechConfig, "speechConfig");
        const configImpl = speechConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(configImpl, "speechConfig");
        super(audioConfig, configImpl.properties, new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["IntentConnectionFactory"]());
        this.privAddedIntents = [];
        this.privAddedLmIntents = {};
        this.privDisposedIntentRecognizer = false;
        this.privProperties = configImpl.properties;
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_RecoLanguage), _Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_RecoLanguage]);
    }
    /**
     * Gets the spoken language of recognition.
     * @member IntentRecognizer.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @returns {string} the spoken language of recognition.
     */
    get speechRecognitionLanguage() {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposedIntentRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_RecoLanguage);
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member IntentRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceAuthorization_Token);
    }
    /**
     * Gets/Sets the authorization token used to communicate with the service.
     * Note: Please use a token derived from your LanguageUnderstanding subscription key for the Intent recognizer.
     * @member IntentRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @param {string} value - Authorization token.
     */
    set authorizationToken(value) {
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceAuthorization_Token, value);
    }
    /**
     * The collection of properties and their values defined for this IntentRecognizer.
     * @member IntentRecognizer.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their
     * values defined for this IntentRecognizer.
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * Starts intent recognition, and stops after the first utterance is recognized.
     * The task returns the recognition text and intent as result.
     * Note: RecognizeOnceAsync() returns when the first utterance has been recognized,
     * so it is suitable only for single shot recognition like command or query.
     * For long-running recognition, use StartContinuousRecognitionAsync() instead.
     * @member IntentRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the recognition has finished with an IntentRecognitionResult.
     * @param err - Callback invoked in case of an error.
     */
    recognizeOnceAsync(cb, err) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposedIntentRecognizer);
        if (Object.keys(this.privAddedLmIntents).length !== 0 || undefined !== this.privUmbrellaIntent) {
            const context = this.buildSpeechContext();
            this.privReco.speechContext.setSection("intent", context.Intent);
            this.privReco.dynamicGrammar.addReferenceGrammar(context.ReferenceGrammars);
            const intentReco = this.privReco;
            intentReco.setIntents(this.privAddedLmIntents, this.privUmbrellaIntent);
        }
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.recognizeOnceAsyncImpl(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionMode"].Interactive), cb, err);
    }
    /**
     * Starts speech recognition, until stopContinuousRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * @member IntentRecognizer.prototype.startContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */
    startContinuousRecognitionAsync(cb, err) {
        if (Object.keys(this.privAddedLmIntents).length !== 0 || undefined !== this.privUmbrellaIntent) {
            const context = this.buildSpeechContext();
            this.privReco.speechContext.setSection("intent", context.Intent);
            this.privReco.dynamicGrammar.addReferenceGrammar(context.ReferenceGrammars);
            const intentReco = this.privReco;
            intentReco.setIntents(this.privAddedLmIntents, this.privUmbrellaIntent);
        }
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.startContinuousRecognitionAsyncImpl(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionMode"].Conversation), cb, err);
    }
    /**
     * Stops continuous intent recognition.
     * @member IntentRecognizer.prototype.stopContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */
    stopContinuousRecognitionAsync(cb, err) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.stopContinuousRecognitionAsyncImpl(), cb, err);
    }
    /**
     * Starts speech recognition with keyword spotting, until stopKeywordRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * Note: Key word spotting functionality is only available on the Speech Devices SDK.
     * This functionality is currently not included in the SDK itself.
     * @member IntentRecognizer.prototype.startKeywordRecognitionAsync
     * @function
     * @public
     * @param {KeywordRecognitionModel} model - The keyword recognition model that specifies the keyword to be recognized.
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */
    startKeywordRecognitionAsync(model, cb, err) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNull(model, "model");
        if (!!err) {
            err("Not yet implemented.");
        }
    }
    /**
     * Stops continuous speech recognition.
     * Note: Key word spotting functionality is only available on the Speech Devices SDK.
     * This functionality is currently not included in the SDK itself.
     * @member IntentRecognizer.prototype.stopKeywordRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */
    stopKeywordRecognitionAsync(cb, err) {
        if (!!cb) {
            try {
                cb();
            }
            catch (e) {
                if (!!err) {
                    err(e);
                }
            }
        }
    }
    /**
     * Adds a phrase that should be recognized as intent.
     * @member IntentRecognizer.prototype.addIntent
     * @function
     * @public
     * @param {string} intentId - A String that represents the identifier of the intent to be recognized.
     * @param {string} phrase - A String that specifies the phrase representing the intent.
     */
    addIntent(simplePhrase, intentId) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposedIntentRecognizer);
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(intentId, "intentId");
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(simplePhrase, "simplePhrase");
        this.privAddedIntents.push([intentId, simplePhrase]);
    }
    /**
     * Adds an intent from Language Understanding service for recognition.
     * @member IntentRecognizer.prototype.addIntentWithLanguageModel
     * @function
     * @public
     * @param {string} intentId - A String that represents the identifier of the intent
     * to be recognized. Ignored if intentName is empty.
     * @param {string} model - The intent model from Language Understanding service.
     * @param {string} intentName - The intent name defined in the intent model. If it
     * is empty, all intent names defined in the model will be added.
     */
    addIntentWithLanguageModel(intentId, model, intentName) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposedIntentRecognizer);
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(intentId, "intentId");
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNull(model, "model");
        const modelImpl = model;
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(modelImpl.appId, "model.appId");
        this.privAddedLmIntents[intentId] = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["AddedLmIntent"](modelImpl, intentName);
    }
    /**
     * @summary Adds all intents from the specified Language Understanding Model.
     * @member IntentRecognizer.prototype.addAllIntents
     * @function
     * @public
     * @function
     * @public
     * @param {LanguageUnderstandingModel} model - The language understanding model containing the intents.
     * @param {string} intentId - A custom id String to be returned in the IntentRecognitionResult's getIntentId() method.
     */
    addAllIntents(model, intentId) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNull(model, "model");
        const modelImpl = model;
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(modelImpl.appId, "model.appId");
        this.privUmbrellaIntent = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["AddedLmIntent"](modelImpl, intentId);
    }
    /**
     * closes all external resources held by an instance of this class.
     * @member IntentRecognizer.prototype.close
     * @function
     * @public
     */
    close(cb, errorCb) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposedIntentRecognizer);
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.dispose(true), cb, errorCb);
    }
    createRecognizerConfig(speechConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognizerConfig"](speechConfig, this.properties);
    }
    createServiceRecognizer(authentication, connectionFactory, audioConfig, recognizerConfig) {
        const audioImpl = audioConfig;
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["IntentServiceRecognizer"](authentication, connectionFactory, audioImpl, recognizerConfig, this);
    }
    dispose(disposing) {
        const _super = Object.create(null, {
            dispose: { get: () => super.dispose }
        });
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privDisposedIntentRecognizer) {
                return;
            }
            if (disposing) {
                this.privDisposedIntentRecognizer = true;
                yield _super.dispose.call(this, disposing);
            }
        });
    }
    buildSpeechContext() {
        let appId;
        let region;
        let subscriptionKey;
        const refGrammers = [];
        if (undefined !== this.privUmbrellaIntent) {
            appId = this.privUmbrellaIntent.modelImpl.appId;
            region = this.privUmbrellaIntent.modelImpl.region;
            subscriptionKey = this.privUmbrellaIntent.modelImpl.subscriptionKey;
        }
        // Build the reference grammer array.
        for (const intentId of Object.keys(this.privAddedLmIntents)) {
            const addedLmIntent = this.privAddedLmIntents[intentId];
            // validate all the same model, region, and key...
            if (appId === undefined) {
                appId = addedLmIntent.modelImpl.appId;
            }
            else {
                if (appId !== addedLmIntent.modelImpl.appId) {
                    throw new Error("Intents must all be from the same LUIS model");
                }
            }
            if (region === undefined) {
                region = addedLmIntent.modelImpl.region;
            }
            else {
                if (region !== addedLmIntent.modelImpl.region) {
                    throw new Error("Intents must all be from the same LUIS model in a single region");
                }
            }
            if (subscriptionKey === undefined) {
                subscriptionKey = addedLmIntent.modelImpl.subscriptionKey;
            }
            else {
                if (subscriptionKey !== addedLmIntent.modelImpl.subscriptionKey) {
                    throw new Error("Intents must all use the same subscription key");
                }
            }
            const grammer = "luis/" + appId + "-PRODUCTION#" + intentId;
            refGrammers.push(grammer);
        }
        return {
            Intent: {
                id: appId,
                key: (subscriptionKey === undefined) ? this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_Key]) : subscriptionKey,
                provider: "LUIS",
            },
            ReferenceGrammars: (undefined === this.privUmbrellaIntent) ? refGrammers : ["luis/" + appId + "-PRODUCTION"],
        };
    }
}

//# sourceMappingURL=IntentRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/KeywordRecognitionModel.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/KeywordRecognitionModel.js ***!
  \***************************************************************************************************************/
/*! exports provided: KeywordRecognitionModel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KeywordRecognitionModel", function() { return KeywordRecognitionModel; });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Represents a keyword recognition model for recognizing when
 * the user says a keyword to initiate further speech recognition.
 * @class KeywordRecognitionModel
 */
class KeywordRecognitionModel {
    /**
     * Create and initializes a new instance.
     * @constructor
     */
    constructor() {
        this.privDisposed = false;
        return;
    }
    /**
     * Creates a keyword recognition model using the specified filename.
     * @member KeywordRecognitionModel.fromFile
     * @function
     * @public
     * @param {string} fileName - A string that represents file name for the keyword recognition model.
     * Note, the file can point to a zip file in which case the model
     * will be extracted from the zip.
     * @returns {KeywordRecognitionModel} The keyword recognition model being created.
     */
    static fromFile(fileName) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfFileDoesNotExist(fileName, "fileName");
        throw new Error("Not yet implemented.");
    }
    /**
     * Creates a keyword recognition model using the specified filename.
     * @member KeywordRecognitionModel.fromStream
     * @function
     * @public
     * @param {string} file - A File that represents file for the keyword recognition model.
     * Note, the file can point to a zip file in which case the model will be extracted from the zip.
     * @returns {KeywordRecognitionModel} The keyword recognition model being created.
     */
    static fromStream(file) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNull(file, "file");
        throw new Error("Not yet implemented.");
    }
    /**
     * Dispose of associated resources.
     * @member KeywordRecognitionModel.prototype.close
     * @function
     * @public
     */
    close() {
        if (this.privDisposed) {
            return;
        }
        this.privDisposed = true;
    }
}

//# sourceMappingURL=KeywordRecognitionModel.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LanguageIdMode.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LanguageIdMode.js ***!
  \******************************************************************************************************/
/*! exports provided: LanguageIdMode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LanguageIdMode", function() { return LanguageIdMode; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Language Identification mode
 * @class LanguageIdMode
 */
var LanguageIdMode;
(function (LanguageIdMode) {
    /**
     * Detect language at audio start
     * @member LanguageIdMode.AtStart
     */
    LanguageIdMode[LanguageIdMode["AtStart"] = 0] = "AtStart";
    /**
     * Continuously detect language
     * @member LanguageIdMode.Continuous
     */
    LanguageIdMode[LanguageIdMode["Continuous"] = 1] = "Continuous";
})(LanguageIdMode || (LanguageIdMode = {}));

//# sourceMappingURL=LanguageIdMode.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LanguageUnderstandingModel.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LanguageUnderstandingModel.js ***!
  \******************************************************************************************************************/
/*! exports provided: LanguageUnderstandingModel, LanguageUnderstandingModelImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LanguageUnderstandingModel", function() { return LanguageUnderstandingModel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LanguageUnderstandingModelImpl", function() { return LanguageUnderstandingModelImpl; });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// eslint-disable-next-line max-classes-per-file

/**
 * Language understanding model
 * @class LanguageUnderstandingModel
 */
class LanguageUnderstandingModel {
    /**
     * Creates and initializes a new instance
     * @constructor
     */
    constructor() {
        return;
    }
    /**
     * Creates an language understanding model using the specified endpoint.
     * @member LanguageUnderstandingModel.fromEndpoint
     * @function
     * @public
     * @param {URL} uri - A String that represents the endpoint of the language understanding model.
     * @returns {LanguageUnderstandingModel} The language understanding model being created.
     */
    static fromEndpoint(uri) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNull(uri, "uri");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(uri.hostname, "uri");
        const langModelImp = new LanguageUnderstandingModelImpl();
        // Need to extract the app ID from the URL.
        // URL is in the format: https://<region>.api.cognitive.microsoft.com/luis/v2.0/apps/<Guid>?subscription-key=<key>&timezoneOffset=-360
        // Start tearing the string apart.
        // region can be extracted from the host name.
        const firstDot = uri.host.indexOf(".");
        if (-1 === firstDot) {
            throw new Error("Could not determine region from endpoint");
        }
        langModelImp.region = uri.host.substr(0, firstDot);
        // Now the app ID.
        const lastSegment = uri.pathname.lastIndexOf("/") + 1;
        if (-1 === lastSegment) {
            throw new Error("Could not determine appId from endpoint");
        }
        langModelImp.appId = uri.pathname.substr(lastSegment);
        // And finally the key.
        langModelImp.subscriptionKey = uri.searchParams.get("subscription-key");
        if (undefined === langModelImp.subscriptionKey) {
            throw new Error("Could not determine subscription key from endpoint");
        }
        return langModelImp;
    }
    /**
     * Creates an language understanding model using the application id of Language Understanding service.
     * @member LanguageUnderstandingModel.fromAppId
     * @function
     * @public
     * @param {string} appId - A String that represents the application id of Language Understanding service.
     * @returns {LanguageUnderstandingModel} The language understanding model being created.
     */
    static fromAppId(appId) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(appId, "appId");
        const langModelImp = new LanguageUnderstandingModelImpl();
        langModelImp.appId = appId;
        return langModelImp;
    }
    /**
     * Creates a language understanding model using hostname, subscription key and application
     * id of Language Understanding service.
     * @member LanguageUnderstandingModel.fromSubscription
     * @function
     * @public
     * @param {string} subscriptionKey - A String that represents the subscription key of
     * Language Understanding service.
     * @param {string} appId - A String that represents the application id of Language
     * Understanding service.
     * @param {LanguageUnderstandingModel} region - A String that represents the region
     * of the Language Understanding service (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {LanguageUnderstandingModel} The language understanding model being created.
     */
    static fromSubscription(subscriptionKey, appId, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(subscriptionKey, "subscriptionKey");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(appId, "appId");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(region, "region");
        const langModelImp = new LanguageUnderstandingModelImpl();
        langModelImp.appId = appId;
        langModelImp.region = region;
        langModelImp.subscriptionKey = subscriptionKey;
        return langModelImp;
    }
}
/**
 * @private
 * @class LanguageUnderstandingModelImpl
 */
class LanguageUnderstandingModelImpl extends LanguageUnderstandingModel {
}

//# sourceMappingURL=LanguageUnderstandingModel.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LogLevel.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LogLevel.js ***!
  \************************************************************************************************/
/*! exports provided: LogLevel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LogLevel", function() { return _common_Exports__WEBPACK_IMPORTED_MODULE_0__["EventType"]; });

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Define event severity types for setting logging output.
 * @class LogLevel
 */


//# sourceMappingURL=LogLevel.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchDetails.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchDetails.js ***!
  \******************************************************************************************************/
/*! exports provided: NoMatchDetails */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NoMatchDetails", function() { return NoMatchDetails; });
/* harmony import */ var _src_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../src/common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * Contains detailed information for NoMatch recognition results.
 * @class NoMatchDetails
 */
class NoMatchDetails {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {NoMatchReason} reason - The no-match reason.
     */
    constructor(reason) {
        this.privReason = reason;
    }
    /**
     * Creates an instance of NoMatchDetails object for the NoMatch SpeechRecognitionResults.
     * @member NoMatchDetails.fromResult
     * @function
     * @public
     * @param {SpeechRecognitionResult | IntentRecognitionResult | TranslationRecognitionResult}
     * result - The recognition result that was not recognized.
     * @returns {NoMatchDetails} The no match details object being created.
     */
    static fromResult(result) {
        const simpleSpeech = _src_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SimpleSpeechPhrase"].fromJSON(result.json);
        let reason = _Exports__WEBPACK_IMPORTED_MODULE_1__["NoMatchReason"].NotRecognized;
        switch (simpleSpeech.RecognitionStatus) {
            case _src_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionStatus"].BabbleTimeout:
                reason = _Exports__WEBPACK_IMPORTED_MODULE_1__["NoMatchReason"].InitialBabbleTimeout;
                break;
            case _src_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionStatus"].InitialSilenceTimeout:
                reason = _Exports__WEBPACK_IMPORTED_MODULE_1__["NoMatchReason"].InitialSilenceTimeout;
                break;
            default:
                reason = _Exports__WEBPACK_IMPORTED_MODULE_1__["NoMatchReason"].NotRecognized;
                break;
        }
        return new NoMatchDetails(reason);
    }
    /**
     * The reason the recognition was canceled.
     * @member NoMatchDetails.prototype.reason
     * @function
     * @public
     * @returns {NoMatchReason} Specifies the reason canceled.
     */
    get reason() {
        return this.privReason;
    }
}

//# sourceMappingURL=NoMatchDetails.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchReason.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchReason.js ***!
  \*****************************************************************************************************/
/*! exports provided: NoMatchReason */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NoMatchReason", function() { return NoMatchReason; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines the possible reasons a recognition result might not be recognized.
 * @class NoMatchReason
 */
var NoMatchReason;
(function (NoMatchReason) {
    /**
     * Indicates that speech was detected, but not recognized.
     * @member NoMatchReason.NotRecognized
     */
    NoMatchReason[NoMatchReason["NotRecognized"] = 0] = "NotRecognized";
    /**
     * Indicates that the start of the audio stream contained only silence,
     * and the service timed out waiting for speech.
     * @member NoMatchReason.InitialSilenceTimeout
     */
    NoMatchReason[NoMatchReason["InitialSilenceTimeout"] = 1] = "InitialSilenceTimeout";
    /**
     * Indicates that the start of the audio stream contained only noise,
     * and the service timed out waiting for speech.
     * @member NoMatchReason.InitialBabbleTimeout
     */
    NoMatchReason[NoMatchReason["InitialBabbleTimeout"] = 2] = "InitialBabbleTimeout";
})(NoMatchReason || (NoMatchReason = {}));

//# sourceMappingURL=NoMatchReason.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/OutputFormat.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/OutputFormat.js ***!
  \****************************************************************************************************/
/*! exports provided: OutputFormat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OutputFormat", function() { return OutputFormat; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Define Speech Recognizer output formats.
 * @class OutputFormat
 */
var OutputFormat;
(function (OutputFormat) {
    /**
     * @member OutputFormat.Simple
     */
    OutputFormat[OutputFormat["Simple"] = 0] = "Simple";
    /**
     * @member OutputFormat.Detailed
     */
    OutputFormat[OutputFormat["Detailed"] = 1] = "Detailed";
})(OutputFormat || (OutputFormat = {}));

//# sourceMappingURL=OutputFormat.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PhraseListGrammar.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PhraseListGrammar.js ***!
  \*********************************************************************************************************/
/*! exports provided: PhraseListGrammar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PhraseListGrammar", function() { return PhraseListGrammar; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Allows additions of new phrases to improve speech recognition.
 *
 * Phrases added to the recognizer are effective at the start of the next recognition, or the next time the SpeechSDK must reconnect
 * to the speech service.
 */
class PhraseListGrammar {
    constructor(recogBase) {
        this.privGrammerBuilder = recogBase.dynamicGrammar;
    }
    /**
     * Creates a PhraseListGrammar from a given speech recognizer. Will accept any recognizer that derives from @class Recognizer.
     * @param recognizer The recognizer to add phrase lists to.
     */
    static fromRecognizer(recognizer) {
        const recoBase = recognizer.internalData;
        return new PhraseListGrammar(recoBase);
    }
    /**
     * Adds a single phrase to the current recognizer.
     * @param phrase Phrase to add.
     */
    addPhrase(phrase) {
        this.privGrammerBuilder.addPhrase(phrase);
    }
    /**
     * Adds multiple phrases to the current recognizer.
     * @param phrases Array of phrases to add.
     */
    addPhrases(phrases) {
        this.privGrammerBuilder.addPhrase(phrases);
    }
    /**
     * Clears all phrases added to the current recognizer.
     */
    clear() {
        this.privGrammerBuilder.clearPhrases();
    }
}

//# sourceMappingURL=PhraseListGrammar.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ProfanityOption.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ProfanityOption.js ***!
  \*******************************************************************************************************/
/*! exports provided: ProfanityOption */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProfanityOption", function() { return ProfanityOption; });
// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
/**
 * Profanity option.
 * Added in version 1.7.0.
 */
var ProfanityOption;
(function (ProfanityOption) {
    ProfanityOption[ProfanityOption["Masked"] = 0] = "Masked";
    ProfanityOption[ProfanityOption["Removed"] = 1] = "Removed";
    ProfanityOption[ProfanityOption["Raw"] = 2] = "Raw";
})(ProfanityOption || (ProfanityOption = {}));

//# sourceMappingURL=ProfanityOption.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentConfig.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentConfig.js ***!
  \*********************************************************************************************************************/
/*! exports provided: PronunciationAssessmentConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PronunciationAssessmentConfig", function() { return PronunciationAssessmentConfig; });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * Pronunciation assessment configuration.
 * @class PronunciationAssessmentConfig
 * Added in version 1.15.0.
 */
class PronunciationAssessmentConfig {
    /**
     * PronunciationAssessmentConfig constructor.
     * @constructor
     * @param {string} referenceText
     * @param gradingSystem
     * @param granularity
     * @param enableMiscue
     */
    constructor(referenceText, gradingSystem = _Exports__WEBPACK_IMPORTED_MODULE_1__["PronunciationAssessmentGradingSystem"].FivePoint, granularity = _Exports__WEBPACK_IMPORTED_MODULE_1__["PronunciationAssessmentGranularity"].Phoneme, enableMiscue = false) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrUndefined(referenceText, "referenceText");
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyCollection"]();
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].PronunciationAssessment_ReferenceText, referenceText);
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].PronunciationAssessment_GradingSystem, _Exports__WEBPACK_IMPORTED_MODULE_1__["PronunciationAssessmentGradingSystem"][gradingSystem]);
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].PronunciationAssessment_Granularity, _Exports__WEBPACK_IMPORTED_MODULE_1__["PronunciationAssessmentGranularity"][granularity]);
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].PronunciationAssessment_EnableMiscue, String(enableMiscue));
    }
    /**
     * @member PronunciationAssessmentConfig.fromJSON
     * @function
     * @public
     * @param {string} json The json string containing the pronunciation assessment parameters.
     * @return {PronunciationAssessmentConfig} Instance of PronunciationAssessmentConfig
     * @summary Creates an instance of the PronunciationAssessmentConfig from json.
     */
    static fromJSON(json) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrUndefined(json, "json");
        const config = new PronunciationAssessmentConfig("");
        config.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyCollection"]();
        config.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].PronunciationAssessment_Json, json);
        return config;
    }
    toJSON() {
        this.updateJson();
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].PronunciationAssessment_Params);
    }
    applyTo(recognizer) {
        this.updateJson();
        const recoBase = recognizer.internalData;
        recoBase.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].PronunciationAssessment_Params));
    }
    /**
     * Gets the reference text.
     * @member PronunciationAssessmentConfig.prototype.referenceText
     * @function
     * @public
     * @returns {string} Reference text.
     */
    get referenceText() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].PronunciationAssessment_ReferenceText);
    }
    /**
     * Gets/Sets the reference text.
     * @member PronunciationAssessmentConfig.prototype.referenceText
     * @function
     * @public
     * @param {string} referenceText - Reference text.
     */
    set referenceText(referenceText) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(referenceText, "referenceText");
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].PronunciationAssessment_ReferenceText, referenceText);
    }
    /**
     * Sets the phoneme alphabet.
     * The valid values are "SAPI" (default) and "IPA".
     * Added in version 1.20.0
     * @member PronunciationAssessmentConfig.prototype.phonemeAlphabet
     * @function
     * @public
     * @param {string} phonemeAlphabet - Phoneme alphabet.
     */
    set phonemeAlphabet(phonemeAlphabet) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(phonemeAlphabet, "phonemeAlphabet");
        this.privPhonemeAlphabet = phonemeAlphabet;
    }
    /**
     * Sets the nbest phoneme count
     * Added in version 1.20.0
     * @member PronunciationAssessmentConfig.prototype.nbestPhonemeCount
     * @function
     * @public
     * @param {number} nbestPhonemeCount - NBest phoneme count.
     */
    set nbestPhonemeCount(nbestPhonemeCount) {
        this.privNBestPhonemeCount = nbestPhonemeCount;
    }
    /**
     * @member PronunciationAssessmentConfig.prototype.properties
     * @function
     * @public
     * @return {PropertyCollection} Properties of the config.
     * @summary Gets a pronunciation assessment config properties
     */
    get properties() {
        return this.privProperties;
    }
    updateJson() {
        const jsonString = this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].PronunciationAssessment_Json, "{}");
        const paramsJson = JSON.parse(jsonString);
        const referenceText = this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].PronunciationAssessment_ReferenceText);
        if (referenceText) {
            paramsJson.referenceText = referenceText;
        }
        const gradingSystem = this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].PronunciationAssessment_GradingSystem);
        if (gradingSystem) {
            paramsJson.gradingSystem = gradingSystem;
        }
        const granularity = this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].PronunciationAssessment_Granularity);
        if (granularity) {
            paramsJson.granularity = granularity;
        }
        if (this.privPhonemeAlphabet) {
            paramsJson.phonemeAlphabet = this.privPhonemeAlphabet;
        }
        if (this.privNBestPhonemeCount) {
            paramsJson.nbestPhonemeCount = this.privNBestPhonemeCount;
        }
        // always set dimension to Comprehensive
        paramsJson.dimension = "Comprehensive";
        const enableMiscueString = this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].PronunciationAssessment_EnableMiscue);
        if (enableMiscueString === "true") {
            paramsJson.enableMiscue = true;
        }
        else if (enableMiscueString === "false") {
            paramsJson.enableMiscue = false;
        }
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].PronunciationAssessment_Params, JSON.stringify(paramsJson));
    }
}

//# sourceMappingURL=PronunciationAssessmentConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentGradingSystem.js":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentGradingSystem.js ***!
  \****************************************************************************************************************************/
/*! exports provided: PronunciationAssessmentGradingSystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PronunciationAssessmentGradingSystem", function() { return PronunciationAssessmentGradingSystem; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines the point system for pronunciation score calibration; default value is FivePoint.
 * Added in version 1.15.0
 * @class PronunciationAssessmentGradingSystem
 */
var PronunciationAssessmentGradingSystem;
(function (PronunciationAssessmentGradingSystem) {
    /**
     * Five point calibration
     * @member PronunciationAssessmentGradingSystem.FivePoint
     */
    PronunciationAssessmentGradingSystem[PronunciationAssessmentGradingSystem["FivePoint"] = 1] = "FivePoint";
    /**
     * Hundred mark
     * @member PronunciationAssessmentGradingSystem.HundredMark
     */
    PronunciationAssessmentGradingSystem[PronunciationAssessmentGradingSystem["HundredMark"] = 2] = "HundredMark";
})(PronunciationAssessmentGradingSystem || (PronunciationAssessmentGradingSystem = {}));

//# sourceMappingURL=PronunciationAssessmentGradingSystem.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentGranularity.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentGranularity.js ***!
  \**************************************************************************************************************************/
/*! exports provided: PronunciationAssessmentGranularity */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PronunciationAssessmentGranularity", function() { return PronunciationAssessmentGranularity; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines the pronunciation evaluation granularity; default value is Phoneme.
 * Added in version 1.15.0
 * @class PronunciationAssessmentGranularity
 */
var PronunciationAssessmentGranularity;
(function (PronunciationAssessmentGranularity) {
    /**
     * Shows the score on the full text, word and phoneme level
     * @member PronunciationAssessmentGranularity.Phoneme
     */
    PronunciationAssessmentGranularity[PronunciationAssessmentGranularity["Phoneme"] = 1] = "Phoneme";
    /**
     * Shows the score on the full text and word level
     * @member PronunciationAssessmentGranularity.Word
     */
    PronunciationAssessmentGranularity[PronunciationAssessmentGranularity["Word"] = 2] = "Word";
    /**
     * Shows the score on the full text level only
     * @member PronunciationAssessmentGranularity.FullText
     */
    PronunciationAssessmentGranularity[PronunciationAssessmentGranularity["FullText"] = 3] = "FullText";
})(PronunciationAssessmentGranularity || (PronunciationAssessmentGranularity = {}));

//# sourceMappingURL=PronunciationAssessmentGranularity.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentResult.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentResult.js ***!
  \*********************************************************************************************************************/
/*! exports provided: PronunciationAssessmentResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PronunciationAssessmentResult", function() { return PronunciationAssessmentResult; });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * Pronunciation assessment results.
 * @class PronunciationAssessmentResult
 * Added in version 1.15.0.
 */
class PronunciationAssessmentResult {
    constructor(jsonString) {
        const j = JSON.parse(jsonString);
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrUndefined(j.NBest[0], "NBest");
        this.privPronJson = j.NBest[0];
    }
    /**
     * @member PronunciationAssessmentResult.fromResult
     * @function
     * @public
     * @param {RecognitionResult} result The recognition result.
     * @return {PronunciationAssessmentConfig} Instance of PronunciationAssessmentConfig
     * @summary Creates an instance of the PronunciationAssessmentResult from recognition result.
     */
    static fromResult(result) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrUndefined(result, "result");
        const json = result.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceResponse_JsonResult);
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrUndefined(json, "json");
        return new PronunciationAssessmentResult(json);
    }
    /**
     * Gets the detail result of pronunciation assessment.
     * @member PronunciationAssessmentConfig.prototype.detailResult
     * @function
     * @public
     * @returns {DetailResult} detail result.
     */
    get detailResult() {
        return this.privPronJson;
    }
    /**
     * The score indicating the pronunciation accuracy of the given speech, which indicates
     * how closely the phonemes match a native speaker's pronunciation.
     * @member PronunciationAssessmentResult.prototype.accuracyScore
     * @function
     * @public
     * @returns {number} Accuracy score.
     */
    get accuracyScore() {
        return this.detailResult.PronunciationAssessment.AccuracyScore;
    }
    /**
     * The overall score indicating the pronunciation quality of the given speech.
     * This is calculated from AccuracyScore, FluencyScore and CompletenessScore with weight.
     * @member PronunciationAssessmentResult.prototype.pronunciationScore
     * @function
     * @public
     * @returns {number} Pronunciation score.
     */
    get pronunciationScore() {
        return this.detailResult.PronunciationAssessment.PronScore;
    }
    /**
     * The score indicating the completeness of the given speech by calculating the ratio of pronounced words towards entire input.
     * @member PronunciationAssessmentResult.prototype.completenessScore
     * @function
     * @public
     * @returns {number} Completeness score.
     */
    get completenessScore() {
        return this.detailResult.PronunciationAssessment.CompletenessScore;
    }
    /**
     * The score indicating the fluency of the given speech.
     * @member PronunciationAssessmentResult.prototype.fluencyScore
     * @function
     * @public
     * @returns {number} Fluency score.
     */
    get fluencyScore() {
        return this.detailResult.PronunciationAssessment.FluencyScore;
    }
}

//# sourceMappingURL=PronunciationAssessmentResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js ***!
  \**********************************************************************************************************/
/*! exports provided: PropertyCollection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PropertyCollection", function() { return PropertyCollection; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Represents collection of properties and their values.
 * @class PropertyCollection
 */
class PropertyCollection {
    constructor() {
        this.privKeys = [];
        this.privValues = [];
    }
    /**
     * Returns the property value in type String.
     * Currently only String, int and bool are allowed.
     * If the name is not available, the specified defaultValue is returned.
     * @member PropertyCollection.prototype.getProperty
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string | number | boolean} def - The default value which is returned if the parameter
     * is not available in the collection.
     * @returns {string} value of the parameter.
     */
    getProperty(key, def) {
        let keyToUse;
        if (typeof key === "string") {
            keyToUse = key;
        }
        else {
            keyToUse = _Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"][key];
        }
        for (let n = 0; n < this.privKeys.length; n++) {
            if (this.privKeys[n] === keyToUse) {
                return this.privValues[n];
            }
        }
        if (def === undefined) {
            return undefined;
        }
        return String(def);
    }
    /**
     * Sets the String value of the parameter specified by name.
     * @member PropertyCollection.prototype.setProperty
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} value - The value of the parameter.
     */
    setProperty(key, value) {
        let keyToUse;
        if (typeof key === "string") {
            keyToUse = key;
        }
        else {
            keyToUse = _Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"][key];
        }
        for (let n = 0; n < this.privKeys.length; n++) {
            if (this.privKeys[n] === keyToUse) {
                this.privValues[n] = value;
                return;
            }
        }
        this.privKeys.push(keyToUse);
        this.privValues.push(value);
    }
    /**
     * Clones the collection.
     * @member PropertyCollection.prototype.clone
     * @function
     * @public
     * @returns {PropertyCollection} A copy of the collection.
     */
    clone() {
        const clonedMap = new PropertyCollection();
        for (let n = 0; n < this.privKeys.length; n++) {
            clonedMap.privKeys.push(this.privKeys[n]);
            clonedMap.privValues.push(this.privValues[n]);
        }
        return clonedMap;
    }
    /**
     * Merges this set of properties into another, no overwrites.
     * @member PropertyCollection.prototype.mergeTo
     * @function
     * @public
     * @param {PropertyCollection}  destinationCollection - The collection to merge into.
     */
    mergeTo(destinationCollection) {
        this.privKeys.forEach((key) => {
            if (destinationCollection.getProperty(key, undefined) === undefined) {
                const value = this.getProperty(key);
                destinationCollection.setProperty(key, value);
            }
        });
    }
    /**
     * Get the keys in Property Collection.
     * @member PropertyCollection.prototype.keys
     * @function
     * @public
     * @returns {string []} Keys in the collection.
     */
    get keys() {
        return this.privKeys;
    }
}

//# sourceMappingURL=PropertyCollection.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js ***!
  \**************************************************************************************************/
/*! exports provided: PropertyId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PropertyId", function() { return PropertyId; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines speech property ids.
 * @class PropertyId
 */
var PropertyId;
(function (PropertyId) {
    /**
     * The Cognitive Services Speech Service subscription Key. If you are using an intent recognizer, you need to
     * specify the LUIS endpoint key for your particular LUIS app. Under normal circumstances, you shouldn't
     * have to use this property directly.
     * Instead, use [[SpeechConfig.fromSubscription]].
     * @member PropertyId.SpeechServiceConnection_Key
     */
    PropertyId[PropertyId["SpeechServiceConnection_Key"] = 0] = "SpeechServiceConnection_Key";
    /**
     * The Cognitive Services Speech Service endpoint (url). Under normal circumstances, you shouldn't
     * have to use this property directly.
     * Instead, use [[SpeechConfig.fromEndpoint]].
     * NOTE: This endpoint is not the same as the endpoint used to obtain an access token.
     * @member PropertyId.SpeechServiceConnection_Endpoint
     */
    PropertyId[PropertyId["SpeechServiceConnection_Endpoint"] = 1] = "SpeechServiceConnection_Endpoint";
    /**
     * The Cognitive Services Speech Service region. Under normal circumstances, you shouldn't have to
     * use this property directly.
     * Instead, use [[SpeechConfig.fromSubscription]], [[SpeechConfig.fromEndpoint]], [[SpeechConfig.fromAuthorizationToken]].
     * @member PropertyId.SpeechServiceConnection_Region
     */
    PropertyId[PropertyId["SpeechServiceConnection_Region"] = 2] = "SpeechServiceConnection_Region";
    /**
     * The Cognitive Services Speech Service authorization token (aka access token). Under normal circumstances,
     * you shouldn't have to use this property directly.
     * Instead, use [[SpeechConfig.fromAuthorizationToken]], [[SpeechRecognizer.authorizationToken]],
     * [[IntentRecognizer.authorizationToken]], [[TranslationRecognizer.authorizationToken]], [[SpeakerRecognizer.authorizationToken]].
     * @member PropertyId.SpeechServiceAuthorization_Token
     */
    PropertyId[PropertyId["SpeechServiceAuthorization_Token"] = 3] = "SpeechServiceAuthorization_Token";
    /**
     * The Cognitive Services Speech Service authorization type. Currently unused.
     * @member PropertyId.SpeechServiceAuthorization_Type
     */
    PropertyId[PropertyId["SpeechServiceAuthorization_Type"] = 4] = "SpeechServiceAuthorization_Type";
    /**
     * The Cognitive Services Speech Service endpoint id. Under normal circumstances, you shouldn't
     * have to use this property directly.
     * Instead, use [[SpeechConfig.endpointId]].
     * NOTE: The endpoint id is available in the Speech Portal, listed under Endpoint Details.
     * @member PropertyId.SpeechServiceConnection_EndpointId
     */
    PropertyId[PropertyId["SpeechServiceConnection_EndpointId"] = 5] = "SpeechServiceConnection_EndpointId";
    /**
     * The list of comma separated languages (BCP-47 format) used as target translation languages. Under normal circumstances,
     * you shouldn't have to use this property directly.
     * Instead use [[SpeechTranslationConfig.addTargetLanguage]],
     * [[SpeechTranslationConfig.targetLanguages]], [[TranslationRecognizer.targetLanguages]].
     * @member PropertyId.SpeechServiceConnection_TranslationToLanguages
     */
    PropertyId[PropertyId["SpeechServiceConnection_TranslationToLanguages"] = 6] = "SpeechServiceConnection_TranslationToLanguages";
    /**
     * The name of the Cognitive Service Text to Speech Service Voice. Under normal circumstances, you shouldn't have to use this
     * property directly.
     * Instead, use [[SpeechTranslationConfig.voiceName]].
     * NOTE: Valid voice names can be found <a href="https://aka.ms/csspeech/voicenames">here</a>.
     * @member PropertyId.SpeechServiceConnection_TranslationVoice
     */
    PropertyId[PropertyId["SpeechServiceConnection_TranslationVoice"] = 7] = "SpeechServiceConnection_TranslationVoice";
    /**
     * Translation features.
     * @member PropertyId.SpeechServiceConnection_TranslationFeatures
     */
    PropertyId[PropertyId["SpeechServiceConnection_TranslationFeatures"] = 8] = "SpeechServiceConnection_TranslationFeatures";
    /**
     * The Language Understanding Service Region. Under normal circumstances, you shouldn't have to use this property directly.
     * Instead, use [[LanguageUnderstandingModel]].
     * @member PropertyId.SpeechServiceConnection_IntentRegion
     */
    PropertyId[PropertyId["SpeechServiceConnection_IntentRegion"] = 9] = "SpeechServiceConnection_IntentRegion";
    /**
     * The host name of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_ProxyHostName"] = 10] = "SpeechServiceConnection_ProxyHostName";
    /**
     * The port of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_ProxyPort"] = 11] = "SpeechServiceConnection_ProxyPort";
    /**
     * The user name of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_ProxyUserName"] = 12] = "SpeechServiceConnection_ProxyUserName";
    /**
     * The password of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_ProxyPassword"] = 13] = "SpeechServiceConnection_ProxyPassword";
    /**
     * The Cognitive Services Speech Service recognition Mode. Can be "INTERACTIVE", "CONVERSATION", "DICTATION".
     * This property is intended to be read-only. The SDK is using it internally.
     * @member PropertyId.SpeechServiceConnection_RecoMode
     */
    PropertyId[PropertyId["SpeechServiceConnection_RecoMode"] = 14] = "SpeechServiceConnection_RecoMode";
    /**
     * The spoken language to be recognized (in BCP-47 format). Under normal circumstances, you shouldn't have to use this property
     * directly.
     * Instead, use [[SpeechConfig.speechRecognitionLanguage]].
     * @member PropertyId.SpeechServiceConnection_RecoLanguage
     */
    PropertyId[PropertyId["SpeechServiceConnection_RecoLanguage"] = 15] = "SpeechServiceConnection_RecoLanguage";
    /**
     * The session id. This id is a universally unique identifier (aka UUID) representing a specific binding of an audio input stream
     * and the underlying speech recognition instance to which it is bound. Under normal circumstances, you shouldn't have to use this
     * property directly.
     * Instead use [[SessionEventArgs.sessionId]].
     * @member PropertyId.Speech_SessionId
     */
    PropertyId[PropertyId["Speech_SessionId"] = 16] = "Speech_SessionId";
    /**
     * The spoken language to be synthesized (e.g. en-US)
     * @member PropertyId.SpeechServiceConnection_SynthLanguage
     */
    PropertyId[PropertyId["SpeechServiceConnection_SynthLanguage"] = 17] = "SpeechServiceConnection_SynthLanguage";
    /**
     * The name of the TTS voice to be used for speech synthesis
     * @member PropertyId.SpeechServiceConnection_SynthVoice
     */
    PropertyId[PropertyId["SpeechServiceConnection_SynthVoice"] = 18] = "SpeechServiceConnection_SynthVoice";
    /**
     * The string to specify TTS output audio format
     * @member PropertyId.SpeechServiceConnection_SynthOutputFormat
     */
    PropertyId[PropertyId["SpeechServiceConnection_SynthOutputFormat"] = 19] = "SpeechServiceConnection_SynthOutputFormat";
    /**
     * The list of comma separated languages used as possible source languages
     * Added in version 1.13.0
     * @member PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages
     */
    PropertyId[PropertyId["SpeechServiceConnection_AutoDetectSourceLanguages"] = 20] = "SpeechServiceConnection_AutoDetectSourceLanguages";
    /**
     * The requested Cognitive Services Speech Service response output format (simple or detailed). Under normal circumstances, you shouldn't have
     * to use this property directly.
     * Instead use [[SpeechConfig.outputFormat]].
     * @member PropertyId.SpeechServiceResponse_RequestDetailedResultTrueFalse
     */
    PropertyId[PropertyId["SpeechServiceResponse_RequestDetailedResultTrueFalse"] = 21] = "SpeechServiceResponse_RequestDetailedResultTrueFalse";
    /**
     * The requested Cognitive Services Speech Service response output profanity level. Currently unused.
     * @member PropertyId.SpeechServiceResponse_RequestProfanityFilterTrueFalse
     */
    PropertyId[PropertyId["SpeechServiceResponse_RequestProfanityFilterTrueFalse"] = 22] = "SpeechServiceResponse_RequestProfanityFilterTrueFalse";
    /**
     * The Cognitive Services Speech Service response output (in JSON format). This property is available on recognition result objects only.
     * @member PropertyId.SpeechServiceResponse_JsonResult
     */
    PropertyId[PropertyId["SpeechServiceResponse_JsonResult"] = 23] = "SpeechServiceResponse_JsonResult";
    /**
     * The Cognitive Services Speech Service error details (in JSON format). Under normal circumstances, you shouldn't have to
     * use this property directly. Instead use [[CancellationDetails.errorDetails]].
     * @member PropertyId.SpeechServiceResponse_JsonErrorDetails
     */
    PropertyId[PropertyId["SpeechServiceResponse_JsonErrorDetails"] = 24] = "SpeechServiceResponse_JsonErrorDetails";
    /**
     * The cancellation reason. Currently unused.
     * @member PropertyId.CancellationDetails_Reason
     */
    PropertyId[PropertyId["CancellationDetails_Reason"] = 25] = "CancellationDetails_Reason";
    /**
     * The cancellation text. Currently unused.
     * @member PropertyId.CancellationDetails_ReasonText
     */
    PropertyId[PropertyId["CancellationDetails_ReasonText"] = 26] = "CancellationDetails_ReasonText";
    /**
     * The Cancellation detailed text. Currently unused.
     * @member PropertyId.CancellationDetails_ReasonDetailedText
     */
    PropertyId[PropertyId["CancellationDetails_ReasonDetailedText"] = 27] = "CancellationDetails_ReasonDetailedText";
    /**
     * The Language Understanding Service response output (in JSON format). Available via [[IntentRecognitionResult]]
     * @member PropertyId.LanguageUnderstandingServiceResponse_JsonResult
     */
    PropertyId[PropertyId["LanguageUnderstandingServiceResponse_JsonResult"] = 28] = "LanguageUnderstandingServiceResponse_JsonResult";
    /**
     * The URL string built from speech configuration.
     * This property is intended to be read-only. The SDK is using it internally.
     * NOTE: Added in version 1.7.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_Url"] = 29] = "SpeechServiceConnection_Url";
    /**
     * The initial silence timeout value (in milliseconds) used by the service.
     * Added in version 1.7.0
     */
    PropertyId[PropertyId["SpeechServiceConnection_InitialSilenceTimeoutMs"] = 30] = "SpeechServiceConnection_InitialSilenceTimeoutMs";
    /**
     * The end silence timeout value (in milliseconds) used by the service.
     * Added in version 1.7.0
     */
    PropertyId[PropertyId["SpeechServiceConnection_EndSilenceTimeoutMs"] = 31] = "SpeechServiceConnection_EndSilenceTimeoutMs";
    /**
     * A duration of detected silence, measured in milliseconds, after which speech-to-text will determine a spoken
     * phrase has ended and generate a final Recognized result. Configuring this timeout may be helpful in situations
     * where spoken input is significantly faster or slower than usual and default segmentation behavior consistently
     * yields results that are too long or too short. Segmentation timeout values that are inappropriately high or low
     * can negatively affect speech-to-text accuracy; this property should be carefully configured and the resulting
     * behavior should be thoroughly validated as intended.
     *
     * For more information about timeout configuration that includes discussion of default behaviors, please visit
     * https://aka.ms/csspeech/timeouts.
     *
     * Added in version 1.21.0.
     */
    PropertyId[PropertyId["Speech_SegmentationSilenceTimeoutMs"] = 32] = "Speech_SegmentationSilenceTimeoutMs";
    /**
     * A boolean value specifying whether audio logging is enabled in the service or not.
     * Added in version 1.7.0
     */
    PropertyId[PropertyId["SpeechServiceConnection_EnableAudioLogging"] = 33] = "SpeechServiceConnection_EnableAudioLogging";
    /**
     * The speech service connection language identifier mode.
     * Can be "AtStart" (the default), or "Continuous". See Language
     * Identification document https://aka.ms/speech/lid?pivots=programming-language-javascript
     * for more details.
     * Added in 1.25.0
     **/
    PropertyId[PropertyId["SpeechServiceConnection_LanguageIdMode"] = 34] = "SpeechServiceConnection_LanguageIdMode";
    /**
     * A string value representing the desired endpoint version to target for Speech Recognition.
     * Added in version 1.21.0
     */
    PropertyId[PropertyId["SpeechServiceConnection_RecognitionEndpointVersion"] = 35] = "SpeechServiceConnection_RecognitionEndpointVersion";
    /**
     * The requested Cognitive Services Speech Service response output profanity setting.
     * Allowed values are "masked", "removed", and "raw".
     * Added in version 1.7.0.
     */
    PropertyId[PropertyId["SpeechServiceResponse_ProfanityOption"] = 36] = "SpeechServiceResponse_ProfanityOption";
    /**
     * A string value specifying which post processing option should be used by service.
     * Allowed values are "TrueText".
     * Added in version 1.7.0
     */
    PropertyId[PropertyId["SpeechServiceResponse_PostProcessingOption"] = 37] = "SpeechServiceResponse_PostProcessingOption";
    /**
     * A boolean value specifying whether to include word-level timestamps in the response result.
     * Added in version 1.7.0
     */
    PropertyId[PropertyId["SpeechServiceResponse_RequestWordLevelTimestamps"] = 38] = "SpeechServiceResponse_RequestWordLevelTimestamps";
    /**
     * The number of times a word has to be in partial results to be returned.
     * Added in version 1.7.0
     */
    PropertyId[PropertyId["SpeechServiceResponse_StablePartialResultThreshold"] = 39] = "SpeechServiceResponse_StablePartialResultThreshold";
    /**
     * A string value specifying the output format option in the response result. Internal use only.
     * Added in version 1.7.0.
     */
    PropertyId[PropertyId["SpeechServiceResponse_OutputFormatOption"] = 40] = "SpeechServiceResponse_OutputFormatOption";
    /**
     * A boolean value to request for stabilizing translation partial results by omitting words in the end.
     * Added in version 1.7.0.
     */
    PropertyId[PropertyId["SpeechServiceResponse_TranslationRequestStablePartialResult"] = 41] = "SpeechServiceResponse_TranslationRequestStablePartialResult";
    /**
     * A boolean value specifying whether to request WordBoundary events.
     * @member PropertyId.SpeechServiceResponse_RequestWordBoundary
     * Added in version 1.21.0.
     */
    PropertyId[PropertyId["SpeechServiceResponse_RequestWordBoundary"] = 42] = "SpeechServiceResponse_RequestWordBoundary";
    /**
     * A boolean value specifying whether to request punctuation boundary in WordBoundary Events. Default is true.
     * @member PropertyId.SpeechServiceResponse_RequestPunctuationBoundary
     * Added in version 1.21.0.
     */
    PropertyId[PropertyId["SpeechServiceResponse_RequestPunctuationBoundary"] = 43] = "SpeechServiceResponse_RequestPunctuationBoundary";
    /**
     * A boolean value specifying whether to request sentence boundary in WordBoundary Events. Default is false.
     * @member PropertyId.SpeechServiceResponse_RequestSentenceBoundary
     * Added in version 1.21.0.
     */
    PropertyId[PropertyId["SpeechServiceResponse_RequestSentenceBoundary"] = 44] = "SpeechServiceResponse_RequestSentenceBoundary";
    /**
     * Identifier used to connect to the backend service.
     * @member PropertyId.Conversation_ApplicationId
     */
    PropertyId[PropertyId["Conversation_ApplicationId"] = 45] = "Conversation_ApplicationId";
    /**
     * Type of dialog backend to connect to.
     * @member PropertyId.Conversation_DialogType
     */
    PropertyId[PropertyId["Conversation_DialogType"] = 46] = "Conversation_DialogType";
    /**
     * Silence timeout for listening
     * @member PropertyId.Conversation_Initial_Silence_Timeout
     */
    PropertyId[PropertyId["Conversation_Initial_Silence_Timeout"] = 47] = "Conversation_Initial_Silence_Timeout";
    /**
     * From Id to add to speech recognition activities.
     * @member PropertyId.Conversation_From_Id
     */
    PropertyId[PropertyId["Conversation_From_Id"] = 48] = "Conversation_From_Id";
    /**
     * ConversationId for the session.
     * @member PropertyId.Conversation_Conversation_Id
     */
    PropertyId[PropertyId["Conversation_Conversation_Id"] = 49] = "Conversation_Conversation_Id";
    /**
     * Comma separated list of custom voice deployment ids.
     * @member PropertyId.Conversation_Custom_Voice_Deployment_Ids
     */
    PropertyId[PropertyId["Conversation_Custom_Voice_Deployment_Ids"] = 50] = "Conversation_Custom_Voice_Deployment_Ids";
    /**
     * Speech activity template, stamp properties from the template on the activity generated by the service for speech.
     * @member PropertyId.Conversation_Speech_Activity_Template
     * Added in version 1.10.0.
     */
    PropertyId[PropertyId["Conversation_Speech_Activity_Template"] = 51] = "Conversation_Speech_Activity_Template";
    /**
     * Enables or disables the receipt of turn status messages as obtained on the turnStatusReceived event.
     * @member PropertyId.Conversation_Request_Bot_Status_Messages
     * Added in version 1.15.0.
     */
    PropertyId[PropertyId["Conversation_Request_Bot_Status_Messages"] = 52] = "Conversation_Request_Bot_Status_Messages";
    /**
     * Specifies the connection ID to be provided in the Agent configuration message, e.g. a Direct Line token for
     * channel authentication.
     * Added in version 1.15.1.
     */
    PropertyId[PropertyId["Conversation_Agent_Connection_Id"] = 53] = "Conversation_Agent_Connection_Id";
    /**
     * The Cognitive Services Speech Service host (url). Under normal circumstances, you shouldn't have to use this property directly.
     * Instead, use [[SpeechConfig.fromHost]].
     */
    PropertyId[PropertyId["SpeechServiceConnection_Host"] = 54] = "SpeechServiceConnection_Host";
    /**
     * Set the host for service calls to the Conversation Translator REST management and websocket calls.
     */
    PropertyId[PropertyId["ConversationTranslator_Host"] = 55] = "ConversationTranslator_Host";
    /**
     * Optionally set the the host's display name.
     * Used when joining a conversation.
     */
    PropertyId[PropertyId["ConversationTranslator_Name"] = 56] = "ConversationTranslator_Name";
    /**
     * Optionally set a value for the X-CorrelationId request header.
     * Used for troubleshooting errors in the server logs. It should be a valid guid.
     */
    PropertyId[PropertyId["ConversationTranslator_CorrelationId"] = 57] = "ConversationTranslator_CorrelationId";
    /**
     * Set the conversation token to be sent to the speech service. This enables the
     * service to service call from the speech service to the Conversation Translator service for relaying
     * recognitions. For internal use.
     */
    PropertyId[PropertyId["ConversationTranslator_Token"] = 58] = "ConversationTranslator_Token";
    /**
     * The reference text of the audio for pronunciation evaluation.
     * For this and the following pronunciation assessment parameters, see
     * https://docs.microsoft.com/azure/cognitive-services/speech-service/rest-speech-to-text#pronunciation-assessment-parameters for details.
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */
    PropertyId[PropertyId["PronunciationAssessment_ReferenceText"] = 59] = "PronunciationAssessment_ReferenceText";
    /**
     * The point system for pronunciation score calibration (FivePoint or HundredMark).
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */
    PropertyId[PropertyId["PronunciationAssessment_GradingSystem"] = 60] = "PronunciationAssessment_GradingSystem";
    /**
     * The pronunciation evaluation granularity (Phoneme, Word, or FullText).
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */
    PropertyId[PropertyId["PronunciationAssessment_Granularity"] = 61] = "PronunciationAssessment_Granularity";
    /**
     * Defines if enable miscue calculation.
     * With this enabled, the pronounced words will be compared to the reference text,
     * and will be marked with omission/insertion based on the comparison. The default setting is False.
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */
    PropertyId[PropertyId["PronunciationAssessment_EnableMiscue"] = 62] = "PronunciationAssessment_EnableMiscue";
    /**
     * The json string of pronunciation assessment parameters
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */
    PropertyId[PropertyId["PronunciationAssessment_Json"] = 63] = "PronunciationAssessment_Json";
    /**
     * Pronunciation assessment parameters.
     * This property is intended to be read-only. The SDK is using it internally.
     * Added in version 1.15.0
     */
    PropertyId[PropertyId["PronunciationAssessment_Params"] = 64] = "PronunciationAssessment_Params";
    /**
     * Version of Speaker Recognition API to use.
     * Added in version 1.18.0
     */
    PropertyId[PropertyId["SpeakerRecognition_Api_Version"] = 65] = "SpeakerRecognition_Api_Version";
})(PropertyId || (PropertyId = {}));

//# sourceMappingURL=PropertyId.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionEventArgs.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionEventArgs.js ***!
  \************************************************************************************************************/
/*! exports provided: RecognitionEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognitionEventArgs", function() { return RecognitionEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Defines payload for session events like Speech Start/End Detected
 * @class
 */
class RecognitionEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["SessionEventArgs"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */
    constructor(offset, sessionId) {
        super(sessionId);
        this.privOffset = offset;
    }
    /**
     * Represents the message offset
     * @member RecognitionEventArgs.prototype.offset
     * @function
     * @public
     */
    get offset() {
        return this.privOffset;
    }
}

//# sourceMappingURL=RecognitionEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionResult.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionResult.js ***!
  \*********************************************************************************************************/
/*! exports provided: RecognitionResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognitionResult", function() { return RecognitionResult; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines result of speech recognition.
 * @class RecognitionResult
 */
class RecognitionResult {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} language - Primary Language detected, if provided.
     * @param {string} languageDetectionConfidence - Primary Language confidence ("Unknown," "Low," "Medium," "High"...), if provided.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */
    constructor(resultId, reason, text, duration, offset, language, languageDetectionConfidence, errorDetails, json, properties) {
        this.privResultId = resultId;
        this.privReason = reason;
        this.privText = text;
        this.privDuration = duration;
        this.privOffset = offset;
        this.privLanguage = language;
        this.privLanguageDetectionConfidence = languageDetectionConfidence;
        this.privErrorDetails = errorDetails;
        this.privJson = json;
        this.privProperties = properties;
    }
    /**
     * Specifies the result identifier.
     * @member RecognitionResult.prototype.resultId
     * @function
     * @public
     * @returns {string} Specifies the result identifier.
     */
    get resultId() {
        return this.privResultId;
    }
    /**
     * Specifies status of the result.
     * @member RecognitionResult.prototype.reason
     * @function
     * @public
     * @returns {ResultReason} Specifies status of the result.
     */
    get reason() {
        return this.privReason;
    }
    /**
     * Presents the recognized text in the result.
     * @member RecognitionResult.prototype.text
     * @function
     * @public
     * @returns {string} Presents the recognized text in the result.
     */
    get text() {
        return this.privText;
    }
    /**
     * Duration of recognized speech in 100 nano second increments.
     * @member RecognitionResult.prototype.duration
     * @function
     * @public
     * @returns {number} Duration of recognized speech in 100 nano second increments.
     */
    get duration() {
        return this.privDuration;
    }
    /**
     * Offset of recognized speech in 100 nano second increments.
     * @member RecognitionResult.prototype.offset
     * @function
     * @public
     * @returns {number} Offset of recognized speech in 100 nano second increments.
     */
    get offset() {
        return this.privOffset;
    }
    /**
     * Primary Language detected.
     * @member RecognitionResult.prototype.language
     * @function
     * @public
     * @returns {string} language detected.
     */
    get language() {
        return this.privLanguage;
    }
    /**
     * Primary Language detection confidence (Unknown, Low, Medium, High).
     * @member RecognitionResult.prototype.languageDetectionConfidence
     * @function
     * @public
     * @returns {string} detection confidence strength.
     */
    get languageDetectionConfidence() {
        return this.privLanguageDetectionConfidence;
    }
    /**
     * In case of an unsuccessful recognition, provides details of the occurred error.
     * @member RecognitionResult.prototype.errorDetails
     * @function
     * @public
     * @returns {string} a brief description of an error.
     */
    get errorDetails() {
        return this.privErrorDetails;
    }
    /**
     * A string containing Json serialized recognition result as it was received from the service.
     * @member RecognitionResult.prototype.json
     * @function
     * @private
     * @returns {string} Json serialized representation of the result.
     */
    get json() {
        return this.privJson;
    }
    /**
     * The set of properties exposed in the result.
     * @member RecognitionResult.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The set of properties exposed in the result.
     */
    get properties() {
        return this.privProperties;
    }
}

//# sourceMappingURL=RecognitionResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Recognizer.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Recognizer.js ***!
  \**************************************************************************************************/
/*! exports provided: Recognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Recognizer", function() { return Recognizer; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




/**
 * Defines the base class Recognizer which mainly contains common event handlers.
 * @class Recognizer
 */
class Recognizer {
    /**
     * Creates and initializes an instance of a Recognizer
     * @constructor
     * @param {AudioConfig} audioInput - An optional audio input stream associated with the recognizer
     */
    constructor(audioConfig, properties, connectionFactory) {
        this.audioConfig = (audioConfig !== undefined) ? audioConfig : _Exports__WEBPACK_IMPORTED_MODULE_3__["AudioConfig"].fromDefaultMicrophoneInput();
        this.privDisposed = false;
        this.privProperties = properties.clone();
        this.privConnectionFactory = connectionFactory;
        this.implCommonRecognizerSetup();
    }
    /**
     * Dispose of associated resources.
     * @member Recognizer.prototype.close
     * @function
     * @public
     */
    close(cb, errorCb) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposed);
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.dispose(true), cb, errorCb);
    }
    /**
     * @Internal
     * Internal data member to support fromRecognizer* pattern methods on other classes.
     * Do not use externally, object returned will change without warning or notice.
     */
    get internalData() {
        return this.privReco;
    }
    /**
     * This method performs cleanup of resources.
     * The Boolean parameter disposing indicates whether the method is called
     * from Dispose (if disposing is true) or from the finalizer (if disposing is false).
     * Derived classes should override this method to dispose resource if needed.
     * @member Recognizer.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - Flag to request disposal.
     */
    dispose(disposing) {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privDisposed) {
                return;
            }
            this.privDisposed = true;
            if (disposing) {
                if (this.privReco) {
                    yield this.privReco.audioSource.turnOff();
                    yield this.privReco.dispose();
                }
            }
        });
    }
    /**
     * This method returns the current state of the telemetry setting.
     * @member Recognizer.prototype.telemetryEnabled
     * @function
     * @public
     * @returns true if the telemetry is enabled, false otherwise.
     */
    static get telemetryEnabled() {
        return _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ServiceRecognizerBase"].telemetryDataEnabled;
    }
    /**
     * This method globally enables or disables telemetry.
     * @member Recognizer.prototype.enableTelemetry
     * @function
     * @public
     * @param enabled - Global setting for telemetry collection.
     * If set to true, telemetry information like microphone errors,
     * recognition errors are collected and sent to Microsoft.
     * If set to false, no telemetry is sent to Microsoft.
     */
    static enableTelemetry(enabled) {
        _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ServiceRecognizerBase"].telemetryDataEnabled = enabled;
    }
    // Does the generic recognizer setup that is common across all recognizer types.
    implCommonRecognizerSetup() {
        let osPlatform = (typeof window !== "undefined") ? "Browser" : "Node";
        let osName = "unknown";
        let osVersion = "unknown";
        if (typeof navigator !== "undefined") {
            osPlatform = osPlatform + "/" + navigator.platform;
            osName = navigator.userAgent;
            osVersion = navigator.appVersion;
        }
        const recognizerConfig = this.createRecognizerConfig(new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechServiceConfig"](new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["Context"](new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["OS"](osPlatform, osName, osVersion))));
        this.privReco = this.createServiceRecognizer(Recognizer.getAuthFromProperties(this.privProperties), this.privConnectionFactory, this.audioConfig, recognizerConfig);
    }
    recognizeOnceAsyncImpl(recognitionMode) {
        return __awaiter(this, void 0, void 0, function* () {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposed);
            const ret = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Deferred"]();
            yield this.implRecognizerStop();
            yield this.privReco.recognize(recognitionMode, ret.resolve, ret.reject);
            const result = yield ret.promise;
            yield this.implRecognizerStop();
            return result;
        });
    }
    startContinuousRecognitionAsyncImpl(recognitionMode) {
        return __awaiter(this, void 0, void 0, function* () {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposed);
            yield this.implRecognizerStop();
            yield this.privReco.recognize(recognitionMode, undefined, undefined);
        });
    }
    stopContinuousRecognitionAsyncImpl() {
        return __awaiter(this, void 0, void 0, function* () {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposed);
            yield this.implRecognizerStop();
        });
    }
    implRecognizerStop() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privReco) {
                yield this.privReco.stopRecognizing();
            }
            return;
        });
    }
    static getAuthFromProperties(properties) {
        const subscriptionKey = properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_Key, undefined);
        const authentication = (subscriptionKey && subscriptionKey !== "") ?
            new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["CognitiveSubscriptionKeyAuthentication"](subscriptionKey) :
            new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["CognitiveTokenAuthentication"](() => {
                const authorizationToken = properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceAuthorization_Token, undefined);
                return Promise.resolve(authorizationToken);
            }, () => {
                const authorizationToken = properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceAuthorization_Token, undefined);
                return Promise.resolve(authorizationToken);
            });
        return authentication;
    }
}

//# sourceMappingURL=Recognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js ***!
  \****************************************************************************************************/
/*! exports provided: ResultReason */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResultReason", function() { return ResultReason; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines the possible reasons a recognition result might be generated.
 * @class ResultReason
 */
var ResultReason;
(function (ResultReason) {
    /**
     * Indicates speech could not be recognized. More details
     * can be found in the NoMatchDetails object.
     * @member ResultReason.NoMatch
     */
    ResultReason[ResultReason["NoMatch"] = 0] = "NoMatch";
    /**
     * Indicates that the recognition was canceled. More details
     * can be found using the CancellationDetails object.
     * @member ResultReason.Canceled
     */
    ResultReason[ResultReason["Canceled"] = 1] = "Canceled";
    /**
     * Indicates the speech result contains hypothesis text.
     * @member ResultReason.RecognizedSpeech
     */
    ResultReason[ResultReason["RecognizingSpeech"] = 2] = "RecognizingSpeech";
    /**
     * Indicates the speech result contains final text that has been recognized.
     * Speech Recognition is now complete for this phrase.
     * @member ResultReason.RecognizedSpeech
     */
    ResultReason[ResultReason["RecognizedSpeech"] = 3] = "RecognizedSpeech";
    /**
     * Indicates the speech result contains a finalized acceptance of a provided keyword.
     * Speech recognition will continue unless otherwise configured.
     * @member ResultReason.RecognizedKeyword
     */
    ResultReason[ResultReason["RecognizedKeyword"] = 4] = "RecognizedKeyword";
    /**
     * Indicates the intent result contains hypothesis text and intent.
     * @member ResultReason.RecognizingIntent
     */
    ResultReason[ResultReason["RecognizingIntent"] = 5] = "RecognizingIntent";
    /**
     * Indicates the intent result contains final text and intent.
     * Speech Recognition and Intent determination are now complete for this phrase.
     * @member ResultReason.RecognizedIntent
     */
    ResultReason[ResultReason["RecognizedIntent"] = 6] = "RecognizedIntent";
    /**
     * Indicates the translation result contains hypothesis text and its translation(s).
     * @member ResultReason.TranslatingSpeech
     */
    ResultReason[ResultReason["TranslatingSpeech"] = 7] = "TranslatingSpeech";
    /**
     * Indicates the translation result contains final text and corresponding translation(s).
     * Speech Recognition and Translation are now complete for this phrase.
     * @member ResultReason.TranslatedSpeech
     */
    ResultReason[ResultReason["TranslatedSpeech"] = 8] = "TranslatedSpeech";
    /**
     * Indicates the synthesized audio result contains a non-zero amount of audio data
     * @member ResultReason.SynthesizingAudio
     */
    ResultReason[ResultReason["SynthesizingAudio"] = 9] = "SynthesizingAudio";
    /**
     * Indicates the synthesized audio is now complete for this phrase.
     * @member ResultReason.SynthesizingAudioCompleted
     */
    ResultReason[ResultReason["SynthesizingAudioCompleted"] = 10] = "SynthesizingAudioCompleted";
    /**
     * Indicates the speech synthesis is now started
     * @member ResultReason.SynthesizingAudioStarted
     */
    ResultReason[ResultReason["SynthesizingAudioStarted"] = 11] = "SynthesizingAudioStarted";
    /**
     * Indicates the voice profile is being enrolled and customers need to send more audio to create a voice profile.
     * @member ResultReason.EnrollingVoiceProfile
     */
    ResultReason[ResultReason["EnrollingVoiceProfile"] = 12] = "EnrollingVoiceProfile";
    /**
     * Indicates the voice profile has been enrolled.
     * @member ResultReason.EnrolledVoiceProfile
     */
    ResultReason[ResultReason["EnrolledVoiceProfile"] = 13] = "EnrolledVoiceProfile";
    /**
     * Indicates successful identification of some speakers.
     * @member ResultReason.RecognizedSpeakers
     */
    ResultReason[ResultReason["RecognizedSpeakers"] = 14] = "RecognizedSpeakers";
    /**
     * Indicates successfully verified one speaker.
     * @member ResultReason.RecognizedSpeaker
     */
    ResultReason[ResultReason["RecognizedSpeaker"] = 15] = "RecognizedSpeaker";
    /**
     * Indicates a voice profile has been reset successfully.
     * @member ResultReason.ResetVoiceProfile
     */
    ResultReason[ResultReason["ResetVoiceProfile"] = 16] = "ResetVoiceProfile";
    /**
     * Indicates a voice profile has been deleted successfully.
     * @member ResultReason.DeletedVoiceProfile
     */
    ResultReason[ResultReason["DeletedVoiceProfile"] = 17] = "DeletedVoiceProfile";
    /**
     * Indicates synthesis voices list has been successfully retrieved.
     * @member ResultReason.VoicesListRetrieved
     */
    ResultReason[ResultReason["VoicesListRetrieved"] = 18] = "VoicesListRetrieved";
})(ResultReason || (ResultReason = {}));

//# sourceMappingURL=ResultReason.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ServiceEventArgs.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ServiceEventArgs.js ***!
  \********************************************************************************************************/
/*! exports provided: ServiceEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ServiceEventArgs", function() { return ServiceEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//

/**
 * Defines payload for any Service message event
 * Added in version 1.9.0
 */
class ServiceEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["SessionEventArgs"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} json - json payload of the USP message.
     */
    constructor(json, name, sessionId) {
        super(sessionId);
        this.privJsonResult = json;
        this.privEventName = name;
    }
    get jsonString() {
        return this.privJsonResult;
    }
    get eventName() {
        return this.privEventName;
    }
}

//# sourceMappingURL=ServiceEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ServicePropertyChannel.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ServicePropertyChannel.js ***!
  \**************************************************************************************************************/
/*! exports provided: ServicePropertyChannel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ServicePropertyChannel", function() { return ServicePropertyChannel; });
// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
/**
 * Defines channels used to pass property settings to service.
 * Added in version 1.7.0.
 */
var ServicePropertyChannel;
(function (ServicePropertyChannel) {
    /**
     * Uses URI query parameter to pass property settings to service.
     */
    ServicePropertyChannel[ServicePropertyChannel["UriQueryParameter"] = 0] = "UriQueryParameter";
})(ServicePropertyChannel || (ServicePropertyChannel = {}));

//# sourceMappingURL=ServicePropertyChannel.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js ***!
  \********************************************************************************************************/
/*! exports provided: SessionEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SessionEventArgs", function() { return SessionEventArgs; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines content for session events like SessionStarted/Stopped, SoundStarted/Stopped.
 * @class SessionEventArgs
 */
class SessionEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} sessionId - The session id.
     */
    constructor(sessionId) {
        this.privSessionId = sessionId;
    }
    /**
     * Represents the session identifier.
     * @member SessionEventArgs.prototype.sessionId
     * @function
     * @public
     * @returns {string} Represents the session identifier.
     */
    get sessionId() {
        return this.privSessionId;
    }
}

//# sourceMappingURL=SessionEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SourceLanguageConfig.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SourceLanguageConfig.js ***!
  \************************************************************************************************************/
/*! exports provided: SourceLanguageConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SourceLanguageConfig", function() { return SourceLanguageConfig; });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Source Language configuration.
 * @class SourceLanguageConfig
 */
class SourceLanguageConfig {
    constructor(language, endpointId) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrUndefined(language, "language");
        this.privLanguage = language;
        this.privEndpointId = endpointId;
    }
    /**
     * @member SourceLanguageConfig.fromLanguage
     * @function
     * @public
     * @param {string} language language (eg. "en-US") value of config.
     * @param {string?} endpointId endpointId of model bound to given language of config.
     * @return {SourceLanguageConfig} Instance of SourceLanguageConfig
     * @summary Creates an instance of the SourceLanguageConfig with the given language and optional endpointId.
     * Added in version 1.13.0.
     */
    static fromLanguage(language, endpointId) {
        return new SourceLanguageConfig(language, endpointId);
    }
    get language() {
        return this.privLanguage;
    }
    get endpointId() {
        return this.privEndpointId;
    }
}

//# sourceMappingURL=SourceLanguageConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerIdentificationModel.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerIdentificationModel.js ***!
  \******************************************************************************************************************/
/*! exports provided: SpeakerIdentificationModel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeakerIdentificationModel", function() { return SpeakerIdentificationModel; });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * Defines SpeakerIdentificationModel class for Speaker Recognition
 * Model contains a set of profiles against which to identify speaker(s)
 * @class SpeakerIdentificationModel
 */
class SpeakerIdentificationModel {
    constructor(profiles) {
        this.privVoiceProfiles = [];
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrUndefined(profiles, "VoiceProfiles");
        if (profiles.length === 0) {
            throw new Error("Empty Voice Profiles array");
        }
        profiles.forEach((profile) => {
            if (profile.profileType !== _Exports__WEBPACK_IMPORTED_MODULE_1__["VoiceProfileType"].TextIndependentIdentification) {
                throw new Error("Identification model can only be created from Identification profile: " + profile.profileId);
            }
            this.privVoiceProfiles.push(profile);
        });
    }
    static fromProfiles(profiles) {
        return new SpeakerIdentificationModel(profiles);
    }
    get voiceProfileIds() {
        return this.privVoiceProfiles.map((profile) => profile.profileId).join(",");
    }
}

//# sourceMappingURL=SpeakerIdentificationModel.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerRecognitionResult.js":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerRecognitionResult.js ***!
  \****************************************************************************************************************/
/*! exports provided: SpeakerRecognitionResultType, SpeakerRecognitionResult, SpeakerRecognitionCancellationDetails */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeakerRecognitionResultType", function() { return SpeakerRecognitionResultType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeakerRecognitionResult", function() { return SpeakerRecognitionResult; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeakerRecognitionCancellationDetails", function() { return SpeakerRecognitionCancellationDetails; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */



var SpeakerRecognitionResultType;
(function (SpeakerRecognitionResultType) {
    SpeakerRecognitionResultType[SpeakerRecognitionResultType["Verify"] = 0] = "Verify";
    SpeakerRecognitionResultType[SpeakerRecognitionResultType["Identify"] = 1] = "Identify";
})(SpeakerRecognitionResultType || (SpeakerRecognitionResultType = {}));
/**
 * Output format
 * @class SpeakerRecognitionResult
 */
class SpeakerRecognitionResult {
    constructor(resultType, data, profileId, resultReason = _Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"].RecognizedSpeaker) {
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyCollection"]();
        this.privReason = resultReason;
        if (this.privReason !== _Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"].Canceled) {
            if (resultType === SpeakerRecognitionResultType.Identify) {
                const json = JSON.parse(data);
                _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrUndefined(json, "JSON");
                this.privProfileId = json.identifiedProfile.profileId;
                this.privScore = json.identifiedProfile.score;
            }
            else {
                const json = JSON.parse(data);
                _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrUndefined(json, "JSON");
                this.privScore = json.score;
                if (json.recognitionResult.toLowerCase() !== "accept") {
                    this.privReason = _Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"].NoMatch;
                }
                if (profileId !== undefined && profileId !== "") {
                    this.privProfileId = profileId;
                }
            }
        }
        else {
            const json = JSON.parse(data);
            _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrUndefined(json, "JSON");
            this.privErrorDetails = json.statusText;
            this.privProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCodePropertyName"], _Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"][_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].ServiceError]);
        }
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceResponse_JsonResult, data);
    }
    get properties() {
        return this.privProperties;
    }
    get reason() {
        return this.privReason;
    }
    get profileId() {
        return this.privProfileId;
    }
    get errorDetails() {
        return this.privErrorDetails;
    }
    get score() {
        return this.privScore;
    }
}
/**
 * @class SpeakerRecognitionCancellationDetails
 */
class SpeakerRecognitionCancellationDetails extends _Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationDetailsBase"] {
    constructor(reason, errorDetails, errorCode) {
        super(reason, errorDetails, errorCode);
    }
    /**
     * Creates an instance of SpeakerRecognitionCancellationDetails object for the canceled SpeakerRecognitionResult
     * @member SpeakerRecognitionCancellationDetails.fromResult
     * @function
     * @public
     * @param {SpeakerRecognitionResult} result - The result that was canceled.
     * @returns {SpeakerRecognitionCancellationDetails} The cancellation details object being created.
     */
    static fromResult(result) {
        const reason = _Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].Error;
        let errorCode = _Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].NoError;
        if (!!result.properties) {
            errorCode = _Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"][result.properties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCodePropertyName"], _Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"][_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].NoError])];
        }
        return new SpeakerRecognitionCancellationDetails(reason, result.errorDetails, errorCode);
    }
}

//# sourceMappingURL=SpeakerRecognitionResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerRecognizer.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerRecognizer.js ***!
  \*********************************************************************************************************/
/*! exports provided: SpeakerRecognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeakerRecognizer", function() { return SpeakerRecognizer; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



/**
 * Defines SpeakerRecognizer class for Speaker Recognition
 * Handles operations from user for Voice Profile operations (e.g. createProfile, deleteProfile)
 * @class SpeakerRecognizer
 */
class SpeakerRecognizer {
    /**
     * SpeakerRecognizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - An set of initial properties for this recognizer (authentication key, region, &c)
     */
    constructor(speechConfig, audioConfig) {
        const speechConfigImpl = speechConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(speechConfigImpl, "speechConfig");
        this.privAudioConfigImpl = audioConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(this.privAudioConfigImpl, "audioConfig");
        this.privProperties = speechConfigImpl.properties.clone();
        this.implSRSetup();
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member SpeakerRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token);
    }
    /**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member SpeakerRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */
    set authorizationToken(token) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(token, "token");
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token, token);
    }
    /**
     * The collection of properties and their values defined for this SpeakerRecognizer.
     * @member SpeakerRecognizer.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this SpeakerRecognizer.
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * Get recognition result for model using given audio
     * @member SpeakerRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @async
     * @param {SpeakerIdentificationModel} model Model containing Voice Profiles to be identified
     * @param cb - Callback invoked once result is returned.
     * @param err - Callback invoked in case of an error.
     */
    recognizeOnceAsync(model) {
        return __awaiter(this, void 0, void 0, function* () {
            if (model instanceof _Exports__WEBPACK_IMPORTED_MODULE_2__["SpeakerIdentificationModel"]) {
                const responsePromise = this.privAdapter.identifySpeaker(model, this.privAudioConfigImpl);
                return this.getResult(responsePromise, _Exports__WEBPACK_IMPORTED_MODULE_2__["SpeakerRecognitionResultType"].Identify, undefined);
            }
            else if (model instanceof _Exports__WEBPACK_IMPORTED_MODULE_2__["SpeakerVerificationModel"]) {
                const responsePromise = this.privAdapter.verifySpeaker(model, this.privAudioConfigImpl);
                return this.getResult(responsePromise, _Exports__WEBPACK_IMPORTED_MODULE_2__["SpeakerRecognitionResultType"].Verify, model.voiceProfile.profileId);
            }
            else {
                throw new Error("SpeakerRecognizer.recognizeOnce: Unexpected model type");
            }
        });
    }
    /**
     * Included for compatibility
     * @member SpeakerRecognizer.prototype.close
     * @function
     * @public
     */
    close() {
        return;
    }
    // Does class setup, swiped from Recognizer.
    implSRSetup() {
        let osPlatform = (typeof window !== "undefined") ? "Browser" : "Node";
        let osName = "unknown";
        let osVersion = "unknown";
        if (typeof navigator !== "undefined") {
            osPlatform = osPlatform + "/" + navigator.platform;
            osName = navigator.userAgent;
            osVersion = navigator.appVersion;
        }
        const recognizerConfig = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeakerRecognitionConfig"](new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["Context"](new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["OS"](osPlatform, osName, osVersion)), this.privProperties);
        this.privAdapter = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeakerIdMessageAdapter"](recognizerConfig);
    }
    getResult(responsePromise, resultType, profileId) {
        return __awaiter(this, void 0, void 0, function* () {
            const response = yield responsePromise;
            return new _Exports__WEBPACK_IMPORTED_MODULE_2__["SpeakerRecognitionResult"](resultType, response.data, profileId, response.ok ? _Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"].RecognizedSpeaker : _Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"].Canceled);
        });
    }
}

//# sourceMappingURL=SpeakerRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerVerificationModel.js":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerVerificationModel.js ***!
  \****************************************************************************************************************/
/*! exports provided: SpeakerVerificationModel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeakerVerificationModel", function() { return SpeakerVerificationModel; });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * Defines SpeakerVerificationModel class for Speaker Recognition
 * Model contains a profile against which to verify a speaker
 * @class SpeakerVerificationModel
 */
class SpeakerVerificationModel {
    constructor(profile) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrUndefined(profile, "VoiceProfile");
        if (profile.profileType === _Exports__WEBPACK_IMPORTED_MODULE_1__["VoiceProfileType"].TextIndependentIdentification) {
            throw new Error("Verification model cannot be created from Identification profile");
        }
        this.privVoiceProfile = profile;
    }
    static fromProfile(profile) {
        return new SpeakerVerificationModel(profile);
    }
    get voiceProfile() {
        return this.privVoiceProfile;
    }
}

//# sourceMappingURL=SpeakerVerificationModel.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechConfig.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechConfig.js ***!
  \****************************************************************************************************/
/*! exports provided: SpeechConfig, SpeechConfigImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechConfig", function() { return SpeechConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechConfigImpl", function() { return SpeechConfigImpl; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */



/**
 * Speech configuration.
 * @class SpeechConfig
 */
class SpeechConfig {
    /**
     * Creates and initializes an instance.
     * @constructor
     */
    constructor() {
        return;
    }
    /**
     * Static instance of SpeechConfig returned by passing subscriptionKey and service region.
     * Note: Please use your LanguageUnderstanding subscription key in case you want to use the Intent recognizer.
     * @member SpeechConfig.fromSubscription
     * @function
     * @public
     * @param {string} subscriptionKey - The subscription key.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechConfig} The speech factory
     */
    static fromSubscription(subscriptionKey, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(subscriptionKey, "subscriptionKey");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(region, "region");
        const speechImpl = new SpeechConfigImpl();
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region, region);
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_IntentRegion, region);
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key, subscriptionKey);
        return speechImpl;
    }
    /**
     * Creates an instance of the speech config with specified endpoint and subscription key.
     * This method is intended only for users who use a non-standard service endpoint or parameters.
     * Note: Please use your LanguageUnderstanding subscription key in case you want to use the Intent recognizer.
     * Note: The query parameters specified in the endpoint URL are not changed, even if they are set by any other APIs.
     * For example, if language is defined in the uri as query parameter "language=de-DE", and also set by
     * SpeechConfig.speechRecognitionLanguage = "en-US", the language setting in uri takes precedence,
     * and the effective language is "de-DE". Only the parameters that are not specified in the
     * endpoint URL can be set by other APIs.
     * Note: To use authorization token with fromEndpoint, pass an empty string to the subscriptionKey in the
     * fromEndpoint method, and then set authorizationToken="token" on the created SpeechConfig instance to
     * use the authorization token.
     * @member SpeechConfig.fromEndpoint
     * @function
     * @public
     * @param {URL} endpoint - The service endpoint to connect to.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization token must be set.
     * @returns {SpeechConfig} A speech factory instance.
     */
    static fromEndpoint(endpoint, subscriptionKey) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(endpoint, "endpoint");
        const speechImpl = new SpeechConfigImpl();
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Endpoint, endpoint.href);
        if (undefined !== subscriptionKey) {
            speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key, subscriptionKey);
        }
        return speechImpl;
    }
    /**
     * Creates an instance of the speech config with specified host and subscription key.
     * This method is intended only for users who use a non-default service host. Standard resource path will be assumed.
     * For services with a non-standard resource path or no path at all, use fromEndpoint instead.
     * Note: Query parameters are not allowed in the host URI and must be set by other APIs.
     * Note: To use an authorization token with fromHost, use fromHost(URL),
     * and then set the AuthorizationToken property on the created SpeechConfig instance.
     * Note: Added in version 1.9.0.
     * @member SpeechConfig.fromHost
     * @function
     * @public
     * @param {URL} host - The service endpoint to connect to. Format is "protocol://host:port" where ":port" is optional.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization token must be set.
     * @returns {SpeechConfig} A speech factory instance.
     */
    static fromHost(hostName, subscriptionKey) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(hostName, "hostName");
        const speechImpl = new SpeechConfigImpl();
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Host, hostName.protocol + "//" + hostName.hostname + (hostName.port === "" ? "" : ":" + hostName.port));
        if (undefined !== subscriptionKey) {
            speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key, subscriptionKey);
        }
        return speechImpl;
    }
    /**
     * Creates an instance of the speech factory with specified initial authorization token and region.
     * Note: The caller needs to ensure that the authorization token is valid. Before the authorization token
     * expires, the caller needs to refresh it by calling this setter with a new valid token.
     * Note: Please use a token derived from your LanguageUnderstanding subscription key in case you want
     * to use the Intent recognizer. As configuration values are copied when creating a new recognizer,
     * the new token value will not apply to recognizers that have already been created. For recognizers
     * that have been created before, you need to set authorization token of the corresponding recognizer
     * to refresh the token. Otherwise, the recognizers will encounter errors during recognition.
     * @member SpeechConfig.fromAuthorizationToken
     * @function
     * @public
     * @param {string} authorizationToken - The initial authorization token.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechConfig} A speech factory instance.
     */
    static fromAuthorizationToken(authorizationToken, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(authorizationToken, "authorizationToken");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(region, "region");
        const speechImpl = new SpeechConfigImpl();
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region, region);
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_IntentRegion, region);
        speechImpl.authorizationToken = authorizationToken;
        return speechImpl;
    }
    /**
     * Closes the configuration.
     * @member SpeechConfig.prototype.close
     * @function
     * @public
     */
    // eslint-disable-next-line @typescript-eslint/no-empty-function
    close() { }
}
/**
 * @public
 * @class SpeechConfigImpl
 */
class SpeechConfigImpl extends SpeechConfig {
    constructor() {
        super();
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyCollection"]();
        this.speechRecognitionLanguage = "en-US"; // Should we have a default?
        this.outputFormat = _Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"].Simple;
    }
    get properties() {
        return this.privProperties;
    }
    get endPoint() {
        return new URL(this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Endpoint));
    }
    get subscriptionKey() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key);
    }
    get region() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region);
    }
    get authorizationToken() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token);
    }
    set authorizationToken(value) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token, value);
    }
    get speechRecognitionLanguage() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage);
    }
    set speechRecognitionLanguage(value) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage, value);
    }
    get autoDetectSourceLanguages() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_AutoDetectSourceLanguages);
    }
    set autoDetectSourceLanguages(value) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_AutoDetectSourceLanguages, value);
    }
    get outputFormat() {
        return _Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"][this.privProperties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["OutputFormatPropertyName"], undefined)];
    }
    set outputFormat(value) {
        this.privProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["OutputFormatPropertyName"], _Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"][value]);
    }
    get endpointId() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_EndpointId);
    }
    set endpointId(value) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_EndpointId, value);
    }
    setProperty(name, value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(value, "value");
        this.privProperties.setProperty(name, value);
    }
    getProperty(name, def) {
        return this.privProperties.getProperty(name, def);
    }
    setProxy(proxyHostName, proxyPort, proxyUserName, proxyPassword) {
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_ProxyHostName], proxyHostName);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_ProxyPort], proxyPort);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_ProxyUserName], proxyUserName);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_ProxyPassword], proxyPassword);
    }
    setServiceProperty(name, value) {
        const currentProperties = JSON.parse(this.privProperties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ServicePropertiesPropertyName"], "{}"));
        currentProperties[name] = value;
        this.privProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ServicePropertiesPropertyName"], JSON.stringify(currentProperties));
    }
    setProfanity(profanity) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceResponse_ProfanityOption, _Exports__WEBPACK_IMPORTED_MODULE_2__["ProfanityOption"][profanity]);
    }
    enableAudioLogging() {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_EnableAudioLogging, "true");
    }
    requestWordLevelTimestamps() {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceResponse_RequestWordLevelTimestamps, "true");
    }
    enableDictation() {
        this.privProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ForceDictationPropertyName"], "true");
    }
    clone() {
        const ret = new SpeechConfigImpl();
        ret.privProperties = this.privProperties.clone();
        return ret;
    }
    get speechSynthesisLanguage() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_SynthLanguage);
    }
    set speechSynthesisLanguage(language) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_SynthLanguage, language);
    }
    get speechSynthesisVoiceName() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_SynthVoice);
    }
    set speechSynthesisVoiceName(voice) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_SynthVoice, voice);
    }
    get speechSynthesisOutputFormat() {
        return _Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechSynthesisOutputFormat"][this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_SynthOutputFormat, undefined)];
    }
    set speechSynthesisOutputFormat(format) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_SynthOutputFormat, _Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechSynthesisOutputFormat"][format]);
    }
}

//# sourceMappingURL=SpeechConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionCanceledEventArgs.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionCanceledEventArgs.js ***!
  \**************************************************************************************************************************/
/*! exports provided: SpeechRecognitionCanceledEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionCanceledEventArgs", function() { return SpeechRecognitionCanceledEventArgs; });
/* harmony import */ var _CancellationEventArgsBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CancellationEventArgsBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationEventArgsBase.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class SpeechRecognitionCanceledEventArgs extends _CancellationEventArgsBase__WEBPACK_IMPORTED_MODULE_0__["CancellationEventArgsBase"] {
}

//# sourceMappingURL=SpeechRecognitionCanceledEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionEventArgs.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionEventArgs.js ***!
  \******************************************************************************************************************/
/*! exports provided: SpeechRecognitionEventArgs, ConversationTranscriptionEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionEventArgs", function() { return SpeechRecognitionEventArgs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationTranscriptionEventArgs", function() { return ConversationTranscriptionEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */

/**
 * Defines contents of speech recognizing/recognized event.
 * @class SpeechRecognitionEventArgs
 */
class SpeechRecognitionEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionEventArgs"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {SpeechRecognitionResult} result - The speech recognition result.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */
    constructor(result, offset, sessionId) {
        super(offset, sessionId);
        this.privResult = result;
    }
    /**
     * Specifies the recognition result.
     * @member SpeechRecognitionEventArgs.prototype.result
     * @function
     * @public
     * @returns {SpeechRecognitionResult} the recognition result.
     */
    get result() {
        return this.privResult;
    }
}
/**
 * Defines contents of conversation transcribed/transcribing event.
 * @class ConversationTranscriptionEventArgs
 */
class ConversationTranscriptionEventArgs extends SpeechRecognitionEventArgs {
}

//# sourceMappingURL=SpeechRecognitionEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionResult.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionResult.js ***!
  \***************************************************************************************************************/
/*! exports provided: SpeechRecognitionResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionResult", function() { return SpeechRecognitionResult; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Defines result of speech recognition.
 * @class SpeechRecognitionResult
 */
class SpeechRecognitionResult extends _Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionResult"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @public
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} language - Primary Language detected, if provided.
     * @param {string} languageDetectionConfidence - Primary Language confidence ("Unknown," "Low," "Medium," "High"...), if provided.
     * @param {string} speakerId - speaker id for conversation transcription, if provided.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */
    constructor(resultId, reason, text, duration, offset, language, languageDetectionConfidence, speakerId, errorDetails, json, properties) {
        super(resultId, reason, text, duration, offset, language, languageDetectionConfidence, errorDetails, json, properties);
        this.privSpeakerId = speakerId;
    }
    /**
     * speaker id from conversation transcription/id scenarios
     * @member SpeechRecognitionResult.prototype.speakerId
     * @function
     * @public
     * @returns {string} id of speaker in given result
     */
    get speakerId() {
        return this.privSpeakerId;
    }
}

//# sourceMappingURL=SpeechRecognitionResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognizer.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognizer.js ***!
  \********************************************************************************************************/
/*! exports provided: SpeechRecognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognizer", function() { return SpeechRecognizer; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




/**
 * Performs speech recognition from microphone, file, or other audio input streams, and gets transcribed text as result.
 * @class SpeechRecognizer
 */
class SpeechRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_3__["Recognizer"] {
    /**
     * SpeechRecognizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - an set of initial properties for this recognizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */
    constructor(speechConfig, audioConfig) {
        const speechConfigImpl = speechConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNull(speechConfigImpl, "speechConfig");
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(speechConfigImpl.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_RecoLanguage), _Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_RecoLanguage]);
        super(audioConfig, speechConfigImpl.properties, new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechConnectionFactory"]());
        this.privDisposedRecognizer = false;
    }
    /**
     * SpeechRecognizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - an set of initial properties for this recognizer
     * @param {AutoDetectSourceLanguageConfig} autoDetectSourceLanguageConfig - An source language detection configuration associated with the recognizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */
    static FromConfig(speechConfig, autoDetectSourceLanguageConfig, audioConfig) {
        const speechConfigImpl = speechConfig;
        autoDetectSourceLanguageConfig.properties.mergeTo(speechConfigImpl.properties);
        const recognizer = new SpeechRecognizer(speechConfig, audioConfig);
        return recognizer;
    }
    /**
     * Gets the endpoint id of a customized speech model that is used for speech recognition.
     * @member SpeechRecognizer.prototype.endpointId
     * @function
     * @public
     * @returns {string} the endpoint id of a customized speech model that is used for speech recognition.
     */
    get endpointId() {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposedRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_EndpointId, "00000000-0000-0000-0000-000000000000");
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member SpeechRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceAuthorization_Token);
    }
    /**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member SpeechRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */
    set authorizationToken(token) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(token, "token");
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceAuthorization_Token, token);
    }
    /**
     * Gets the spoken language of recognition.
     * @member SpeechRecognizer.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @returns {string} The spoken language of recognition.
     */
    get speechRecognitionLanguage() {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposedRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_RecoLanguage);
    }
    /**
     * Gets the output format of recognition.
     * @member SpeechRecognizer.prototype.outputFormat
     * @function
     * @public
     * @returns {OutputFormat} The output format of recognition.
     */
    get outputFormat() {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposedRecognizer);
        if (this.properties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["OutputFormatPropertyName"], _Exports__WEBPACK_IMPORTED_MODULE_3__["OutputFormat"][_Exports__WEBPACK_IMPORTED_MODULE_3__["OutputFormat"].Simple]) === _Exports__WEBPACK_IMPORTED_MODULE_3__["OutputFormat"][_Exports__WEBPACK_IMPORTED_MODULE_3__["OutputFormat"].Simple]) {
            return _Exports__WEBPACK_IMPORTED_MODULE_3__["OutputFormat"].Simple;
        }
        else {
            return _Exports__WEBPACK_IMPORTED_MODULE_3__["OutputFormat"].Detailed;
        }
    }
    /**
     * The collection of properties and their values defined for this SpeechRecognizer.
     * @member SpeechRecognizer.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this SpeechRecognizer.
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * Starts speech recognition, and stops after the first utterance is recognized.
     * The task returns the recognition text as result.
     * Note: RecognizeOnceAsync() returns when the first utterance has been recognized,
     * so it is suitable only for single shot recognition
     * like command or query. For long-running recognition, use StartContinuousRecognitionAsync() instead.
     * @member SpeechRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the SpeechRecognitionResult.
     * @param err - Callback invoked in case of an error.
     */
    recognizeOnceAsync(cb, err) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.recognizeOnceAsyncImpl(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionMode"].Interactive), cb, err);
    }
    /**
     * Starts speech recognition, until stopContinuousRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * @member SpeechRecognizer.prototype.startContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */
    startContinuousRecognitionAsync(cb, err) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.startContinuousRecognitionAsyncImpl(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionMode"].Conversation), cb, err);
    }
    /**
     * Stops continuous speech recognition.
     * @member SpeechRecognizer.prototype.stopContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */
    stopContinuousRecognitionAsync(cb, err) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.stopContinuousRecognitionAsyncImpl(), cb, err);
    }
    /**
     * Starts speech recognition with keyword spotting, until
     * stopKeywordRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * Note: Key word spotting functionality is only available on the
     * Speech Devices SDK. This functionality is currently not included in the SDK itself.
     * @member SpeechRecognizer.prototype.startKeywordRecognitionAsync
     * @function
     * @public
     * @param {KeywordRecognitionModel} model The keyword recognition model that
     * specifies the keyword to be recognized.
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */
    startKeywordRecognitionAsync(model, cb, err) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNull(model, "model");
        if (!!err) {
            err("Not yet implemented.");
        }
    }
    /**
     * Stops continuous speech recognition.
     * Note: Key word spotting functionality is only available on the
     * Speech Devices SDK. This functionality is currently not included in the SDK itself.
     * @member SpeechRecognizer.prototype.stopKeywordRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */
    stopKeywordRecognitionAsync(cb) {
        if (!!cb) {
            cb();
        }
    }
    /**
     * closes all external resources held by an instance of this class.
     * @member SpeechRecognizer.prototype.close
     * @function
     * @public
     */
    close(cb, errorCb) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposedRecognizer);
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.dispose(true), cb, errorCb);
    }
    /**
     * Disposes any resources held by the object.
     * @member SpeechRecognizer.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - true if disposing the object.
     */
    dispose(disposing) {
        const _super = Object.create(null, {
            dispose: { get: () => super.dispose }
        });
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privDisposedRecognizer) {
                return;
            }
            if (disposing) {
                this.privDisposedRecognizer = true;
                yield this.implRecognizerStop();
            }
            yield _super.dispose.call(this, disposing);
        });
    }
    createRecognizerConfig(speechConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognizerConfig"](speechConfig, this.properties);
    }
    createServiceRecognizer(authentication, connectionFactory, audioConfig, recognizerConfig) {
        const configImpl = audioConfig;
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechServiceRecognizer"](authentication, connectionFactory, configImpl, recognizerConfig, this);
    }
}

//# sourceMappingURL=SpeechRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisBookmarkEventArgs.js":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisBookmarkEventArgs.js ***!
  \************************************************************************************************************************/
/*! exports provided: SpeechSynthesisBookmarkEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisBookmarkEventArgs", function() { return SpeechSynthesisBookmarkEventArgs; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines contents of speech synthesis bookmark event.
 * @class SpeechSynthesisBookmarkEventArgs
 * Added in version 1.16.0
 */
class SpeechSynthesisBookmarkEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} audioOffset - The audio offset.
     * @param {string} text - The bookmark text.
     */
    constructor(audioOffset, text) {
        this.privAudioOffset = audioOffset;
        this.privText = text;
    }
    /**
     * Specifies the audio offset.
     * @member SpeechSynthesisBookmarkEventArgs.prototype.audioOffset
     * @function
     * @public
     * @returns {number} the audio offset.
     */
    get audioOffset() {
        return this.privAudioOffset;
    }
    /**
     * Specifies the bookmark.
     * @member SpeechSynthesisBookmarkEventArgs.prototype.text
     * @function
     * @public
     * @returns {string} the bookmark text.
     */
    get text() {
        return this.privText;
    }
}

//# sourceMappingURL=SpeechSynthesisBookmarkEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisBoundaryType.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisBoundaryType.js ***!
  \*******************************************************************************************************************/
/*! exports provided: SpeechSynthesisBoundaryType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisBoundaryType", function() { return SpeechSynthesisBoundaryType; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines the boundary type of speech synthesis boundary event.
 * @class SpeechSynthesisBoundaryType
 * Added in version 1.21.0
 */
var SpeechSynthesisBoundaryType;
(function (SpeechSynthesisBoundaryType) {
    /**
     * Indicates the boundary text is a word.
     * @member SpeechSynthesisBoundaryType.Word
     */
    SpeechSynthesisBoundaryType["Word"] = "WordBoundary";
    /**
     * Indicates the boundary text is a punctuation.
     * @member SpeechSynthesisBoundaryType.Punctuation
     */
    SpeechSynthesisBoundaryType["Punctuation"] = "PunctuationBoundary";
    /**
     * Indicates the boundary text is a sentence.
     * @member SpeechSynthesisBoundaryType.Sentence
     */
    SpeechSynthesisBoundaryType["Sentence"] = "SentenceBoundary";
})(SpeechSynthesisBoundaryType || (SpeechSynthesisBoundaryType = {}));

//# sourceMappingURL=SpeechSynthesisBoundaryType.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisEventArgs.js":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisEventArgs.js ***!
  \****************************************************************************************************************/
/*! exports provided: SpeechSynthesisEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisEventArgs", function() { return SpeechSynthesisEventArgs; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines contents of speech synthesis events.
 * @class SpeechSynthesisEventArgs
 * Added in version 1.11.0
 */
class SpeechSynthesisEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {SpeechSynthesisResult} result - The speech synthesis result.
     */
    constructor(result) {
        this.privResult = result;
    }
    /**
     * Specifies the synthesis result.
     * @member SpeechSynthesisEventArgs.prototype.result
     * @function
     * @public
     * @returns {SpeechSynthesisResult} the synthesis result.
     */
    get result() {
        return this.privResult;
    }
}

//# sourceMappingURL=SpeechSynthesisEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisOutputFormat.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisOutputFormat.js ***!
  \*******************************************************************************************************************/
/*! exports provided: SpeechSynthesisOutputFormat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisOutputFormat", function() { return SpeechSynthesisOutputFormat; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Define speech synthesis audio output formats.
 * @enum SpeechSynthesisOutputFormat
 * Updated in version 1.17.0
 */
var SpeechSynthesisOutputFormat;
(function (SpeechSynthesisOutputFormat) {
    /**
     * raw-8khz-8bit-mono-mulaw
     * @member SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw,
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw8Khz8BitMonoMULaw"] = 0] = "Raw8Khz8BitMonoMULaw";
    /**
     * riff-16khz-16kbps-mono-siren
     * @note Unsupported by the service. Do not use this value.
     * @member SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff16Khz16KbpsMonoSiren"] = 1] = "Riff16Khz16KbpsMonoSiren";
    /**
     * audio-16khz-16kbps-mono-siren
     * @note Unsupported by the service. Do not use this value.
     * @member SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio16Khz16KbpsMonoSiren"] = 2] = "Audio16Khz16KbpsMonoSiren";
    /**
     * audio-16khz-32kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio16Khz32KBitRateMonoMp3"] = 3] = "Audio16Khz32KBitRateMonoMp3";
    /**
     * audio-16khz-128kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio16Khz128KBitRateMonoMp3"] = 4] = "Audio16Khz128KBitRateMonoMp3";
    /**
     * audio-16khz-64kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio16Khz64KBitRateMonoMp3"] = 5] = "Audio16Khz64KBitRateMonoMp3";
    /**
     * audio-24khz-48kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio24Khz48KBitRateMonoMp3"] = 6] = "Audio24Khz48KBitRateMonoMp3";
    /**
     * audio-24khz-96kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio24Khz96KBitRateMonoMp3"] = 7] = "Audio24Khz96KBitRateMonoMp3";
    /**
     * audio-24khz-160kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio24Khz160KBitRateMonoMp3"] = 8] = "Audio24Khz160KBitRateMonoMp3";
    /**
     * raw-16khz-16bit-mono-truesilk
     * @member SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw16Khz16BitMonoTrueSilk"] = 9] = "Raw16Khz16BitMonoTrueSilk";
    /**
     * riff-16khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff16Khz16BitMonoPcm"] = 10] = "Riff16Khz16BitMonoPcm";
    /**
     * riff-8khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff8Khz16BitMonoPcm"] = 11] = "Riff8Khz16BitMonoPcm";
    /**
     * riff-24khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff24Khz16BitMonoPcm"] = 12] = "Riff24Khz16BitMonoPcm";
    /**
     * riff-8khz-8bit-mono-mulaw
     * @member SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff8Khz8BitMonoMULaw"] = 13] = "Riff8Khz8BitMonoMULaw";
    /**
     * raw-16khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw16Khz16BitMonoPcm"] = 14] = "Raw16Khz16BitMonoPcm";
    /**
     * raw-24khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw24Khz16BitMonoPcm"] = 15] = "Raw24Khz16BitMonoPcm";
    /**
     * raw-8khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw8Khz16BitMonoPcm"] = 16] = "Raw8Khz16BitMonoPcm";
    /**
     * ogg-16khz-16bit-mono-opus
     * @member SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Ogg16Khz16BitMonoOpus"] = 17] = "Ogg16Khz16BitMonoOpus";
    /**
     * ogg-24khz-16bit-mono-opus
     * @member SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Ogg24Khz16BitMonoOpus"] = 18] = "Ogg24Khz16BitMonoOpus";
    /**
     * raw-48khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw48Khz16BitMonoPcm"] = 19] = "Raw48Khz16BitMonoPcm";
    /**
     * riff-48khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff48Khz16BitMonoPcm"] = 20] = "Riff48Khz16BitMonoPcm";
    /**
     * audio-48khz-96kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio48Khz96KBitRateMonoMp3"] = 21] = "Audio48Khz96KBitRateMonoMp3";
    /**
     * audio-48khz-192kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio48Khz192KBitRateMonoMp3"] = 22] = "Audio48Khz192KBitRateMonoMp3";
    /**
     * ogg-48khz-16bit-mono-opus
     * Added in version 1.16.0
     * @member SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Ogg48Khz16BitMonoOpus"] = 23] = "Ogg48Khz16BitMonoOpus";
    /**
     * webm-16khz-16bit-mono-opus
     * Added in version 1.16.0
     * @member SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Webm16Khz16BitMonoOpus"] = 24] = "Webm16Khz16BitMonoOpus";
    /**
     * webm-24khz-16bit-mono-opus
     * Added in version 1.16.0
     * @member SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Webm24Khz16BitMonoOpus"] = 25] = "Webm24Khz16BitMonoOpus";
    /**
     * raw-24khz-16bit-mono-truesilk
     * Added in version 1.17.0
     * @member SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw24Khz16BitMonoTrueSilk"] = 26] = "Raw24Khz16BitMonoTrueSilk";
    /**
     * raw-8khz-8bit-mono-alaw
     * Added in version 1.17.0
     * @member SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw8Khz8BitMonoALaw"] = 27] = "Raw8Khz8BitMonoALaw";
    /**
     * riff-8khz-8bit-mono-alaw
     * Added in version 1.17.0
     * @member SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff8Khz8BitMonoALaw"] = 28] = "Riff8Khz8BitMonoALaw";
    /**
     * webm-24khz-16bit-24kbps-mono-opus
     * Audio compressed by OPUS codec in a webm container, with bitrate of 24kbps, optimized for IoT scenario.
     * Added in version 1.19.0
     * @member SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Webm24Khz16Bit24KbpsMonoOpus"] = 29] = "Webm24Khz16Bit24KbpsMonoOpus";
    /**
     * audio-16khz-16bit-32kbps-mono-opus
     * Audio compressed by OPUS codec without container, with bitrate of 32kbps.
     * Added in version 1.20.0
     * @member SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio16Khz16Bit32KbpsMonoOpus"] = 30] = "Audio16Khz16Bit32KbpsMonoOpus";
    /**
     * audio-24khz-16bit-48kbps-mono-opus
     * Audio compressed by OPUS codec without container, with bitrate of 48kbps.
     * Added in version 1.20.0
     * @member SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio24Khz16Bit48KbpsMonoOpus"] = 31] = "Audio24Khz16Bit48KbpsMonoOpus";
    /**
     * audio-24khz-16bit-24kbps-mono-opus
     * Audio compressed by OPUS codec without container, with bitrate of 24kbps.
     * Added in version 1.20.0
     * @member SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio24Khz16Bit24KbpsMonoOpus"] = 32] = "Audio24Khz16Bit24KbpsMonoOpus";
    /**
     * raw-22050hz-16bit-mono-pcm
     * Raw PCM audio at 22050Hz sampling rate and 16-bit depth.
     * Added in version 1.22.0
     * @member SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw22050Hz16BitMonoPcm"] = 33] = "Raw22050Hz16BitMonoPcm";
    /**
     * riff-22050hz-16bit-mono-pcm
     * PCM audio at 22050Hz sampling rate and 16-bit depth, with RIFF header.
     * Added in version 1.22.0
     * @member SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff22050Hz16BitMonoPcm"] = 34] = "Riff22050Hz16BitMonoPcm";
    /**
     * raw-44100hz-16bit-mono-pcm
     * Raw PCM audio at 44100Hz sampling rate and 16-bit depth.
     * Added in version 1.22.0
     * @member SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw44100Hz16BitMonoPcm"] = 35] = "Raw44100Hz16BitMonoPcm";
    /**
     * riff-44100hz-16bit-mono-pcm
     * PCM audio at 44100Hz sampling rate and 16-bit depth, with RIFF header.
     * Added in version 1.22.0
     * @member SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff44100Hz16BitMonoPcm"] = 36] = "Riff44100Hz16BitMonoPcm";
})(SpeechSynthesisOutputFormat || (SpeechSynthesisOutputFormat = {}));

//# sourceMappingURL=SpeechSynthesisOutputFormat.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisResult.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisResult.js ***!
  \*************************************************************************************************************/
/*! exports provided: SpeechSynthesisResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisResult", function() { return SpeechSynthesisResult; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Defines result of speech synthesis.
 * @class SpeechSynthesisResult
 * Added in version 1.11.0
 */
class SpeechSynthesisResult extends _Exports__WEBPACK_IMPORTED_MODULE_0__["SynthesisResult"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {ArrayBuffer} audioData - The synthesized audio binary.
     * @param {string} errorDetails - Error details, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     * @param {number} audioDuration - The audio duration.
     */
    constructor(resultId, reason, audioData, errorDetails, properties, audioDuration) {
        super(resultId, reason, errorDetails, properties);
        this.privAudioData = audioData;
        this.privAudioDuration = audioDuration;
    }
    /**
     * The synthesized audio data
     * @member SpeechSynthesisResult.prototype.audioData
     * @function
     * @public
     * @returns {ArrayBuffer} The synthesized audio data.
     */
    get audioData() {
        return this.privAudioData;
    }
    /**
     * The time duration of synthesized audio, in ticks (100 nanoseconds).
     * @member SpeechSynthesisResult.prototype.audioDuration
     * @function
     * @public
     * @returns {number} The time duration of synthesized audio.
     */
    get audioDuration() {
        return this.privAudioDuration;
    }
}

//# sourceMappingURL=SpeechSynthesisResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisVisemeEventArgs.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisVisemeEventArgs.js ***!
  \**********************************************************************************************************************/
/*! exports provided: SpeechSynthesisVisemeEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisVisemeEventArgs", function() { return SpeechSynthesisVisemeEventArgs; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines contents of speech synthesis viseme event.
 * @class SpeechSynthesisVisemeEventArgs
 * Added in version 1.16.0
 */
class SpeechSynthesisVisemeEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} audioOffset - The audio offset.
     * @param {number} visemeId - The viseme ID.
     * @param {string} animation - The animation, could be in svg or other format.
     */
    constructor(audioOffset, visemeId, animation) {
        this.privAudioOffset = audioOffset;
        this.privVisemeId = visemeId;
        this.privAnimation = animation;
    }
    /**
     * Specifies the audio offset.
     * @member SpeechSynthesisVisemeEventArgs.prototype.audioOffset
     * @function
     * @public
     * @returns {number} the audio offset.
     */
    get audioOffset() {
        return this.privAudioOffset;
    }
    /**
     * Specifies the viseme ID.
     * @member SpeechSynthesisVisemeEventArgs.prototype.visemeId
     * @function
     * @public
     * @returns {number} the viseme ID.
     */
    get visemeId() {
        return this.privVisemeId;
    }
    /**
     * Specifies the animation.
     * @member SpeechSynthesisVisemeEventArgs.prototype.animation
     * @function
     * @public
     * @returns {string} the animation, could be in svg or other format.
     */
    get animation() {
        return this.privAnimation;
    }
}

//# sourceMappingURL=SpeechSynthesisVisemeEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisWordBoundaryEventArgs.js":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisWordBoundaryEventArgs.js ***!
  \****************************************************************************************************************************/
/*! exports provided: SpeechSynthesisWordBoundaryEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesisWordBoundaryEventArgs", function() { return SpeechSynthesisWordBoundaryEventArgs; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines contents of speech synthesis word boundary event.
 * @class SpeechSynthesisWordBoundaryEventArgs
 * Added in version 1.11.0
 */
class SpeechSynthesisWordBoundaryEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} audioOffset - The audio offset.
     * @param {number} duration - The audio duration.
     * @param {string} text - The text.
     * @param {number} wordLength - The length of the word.
     * @param {number} textOffset - The text offset.
     * @param {SpeechSynthesisBoundaryType} boundaryType - The boundary type
     */
    constructor(audioOffset, duration, text, wordLength, textOffset, boundaryType) {
        this.privAudioOffset = audioOffset;
        this.privDuration = duration;
        this.privText = text;
        this.privWordLength = wordLength;
        this.privTextOffset = textOffset;
        this.privBoundaryType = boundaryType;
    }
    /**
     * Specifies the audio offset.
     * @member SpeechSynthesisWordBoundaryEventArgs.prototype.audioOffset
     * @function
     * @public
     * @returns {number} the audio offset.
     */
    get audioOffset() {
        return this.privAudioOffset;
    }
    /**
     * Specifies the duration, in ticks (100 nanoseconds).
     * @member SpeechSynthesisWordBoundaryEventArgs.prototype.duration
     * @function
     * @public
     * @returns {number} Duration in 100 nanosecond increments.
     */
    get duration() {
        return this.privDuration;
    }
    /**
     * Specifies the text of the word boundary event.
     * @member SpeechSynthesisWordBoundaryEventArgs.prototype.text
     * @function
     * @public
     * @returns {string} the text.
     */
    get text() {
        return this.privText;
    }
    /**
     * Specifies the word length
     * @member SpeechSynthesisWordBoundaryEventArgs.prototype.wordLength
     * @function
     * @public
     * @returns {number} the word length
     */
    get wordLength() {
        return this.privWordLength;
    }
    /**
     * Specifies the text offset.
     * @member SpeechSynthesisWordBoundaryEventArgs.prototype.textOffset
     * @function
     * @public
     * @returns {number} the text offset.
     */
    get textOffset() {
        return this.privTextOffset;
    }
    /**
     * Specifies the boundary type.
     * @member SpeechSynthesisWordBoundaryEventArgs.prototype.boundaryType
     * @function
     * @public
     * @returns {SpeechSynthesisBoundaryType} the boundary type.
     */
    get boundaryType() {
        return this.privBoundaryType;
    }
}

//# sourceMappingURL=SpeechSynthesisWordBoundaryEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesizer.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesizer.js ***!
  \*********************************************************************************************************/
/*! exports provided: SpeechSynthesizer, SynthesisRequest */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechSynthesizer", function() { return SpeechSynthesizer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SynthesisRequest", function() { return SynthesisRequest; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _Audio_AudioFileWriter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Audio/AudioFileWriter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioFileWriter.js");
/* harmony import */ var _Audio_AudioOutputFormat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Audio/AudioOutputFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputFormat.js");
/* harmony import */ var _Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Audio/AudioOutputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* eslint-disable @typescript-eslint/no-empty-function */
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};







/**
 * Defines the class SpeechSynthesizer for text to speech.
 * Updated in version 1.16.0
 * @class SpeechSynthesizer
 */
class SpeechSynthesizer {
    /**
     * SpeechSynthesizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - An set of initial properties for this synthesizer.
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the synthesizer.
     */
    constructor(speechConfig, audioConfig) {
        const speechConfigImpl = speechConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_5__["Contracts"].throwIfNull(speechConfigImpl, "speechConfig");
        if (audioConfig !== null) {
            if (audioConfig === undefined) {
                this.audioConfig = (typeof window === "undefined") ? undefined : _Exports__WEBPACK_IMPORTED_MODULE_6__["AudioConfig"].fromDefaultSpeakerOutput();
            }
            else {
                this.audioConfig = audioConfig;
            }
        }
        this.privProperties = speechConfigImpl.properties.clone();
        this.privDisposed = false;
        this.privSynthesizing = false;
        this.privConnectionFactory = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechSynthesisConnectionFactory"]();
        this.synthesisRequestQueue = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Queue"]();
        this.implCommonSynthesizeSetup();
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member SpeechSynthesizer.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_6__["PropertyId"].SpeechServiceAuthorization_Token);
    }
    /**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member SpeechSynthesizer.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */
    set authorizationToken(token) {
        _Contracts__WEBPACK_IMPORTED_MODULE_5__["Contracts"].throwIfNullOrWhitespace(token, "token");
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_6__["PropertyId"].SpeechServiceAuthorization_Token, token);
    }
    /**
     * The collection of properties and their values defined for this SpeechSynthesizer.
     * @member SpeechSynthesizer.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this SpeechSynthesizer.
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * Indicates if auto detect source language is enabled
     * @member SpeechSynthesizer.prototype.properties
     * @function
     * @public
     * @returns {boolean} if auto detect source language is enabled
     */
    get autoDetectSourceLanguage() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_6__["PropertyId"].SpeechServiceConnection_AutoDetectSourceLanguages) === _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["AutoDetectSourceLanguagesOpenRangeOptionName"];
    }
    /**
     * SpeechSynthesizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - an set of initial properties for this synthesizer
     * @param {AutoDetectSourceLanguageConfig} autoDetectSourceLanguageConfig - An source language detection configuration associated with the synthesizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the synthesizer
     */
    static FromConfig(speechConfig, autoDetectSourceLanguageConfig, audioConfig) {
        const speechConfigImpl = speechConfig;
        autoDetectSourceLanguageConfig.properties.mergeTo(speechConfigImpl.properties);
        return new SpeechSynthesizer(speechConfig, audioConfig);
    }
    buildSsml(text) {
        const languageToDefaultVoice = {
            ["af-ZA"]: "af-ZA-AdriNeural",
            ["am-ET"]: "am-ET-AmehaNeural",
            ["ar-AE"]: "ar-AE-FatimaNeural",
            ["ar-BH"]: "ar-BH-AliNeural",
            ["ar-DZ"]: "ar-DZ-AminaNeural",
            ["ar-EG"]: "ar-EG-SalmaNeural",
            ["ar-IQ"]: "ar-IQ-BasselNeural",
            ["ar-JO"]: "ar-JO-SanaNeural",
            ["ar-KW"]: "ar-KW-FahedNeural",
            ["ar-LY"]: "ar-LY-ImanNeural",
            ["ar-MA"]: "ar-MA-JamalNeural",
            ["ar-QA"]: "ar-QA-AmalNeural",
            ["ar-SA"]: "ar-SA-HamedNeural",
            ["ar-SY"]: "ar-SY-AmanyNeural",
            ["ar-TN"]: "ar-TN-HediNeural",
            ["ar-YE"]: "ar-YE-MaryamNeural",
            ["bg-BG"]: "bg-BG-BorislavNeural",
            ["bn-BD"]: "bn-BD-NabanitaNeural",
            ["bn-IN"]: "bn-IN-BashkarNeural",
            ["ca-ES"]: "ca-ES-JoanaNeural",
            ["cs-CZ"]: "cs-CZ-AntoninNeural",
            ["cy-GB"]: "cy-GB-AledNeural",
            ["da-DK"]: "da-DK-ChristelNeural",
            ["de-AT"]: "de-AT-IngridNeural",
            ["de-CH"]: "de-CH-JanNeural",
            ["de-DE"]: "de-DE-KatjaNeural",
            ["el-GR"]: "el-GR-AthinaNeural",
            ["en-AU"]: "en-AU-NatashaNeural",
            ["en-CA"]: "en-CA-ClaraNeural",
            ["en-GB"]: "en-GB-LibbyNeural",
            ["en-HK"]: "en-HK-SamNeural",
            ["en-IE"]: "en-IE-ConnorNeural",
            ["en-IN"]: "en-IN-NeerjaNeural",
            ["en-KE"]: "en-KE-AsiliaNeural",
            ["en-NG"]: "en-NG-AbeoNeural",
            ["en-NZ"]: "en-NZ-MitchellNeural",
            ["en-PH"]: "en-PH-JamesNeural",
            ["en-SG"]: "en-SG-LunaNeural",
            ["en-TZ"]: "en-TZ-ElimuNeural",
            ["en-US"]: "en-US-JennyNeural",
            ["en-ZA"]: "en-ZA-LeahNeural",
            ["es-AR"]: "es-AR-ElenaNeural",
            ["es-BO"]: "es-BO-MarceloNeural",
            ["es-CL"]: "es-CL-CatalinaNeural",
            ["es-CO"]: "es-CO-GonzaloNeural",
            ["es-CR"]: "es-CR-JuanNeural",
            ["es-CU"]: "es-CU-BelkysNeural",
            ["es-DO"]: "es-DO-EmilioNeural",
            ["es-EC"]: "es-EC-AndreaNeural",
            ["es-ES"]: "es-ES-AlvaroNeural",
            ["es-GQ"]: "es-GQ-JavierNeural",
            ["es-GT"]: "es-GT-AndresNeural",
            ["es-HN"]: "es-HN-CarlosNeural",
            ["es-MX"]: "es-MX-DaliaNeural",
            ["es-NI"]: "es-NI-FedericoNeural",
            ["es-PA"]: "es-PA-MargaritaNeural",
            ["es-PE"]: "es-PE-AlexNeural",
            ["es-PR"]: "es-PR-KarinaNeural",
            ["es-PY"]: "es-PY-MarioNeural",
            ["es-SV"]: "es-SV-LorenaNeural",
            ["es-US"]: "es-US-AlonsoNeural",
            ["es-UY"]: "es-UY-MateoNeural",
            ["es-VE"]: "es-VE-PaolaNeural",
            ["et-EE"]: "et-EE-AnuNeural",
            ["fa-IR"]: "fa-IR-DilaraNeural",
            ["fi-FI"]: "fi-FI-SelmaNeural",
            ["fil-PH"]: "fil-PH-AngeloNeural",
            ["fr-BE"]: "fr-BE-CharlineNeural",
            ["fr-CA"]: "fr-CA-SylvieNeural",
            ["fr-CH"]: "fr-CH-ArianeNeural",
            ["fr-FR"]: "fr-FR-DeniseNeural",
            ["ga-IE"]: "ga-IE-ColmNeural",
            ["gl-ES"]: "gl-ES-RoiNeural",
            ["gu-IN"]: "gu-IN-DhwaniNeural",
            ["he-IL"]: "he-IL-AvriNeural",
            ["hi-IN"]: "hi-IN-MadhurNeural",
            ["hr-HR"]: "hr-HR-GabrijelaNeural",
            ["hu-HU"]: "hu-HU-NoemiNeural",
            ["id-ID"]: "id-ID-ArdiNeural",
            ["is-IS"]: "is-IS-GudrunNeural",
            ["it-IT"]: "it-IT-IsabellaNeural",
            ["ja-JP"]: "ja-JP-NanamiNeural",
            ["jv-ID"]: "jv-ID-DimasNeural",
            ["kk-KZ"]: "kk-KZ-AigulNeural",
            ["km-KH"]: "km-KH-PisethNeural",
            ["kn-IN"]: "kn-IN-GaganNeural",
            ["ko-KR"]: "ko-KR-SunHiNeural",
            ["lo-LA"]: "lo-LA-ChanthavongNeural",
            ["lt-LT"]: "lt-LT-LeonasNeural",
            ["lv-LV"]: "lv-LV-EveritaNeural",
            ["mk-MK"]: "mk-MK-AleksandarNeural",
            ["ml-IN"]: "ml-IN-MidhunNeural",
            ["mr-IN"]: "mr-IN-AarohiNeural",
            ["ms-MY"]: "ms-MY-OsmanNeural",
            ["mt-MT"]: "mt-MT-GraceNeural",
            ["my-MM"]: "my-MM-NilarNeural",
            ["nb-NO"]: "nb-NO-PernilleNeural",
            ["nl-BE"]: "nl-BE-ArnaudNeural",
            ["nl-NL"]: "nl-NL-ColetteNeural",
            ["pl-PL"]: "pl-PL-AgnieszkaNeural",
            ["ps-AF"]: "ps-AF-GulNawazNeural",
            ["pt-BR"]: "pt-BR-FranciscaNeural",
            ["pt-PT"]: "pt-PT-DuarteNeural",
            ["ro-RO"]: "ro-RO-AlinaNeural",
            ["ru-RU"]: "ru-RU-SvetlanaNeural",
            ["si-LK"]: "si-LK-SameeraNeural",
            ["sk-SK"]: "sk-SK-LukasNeural",
            ["sl-SI"]: "sl-SI-PetraNeural",
            ["so-SO"]: "so-SO-MuuseNeural",
            ["sr-RS"]: "sr-RS-NicholasNeural",
            ["su-ID"]: "su-ID-JajangNeural",
            ["sv-SE"]: "sv-SE-SofieNeural",
            ["sw-KE"]: "sw-KE-RafikiNeural",
            ["sw-TZ"]: "sw-TZ-DaudiNeural",
            ["ta-IN"]: "ta-IN-PallaviNeural",
            ["ta-LK"]: "ta-LK-KumarNeural",
            ["ta-SG"]: "ta-SG-AnbuNeural",
            ["te-IN"]: "te-IN-MohanNeural",
            ["th-TH"]: "th-TH-PremwadeeNeural",
            ["tr-TR"]: "tr-TR-AhmetNeural",
            ["uk-UA"]: "uk-UA-OstapNeural",
            ["ur-IN"]: "ur-IN-GulNeural",
            ["ur-PK"]: "ur-PK-AsadNeural",
            ["uz-UZ"]: "uz-UZ-MadinaNeural",
            ["vi-VN"]: "vi-VN-HoaiMyNeural",
            ["zh-CN"]: "zh-CN-XiaoxiaoNeural",
            ["zh-HK"]: "zh-HK-HiuMaanNeural",
            ["zh-TW"]: "zh-TW-HsiaoChenNeural",
            ["zu-ZA"]: "zu-ZA-ThandoNeural",
        };
        let language = this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_6__["PropertyId"].SpeechServiceConnection_SynthLanguage, "en-US");
        let voice = this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_6__["PropertyId"].SpeechServiceConnection_SynthVoice, "");
        let ssml = SpeechSynthesizer.XMLEncode(text);
        if (this.autoDetectSourceLanguage) {
            language = "en-US";
        }
        else {
            voice = voice || languageToDefaultVoice[language];
        }
        if (voice) {
            ssml = `<voice name='${voice}'>${ssml}</voice>`;
        }
        ssml = `<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${language}'>${ssml}</speak>`;
        return ssml;
    }
    /**
     * Executes speech synthesis on plain text.
     * The task returns the synthesis result.
     * @member SpeechSynthesizer.prototype.speakTextAsync
     * @function
     * @public
     * @param text - Text to be synthesized.
     * @param cb - Callback that received the SpeechSynthesisResult.
     * @param err - Callback invoked in case of an error.
     * @param stream - AudioOutputStream to receive the synthesized audio.
     */
    speakTextAsync(text, cb, err, stream) {
        this.speakImpl(text, false, cb, err, stream);
    }
    /**
     * Executes speech synthesis on SSML.
     * The task returns the synthesis result.
     * @member SpeechSynthesizer.prototype.speakSsmlAsync
     * @function
     * @public
     * @param ssml - SSML to be synthesized.
     * @param cb - Callback that received the SpeechSynthesisResult.
     * @param err - Callback invoked in case of an error.
     * @param stream - AudioOutputStream to receive the synthesized audio.
     */
    speakSsmlAsync(ssml, cb, err, stream) {
        this.speakImpl(ssml, true, cb, err, stream);
    }
    /**
     * Get list of synthesis voices available.
     * The task returns the synthesis voice result.
     * @member SpeechSynthesizer.prototype.getVoicesAsync
     * @function
     * @async
     * @public
     * @param locale - Locale of voices in BCP-47 format; if left empty, get all available voices.
     * @return {Promise<SynthesisVoicesResult>} - Promise of a SynthesisVoicesResult.
     */
    getVoicesAsync(locale = "") {
        return __awaiter(this, void 0, void 0, function* () {
            return this.getVoices(locale);
        });
    }
    /**
     * Dispose of associated resources.
     * @member SpeechSynthesizer.prototype.close
     * @function
     * @public
     */
    close(cb, err) {
        _Contracts__WEBPACK_IMPORTED_MODULE_5__["Contracts"].throwIfDisposed(this.privDisposed);
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.dispose(true), cb, err);
    }
    /**
     * @Internal
     * Do not use externally, object returned will change without warning or notice.
     */
    get internalData() {
        return this.privAdapter;
    }
    /**
     * This method performs cleanup of resources.
     * The Boolean parameter disposing indicates whether the method is called
     * from Dispose (if disposing is true) or from the finalizer (if disposing is false).
     * Derived classes should override this method to dispose resource if needed.
     * @member SpeechSynthesizer.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - Flag to request disposal.
     */
    dispose(disposing) {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privDisposed) {
                return;
            }
            if (disposing) {
                if (this.privAdapter) {
                    yield this.privAdapter.dispose();
                }
            }
            this.privDisposed = true;
        });
    }
    //
    // ################################################################################################################
    // IMPLEMENTATION.
    // Move to independent class
    // ################################################################################################################
    //
    createSynthesizerConfig(speechConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SynthesizerConfig"](speechConfig, this.privProperties);
    }
    // Creates the synthesis adapter
    createSynthesisAdapter(authentication, connectionFactory, audioConfig, synthesizerConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SynthesisAdapterBase"](authentication, connectionFactory, synthesizerConfig, this, this.audioConfig);
    }
    implCommonSynthesizeSetup() {
        let osPlatform = (typeof window !== "undefined") ? "Browser" : "Node";
        let osName = "unknown";
        let osVersion = "unknown";
        if (typeof navigator !== "undefined") {
            osPlatform = osPlatform + "/" + navigator.platform;
            osName = navigator.userAgent;
            osVersion = navigator.appVersion;
        }
        const synthesizerConfig = this.createSynthesizerConfig(new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechServiceConfig"](new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["Context"](new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["OS"](osPlatform, osName, osVersion))));
        const subscriptionKey = this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_6__["PropertyId"].SpeechServiceConnection_Key, undefined);
        const authentication = (subscriptionKey && subscriptionKey !== "") ?
            new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["CognitiveSubscriptionKeyAuthentication"](subscriptionKey) :
            new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["CognitiveTokenAuthentication"](() => {
                const authorizationToken = this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_6__["PropertyId"].SpeechServiceAuthorization_Token, undefined);
                return Promise.resolve(authorizationToken);
            }, () => {
                const authorizationToken = this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_6__["PropertyId"].SpeechServiceAuthorization_Token, undefined);
                return Promise.resolve(authorizationToken);
            });
        this.privAdapter = this.createSynthesisAdapter(authentication, this.privConnectionFactory, this.audioConfig, synthesizerConfig);
        this.privAdapter.audioOutputFormat = _Audio_AudioOutputFormat__WEBPACK_IMPORTED_MODULE_3__["AudioOutputFormatImpl"].fromSpeechSynthesisOutputFormat(_Exports__WEBPACK_IMPORTED_MODULE_6__["SpeechSynthesisOutputFormat"][this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_6__["PropertyId"].SpeechServiceConnection_SynthOutputFormat, undefined)]);
        this.privRestAdapter = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SynthesisRestAdapter"](synthesizerConfig, authentication);
    }
    speakImpl(text, IsSsml, cb, err, dataStream) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_5__["Contracts"].throwIfDisposed(this.privDisposed);
            const requestId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["createNoDashGuid"])();
            let audioDestination;
            if (dataStream instanceof _Exports__WEBPACK_IMPORTED_MODULE_6__["PushAudioOutputStreamCallback"]) {
                audioDestination = new _Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_4__["PushAudioOutputStreamImpl"](dataStream);
            }
            else if (dataStream instanceof _Exports__WEBPACK_IMPORTED_MODULE_6__["PullAudioOutputStream"]) {
                audioDestination = dataStream;
            }
            else if (dataStream !== undefined) {
                audioDestination = new _Audio_AudioFileWriter__WEBPACK_IMPORTED_MODULE_2__["AudioFileWriter"](dataStream);
            }
            else {
                audioDestination = undefined;
            }
            this.synthesisRequestQueue.enqueue(new SynthesisRequest(requestId, text, IsSsml, (e) => {
                this.privSynthesizing = false;
                if (!!cb) {
                    try {
                        cb(e);
                    }
                    catch (e) {
                        if (!!err) {
                            err(e);
                        }
                    }
                }
                cb = undefined;
                /* eslint-disable no-empty */
                this.adapterSpeak().catch(() => { });
            }, (e) => {
                if (!!err) {
                    err(e);
                }
            }, audioDestination));
            /* eslint-disable no-empty-function */
            this.adapterSpeak().catch(() => { });
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the synthesizer.
            /* eslint-disable no-empty */
            this.dispose(true).catch(() => { });
        }
    }
    getVoices(locale) {
        return __awaiter(this, void 0, void 0, function* () {
            const requestId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["createNoDashGuid"])();
            const response = yield this.privRestAdapter.getVoicesList(requestId);
            if (response.ok && Array.isArray(response.json)) {
                let json = response.json;
                if (!!locale && locale.length > 0) {
                    json = json.filter((item) => !!item.Locale && item.Locale.toLowerCase() === locale.toLowerCase());
                }
                return new _Exports__WEBPACK_IMPORTED_MODULE_6__["SynthesisVoicesResult"](requestId, json, undefined);
            }
            else {
                return new _Exports__WEBPACK_IMPORTED_MODULE_6__["SynthesisVoicesResult"](requestId, undefined, `Error: ${response.status}: ${response.statusText}`);
            }
        });
    }
    adapterSpeak() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.privDisposed && !this.privSynthesizing) {
                this.privSynthesizing = true;
                const request = yield this.synthesisRequestQueue.dequeue();
                return this.privAdapter.Speak(request.text, request.isSSML, request.requestId, request.cb, request.err, request.dataStream);
            }
        });
    }
    static XMLEncode(text) {
        return text.replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;")
            .replace(/"/g, "&quot;")
            .replace(/'/g, "&apos;");
    }
}
class SynthesisRequest {
    constructor(requestId, text, isSSML, cb, err, dataStream) {
        this.requestId = requestId;
        this.text = text;
        this.isSSML = isSSML;
        this.cb = cb;
        this.err = err;
        this.dataStream = dataStream;
    }
}

//# sourceMappingURL=SpeechSynthesizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechTranslationConfig.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechTranslationConfig.js ***!
  \***************************************************************************************************************/
/*! exports provided: SpeechTranslationConfig, SpeechTranslationConfigImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechTranslationConfig", function() { return SpeechTranslationConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechTranslationConfigImpl", function() { return SpeechTranslationConfigImpl; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */



/**
 * Speech translation configuration.
 * @class SpeechTranslationConfig
 */
class SpeechTranslationConfig extends _Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechConfig"] {
    /**
     * Creates an instance of recognizer config.
     */
    constructor() {
        super();
    }
    /**
     * Static instance of SpeechTranslationConfig returned by passing a subscription key and service region.
     * @member SpeechTranslationConfig.fromSubscription
     * @function
     * @public
     * @param {string} subscriptionKey - The subscription key.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechTranslationConfig} The speech translation config.
     */
    static fromSubscription(subscriptionKey, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(subscriptionKey, "subscriptionKey");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(region, "region");
        const ret = new SpeechTranslationConfigImpl();
        ret.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key, subscriptionKey);
        ret.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region, region);
        return ret;
    }
    /**
     * Static instance of SpeechTranslationConfig returned by passing authorization token and service region.
     * Note: The caller needs to ensure that the authorization token is valid. Before the authorization token
     * expires, the caller needs to refresh it by setting the property authorizationToken with a new
     * valid token. Otherwise, all the recognizers created by this SpeechTranslationConfig instance
     * will encounter errors during recognition.
     * As configuration values are copied when creating a new recognizer, the new token value will not apply
     * to recognizers that have already been created.
     * For recognizers that have been created before, you need to set authorization token of the corresponding recognizer
     * to refresh the token. Otherwise, the recognizers will encounter errors during recognition.
     * @member SpeechTranslationConfig.fromAuthorizationToken
     * @function
     * @public
     * @param {string} authorizationToken - The authorization token.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechTranslationConfig} The speech translation config.
     */
    static fromAuthorizationToken(authorizationToken, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(authorizationToken, "authorizationToken");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(region, "region");
        const ret = new SpeechTranslationConfigImpl();
        ret.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token, authorizationToken);
        ret.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region, region);
        return ret;
    }
    /**
     * Creates an instance of the speech config with specified host and subscription key.
     * This method is intended only for users who use a non-default service host. Standard resource path will be assumed.
     * For services with a non-standard resource path or no path at all, use fromEndpoint instead.
     * Note: Query parameters are not allowed in the host URI and must be set by other APIs.
     * Note: To use an authorization token with fromHost, use fromHost(URL),
     * and then set the AuthorizationToken property on the created SpeechConfig instance.
     * Note: Added in version 1.9.0.
     * @member SpeechConfig.fromHost
     * @function
     * @public
     * @param {URL} host - The service endpoint to connect to. Format is "protocol://host:port" where ":port" is optional.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization token must be set.
     * @returns {SpeechConfig} A speech factory instance.
     */
    static fromHost(hostName, subscriptionKey) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(hostName, "hostName");
        const speechImpl = new SpeechTranslationConfigImpl();
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Host, hostName.protocol + "//" + hostName.hostname + (hostName.port === "" ? "" : ":" + hostName.port));
        if (undefined !== subscriptionKey) {
            speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key, subscriptionKey);
        }
        return speechImpl;
    }
    /**
     * Creates an instance of the speech translation config with specified endpoint and subscription key.
     * This method is intended only for users who use a non-standard service endpoint or paramters.
     * Note: The query properties specified in the endpoint URL are not changed, even if they are
     * set by any other APIs. For example, if language is defined in the uri as query parameter
     * "language=de-DE", and also set by the speechRecognitionLanguage property, the language
     * setting in uri takes precedence, and the effective language is "de-DE".
     * Only the properties that are not specified in the endpoint URL can be set by other APIs.
     * Note: To use authorization token with fromEndpoint, pass an empty string to the subscriptionKey in the
     * fromEndpoint method, and then set authorizationToken="token" on the created SpeechConfig instance to
     * use the authorization token.
     * @member SpeechTranslationConfig.fromEndpoint
     * @function
     * @public
     * @param {URL} endpoint - The service endpoint to connect to.
     * @param {string} subscriptionKey - The subscription key.
     * @returns {SpeechTranslationConfig} A speech config instance.
     */
    static fromEndpoint(endpoint, subscriptionKey) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(endpoint, "endpoint");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(subscriptionKey, "subscriptionKey");
        const ret = new SpeechTranslationConfigImpl();
        ret.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Endpoint, endpoint.href);
        ret.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key, subscriptionKey);
        return ret;
    }
}
/**
 * @private
 * @class SpeechTranslationConfigImpl
 */
class SpeechTranslationConfigImpl extends SpeechTranslationConfig {
    constructor() {
        super();
        this.privSpeechProperties = new _Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyCollection"]();
        this.outputFormat = _Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"].Simple;
    }
    /**
     * Gets/Sets the authorization token.
     * If this is set, subscription key is ignored.
     * User needs to make sure the provided authorization token is valid and not expired.
     * @member SpeechTranslationConfigImpl.prototype.authorizationToken
     * @function
     * @public
     * @param {string} value - The authorization token.
     */
    set authorizationToken(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(value, "value");
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token, value);
    }
    /**
     * Sets the speech recognition language.
     * @member SpeechTranslationConfigImpl.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @param {string} value - The authorization token.
     */
    set speechRecognitionLanguage(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(value, "value");
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage, value);
    }
    /**
     * Gets the speech recognition language.
     * @member SpeechTranslationConfigImpl.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @return {string} The speechRecognitionLanguage.
     */
    get speechRecognitionLanguage() {
        return this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage]);
    }
    /**
     * @member SpeechTranslationConfigImpl.prototype.subscriptionKey
     * @function
     * @public
     */
    get subscriptionKey() {
        return this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key]);
    }
    /**
     * Gets the output format
     * @member SpeechTranslationConfigImpl.prototype.outputFormat
     * @function
     * @public
     */
    get outputFormat() {
        // eslint-disable-next-line
        return _Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"][this.privSpeechProperties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["OutputFormatPropertyName"], undefined)];
    }
    /**
     * Gets/Sets the output format
     * @member SpeechTranslationConfigImpl.prototype.outputFormat
     * @function
     * @public
     */
    set outputFormat(value) {
        this.privSpeechProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["OutputFormatPropertyName"], _Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"][value]);
    }
    /**
     * Gets the endpoint id.
     * @member SpeechTranslationConfigImpl.prototype.endpointId
     * @function
     * @public
     */
    get endpointId() {
        return this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_EndpointId);
    }
    /**
     * Gets/Sets the endpoint id.
     * @member SpeechTranslationConfigImpl.prototype.endpointId
     * @function
     * @public
     */
    set endpointId(value) {
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_EndpointId, value);
    }
    /**
     * Add a (text) target language to translate into.
     * @member SpeechTranslationConfigImpl.prototype.addTargetLanguage
     * @function
     * @public
     * @param {string} value - The language such as de-DE
     */
    addTargetLanguage(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(value, "value");
        const languages = this.targetLanguages;
        languages.push(value);
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationToLanguages, languages.join(","));
    }
    /**
     * Gets the (text) target language to translate into.
     * @member SpeechTranslationConfigImpl.prototype.targetLanguages
     * @function
     * @public
     * @param {string} value - The language such as de-DE
     */
    get targetLanguages() {
        if (this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationToLanguages, undefined) !== undefined) {
            return this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationToLanguages).split(",");
        }
        else {
            return [];
        }
    }
    /**
     * Gets the voice name.
     * @member SpeechTranslationConfigImpl.prototype.voiceName
     * @function
     * @public
     */
    get voiceName() {
        return this.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationVoice]);
    }
    /**
     * Gets/Sets the voice of the translated language, enable voice synthesis output.
     * @member SpeechTranslationConfigImpl.prototype.voiceName
     * @function
     * @public
     * @param {string} value - The name of the voice.
     */
    set voiceName(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(value, "value");
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationVoice, value);
    }
    /**
     * Provides the region.
     * @member SpeechTranslationConfigImpl.prototype.region
     * @function
     * @public
     * @returns {string} The region.
     */
    get region() {
        return this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region);
    }
    setProxy(proxyHostName, proxyPort, proxyUserName, proxyPassword) {
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_ProxyHostName], proxyHostName);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_ProxyPort], proxyPort);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_ProxyUserName], proxyUserName);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_ProxyPassword], proxyPassword);
    }
    /**
     * Gets an arbitrary property value.
     * @member SpeechTranslationConfigImpl.prototype.getProperty
     * @function
     * @public
     * @param {string} name - The name of the property.
     * @param {string} def - The default value of the property in case it is not set.
     * @returns {string} The value of the property.
     */
    getProperty(name, def) {
        return this.privSpeechProperties.getProperty(name, def);
    }
    /**
     * Gets/Sets an arbitrary property value.
     * @member SpeechTranslationConfigImpl.prototype.setProperty
     * @function
     * @public
     * @param {string} name - The name of the property.
     * @param {string} value - The value of the property.
     */
    setProperty(name, value) {
        this.privSpeechProperties.setProperty(name, value);
    }
    /**
     * Provides access to custom properties.
     * @member SpeechTranslationConfigImpl.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The properties.
     */
    get properties() {
        return this.privSpeechProperties;
    }
    /**
     * Dispose of associated resources.
     * @member SpeechTranslationConfigImpl.prototype.close
     * @function
     * @public
     */
    close() {
        return;
    }
    setServiceProperty(name, value) {
        const currentProperties = JSON.parse(this.privSpeechProperties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ServicePropertiesPropertyName"], "{}"));
        currentProperties[name] = value;
        this.privSpeechProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ServicePropertiesPropertyName"], JSON.stringify(currentProperties));
    }
    setProfanity(profanity) {
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceResponse_ProfanityOption, _Exports__WEBPACK_IMPORTED_MODULE_2__["ProfanityOption"][profanity]);
    }
    enableAudioLogging() {
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_EnableAudioLogging, "true");
    }
    requestWordLevelTimestamps() {
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceResponse_RequestWordLevelTimestamps, "true");
    }
    enableDictation() {
        this.privSpeechProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ForceDictationPropertyName"], "true");
    }
    get speechSynthesisLanguage() {
        return this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_SynthLanguage);
    }
    set speechSynthesisLanguage(language) {
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_SynthLanguage, language);
    }
    get speechSynthesisVoiceName() {
        return this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_SynthVoice);
    }
    set speechSynthesisVoiceName(voice) {
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_SynthVoice, voice);
    }
    get speechSynthesisOutputFormat() {
        // eslint-disable-next-line
        return _Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechSynthesisOutputFormat"][this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_SynthOutputFormat, undefined)];
    }
    set speechSynthesisOutputFormat(format) {
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_SynthOutputFormat, _Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechSynthesisOutputFormat"][format]);
    }
}

//# sourceMappingURL=SpeechTranslationConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SynthesisResult.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SynthesisResult.js ***!
  \*******************************************************************************************************/
/*! exports provided: SynthesisResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SynthesisResult", function() { return SynthesisResult; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Base class for synthesis results
 * @class SynthesisResult
 * Added in version 1.20.0
 */
class SynthesisResult {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} errorDetails - Error details, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */
    constructor(resultId, reason, errorDetails, properties) {
        this.privResultId = resultId;
        this.privReason = reason;
        this.privErrorDetails = errorDetails;
        this.privProperties = properties;
    }
    /**
     * Specifies the result identifier.
     * @member SynthesisResult.prototype.resultId
     * @function
     * @public
     * @returns {string} Specifies the result identifier.
     */
    get resultId() {
        return this.privResultId;
    }
    /**
     * Specifies status of the result.
     * @member SynthesisResult.prototype.reason
     * @function
     * @public
     * @returns {ResultReason} Specifies status of the result.
     */
    get reason() {
        return this.privReason;
    }
    /**
     * In case of an unsuccessful synthesis, provides details of the occurred error.
     * @member SynthesisResult.prototype.errorDetails
     * @function
     * @public
     * @returns {string} a brief description of an error.
     */
    get errorDetails() {
        return this.privErrorDetails;
    }
    /**
     * The set of properties exposed in the result.
     * @member SynthesisResult.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The set of properties exposed in the result.
     */
    get properties() {
        return this.privProperties;
    }
}

//# sourceMappingURL=SynthesisResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SynthesisVoicesResult.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SynthesisVoicesResult.js ***!
  \*************************************************************************************************************/
/*! exports provided: SynthesisVoicesResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SynthesisVoicesResult", function() { return SynthesisVoicesResult; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Defines result of speech synthesis.
 * @class SynthesisVoicesResult
 * Added in version 1.20.0
 */
class SynthesisVoicesResult extends _Exports__WEBPACK_IMPORTED_MODULE_0__["SynthesisResult"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param requestId - result id for request.
     * @param json - json payload from endpoint.
     */
    constructor(requestId, json, errorDetails) {
        if (Array.isArray(json)) {
            super(requestId, _Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].VoicesListRetrieved, undefined, new _Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyCollection"]());
            this.privVoices = [];
            for (const item of json) {
                this.privVoices.push(new _Exports__WEBPACK_IMPORTED_MODULE_0__["VoiceInfo"](item));
            }
        }
        else {
            super(requestId, _Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].Canceled, errorDetails ? errorDetails : "Error information unavailable", new _Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyCollection"]());
        }
    }
    /**
     * The list of voices
     * @member SynthesisVoicesResult.prototype.voices
     * @function
     * @public
     * @returns {VoiceInfo[]} List of synthesized voices.
     */
    get voices() {
        return this.privVoices;
    }
}

//# sourceMappingURL=SynthesisVoicesResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/Conversation.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/Conversation.js ***!
  \******************************************************************************************************************/
/*! exports provided: Conversation, ConversationImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Conversation", function() { return Conversation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationImpl", function() { return ConversationImpl; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/* eslint-disable max-classes-per-file */




class Conversation {
    constructor() {
        return;
    }
    /**
     * Create a conversation
     * @param speechConfig
     * @param cb
     * @param err
     */
    static createConversationAsync(speechConfig, arg2, arg3, arg4) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(speechConfig, _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationConnectionConfig"].restErrors.invalidArgs.replace("{arg}", "config"));
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(speechConfig.region, _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationConnectionConfig"].restErrors.invalidArgs.replace("{arg}", "SpeechServiceConnection_Region"));
        if (!speechConfig.subscriptionKey && !speechConfig.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceAuthorization_Token])) {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(speechConfig.subscriptionKey, _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationConnectionConfig"].restErrors.invalidArgs.replace("{arg}", "SpeechServiceConnection_Key"));
        }
        let conversationImpl;
        let cb;
        let err;
        if (typeof arg2 === "string") {
            conversationImpl = new ConversationImpl(speechConfig, arg2);
            // eslint-disable-next-line @typescript-eslint/no-empty-function
            Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])((() => __awaiter(this, void 0, void 0, function* () { }))(), arg3, arg4);
        }
        else {
            conversationImpl = new ConversationImpl(speechConfig);
            cb = arg2;
            err = arg3;
            conversationImpl.createConversationAsync((() => {
                if (!!cb) {
                    cb();
                }
            }), (error) => {
                if (!!err) {
                    err(error);
                }
            });
        }
        return conversationImpl;
    }
}
class ConversationImpl extends Conversation {
    /**
     * Create a conversation impl
     * @param speechConfig
     * @param {string} id - optional conversationId
     */
    constructor(speechConfig, id) {
        super();
        this.privErrors = _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationConnectionConfig"].restErrors;
        /** websocket callbacks */
        /* eslint-disable @typescript-eslint/typedef */
        this.onConnected = (e) => {
            var _a;
            this.privIsConnected = true;
            try {
                if (!!((_a = this.privConversationTranslator) === null || _a === void 0 ? void 0 : _a.sessionStarted)) {
                    this.privConversationTranslator.sessionStarted(this.privConversationTranslator, e);
                }
            }
            catch (e) {
                //
            }
        };
        this.onDisconnected = (e) => {
            var _a;
            try {
                if (!!((_a = this.privConversationTranslator) === null || _a === void 0 ? void 0 : _a.sessionStopped)) {
                    this.privConversationTranslator.sessionStopped(this.privConversationTranslator, e);
                }
            }
            catch (e) {
                //
            }
            finally {
                void this.close(false);
            }
        };
        this.onCanceled = (r, e) => {
            var _a;
            try {
                if (!!((_a = this.privConversationTranslator) === null || _a === void 0 ? void 0 : _a.canceled)) {
                    this.privConversationTranslator.canceled(this.privConversationTranslator, e);
                }
            }
            catch (e) {
                //
            }
        };
        this.onParticipantUpdateCommandReceived = (r, e) => {
            try {
                const updatedParticipant = this.privParticipants.getParticipant(e.id);
                if (updatedParticipant !== undefined) {
                    switch (e.key) {
                        case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorCommandTypes"].changeNickname:
                            updatedParticipant.displayName = e.value;
                            break;
                        case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorCommandTypes"].setUseTTS:
                            updatedParticipant.isUsingTts = e.value;
                            break;
                        case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorCommandTypes"].setProfanityFiltering:
                            updatedParticipant.profanity = e.value;
                            break;
                        case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorCommandTypes"].setMute:
                            updatedParticipant.isMuted = e.value;
                            break;
                        case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorCommandTypes"].setTranslateToLanguages:
                            updatedParticipant.translateToLanguages = e.value;
                            break;
                    }
                    this.privParticipants.addOrUpdateParticipant(updatedParticipant);
                    if (!!this.privConversationTranslator) {
                        this.privConversationTranslator.participantsChanged(this.privConversationTranslator, new _Exports__WEBPACK_IMPORTED_MODULE_3__["ConversationParticipantsChangedEventArgs"](_Exports__WEBPACK_IMPORTED_MODULE_3__["ParticipantChangedReason"].Updated, [this.toParticipant(updatedParticipant)], e.sessionId));
                    }
                }
            }
            catch (e) {
                //
            }
        };
        this.onLockRoomCommandReceived = () => {
            // TODO
        };
        this.onMuteAllCommandReceived = (r, e) => {
            try {
                this.privParticipants.participants.forEach((p) => p.isMuted = (p.isHost ? false : e.isMuted));
                if (!!this.privConversationTranslator) {
                    this.privConversationTranslator.participantsChanged(this.privConversationTranslator, new _Exports__WEBPACK_IMPORTED_MODULE_3__["ConversationParticipantsChangedEventArgs"](_Exports__WEBPACK_IMPORTED_MODULE_3__["ParticipantChangedReason"].Updated, this.toParticipants(false), e.sessionId));
                }
            }
            catch (e) {
                //
            }
        };
        this.onParticipantJoinCommandReceived = (r, e) => {
            try {
                const newParticipant = this.privParticipants.addOrUpdateParticipant(e.participant);
                if (newParticipant !== undefined) {
                    if (!!this.privConversationTranslator) {
                        this.privConversationTranslator.participantsChanged(this.privConversationTranslator, new _Exports__WEBPACK_IMPORTED_MODULE_3__["ConversationParticipantsChangedEventArgs"](_Exports__WEBPACK_IMPORTED_MODULE_3__["ParticipantChangedReason"].JoinedConversation, [this.toParticipant(newParticipant)], e.sessionId));
                    }
                }
            }
            catch (e) {
                //
            }
        };
        this.onParticipantLeaveCommandReceived = (r, e) => {
            try {
                const ejectedParticipant = this.privParticipants.getParticipant(e.participant.id);
                if (ejectedParticipant !== undefined) {
                    // remove the participant from the internal participants list
                    this.privParticipants.deleteParticipant(e.participant.id);
                    if (!!this.privConversationTranslator) {
                        // notify subscribers that the participant has left the conversation
                        this.privConversationTranslator.participantsChanged(this.privConversationTranslator, new _Exports__WEBPACK_IMPORTED_MODULE_3__["ConversationParticipantsChangedEventArgs"](_Exports__WEBPACK_IMPORTED_MODULE_3__["ParticipantChangedReason"].LeftConversation, [this.toParticipant(ejectedParticipant)], e.sessionId));
                    }
                }
            }
            catch (e) {
                //
            }
        };
        this.onTranslationReceived = (r, e) => {
            try {
                switch (e.command) {
                    case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorMessageTypes"].final:
                        if (!!this.privConversationTranslator) {
                            this.privConversationTranslator.transcribed(this.privConversationTranslator, new _Exports__WEBPACK_IMPORTED_MODULE_3__["ConversationTranslationEventArgs"](e.payload, undefined, e.sessionId));
                        }
                        break;
                    case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorMessageTypes"].partial:
                        if (!!this.privConversationTranslator) {
                            this.privConversationTranslator.transcribing(this.privConversationTranslator, new _Exports__WEBPACK_IMPORTED_MODULE_3__["ConversationTranslationEventArgs"](e.payload, undefined, e.sessionId));
                        }
                        break;
                    case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorMessageTypes"].instantMessage:
                        if (!!this.privConversationTranslator) {
                            this.privConversationTranslator.textMessageReceived(this.privConversationTranslator, new _Exports__WEBPACK_IMPORTED_MODULE_3__["ConversationTranslationEventArgs"](e.payload, undefined, e.sessionId));
                        }
                        break;
                }
            }
            catch (e) {
                //
            }
        };
        this.onParticipantsListReceived = (r, e) => {
            var _a;
            try {
                // check if the session token needs to be updated
                if (e.sessionToken !== undefined && e.sessionToken !== null) {
                    this.privRoom.token = e.sessionToken;
                }
                // save the participants
                this.privParticipants.participants = [...e.participants];
                // enable the conversation
                if (this.privParticipants.me !== undefined) {
                    this.privIsReady = true;
                }
                if (!!this.privConversationTranslator) {
                    this.privConversationTranslator.participantsChanged(this.privConversationTranslator, new _Exports__WEBPACK_IMPORTED_MODULE_3__["ConversationParticipantsChangedEventArgs"](_Exports__WEBPACK_IMPORTED_MODULE_3__["ParticipantChangedReason"].JoinedConversation, this.toParticipants(true), e.sessionId));
                }
                // if this is the host, update the nickname if needed
                if (this.me.isHost) {
                    const nickname = (_a = this.privConversationTranslator) === null || _a === void 0 ? void 0 : _a.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].ConversationTranslator_Name);
                    if (nickname !== undefined && nickname.length > 0 && nickname !== this.me.displayName) {
                        // issue a change nickname request
                        this.changeNicknameAsync(nickname);
                    }
                }
            }
            catch (e) {
                //
            }
        };
        this.onConversationExpiration = (r, e) => {
            try {
                if (!!this.privConversationTranslator) {
                    this.privConversationTranslator.conversationExpiration(this.privConversationTranslator, e);
                }
            }
            catch (e) {
                //
            }
        };
        this.privIsConnected = false;
        this.privIsDisposed = false;
        this.privConversationId = "";
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyCollection"]();
        this.privManager = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationManager"]();
        // check the speech language
        const language = speechConfig.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_RecoLanguage]);
        if (!language) {
            speechConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_RecoLanguage], _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationConnectionConfig"].defaultLanguageCode);
        }
        this.privLanguage = speechConfig.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_RecoLanguage]);
        if (!id) {
            // check the target language(s)
            if (speechConfig.targetLanguages.length === 0) {
                speechConfig.addTargetLanguage(this.privLanguage);
            }
            // check the profanity setting: speech and conversationTranslator should be in sync
            const profanity = speechConfig.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceResponse_ProfanityOption]);
            if (!profanity) {
                speechConfig.setProfanity(_Exports__WEBPACK_IMPORTED_MODULE_3__["ProfanityOption"].Masked);
            }
            // check the nickname: it should pass this regex: ^\w+([\s-][\w\(\)]+)*$"
            // TODO: specify the regex required. Nicknames must be unique or get the duplicate nickname error
            // TODO: check what the max length is and if a truncation is required or if the service handles it without an error
            let hostNickname = speechConfig.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].ConversationTranslator_Name]);
            if (hostNickname === undefined || hostNickname === null || hostNickname.length <= 1 || hostNickname.length > 50) {
                hostNickname = "Host";
            }
            speechConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].ConversationTranslator_Name], hostNickname);
        }
        else {
            this.privConversationId = id;
        }
        // save the speech config for future usage
        this.privConfig = speechConfig;
        // save the config properties
        const configImpl = speechConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNull(configImpl, "speechConfig");
        this.privProperties = configImpl.properties.clone();
        this.privIsConnected = false;
        this.privParticipants = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["InternalParticipants"]();
        this.privIsReady = false;
        this.privTextMessageMaxLength = 1000;
    }
    // get the internal data about a conversation
    get room() {
        return this.privRoom;
    }
    // get the wrapper for connecting to the websockets
    get connection() {
        return this.privConversationRecognizer; // this.privConnection;
    }
    // get the config
    get config() {
        return this.privConfig;
    }
    // get the conversation Id
    get conversationId() {
        return this.privRoom ? this.privRoom.roomId : this.privConversationId;
    }
    // get the properties
    get properties() {
        return this.privProperties;
    }
    // get the speech language
    get speechRecognitionLanguage() {
        return this.privLanguage;
    }
    get isMutedByHost() {
        var _a, _b;
        return ((_a = this.privParticipants.me) === null || _a === void 0 ? void 0 : _a.isHost) ? false : (_b = this.privParticipants.me) === null || _b === void 0 ? void 0 : _b.isMuted;
    }
    get isConnected() {
        return this.privIsConnected && this.privIsReady;
    }
    get participants() {
        return this.toParticipants(true);
    }
    get me() {
        return this.toParticipant(this.privParticipants.me);
    }
    get host() {
        return this.toParticipant(this.privParticipants.host);
    }
    get transcriberRecognizer() {
        return this.privTranscriberRecognizer;
    }
    get conversationInfo() {
        const convId = this.conversationId;
        const p = this.participants.map((part) => ({
            id: part.id,
            preferredLanguage: part.preferredLanguage,
            voice: part.voice
        }));
        const props = {};
        for (const key of _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationConnectionConfig"].transcriptionEventKeys) {
            const val = this.properties.getProperty(key, "");
            if (val !== "") {
                props[key] = val;
            }
        }
        const info = { id: convId, participants: p, conversationProperties: props };
        return info;
    }
    get canSend() {
        var _a;
        return this.privIsConnected && !((_a = this.privParticipants.me) === null || _a === void 0 ? void 0 : _a.isMuted);
    }
    get canSendAsHost() {
        var _a;
        return this.privIsConnected && ((_a = this.privParticipants.me) === null || _a === void 0 ? void 0 : _a.isHost);
    }
    // get / set the speech auth token
    // eslint-disable-next-line @typescript-eslint/member-ordering
    get authorizationToken() {
        return this.privToken;
    }
    set authorizationToken(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(value, "authorizationToken");
        this.privToken = value;
    }
    set conversationTranslator(conversationTranslator) {
        this.privConversationTranslator = conversationTranslator;
    }
    /**
     * Create a new conversation as Host
     * @param cb
     * @param err
     */
    createConversationAsync(cb, err) {
        try {
            if (!!this.privConversationRecognizer) {
                this.handleError(new Error(this.privErrors.permissionDeniedStart), err);
            }
            this.privManager.createOrJoin(this.privProperties, undefined, ((room) => {
                if (!room) {
                    this.handleError(new Error(this.privErrors.permissionDeniedConnect), err);
                }
                this.privRoom = room;
                this.handleCallback(cb, err);
            }), ((error) => {
                this.handleError(error, err);
            }));
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Starts a new conversation as host.
     * @param cb
     * @param err
     */
    startConversationAsync(cb, err) {
        try {
            // check if there is already a recognizer
            if (!!this.privConversationRecognizer) {
                this.handleError(new Error(this.privErrors.permissionDeniedStart), err);
            }
            // check if there is conversation data available
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedConnect);
            // connect to the conversation websocket
            this.privParticipants.meId = this.privRoom.participantId;
            this.privConversationRecognizer = _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationRecognizerFactory"].fromConfig(this, this.privConfig);
            // Because ConversationTranslator manually sets up and manages the connection, Conversation
            // has to forward serviceRecognizer connection events that usually get passed automatically
            this.privConversationRecognizer.connected = this.onConnected;
            this.privConversationRecognizer.disconnected = this.onDisconnected;
            this.privConversationRecognizer.canceled = this.onCanceled;
            this.privConversationRecognizer.participantUpdateCommandReceived = this.onParticipantUpdateCommandReceived;
            this.privConversationRecognizer.lockRoomCommandReceived = this.onLockRoomCommandReceived;
            this.privConversationRecognizer.muteAllCommandReceived = this.onMuteAllCommandReceived;
            this.privConversationRecognizer.participantJoinCommandReceived = this.onParticipantJoinCommandReceived;
            this.privConversationRecognizer.participantLeaveCommandReceived = this.onParticipantLeaveCommandReceived;
            this.privConversationRecognizer.translationReceived = this.onTranslationReceived;
            this.privConversationRecognizer.participantsListReceived = this.onParticipantsListReceived;
            this.privConversationRecognizer.conversationExpiration = this.onConversationExpiration;
            this.privConversationRecognizer.connect(this.privRoom.token, (() => {
                this.handleCallback(cb, err);
            }), ((error) => {
                this.handleError(error, err);
            }));
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Join a conversation as a participant.
     * @param { IParticipant } participant - participant to add
     * @param cb
     * @param err
     */
    addParticipantAsync(participant, cb, err) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(participant, "Participant");
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.addParticipantImplAsync(participant), cb, err);
    }
    /**
     * Join a conversation as a participant.
     * @param conversation
     * @param nickname
     * @param lang
     * @param cb
     * @param err
     */
    joinConversationAsync(conversationId, nickname, lang, cb, err) {
        try {
            // TODO
            // if (!!this.privConversationRecognizer) {
            //     throw new Error(this.privErrors.permissionDeniedStart);
            // }
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(conversationId, this.privErrors.invalidArgs.replace("{arg}", "conversationId"));
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(nickname, this.privErrors.invalidArgs.replace("{arg}", "nickname"));
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(lang, this.privErrors.invalidArgs.replace("{arg}", "language"));
            // join the conversation
            this.privManager.createOrJoin(this.privProperties, conversationId, ((room) => {
                _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(room, this.privErrors.permissionDeniedConnect);
                this.privRoom = room;
                this.privConfig.authorizationToken = room.cognitiveSpeechAuthToken;
                // join callback
                if (!!cb) {
                    cb(room.cognitiveSpeechAuthToken);
                }
            }), ((error) => {
                this.handleError(error, err);
            }));
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Deletes a conversation
     * @param cb
     * @param err
     */
    deleteConversationAsync(cb, err) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.deleteConversationImplAsync(), cb, err);
    }
    deleteConversationImplAsync() {
        return __awaiter(this, void 0, void 0, function* () {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(this.privProperties, this.privErrors.permissionDeniedConnect);
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(this.privRoom.token, this.privErrors.permissionDeniedConnect);
            yield this.privManager.leave(this.privProperties, this.privRoom.token);
            this.dispose();
        });
    }
    /**
     * Issues a request to close the client websockets
     * @param cb
     * @param err
     */
    endConversationAsync(cb, err) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.endConversationImplAsync(), cb, err);
    }
    endConversationImplAsync() {
        return this.close(true);
    }
    /**
     * Issues a request to lock the conversation
     * @param cb
     * @param err
     */
    lockConversationAsync(cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privIsDisposed);
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privConversationRecognizer.isDisposed());
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
            if (!this.canSendAsHost) {
                this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}", "lock")), err);
            }
            if (!!this.privConversationRecognizer) {
                this.privConversationRecognizer.sendRequest(this.getLockCommand(true), (() => {
                    this.handleCallback(cb, err);
                }), ((error) => {
                    this.handleError(error, err);
                }));
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Issues a request to mute the conversation
     * @param cb
     * @param err
     */
    muteAllParticipantsAsync(cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privIsDisposed);
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privConversationRecognizer.isDisposed());
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(this.privConversationRecognizer, this.privErrors.permissionDeniedSend);
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
            // check the user's permissions
            if (!this.canSendAsHost) {
                this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}", "mute")), err);
            }
            if (!!this.privConversationRecognizer) {
                this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(true), (() => {
                    this.handleCallback(cb, err);
                }), ((error) => {
                    this.handleError(error, err);
                }));
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Issues a request to mute a participant in the conversation
     * @param userId
     * @param cb
     * @param err
     */
    muteParticipantAsync(userId, cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privIsDisposed);
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privConversationRecognizer.isDisposed());
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(userId, this.privErrors.invalidArgs.replace("{arg}", "userId"));
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
            // check the connection is open (host + participant can perform the mute command)
            if (!this.canSend) {
                this.handleError(new Error(this.privErrors.permissionDeniedSend), err);
            }
            // if not host, check the participant is not muting another participant
            if (!this.me.isHost && this.me.id !== userId) {
                this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}", "mute")), err);
            }
            // check the user exists
            const exists = this.privParticipants.getParticipantIndex(userId);
            if (exists === -1) {
                this.handleError(new Error(this.privErrors.invalidParticipantRequest), err);
            }
            if (!!this.privConversationRecognizer) {
                this.privConversationRecognizer.sendRequest(this.getMuteCommand(userId, true), (() => {
                    this.handleCallback(cb, err);
                }), ((error) => {
                    this.handleError(error, err);
                }));
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Issues a request to remove a participant from the conversation
     * @param userId
     * @param cb
     * @param err
     */
    removeParticipantAsync(userId, cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privIsDisposed);
            if (!!this.privTranscriberRecognizer && userId.hasOwnProperty("id")) {
                // Assume this is a transcription participant
                Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.removeParticipantImplAsync(userId), cb, err);
            }
            else {
                _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privConversationRecognizer.isDisposed());
                _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
                if (!this.canSendAsHost) {
                    this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}", "remove")), err);
                }
                let participantId = "";
                if (typeof userId === "string") {
                    participantId = userId;
                }
                else if (userId.hasOwnProperty("id")) {
                    const participant = userId;
                    participantId = participant.id;
                }
                else if (userId.hasOwnProperty("userId")) {
                    const user = userId;
                    participantId = user.userId;
                }
                _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(participantId, this.privErrors.invalidArgs.replace("{arg}", "userId"));
                // check the participant exists
                const index = this.participants.findIndex((p) => p.id === participantId);
                if (index === -1) {
                    this.handleError(new Error(this.privErrors.invalidParticipantRequest), err);
                }
                if (!!this.privConversationRecognizer) {
                    this.privConversationRecognizer.sendRequest(this.getEjectCommand(participantId), (() => {
                        this.handleCallback(cb, err);
                    }), ((error) => {
                        this.handleError(error, err);
                    }));
                }
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Issues a request to unlock the conversation
     * @param cb
     * @param err
     */
    unlockConversationAsync(cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privIsDisposed);
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privConversationRecognizer.isDisposed());
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
            if (!this.canSendAsHost) {
                this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}", "unlock")), err);
            }
            if (!!this.privConversationRecognizer) {
                this.privConversationRecognizer.sendRequest(this.getLockCommand(false), (() => {
                    this.handleCallback(cb, err);
                }), ((error) => {
                    this.handleError(error, err);
                }));
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Issues a request to unmute all participants in the conversation
     * @param cb
     * @param err
     */
    unmuteAllParticipantsAsync(cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privIsDisposed);
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privConversationRecognizer.isDisposed());
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
            if (!this.canSendAsHost) {
                this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}", "unmute all")), err);
            }
            if (!!this.privConversationRecognizer) {
                this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(false), (() => {
                    this.handleCallback(cb, err);
                }), ((error) => {
                    this.handleError(error, err);
                }));
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Issues a request to unmute a participant in the conversation
     * @param userId
     * @param cb
     * @param err
     */
    unmuteParticipantAsync(userId, cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privIsDisposed);
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privConversationRecognizer.isDisposed());
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(userId, this.privErrors.invalidArgs.replace("{arg}", "userId"));
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
            // check the connection is open (host + participant can perform the mute command)
            if (!this.canSend) {
                this.handleError(new Error(this.privErrors.permissionDeniedSend), err);
            }
            // if not host, check the participant is not muting another participant
            if (!this.me.isHost && this.me.id !== userId) {
                this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}", "mute")), err);
            }
            // check the user exists
            const exists = this.privParticipants.getParticipantIndex(userId);
            if (exists === -1) {
                this.handleError(new Error(this.privErrors.invalidParticipantRequest), err);
            }
            if (!!this.privConversationRecognizer) {
                this.privConversationRecognizer.sendRequest(this.getMuteCommand(userId, false), (() => {
                    this.handleCallback(cb, err);
                }), ((error) => {
                    this.handleError(error, err);
                }));
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Send a text message
     * @param message
     * @param cb
     * @param err
     */
    sendTextMessageAsync(message, cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privIsDisposed);
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privConversationRecognizer.isDisposed());
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(message, this.privErrors.invalidArgs.replace("{arg}", "message"));
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
            if (!this.canSend) {
                this.handleError(new Error(this.privErrors.permissionDeniedSend), err);
            }
            // TODO: is a max length check required?
            if (message.length > this.privTextMessageMaxLength) {
                this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}", "message length")), err);
            }
            if (!!this.privConversationRecognizer) {
                this.privConversationRecognizer.sendRequest(this.getMessageCommand(message), (() => {
                    this.handleCallback(cb, err);
                }), ((error) => {
                    this.handleError(error, err);
                }));
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Set translated to languages
     * @param {string[]} languages - languages to translate to
     * @param cb
     * @param err
     */
    setTranslatedLanguagesAsync(languages, cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privIsDisposed);
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privConversationRecognizer.isDisposed());
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfArrayEmptyOrWhitespace(languages, this.privErrors.invalidArgs.replace("{arg}", "languages"));
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
            if (!this.canSend) {
                this.handleError(new Error(this.privErrors.permissionDeniedSend), err);
            }
            if (!!this.privConversationRecognizer) {
                this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(languages), (() => {
                    this.handleCallback(cb, err);
                }), ((error) => {
                    this.handleError(error, err);
                }));
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Change nickname
     * @param {string} nickname - new nickname for the room
     * @param cb
     * @param err
     */
    changeNicknameAsync(nickname, cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privIsDisposed);
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privConversationRecognizer.isDisposed());
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(nickname, this.privErrors.invalidArgs.replace("{arg}", "nickname"));
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
            if (!this.canSend) {
                this.handleError(new Error(this.privErrors.permissionDeniedSend), err);
            }
            if (!!this.privConversationRecognizer) {
                this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(nickname), (() => {
                    this.handleCallback(cb, err);
                }), ((error) => {
                    this.handleError(error, err);
                }));
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    isDisposed() {
        return this.privIsDisposed;
    }
    dispose() {
        if (this.isDisposed) {
            return;
        }
        this.privIsDisposed = true;
        if (!!this.config) {
            this.config.close();
        }
        this.privConfig = undefined;
        this.privLanguage = undefined;
        this.privProperties = undefined;
        this.privRoom = undefined;
        this.privToken = undefined;
        this.privManager = undefined;
        this.privIsConnected = false;
        this.privIsReady = false;
        this.privParticipants = undefined;
    }
    connectTranscriberRecognizer(recognizer) {
        return __awaiter(this, void 0, void 0, function* () {
            if (!!this.privTranscriberRecognizer) {
                yield this.privTranscriberRecognizer.close();
            }
            yield recognizer.enforceAudioGating();
            this.privTranscriberRecognizer = recognizer;
            this.privTranscriberRecognizer.conversation = this;
        });
    }
    getKeepAlive() {
        const nickname = (!!this.me) ? this.me.displayName : "default_nickname";
        return JSON.stringify({
            id: "0",
            nickname,
            participantId: this.privRoom.participantId,
            roomId: this.privRoom.roomId,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorMessageTypes"].keepAlive
        });
    }
    /* eslint-enable @typescript-eslint/typedef */
    addParticipantImplAsync(participant) {
        const newParticipant = this.privParticipants.addOrUpdateParticipant(participant);
        if (newParticipant !== undefined) {
            if (!!this.privTranscriberRecognizer) {
                const conversationInfo = this.conversationInfo;
                conversationInfo.participants = [participant];
                return this.privTranscriberRecognizer.pushConversationEvent(conversationInfo, "join");
            }
        }
    }
    removeParticipantImplAsync(participant) {
        this.privParticipants.deleteParticipant(participant.id);
        const conversationInfo = this.conversationInfo;
        conversationInfo.participants = [participant];
        return this.privTranscriberRecognizer.pushConversationEvent(conversationInfo, "leave");
    }
    close(dispose) {
        var _a;
        return __awaiter(this, void 0, void 0, function* () {
            try {
                this.privIsConnected = false;
                yield ((_a = this.privConversationRecognizer) === null || _a === void 0 ? void 0 : _a.close());
                this.privConversationRecognizer = undefined;
                if (!!this.privConversationTranslator) {
                    this.privConversationTranslator.dispose();
                }
            }
            catch (e) {
                // ignore error
                throw e;
            }
            if (dispose) {
                this.dispose();
            }
        });
    }
    /** Helpers */
    handleCallback(cb, err) {
        if (!!cb) {
            try {
                cb();
            }
            catch (e) {
                if (!!err) {
                    err(e);
                }
            }
            cb = undefined;
        }
    }
    handleError(error, err) {
        if (!!err) {
            if (error instanceof Error) {
                const typedError = error;
                err(typedError.name + ": " + typedError.message);
            }
            else {
                err(error);
            }
        }
    }
    /** Participant Helpers */
    toParticipants(includeHost) {
        const participants = this.privParticipants.participants.map((p) => (this.toParticipant(p)));
        if (!includeHost) {
            return participants.filter((p) => p.isHost === false);
        }
        else {
            return participants;
        }
    }
    toParticipant(p) {
        return new _Exports__WEBPACK_IMPORTED_MODULE_3__["Participant"](p.id, p.avatar, p.displayName, p.isHost, p.isMuted, p.isUsingTts, p.preferredLanguage, p.voice);
    }
    getMuteAllCommand(isMuted) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(this.privRoom.roomId, "conversationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(this.privRoom.participantId, "participantId");
        return JSON.stringify({
            command: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorCommandTypes"].setMuteAll,
            participantId: this.privRoom.participantId,
            roomid: this.privRoom.roomId,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorMessageTypes"].participantCommand,
            value: isMuted
        });
    }
    getMuteCommand(participantId, isMuted) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(this.privRoom.roomId, "conversationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(participantId, "participantId");
        return JSON.stringify({
            command: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorCommandTypes"].setMute,
            // eslint-disable-next-line object-shorthand
            participantId: participantId,
            roomid: this.privRoom.roomId,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorMessageTypes"].participantCommand,
            value: isMuted
        });
    }
    getLockCommand(isLocked) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(this.privRoom.roomId, "conversationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(this.privRoom.participantId, "participantId");
        return JSON.stringify({
            command: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorCommandTypes"].setLockState,
            participantId: this.privRoom.participantId,
            roomid: this.privRoom.roomId,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorMessageTypes"].participantCommand,
            value: isLocked
        });
    }
    getEjectCommand(participantId) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(this.privRoom.roomId, "conversationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(participantId, "participantId");
        return JSON.stringify({
            command: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorCommandTypes"].ejectParticipant,
            // eslint-disable-next-line object-shorthand
            participantId: participantId,
            roomid: this.privRoom.roomId,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorMessageTypes"].participantCommand,
        });
    }
    getSetTranslateToLanguagesCommand(languages) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(this.privRoom.roomId, "conversationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(this.privRoom.participantId, "participantId");
        return JSON.stringify({
            command: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorCommandTypes"].setTranslateToLanguages,
            participantId: this.privRoom.participantId,
            roomid: this.privRoom.roomId,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorMessageTypes"].participantCommand,
            value: languages
        });
    }
    getChangeNicknameCommand(nickname) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(this.privRoom.roomId, "conversationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(nickname, "nickname");
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(this.privRoom.participantId, "participantId");
        return JSON.stringify({
            command: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorCommandTypes"].changeNickname,
            nickname,
            participantId: this.privRoom.participantId,
            roomid: this.privRoom.roomId,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorMessageTypes"].participantCommand,
            value: nickname
        });
    }
    getMessageCommand(message) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(this.privRoom.roomId, "conversationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(this.privRoom.participantId, "participantId");
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(message, "message");
        return JSON.stringify({
            participantId: this.privRoom.participantId,
            roomId: this.privRoom.roomId,
            text: message,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationTranslatorMessageTypes"].instantMessage
        });
    }
}

//# sourceMappingURL=Conversation.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationCommon.js":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationCommon.js ***!
  \************************************************************************************************************************/
/*! exports provided: ConversationCommon */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationCommon", function() { return ConversationCommon; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class ConversationCommon {
    constructor(audioConfig) {
        this.privAudioConfig = audioConfig;
    }
    handleCallback(cb, err) {
        if (!!cb) {
            try {
                cb();
            }
            catch (e) {
                if (!!err) {
                    err(e);
                }
            }
            cb = undefined;
        }
    }
    handleError(error, err) {
        if (!!err) {
            if (error instanceof Error) {
                const typedError = error;
                err(typedError.name + ": " + typedError.message);
            }
            else {
                err(error);
            }
        }
    }
}

//# sourceMappingURL=ConversationCommon.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationExpirationEventArgs.js":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationExpirationEventArgs.js ***!
  \*************************************************************************************************************************************/
/*! exports provided: ConversationExpirationEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationExpirationEventArgs", function() { return ConversationExpirationEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.

class ConversationExpirationEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["SessionEventArgs"] {
    constructor(expirationTime, sessionId) {
        super(sessionId);
        this.privExpirationTime = expirationTime;
    }
    /** How much longer until the conversation expires (in minutes). */
    get expirationTime() {
        return this.privExpirationTime;
    }
}

//# sourceMappingURL=ConversationExpirationEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationParticipantsChangedEventArgs.js":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationParticipantsChangedEventArgs.js ***!
  \**********************************************************************************************************************************************/
/*! exports provided: ConversationParticipantsChangedEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationParticipantsChangedEventArgs", function() { return ConversationParticipantsChangedEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.

class ConversationParticipantsChangedEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["SessionEventArgs"] {
    constructor(reason, participants, sessionId) {
        super(sessionId);
        this.privReason = reason;
        this.privParticipant = participants;
    }
    get reason() {
        return this.privReason;
    }
    get participants() {
        return this.privParticipant;
    }
}

//# sourceMappingURL=ConversationParticipantsChangedEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranscriber.js":
/*!*****************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranscriber.js ***!
  \*****************************************************************************************************************************/
/*! exports provided: ConversationTranscriber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationTranscriber", function() { return ConversationTranscriber; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




class ConversationTranscriber {
    /**
     * ConversationTranscriber constructor.
     * @constructor
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */
    constructor(audioConfig) {
        this.privAudioConfig = audioConfig;
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyCollection"]();
        this.privRecognizer = undefined;
        this.privDisposedRecognizer = false;
    }
    /**
     * Gets the spoken language of recognition.
     * @member ConversationTranscriber.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @returns {string} The spoken language of recognition.
     */
    get speechRecognitionLanguage() {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposedRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_RecoLanguage);
    }
    /**
     * The collection of properties and their values defined for this ConversationTranscriber.
     * @member ConversationTranscriber.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this ConversationTranscriber.
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * @Internal
     * Internal data member to support fromRecognizer* pattern methods on other classes.
     * Do not use externally, object returned will change without warning or notice.
     */
    get internalData() {
        return this.privRecognizer.internalData;
    }
    /**
     * @Deprecated
     * @Obsolete
     * Please use the Connection.fromRecognizer pattern to obtain a connection object
     */
    get connection() {
        return _Exports__WEBPACK_IMPORTED_MODULE_3__["Connection"].fromRecognizer(this.privRecognizer);
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member ConversationTranscriber.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceAuthorization_Token);
    }
    /**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member ConversationTranscriber.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */
    set authorizationToken(token) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(token, "token");
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceAuthorization_Token, token);
    }
    /**
     * @param {Conversation} conversation - conversation to be recognized
     */
    joinConversationAsync(conversation, cb, err) {
        const conversationImpl = conversation;
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(conversationImpl, "Conversation");
        // ref the conversation object
        // create recognizer and subscribe to recognizer events
        this.privRecognizer = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["TranscriberRecognizer"](conversation.config, this.privAudioConfig);
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrUndefined(this.privRecognizer, "Recognizer");
        this.privRecognizer.connectCallbacks(this);
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(conversationImpl.connectTranscriberRecognizer(this.privRecognizer), cb, err);
    }
    /**
     * Starts conversation transcription, until stopTranscribingAsync() is called.
     * User must subscribe to events to receive transcription results.
     * @member ConversationTranscriber.prototype.startTranscribingAsync
     * @function
     * @public
     * @param cb - Callback invoked once the transcription has started.
     * @param err - Callback invoked in case of an error.
     */
    startTranscribingAsync(cb, err) {
        this.privRecognizer.startContinuousRecognitionAsync(cb, err);
    }
    /**
     * Starts conversation transcription, until stopTranscribingAsync() is called.
     * User must subscribe to events to receive transcription results.
     * @member ConversationTranscriber.prototype.stopTranscribingAsync
     * @function
     * @public
     * @param cb - Callback invoked once the transcription has started.
     * @param err - Callback invoked in case of an error.
     */
    stopTranscribingAsync(cb, err) {
        this.privRecognizer.stopContinuousRecognitionAsync(cb, err);
    }
    /**
     * Leave the current conversation. After this is called, you will no longer receive any events.
     */
    leaveConversationAsync(cb, err) {
        this.privRecognizer.disconnectCallbacks();
        // eslint-disable-next-line
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])((() => __awaiter(this, void 0, void 0, function* () { return; }))(), cb, err);
    }
    /**
     * closes all external resources held by an instance of this class.
     * @member ConversationTranscriber.prototype.close
     * @function
     * @public
     */
    close(cb, errorCb) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposedRecognizer);
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.dispose(true), cb, errorCb);
    }
    /**
     * Disposes any resources held by the object.
     * @member ConversationTranscriber.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - true if disposing the object.
     */
    dispose(disposing) {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privDisposedRecognizer) {
                return;
            }
            if (!!this.privRecognizer) {
                yield this.privRecognizer.close();
                this.privRecognizer = undefined;
            }
            if (disposing) {
                this.privDisposedRecognizer = true;
            }
        });
    }
}

//# sourceMappingURL=ConversationTranscriber.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationCanceledEventArgs.js":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationCanceledEventArgs.js ***!
  \**********************************************************************************************************************************************/
/*! exports provided: ConversationTranslationCanceledEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslationCanceledEventArgs", function() { return ConversationTranslationCanceledEventArgs; });
/* harmony import */ var _CancellationEventArgsBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../CancellationEventArgsBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationEventArgsBase.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.

class ConversationTranslationCanceledEventArgs extends _CancellationEventArgsBase__WEBPACK_IMPORTED_MODULE_0__["CancellationEventArgsBase"] {
}

//# sourceMappingURL=ConversationTranslationCanceledEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationEventArgs.js":
/*!**************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationEventArgs.js ***!
  \**************************************************************************************************************************************/
/*! exports provided: ConversationTranslationEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslationEventArgs", function() { return ConversationTranslationEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.

class ConversationTranslationEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionEventArgs"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {ConversationTranslationResult} result - The translation recognition result.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */
    constructor(result, offset, sessionId) {
        super(offset, sessionId);
        this.privResult = result;
    }
    /**
     * Specifies the recognition result.
     * @returns {ConversationTranslationResult} the recognition result.
     */
    get result() {
        return this.privResult;
    }
}

//# sourceMappingURL=ConversationTranslationEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationResult.js":
/*!***********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationResult.js ***!
  \***********************************************************************************************************************************/
/*! exports provided: ConversationTranslationResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslationResult", function() { return ConversationTranslationResult; });
/* harmony import */ var _TranslationRecognitionResult__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../TranslationRecognitionResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionResult.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.

class ConversationTranslationResult extends _TranslationRecognitionResult__WEBPACK_IMPORTED_MODULE_0__["TranslationRecognitionResult"] {
    constructor(participantId, translations, originalLanguage, resultId, reason, text, duration, offset, errorDetails, json, properties) {
        super(translations, resultId, reason, text, duration, offset, errorDetails, json, properties);
        this.privId = participantId;
        this.privOrigLang = originalLanguage;
    }
    /**
     * The unique identifier for the participant this result is for.
     */
    get participantId() {
        return this.privId;
    }
    /**
     * The original language this result was in.
     */
    get originalLang() {
        return this.privOrigLang;
    }
}

//# sourceMappingURL=ConversationTranslationResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslator.js":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslator.js ***!
  \****************************************************************************************************************************/
/*! exports provided: SpeechState, ConversationTranslator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechState", function() { return SpeechState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslator", function() { return ConversationTranslator; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_speech_Transcription_ConversationTranslatorConnectionFactory__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common.speech/Transcription/ConversationTranslatorConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorConnectionFactory.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _Conversation__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Conversation */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/Conversation.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/* eslint-disable max-classes-per-file */







var SpeechState;
(function (SpeechState) {
    SpeechState[SpeechState["Inactive"] = 0] = "Inactive";
    SpeechState[SpeechState["Connecting"] = 1] = "Connecting";
    SpeechState[SpeechState["Connected"] = 2] = "Connected";
})(SpeechState || (SpeechState = {}));
// child class of TranslationRecognizer meant only for use with ConversationTranslator
class ConversationTranslationRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_4__["TranslationRecognizer"] {
    constructor(speechConfig, audioConfig, translator, convGetter) {
        super(speechConfig, audioConfig, new _common_speech_Transcription_ConversationTranslatorConnectionFactory__WEBPACK_IMPORTED_MODULE_1__["ConversationTranslatorConnectionFactory"](convGetter));
        this.privSpeechState = SpeechState.Inactive;
        if (!!translator) {
            this.privTranslator = translator;
            this.sessionStarted = () => {
                this.privSpeechState = SpeechState.Connected;
            };
            this.sessionStopped = () => {
                this.privSpeechState = SpeechState.Inactive;
            };
            this.recognizing = (tr, e) => {
                if (!!this.privTranslator.recognizing) {
                    this.privTranslator.recognizing(this.privTranslator, e);
                }
            };
            // eslint-disable-next-line @typescript-eslint/no-misused-promises
            this.recognized = (tr, e) => __awaiter(this, void 0, void 0, function* () {
                var _a;
                // if there is an error connecting to the conversation service from the speech service the error will be returned in the ErrorDetails field.
                if ((_a = e.result) === null || _a === void 0 ? void 0 : _a.errorDetails) {
                    yield this.cancelSpeech();
                    // TODO: format the error message contained in 'errorDetails'
                    this.fireCancelEvent(e.result.errorDetails);
                }
                else {
                    if (!!this.privTranslator.recognized) {
                        this.privTranslator.recognized(this.privTranslator, e);
                    }
                }
                return;
            });
            // eslint-disable-next-line @typescript-eslint/no-misused-promises
            this.canceled = () => __awaiter(this, void 0, void 0, function* () {
                if (this.privSpeechState !== SpeechState.Inactive) {
                    try {
                        yield this.cancelSpeech();
                    }
                    catch (error) {
                        this.privSpeechState = SpeechState.Inactive;
                    }
                }
            });
        }
    }
    get state() {
        return this.privSpeechState;
    }
    set state(newState) {
        this.privSpeechState = newState;
    }
    onConnection() {
        this.privSpeechState = SpeechState.Connected;
    }
    onDisconnection() {
        return __awaiter(this, void 0, void 0, function* () {
            this.privSpeechState = SpeechState.Inactive;
            yield this.cancelSpeech();
        });
    }
    /**
     * Fire a cancel event
     * @param error
     */
    fireCancelEvent(error) {
        try {
            if (!!this.privTranslator.canceled) {
                const cancelEvent = new _Exports__WEBPACK_IMPORTED_MODULE_6__["ConversationTranslationCanceledEventArgs"](_Exports__WEBPACK_IMPORTED_MODULE_4__["CancellationReason"].Error, error, _Exports__WEBPACK_IMPORTED_MODULE_4__["CancellationErrorCode"].RuntimeError);
                this.privTranslator.canceled(this.privTranslator, cancelEvent);
            }
        }
        catch (e) {
            //
        }
    }
    cancelSpeech() {
        var _a;
        return __awaiter(this, void 0, void 0, function* () {
            try {
                this.stopContinuousRecognitionAsync();
                yield ((_a = this.privReco) === null || _a === void 0 ? void 0 : _a.disconnect());
                this.privSpeechState = SpeechState.Inactive;
            }
            catch (e) {
                // ignore the error
            }
        });
    }
}
/**
 * Join, leave or connect to a conversation.
 */
class ConversationTranslator extends _Exports__WEBPACK_IMPORTED_MODULE_6__["ConversationCommon"] {
    constructor(audioConfig) {
        super(audioConfig);
        this.privErrors = _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationConnectionConfig"].restErrors;
        this.privIsDisposed = false;
        this.privIsSpeaking = false;
        this.privPlaceholderKey = "abcdefghijklmnopqrstuvwxyz012345";
        this.privPlaceholderRegion = "westus";
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyCollection"]();
    }
    get properties() {
        return this.privProperties;
    }
    get speechRecognitionLanguage() {
        return this.privSpeechRecognitionLanguage;
    }
    get participants() {
        var _a;
        return (_a = this.privConversation) === null || _a === void 0 ? void 0 : _a.participants;
    }
    get canSpeak() {
        // is there a Conversation websocket available and has the Recognizer been set up
        if (!this.privConversation.isConnected || !this.privCTRecognizer) {
            return false;
        }
        // is the user already speaking
        if (this.privIsSpeaking || this.privCTRecognizer.state === SpeechState.Connected || this.privCTRecognizer.state === SpeechState.Connecting) {
            return false;
        }
        // is the user muted
        if (this.privConversation.isMutedByHost) {
            return false;
        }
        return true;
    }
    setServiceProperty(name, value) {
        const currentProperties = JSON.parse(this.privProperties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ServicePropertiesPropertyName"], "{}"));
        currentProperties[name] = value;
        this.privProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ServicePropertiesPropertyName"], JSON.stringify(currentProperties));
    }
    joinConversationAsync(conversation, nickname, param1, param2, param3) {
        try {
            if (typeof conversation === "string") {
                _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNullOrUndefined(conversation, this.privErrors.invalidArgs.replace("{arg}", "conversation id"));
                _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNullOrWhitespace(nickname, this.privErrors.invalidArgs.replace("{arg}", "nickname"));
                if (!!this.privConversation) {
                    this.handleError(new Error(this.privErrors.permissionDeniedStart), param3);
                }
                let lang = param1;
                if (lang === undefined || lang === null || lang === "") {
                    lang = _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ConversationConnectionConfig"].defaultLanguageCode;
                }
                // create a placeholder config
                this.privSpeechTranslationConfig = _Exports__WEBPACK_IMPORTED_MODULE_4__["SpeechTranslationConfig"].fromSubscription(this.privPlaceholderKey, this.privPlaceholderRegion);
                this.privSpeechTranslationConfig.setProfanity(_Exports__WEBPACK_IMPORTED_MODULE_4__["ProfanityOption"].Masked);
                this.privSpeechTranslationConfig.addTargetLanguage(lang);
                this.privSpeechTranslationConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_RecoLanguage], lang);
                this.privSpeechTranslationConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].ConversationTranslator_Name], nickname);
                const propertyIdsToCopy = [
                    _Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_Host,
                    _Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].ConversationTranslator_Host,
                    _Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_Endpoint,
                    _Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_ProxyHostName,
                    _Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_ProxyPassword,
                    _Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_ProxyPort,
                    _Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_ProxyUserName,
                    "ConversationTranslator_MultiChannelAudio",
                    "ConversationTranslator_Region"
                ];
                for (const prop of propertyIdsToCopy) {
                    const value = this.privProperties.getProperty(prop);
                    if (value) {
                        const key = typeof prop === "string" ? prop : _Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"][prop];
                        this.privSpeechTranslationConfig.setProperty(key, value);
                    }
                }
                const currentProperties = JSON.parse(this.privProperties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ServicePropertiesPropertyName"], "{}"));
                for (const prop of Object.keys(currentProperties)) {
                    this.privSpeechTranslationConfig.setServiceProperty(prop, currentProperties[prop], _Exports__WEBPACK_IMPORTED_MODULE_4__["ServicePropertyChannel"].UriQueryParameter);
                }
                // join the conversation
                this.privConversation = new _Conversation__WEBPACK_IMPORTED_MODULE_5__["ConversationImpl"](this.privSpeechTranslationConfig);
                this.privConversation.conversationTranslator = this;
                this.privConversation.joinConversationAsync(conversation, nickname, lang, ((result) => {
                    if (!result) {
                        this.handleError(new Error(this.privErrors.permissionDeniedConnect), param3);
                    }
                    this.privSpeechTranslationConfig.authorizationToken = result;
                    this.privConversation.room.isHost = false;
                    // connect to the ws
                    this.privConversation.startConversationAsync((() => {
                        this.handleCallback(param2, param3);
                    }), ((error) => {
                        this.handleError(error, param3);
                    }));
                }), ((error) => {
                    this.handleError(error, param3);
                }));
            }
            else if (typeof conversation === "object") {
                _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNullOrUndefined(conversation, this.privErrors.invalidArgs.replace("{arg}", "conversation id"));
                _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNullOrWhitespace(nickname, this.privErrors.invalidArgs.replace("{arg}", "nickname"));
                // save the nickname
                this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].ConversationTranslator_Name, nickname);
                // ref the conversation object
                this.privConversation = conversation;
                // ref the conversation translator object
                this.privConversation.conversationTranslator = this;
                this.privConversation.room.isHost = true;
                _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNullOrUndefined(this.privConversation, this.privErrors.permissionDeniedConnect);
                _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNullOrUndefined(this.privConversation.room.token, this.privErrors.permissionDeniedConnect);
                this.privSpeechTranslationConfig = conversation.config;
                this.handleCallback(param1, param2);
            }
            else {
                this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}", "invalid conversation type")), param2);
            }
        }
        catch (error) {
            this.handleError(error, typeof param1 === "string" ? param3 : param2);
        }
    }
    /**
     * Leave the conversation
     * @param cb
     * @param err
     */
    leaveConversationAsync(cb, err) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_2__["marshalPromiseToCallbacks"])((() => __awaiter(this, void 0, void 0, function* () {
            // stop the speech websocket
            yield this.cancelSpeech();
            // stop the websocket
            yield this.privConversation.endConversationImplAsync();
            // https delete request
            yield this.privConversation.deleteConversationImplAsync();
            this.dispose();
        }))(), cb, err);
    }
    /**
     * Send a text message
     * @param message
     * @param cb
     * @param err
     */
    sendTextMessageAsync(message, cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNullOrUndefined(this.privConversation, this.privErrors.permissionDeniedSend);
            _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNullOrWhitespace(message, this.privErrors.invalidArgs.replace("{arg}", message));
            this.privConversation.sendTextMessageAsync(message, cb, err);
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Start speaking
     * @param cb
     * @param err
     */
    startTranscribingAsync(cb, err) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_2__["marshalPromiseToCallbacks"])((() => __awaiter(this, void 0, void 0, function* () {
            try {
                _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNullOrUndefined(this.privConversation, this.privErrors.permissionDeniedSend);
                _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNullOrUndefined(this.privConversation.room.token, this.privErrors.permissionDeniedConnect);
                if (this.privCTRecognizer === undefined) {
                    yield this.connectTranslatorRecognizer();
                }
                _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNullOrUndefined(this.privCTRecognizer, this.privErrors.permissionDeniedSend);
                if (!this.canSpeak) {
                    this.handleError(new Error(this.privErrors.permissionDeniedSend), err);
                }
                yield this.startContinuousRecognition();
                this.privIsSpeaking = true;
            }
            catch (error) {
                this.privIsSpeaking = false;
                yield this.cancelSpeech();
                throw error;
            }
        }))(), cb, err);
    }
    /**
     * Stop speaking
     * @param cb
     * @param err
     */
    stopTranscribingAsync(cb, err) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_2__["marshalPromiseToCallbacks"])((() => __awaiter(this, void 0, void 0, function* () {
            try {
                if (!this.privIsSpeaking) {
                    // stop speech
                    yield this.cancelSpeech();
                    return;
                }
                // stop the recognition but leave the websocket open
                this.privIsSpeaking = false;
                yield new Promise((resolve, reject) => {
                    this.privCTRecognizer.stopContinuousRecognitionAsync(resolve, reject);
                });
            }
            catch (error) {
                yield this.cancelSpeech();
            }
        }))(), cb, err);
    }
    isDisposed() {
        return this.privIsDisposed;
    }
    dispose(reason, success, err) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_2__["marshalPromiseToCallbacks"])((() => __awaiter(this, void 0, void 0, function* () {
            if (this.isDisposed && !this.privIsSpeaking) {
                return;
            }
            yield this.cancelSpeech();
            this.privIsDisposed = true;
            this.privSpeechTranslationConfig.close();
            this.privSpeechRecognitionLanguage = undefined;
            this.privProperties = undefined;
            this.privAudioConfig = undefined;
            this.privSpeechTranslationConfig = undefined;
            this.privConversation.dispose();
            this.privConversation = undefined;
        }))(), success, err);
    }
    /**
     * Cancel the speech websocket
     */
    cancelSpeech() {
        var _a;
        return __awaiter(this, void 0, void 0, function* () {
            try {
                this.privIsSpeaking = false;
                yield ((_a = this.privCTRecognizer) === null || _a === void 0 ? void 0 : _a.onDisconnection());
                this.privCTRecognizer = undefined;
            }
            catch (e) {
                // ignore the error
            }
        });
    }
    /**
     * Connect to the speech translation recognizer.
     * Currently there is no language validation performed before sending the SpeechLanguage code to the service.
     * If it's an invalid language the raw error will be: 'Error during WebSocket handshake: Unexpected response code: 400'
     * e.g. pass in 'fr' instead of 'fr-FR', or a text-only language 'cy'
     */
    connectTranslatorRecognizer() {
        return __awaiter(this, void 0, void 0, function* () {
            try {
                if (this.privAudioConfig === undefined) {
                    this.privAudioConfig = _Exports__WEBPACK_IMPORTED_MODULE_4__["AudioConfig"].fromDefaultMicrophoneInput();
                }
                // clear the temp subscription key if it's a participant joining
                if (this.privSpeechTranslationConfig.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_Key])
                    === this.privPlaceholderKey) {
                    this.privSpeechTranslationConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_Key], "");
                }
                const convGetter = () => this.privConversation;
                this.privCTRecognizer = new ConversationTranslationRecognizer(this.privSpeechTranslationConfig, this.privAudioConfig, this, convGetter);
            }
            catch (error) {
                yield this.cancelSpeech();
                throw error;
            }
        });
    }
    /**
     * Handle the start speaking request
     */
    startContinuousRecognition() {
        return new Promise((resolve, reject) => {
            this.privCTRecognizer.startContinuousRecognitionAsync(resolve, reject);
        });
    }
}

//# sourceMappingURL=ConversationTranslator.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/Exports.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/Exports.js ***!
  \*************************************************************************************************************/
/*! exports provided: Conversation, ConversationImpl, ConversationCommon, ConversationExpirationEventArgs, ConversationParticipantsChangedEventArgs, ConversationTranslationCanceledEventArgs, ConversationTranslationEventArgs, ConversationTranslationResult, ConversationTranslator, ConversationTranscriber, Participant, User, ParticipantChangedReason */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Conversation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Conversation */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/Conversation.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Conversation", function() { return _Conversation__WEBPACK_IMPORTED_MODULE_0__["Conversation"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationImpl", function() { return _Conversation__WEBPACK_IMPORTED_MODULE_0__["ConversationImpl"]; });

/* harmony import */ var _ConversationCommon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConversationCommon */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationCommon.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationCommon", function() { return _ConversationCommon__WEBPACK_IMPORTED_MODULE_1__["ConversationCommon"]; });

/* harmony import */ var _ConversationExpirationEventArgs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConversationExpirationEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationExpirationEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationExpirationEventArgs", function() { return _ConversationExpirationEventArgs__WEBPACK_IMPORTED_MODULE_2__["ConversationExpirationEventArgs"]; });

/* harmony import */ var _ConversationParticipantsChangedEventArgs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ConversationParticipantsChangedEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationParticipantsChangedEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationParticipantsChangedEventArgs", function() { return _ConversationParticipantsChangedEventArgs__WEBPACK_IMPORTED_MODULE_3__["ConversationParticipantsChangedEventArgs"]; });

/* harmony import */ var _ConversationTranslationCanceledEventArgs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ConversationTranslationCanceledEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationCanceledEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslationCanceledEventArgs", function() { return _ConversationTranslationCanceledEventArgs__WEBPACK_IMPORTED_MODULE_4__["ConversationTranslationCanceledEventArgs"]; });

/* harmony import */ var _ConversationTranslationEventArgs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ConversationTranslationEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslationEventArgs", function() { return _ConversationTranslationEventArgs__WEBPACK_IMPORTED_MODULE_5__["ConversationTranslationEventArgs"]; });

/* harmony import */ var _ConversationTranslationResult__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ConversationTranslationResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslationResult", function() { return _ConversationTranslationResult__WEBPACK_IMPORTED_MODULE_6__["ConversationTranslationResult"]; });

/* harmony import */ var _ConversationTranslator__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ConversationTranslator */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslator.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranslator", function() { return _ConversationTranslator__WEBPACK_IMPORTED_MODULE_7__["ConversationTranslator"]; });

/* harmony import */ var _ConversationTranscriber__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ConversationTranscriber */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranscriber.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConversationTranscriber", function() { return _ConversationTranscriber__WEBPACK_IMPORTED_MODULE_8__["ConversationTranscriber"]; });

/* harmony import */ var _IParticipant__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./IParticipant */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/IParticipant.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Participant", function() { return _IParticipant__WEBPACK_IMPORTED_MODULE_9__["Participant"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "User", function() { return _IParticipant__WEBPACK_IMPORTED_MODULE_9__["User"]; });

/* harmony import */ var _ParticipantChangedReason__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./ParticipantChangedReason */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ParticipantChangedReason.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ParticipantChangedReason", function() { return _ParticipantChangedReason__WEBPACK_IMPORTED_MODULE_10__["ParticipantChangedReason"]; });

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.












//# sourceMappingURL=Exports.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/IParticipant.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/IParticipant.js ***!
  \******************************************************************************************************************/
/*! exports provided: User, Participant */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "User", function() { return User; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Participant", function() { return Participant; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
/* eslint-disable max-classes-per-file */

class User {
    constructor(userId) {
        this.privUserId = userId;
    }
    get userId() {
        return this.privUserId;
    }
}
class Participant {
    constructor(id, avatar, displayName, isHost, isMuted, isUsingTts, preferredLanguage, voice) {
        this.privId = id;
        this.privAvatar = avatar;
        this.privDisplayName = displayName;
        this.privIsHost = isHost;
        this.privIsMuted = isMuted;
        this.privIsUsingTts = isUsingTts;
        this.privPreferredLanguage = preferredLanguage;
        this.privVoice = voice;
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyCollection"]();
    }
    get avatar() {
        return this.privAvatar;
    }
    get displayName() {
        return this.privDisplayName;
    }
    get id() {
        return this.privId;
    }
    get preferredLanguage() {
        return this.privPreferredLanguage;
    }
    get isHost() {
        return this.privIsHost;
    }
    get isMuted() {
        return this.privIsMuted;
    }
    get isUsingTts() {
        return this.privIsUsingTts;
    }
    get voice() {
        return this.privVoice;
    }
    get properties() {
        return this.privProperties;
    }
    static From(id, language, voice) {
        return new Participant(id, "", id, false, false, false, language, voice);
    }
}

//# sourceMappingURL=IParticipant.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ParticipantChangedReason.js":
/*!******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ParticipantChangedReason.js ***!
  \******************************************************************************************************************************/
/*! exports provided: ParticipantChangedReason */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ParticipantChangedReason", function() { return ParticipantChangedReason; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
var ParticipantChangedReason;
(function (ParticipantChangedReason) {
    /** Participant has joined the conversation. */
    ParticipantChangedReason[ParticipantChangedReason["JoinedConversation"] = 0] = "JoinedConversation";
    /** Participant has left the conversation. This could be voluntary, or involuntary
     * (e.g. they are experiencing networking issues).
     */
    ParticipantChangedReason[ParticipantChangedReason["LeftConversation"] = 1] = "LeftConversation";
    /** The participants' state has changed (e.g. they became muted, changed their nickname). */
    ParticipantChangedReason[ParticipantChangedReason["Updated"] = 2] = "Updated";
})(ParticipantChangedReason || (ParticipantChangedReason = {}));

//# sourceMappingURL=ParticipantChangedReason.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionCanceledEventArgs.js":
/*!*******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionCanceledEventArgs.js ***!
  \*******************************************************************************************************************************/
/*! exports provided: TranslationRecognitionCanceledEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognitionCanceledEventArgs", function() { return TranslationRecognitionCanceledEventArgs; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Define payload of speech recognition canceled result events.
 * @class TranslationRecognitionCanceledEventArgs
 */
class TranslationRecognitionCanceledEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} sessionid - The session id.
     * @param {CancellationReason} cancellationReason - The cancellation reason.
     * @param {string} errorDetails - Error details, if provided.
     * @param {TranslationRecognitionResult} result - The result.
     */
    constructor(sessionid, cancellationReason, errorDetails, errorCode, result) {
        this.privCancelReason = cancellationReason;
        this.privErrorDetails = errorDetails;
        this.privResult = result;
        this.privSessionId = sessionid;
        this.privErrorCode = errorCode;
    }
    /**
     * Specifies the recognition result.
     * @member TranslationRecognitionCanceledEventArgs.prototype.result
     * @function
     * @public
     * @returns {TranslationRecognitionResult} the recognition result.
     */
    get result() {
        return this.privResult;
    }
    /**
     * Specifies the session identifier.
     * @member TranslationRecognitionCanceledEventArgs.prototype.sessionId
     * @function
     * @public
     * @returns {string} the session identifier.
     */
    get sessionId() {
        return this.privSessionId;
    }
    /**
     * The reason the recognition was canceled.
     * @member TranslationRecognitionCanceledEventArgs.prototype.reason
     * @function
     * @public
     * @returns {CancellationReason} Specifies the reason canceled.
     */
    get reason() {
        return this.privCancelReason;
    }
    /**
     * The error code in case of an unsuccessful recognition.
     * Added in version 1.1.0.
     * @return An error code that represents the error reason.
     */
    get errorCode() {
        return this.privErrorCode;
    }
    /**
     * In case of an unsuccessful recognition, provides details of the occurred error.
     * @member TranslationRecognitionCanceledEventArgs.prototype.errorDetails
     * @function
     * @public
     * @returns {string} A String that represents the error details.
     */
    get errorDetails() {
        return this.privErrorDetails;
    }
}

//# sourceMappingURL=TranslationRecognitionCanceledEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionEventArgs.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionEventArgs.js ***!
  \***********************************************************************************************************************/
/*! exports provided: TranslationRecognitionEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognitionEventArgs", function() { return TranslationRecognitionEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Translation text result event arguments.
 * @class TranslationRecognitionEventArgs
 */
class TranslationRecognitionEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionEventArgs"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {TranslationRecognitionResult} result - The translation recognition result.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */
    constructor(result, offset, sessionId) {
        super(offset, sessionId);
        this.privResult = result;
    }
    /**
     * Specifies the recognition result.
     * @member TranslationRecognitionEventArgs.prototype.result
     * @function
     * @public
     * @returns {TranslationRecognitionResult} the recognition result.
     */
    get result() {
        return this.privResult;
    }
}

//# sourceMappingURL=TranslationRecognitionEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionResult.js":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionResult.js ***!
  \********************************************************************************************************************/
/*! exports provided: TranslationRecognitionResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognitionResult", function() { return TranslationRecognitionResult; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Translation text result.
 * @class TranslationRecognitionResult
 */
class TranslationRecognitionResult extends _Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionResult"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {Translations} translations - The translations.
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */
    constructor(translations, resultId, reason, text, duration, offset, errorDetails, json, properties) {
        super(resultId, reason, text, duration, offset, undefined, undefined, undefined, errorDetails, json, properties);
        this.privTranslations = translations;
    }
    static fromSpeechRecognitionResult(result) {
        return new TranslationRecognitionResult(undefined, result.resultId, result.reason, result.text, result.duration, result.offset, result.errorDetails, result.json, result.properties);
    }
    /**
     * Presents the translation results. Each item in the dictionary represents
     * a translation result in one of target languages, where the key is the name
     * of the target language, in BCP-47 format, and the value is the translation
     * text in the specified language.
     * @member TranslationRecognitionResult.prototype.translations
     * @function
     * @public
     * @returns {Translations} the current translation map that holds all translations requested.
     */
    get translations() {
        return this.privTranslations;
    }
}

//# sourceMappingURL=TranslationRecognitionResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognizer.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognizer.js ***!
  \*************************************************************************************************************/
/*! exports provided: TranslationRecognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognizer", function() { return TranslationRecognizer; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _Connection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Connection */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Connection.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





/**
 * Translation recognizer
 * @class TranslationRecognizer
 */
class TranslationRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_4__["Recognizer"] {
    /**
     * Initializes an instance of the TranslationRecognizer.
     * @constructor
     * @param {SpeechTranslationConfig} speechConfig - Set of properties to configure this recognizer.
     * @param {AudioConfig} audioConfig - An optional audio config associated with the recognizer
     * @param {IConnectionFactory} connectionFactory - An optional connection factory to use to generate the endpoint URIs, headers to set, etc...
     */
    constructor(speechConfig, audioConfig, connectionFactory) {
        const configImpl = speechConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNull(configImpl, "speechConfig");
        super(audioConfig, configImpl.properties, connectionFactory || new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["TranslationConnectionFactory"]());
        this.privDisposedTranslationRecognizer = false;
        if (this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_TranslationVoice, undefined) !== undefined) {
            _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNullOrWhitespace(this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_TranslationVoice), _Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_TranslationVoice]);
        }
        _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNullOrWhitespace(this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_TranslationToLanguages), _Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_TranslationToLanguages]);
        _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNullOrWhitespace(this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_RecoLanguage), _Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_RecoLanguage]);
    }
    /**
     * Gets the language name that was set when the recognizer was created.
     * @member TranslationRecognizer.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @returns {string} Gets the language name that was set when the recognizer was created.
     */
    get speechRecognitionLanguage() {
        _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfDisposed(this.privDisposedTranslationRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_RecoLanguage);
    }
    /**
     * Gets target languages for translation that were set when the recognizer was created.
     * The language is specified in BCP-47 format. The translation will provide translated text for each of language.
     * @member TranslationRecognizer.prototype.targetLanguages
     * @function
     * @public
     * @returns {string[]} Gets target languages for translation that were set when the recognizer was created.
     */
    get targetLanguages() {
        _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfDisposed(this.privDisposedTranslationRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_TranslationToLanguages).split(",");
    }
    /**
     * Gets the name of output voice.
     * @member TranslationRecognizer.prototype.voiceName
     * @function
     * @public
     * @returns {string} the name of output voice.
     */
    get voiceName() {
        _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfDisposed(this.privDisposedTranslationRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_TranslationVoice, undefined);
    }
    /**
     * The collection of properties and their values defined for this TranslationRecognizer.
     * @member TranslationRecognizer.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this TranslationRecognizer.
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member TranslationRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceAuthorization_Token);
    }
    /**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member TranslationRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @param {string} value - Authorization token.
     */
    set authorizationToken(value) {
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceAuthorization_Token, value);
    }
    /**
     * Starts recognition and translation, and stops after the first utterance is recognized.
     * The task returns the translation text as result.
     * Note: recognizeOnceAsync returns when the first utterance has been recognized, so it is suitable only
     * for single shot recognition like command or query. For long-running recognition,
     * use startContinuousRecognitionAsync() instead.
     * @member TranslationRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the result when the translation has completed.
     * @param err - Callback invoked in case of an error.
     */
    recognizeOnceAsync(cb, err) {
        _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfDisposed(this.privDisposedTranslationRecognizer);
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.recognizeOnceAsyncImpl(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionMode"].Conversation), cb, err);
    }
    /**
     * Starts recognition and translation, until stopContinuousRecognitionAsync() is called.
     * User must subscribe to events to receive translation results.
     * @member TranslationRecognizer.prototype.startContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback that received the translation has started.
     * @param err - Callback invoked in case of an error.
     */
    startContinuousRecognitionAsync(cb, err) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.startContinuousRecognitionAsyncImpl(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionMode"].Conversation), cb, err);
    }
    /**
     * Stops continuous recognition and translation.
     * @member TranslationRecognizer.prototype.stopContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback that received the translation has stopped.
     * @param err - Callback invoked in case of an error.
     */
    stopContinuousRecognitionAsync(cb, err) {
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.stopContinuousRecognitionAsyncImpl(), cb, err);
    }
    /**
     * dynamically remove a language from list of target language
     * (can be used while recognition is ongoing)
     * @member TranslationRecognizer.prototype.removeTargetLanguage
     * @function
     * @param lang - language to be removed
     * @public
     */
    removeTargetLanguage(lang) {
        _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNullOrUndefined(lang, "language to be removed");
        if (this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_TranslationToLanguages, undefined) !== undefined) {
            const languages = this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_TranslationToLanguages).split(",");
            const index = languages.indexOf(lang);
            if (index > -1) {
                languages.splice(index, 1);
                this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_TranslationToLanguages, languages.join(","));
                this.updateLanguages(languages);
            }
        }
    }
    /**
     * dynamically add a language to list of target language
     * (can be used while recognition is ongoing)
     * @member TranslationRecognizer.prototype.addTargetLanguage
     * @function
     * @param lang - language to be added
     * @public
     */
    addTargetLanguage(lang) {
        _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfNullOrUndefined(lang, "language to be added");
        let languages = [];
        if (this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_TranslationToLanguages, undefined) !== undefined) {
            languages = this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_TranslationToLanguages).split(",");
            if (!languages.includes(lang)) {
                languages.push(lang);
                this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_TranslationToLanguages, languages.join(","));
            }
        }
        else {
            this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceConnection_TranslationToLanguages, lang);
            languages = [lang];
        }
        this.updateLanguages(languages);
    }
    /**
     * closes all external resources held by an instance of this class.
     * @member TranslationRecognizer.prototype.close
     * @function
     * @public
     */
    close(cb, errorCb) {
        _Contracts__WEBPACK_IMPORTED_MODULE_3__["Contracts"].throwIfDisposed(this.privDisposedTranslationRecognizer);
        Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["marshalPromiseToCallbacks"])(this.dispose(true), cb, errorCb);
    }
    /**
     * handles ConnectionEstablishedEvent for conversation translation scenarios.
     * @member TranslationRecognizer.prototype.onConnection
     * @function
     * @public
     */
    // eslint-disable-next-line @typescript-eslint/no-empty-function
    onConnection() { }
    /**
     * handles disconnection events for conversation translation scenarios.
     * @member TranslationRecognizer.prototype.onDisconnection
     * @function
     * @public
     */
    // eslint-disable-next-line @typescript-eslint/no-empty-function
    onDisconnection() {
        return __awaiter(this, void 0, void 0, function* () { });
    }
    dispose(disposing) {
        const _super = Object.create(null, {
            dispose: { get: () => super.dispose }
        });
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privDisposedTranslationRecognizer) {
                return;
            }
            this.privDisposedTranslationRecognizer = true;
            if (disposing) {
                yield this.implRecognizerStop();
                yield _super.dispose.call(this, disposing);
            }
        });
    }
    createRecognizerConfig(speechConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognizerConfig"](speechConfig, this.properties);
    }
    createServiceRecognizer(authentication, connectionFactory, audioConfig, recognizerConfig) {
        const configImpl = audioConfig;
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["TranslationServiceRecognizer"](authentication, connectionFactory, configImpl, recognizerConfig, this);
    }
    updateLanguages(languages) {
        const conn = _Connection__WEBPACK_IMPORTED_MODULE_2__["Connection"].fromRecognizer(this);
        if (!!conn) {
            conn.setMessageProperty("speech.context", "translationcontext", { to: languages });
            conn.sendMessageAsync("event", JSON.stringify({
                id: "translation",
                name: "updateLanguage",
                to: languages
            }));
        }
    }
}

//# sourceMappingURL=TranslationRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisEventArgs.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisEventArgs.js ***!
  \*********************************************************************************************************************/
/*! exports provided: TranslationSynthesisEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationSynthesisEventArgs", function() { return TranslationSynthesisEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Translation Synthesis event arguments
 * @class TranslationSynthesisEventArgs
 */
class TranslationSynthesisEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["SessionEventArgs"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {TranslationSynthesisResult} result - The translation synthesis result.
     * @param {string} sessionId - The session id.
     */
    constructor(result, sessionId) {
        super(sessionId);
        this.privResult = result;
    }
    /**
     * Specifies the translation synthesis result.
     * @member TranslationSynthesisEventArgs.prototype.result
     * @function
     * @public
     * @returns {TranslationSynthesisResult} Specifies the translation synthesis result.
     */
    get result() {
        return this.privResult;
    }
}

//# sourceMappingURL=TranslationSynthesisEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisResult.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisResult.js ***!
  \******************************************************************************************************************/
/*! exports provided: TranslationSynthesisResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationSynthesisResult", function() { return TranslationSynthesisResult; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines translation synthesis result, i.e. the voice output of the translated
 * text in the target language.
 * @class TranslationSynthesisResult
 */
class TranslationSynthesisResult {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {ResultReason} reason - The synthesis reason.
     * @param {ArrayBuffer} audio - The audio data.
     */
    constructor(reason, audio) {
        this.privReason = reason;
        this.privAudio = audio;
    }
    /**
     * Translated text in the target language.
     * @member TranslationSynthesisResult.prototype.audio
     * @function
     * @public
     * @returns {ArrayBuffer} Translated audio in the target language.
     */
    get audio() {
        return this.privAudio;
    }
    /**
     * The synthesis status.
     * @member TranslationSynthesisResult.prototype.reason
     * @function
     * @public
     * @returns {ResultReason} The synthesis status.
     */
    get reason() {
        return this.privReason;
    }
}

//# sourceMappingURL=TranslationSynthesisResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Translations.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Translations.js ***!
  \****************************************************************************************************/
/*! exports provided: Translations */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Translations", function() { return Translations; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Represents collection of parameters and their values.
 * @class Translations
 */
class Translations {
    constructor() {
        // Use an PropertyCollection internally, just wrapping it to hide the | enum syntax it has.
        this.privMap = new _Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyCollection"]();
    }
    /**
     * Get the languages in the object in a String array.
     * @member Translations.prototype.languages
     * @function
     * @public
     * @returns {string[]} languages in translations object.
     */
    get languages() {
        return this.privMap.keys;
    }
    /**
     * Returns the parameter value in type String. The parameter must have the same type as String.
     * Currently only String, int and bool are allowed.
     * If the name is not available, the specified defaultValue is returned.
     * @member Translations.prototype.get
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} def - The default value which is returned if the parameter is not available in the collection.
     * @returns {string} value of the parameter.
     */
    get(key, def) {
        return this.privMap.getProperty(key, def);
    }
    /**
     * Sets the String value of the parameter specified by name.
     * @member Translations.prototype.set
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} value - The value of the parameter.
     */
    set(key, value) {
        this.privMap.setProperty(key, value);
    }
}

//# sourceMappingURL=Translations.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TurnStatusReceivedEventArgs.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TurnStatusReceivedEventArgs.js ***!
  \*******************************************************************************************************************/
/*! exports provided: TurnStatusReceivedEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TurnStatusReceivedEventArgs", function() { return TurnStatusReceivedEventArgs; });
/* harmony import */ var _common_speech_ServiceMessages_TurnStatusPayload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/ServiceMessages/TurnStatusPayload */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TurnStatusPayload.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Defines contents of received message/events.
 * @class TurnStatusReceivedEventArgs
 */
class TurnStatusReceivedEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} turnStatus - The JSON-encoded turn status message.
     */
    constructor(turnStatus) {
        this.privTurnStatus = _common_speech_ServiceMessages_TurnStatusPayload__WEBPACK_IMPORTED_MODULE_0__["TurnStatusResponsePayload"].fromJSON(turnStatus);
    }
    /**
     * Gets the interaction identifier associated with this turn status event.
     * @member TurnStatusReceivedEventArgs.prototype.interactionId
     * @function
     * @public
     * @returns {any} the received interaction id.
     */
    get interactionId() {
        return this.privTurnStatus.interactionId;
    }
    /**
     * Gets the conversation identifier associated with this turn status event.
     * @member TurnStatusReceivedEventArgs.prototype.conversationId
     * @function
     * @public
     * @returns {any} the received conversation id.
     */
    get conversationId() {
        return this.privTurnStatus.conversationId;
    }
    /**
     * Gets the received turn status code.
     * @member TurnStatusReceivedEventArgs.prototype.statusCode
     * @function
     * @public
     * @returns {number} the received turn status.
     */
    get statusCode() {
        return this.privTurnStatus.statusCode; // eslint-disable-line @typescript-eslint/no-unsafe-return
    }
}

//# sourceMappingURL=TurnStatusReceivedEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceInfo.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceInfo.js ***!
  \*************************************************************************************************/
/*! exports provided: SynthesisVoiceGender, SynthesisVoiceType, VoiceInfo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SynthesisVoiceGender", function() { return SynthesisVoiceGender; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SynthesisVoiceType", function() { return SynthesisVoiceType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VoiceInfo", function() { return VoiceInfo; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines the gender of synthesis voices.
 * Added in version 1.20.0.
 */
var SynthesisVoiceGender;
(function (SynthesisVoiceGender) {
    /** Gender unknown */
    SynthesisVoiceGender[SynthesisVoiceGender["Unknown"] = 0] = "Unknown";
    /** Female voice */
    SynthesisVoiceGender[SynthesisVoiceGender["Female"] = 1] = "Female";
    /** Male voice */
    SynthesisVoiceGender[SynthesisVoiceGender["Male"] = 2] = "Male";
})(SynthesisVoiceGender || (SynthesisVoiceGender = {}));
var SynthesisVoiceType;
(function (SynthesisVoiceType) {
    SynthesisVoiceType[SynthesisVoiceType["OnlineNeural"] = 1] = "OnlineNeural";
    SynthesisVoiceType[SynthesisVoiceType["OnlineStandard"] = 2] = "OnlineStandard";
    SynthesisVoiceType[SynthesisVoiceType["OfflineNeural"] = 3] = "OfflineNeural";
    SynthesisVoiceType[SynthesisVoiceType["OfflineStandard"] = 4] = "OfflineStandard";
})(SynthesisVoiceType || (SynthesisVoiceType = {}));
/**
 * Information about Speech Synthesis voice
 * Added in version 1.20.0.
 * @class VoiceInfo
 */
class VoiceInfo {
    constructor(json) {
        this.privStyleList = [];
        this.privVoicePath = "";
        if (!!json) {
            this.privName = json.Name;
            this.privLocale = json.Locale;
            this.privShortName = json.ShortName;
            this.privLocalName = json.LocalName;
            this.privVoiceType = json.VoiceType.endsWith("Standard") ? SynthesisVoiceType.OnlineStandard : SynthesisVoiceType.OnlineNeural;
            this.privGender = json.Gender === "Male" ? SynthesisVoiceGender.Male : json.Gender === "Female" ? SynthesisVoiceGender.Female : SynthesisVoiceGender.Unknown;
            if (!!json.StyleList && Array.isArray(json.StyleList)) {
                for (const style of json.StyleList) {
                    this.privStyleList.push(style);
                }
            }
        }
    }
    get name() {
        return this.privName;
    }
    get locale() {
        return this.privLocale;
    }
    get shortName() {
        return this.privShortName;
    }
    get localName() {
        return this.privLocalName;
    }
    get gender() {
        return this.privGender;
    }
    get voiceType() {
        return this.privVoiceType;
    }
    get styleList() {
        return this.privStyleList;
    }
    get voicePath() {
        return this.privVoicePath;
    }
}

//# sourceMappingURL=VoiceInfo.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfile.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfile.js ***!
  \****************************************************************************************************/
/*! exports provided: VoiceProfile */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VoiceProfile", function() { return VoiceProfile; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines Voice Profile class for Speaker Recognition
 * @class VoiceProfile
 */
class VoiceProfile {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} profileId - profileId of this Voice Profile.
     * @param {VoiceProfileType} profileType - profileType of this Voice Profile.
     */
    constructor(profileId, profileType) {
        this.privId = profileId;
        this.privProfileType = profileType;
    }
    /**
     * profileId of this Voice Profile instance
     * @member VoiceProfile.prototype.profileId
     * @function
     * @public
     * @returns {string} profileId of this Voice Profile instance.
     */
    get profileId() {
        return this.privId;
    }
    /**
     * profileType of this Voice Profile instance
     * @member VoiceProfile.prototype.profileType
     * @function
     * @public
     * @returns {VoiceProfileType} profile type of this Voice Profile instance.
     */
    get profileType() {
        return this.privProfileType;
    }
}

//# sourceMappingURL=VoiceProfile.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileClient.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileClient.js ***!
  \**********************************************************************************************************/
/*! exports provided: VoiceProfileClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VoiceProfileClient", function() { return VoiceProfileClient; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



/**
 * Defines VoiceProfileClient class for Speaker Recognition
 * Handles operations from user for Voice Profile operations (e.g. createProfile, deleteProfile)
 * @class VoiceProfileClient
 */
class VoiceProfileClient {
    /**
     * VoiceProfileClient constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - An set of initial properties for this synthesizer (authentication key, region, &c)
     */
    constructor(speechConfig) {
        const speechConfigImpl = speechConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(speechConfigImpl, "speechConfig");
        this.privProperties = speechConfigImpl.properties.clone();
        this.implClientSetup();
    }
    /**
     * The collection of properties and their values defined for this VoiceProfileClient.
     * @member VoiceProfileClient.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this VoiceProfileClient.
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member VoiceProfileClient.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token);
    }
    /**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member VoiceProfileClient.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */
    set authorizationToken(token) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(token, "token");
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token, token);
    }
    /**
     * Create a speaker recognition voice profile
     * @member VoiceProfileClient.prototype.createProfileAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfileType} profileType Type of Voice Profile to be created
     * @param {string} lang Language string (locale) for Voice Profile
     * @return {Promise<VoiceProfile>} - Promise of a VoiceProfile.
     */
    createProfileAsync(profileType, lang) {
        return __awaiter(this, void 0, void 0, function* () {
            const result = yield this.privAdapter.createProfile(profileType, lang);
            if (!result.ok) {
                throw new Error(`createProfileAsync failed with code: ${result.status}, message: ${result.statusText}`);
            }
            const response = result.json;
            const profile = new _Exports__WEBPACK_IMPORTED_MODULE_2__["VoiceProfile"](response.profileId, profileType);
            return profile;
        });
    }
    /**
     * Get current information of a voice profile
     * @member VoiceProfileClient.prototype.retrieveEnrollmentResultAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfile} profile Voice Profile to retrieve info for
     * @return {Promise<VoiceProfileEnrollmentResult>} - Promise of a VoiceProfileEnrollmentResult.
     */
    retrieveEnrollmentResultAsync(profile) {
        return __awaiter(this, void 0, void 0, function* () {
            const result = yield this.privAdapter.getProfileStatus(profile);
            return new _Exports__WEBPACK_IMPORTED_MODULE_2__["VoiceProfileEnrollmentResult"](result.ok ? _Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"].EnrolledVoiceProfile : _Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"].Canceled, result.data, result.statusText);
        });
    }
    /**
     * Get all voice profiles on account with given voice profile type
     * @member VoiceProfileClient.prototype.getAllProfilesAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfileType} profileType profile type (identification/verification) for which to list profiles
     * @return {Promise<VoiceProfileEnrollmentResult[]>} - Promise of an array of VoiceProfileEnrollmentResults.
     */
    getAllProfilesAsync(profileType) {
        return __awaiter(this, void 0, void 0, function* () {
            const result = yield this.privAdapter.getProfiles(profileType);
            if (profileType === _Exports__WEBPACK_IMPORTED_MODULE_2__["VoiceProfileType"].TextIndependentIdentification) {
                return _Exports__WEBPACK_IMPORTED_MODULE_2__["VoiceProfileEnrollmentResult"].FromIdentificationProfileList(result.json);
            }
            return _Exports__WEBPACK_IMPORTED_MODULE_2__["VoiceProfileEnrollmentResult"].FromVerificationProfileList(result.json);
        });
    }
    /**
     * Get valid authorization phrases for voice profile enrollment
     * @member VoiceProfileClient.prototype.getAuthorizationPhrasesAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfileType} profileType Profile Type to get activation phrases for
     * @param {string} lang Language string (locale) for Voice Profile
     */
    getActivationPhrasesAsync(profileType, lang) {
        return __awaiter(this, void 0, void 0, function* () {
            const result = yield this.privAdapter.getPhrases(profileType, lang);
            return new _Exports__WEBPACK_IMPORTED_MODULE_2__["VoiceProfilePhraseResult"](result.ok ? _Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"].EnrollingVoiceProfile : _Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"].Canceled, result.statusText, result.json);
        });
    }
    /**
     * Create a speaker recognition voice profile
     * @member VoiceProfileClient.prototype.enrollProfileAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfile} profile Voice Profile to create enrollment for
     * @param {AudioConfig} audioConfig source info from which to create enrollment
     * @return {Promise<VoiceProfileEnrollmentResult>} - Promise of a VoiceProfileEnrollmentResult.
     */
    enrollProfileAsync(profile, audioConfig) {
        return __awaiter(this, void 0, void 0, function* () {
            const configImpl = audioConfig;
            _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrUndefined(configImpl, "audioConfig");
            const result = yield this.privAdapter.createEnrollment(profile, configImpl);
            return new _Exports__WEBPACK_IMPORTED_MODULE_2__["VoiceProfileEnrollmentResult"](result.ok ? _Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"].EnrolledVoiceProfile : _Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"].Canceled, result.data, result.statusText);
        });
    }
    /**
     * Delete a speaker recognition voice profile
     * @member VoiceProfileClient.prototype.deleteProfileAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfile} profile Voice Profile to be deleted
     * @return {Promise<VoiceProfileResult>} - Promise of a VoiceProfileResult.
     */
    deleteProfileAsync(profile) {
        return __awaiter(this, void 0, void 0, function* () {
            const result = yield this.privAdapter.deleteProfile(profile);
            return this.getResult(result, _Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"].DeletedVoiceProfile);
        });
    }
    /**
     * Remove all enrollments for a speaker recognition voice profile
     * @member VoiceProfileClient.prototype.resetProfileAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfile} profile Voice Profile to be reset
     * @return {Promise<VoiceProfileResult>} - Promise of a VoiceProfileResult.
     */
    resetProfileAsync(profile) {
        return __awaiter(this, void 0, void 0, function* () {
            const result = yield this.privAdapter.resetProfile(profile);
            return this.getResult(result, _Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"].ResetVoiceProfile);
        });
    }
    /**
     * Included for compatibility
     * @member VoiceProfileClient.prototype.close
     * @function
     * @public
     */
    close() {
        return;
    }
    // Does class setup, swiped from Recognizer.
    implClientSetup() {
        let osPlatform = (typeof window !== "undefined") ? "Browser" : "Node";
        let osName = "unknown";
        let osVersion = "unknown";
        if (typeof navigator !== "undefined") {
            osPlatform = osPlatform + "/" + navigator.platform;
            osName = navigator.userAgent;
            osVersion = navigator.appVersion;
        }
        const recognizerConfig = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeakerRecognitionConfig"](new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["Context"](new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["OS"](osPlatform, osName, osVersion)), this.privProperties);
        this.privAdapter = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeakerIdMessageAdapter"](recognizerConfig);
    }
    getResult(result, successReason) {
        const response = new _Exports__WEBPACK_IMPORTED_MODULE_2__["VoiceProfileResult"](result.ok ? successReason : _Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"].Canceled, result.statusText);
        return (response);
    }
}

//# sourceMappingURL=VoiceProfileClient.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileEnrollmentResult.js":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileEnrollmentResult.js ***!
  \********************************************************************************************************************/
/*! exports provided: VoiceProfileEnrollmentResult, VoiceProfileEnrollmentCancellationDetails */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VoiceProfileEnrollmentResult", function() { return VoiceProfileEnrollmentResult; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VoiceProfileEnrollmentCancellationDetails", function() { return VoiceProfileEnrollmentCancellationDetails; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */


const parse = (json) => JSON.parse(json);
/**
 * Output format
 * @class VoiceProfileEnrollmentResult
 */
class VoiceProfileEnrollmentResult {
    constructor(reason, json, statusText) {
        this.privReason = reason;
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyCollection"]();
        if (this.privReason !== _Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].Canceled) {
            if (!!json) {
                this.privDetails = parse(json);
                if (this.privDetails.enrollmentStatus.toLowerCase() === "enrolling") {
                    this.privReason = _Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].EnrollingVoiceProfile;
                }
            }
        }
        else {
            this.privErrorDetails = statusText;
            this.privProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCodePropertyName"], _Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"][_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"].ServiceError]);
        }
    }
    get reason() {
        return this.privReason;
    }
    get enrollmentsCount() {
        return this.privDetails.enrollmentsCount;
    }
    get enrollmentsLengthInSec() {
        return this.privDetails.enrollmentsLengthInSec;
    }
    get properties() {
        return this.privProperties;
    }
    get enrollmentResultDetails() {
        return this.privDetails;
    }
    get errorDetails() {
        return this.privErrorDetails;
    }
    static FromIdentificationProfileList(json) {
        const results = [];
        for (const item of json.value) {
            const reason = item.enrollmentStatus.toLowerCase() === "enrolling" ?
                _Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].EnrollingVoiceProfile : item.enrollmentStatus.toLowerCase() === "enrolled" ?
                _Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].EnrolledVoiceProfile : _Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].Canceled;
            const result = new VoiceProfileEnrollmentResult(reason, null, null);
            result.privDetails = this.getIdentificationDetails(item);
            results.push(result);
        }
        return results;
    }
    static FromVerificationProfileList(json) {
        const results = [];
        for (const item of json.value) {
            const reason = item.enrollmentStatus.toLowerCase() === "enrolling" ?
                _Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].EnrollingVoiceProfile : item.enrollmentStatus.toLowerCase() === "enrolled" ?
                _Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].EnrolledVoiceProfile : _Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].Canceled;
            const result = new VoiceProfileEnrollmentResult(reason, null, null);
            result.privDetails = this.getVerificationDetails(item);
            results.push(result);
        }
        return results;
    }
    static getIdentificationDetails(json) {
        return {
            audioLengthInSec: json.audioLengthInSec ? parseFloat(json.audioLengthInSec) : 0,
            audioSpeechLengthInSec: json.audioSpeechLengthInSec ? parseFloat(json.audioSpeechLengthInSec) : 0,
            enrollmentStatus: json.enrollmentStatus,
            enrollmentsCount: json.enrollmentsCount || 0,
            enrollmentsLengthInSec: json.enrollmentsLengthInSec ? parseFloat(json.enrollmentsLengthInSec) : 0,
            enrollmentsSpeechLengthInSec: json.enrollmentsSpeechLengthInSec ? parseFloat(json.enrollmentsSpeechLengthInSec) : 0,
            profileId: json.profileId || json.identificationProfileId,
            remainingEnrollmentsSpeechLengthInSec: json.remainingEnrollmentsSpeechLengthInSec ? parseFloat(json.remainingEnrollmentsSpeechLengthInSec) : 0
        };
    }
    static getVerificationDetails(json) {
        return {
            audioLengthInSec: json.audioLengthInSec ? parseFloat(json.audioLengthInSec) : 0,
            audioSpeechLengthInSec: json.audioSpeechLengthInSec ? parseFloat(json.audioSpeechLengthInSec) : 0,
            enrollmentStatus: json.enrollmentStatus,
            enrollmentsCount: json.enrollmentsCount,
            enrollmentsLengthInSec: json.enrollmentsLengthInSec ? parseFloat(json.enrollmentsLengthInSec) : 0,
            enrollmentsSpeechLengthInSec: json.enrollmentsSpeechLengthInSec ? parseFloat(json.enrollmentsSpeechLengthInSec) : 0,
            profileId: json.profileId || json.verificationProfileId,
            remainingEnrollmentsCount: json.remainingEnrollments || json.remainingEnrollmentsCount,
            remainingEnrollmentsSpeechLengthInSec: json.remainingEnrollmentsSpeechLengthInSec ? parseFloat(json.remainingEnrollmentsSpeechLengthInSec) : 0
        };
    }
}
/**
 * @class VoiceProfileEnrollmentCancellationDetails
 */
class VoiceProfileEnrollmentCancellationDetails extends _Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationDetailsBase"] {
    constructor(reason, errorDetails, errorCode) {
        super(reason, errorDetails, errorCode);
    }
    /**
     * Creates an instance of VoiceProfileEnrollmentCancellationDetails object for the canceled VoiceProfileEnrollmentResult.
     * @member VoiceProfileEnrollmentCancellationDetails.fromResult
     * @function
     * @public
     * @param {VoiceProfileEnrollmentResult} result - The result that was canceled.
     * @returns {VoiceProfileEnrollmentCancellationDetails} The cancellation details object being created.
     */
    static fromResult(result) {
        const reason = _Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationReason"].Error;
        let errorCode = _Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"].NoError;
        if (!!result.properties) {
            errorCode = _Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"][result.properties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCodePropertyName"], _Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"][_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"].NoError])]; //eslint-disable-line
        }
        return new VoiceProfileEnrollmentCancellationDetails(reason, result.errorDetails, errorCode);
    }
}

//# sourceMappingURL=VoiceProfileEnrollmentResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfilePhraseResult.js":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfilePhraseResult.js ***!
  \****************************************************************************************************************/
/*! exports provided: VoiceProfilePhraseResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VoiceProfilePhraseResult", function() { return VoiceProfilePhraseResult; });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * Output format
 * @class VoiceProfilePhraseResult
 */
class VoiceProfilePhraseResult extends _Exports__WEBPACK_IMPORTED_MODULE_1__["VoiceProfileResult"] {
    constructor(reason, statusText, json) {
        super(reason, statusText);
        this.privPhrases = [];
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrUndefined(json, "phrase result JSON");
        if (!!json.value && !!json.value[0]) {
            for (const item of json.value) {
                this.privPhrases.push(item.passPhrase || item.activationPhrase);
            }
        }
    }
    get phrases() {
        return this.privPhrases;
    }
}

//# sourceMappingURL=VoiceProfilePhraseResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileResult.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileResult.js ***!
  \**********************************************************************************************************/
/*! exports provided: VoiceProfileResult, VoiceProfileCancellationDetails */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VoiceProfileResult", function() { return VoiceProfileResult; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VoiceProfileCancellationDetails", function() { return VoiceProfileCancellationDetails; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */



/**
 * Output format
 * @class VoiceProfileResult
 */
class VoiceProfileResult {
    constructor(reason, statusText) {
        this.privReason = reason;
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyCollection"]();
        if (reason === _Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"].Canceled) {
            _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrUndefined(statusText, "statusText");
            this.privErrorDetails = statusText;
            this.privProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCodePropertyName"], _Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"][_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].ServiceError]);
        }
    }
    get reason() {
        return this.privReason;
    }
    get properties() {
        return this.privProperties;
    }
    get errorDetails() {
        return this.privErrorDetails;
    }
}
/**
 * @class VoiceProfileCancellationDetails
 */
class VoiceProfileCancellationDetails extends _Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationDetailsBase"] {
    constructor(reason, errorDetails, errorCode) {
        super(reason, errorDetails, errorCode);
    }
    /**
     * Creates an instance of VoiceProfileCancellationDetails object for the canceled VoiceProfileResult.
     * @member VoiceProfileCancellationDetails.fromResult
     * @function
     * @public
     * @param {VoiceProfileResult} result - The result that was canceled.
     * @returns {VoiceProfileCancellationDetails} The cancellation details object being created.
     */
    static fromResult(result) {
        const reason = _Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].Error;
        let errorCode = _Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].NoError;
        if (!!result.properties) {
            errorCode = _Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"][result.properties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCodePropertyName"], _Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"][_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].NoError])]; //eslint-disable-line
        }
        return new VoiceProfileCancellationDetails(reason, result.errorDetails, errorCode);
    }
}

//# sourceMappingURL=VoiceProfileResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileType.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileType.js ***!
  \********************************************************************************************************/
/*! exports provided: VoiceProfileType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VoiceProfileType", function() { return VoiceProfileType; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Output format
 * @class VoiceProfileType
 */
var VoiceProfileType;
(function (VoiceProfileType) {
    /**
     * Text independent speaker identification
     * @member VoiceProfileType.TextIndependentIdentification
     */
    VoiceProfileType[VoiceProfileType["TextIndependentIdentification"] = 0] = "TextIndependentIdentification";
    /**
     * Text dependent speaker verification
     * @member VoiceProfileType.TextDependentVerification
     */
    VoiceProfileType[VoiceProfileType["TextDependentVerification"] = 1] = "TextDependentVerification";
    /**
     * Text independent speaker verification
     * @member VoiceProfileType.TextIndependentVerification
     */
    VoiceProfileType[VoiceProfileType["TextIndependentVerification"] = 2] = "TextIndependentVerification";
})(VoiceProfileType || (VoiceProfileType = {}));

//# sourceMappingURL=VoiceProfileType.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/bent/src/browser.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/bent/src/browser.js ***!
  \**********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* global fetch, btoa, Headers */
const core = __webpack_require__(/*! ./core */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/bent/src/core.js")

class StatusError extends Error {
  constructor (res, ...params) {
    super(...params)

    if (Error.captureStackTrace) {
      Error.captureStackTrace(this, StatusError)
    }

    this.name = 'StatusError'
    this.message = res.statusMessage
    this.statusCode = res.status
    this.res = res
    this.json = res.json.bind(res)
    this.text = res.text.bind(res)
    this.arrayBuffer = res.arrayBuffer.bind(res)
    let buffer
    const get = () => {
      if (!buffer) buffer = this.arrayBuffer()
      return buffer
    }
    Object.defineProperty(this, 'responseBody', { get })
    // match Node.js headers object
    this.headers = {}
    for (const [key, value] of res.headers.entries()) {
      this.headers[key.toLowerCase()] = value
    }
  }
}

const mkrequest = (statusCodes, method, encoding, headers, baseurl) => async (_url, body, _headers = {}) => {
  _url = baseurl + (_url || '')
  let parsed = new URL(_url)

  if (!headers) headers = {}
  if (parsed.username) {
    headers.Authorization = 'Basic ' + btoa(parsed.username + ':' + parsed.password)
    parsed = new URL(parsed.protocol + '//' + parsed.host + parsed.pathname + parsed.search)
  }
  if (parsed.protocol !== 'https:' && parsed.protocol !== 'http:') {
    throw new Error(`Unknown protocol, ${parsed.protocol}`)
  }

  if (body) {
    if (body instanceof ArrayBuffer ||
      ArrayBuffer.isView(body) ||
      typeof body === 'string'
    ) {
      // noop
    } else if (typeof body === 'object') {
      body = JSON.stringify(body)
      headers['Content-Type'] = 'application/json'
    } else {
      throw new Error('Unknown body type.')
    }
  }

  _headers = new Headers({ ...(headers || {}), ..._headers })

  const resp = await fetch(parsed, { method, headers: _headers, body })
  resp.statusCode = resp.status

  if (!statusCodes.has(resp.status)) {
    throw new StatusError(resp)
  }

  if (encoding === 'json') return resp.json()
  else if (encoding === 'buffer') return resp.arrayBuffer()
  else if (encoding === 'string') return resp.text()
  else return resp
}

module.exports = core(mkrequest)


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/bent/src/core.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/bent/src/core.js ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

const encodings = new Set(['json', 'buffer', 'string'])

module.exports = mkrequest => (...args) => {
  const statusCodes = new Set()
  let method
  let encoding
  let headers
  let baseurl = ''

  args.forEach(arg => {
    if (typeof arg === 'string') {
      if (arg.toUpperCase() === arg) {
        if (method) {
          const msg = `Can't set method to ${arg}, already set to ${method}.`
          throw new Error(msg)
        } else {
          method = arg
        }
      } else if (arg.startsWith('http:') || arg.startsWith('https:')) {
        baseurl = arg
      } else {
        if (encodings.has(arg)) {
          encoding = arg
        } else {
          throw new Error(`Unknown encoding, ${arg}`)
        }
      }
    } else if (typeof arg === 'number') {
      statusCodes.add(arg)
    } else if (typeof arg === 'object') {
      if (Array.isArray(arg) || arg instanceof Set) {
        arg.forEach(code => statusCodes.add(code))
      } else {
        if (headers) {
          throw new Error('Cannot set headers twice.')
        }
        headers = arg
      }
    } else {
      throw new Error(`Unknown type: ${typeof arg}`)
    }
  })

  if (!method) method = 'GET'
  if (statusCodes.size === 0) {
    statusCodes.add(200)
  }

  return mkrequest(statusCodes, method, encoding, headers, baseurl)
}


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/index.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/index.js ***!
  \*********************************************************************************************************/
/*! exports provided: v1, v3, v4, v5, NIL, version, validate, stringify, parse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _v1_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./v1.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/v1.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "v1", function() { return _v1_js__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _v3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./v3.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/v3.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "v3", function() { return _v3_js__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _v4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./v4.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/v4.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "v4", function() { return _v4_js__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _v5_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./v5.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/v5.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "v5", function() { return _v5_js__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _nil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./nil.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/nil.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NIL", function() { return _nil_js__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _version_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./version.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/version.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "version", function() { return _version_js__WEBPACK_IMPORTED_MODULE_5__["default"]; });

/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./validate.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/validate.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "validate", function() { return _validate_js__WEBPACK_IMPORTED_MODULE_6__["default"]; });

/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./stringify.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/stringify.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stringify", function() { return _stringify_js__WEBPACK_IMPORTED_MODULE_7__["default"]; });

/* harmony import */ var _parse_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./parse.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/parse.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "parse", function() { return _parse_js__WEBPACK_IMPORTED_MODULE_8__["default"]; });











/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/md5.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/md5.js ***!
  \*******************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/*
 * Browser-compatible JavaScript MD5
 *
 * Modification of JavaScript MD5
 * https://github.com/blueimp/JavaScript-MD5
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * https://opensource.org/licenses/MIT
 *
 * Based on
 * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message
 * Digest Algorithm, as defined in RFC 1321.
 * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for more info.
 */
function md5(bytes) {
  if (typeof bytes === 'string') {
    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape

    bytes = new Uint8Array(msg.length);

    for (var i = 0; i < msg.length; ++i) {
      bytes[i] = msg.charCodeAt(i);
    }
  }

  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));
}
/*
 * Convert an array of little-endian words to an array of bytes
 */


function md5ToHexEncodedArray(input) {
  var output = [];
  var length32 = input.length * 32;
  var hexTab = '0123456789abcdef';

  for (var i = 0; i < length32; i += 8) {
    var x = input[i >> 5] >>> i % 32 & 0xff;
    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);
    output.push(hex);
  }

  return output;
}
/**
 * Calculate output length with padding and bit length
 */


function getOutputLength(inputLength8) {
  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;
}
/*
 * Calculate the MD5 of an array of little-endian words, and a bit length.
 */


function wordsToMd5(x, len) {
  /* append padding */
  x[len >> 5] |= 0x80 << len % 32;
  x[getOutputLength(len) - 1] = len;
  var a = 1732584193;
  var b = -271733879;
  var c = -1732584194;
  var d = 271733878;

  for (var i = 0; i < x.length; i += 16) {
    var olda = a;
    var oldb = b;
    var oldc = c;
    var oldd = d;
    a = md5ff(a, b, c, d, x[i], 7, -680876936);
    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);
    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);
    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);
    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);
    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);
    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);
    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);
    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);
    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);
    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);
    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);
    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);
    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);
    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);
    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);
    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);
    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);
    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);
    b = md5gg(b, c, d, a, x[i], 20, -373897302);
    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);
    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);
    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);
    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);
    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);
    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);
    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);
    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);
    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);
    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);
    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);
    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);
    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);
    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);
    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);
    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);
    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);
    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);
    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);
    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);
    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);
    d = md5hh(d, a, b, c, x[i], 11, -358537222);
    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);
    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);
    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);
    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);
    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);
    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);
    a = md5ii(a, b, c, d, x[i], 6, -198630844);
    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);
    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);
    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);
    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);
    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);
    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);
    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);
    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);
    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);
    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);
    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);
    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);
    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);
    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);
    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);
    a = safeAdd(a, olda);
    b = safeAdd(b, oldb);
    c = safeAdd(c, oldc);
    d = safeAdd(d, oldd);
  }

  return [a, b, c, d];
}
/*
 * Convert an array bytes to an array of little-endian words
 * Characters >255 have their high-byte silently ignored.
 */


function bytesToWords(input) {
  if (input.length === 0) {
    return [];
  }

  var length8 = input.length * 8;
  var output = new Uint32Array(getOutputLength(length8));

  for (var i = 0; i < length8; i += 8) {
    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;
  }

  return output;
}
/*
 * Add integers, wrapping at 2^32. This uses 16-bit operations internally
 * to work around bugs in some JS interpreters.
 */


function safeAdd(x, y) {
  var lsw = (x & 0xffff) + (y & 0xffff);
  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);
  return msw << 16 | lsw & 0xffff;
}
/*
 * Bitwise rotate a 32-bit number to the left.
 */


function bitRotateLeft(num, cnt) {
  return num << cnt | num >>> 32 - cnt;
}
/*
 * These functions implement the four basic operations the algorithm uses.
 */


function md5cmn(q, a, b, x, s, t) {
  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);
}

function md5ff(a, b, c, d, x, s, t) {
  return md5cmn(b & c | ~b & d, a, b, x, s, t);
}

function md5gg(a, b, c, d, x, s, t) {
  return md5cmn(b & d | c & ~d, a, b, x, s, t);
}

function md5hh(a, b, c, d, x, s, t) {
  return md5cmn(b ^ c ^ d, a, b, x, s, t);
}

function md5ii(a, b, c, d, x, s, t) {
  return md5cmn(c ^ (b | ~d), a, b, x, s, t);
}

/* harmony default export */ __webpack_exports__["default"] = (md5);

/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/nil.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/nil.js ***!
  \*******************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ('00000000-0000-0000-0000-000000000000');

/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/parse.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/parse.js ***!
  \*********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/validate.js");


function parse(uuid) {
  if (!Object(_validate_js__WEBPACK_IMPORTED_MODULE_0__["default"])(uuid)) {
    throw TypeError('Invalid UUID');
  }

  var v;
  var arr = new Uint8Array(16); // Parse ########-....-....-....-............

  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;
  arr[1] = v >>> 16 & 0xff;
  arr[2] = v >>> 8 & 0xff;
  arr[3] = v & 0xff; // Parse ........-####-....-....-............

  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;
  arr[5] = v & 0xff; // Parse ........-....-####-....-............

  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;
  arr[7] = v & 0xff; // Parse ........-....-....-####-............

  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;
  arr[9] = v & 0xff; // Parse ........-....-....-....-############
  // (Use "/" to avoid 32-bit truncation when bit-shifting high-order bytes)

  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;
  arr[11] = v / 0x100000000 & 0xff;
  arr[12] = v >>> 24 & 0xff;
  arr[13] = v >>> 16 & 0xff;
  arr[14] = v >>> 8 & 0xff;
  arr[15] = v & 0xff;
  return arr;
}

/* harmony default export */ __webpack_exports__["default"] = (parse);

/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/regex.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/regex.js ***!
  \*********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i);

/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/rng.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/rng.js ***!
  \*******************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return rng; });
// Unique ID creation requires a high quality random # generator. In the browser we therefore
// require the crypto API and do not support built-in fallback to lower quality random number
// generators (like Math.random()).
var getRandomValues;
var rnds8 = new Uint8Array(16);
function rng() {
  // lazy load so that environments that need to polyfill have a chance to do so
  if (!getRandomValues) {
    // getRandomValues needs to be invoked in a context where "this" is a Crypto implementation. Also,
    // find the complete implementation of crypto (msCrypto) on IE11.
    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);

    if (!getRandomValues) {
      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');
    }
  }

  return getRandomValues(rnds8);
}

/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/sha1.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/sha1.js ***!
  \********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
// Adapted from Chris Veness' SHA1 code at
// http://www.movable-type.co.uk/scripts/sha1.html
function f(s, x, y, z) {
  switch (s) {
    case 0:
      return x & y ^ ~x & z;

    case 1:
      return x ^ y ^ z;

    case 2:
      return x & y ^ x & z ^ y & z;

    case 3:
      return x ^ y ^ z;
  }
}

function ROTL(x, n) {
  return x << n | x >>> 32 - n;
}

function sha1(bytes) {
  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];
  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];

  if (typeof bytes === 'string') {
    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape

    bytes = [];

    for (var i = 0; i < msg.length; ++i) {
      bytes.push(msg.charCodeAt(i));
    }
  } else if (!Array.isArray(bytes)) {
    // Convert Array-like to Array
    bytes = Array.prototype.slice.call(bytes);
  }

  bytes.push(0x80);
  var l = bytes.length / 4 + 2;
  var N = Math.ceil(l / 16);
  var M = new Array(N);

  for (var _i = 0; _i < N; ++_i) {
    var arr = new Uint32Array(16);

    for (var j = 0; j < 16; ++j) {
      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];
    }

    M[_i] = arr;
  }

  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);
  M[N - 1][14] = Math.floor(M[N - 1][14]);
  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;

  for (var _i2 = 0; _i2 < N; ++_i2) {
    var W = new Uint32Array(80);

    for (var t = 0; t < 16; ++t) {
      W[t] = M[_i2][t];
    }

    for (var _t = 16; _t < 80; ++_t) {
      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);
    }

    var a = H[0];
    var b = H[1];
    var c = H[2];
    var d = H[3];
    var e = H[4];

    for (var _t2 = 0; _t2 < 80; ++_t2) {
      var s = Math.floor(_t2 / 20);
      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;
      e = d;
      d = c;
      c = ROTL(b, 30) >>> 0;
      b = a;
      a = T;
    }

    H[0] = H[0] + a >>> 0;
    H[1] = H[1] + b >>> 0;
    H[2] = H[2] + c >>> 0;
    H[3] = H[3] + d >>> 0;
    H[4] = H[4] + e >>> 0;
  }

  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];
}

/* harmony default export */ __webpack_exports__["default"] = (sha1);

/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/stringify.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/stringify.js ***!
  \*************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/validate.js");

/**
 * Convert array of 16 byte values to UUID string format of the form:
 * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
 */

var byteToHex = [];

for (var i = 0; i < 256; ++i) {
  byteToHex.push((i + 0x100).toString(16).substr(1));
}

function stringify(arr) {
  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
  // Note: Be careful editing this code!  It's been tuned for performance
  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434
  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one
  // of the following:
  // - One or more input array values don't map to a hex octet (leading to
  // "undefined" in the uuid)
  // - Invalid input values for the RFC `version` or `variant` fields

  if (!Object(_validate_js__WEBPACK_IMPORTED_MODULE_0__["default"])(uuid)) {
    throw TypeError('Stringified UUID is invalid');
  }

  return uuid;
}

/* harmony default export */ __webpack_exports__["default"] = (stringify);

/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/v1.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/v1.js ***!
  \******************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rng.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/rng.js");
/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringify.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/stringify.js");

 // **`v1()` - Generate time-based UUID**
//
// Inspired by https://github.com/LiosK/UUID.js
// and http://docs.python.org/library/uuid.html

var _nodeId;

var _clockseq; // Previous uuid creation time


var _lastMSecs = 0;
var _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details

function v1(options, buf, offset) {
  var i = buf && offset || 0;
  var b = buf || new Array(16);
  options = options || {};
  var node = options.node || _nodeId;
  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not
  // specified.  We do this lazily to minimize issues related to insufficient
  // system entropy.  See #189

  if (node == null || clockseq == null) {
    var seedBytes = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_0__["default"])();

    if (node == null) {
      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)
      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];
    }

    if (clockseq == null) {
      // Per 4.2.2, randomize (14 bit) clockseq
      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;
    }
  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,
  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so
  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'
  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.


  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock
  // cycle to simulate higher resolution clock

  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)

  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression

  if (dt < 0 && options.clockseq === undefined) {
    clockseq = clockseq + 1 & 0x3fff;
  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new
  // time interval


  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {
    nsecs = 0;
  } // Per 4.2.1.2 Throw error if too many uuids are requested


  if (nsecs >= 10000) {
    throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");
  }

  _lastMSecs = msecs;
  _lastNSecs = nsecs;
  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch

  msecs += 12219292800000; // `time_low`

  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;
  b[i++] = tl >>> 24 & 0xff;
  b[i++] = tl >>> 16 & 0xff;
  b[i++] = tl >>> 8 & 0xff;
  b[i++] = tl & 0xff; // `time_mid`

  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;
  b[i++] = tmh >>> 8 & 0xff;
  b[i++] = tmh & 0xff; // `time_high_and_version`

  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version

  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)

  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`

  b[i++] = clockseq & 0xff; // `node`

  for (var n = 0; n < 6; ++n) {
    b[i + n] = node[n];
  }

  return buf || Object(_stringify_js__WEBPACK_IMPORTED_MODULE_1__["default"])(b);
}

/* harmony default export */ __webpack_exports__["default"] = (v1);

/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/v3.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/v3.js ***!
  \******************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _v35_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./v35.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/v35.js");
/* harmony import */ var _md5_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./md5.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/md5.js");


var v3 = Object(_v35_js__WEBPACK_IMPORTED_MODULE_0__["default"])('v3', 0x30, _md5_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (v3);

/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/v35.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/v35.js ***!
  \*******************************************************************************************************/
/*! exports provided: DNS, URL, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DNS", function() { return DNS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "URL", function() { return URL; });
/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./stringify.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/stringify.js");
/* harmony import */ var _parse_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parse.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/parse.js");



function stringToBytes(str) {
  str = unescape(encodeURIComponent(str)); // UTF8 escape

  var bytes = [];

  for (var i = 0; i < str.length; ++i) {
    bytes.push(str.charCodeAt(i));
  }

  return bytes;
}

var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';
var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';
/* harmony default export */ __webpack_exports__["default"] = (function (name, version, hashfunc) {
  function generateUUID(value, namespace, buf, offset) {
    if (typeof value === 'string') {
      value = stringToBytes(value);
    }

    if (typeof namespace === 'string') {
      namespace = Object(_parse_js__WEBPACK_IMPORTED_MODULE_1__["default"])(namespace);
    }

    if (namespace.length !== 16) {
      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');
    } // Compute hash of namespace and value, Per 4.3
    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =
    // hashfunc([...namespace, ... value])`


    var bytes = new Uint8Array(16 + value.length);
    bytes.set(namespace);
    bytes.set(value, namespace.length);
    bytes = hashfunc(bytes);
    bytes[6] = bytes[6] & 0x0f | version;
    bytes[8] = bytes[8] & 0x3f | 0x80;

    if (buf) {
      offset = offset || 0;

      for (var i = 0; i < 16; ++i) {
        buf[offset + i] = bytes[i];
      }

      return buf;
    }

    return Object(_stringify_js__WEBPACK_IMPORTED_MODULE_0__["default"])(bytes);
  } // Function#name is not settable on some platforms (#270)


  try {
    generateUUID.name = name; // eslint-disable-next-line no-empty
  } catch (err) {} // For CommonJS default export support


  generateUUID.DNS = DNS;
  generateUUID.URL = URL;
  return generateUUID;
});

/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/v4.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/v4.js ***!
  \******************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rng.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/rng.js");
/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringify.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/stringify.js");



function v4(options, buf, offset) {
  options = options || {};
  var rnds = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_0__["default"])(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`

  rnds[6] = rnds[6] & 0x0f | 0x40;
  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided

  if (buf) {
    offset = offset || 0;

    for (var i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }

    return buf;
  }

  return Object(_stringify_js__WEBPACK_IMPORTED_MODULE_1__["default"])(rnds);
}

/* harmony default export */ __webpack_exports__["default"] = (v4);

/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/v5.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/v5.js ***!
  \******************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _v35_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./v35.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/v35.js");
/* harmony import */ var _sha1_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sha1.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/sha1.js");


var v5 = Object(_v35_js__WEBPACK_IMPORTED_MODULE_0__["default"])('v5', 0x50, _sha1_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (v5);

/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/validate.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/validate.js ***!
  \************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _regex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regex.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/regex.js");


function validate(uuid) {
  return typeof uuid === 'string' && _regex_js__WEBPACK_IMPORTED_MODULE_0__["default"].test(uuid);
}

/* harmony default export */ __webpack_exports__["default"] = (validate);

/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/version.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/version.js ***!
  \***********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ "./node_modules/microsoft-cognitiveservices-speech-sdk/node_modules/uuid/dist/esm-browser/validate.js");


function version(uuid) {
  if (!Object(_validate_js__WEBPACK_IMPORTED_MODULE_0__["default"])(uuid)) {
    throw TypeError('Invalid UUID');
  }

  return parseInt(uuid.substr(14, 1), 16);
}

/* harmony default export */ __webpack_exports__["default"] = (version);

/***/ }),

/***/ "./node_modules/vue-style-loader/index.js?!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/components/common/test/chat.vue?vue&type=style&index=0&lang=scss&":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-style-loader??ref--9-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--9-oneOf-1-2!./node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/common/test/chat.vue?vue&type=style&index=0&lang=scss& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(/*! !../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib??vue-loader-options!./chat.vue?vue&type=style&index=0&lang=scss& */ "./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/components/common/test/chat.vue?vue&type=style&index=0&lang=scss&");
if(content.__esModule) content = content.default;
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add the styles to the DOM
var add = __webpack_require__(/*! ../../../../node_modules/vue-style-loader/lib/addStylesClient.js */ "./node_modules/vue-style-loader/lib/addStylesClient.js").default
var update = add("64ccc1ff", content, false, {"sourceMap":false,"shadowMode":false});
// Hot Module Replacement
if(false) {}

/***/ }),

/***/ "./node_modules/vue-style-loader/index.js?!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/components/common/test/chat.vue?vue&type=style&index=1&lang=scss&":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-style-loader??ref--9-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--9-oneOf-1-2!./node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/common/test/chat.vue?vue&type=style&index=1&lang=scss& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(/*! !../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib??vue-loader-options!./chat.vue?vue&type=style&index=1&lang=scss& */ "./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/components/common/test/chat.vue?vue&type=style&index=1&lang=scss&");
if(content.__esModule) content = content.default;
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add the styles to the DOM
var add = __webpack_require__(/*! ../../../../node_modules/vue-style-loader/lib/addStylesClient.js */ "./node_modules/vue-style-loader/lib/addStylesClient.js").default
var update = add("7ee8409e", content, false, {"sourceMap":false,"shadowMode":false});
// Hot Module Replacement
if(false) {}

/***/ }),

/***/ "./src/api/dyy.js":
/*!************************!*\
  !*** ./src/api/dyy.js ***!
  \************************/
/*! exports provided: getResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getResult", function() { return getResult; });
/* harmony import */ var _request1__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./request1 */ "./src/api/request1.js");

var baseUrl = "/v1"; //服务器是water类，本地没有加

/*
大竞赛水治理排名
 */

function getResult(data) {
  return Object(_request1__WEBPACK_IMPORTED_MODULE_0__["default"])({
    url: baseUrl + "/chat-messages",
    method: "post",
    data: data
  });
}

/***/ }),

/***/ "./src/api/request1.js":
/*!*****************************!*\
  !*** ./src/api/request1.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ "./node_modules/axios/index.js");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__);


axios__WEBPACK_IMPORTED_MODULE_1___default.a.defaults.baseURL =  false ? undefined : ""; // 创建axios实例

var service = axios__WEBPACK_IMPORTED_MODULE_1___default.a.create({
  timeout: 50000,
  retry: 2,
  // 请求次数,
  retryInterval: 1000 // 请求超时后，1s再次请求

});
service.interceptors.request.use(function (config) {
  config.baseURL = 'http://10.221.29.4:48049'; //打包app时用

  config.headers["authorization"] = "Bearer app-0qAHrgC7JZMIKyVsDKtpFirF"; // config.headers[ 'X-Access-Token' ] = store.state.token;

  return config;
}, function (error) {
  console.log(error); // for debug

  return Promise.reject(error);
});
/* harmony default export */ __webpack_exports__["default"] = (service);

/***/ }),

/***/ "./src/components/common/test/chat.vue":
/*!*********************************************!*\
  !*** ./src/components/common/test/chat.vue ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _chat_vue_vue_type_template_id_7a67d9be___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chat.vue?vue&type=template&id=7a67d9be& */ "./src/components/common/test/chat.vue?vue&type=template&id=7a67d9be&");
/* harmony import */ var _chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat.vue?vue&type=script&lang=js& */ "./src/components/common/test/chat.vue?vue&type=script&lang=js&");
/* empty/unused harmony star reexport *//* harmony import */ var _chat_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chat.vue?vue&type=style&index=0&lang=scss& */ "./src/components/common/test/chat.vue?vue&type=style&index=0&lang=scss&");
/* harmony import */ var _chat_vue_vue_type_style_index_1_lang_scss___WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chat.vue?vue&type=style&index=1&lang=scss& */ "./src/components/common/test/chat.vue?vue&type=style&index=1&lang=scss&");
/* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");







/* normalize component */

var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_4__["default"])(
  _chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _chat_vue_vue_type_template_id_7a67d9be___WEBPACK_IMPORTED_MODULE_0__["render"],
  _chat_vue_vue_type_template_id_7a67d9be___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* hot reload */
if (false) { var api; }
component.options.__file = "src/components/common/test/chat.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./src/components/common/test/chat.vue?vue&type=script&lang=js&":
/*!**********************************************************************!*\
  !*** ./src/components/common/test/chat.vue?vue&type=script&lang=js& ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_cache_loader_dist_cjs_js_ref_13_0_node_modules_babel_loader_lib_index_js_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/babel-loader/lib!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib??vue-loader-options!./chat.vue?vue&type=script&lang=js& */ "./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/components/common/test/chat.vue?vue&type=script&lang=js&");
/* empty/unused harmony star reexport */ /* harmony default export */ __webpack_exports__["default"] = (_node_modules_cache_loader_dist_cjs_js_ref_13_0_node_modules_babel_loader_lib_index_js_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "./src/components/common/test/chat.vue?vue&type=style&index=0&lang=scss&":
/*!*******************************************************************************!*\
  !*** ./src/components/common/test/chat.vue?vue&type=style&index=0&lang=scss& ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_9_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../node_modules/vue-style-loader??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib??vue-loader-options!./chat.vue?vue&type=style&index=0&lang=scss& */ "./node_modules/vue-style-loader/index.js?!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/components/common/test/chat.vue?vue&type=style&index=0&lang=scss&");
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_9_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_ref_9_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_ref_9_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_ref_9_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));


/***/ }),

/***/ "./src/components/common/test/chat.vue?vue&type=style&index=1&lang=scss&":
/*!*******************************************************************************!*\
  !*** ./src/components/common/test/chat.vue?vue&type=style&index=1&lang=scss& ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_9_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_style_index_1_lang_scss___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../node_modules/vue-style-loader??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib??vue-loader-options!./chat.vue?vue&type=style&index=1&lang=scss& */ "./node_modules/vue-style-loader/index.js?!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/components/common/test/chat.vue?vue&type=style&index=1&lang=scss&");
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_9_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_style_index_1_lang_scss___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_ref_9_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_style_index_1_lang_scss___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_ref_9_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_style_index_1_lang_scss___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_ref_9_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_style_index_1_lang_scss___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));


/***/ }),

/***/ "./src/components/common/test/chat.vue?vue&type=template&id=7a67d9be&":
/*!****************************************************************************!*\
  !*** ./src/components/common/test/chat.vue?vue&type=template&id=7a67d9be& ***!
  \****************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_cache_vue_loader_cacheIdentifier_4bae0482_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_template_id_7a67d9be___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"4bae0482-vue-loader-template"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib??vue-loader-options!./chat.vue?vue&type=template&id=7a67d9be& */ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/.cache/vue-loader\",\"cacheIdentifier\":\"4bae0482-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/components/common/test/chat.vue?vue&type=template&id=7a67d9be&");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_cache_vue_loader_cacheIdentifier_4bae0482_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_template_id_7a67d9be___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_cache_vue_loader_cacheIdentifier_4bae0482_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_template_id_7a67d9be___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./src/utils/SpeechRecord.js":
/*!***********************************!*\
  !*** ./src/utils/SpeechRecord.js ***!
  \***********************************/
/*! exports provided: sttFromMic, sttFromFile */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sttFromMic", function() { return sttFromMic; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sttFromFile", function() { return sttFromFile; });
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var microsoft_cognitiveservices_speech_sdk__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! microsoft-cognitiveservices-speech-sdk */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/microsoft.cognitiveservices.speech.sdk.js");

// https://learn.microsoft.com/zh-cn/azure/ai-services/speech-service/how-to-recognize-speech?pivots=programming-language-javascript#recognize-speech-from-a-microphone


var sttFromMic = function sttFromMic() {
  var speechConfig = microsoft_cognitiveservices_speech_sdk__WEBPACK_IMPORTED_MODULE_1__["SpeechConfig"].fromSubscription('318b7ad093db436c9b8abf33c5a8ecd5', 'eastasia');
  speechConfig.speechRecognitionLanguage = 'zh-CN';
  speechConfig.endpointId = '2b8d3549-899b-494b-89c4-65e4eacf3de7'; // 直接使用 speech-sdk 的持续录音转换功能，不需要自己实现录音

  var audioConfig = microsoft_cognitiveservices_speech_sdk__WEBPACK_IMPORTED_MODULE_1__["AudioConfig"].fromDefaultMicrophoneInput();
  return new microsoft_cognitiveservices_speech_sdk__WEBPACK_IMPORTED_MODULE_1__["SpeechRecognizer"](speechConfig, audioConfig);
}; // 自己实现录音，然后用读文件的方式调用，后面如果换成公司的服务，可能需要这种方式

var sttFromFile = function sttFromFile(file) {
  return new Promise(function (resolve) {
    var speechConfig = microsoft_cognitiveservices_speech_sdk__WEBPACK_IMPORTED_MODULE_1__["SpeechConfig"].fromSubscription('318b7ad093db436c9b8abf33c5a8ecd5', 'eastasia');
    speechConfig.speechRecognitionLanguage = 'zh-CN';
    speechConfig.endpointId = '2b8d3549-899b-494b-89c4-65e4eacf3de7'; // 从文件对象读取文件流，写入push stream

    var pushStream = microsoft_cognitiveservices_speech_sdk__WEBPACK_IMPORTED_MODULE_1__["AudioInputStream"].createPushStream();
    var reader = new FileReader();

    reader.onloadend = function (evt) {
      var arrayBuffer = evt.target.result;
      console.log(arrayBuffer);
      pushStream.write(arrayBuffer);
      pushStream.close();
      console.log('pushStream', pushStream); // const audioConfig = speechsdk.AudioConfig.fromWavFileInput(file);

      var audioConfig = microsoft_cognitiveservices_speech_sdk__WEBPACK_IMPORTED_MODULE_1__["AudioConfig"].fromStreamInput(pushStream);
      console.log('audioConfig', audioConfig); // todo 目前读取不到文字， 不确定是否是pushStream.write 的问题。也有可能是cordova-plugin-media的文件格式不符合（需要16 kHz 16 位单声道 PCM）
      // https://learn.microsoft.com/zh-cn/javascript/api/microsoft-cognitiveservices-speech-sdk/audioinputstream?view=azure-node-latest#microsoft-cognitiveservices-speech-sdk-audioinputstream-createpushstream

      resolve(new microsoft_cognitiveservices_speech_sdk__WEBPACK_IMPORTED_MODULE_1__["SpeechRecognizer"](speechConfig, audioConfig));
    };

    reader.readAsArrayBuffer(file);
  });
};

/***/ }),

/***/ 1:
/*!********************!*\
  !*** fs (ignored) ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 2:
/*!********************!*\
  !*** fs (ignored) ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 3:
/*!********************!*\
  !*** ws (ignored) ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 4:
/*!*********************!*\
  !*** tls (ignored) ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 5:
/*!******************************************!*\
  !*** ../../external/ocsp/ocsp (ignored) ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 6:
/*!****************************!*\
  !*** agent-base (ignored) ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 7:
/*!**********************************!*\
  !*** async-disk-cache (ignored) ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 8:
/*!***********************************!*\
  !*** https-proxy-agent (ignored) ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 9:
/*!*********************!*\
  !*** net (ignored) ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvUHJpbWl0aXZlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b1Byb3BlcnR5S2V5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YuanMiLCJ3ZWJwYWNrOi8vL3NyYy9jb21wb25lbnRzL2NvbW1vbi90ZXN0L2NoYXQudnVlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2NvbW1vbi90ZXN0L2NoYXQudnVlP2Q0YzAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2RhdGUtdG8tcHJpbWl0aXZlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9zdHJpbmctcGFkLXdlYmtpdC1idWcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3N0cmluZy1wYWQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3N0cmluZy1wdW55Y29kZS10by1hc2NpaS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvc3RyaW5nLXRyaW0tZm9yY2VkLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy91cmwtY29uc3RydWN0b3ItZGV0ZWN0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1wcmltaXRpdmUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5mcm9tLWNvZGUtcG9pbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucGFkLXN0YXJ0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wudG8tcHJpbWl0aXZlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmNvbnN0cnVjdG9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvd2ViLnVybC5jb25zdHJ1Y3Rvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL3dlYi51cmwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvY29tbW9uL3Rlc3QvY2hhdC52dWU/YTA3YyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jb21tb24vdGVzdC9jaGF0LnZ1ZT9lODM2Iiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9taWNyb3NvZnQuY29nbml0aXZlc2VydmljZXMuc3BlZWNoLnNkay5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5icm93c2VyL0NlcnRDaGVja3MuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uYnJvd3Nlci9Db25zb2xlTG9nZ2luZ0xpc3RlbmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLmJyb3dzZXIvRXhwb3J0cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5icm93c2VyL0ZpbGVBdWRpb1NvdXJjZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5icm93c2VyL0lSZWNvcmRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5icm93c2VyL01pY0F1ZGlvU291cmNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLmJyb3dzZXIvUENNUmVjb3JkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uYnJvd3Nlci9Qcm94eUluZm8uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uYnJvd3Nlci9SZXBsYXlhYmxlQXVkaW9Ob2RlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLmJyb3dzZXIvUmVzdENvbmZpZ0Jhc2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uYnJvd3Nlci9SZXN0TWVzc2FnZUFkYXB0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uYnJvd3Nlci9XZWJzb2NrZXRDb25uZWN0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLmJyb3dzZXIvV2Vic29ja2V0TWVzc2FnZUFkYXB0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0FkZGVkTG1JbnRlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0FnZW50Q29uZmlnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9Db2duaXRpdmVTdWJzY3JpcHRpb25LZXlBdXRoZW50aWNhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvQ29nbml0aXZlVG9rZW5BdXRoZW50aWNhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvQ29ubmVjdGlvbkZhY3RvcnlCYXNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9Db252ZXJzYXRpb25TZXJ2aWNlUmVjb2duaXplci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvRGlhbG9nQ29ubmVjdG9yRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvRGlhbG9nU2VydmljZUFkYXB0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0RpYWxvZ1NlcnZpY2VUdXJuU3RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0RpYWxvZ1NlcnZpY2VUdXJuU3RhdGVNYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9EeW5hbWljR3JhbW1hckJ1aWxkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0R5bmFtaWNHcmFtbWFySW50ZXJmYWNlcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvRW51bVRyYW5zbGF0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9FeHBvcnRzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9IZWFkZXJOYW1lcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvSUF1dGhlbnRpY2F0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9JQ29ubmVjdGlvbkZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0lTeW50aGVzaXNDb25uZWN0aW9uRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvSW50ZW50Q29ubmVjdGlvbkZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0ludGVudFNlcnZpY2VSZWNvZ25pemVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9RdWVyeVBhcmFtZXRlck5hbWVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9SZWNvZ25pdGlvbkV2ZW50cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvUmVjb2duaXplckNvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvUmVxdWVzdFNlc3Npb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NlcnZpY2VNZXNzYWdlcy9BY3Rpdml0eVJlc3BvbnNlUGF5bG9hZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL0RldGFpbGVkU3BlZWNoUGhyYXNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TZXJ2aWNlTWVzc2FnZXMvRW51bXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NlcnZpY2VNZXNzYWdlcy9JbnRlbnRSZXNwb25zZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL1NpbXBsZVNwZWVjaFBocmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL1NwZWVjaERldGVjdGVkLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TZXJ2aWNlTWVzc2FnZXMvU3BlZWNoSHlwb3RoZXNpcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL1NwZWVjaEtleXdvcmQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NlcnZpY2VNZXNzYWdlcy9TeW50aGVzaXNBdWRpb01ldGFkYXRhLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TZXJ2aWNlTWVzc2FnZXMvVHJhbnNsYXRpb25IeXBvdGhlc2lzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TZXJ2aWNlTWVzc2FnZXMvVHJhbnNsYXRpb25QaHJhc2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NlcnZpY2VNZXNzYWdlcy9UcmFuc2xhdGlvblN5bnRoZXNpc0VuZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL1R1cm5TdGF0dXNQYXlsb2FkLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TZXJ2aWNlUmVjb2duaXplckJhc2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lci5JbnRlcm5hbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU3BlYWtlcklkTWVzc2FnZUFkYXB0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NwZWFrZXJSZWNvZ25pdGlvbkNvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU3BlZWNoQ29ubmVjdGlvbkZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NwZWVjaENvbm5lY3Rpb25NZXNzYWdlLkludGVybmFsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TcGVlY2hDb250ZXh0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TcGVlY2hTZXJ2aWNlSW50ZXJmYWNlcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU3BlZWNoU2VydmljZVJlY29nbml6ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NwZWVjaFN5bnRoZXNpc0Nvbm5lY3Rpb25GYWN0b3J5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TeW50aGVzaXNBZGFwdGVyQmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU3ludGhlc2lzQ29udGV4dC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU3ludGhlc2lzRXZlbnRzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TeW50aGVzaXNSZXN0QWRhcHRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU3ludGhlc2lzVHVybi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU3ludGhlc2l6ZXJDb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1RyYW5zY3JpYmVyQ29ubmVjdGlvbkZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1RyYW5zY3JpcHRpb24vQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNjcmlwdGlvbi9Db252ZXJzYXRpb25Db25uZWN0aW9uRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNjcmlwdGlvbi9Db252ZXJzYXRpb25Db25uZWN0aW9uTWVzc2FnZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNjcmlwdGlvbi9Db252ZXJzYXRpb25NYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9UcmFuc2NyaXB0aW9uL0NvbnZlcnNhdGlvblJlcXVlc3RTZXNzaW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9UcmFuc2NyaXB0aW9uL0NvbnZlcnNhdGlvblNlcnZpY2VBZGFwdGVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9UcmFuc2NyaXB0aW9uL0NvbnZlcnNhdGlvblRyYW5zbGF0b3JDb25uZWN0aW9uRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNjcmlwdGlvbi9Db252ZXJzYXRpb25UcmFuc2xhdG9yRXZlbnRBcmdzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9UcmFuc2NyaXB0aW9uL0NvbnZlcnNhdGlvblRyYW5zbGF0b3JJbnRlcmZhY2VzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9UcmFuc2NyaXB0aW9uL0NvbnZlcnNhdGlvblRyYW5zbGF0b3JSZWNvZ25pemVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9UcmFuc2NyaXB0aW9uL0NvbnZlcnNhdGlvbldlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1RyYW5zY3JpcHRpb24vRXhwb3J0cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNjcmlwdGlvbi9TZXJ2aWNlTWVzc2FnZXMvQ29tbWFuZFJlc3BvbnNlUGF5bG9hZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNjcmlwdGlvbi9TZXJ2aWNlTWVzc2FnZXMvRXhwb3J0cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNjcmlwdGlvbi9TZXJ2aWNlTWVzc2FnZXMvUGFydGljaXBhbnRSZXNwb25zZVBheWxvYWQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1RyYW5zY3JpcHRpb24vU2VydmljZU1lc3NhZ2VzL1RyYW5zbGF0aW9uUmVzcG9uc2VQYXlsb2FkLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9UcmFuc2NyaXB0aW9uL1RyYW5zY3JpYmVyUmVjb2duaXplci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNjcmlwdGlvblNlcnZpY2VSZWNvZ25pemVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9UcmFuc2xhdGlvbkNvbm5lY3Rpb25GYWN0b3J5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9UcmFuc2xhdGlvblNlcnZpY2VSZWNvZ25pemVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9UcmFuc2xhdGlvblN0YXR1cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9BdWRpb1NvdXJjZUV2ZW50cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9CYWNrZ3JvdW5kRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vQ2h1bmtlZEFycmF5QnVmZmVyU3RyZWFtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL0Nvbm5lY3Rpb25FdmVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vQ29ubmVjdGlvbk1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vQ29ubmVjdGlvbk9wZW5SZXNwb25zZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9EaWFsb2dFdmVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vRXZlbnRTb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vRXZlbnRzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL0V4cG9ydHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vR3VpZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9JQXVkaW9EZXN0aW5hdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9JQXVkaW9Tb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vSUNvbm5lY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vSURldGFjaGFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vSURpY3Rpb25hcnkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vSURpc3Bvc2FibGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vSUVycm9yTWVzc2FnZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vSUV2ZW50U291cmNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL0lUaW1lci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9JV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9MaXN0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL09DU1BFdmVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vUGxhdGZvcm1FdmVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9Qcm9taXNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL1F1ZXVlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL1Jhd1dlYnNvY2tldE1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vUmlmZlBjbUVuY29kZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vU3RyZWFtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL1N0cmluZ1V0aWxzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL1RpbWVvdXQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvQWN0aXZpdHlSZWNlaXZlZEV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9BdWRpby9BdWRpb0NvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9BdWRpby9BdWRpb0ZpbGVXcml0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvQXVkaW8vQXVkaW9JbnB1dFN0cmVhbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9BdWRpby9BdWRpb091dHB1dEZvcm1hdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9BdWRpby9BdWRpb091dHB1dFN0cmVhbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9BdWRpby9BdWRpb1N0cmVhbUZvcm1hdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9BdWRpby9CYXNlQXVkaW9QbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvQXVkaW8vUHVsbEF1ZGlvSW5wdXRTdHJlYW1DYWxsYmFjay5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9BdWRpby9QdXNoQXVkaW9PdXRwdXRTdHJlYW1DYWxsYmFjay5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9BdWRpby9TcGVha2VyQXVkaW9EZXN0aW5hdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9BdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlUmVzdWx0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0JvdEZyYW1ld29ya0NvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9DYW5jZWxsYXRpb25EZXRhaWxzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0NhbmNlbGxhdGlvbkRldGFpbHNCYXNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0NhbmNlbGxhdGlvbkVycm9yQ29kZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvQ2FuY2VsbGF0aW9uRXZlbnRBcmdzQmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9DYW5jZWxsYXRpb25SZWFzb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvQ29ubmVjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Db25uZWN0aW9uRXZlbnRBcmdzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0Nvbm5lY3Rpb25NZXNzYWdlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0Nvbm5lY3Rpb25NZXNzYWdlRXZlbnRBcmdzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0NvbnRyYWN0cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Db252ZXJzYXRpb25UcmFuc2NyaXB0aW9uQ2FuY2VsZWRFdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvQ3VzdG9tQ29tbWFuZHNDb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvRGlhZ25vc3RpY3MuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvRGlhbG9nU2VydmljZUNvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9EaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0V4cG9ydHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvSW50ZW50UmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9JbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9JbnRlbnRSZWNvZ25pdGlvblJlc3VsdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9JbnRlbnRSZWNvZ25pemVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0tleXdvcmRSZWNvZ25pdGlvbk1vZGVsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0xhbmd1YWdlSWRNb2RlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0xhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0xvZ0xldmVsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL05vTWF0Y2hEZXRhaWxzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL05vTWF0Y2hSZWFzb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvT3V0cHV0Rm9ybWF0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1BocmFzZUxpc3RHcmFtbWFyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1Byb2Zhbml0eU9wdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Qcm9udW5jaWF0aW9uQXNzZXNzbWVudENvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Qcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYWRpbmdTeXN0ZW0uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFudWxhcml0eS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Qcm9udW5jaWF0aW9uQXNzZXNzbWVudFJlc3VsdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Qcm9wZXJ0eUNvbGxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvUHJvcGVydHlJZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9SZWNvZ25pdGlvbkV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9SZWNvZ25pdGlvblJlc3VsdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9SZWNvZ25pemVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1Jlc3VsdFJlYXNvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9TZXJ2aWNlRXZlbnRBcmdzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NlcnZpY2VQcm9wZXJ0eUNoYW5uZWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvU2Vzc2lvbkV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Tb3VyY2VMYW5ndWFnZUNvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9TcGVha2VySWRlbnRpZmljYXRpb25Nb2RlbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9TcGVha2VyUmVjb2duaXRpb25SZXN1bHQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvU3BlYWtlclJlY29nbml6ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvU3BlYWtlclZlcmlmaWNhdGlvbk1vZGVsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NwZWVjaENvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9TcGVlY2hSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NwZWVjaFJlY29nbml0aW9uUmVzdWx0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NwZWVjaFJlY29nbml6ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvU3BlZWNoU3ludGhlc2lzQm9va21hcmtFdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvU3BlZWNoU3ludGhlc2lzQm91bmRhcnlUeXBlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NwZWVjaFN5bnRoZXNpc0V2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9TcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvU3BlZWNoU3ludGhlc2lzUmVzdWx0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NwZWVjaFN5bnRoZXNpc1Zpc2VtZUV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9TcGVlY2hTeW50aGVzaXNXb3JkQm91bmRhcnlFdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvU3BlZWNoU3ludGhlc2l6ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvU3BlZWNoVHJhbnNsYXRpb25Db25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvU3ludGhlc2lzUmVzdWx0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1N5bnRoZXNpc1ZvaWNlc1Jlc3VsdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9UcmFuc2NyaXB0aW9uL0NvbnZlcnNhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9UcmFuc2NyaXB0aW9uL0NvbnZlcnNhdGlvbkNvbW1vbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9UcmFuc2NyaXB0aW9uL0NvbnZlcnNhdGlvbkV4cGlyYXRpb25FdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVHJhbnNjcmlwdGlvbi9Db252ZXJzYXRpb25QYXJ0aWNpcGFudHNDaGFuZ2VkRXZlbnRBcmdzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1RyYW5zY3JpcHRpb24vQ29udmVyc2F0aW9uVHJhbnNjcmliZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVHJhbnNjcmlwdGlvbi9Db252ZXJzYXRpb25UcmFuc2xhdGlvbkNhbmNlbGVkRXZlbnRBcmdzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1RyYW5zY3JpcHRpb24vQ29udmVyc2F0aW9uVHJhbnNsYXRpb25FdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVHJhbnNjcmlwdGlvbi9Db252ZXJzYXRpb25UcmFuc2xhdGlvblJlc3VsdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9UcmFuc2NyaXB0aW9uL0NvbnZlcnNhdGlvblRyYW5zbGF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVHJhbnNjcmlwdGlvbi9FeHBvcnRzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1RyYW5zY3JpcHRpb24vSVBhcnRpY2lwYW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1RyYW5zY3JpcHRpb24vUGFydGljaXBhbnRDaGFuZ2VkUmVhc29uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1RyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9UcmFuc2xhdGlvblJlY29nbml0aW9uRXZlbnRBcmdzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1RyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVHJhbnNsYXRpb25SZWNvZ25pemVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1RyYW5zbGF0aW9uU3ludGhlc2lzRXZlbnRBcmdzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1RyYW5zbGF0aW9uU3ludGhlc2lzUmVzdWx0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1RyYW5zbGF0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9UdXJuU3RhdHVzUmVjZWl2ZWRFdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVm9pY2VJbmZvLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1ZvaWNlUHJvZmlsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Wb2ljZVByb2ZpbGVDbGllbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVm9pY2VQcm9maWxlRW5yb2xsbWVudFJlc3VsdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Wb2ljZVByb2ZpbGVQaHJhc2VSZXN1bHQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVm9pY2VQcm9maWxlUmVzdWx0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1ZvaWNlUHJvZmlsZVR5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL25vZGVfbW9kdWxlcy9iZW50L3NyYy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9ub2RlX21vZHVsZXMvYmVudC9zcmMvY29yZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9tZDUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvbmlsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3BhcnNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3JlZ2V4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3JuZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9zaGExLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3N0cmluZ2lmeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92MS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92My5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92MzUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdjQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdjUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdmFsaWRhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdmVyc2lvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jb21tb24vdGVzdC9jaGF0LnZ1ZT82YTIyIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2NvbW1vbi90ZXN0L2NoYXQudnVlP2JiOTAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwaS9keXkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwaS9yZXF1ZXN0MS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jb21tb24vdGVzdC9jaGF0LnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jb21tb24vdGVzdC9jaGF0LnZ1ZT9hOGJkIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2NvbW1vbi90ZXN0L2NoYXQudnVlP2M5MDIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvY29tbW9uL3Rlc3QvY2hhdC52dWU/NjMzMyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jb21tb24vdGVzdC9jaGF0LnZ1ZT9iZjUxIiwid2VicGFjazovLy8uL3NyYy91dGlscy9TcGVlY2hSZWNvcmQuanMiLCJ3ZWJwYWNrOi8vL2ZzIChpZ25vcmVkKT83M2I2Iiwid2VicGFjazovLy9mcyAoaWdub3JlZCk/ZmVjZCIsIndlYnBhY2s6Ly8vd3MgKGlnbm9yZWQpIiwid2VicGFjazovLy90bHMgKGlnbm9yZWQpIiwid2VicGFjazovLy8uLi8uLi9leHRlcm5hbC9vY3NwL29jc3AgKGlnbm9yZWQpIiwid2VicGFjazovLy9hZ2VudC1iYXNlIChpZ25vcmVkKSIsIndlYnBhY2s6Ly8vYXN5bmMtZGlzay1jYWNoZSAoaWdub3JlZCkiLCJ3ZWJwYWNrOi8vL2h0dHBzLXByb3h5LWFnZW50IChpZ25vcmVkKSIsIndlYnBhY2s6Ly8vbmV0IChpZ25vcmVkKSJdLCJuYW1lcyI6WyJfZGVmaW5lUHJvcGVydHkiLCJlIiwiciIsInQiLCJ0b1Byb3BlcnR5S2V5IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIm93bktleXMiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwibyIsImZpbHRlciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInB1c2giLCJhcHBseSIsIl9vYmplY3RTcHJlYWQyIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZm9yRWFjaCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidG9QcmltaXRpdmUiLCJfdHlwZW9mIiwiU3ltYm9sIiwiaSIsImNhbGwiLCJUeXBlRXJyb3IiLCJTdHJpbmciLCJOdW1iZXIiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwiYmFzZVVybCIsImdldFJlc3VsdCIsImRhdGEiLCJyZXF1ZXN0IiwidXJsIiwibWV0aG9kIiwiYXhpb3MiLCJkZWZhdWx0cyIsImJhc2VVUkwiLCJwcm9jZXNzIiwic2VydmljZSIsImNyZWF0ZSIsInRpbWVvdXQiLCJyZXRyeSIsInJldHJ5SW50ZXJ2YWwiLCJpbnRlcmNlcHRvcnMiLCJ1c2UiLCJjb25maWciLCJoZWFkZXJzIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiUHJvbWlzZSIsInJlamVjdCIsInN0dEZyb21NaWMiLCJzcGVlY2hDb25maWciLCJzcGVlY2hzZGsiLCJmcm9tU3Vic2NyaXB0aW9uIiwic3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSIsImVuZHBvaW50SWQiLCJhdWRpb0NvbmZpZyIsImZyb21EZWZhdWx0TWljcm9waG9uZUlucHV0Iiwic3R0RnJvbUZpbGUiLCJmaWxlIiwicmVzb2x2ZSIsInB1c2hTdHJlYW0iLCJjcmVhdGVQdXNoU3RyZWFtIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsIm9ubG9hZGVuZCIsImV2dCIsImFycmF5QnVmZmVyIiwidGFyZ2V0IiwicmVzdWx0Iiwid3JpdGUiLCJjbG9zZSIsImZyb21TdHJlYW1JbnB1dCIsInJlYWRBc0FycmF5QnVmZmVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQ0EsU0FBU0EsZUFBVCxDQUF5QkMsQ0FBekIsRUFBNEJDLENBQTVCLEVBQStCQyxDQUEvQixFQUFrQztBQUNoQyxTQUFPLENBQUNELENBQUMsR0FBR0UsaUVBQWEsQ0FBQ0YsQ0FBRCxDQUFsQixLQUEwQkQsQ0FBMUIsR0FBOEJJLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQkwsQ0FBdEIsRUFBeUJDLENBQXpCLEVBQTRCO0FBQy9ESyxTQUFLLEVBQUVKLENBRHdEO0FBRS9ESyxjQUFVLEVBQUUsQ0FBQyxDQUZrRDtBQUcvREMs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O0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUF1QixrQ0FBa0M7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDhEQUE4RDtBQUNyRjtBQUNBLEtBQUs7QUFDTCxxQkFBcUIsMENB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsV0FBVzs7QUFFWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw2QkFBNkI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVzs7QUFFWDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMkJBQTJCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHVCQUF1QjtBQUMxQztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix1QkFBdUI7QUFDMUM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFD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QUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDc0U7QUFDeEI7QUFDOUM7QUFDQTtBQUNBLDBEQUFNLG9DQUFvQyxrRkFBc0I7QUFDaEU7QUFDa0M7O0FBRWxDOzs7Ozs7Ozs7Ozs7O0FDVkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBSSxJQUFJLFNBQUk7QUFDN0IsMkJBQTJCLCtEQUErRCxnQkFBZ0IsRUFBRSxFQUFFO0FBQzlHO0FBQ0EsbUNBQW1DLE1BQU0sNkJBQTZCLEVBQUUsWUFBWSxXQUFXLEVBQUU7QUFDakcsa0NBQWtDLE1BQU0saUNBQWlDLEVBQUUsWUFBWSxXQUFXLEVBQUU7QUFDcEcsK0JBQStCLHFGQUFxRjtBQUNwSDtBQUNBLEtBQUs7QUFDTDtBQUMyQjtBQUNzQjtBQUN5VztBQUMzWDtBQUMvQjtBQUNBO0FBQ3FDO0FBQ1c7QUFDckI7QUFDc0M7QUFDMUQ7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyx1REFBSyxrREFBa0QscUVBQXFFLDRGQUFXLDJCQUEyQiw0RkFBVyxxQ0FBcUM7QUFDalE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsaURBQUs7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsbUJBQW1CLEdBQUcsNkRBQTZEO0FBQ3BKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyx3REFBZTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyx1RUFBdUI7QUFDaEU7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLDJEQUFZO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MseURBQVUsR0FBRztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsdUVBQXVCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELHFFQUFxQjtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMseURBQVU7QUFDckQ7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHdFQUF3QjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsMEVBQTBCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLCtFQUErQjtBQUN4RTtBQUNBO0FBQ0EsNkNBQTZDLDRFQUF5QjtBQUN0RSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLHlDQUF5QyxpRUFBaUI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsd0VBQXdCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxrRUFBa0I7QUFDbkQ7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMERBQVcsRUFBRSwrQ0FBK0M7QUFDNUU7QUFDQSxtREFBbUQsMkVBQTJCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwwRUFBMEI7QUFDdkQ7QUFDQTtBQUNBLDZCQUE2Qiw0RUFBNEI7QUFDekQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHlFQUF5QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix1RUFBdUI7QUFDcEQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkseURBQVU7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxhQUFhLGlHQUFpRztBQUN0SyxnQkFBZ0IseURBQVU7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQywwRUFBMEI7QUFDL0Q7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsUUFBUSxzREFBTTtBQUNkO0FBQ0E7QUFDQSw4REFBOEQsNEZBQVcseUNBQXlDLDRGQUFXO0FBQzdIO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELDJDQUFXO0FBQzNEO0FBQ0E7QUFDQSxnREFBZ0QsMkNBQVc7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7O0FDeFVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUN5QjtBQUNrQjtBQUNFO0FBQ3RDO0FBQ1AsaUNBQWlDLHNEQUFRO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSx3REFBUyx3QkFBd0IsMkNBQVc7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdEQUFnQixnQ0FBZ0MsYUFBYTtBQUM3RTtBQUNBO0FBQ0EscUJBQXFCLHNEQUFRO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixzREFBUTtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsc0RBQVE7QUFDN0I7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHNEQUFRO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CLGVBQWUsV0FBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsS0FBSyxJQUFJLFdBQVc7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQzFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUN5QztBQUNiO0FBQ0s7QUFDQztBQUNKO0FBQ1E7QUFDSTtBQUNKO0FBQ1Y7QUFDUztBQUNKOztBQUVqQzs7Ozs7Ozs7Ozs7OztBQ2RBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0EsaUJBQWlCLFNBQUksSUFBSSxTQUFJO0FBQzdCLDJCQUEyQiwrREFBK0QsZ0JBQWdCLEVBQUUsRUFBRTtBQUM5RztBQUNBLG1DQUFtQyxNQUFNLDZCQUE2QixFQUFFLFlBQVksV0FBVyxFQUFFO0FBQ2pHLGtDQUFrQyxNQUFNLGlDQUFpQyxFQUFFLFlBQVksV0FBVyxFQUFFO0FBQ3BHLCtCQUErQixxRkFBcUY7QUFDcEg7QUFDQSxLQUFLO0FBQ0w7QUFDK0Q7QUFDdVE7QUFDblE7QUFDNUQ7QUFDUDtBQUNBO0FBQ0E7QUFDQSxzREFBc0Qsd0VBQWdCO0FBQ3RFLDhCQUE4QiwyREFBVztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixxRUFBcUI7QUFDbEQ7QUFDQTtBQUNBLHlCQUF5Qiw0RUFBNEIsZUFBZTtBQUNwRSx5QkFBeUIscUVBQXFCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDZFQUE2QjtBQUMxRDtBQUNBLDZCQUE2Qiw0RUFBNEI7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsNEVBQTRCO0FBQ2pFO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEVBQTRCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsbUVBQW1CLGVBQWU7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLG1FQUFZO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwyREFBSTtBQUN0QixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx3REFBUTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHlCQUF5QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsOEVBQWlCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxrQkFBa0IsS0FBSyxNQUFNO0FBQ2xHLGlDQUFpQyx5RUFBeUI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyx3RUFBd0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQU07QUFDZDtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7QUNyTUE7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQ0hBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBSSxJQUFJLFNBQUk7QUFDN0IsMkJBQTJCLCtEQUErRCxnQkFBZ0IsRUFBRSxFQUFFO0FBQzlHO0FBQ0EsbUNBQW1DLE1BQU0sNkJBQTZCLEVBQUUsWUFBWSxXQUFXLEVBQUU7QUFDakcsa0NBQWtDLE1BQU0saUNBQWlDLEVBQUUsWUFBWSxXQUFXLEVBQUU7QUFDcEcsK0JBQStCLHFGQUFxRjtBQUNwSDtBQUNBLEtBQUs7QUFDTDtBQUM4RDtBQUN3UTtBQUMzTztBQUNwRjtBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCx3RUFBZ0I7QUFDdEUsOEJBQThCLDJEQUFXO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHdEQUFRO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHFFQUFxQixnQkFBZ0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDRFQUE0QixlQUFlO0FBQzVFO0FBQ0EscUNBQXFDLHFFQUFxQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MseUJBQXlCLDBCQUEwQix1QkFBdUI7QUFDNUc7QUFDQSx5Q0FBeUMscUVBQXFCO0FBQzlEO0FBQ0EscUJBQXFCO0FBQ3JCLDZGQUE2RixNQUFNO0FBQ25HO0FBQ0EseUNBQXlDLHFFQUFxQjtBQUM5RCxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhGQUE4RixPQUFPO0FBQ3JHLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDZFQUE2QjtBQUN0RDtBQUNBLDZCQUE2Qiw0RUFBNEI7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsNEVBQTRCO0FBQ2pFO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRFQUE0QjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsbUVBQW1CLGVBQWU7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLG1FQUFZO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwyREFBSTtBQUN0QixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHdEQUFRO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isd0VBQXdCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMseUVBQXlCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQU07QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGtGQUFxQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSw2QkFBNkIsOEVBQWlCOztBQUU5Qzs7Ozs7Ozs7Ozs7OztBQzNRQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ21EO0FBQzVDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyw4REFBYztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLHdCQUF3QjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQ7QUFDNUQsd0RBQXdELCtCQUErQixpQkFBaUI7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUZBQXVGLElBQUk7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUNsSUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUM0QztBQUNyQztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELHVEQUFVLHlFQUF5RSx1REFBVSxpRUFBaUUsdURBQVUsZ0VBQWdFLHVEQUFVO0FBQ3RTO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUM5QkE7QUFBQTtBQUFBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQ3BIQTtBQUFBO0FBQUE7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLElBQUk7QUFDakQsNEZBQTRGLE9BQU87QUFDbkc7QUFDQTtBQUNBLHlFQUF5RSxRQUFRO0FBQ2pGLHdFQUF3RSxRQUFRO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7O0FDakRBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBSSxJQUFJLFNBQUk7QUFDN0IsMkJBQTJCLCtEQUErRCxnQkFBZ0IsRUFBRSxFQUFFO0FBQzlHO0FBQ0EsbUNBQW1DLE1BQU0sNkJBQTZCLEVBQUUsWUFBWSxXQUFXLEVBQUU7QUFDakcsa0NBQWtDLE1BQU0saUNBQWlDLEVBQUUsWUFBWSxXQUFXLEVBQUU7QUFDcEcsK0JBQStCLHFGQUFxRjtBQUNwSDtBQUNBLEtBQUs7QUFDTDtBQUN3QjtBQUN3QztBQUN6RDtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDBDQUEwQztBQUMzQztBQUNPO0FBQ1A7QUFDQTtBQUNBLHNCQUFzQixpRUFBaUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDLDZDQUE2Qyx3REFBUTtBQUNyRDtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxnQ0FBZ0MsMkNBQUk7QUFDcEMsMkVBQTJFLDhCQUE4QjtBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQ3hJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBSSxJQUFJLFNBQUk7QUFDN0IsMkJBQTJCLCtEQUErRCxnQkFBZ0IsRUFBRSxFQUFFO0FBQzlHO0FBQ0EsbUNBQW1DLE1BQU0sNkJBQTZCLEVBQUUsWUFBWSxXQUFXLEVBQUU7QUFDakcsa0NBQWtDLE1BQU0saUNBQWlDLEVBQUUsWUFBWSxXQUFXLEVBQUU7QUFDcEcsK0JBQStCLHFGQUFxRjtBQUNwSDtBQUNBLEtBQUs7QUFDTDtBQUN5RTtBQUNMO0FBQzdEO0FBQ1A7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlFQUFpQjtBQUN2QztBQUNBO0FBQ0Esc0JBQXNCLGlFQUFpQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxJQUFJO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLFdBQVcsR0FBRyxJQUFJO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0Qsd0VBQWdCO0FBQ3BFLGdEQUFnRCxnRkFBdUI7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQ3hGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBSSxJQUFJLFNBQUk7QUFDN0IsMkJBQTJCLCtEQUErRCxnQkFBZ0IsRUFBRSxFQUFFO0FBQzlHO0FBQ0EsbUNBQW1DLE1BQU0sNkJBQTZCLEVBQUUsWUFBWSxXQUFXLEVBQUU7QUFDakcsa0NBQWtDLE1BQU0saUNBQWlDLEVBQUUsWUFBWSxXQUFXLEVBQUU7QUFDcEcsK0JBQStCLHFGQUFxRjtBQUNwSDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ29CO0FBQ3VDO0FBQ3lSO0FBQ3RTO0FBQ3ZDO0FBQ1A7QUFDQTtBQUNBLHNCQUFzQixpRUFBaUI7QUFDdkM7QUFDQTtBQUNBLHNCQUFzQixpRUFBaUI7QUFDdkM7QUFDQTtBQUNBLHdDQUF3QywyREFBVztBQUNuRDtBQUNBO0FBQ0EsbUNBQW1DLCtEQUFlO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHNFQUFXO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QywrREFBZTtBQUN4RCx5RUFBeUUseUJBQXlCO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELHdEQUFRO0FBQzNELG9EQUFvRCx3REFBUTtBQUM1RCxtQ0FBbUMsK0RBQWU7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBLHVDQUF1QywwREFBYztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyx5Q0FBRTtBQUNqRDtBQUNBO0FBQ0EsaURBQWlELHFEQUFLO0FBQ3RELDhDQUE4Qyx3REFBUTtBQUN0RCw0Q0FBNEMscURBQUs7QUFDakQ7QUFDQSxnQkFBZ0Isc0RBQU0sc0JBQXNCLCtEQUFlO0FBQzNELGFBQWE7QUFDYjtBQUNBO0FBQ0EsNkRBQTZELHNFQUFzQjtBQUNuRjtBQUNBO0FBQ0EseUJBQXlCLG9FQUFvQjtBQUM3QztBQUNBO0FBQ0EsMkNBQTJDLCtEQUFlO0FBQzFELGlDQUFpQywwRUFBMEI7QUFDM0QsaUVBQWlFLHNFQUFzQjtBQUN2RixhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLDZCQUE2QixvRUFBb0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLCtEQUFlO0FBQzVELDJDQUEyQywrREFBZTtBQUMxRDtBQUNBLGlFQUFpRSxzRUFBc0I7QUFDdkY7QUFDQTtBQUNBLDJDQUEyQywrREFBZTtBQUMxRDtBQUNBLGlDQUFpQyxxRUFBcUI7QUFDdEQ7QUFDQTtBQUNBLGdCQUFnQixzREFBTSxzQkFBc0IsK0RBQWU7QUFDM0QsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QywrREFBZTtBQUM1RCxxQ0FBcUMsd0RBQVE7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLG1FQUFtQixDQUFDLDJEQUFXO0FBQzFFO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyw4RUFBOEI7QUFDdkU7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxpRkFBaUYsTUFBTTtBQUN2RixxQkFBcUI7QUFDckI7QUFDQTtBQUNBLDJDQUEyQyxtRUFBbUIsQ0FBQywyREFBVztBQUMxRTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsOEVBQThCO0FBQ3ZFO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsK0VBQStFLE1BQU07QUFDckYscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QywrREFBZTtBQUN4RCwwRUFBMEUsK0RBQWUsMkJBQTJCO0FBQ3BIO0FBQ0EsOENBQThDLHdEQUFRO0FBQ3RELHdDQUF3Qyx3REFBUTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCx3RUFBd0UsTUFBTTtBQUM5RSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLCtEQUFlO0FBQ3hELDBFQUEwRSx5QkFBeUI7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QywrREFBZTtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDBFQUEwQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELEVBQUU7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsS0FBSyxJQUFJLE9BQU87QUFDdEUsdUNBQXVDLCtEQUFlO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLGtJQUFrSSxZQUFZLGFBQWEsbUNBQW1DO0FBQzlMLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBTTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQzlQQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7O0FDbkJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7O0FDckJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ3VEO0FBQ1g7QUFDQztBQUM3QztBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsaUVBQWlCO0FBQ3ZDO0FBQ0EsZ0NBQWdDLHlEQUFRLENBQUMsd0RBQVc7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQzVDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNzRDtBQUNUO0FBQ0Q7QUFDckM7QUFDUDtBQUNBO0FBQ0Esc0JBQXNCLGlFQUFpQjtBQUN2QztBQUNBO0FBQ0Esc0JBQXNCLGlFQUFpQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFLHlEQUFRLENBQUMsd0RBQVc7QUFDaEc7QUFDQTtBQUNBLG9GQUFvRix5REFBUSxDQUFDLHdEQUFXO0FBQ3hHO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQ3pCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUMwRTtBQUM5QjtBQUNnQjtBQUNyRDtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx1REFBVSxzQ0FBc0Msd0VBQW1CO0FBQ2hGLGFBQWEsdURBQVUsNkNBQTZDLHdFQUFtQjtBQUN2RixhQUFhLHVEQUFVLDhDQUE4Qyx3RUFBbUI7QUFDeEYsYUFBYSx1REFBVSxrREFBa0Qsd0VBQW1CO0FBQzVGLGFBQWEsdURBQVUsNkNBQTZDLHdFQUFtQjtBQUN2RixhQUFhLHVEQUFVLHdDQUF3Qyx3RUFBbUI7QUFDbEYsYUFBYSx1REFBVSxtREFBbUQsd0VBQW1CO0FBQzdGLGFBQWEsdURBQVUscURBQXFELHdFQUFtQjtBQUMvRjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsMkVBQTJFLG9GQUE2QixLQUFLO0FBQzdHO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUM5Q0E7QUFBQTtBQUFBO0FBQUE7QUFBQSxpQkFBaUIsU0FBSSxJQUFJLFNBQUk7QUFDN0IsMkJBQTJCLCtEQUErRCxnQkFBZ0IsRUFBRSxFQUFFO0FBQzlHO0FBQ0EsbUNBQW1DLE1BQU0sNkJBQTZCLEVBQUUsWUFBWSxXQUFXLEVBQUU7QUFDakcsa0NBQWtDLE1BQU0saUNBQWlDLEVBQUUsWUFBWSxXQUFXLEVBQUU7QUFDcEcsK0JBQStCLHFGQUFxRjtBQUNwSDtBQUNBLEtBQUs7QUFDTDtBQUNxSDtBQUN1RDtBQUNySyw0Q0FBNEMsOERBQXFCO0FBQ3hFO0FBQ0E7QUFDQSxxR0FBcUcsMENBQTBDLEVBQUU7QUFDako7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsMkRBQWtCO0FBQzdDLGlDQUFpQyx3REFBZTtBQUNoRDtBQUNBLG9DQUFvQywrREFBa0I7QUFDdEQsb0NBQW9DLHVEQUFVO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix5REFBWTtBQUM1QixxQ0FBcUMsd0RBQWU7QUFDcEQsOENBQThDLHdEQUFlO0FBQzdELHVGQUF1Rix3REFBZTtBQUN0RztBQUNBO0FBQ0EsZ0ZBQWdGLHlEQUFZLHlDQUF5QywwREFBaUI7QUFDdEoseUVBQXlFLGlFQUF3QixNQUFNLHlEQUFZLENBQUMseURBQVk7QUFDaEkscUNBQXFDLG9FQUF1QjtBQUM1RDtBQUNBO0FBQ0EseUNBQXlDLDZEQUFvQjtBQUM3RDtBQUNBO0FBQ0EscUNBQXFDLG9FQUF1QjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSwyQkFBMkIseURBQWdCO0FBQzNDO0FBQ0EsZ0NBQWdDLCtEQUFrQjtBQUNsRCxnQ0FBZ0MsdURBQVU7QUFDMUMsMkJBQTJCLG9FQUF1QixvQ0FBb0MseURBQVk7QUFDbEc7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUMzR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUM0RTtBQUNSO0FBQ1c7QUFDZjtBQUNWO0FBQ1Y7QUFDZ0I7QUFDckQsc0NBQXNDLDRFQUFxQjtBQUNsRTtBQUNBLDREQUE0RCx1REFBVTtBQUN0RSx5REFBeUQsdURBQVU7QUFDbkUscURBQXFELHVEQUFVO0FBQy9ELHVEQUF1RCx1REFBVTtBQUNqRSxnRUFBZ0UsdURBQVU7QUFDMUU7QUFDQSxvQkFBb0Isd0RBQVc7QUFDL0Isb0JBQW9CLHdFQUFtQix5Q0FBeUMsK0VBQXdCLEVBQUUseURBQVksQ0FBQyx5REFBWTtBQUNuSSxvQkFBb0Isd0VBQW1CO0FBQ3ZDLG9CQUFvQix3RUFBbUI7QUFDdkM7QUFDQSx3QkFBd0Isd0VBQW1CO0FBQzNDLCtCQUErQixnRUFBbUI7QUFDbEQsNEJBQTRCLHdEQUFXO0FBQ3ZDO0FBQ0E7QUFDQSw2Q0FBNkMsZ0VBQW1CO0FBQ2hFO0FBQ0EsdUNBQXVDLGdFQUFtQjtBQUMxRCw2QkFBNkIsZ0VBQW1CO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCx1REFBVTtBQUMvRDtBQUNBLCtCQUErQiw0RUFBcUI7QUFDcEQsdURBQXVELHVEQUFVLHdDQUF3QyxPQUFPLEdBQUcsZ0NBQWdDLEVBQUUsV0FBVztBQUNoSztBQUNBLDBCQUEwQixpQkFBaUIsRUFBRSxjQUFjLEVBQUUsK0JBQStCLEdBQUcsUUFBUTtBQUN2RztBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsMkVBQW1CLHFDQUFxQyxnRkFBeUIsSUFBSSxpRUFBUztBQUNqSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQ3hEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBLGlCQUFpQixTQUFJLElBQUksU0FBSTtBQUM3QiwyQkFBMkIsK0RBQStELGdCQUFnQixFQUFFLEVBQUU7QUFDOUc7QUFDQSxtQ0FBbUMsTUFBTSw2QkFBNkIsRUFBRSxZQUFZLFdBQVcsRUFBRTtBQUNqRyxrQ0FBa0MsTUFBTSxpQ0FBaUMsRUFBRSxZQUFZLFdBQVcsRUFBRTtBQUNwRywrQkFBK0IscUZBQXFGO0FBQ3BIO0FBQ0EsS0FBSztBQUNMO0FBQ2dFO0FBQ1M7QUFDb0U7QUFDdEU7QUFDaVE7QUFDeFA7QUFDK0c7QUFDM0c7QUFDUDtBQUN0RSxtQ0FBbUMsOERBQXFCO0FBQy9EO0FBQ0E7QUFDQSw4QkFBOEIsMkRBQVc7QUFDekM7QUFDQTtBQUNBLHdDQUF3Qyw0RkFBNkI7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxrRUFBVTtBQUM5Qyw4QkFBOEIsd0VBQWdCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MseUZBQXVCLENBQUMsMkRBQVc7QUFDekUsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLCtHQUErRywrREFBa0IsUUFBUSxrRUFBcUI7QUFDOUo7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxnQ0FBZ0MsK0RBQWtCO0FBQ2xELDhDQUE4QywyREFBVztBQUN6RCxvQ0FBb0MsdURBQVU7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQywyREFBa0I7QUFDdkQ7QUFDQSx1REFBdUQsMERBQWlCLHVEQUF1RCwwREFBaUI7QUFDaEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMseURBQWdCO0FBQ25EO0FBQ0EsNkJBQTZCLG9FQUF1QixvQ0FBb0MseURBQVk7QUFDcEc7QUFDQSwrQkFBK0IsdUVBQTBCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHNEQUFhO0FBQzdDLDZCQUE2QixvRUFBdUIsb0VBQW9FLHlEQUFZLHFCQUFxQix5REFBWTtBQUNySztBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsdUVBQTBCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsd0RBQVE7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QywrREFBa0I7QUFDekQsdUNBQXVDLDBFQUFpQyxFQUFFLGtFQUFxQjtBQUMvRix3Q0FBd0MsK0VBQWtDO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0EsdUNBQXVDLG9FQUF1QjtBQUM5RCxvQkFBb0IseURBQVk7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCx1REFBVTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsMkVBQW1CO0FBQ3JEO0FBQ0EsMkVBQTJFO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtSEFBbUgsK0RBQWtCLFFBQVEsa0VBQXFCO0FBQ2xLO0FBQ0E7QUFDQSw4Q0FBOEMsNkRBQWdCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsRUFBRTtBQUMzQyxtSEFBbUgsK0RBQWtCLFFBQVEsa0VBQXFCO0FBQ2xLLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx3REFBUTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHlGQUF1QjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsdURBQWM7QUFDbEUseURBQXlELGlFQUFvQjtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLFlBQVk7QUFDakQ7QUFDQSxtREFBbUQsdURBQWM7QUFDakU7QUFDQSx3REFBd0QsaUVBQW9CO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsNkRBQWdCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLDREQUFZO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxZQUFZLHNEQUFNLHNCQUFzQiwrREFBZTtBQUN2RCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUhBQW1ILCtEQUFrQixRQUFRLGtFQUFxQjtBQUNsSztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVEQUFVLDhCQUE4QixnRUFBbUI7QUFDeEY7QUFDQSxrR0FBa0csdURBQVU7QUFDNUc7QUFDQTtBQUNBLDZCQUE2QixvRkFBK0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLHlGQUF1QixDQUFDLDJEQUFXO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGtFQUFVO0FBQy9CLDhGQUE4Rix1REFBVTtBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyx5RkFBdUIsQ0FBQywyREFBVztBQUN0RTtBQUNBO0FBQ0EsNkJBQTZCLHdEQUFlO0FBQzVDO0FBQ0EsMkJBQTJCLG9FQUF1QjtBQUNsRCx1QkFBdUIsdUVBQTBCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxnR0FBdUI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRkFBMkYsa0ZBQXFCLDhGQUE4Rix1REFBVTtBQUN4TixxQ0FBcUMsc0VBQXlCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnSEFBZ0gsd0VBQTJCO0FBQzNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixzREFBTSxzQkFBc0IsK0RBQWUsZ0NBQWdDLDRCQUE0QjtBQUN2SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBTTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNEO0FBQ3RELGtIQUFrSDtBQUNsSCx3SEFBd0g7QUFDeEg7QUFDQSx1QkFBdUIscUJBQXFCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHNCQUFzQjtBQUNqRDtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7O0FDL2ZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ3VFO0FBQ0o7QUFDZTtBQUMzRTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLDhGQUFxQjtBQUNuRSxtQ0FBbUMsOEVBQWlCO0FBQ3BELHNGQUFzRixrRkFBcUI7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7O0FDakRBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUN3RDtBQUNVO0FBQzNEO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG1FQUFxQjtBQUMzQztBQUNBLDhCQUE4Qiw4RUFBc0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixtRUFBcUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUMvQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsOEJBQThCLHFDQUFxQztBQUNuRTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7O0FDOURBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUNIQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDeUY7QUFDM0M7QUFDdkM7QUFDUDtBQUNBLHFCQUFxQix5REFBWTtBQUNqQztBQUNBLGlCQUFpQiwwREFBaUI7QUFDbEMseUJBQXlCLHlEQUFZO0FBQ3JDO0FBQ0EsaUJBQWlCLDBEQUFpQjtBQUNsQyxpQkFBaUIsMERBQWlCO0FBQ2xDLGlCQUFpQiwwREFBaUI7QUFDbEMsaUJBQWlCLDBEQUFpQjtBQUNsQyx5QkFBeUIseURBQVk7QUFDckM7QUFDQSxpQkFBaUIsMERBQWlCO0FBQ2xDLGlCQUFpQiwwREFBaUI7QUFDbEMsaUJBQWlCLDBEQUFpQjtBQUNsQztBQUNBLHlCQUF5Qix5REFBWTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLCtEQUFrQjtBQUN2QztBQUNBLGlCQUFpQiwwREFBaUI7QUFDbEMsaUJBQWlCLDBEQUFpQjtBQUNsQyxpQkFBaUIsMERBQWlCO0FBQ2xDLHlCQUF5QiwrREFBa0I7QUFDM0M7QUFDQSxpQkFBaUIsMERBQWlCO0FBQ2xDLGlCQUFpQiwwREFBaUI7QUFDbEMsaUJBQWlCLDBEQUFpQjtBQUNsQyxpQkFBaUIsMERBQWlCO0FBQ2xDLGlCQUFpQiwwREFBaUI7QUFDbEM7QUFDQSx5QkFBeUIsK0RBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsa0VBQXFCO0FBQzFDO0FBQ0EsaUJBQWlCLDBEQUFpQjtBQUNsQyx5QkFBeUIsa0VBQXFCO0FBQzlDO0FBQ0EsaUJBQWlCLDBEQUFpQjtBQUNsQyx5QkFBeUIsa0VBQXFCO0FBQzlDO0FBQ0EsaUJBQWlCLDBEQUFpQjtBQUNsQyx5QkFBeUIsa0VBQXFCO0FBQzlDO0FBQ0EsaUJBQWlCLDBEQUFpQjtBQUNsQyx5QkFBeUIsa0VBQXFCO0FBQzlDO0FBQ0E7QUFDQSx5QkFBeUIsa0VBQXFCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGtFQUFxQjtBQUN0QztBQUNBO0FBQ0EsaUJBQWlCLGtFQUFxQjtBQUN0QztBQUNBO0FBQ0EsaUJBQWlCLGtFQUFxQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7O0FDckZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFB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Q0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFNO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUN0T0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxzREFBc0Q7O0FBRXZEOzs7Ozs7Ozs7Ozs7O0FDN0JBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDK0M7QUFDeEM7QUFDUDtBQUNBO0FBQ0EsMERBQTBELDBEQUFpQjtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUM5REE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsMENBQTBDO0FBQ3BDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDhDQUE4Qzs7QUFFL0M7Ozs7Ozs7Ozs7Ozs7QUNyQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7O0FDMUJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDK0M7QUFDeEM7QUFDUDtBQUNBO0FBQ0Esd0RBQXdELDBEQUFpQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7O0FDbENBO0FBQUE7QUFBQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQ2RBO0FBQUE7QUFBQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQzdCQTtBQUFBO0FBQUE7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFBO0FBQUE7QUFDQTtBQUM0RDtBQUNrQjtBQUNLO0FBQ25CO0FBQ2tKO0FBQ2hFOztBQUVsSjs7Ozs7Ozs7Ozs7OztBQ1RBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7O0FDcENBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBa0U7QUFDeUM7QUFDakI7O0FBRTFGOzs7Ozs7Ozs7Ozs7O0FDSkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQzNFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ29DO0FBQ0Q7QUFDQztBQUNLO0FBQ1Y7QUFDUDtBQUNDO0FBQ0s7QUFDUDtBQUNRO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNFO0FBQ1I7QUFDb0I7QUFDdEI7QUFDUztBQUNOO0FBQ0Y7QUFDYztBQUNMO0FBQ1I7QUFDOEM7QUFDNUI7QUFDUDtBQUNWO0FBQ0c7QUFDSzs7QUFFbEM7Ozs7Ozs7Ozs7Ozs7QUNsQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ2tDO0FBQ2xDLHlCQUF5QiwrQ0FBSTtBQUM3QjtBQUN3Qzs7QUFFeEM7Ozs7Ozs7Ozs7OztBQ1BBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7OztBQ0hBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUNIQTtBQUFBO0FBQUE7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsMENBQTBDOztBQUUzQzs7Ozs7Ozs7Ozs7O0FDVkE7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7O0FDSEE7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7O0FDSEE7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7QUNEQTs7Ozs7Ozs7Ozs7O0FDRkE7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7O0FDSEE7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7O0FDSEE7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQ0hBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDOEM7QUFDdkM7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtQkFBbUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDBCQUEwQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwwQkFBMEI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDBEQUFtQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUMxTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDMkQ7QUFDcEQsd0JBQXdCLDREQUFhO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EseUNBQXlDLHdEQUFTO0FBQ2xEO0FBQ0E7QUFDTztBQUNQO0FBQ0Esb0NBQW9DLHdEQUFTO0FBQzdDO0FBQ0E7QUFDTztBQUNQO0FBQ0EsdUNBQXVDLHdEQUFTO0FBQ2hEO0FBQ0E7QUFDTztBQUNQO0FBQ0EsNENBQTRDLHdEQUFTO0FBQ3JEO0FBQ0E7QUFDTztBQUNQO0FBQ0EsMkNBQTJDLHdEQUFTO0FBQ3BEO0FBQ0E7QUFDTztBQUNQO0FBQ0EseUNBQXlDLHdEQUFTO0FBQ2xEO0FBQ0E7QUFDTztBQUNQO0FBQ0EsOENBQThDLHdEQUFTO0FBQ3ZEO0FBQ0E7QUFDTztBQUNQO0FBQ0EseUNBQXlDLHdEQUFTO0FBQ2xEO0FBQ0E7QUFDTztBQUNQO0FBQ0EsMkNBQTJDLHdEQUFTO0FBQ3BEO0FBQ0E7QUFDTztBQUNQO0FBQ0EsNENBQTRDLHdEQUFTO0FBQ3JEO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxpREFBaUQsd0RBQVM7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsbUNBQW1DLHdEQUFTO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSw2Q0FBNkMsd0RBQVM7QUFDdEQ7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLDBDQUEwQyx3REFBUztBQUNuRDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsNENBQTRDLHdEQUFTO0FBQ3JEO0FBQ0E7QUFDTztBQUNQO0FBQ0EsMkNBQTJDLHdEQUFTO0FBQ3BEO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQ3JHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDMEM7QUFDbkM7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDhCQUE4QjtBQUN4QjtBQUNQO0FBQ0E7QUFDQSwyQkFBMkIsOERBQWdCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUNwQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxvQ0FBb0M7QUFDOUI7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHFDQUFxQztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxFQUFFO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUNBO0FBQ0E7QUFDQTtBQUNPLG9DQUFvQyx3RUFBcUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsT0FBTztBQUN0QixlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsT0FBTztBQUN0QixlQUFlLE9BQU87QUFDdEIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0EsaURBQWlELGlFQUFjO0FBQy9EO0FBQ0E7QUFDQSxpREFBaUQsaUVBQWM7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLHdGQUEyQjtBQUNoQyxLQUFLLHdGQUEyQjtBQUNoQyxLQUFLLHdGQUEyQjtBQUNoQyxLQUFLLHdGQUEyQjtBQUNoQyxLQUFLLHdGQUEyQjtBQUNoQyxLQUFLLHdGQUEyQjtBQUNoQyxLQUFLLHdGQUEyQjtBQUNoQyxLQUFLLHdGQUEyQjtBQUNoQyxLQUFLLHdGQUEyQjtBQUNoQyxLQUFLLHdGQUEyQjtBQUNoQyxLQUFLLHdGQUEyQjtBQUNoQyxLQUFLLHdGQUEyQjtBQUNoQyxLQUFLLHdGQUEyQjtBQUNoQyxLQUFLLHdGQUEyQjtBQUNoQyxLQUFLLHdGQUEyQjtBQUNoQyxLQUFLLHdGQUEyQjtBQUNoQyxLQUFLLHdGQUEyQjtBQUNoQyxLQUFLLHdGQUEy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O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRDtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQ0FBZ0M7O0FBRWpDOzs7Ozs7Ozs7Ozs7O0FDMVpBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDTyxtQ0FBbUMseURBQWdCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QixlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7O0FDN0JBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0Qixl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Ozs7QUN4Q0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsa0VBQWtFOztBQUVuRTs7Ozs7Ozs7Ozs7OztBQzFCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQzVCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQXdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0U7QUFDUTtBQUNFO0FBQ0U7Ozs7Ozs7Ozs7Ozs7QUNQdEQ7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRDs7QUFFbEQ7O0FBRUEsbUJBQW1CLGdCQUFnQjtBQUNuQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUJBQWlCLGNBQWM7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlCQUFpQixjQUFjO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7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LENBQXBCO0FBQ0FmLGFBQU8sQ0FBQ0MsR0FBUixDQUFZLGFBQVosRUFBMkJTLFdBQTNCLEVBVHlCLENBV3pCO0FBQ0E7O0FBRUFJLGFBQU8sQ0FBQyxJQUFJUix1RkFBSixDQUErQkQsWUFBL0IsRUFBNkNLLFdBQTdDLENBQUQsQ0FBUDtBQUNQLEtBZkQ7O0FBZ0JBTyxVQUFNLENBQUNVLGlCQUFQLENBQXlCZCxJQUF6QjtBQUNQLEdBekJNLENBQVA7QUEwQlAsQ0EzQk0sQzs7Ozs7Ozs7Ozs7QUNqQlAsZTs7Ozs7Ozs7Ozs7QUNBQSxlOzs7Ozs7Ozs7OztBQ0FBLGU7Ozs7Ozs7Ozs7O0FDQUEsZTs7Ozs7Ozs7Ozs7QUNBQSxlOzs7Ozs7Ozs7OztBQ0FBLGU7Ozs7Ozs7Ozs7O0FDQUEsZTs7Ozs7Ozs7Ozs7QUNBQSxlOzs7Ozs7Ozs7OztBQ0FBLGUiLCJmaWxlIjoianMvMzUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdG9Qcm9wZXJ0eUtleSBmcm9tIFwiLi90b1Byb3BlcnR5S2V5LmpzXCI7XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkoZSwgciwgdCkge1xuICByZXR1cm4gKHIgPSB0b1Byb3BlcnR5S2V5KHIpKSBpbiBlID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIHtcbiAgICB2YWx1ZTogdCxcbiAgICBlbnVtZXJhYmxlOiAhMCxcbiAgICBjb25maWd1cmFibGU6ICEwLFxuICAgIHdyaXRhYmxlOiAhMFxuICB9KSA6IGVbcl0gPSB0LCBlO1xufVxuZXhwb3J0IHsgX2RlZmluZVByb3BlcnR5IGFzIGRlZmF1bHQgfTsiLCJpbXBvcnQgZGVmaW5lUHJvcGVydHkgZnJvbSBcIi4vZGVmaW5lUHJvcGVydHkuanNcIjtcbmZ1bmN0aW9uIG93bktleXMoZSwgcikge1xuICB2YXIgdCA9IE9iamVjdC5rZXlzKGUpO1xuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtcbiAgICByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHtcbiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7XG4gICAgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7XG4gIH1cbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkMihlKSB7XG4gIGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7XG4gICAgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9O1xuICAgIHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7XG4gICAgICBkZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTtcbiAgICB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZTtcbn1cbmV4cG9ydCB7IF9vYmplY3RTcHJlYWQyIGFzIGRlZmF1bHQgfTsiLCJpbXBvcnQgX3R5cGVvZiBmcm9tIFwiLi90eXBlb2YuanNcIjtcbmZ1bmN0aW9uIHRvUHJpbWl0aXZlKHQsIHIpIHtcbiAgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7XG4gIHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdO1xuICBpZiAodm9pZCAwICE9PSBlKSB7XG4gICAgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7XG4gICAgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpO1xuICB9XG4gIHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7XG59XG5leHBvcnQgeyB0b1ByaW1pdGl2ZSBhcyBkZWZhdWx0IH07IiwiaW1wb3J0IF90eXBlb2YgZnJvbSBcIi4vdHlwZW9mLmpzXCI7XG5pbXBvcnQgdG9QcmltaXRpdmUgZnJvbSBcIi4vdG9QcmltaXRpdmUuanNcIjtcbmZ1bmN0aW9uIHRvUHJvcGVydHlLZXkodCkge1xuICB2YXIgaSA9IHRvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpO1xuICByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiO1xufVxuZXhwb3J0IHsgdG9Qcm9wZXJ0eUtleSBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX3R5cGVvZihvKSB7XG4gIFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjtcblxuICByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvO1xuICB9IDogZnVuY3Rpb24gKG8pIHtcbiAgICByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbztcbiAgfSwgX3R5cGVvZihvKTtcbn1cbmV4cG9ydCB7IF90eXBlb2YgYXMgZGVmYXVsdCB9OyIsIjx0ZW1wbGF0ZT5cclxuICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogI2ZmZlwiIGNsYXNzPVwidGVzdFwiIHJlZj1cInBhZ2VcIj5cclxuICAgIDx2YW4tbmF2LWJhciB0aXRsZT1cIuWwj+W9qeS6kVwiIGxlZnQtYXJyb3cgQGNsaWNrLWxlZnQ9XCJnb0JhY2tcIj48L3Zhbi1uYXYtYmFyPlxyXG4gICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cclxuICAgICAgPGVsLWNvbnRhaW5lciBzdHlsZT1cImhlaWdodDogMTAwJVwiIHJlZj1cImJvZHlmb3JtXCIgdi1pZj1cIiFzaG93Q29tcG9uZW50XCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImVsX21haW5fY29udGVudFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm1haW5fY29udGVudF9jZW50ZXJcIj5cclxuICAgICAgICAgICAgPGVsLXNjcm9sbGJhciBjbGFzcz1cImZhdWx0RXhwZXJ0Q29uc3VsdGF0aW9uX3Njcm9sbGJhclwiIHJlZj1cInNjcm9sbGJhclJlZlwiPlxyXG4gICAgICAgICAgICAgIDwhLS3lr7nor53lhoXlrrktLT5cclxuICAgICAgICAgICAgICA8ZGl2IHYtZm9yPVwiKGl0ZW0sIGluZGV4KSBpbiBtZXNzYWdlc1dpdGhUaW1lc3RhbXBzXCIgOmtleT1cImluZGV4XCIgdi1zaG93PVwibWVzc2FnZXNXaXRoVGltZXN0YW1wcy5sZW5ndGggPiAwXCI+XHJcbiAgICAgICAgICAgICAgICA8IS0t5a+56K+d5pe26Ze0LS0+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IHYtaWY9XCJpdGVtLnNob3dUaW1lXCIgY2xhc3M9XCJjaGF0X3RpbWVcIj5cclxuICAgICAgICAgICAgICAgICAge3sgZm9ybWF0U2VuZFRpbWUoaXRlbS50aW1lc3RhbXApIH19XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwhLS3mj5Dpl64tLT5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJxdWVzdGlvbiBjaGF0XCIgdi1zaG93PVwiaXRlbS5xdWVzdGlvbiAhPT0gJydcIj5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoYXRfcXVlc3Rpb24gY2hhdF9jb21tb25cIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj57eyBpdGVtLnF1ZXN0aW9uIH19PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPGVsLWF2YXRhciBjbGFzcz1cImF2YXRhclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWVcIj7miJE8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgIDwvZWwtYXZhdGFyPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8IS0t5Zue562ULS0+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYW5zd2VyIGNoYXRcIiB2LWlmPVwiaXRlbS5hbnN3ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgPGVsLWF2YXRhciBjbGFzcz1cImF2YXRhclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiQC9hc3NldHMveGN5LnBuZ1wiIGFsdD1cIlwiIC8+XHJcbiAgICAgICAgICAgICAgICAgIDwvZWwtYXZhdGFyPlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hhdF9hbnN3ZXJcIiB2LXNob3c9XCJpdGVtLmFuc3dlci5sZW5ndGggPiAwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHA+5Li65L2g5om+5Yiw5Lul5LiL5YaF5a6577yM6K+354K55Ye75p+l55yL44CCPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGF0X2Fuc3dlcl9jb250ZW50XCIgdi1zaG93PVwiaXRlbS5hbnN3ZXIubGVuZ3RoID4gMVwiIHYtZm9yPVwiKGUsIGluZGV4KSBpbiBpdGVtLmFuc3dlclwiIEBjbGljaz1cInRvRGV0YWlsKGUpXCI+e3sgaW5kZXggKyAxIH19LiB7eyBlLnNpdGVOYW1lIHx8IGUuY29tcG9uZW50TmFtZSB9fTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGF0X2Fuc3dlcl9jb250ZW50XCIgdi1zaG93PVwiaXRlbS5hbnN3ZXIubGVuZ3RoID09IDFcIiB2LWZvcj1cIihlLCBpbmRleCkgaW4gaXRlbS5hbnN3ZXJcIiBAY2xpY2s9XCJ0b0RldGFpbChlKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAge3sgaW5kZXggKyAxIH19LiB7eyBlLnNpdGVOYW1lIHx8IGUuY29tcG9uZW50TmFtZSB9fTxiciAvPjxzcGFuIGNsYXNzPVwid29yZHNcIj57eyBlLmNvbnRlbnQgfX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPCEtLSA8c3Bhbj57eyBpdGVtLmFuc3dlciB9fTwvc3Bhbj4gLS0+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hhdF9hbnN3ZXJcIiB2LXNob3c9XCJpdGVtLmFuc3dlci5sZW5ndGggPT0gMCAmJiBpdGVtLnF1ZXN0aW9uID09ICcnXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9XCJ0ZXh0LWNvbnRhaW5lclwiPuS9oOWlve+8jOaIkeaYr+Wwj+W9qeS6ke+8jOaIkeWPr+S7peW4ruS9oOafpeivouWcsOihqOawtOOAgeepuuawlOi0qOmHj+WSjOaOkuaxoeWNleS9jeeahOS/oeaBr+OAgjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGF0X2Fuc3dlclwiIHYtc2hvdz1cIml0ZW0uYW5zd2VyLmxlbmd0aCA9PSAwICYmIGl0ZW0ucXVlc3Rpb24gIT09ICcnXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImZsb2F0OiBsZWZ0XCI+5bCP5b2p5LqR5q2j5Zyo5Yqq5Yqb5YiG5p6Q5LitLi4uPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxvYWRpbmctaWNvblwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2VsLXNjcm9sbGJhcj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm1haW5fY29udGVudF9mb290ZXJcIj5cclxuICAgICAgICAgICAgPGkgY2xhc3M9XCJlbC1pY29uLW1pY3JvcGhvbmVcIiB2LXNob3c9XCJpY29uU2hvd1wiIEBjbGljaz1cImNsb3NlXCI+PC9pPlxyXG4gICAgICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tdHVybi1vZmYtbWljcm9waG9uZVwiIHYtc2hvdz1cIiFpY29uU2hvd1wiIEBjbGljaz1cIm9wZW5cIj48L2k+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dF9ib3hcIj5cclxuICAgICAgICAgICAgICA8dGV4dGFyZWEgY2xhc3M9XCJjaGF0LWlucHV0IG5vLWJvcmRlclwiIHYtbW9kZWw9XCJxdWVzdGlvblwiIHYtc2hvdz1cIiFpY29uU2hvd1wiIC8+XHJcbiAgICAgICAgICAgICAgPGRpdiA6Y2xhc3M9XCJ7ICdjaGF0LWRpdic6ICFhY3RpdmUsICdjaGF0LWRpdi1hY3RpdmUnOiBhY3RpdmUgfVwiIHYtc2hvdz1cImljb25TaG93XCIgQHRvdWNoc3RhcnQ9XCJzdGFydFNwZWFraW5nXCIgQHRvdWNoZW5kPVwic3RvcFNwZWFraW5nXCI+XHJcbiAgICAgICAgICAgICAgICB7eyBxdWVzdGlvbiB9fVxyXG4gICAgICAgICAgICAgICAgPCEtLSA8ZGl2IGNsYXNzPVwiY2hhdC1tYXNrXCIgQHRvdWNoc3RhcnQ9XCJzdGFydFNwZWFraW5nXCIgQHRvdWNoZW5kPVwic3RvcFNwZWFraW5nXCI+PC9kaXY+IC0tPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJ0bl9ib3hcIj5cclxuICAgICAgICAgICAgICA8ZWwtYnV0dG9uIHR5cGU9XCJwcmltYXJ5XCIgY2xhc3M9XCJidG5cIiBAY2xpY2s9XCJhc2tDbGljayhxdWVzdGlvbilcIj7lj5HpgIE8L2VsLWJ1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9lbC1jb250YWluZXI+XHJcbiAgICAgIDxzZWFyY2hDb21wb25lbnRzIHYtZWxzZS1pZj1cInNob3dDb21wb25lbnRcIiByZWY9XCJzdW1tYXJ5QWxsUmVmXCIgLz5cclxuICAgIDwvZGl2PlxyXG4gICAgPCEtLee7hOS7tuaYvuekui0tPlxyXG5cclxuICAgIDwhLS0gPGRpdiBzdHlsZT1cImhlaWdodDogY2FsYygxMDB2aCAtIDU0cHgpOyBvdmVyZmxvdy15OiBhdXRvOyBvdmVyZmxvdy14OiBoaWRkZW5cIj5cclxuICAgICAgPGlmcmFtZSBpZD1cImlmcmFtZVwiIHNyYz1cImh0dHA6Ly8xMC4yMjEuMjkuNDo0ODA0OS9jaGF0Ym90L0lRem9saWlSUmM2dVpIeGJcIiBAbG9hZD1cImhhbmRsZUlmcmFtZUxvYWRcIiBzdHlsZT1cIndpZHRoOiAxMDAlOyBoZWlnaHQ6IGNhbGMoMTAwJSAtIDRweClcIiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvdz1cIm1pY3JvcGhvbmVcIj4gPC9pZnJhbWU+XHJcbiAgICA8L2Rpdj4gLS0+XHJcbiAgPC9kaXY+XHJcbjwvdGVtcGxhdGU+XHJcblxyXG48c2NyaXB0PlxyXG5pbXBvcnQgeyBnZXRSZXN1bHQgfSBmcm9tIFwiQC9hcGkvZHl5LmpzXCI7XHJcbmltcG9ydCBzZWFyY2hDb21wb25lbnRzIGZyb20gXCJAL3ZpZXdzL3NlYXJjaENvbXBvbmVudHMvaW5kZXgudnVlXCI7XHJcbmxldCBzcGVlY2hSZWNvZ25pemVyO1xyXG5pbXBvcnQgeyBzdHRGcm9tTWljIH0gZnJvbSBcIkAvdXRpbHMvU3BlZWNoUmVjb3JkLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBuYW1lOiBcImluZGV4XCIsXHJcbiAgZGF0YSgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGFjdGl2ZTogZmFsc2UsIC8vIOivremfs+i+k+WFpeahhuaYr+WQpua/gOa0u1xyXG4gICAgICBpc0xvbmdQcmVzczogZmFsc2UsIC8vIOaYr+WQpumVv+aMiVxyXG4gICAgICB0aW1lcjogbnVsbCwgLy8g6K6h5pe25ZmoXHJcbiAgICAgIGljb25TaG93OiBmYWxzZSxcclxuICAgICAgbm93VGltZTogXCJcIixcclxuICAgICAgcXVlc3Rpb246IFwiXCIsXHJcbiAgICAgIHJlc3VsdDogXCJcIixcclxuICAgICAgY2hhdExpc3Q6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBxdWVzdGlvbjogXCJcIiwgLy/pl67pophcclxuICAgICAgICAgIGFuc3dlcjogW10sXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksIC8v5pe26Ze05oizXHJcbiAgICAgICAgICB0bzogXCJcIiwgLy/mjqXmlLbogIVcclxuICAgICAgICAgIGZvcm06IFwiXCIsIC8v5Y+R6YCB6ICFXHJcbiAgICAgICAgfSxcclxuICAgICAgXSxcclxuICAgICAgc2Nyb2xsYmFyUmVmOiBudWxsLFxyXG4gICAgICBsb2FkaW5nOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IG51bGwsXHJcbiAgICAgIHN0cmVhbWVkRGF0YTogW10sXHJcbiAgICAgIHRlc3Q6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogXCI4NTc4XCIsXHJcbiAgICAgICAgICBzaXRlSWQ6IFwiYjExM2M2MzgtNmU3Yi00MzE5LWFkY2QtMjQwZDc5YjQ0YjQzXCIsXHJcbiAgICAgICAgICBzaXRlTmFtZTogXCLnm5jpvpnljLrlhbTojaPphZLmiL9cIixcclxuICAgICAgICAgIHNpdGVMYWJlbDogXCJcIixcclxuICAgICAgICAgIHNpdGVMYWJlbENvbG9yOiBcIlwiLFxyXG4gICAgICAgICAgc2l0ZVR5cGU6IFwicG9sbFwiLFxyXG4gICAgICAgICAgY3JlYXRlVGltZTogXCIyMDIzLTA3LTE3IDAwOjAwOjAwXCIsXHJcbiAgICAgICAgICBzaXRlVXJsVHlwZTogXCJcIixcclxuICAgICAgICAgIGpkOiBcIjEwMi44NDkyOFwiLFxyXG4gICAgICAgICAgd2Q6IFwiMjQuODU1NFwiLFxyXG4gICAgICAgICAgZGlzdGFuY2U6IFwiXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogXCIzMDc5XCIsXHJcbiAgICAgICAgICBzaXRlSWQ6IFwiMTgzODA5ZjEtNTgyYy00YWYxLWE0MDAtNmFmODUxNDFlMWVjXCIsXHJcbiAgICAgICAgICBzaXRlTmFtZTogXCLmmIbmmI7luILnm5jpvpnljLrkuIrmsLTkupXpo5/lk4HljoJcIixcclxuICAgICAgICAgIHNpdGVMYWJlbDogXCJcIixcclxuICAgICAgICAgIHNpdGVMYWJlbENvbG9yOiBcIlwiLFxyXG4gICAgICAgICAgc2l0ZVR5cGU6IFwicG9sbFwiLFxyXG4gICAgICAgICAgY3JlYXRlVGltZTogXCIyMDIzLTA3LTE3IDAwOjAwOjAwXCIsXHJcbiAgICAgICAgICBzaXRlVXJsVHlwZTogXCJcIixcclxuICAgICAgICAgIGpkOiBcIjEwMi44MDMwN1wiLFxyXG4gICAgICAgICAgd2Q6IFwiMjUuMjIyXCIsXHJcbiAgICAgICAgICBkaXN0YW5jZTogXCJcIixcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiBcIjI1M1wiLFxyXG4gICAgICAgICAgbW9kdWxlTmFtZTogXCLmsLTnlJ/mgIFcIixcclxuICAgICAgICAgIGdyYW5kSWQ6IFwiODEsMzksNDEsOTNcIixcclxuICAgICAgICAgIHBhcmVudElkOiBcIjgzXCIsXHJcbiAgICAgICAgICByZXNvdXJjZVBhdGg6IFwiL3dhdGVyRWNvbG9neVwiLFxyXG4gICAgICAgICAgdHlwZTogXCJ3YXRlclwiLFxyXG4gICAgICAgICAgcGFyYW1ldGVyOiBcIuebmOm+meWMulwiLFxyXG4gICAgICAgICAgZGV0YWlsc1BhcmFtZXRlcjogXCLnm5jpvpnljLpcIixcclxuICAgICAgICAgIGNvbXBvbmVudE5hbWU6IFwi55uY6b6Z5Yy65rC055Sf5oCBXCIsXHJcbiAgICAgICAgICBjaGlsZHJlbjogW10sXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogXCIyNDFcIixcclxuICAgICAgICAgIG1vZHVsZU5hbWU6IFwi5rC06LWE5rqQXCIsXHJcbiAgICAgICAgICBncmFuZElkOiBcIjgxLDM5LDQxLDkzXCIsXHJcbiAgICAgICAgICBwYXJlbnRJZDogXCI0NVwiLFxyXG4gICAgICAgICAgcmVzb3VyY2VQYXRoOiBcIi93YXRlclNvdXJjZVwiLFxyXG4gICAgICAgICAgdHlwZTogXCJ3YXRlclwiLFxyXG4gICAgICAgICAgcGFyYW1ldGVyOiBcIuebmOm+meWMulwiLFxyXG4gICAgICAgICAgZGV0YWlsc1BhcmFtZXRlcjogXCLnm5jpvpnljLpcIixcclxuICAgICAgICAgIGNvbXBvbmVudE5hbWU6IFwi55uY6b6Z5Yy65rC06LWE5rqQXCIsXHJcbiAgICAgICAgICBjaGlsZHJlbjogW10sXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogXCIxOTJcIixcclxuICAgICAgICAgIG1vZHVsZU5hbWU6IFwi5rC0546v5aKD5qaC5ousXCIsXHJcbiAgICAgICAgICBncmFuZElkOiBcIjgxLDM5LDE0N1wiLFxyXG4gICAgICAgICAgcGFyZW50SWQ6IFwiNDNcIixcclxuICAgICAgICAgIHJlc291cmNlUGF0aDogXCIvYmFzZUluZm9cIixcclxuICAgICAgICAgIHR5cGU6IFwid2F0ZXJcIixcclxuICAgICAgICAgIHBhcmFtZXRlcjogXCLnm5jpvpnljLpcIixcclxuICAgICAgICAgIGRldGFpbHNQYXJhbWV0ZXI6IFwi55uY6b6Z5Yy6XCIsXHJcbiAgICAgICAgICBjb21wb25lbnROYW1lOiBcIuebmOm+meWMuuawtOeOr+Wig+amguaLrFwiLFxyXG4gICAgICAgICAgY2hpbGRyZW46IFtdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6IFwiMjAyXCIsXHJcbiAgICAgICAgICBtb2R1bGVOYW1lOiBcIuawtOeOr+Wig+aAu+S9k+amguWGtVwiLFxyXG4gICAgICAgICAgZ3JhbmRJZDogXCIwXCIsXHJcbiAgICAgICAgICBwYXJlbnRJZDogXCI4MVwiLFxyXG4gICAgICAgICAgcmVzb3VyY2VQYXRoOiBcIi9iYXNlSW5mb+OAgS9jb21wZXRpdGlvbuOAgS93YXJuaW5nSW5mb+OAgS93YXRlclNvdXJjZeOAgS93YXRlckVjb2xvZ3lcIixcclxuICAgICAgICAgIHR5cGU6IFwid2F0ZXJcIixcclxuICAgICAgICAgIHBhcmFtZXRlcjogXCLnm5jpvpnljLpcIixcclxuICAgICAgICAgIGRldGFpbHNQYXJhbWV0ZXI6IFwi55uY6b6Z5Yy6XCIsXHJcbiAgICAgICAgICBjb21wb25lbnROYW1lOiBcIuebmOm+meWMuuawtOeOr+Wig+aAu+S9k+amguWGtVwiLFxyXG4gICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGlkOiBcIjE5MlwiLFxyXG4gICAgICAgICAgICAgIG1vZHVsZU5hbWU6IFwi5rC0546v5aKD5qaC5ousXCIsXHJcbiAgICAgICAgICAgICAgZ3JhbmRJZDogXCI4MSwzOSwxNDdcIixcclxuICAgICAgICAgICAgICBwYXJlbnRJZDogXCI0M1wiLFxyXG4gICAgICAgICAgICAgIHJlc291cmNlUGF0aDogXCIvYmFzZUluZm9cIixcclxuICAgICAgICAgICAgICB0eXBlOiBcIndhdGVyXCIsXHJcbiAgICAgICAgICAgICAgcGFyYW1ldGVyOiBcIuebmOm+meWMulwiLFxyXG4gICAgICAgICAgICAgIGRldGFpbHNQYXJhbWV0ZXI6IFwi55uY6b6Z5Yy6XCIsXHJcbiAgICAgICAgICAgICAgY29tcG9uZW50TmFtZTogXCLnm5jpvpnljLrmsLTnjq/looPmpoLmi6xcIixcclxuICAgICAgICAgICAgICBjaGlsZHJlbjogW10sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBpZDogXCIxOTdcIixcclxuICAgICAgICAgICAgICBtb2R1bGVOYW1lOiBcIuWRiuitpuS/oeaBr1wiLFxyXG4gICAgICAgICAgICAgIGdyYW5kSWQ6IFwiODEsMzksNDEsNDIsOTNcIixcclxuICAgICAgICAgICAgICBwYXJlbnRJZDogXCIzN1wiLFxyXG4gICAgICAgICAgICAgIHJlc291cmNlUGF0aDogXCIvd2FybmluZ0luZm9cIixcclxuICAgICAgICAgICAgICB0eXBlOiBcIndhdGVyXCIsXHJcbiAgICAgICAgICAgICAgcGFyYW1ldGVyOiBcIuebmOm+meWMulwiLFxyXG4gICAgICAgICAgICAgIGRldGFpbHNQYXJhbWV0ZXI6IFwi55uY6b6Z5Yy6XCIsXHJcbiAgICAgICAgICAgICAgY29tcG9uZW50TmFtZTogXCLnm5jpvpnljLrlkYrorabkv6Hmga9cIixcclxuICAgICAgICAgICAgICBjaGlsZHJlbjogW10sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBpZDogXCIyMzBcIixcclxuICAgICAgICAgICAgICBtb2R1bGVOYW1lOiBcIuWkp+ernui1m1wiLFxyXG4gICAgICAgICAgICAgIGdyYW5kSWQ6IFwiODEsMTQ3XCIsXHJcbiAgICAgICAgICAgICAgcGFyZW50SWQ6IFwiNjNcIixcclxuICAgICAgICAgICAgICByZXNvdXJjZVBhdGg6IFwiL2NvbXBldGl0aW9uXCIsXHJcbiAgICAgICAgICAgICAgdHlwZTogXCJ3YXRlclwiLFxyXG4gICAgICAgICAgICAgIHBhcmFtZXRlcjogXCLnm5jpvpnljLpcIixcclxuICAgICAgICAgICAgICBkZXRhaWxzUGFyYW1ldGVyOiBcIuebmOm+meWMulwiLFxyXG4gICAgICAgICAgICAgIGNvbXBvbmVudE5hbWU6IFwi55uY6b6Z5Yy65aSn56ue6LWbXCIsXHJcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtdLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgaWQ6IFwiMjQxXCIsXHJcbiAgICAgICAgICAgICAgbW9kdWxlTmFtZTogXCLmsLTotYTmupBcIixcclxuICAgICAgICAgICAgICBncmFuZElkOiBcIjgxLDM5LDQxLDkzXCIsXHJcbiAgICAgICAgICAgICAgcGFyZW50SWQ6IFwiNDVcIixcclxuICAgICAgICAgICAgICByZXNvdXJjZVBhdGg6IFwiL3dhdGVyU291cmNlXCIsXHJcbiAgICAgICAgICAgICAgdHlwZTogXCJ3YXRlclwiLFxyXG4gICAgICAgICAgICAgIHBhcmFtZXRlcjogXCLnm5jpvpnljLpcIixcclxuICAgICAgICAgICAgICBkZXRhaWxzUGFyYW1ldGVyOiBcIuebmOm+meWMulwiLFxyXG4gICAgICAgICAgICAgIGNvbXBvbmVudE5hbWU6IFwi55uY6b6Z5Yy65rC06LWE5rqQXCIsXHJcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtdLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgaWQ6IFwiMjUzXCIsXHJcbiAgICAgICAgICAgICAgbW9kdWxlTmFtZTogXCLmsLTnlJ/mgIFcIixcclxuICAgICAgICAgICAgICBncmFuZElkOiBcIjgxLDM5LDQxLDkzXCIsXHJcbiAgICAgICAgICAgICAgcGFyZW50SWQ6IFwiODNcIixcclxuICAgICAgICAgICAgICByZXNvdXJjZVBhdGg6IFwiL3dhdGVyRWNvbG9neVwiLFxyXG4gICAgICAgICAgICAgIHR5cGU6IFwid2F0ZXJcIixcclxuICAgICAgICAgICAgICBwYXJhbWV0ZXI6IFwi55uY6b6Z5Yy6XCIsXHJcbiAgICAgICAgICAgICAgZGV0YWlsc1BhcmFtZXRlcjogXCLnm5jpvpnljLpcIixcclxuICAgICAgICAgICAgICBjb21wb25lbnROYW1lOiBcIuebmOm+meWMuuawtOeUn+aAgVwiLFxyXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgfSxcclxuICAgICAgXSxcclxuICAgICAgc2hvd0NvbXBvbmVudDogZmFsc2UsXHJcbiAgICAgIHRyYW5zY3JpcHQ6IFwiXCIsXHJcbiAgICAgIHJlY29nbml0aW9uOiBudWxsLFxyXG4gICAgfTtcclxuICB9LFxyXG4gIGNvbXBvbmVudHM6IHtcclxuICAgIHNlYXJjaENvbXBvbmVudHMsXHJcbiAgfSxcclxuICBjb21wdXRlZDoge1xyXG4gICAgbWVzc2FnZXNXaXRoVGltZXN0YW1wcygpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY2hhdExpc3QubWFwKChpdGVtLCBpbmRleCkgPT4gKHtcclxuICAgICAgICAuLi5pdGVtLFxyXG4gICAgICAgIHNob3dUaW1lOiBpbmRleCA9PT0gMCB8fCB0aGlzLnNob3VsZFNob3dUaW1lKGluZGV4KSxcclxuICAgICAgfSkpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIG1vdW50ZWQoKSB7XHJcbiAgICB2YXIgdGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGV4dC1jb250YWluZXJcIikudGV4dENvbnRlbnQ7XHJcbiAgICB2YXIgaW5kZXggPSAwO1xyXG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGV4dC1jb250YWluZXJcIik7XHJcbiAgICBjb250YWluZXIudGV4dENvbnRlbnQgPSBcIlwiOyAvLyDmuIXnqbrljp/mlofmnKxcclxuICAgIHZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKGluZGV4IDwgdGV4dC5sZW5ndGgpIHtcclxuICAgICAgICBjb250YWluZXIudGV4dENvbnRlbnQgKz0gdGV4dFtpbmRleCsrXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTsgLy8g5omA5pyJ5a2X56ym6YO95pi+56S65ZCO5riF6Zmk5a6a5pe25ZmoXHJcbiAgICAgIH1cclxuICAgIH0sIDEwMCk7XHJcbiAgfSxcclxuXHJcbiAgLy8g6I635Y+W6Lev55Sx77yM5Yik5pat6Lev55Sx57yT5a2YXHJcbiAgYmVmb3JlUm91dGVMZWF2ZSh0bywgZnJvbSwgbmV4dCkge1xyXG4gICAgY29uc29sZS5sb2coXCJiZWZvcmVSb3V0ZUxlYXZlXCIsIHRvLCBmcm9tKTtcclxuICAgIGlmICh0by5uYW1lID09PSBcImNvbXBhbnlEZXRhaWxcIiB8fCB0by5uYW1lID09PSBcInN0YXRpb25EZXRhaWxcIiB8fCB0by5uYW1lID09PSBcImFpclN0YXRpb25EZXRhaWxcIikge1xyXG4gICAgICBmcm9tLm1ldGEua2VlcEFsaXZlID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZyb20ubWV0YS5rZWVwQWxpdmUgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIG5leHQoKTtcclxuICB9LFxyXG5cclxuICBjcmVhdGVkKCkge30sXHJcblxyXG4gIG1ldGhvZHM6IHtcclxuICAgIHNldFJlY29yZGluZ0V2ZW50KCkge1xyXG4gICAgICBzcGVlY2hSZWNvZ25pemVyID0gc3R0RnJvbU1pYygpO1xyXG4gICAgICBjb25zb2xlLmxvZyhzcGVlY2hSZWNvZ25pemVyKTtcclxuXHJcbiAgICAgIHNwZWVjaFJlY29nbml6ZXIucmVjb2duaXppbmcgPSAocywgZSkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGUucmVzdWx0KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNwZWVjaFJlY29nbml6ZXIucmVjb2duaXplZCA9IChzLCBlKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJzXCIsIHMpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBSRUNPR05JWkVEOiBUZXh0PSR7ZS5yZXN1bHQudGV4dH1gKTtcclxuICAgICAgICB0aGlzLnJlc3VsdCA9IGUucmVzdWx0LnRleHQ7XHJcbiAgICAgICAgdGhpcy5xdWVzdGlvbiA9IGUucmVzdWx0LnRleHQucmVwbGFjZSgvXFzjgIIvZywgXCJcIik7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzcGVlY2hSZWNvZ25pemVyLmNhbmNlbGVkID0gKHMsIGUpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgQ0FOQ0VMRUQ6IFJlYXNvbj0ke2UucmVhc29ufWApO1xyXG5cclxuICAgICAgICBpZiAoZS5yZWFzb24gPT09IDApIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBcIkNBTkNFTEVEOiBFcnJvckNvZGU9JHtlLmVycm9yQ29kZX1gKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBcIkNBTkNFTEVEOiBFcnJvckRldGFpbHM9JHtlLmVycm9yRGV0YWlsc31gKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ0FOQ0VMRUQ6IERpZCB5b3Ugc2V0IHRoZSBzcGVlY2ggcmVzb3VyY2Uga2V5IGFuZCByZWdpb24gdmFsdWVzP1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNwZWVjaFJlY29nbml6ZXIuc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzcGVlY2hSZWNvZ25pemVyLnNlc3Npb25TdG9wcGVkID0gKHMsIGUpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlxcbiAgICBTZXNzaW9uIHN0b3BwZWQgZXZlbnQuXCIpO1xyXG4gICAgICAgIHNwZWVjaFJlY29nbml6ZXIuc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKCk7XHJcbiAgICAgIH07XHJcbiAgICB9LFxyXG4gICAgZ29CYWNrKCkge1xyXG4gICAgICBpZiAodGhpcy5zaG93Q29tcG9uZW50KSB7XHJcbiAgICAgICAgdGhpcy5zaG93Q29tcG9uZW50ID0gZmFsc2U7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHNob3VsZFNob3dUaW1lKGluZGV4KSB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSBuZXcgRGF0ZSh0aGlzLmNoYXRMaXN0W2luZGV4IC0gMV0udGltZXN0YW1wKTtcclxuICAgICAgY29uc3QgbmV4dCA9IG5ldyBEYXRlKHRoaXMuY2hhdExpc3RbaW5kZXhdLnRpbWVzdGFtcCk7XHJcbiAgICAgIGNvbnN0IGRpZmYgPSBuZXh0ID8gbmV4dCAtIGN1cnJlbnQgOiAwO1xyXG4gICAgICByZXR1cm4gZGlmZiA+IDMgKiA2MCAqIDEwMDA7XHJcbiAgICB9LFxyXG4gICAgdG9EZXRhaWwoaXRlbSkge1xyXG4gICAgICBpZiAoIWl0ZW0uY2hpbGRyZW4pIHtcclxuICAgICAgICBpZiAoaXRlbS5zaXRlVHlwZSA9PT0gXCJhaXJcIikge1xyXG4gICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe1xyXG4gICAgICAgICAgICBuYW1lOiBcImFpclN0YXRpb25EZXRhaWxcIixcclxuICAgICAgICAgICAgcXVlcnk6IHtcclxuICAgICAgICAgICAgICBzaXRlSWQ6IGl0ZW0uc2l0ZUlkLFxyXG4gICAgICAgICAgICAgIHNpdGVOYW1lOiBpdGVtLnNpdGVOYW1lLFxyXG4gICAgICAgICAgICAgIHNpdGVMZXZlbDogaXRlbS5zaXRlTGFiZWwsXHJcbiAgICAgICAgICAgICAgdGl0bGU6IFwi56m65rCU6LSo6YeP56uZ54K56K+m5oOFXCIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uc2l0ZVR5cGUgPT09IFwid2F0ZXJcIikge1xyXG4gICAgICAgICAgbGV0IG1vbml0b3JNZXRob2QgPSBcIlwiO1xyXG4gICAgICAgICAgaWYgKGl0ZW0ubW9uaXRvck1ldGhvZCkge1xyXG4gICAgICAgICAgICBpZiAoaXRlbS5tb25pdG9yTWV0aG9kID09PSBcIuiHquWKqOebkea1i1wiKSB7XHJcbiAgICAgICAgICAgICAgbW9uaXRvck1ldGhvZCA9IFwi6Ieq5YqoXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5tb25pdG9yTWV0aG9kID09PSBcIuaJi+W3peebkea1i1wiKSB7XHJcbiAgICAgICAgICAgICAgbW9uaXRvck1ldGhvZCA9IFwi5omL5belXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgbW9uaXRvck1ldGhvZCA9IFwi6Ieq5YqoXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG1vbml0b3JNZXRob2QgPSBcIuiHquWKqFwiO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe1xyXG4gICAgICAgICAgICBuYW1lOiBcInN0YXRpb25EZXRhaWxcIixcclxuICAgICAgICAgICAgcXVlcnk6IHtcclxuICAgICAgICAgICAgICB0eXBlOiBtb25pdG9yTWV0aG9kID09IFwi6Ieq5YqoXCIgPyBcIuaXtlwiIDogXCLmnIhcIixcclxuICAgICAgICAgICAgICBpZDogaXRlbS5zaXRlSWQsXHJcbiAgICAgICAgICAgICAgdGltZTogbW9uaXRvck1ldGhvZCA9PSBcIuiHquWKqFwiID8gdGhpcy5ub3dUaW1lIDogdGhpcy5ub3dUaW1lLnN1YnN0cigwLCA3KSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXRlbS5zaXRlVHlwZSA9PT0gXCJwb2xsXCIpIHtcclxuICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtcclxuICAgICAgICAgICAgbmFtZTogXCJjb21wYW55RGV0YWlsXCIsXHJcbiAgICAgICAgICAgIHF1ZXJ5OiB7XHJcbiAgICAgICAgICAgICAgaWQ6IGl0ZW0uc2l0ZUlkLFxyXG4gICAgICAgICAgICAgIHR5cGU6IFwicmVkXCIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IHRlbXBEID0ge1xyXG4gICAgICAgICAgY29tcG9uZW50TmFtZTogaXRlbS5jb21wb25lbnROYW1lLFxyXG4gICAgICAgICAgbW9kdWxlTmFtZTogaXRlbS5tb2R1bGVOYW1lLFxyXG4gICAgICAgICAgcmVzb3VyY2VQYXRoOiBpdGVtLnJlc291cmNlUGF0aCxcclxuICAgICAgICAgIHR5cGU6IGl0ZW0udHlwZSxcclxuICAgICAgICAgIHBhcmFtZXRlcjogaXRlbS5wYXJhbWV0ZXIsXHJcbiAgICAgICAgICBkZXRhaWxzUGFyYW1ldGVyOiBpdGVtLmRldGFpbHNQYXJhbWV0ZXIsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLiRlbWl0KFwic2hvd01vZHVsZVwiLCB0ZW1wRCk7XHJcbiAgICAgICAgdGhpcy5zaG93Q29tcG9uZW50ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLiRyZWZzLnBhZ2Uuc2Nyb2xsVG9wID0gMDtcclxuICAgICAgICAvLyB0aGlzLmxpc3QgPSBbXTtcclxuICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoXCJzZXRTZWFyY2hPYmpcIiwgdGVtcEQpO1xyXG4gICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHtcclxuICAgICAgICAgIHRoaXMuJHJlZnMuc3VtbWFyeUFsbFJlZi5nZXRDb21wb25lbnQoaXRlbS50eXBlLCBpdGVtLnJlc291cmNlUGF0aCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICB0aGlzLmljb25TaG93ID0gIXRoaXMuaWNvblNob3c7XHJcbiAgICAgIHRoaXMucXVlc3Rpb24gPSBcIuaMieS9jyAg6K+06K+dXCI7XHJcbiAgICAgIC8vIOS9v+eUqENvcmRvdmHpuqblhYvpo47lvZXpn7NcclxuICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlc1xyXG4gICAgICAgIC5nZXRVc2VyTWVkaWEoeyBhdWRpbzogdHJ1ZSB9KVxyXG4gICAgICAgIC50aGVuKChzdHJlYW0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IG1lZGlhUmVjb3JkZXIgPSBuZXcgTWVkaWFSZWNvcmRlcihzdHJlYW0pO1xyXG4gICAgICAgICAgY29uc3QgYXVkaW9DaHVua3MgPSBbXTtcclxuXHJcbiAgICAgICAgICBtZWRpYVJlY29yZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJkYXRhYXZhaWxhYmxlXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBhdWRpb0NodW5rcy5wdXNoKGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgbWVkaWFSZWNvcmRlci5hZGRFdmVudExpc3RlbmVyKFwic3RvcFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvQmxvYiA9IG5ldyBCbG9iKGF1ZGlvQ2h1bmtzLCB7IHR5cGU6IFwiYXVkaW8vd2F2XCIgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChhdWRpb0Jsb2IpO1xyXG5cclxuICAgICAgICAgICAgLy8g5Yib5bu65LiA5LiqQXVkaW/lhYPntKDmnaXmkq3mlL7lvZXpn7NcclxuICAgICAgICAgICAgY29uc3QgYXVkaW8gPSBuZXcgQXVkaW8oYXVkaW9VcmwpO1xyXG4gICAgICAgICAgICBhdWRpby5wbGF5KCk7XHJcblxyXG4gICAgICAgICAgICAvLyDliJ3lp4vljJbor63pn7Por4bliKtcclxuICAgICAgICAgICAgdGhpcy5yZWNvZ25pdGlvbiA9IG5ldyB3ZWJraXRTcGVlY2hSZWNvZ25pdGlvbigpIHx8IG5ldyBTcGVlY2hSZWNvZ25pdGlvbigpO1xyXG4gICAgICAgICAgICB0aGlzLnJlY29nbml0aW9uLmNvbnRpbnVvdXMgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnJlY29nbml0aW9uLmludGVyaW1SZXN1bHRzID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5yZWNvZ25pdGlvbi5vbnJlc3VsdCA9IHRoaXMub25SZXN1bHQ7XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIHRoaXMucmVjb2duaXRpb24uc3RhcnQoKTtcclxuICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAvLyDlgZzmraLlvZXpn7PlubblpITnkIbnu5PmnpxcclxuICAgICAgICAgIG1lZGlhUmVjb3JkZXIuc3RvcCgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihlcnJvcikpO1xyXG4gICAgICAvLyAgIHRoaXMuc2V0UmVjb3JkaW5nRXZlbnQoKTtcclxuICAgICAgLy8gICBzcGVlY2hSZWNvZ25pemVyLnN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmMoKTtcclxuICAgIH0sXHJcbiAgICBvblJlc3VsdChldmVudCkge1xyXG4gICAgICBsZXQgcmVzdWx0ID0gXCJcIjtcclxuICAgICAgZm9yIChsZXQgaSA9IGV2ZW50LnJlc3VsdEluZGV4OyBpIDwgZXZlbnQucmVzdWx0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHJlc3VsdCArPSBldmVudC5yZXN1bHRzW2ldWzBdLnRyYW5zY3JpcHQ7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy50cmFuc2NyaXB0ID0gcmVzdWx0O1xyXG4gICAgICB0aGlzLnJlY29nbml0aW9uLnN0b3AoKTtcclxuICAgIH0sXHJcbiAgICBzdGFydFNwZWFraW5nKGV2ZW50KSB7XHJcbiAgICAgIC8vIOW9k+aMieS4i+aXtuW8gOWni+iuoeaXtlxyXG4gICAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pc0xvbmdQcmVzcyA9IHRydWU7XHJcbiAgICAgICAgLy8g6ZW/5oyJ5ZCO55qE5aSE55CG6YC76L6R77yM5q+U5aaC5byA5aeL6K+06K+dXHJcbiAgICAgICAgdGhpcy5zdGFydFJlY29yZGluZygpO1xyXG4gICAgICB9LCA1MDApOyAvLyDorr7nva7plb/mjInnmoTpmIjlgLzml7bpl7TvvIzov5nph4zmmK81MDDmr6vnp5JcclxuICAgIH0sXHJcbiAgICBzdG9wU3BlYWtpbmcoZXZlbnQpIHtcclxuICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgLy8g5b2T5omL5oyH56e75byA5pe25Y+W5raI6K6h5pe2XHJcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtcclxuICAgICAgdGhpcy5pc0xvbmdQcmVzcyA9IGZhbHNlO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlN0b3AgcmVjb3JkaW5nLlwiKTtcclxuICAgICAgaWYgKHNwZWVjaFJlY29nbml6ZXIpIHtcclxuICAgICAgICBzcGVlY2hSZWNvZ25pemVyLnN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luYygpO1xyXG4gICAgICAgIHNwZWVjaFJlY29nbml6ZXIgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIOWmguaenOaYr+mVv+aMie+8jOWkhOeQhue7k+adn+mAu+i+ke+8jOavlOWmguWBnOatouivtOivnVxyXG4gICAgICBpZiAodGhpcy5pc0xvbmdQcmVzcykge1xyXG4gICAgICAgIHRoaXMuc3RvcFJlY29yZGluZygpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgc3RhcnRSZWNvcmRpbmcoKSB7XHJcbiAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgLy8g5byA5aeL5b2V6Z+z55qE6YC76L6RXHJcbiAgICAgIGNvbnNvbGUubG9nKFwiU3RhcnQgcmVjb3JkaW5nLi4uXCIpO1xyXG4gICAgICB0aGlzLnNldFJlY29yZGluZ0V2ZW50KCk7XHJcbiAgICAgIHNwZWVjaFJlY29nbml6ZXIuc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYygpO1xyXG4gICAgfSxcclxuICAgIHN0b3BSZWNvcmRpbmcoKSB7XHJcbiAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgIC8vIOe7k+adn+W9lemfs+eahOmAu+i+kVxyXG4gICAgICBjb25zb2xlLmxvZyhcIlN0b3AgcmVjb3JkaW5nLlwiKTtcclxuICAgICAgaWYgKHNwZWVjaFJlY29nbml6ZXIpIHtcclxuICAgICAgICBzcGVlY2hSZWNvZ25pemVyLnN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luYygpO1xyXG4gICAgICAgIHNwZWVjaFJlY29nbml6ZXIgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtcclxuICAgICAgdGhpcy5pc0xvbmdQcmVzcyA9IGZhbHNlO1xyXG4gICAgICAvLyDlpoLmnpzmmK/plb/mjInvvIzlpITnkIbnu5PmnZ/pgLvovpHvvIzmr5TlpoLlgZzmraLor7Tor51cclxuICAgICAgaWYgKHRoaXMuaXNMb25nUHJlc3MpIHtcclxuICAgICAgICB0aGlzLnN0b3BSZWNvcmRpbmcoKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNsb3NlKCkge1xyXG4gICAgICB0aGlzLmljb25TaG93ID0gIXRoaXMuaWNvblNob3c7XHJcbiAgICAgIHRoaXMucXVlc3Rpb24gPSBcIlwiO1xyXG4gICAgICBpZiAoc3BlZWNoUmVjb2duaXplcikge1xyXG4gICAgICAgIHNwZWVjaFJlY29nbml6ZXIuc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKCk7XHJcbiAgICAgICAgc3BlZWNoUmVjb2duaXplciA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBhc3luYyBhc2tDbGljayh2YWwpIHtcclxuICAgICAgLy8gICB0aGlzLmljb25TaG93ID0gIXRoaXMuaWNvblNob3c7XHJcbiAgICAgIGlmIChzcGVlY2hSZWNvZ25pemVyKSB7XHJcbiAgICAgICAgc3BlZWNoUmVjb2duaXplci5zdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmMoKTtcclxuICAgICAgICBzcGVlY2hSZWNvZ25pemVyID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5pY29uU2hvdykge1xyXG4gICAgICAgIHRoaXMucXVlc3Rpb24gPSBcIuaMieS9jyAg6K+06K+dXCI7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgdGhpcy5lcnJvciA9IG51bGw7XHJcbiAgICAgIHRoaXMuc3RyZWFtZWREYXRhID0gW107XHJcbiAgICAgIHRoaXMuY2hhdExpc3QucHVzaCh7XHJcbiAgICAgICAgcXVlc3Rpb246IHZhbCwgLy/pl67pophcclxuICAgICAgICBhbnN3ZXI6IFtdLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSwgLy/ml7bpl7TmiLNcclxuICAgICAgICB0bzogXCJcIiwgLy/mjqXmlLbogIVcclxuICAgICAgICBmb3JtOiBcIlwiLCAvL+WPkemAgeiAhVxyXG4gICAgICB9KTtcclxuICAgICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgcXVlcnk6IHZhbCxcclxuICAgICAgICBpbnB1dHM6IHt9LFxyXG4gICAgICAgIHJlc3BvbnNlX21vZGU6IFwic3RyZWFtaW5nXCIsXHJcbiAgICAgICAgdXNlcjogXCJzdGhqakBsb2NhbC5sb2NhaG9zdFwiLFxyXG4gICAgICB9O1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0UmVzdWx0KGRhdGEpO1xyXG4gICAgICAgIC8vIOWmguaenCBBUEkg5LiN5piv55yf5q2j55qE5rWB5byP5ZON5bqU77yM5Y+v6IO96ZyA6KaB5Zyo6L+Z6YeM5aSE55CG5pyA57uI55qE5ZON5bqUXHJcbiAgICAgICAgY29uc3QgZXZlbnRzID0gcmVzcG9uc2UuZGF0YS5zcGxpdChcIlxcbmRhdGE6IFwiKTtcclxuICAgICAgICBldmVudHMuZm9yRWFjaCgoZXZlbnRTdHIsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICBpZiAoZXZlbnRTdHIudHJpbSgpKSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudFN0ci5pbmNsdWRlcyhcIndvcmtmbG93X2ZpbmlzaGVkXCIpKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5jaGF0TGlzdC5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IHRoaXMuY2hhdExpc3QubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmNoYXRMaXN0W2luZGV4XS5hbnN3ZXIgPSBKU09OLnBhcnNlKEpTT04ucGFyc2UoZXZlbnRTdHIpLmRhdGEub3V0cHV0cy5hbnN3ZXIpLmRhdGE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgdGhpcy5lcnJvciA9IGVyci5tZXNzYWdlIHx8IFwi5pyq55+l6ZSZ6K+vXCI7XHJcbiAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBzY3JvbGxUb0JvdHRvbSgpIHtcclxuICAgICAgbmV4dFRpY2soKCkgPT4ge1xyXG4gICAgICAgIGxldCBjaGF0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluX2NvbnRlbnRfY2VudGVyXCIpO1xyXG4gICAgICAgIHRoaXMuc2Nyb2xsYmFyUmVmLndyYXBSZWYuc2Nyb2xsVG9wID0gY2hhdC5zY3JvbGxIZWlnaHQ7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGZvcm1hdFNlbmRUaW1lKHNlbmRUaW1lKSB7XHJcbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgIGNvbnN0IHNlbmREYXRlID0gbmV3IERhdGUoc2VuZFRpbWUpO1xyXG4gICAgICAvLyDorqHnrpfml7bpl7Tlt67vvIjku6Xmr6vnp5LkuLrljZXkvY3vvIlcclxuICAgICAgY29uc3QgdGltZURpZmYgPSBub3cgLSBzZW5kRGF0ZTtcclxuICAgICAgY29uc3Qgc3RhcnRPZlRvZGF5ID0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG5vdy5nZXRNb250aCgpLCBub3cuZ2V0RGF0ZSgpKTtcclxuICAgICAgY29uc3Qgc3RhcnRPZlRhcmdldERhdGUgPSBuZXcgRGF0ZShzZW5kRGF0ZS5nZXRGdWxsWWVhcigpLCBzZW5kRGF0ZS5nZXRNb250aCgpLCBzZW5kRGF0ZS5nZXREYXRlKCkpO1xyXG4gICAgICAvLyDkuIDlpKnlhoXnmoTmr6vnp5LmlbBcclxuICAgICAgY29uc3Qgb25lRGF5ID0gMjQgKiA2MCAqIDYwICogMTAwMDtcclxuICAgICAgLy8g5aaC5p6c5Y+R6YCB5pe26Ze05Zyo5b2T5YmN5pe26Ze05LmL5YmNXHJcbiAgICAgIGlmICh0aW1lRGlmZiA8IDApIHtcclxuICAgICAgICByZXR1cm4gXCJJbnZhbGlkIHRpbWVcIjsgLy8g5oiW6ICF5YW25LuW6ZSZ6K+v5aSE55CGXHJcbiAgICAgIH1cclxuICAgICAgLy8g5Y+R55Sf5Zyo5ZCM5LiA5aSpXHJcbiAgICAgIGlmIChzdGFydE9mVG9kYXkuZ2V0VGltZSgpID09PSBzdGFydE9mVGFyZ2V0RGF0ZS5nZXRUaW1lKCkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRUaW1lKHNlbmREYXRlKTtcclxuICAgICAgfVxyXG4gICAgICAvLyDlpoLmnpzlj5HpgIHml7bpl7TlnKjkuIDlpKnlhoVcclxuICAgICAgaWYgKHRpbWVEaWZmIDwgb25lRGF5KSB7XHJcbiAgICAgICAgcmV0dXJuIFwi5pio5aSpIFwiICsgdGhpcy5mb3JtYXRUaW1lKHNlbmREYXRlKTtcclxuICAgICAgfVxyXG4gICAgICAvLyDlpoLmnpzlj5HpgIHml7bpl7TlnKjkuozlpKnoh7PkuIPlpKnlhoVcclxuICAgICAgaWYgKHRpbWVEaWZmIDwgNyAqIG9uZURheSkge1xyXG4gICAgICAgIGNvbnN0IHdlZWtkYXkgPSB0aGlzLmdldFdlZWtkYXkoc2VuZERhdGUpO1xyXG4gICAgICAgIHJldHVybiB3ZWVrZGF5ICsgXCIgXCIgKyB0aGlzLmZvcm1hdFRpbWUoc2VuZERhdGUpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIOWmguaenOWPkemAgeaXtumXtOi2hei/h+S4g+WkqVxyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIHNlbmREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZyhcInpoLUNOXCIsIHtcclxuICAgICAgICAgIHllYXI6IFwibnVtZXJpY1wiLFxyXG4gICAgICAgICAgbW9udGg6IFwiMi1kaWdpdFwiLFxyXG4gICAgICAgICAgZGF5OiBcIjItZGlnaXRcIixcclxuICAgICAgICB9KSArXHJcbiAgICAgICAgXCIgXCIgK1xyXG4gICAgICAgIHRoaXMuZm9ybWF0VGltZShzZW5kRGF0ZSlcclxuICAgICAgKTtcclxuICAgIH0sXHJcbiAgICBmb3JtYXRUaW1lKGRhdGUpIHtcclxuICAgICAgLy8g5qC85byP5YyW5pe26Ze05Li64oCc5pe2OuWIhuKAnVxyXG4gICAgICBjb25zdCBob3VycyA9IGRhdGUuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcclxuICAgICAgY29uc3QgbWludXRlcyA9IGRhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpO1xyXG4gICAgICByZXR1cm4gaG91cnMgKyBcIjpcIiArIG1pbnV0ZXM7XHJcbiAgICB9LFxyXG4gICAgZ2V0V2Vla2RheShkYXRlKSB7XHJcbiAgICAgIC8vIOiOt+WPluaYn+acn+WHoOeahOS4reaWh+ihqOekulxyXG4gICAgICBjb25zdCB3ZWVrZGF5cyA9IFtcIuaYn+acn+WkqVwiLCBcIuaYn+acn+S4gFwiLCBcIuaYn+acn+S6jFwiLCBcIuaYn+acn+S4iVwiLCBcIuaYn+acn+Wbm1wiLCBcIuaYn+acn+S6lFwiLCBcIuaYn+acn+WFrVwiXTtcclxuICAgICAgcmV0dXJuIHdlZWtkYXlzW2RhdGUuZ2V0RGF5KCldO1xyXG4gICAgfSxcclxuICB9LFxyXG59O1xyXG48L3NjcmlwdD5cclxuXHJcbjxzdHlsZSBsYW5nPVwic2Nzc1wiPlxyXG4ubm8tYm9yZGVyIHtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgLyog5Y+v6YCJ55qE5qC35byP77yM5Lul5Y676Zmk54Sm54K55pe255qE6L655qGG77yI5aaC5p6c6ZyA6KaB55qE6K+d77yJICovXHJcbiAgb3V0bGluZTogbm9uZTtcclxuICB3aWR0aDogbm9uZTtcclxuICBoZWlnaHQ6IG5vbmU7XHJcbiAgcmVzaXplOiBub25lO1xyXG59XHJcbi5jb250ZW50IHtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IGNhbGMoMTAwdmggLSA1NXB4KTtcclxuICBvdmVyZmxvdy15OiBhdXRvO1xyXG4gIG92ZXJmbG93LXg6IGhpZGRlbjtcclxuICAvLyBiYWNrZ3JvdW5kOiAjNzY4NjtcclxuICAuZWxfbWFpbl9jb250ZW50IHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAzcHgpO1xyXG4gICAgbWFyZ2luOiBhdXRvO1xyXG5cclxuICAgIC5tYWluX2NvbnRlbnRfaGVhZGVyIHtcclxuICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgIGhlaWdodDogNTBweDtcclxuICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjN2RlMGJkO1xyXG4gICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgfVxyXG5cclxuICAgIC5tYWluX2NvbnRlbnRfY2VudGVyIHtcclxuICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSA3MHB4KTtcclxuICAgICAgbWFyZ2luOiAxMHB4IDBweDtcclxuICAgICAgb3ZlcmZsb3cteTogYXV0bztcclxuXHJcbiAgICAgIC5jaGF0X3RpbWUge1xyXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xyXG4gICAgICB9XHJcbiAgICAgIC5xdWVzdGlvbiB7XHJcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcclxuICAgICAgfVxyXG4gICAgICAuY2hhdF9xdWVzdGlvbiB7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzhjZTQ1ZjtcclxuICAgICAgICBtYXJnaW4tcmlnaHQ6IDVweDtcclxuICAgICAgICBjb2xvcjogI2ZmZmZmZjtcclxuICAgICAgICBmb250LXNpemU6IDE0cHg7XHJcbiAgICAgIH1cclxuICAgICAgLmNoYXRfYW5zd2VyIHtcclxuICAgICAgICBtYXgtd2lkdGg6IDYwJTtcclxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmM2Y1O1xyXG4gICAgICAgIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbiAgICAgICAgcGFkZGluZzogNXB4IDEwcHggMTBweCAxMHB4O1xyXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDtcclxuICAgICAgICBmb250LXNpemU6IDE0cHg7XHJcbiAgICAgICAgcCB7XHJcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XHJcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAuY2hhdF9hbnN3ZXJfY29udGVudCB7XHJcbiAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgIGhlaWdodDogYXV0bztcclxuICAgICAgICAgIHBhZGRpbmc6IDVweCAwO1xyXG4gICAgICAgICAgY29sb3I6ICM2NDkyZmY7XHJcbiAgICAgICAgICAud29yZHMge1xyXG4gICAgICAgICAgICBmb250LXNpemU6IDEzcHg7XHJcbiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxOHB4O1xyXG4gICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDI2cHg7XHJcbiAgICAgICAgICAgIGNvbG9yOiAjNjY2O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAubG9hZGluZy1pY29uIHtcclxuICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNkZGQ7IC8qIExpZ2h0IGdyZXkgYmFja2dyb3VuZCAqL1xyXG4gICAgICAgICAgYm9yZGVyLXRvcDogMnB4IHNvbGlkICMzNDk4ZGI7IC8qIEJsdWUgYmFja2dyb3VuZCBmb3IgdGhlIHRvcCBoYWxmICovXHJcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgICAgICAgICB3aWR0aDogMTZweDtcclxuICAgICAgICAgIGhlaWdodDogMTZweDtcclxuICAgICAgICAgIGFuaW1hdGlvbjogc3BpbiAxcyBsaW5lYXIgaW5maW5pdGU7XHJcbiAgICAgICAgICBmbG9hdDogbGVmdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEBrZXlmcmFtZXMgc3BpbiB7XHJcbiAgICAgICAgICB0byB7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC5jaGF0IHtcclxuICAgICAgICB3aWR0aDogOTglO1xyXG4gICAgICAgIG1hcmdpbjogMTBweCBhdXRvO1xyXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgIH1cclxuICAgICAgLmNoYXRfY29tbW9uIHtcclxuICAgICAgICBtYXgtd2lkdGg6IDQwJTtcclxuICAgICAgICBwYWRkaW5nOiAycHggNXB4O1xyXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDtcclxuICAgICAgICB3b3JkLWJyZWFrOiBicmVhay1hbGw7XHJcbiAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICB9XHJcbiAgICAgIC5hdmF0YXIge1xyXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM0MDllZmY7XHJcbiAgICAgICAgLy8gYm9yZGVyOiAycHggc29saWQgIzQwOWVmZjtcclxuICAgICAgfVxyXG4gICAgICAubWUge1xyXG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICAgICAgICBjb2xvcjogI2ZmZmZmZjtcclxuICAgICAgICAvLyBmb250LXdlaWdodDogYm9sZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC5tYWluX2NvbnRlbnRfZm9vdGVyIHtcclxuICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgIGhlaWdodDogNTBweDtcclxuICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlNGU3ZWQ7XHJcbiAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICAgICAgYmFja2dyb3VuZDogI2Y1ZjVmNTtcclxuICAgICAgLmVsLWljb24tbWljcm9waG9uZSB7XHJcbiAgICAgICAgZm9udC1zaXplOiAyOHB4O1xyXG4gICAgICAgIGNvbG9yOiAjNjQ5MmZmO1xyXG4gICAgICAgIG1hcmdpbi1sZWZ0OiAxNXB4O1xyXG4gICAgICB9XHJcbiAgICAgIC5lbC1pY29uLXR1cm4tb2ZmLW1pY3JvcGhvbmUge1xyXG4gICAgICAgIGZvbnQtc2l6ZTogMjhweDtcclxuICAgICAgICBtYXJnaW4tbGVmdDogMTVweDtcclxuICAgICAgfVxyXG4gICAgICAuaW5wdXRfYm94IHtcclxuICAgICAgICB3aWR0aDogY2FsYygxMDAlIC0gMTMwcHgpO1xyXG4gICAgICAgIGhlaWdodDogNTBweDtcclxuICAgICAgICBmbG9hdDogbGVmdDtcclxuICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICAgICAgLmNoYXQtaW5wdXQge1xyXG4gICAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgICBoZWlnaHQ6IDM0cHg7XHJcbiAgICAgICAgICBsaW5lLWhlaWdodDogMjRweDtcclxuICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICAgICAgICAgIHBhZGRpbmc6IDNweCA4cHg7XHJcbiAgICAgICAgICBjb2xvcjogIzY2NjtcclxuICAgICAgICAgIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5jaGF0LWRpdiB7XHJcbiAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgIGhlaWdodDogNDBweDtcclxuICAgICAgICAgIGxpbmUtaGVpZ2h0OiA0MHB4O1xyXG4gICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xyXG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgICAgY29sb3I6ICM2NjY7XHJcbiAgICAgICAgICBtYXJnaW4tbGVmdDogNXB4O1xyXG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICAgICAgYmFja2dyb3VuZDogI2ZmZjtcclxuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgICAgICAgLmNoYXQtbWFzayB7XHJcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDI0cHg7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICAgICAgdG9wOiAwO1xyXG4gICAgICAgICAgICBsZWZ0OiAwO1xyXG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgICAgICAgIHotaW5kZXg6IDk5OTk7XHJcbiAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgICAgICAgICAvLyBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDEpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAuY2hhdC1kaXYtYWN0aXZlIHtcclxuICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgaGVpZ2h0OiA0MHB4O1xyXG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDQwcHg7XHJcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XHJcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgICBjb2xvcjogI2ZmZjtcclxuICAgICAgICAgIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAjNDA5ZWZmO1xyXG4gICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICAgICAgICBhbmltYXRpb246IGJsaW5rIDFzIGxpbmVhciBpbmZpbml0ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLmJ0bl9ib3gge1xyXG4gICAgICAgIHdpZHRoOiA5MHB4O1xyXG4gICAgICAgIGhlaWdodDogNTBweDtcclxuICAgICAgICBmbG9hdDogbGVmdDtcclxuICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuPC9zdHlsZT5cclxuPHN0eWxlIGxhbmc9XCJzY3NzXCI+XHJcbi5lbC1hdmF0YXIge1xyXG4gIHdpZHRoOiAzMHB4O1xyXG4gIGhlaWdodDogMzBweDtcclxuICBsaW5lLWhlaWdodDogMzBweDtcclxufVxyXG48L3N0eWxlPlxyXG4iLCJ2YXIgcmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3ZtID0gdGhpc1xuICB2YXIgX2ggPSBfdm0uJGNyZWF0ZUVsZW1lbnRcbiAgdmFyIF9jID0gX3ZtLl9zZWxmLl9jIHx8IF9oXG4gIHJldHVybiBfYyhcbiAgICBcImRpdlwiLFxuICAgIHsgcmVmOiBcInBhZ2VcIiwgc3RhdGljQ2xhc3M6IFwidGVzdFwiLCBzdGF0aWNTdHlsZTogeyBiYWNrZ3JvdW5kOiBcIiNmZmZcIiB9IH0sXG4gICAgW1xuICAgICAgX2MoXCJ2YW4tbmF2LWJhclwiLCB7XG4gICAgICAgIGF0dHJzOiB7IHRpdGxlOiBcIuWwj+W9qeS6kVwiLCBcImxlZnQtYXJyb3dcIjogXCJcIiB9LFxuICAgICAgICBvbjogeyBcImNsaWNrLWxlZnRcIjogX3ZtLmdvQmFjayB9LFxuICAgICAgfSksXG4gICAgICBfYyhcbiAgICAgICAgXCJkaXZcIixcbiAgICAgICAgeyBzdGF0aWNDbGFzczogXCJjb250ZW50XCIgfSxcbiAgICAgICAgW1xuICAgICAgICAgICFfdm0uc2hvd0NvbXBvbmVudFxuICAgICAgICAgICAgPyBfYyhcbiAgICAgICAgICAgICAgICBcImVsLWNvbnRhaW5lclwiLFxuICAgICAgICAgICAgICAgIHsgcmVmOiBcImJvZHlmb3JtXCIsIHN0YXRpY1N0eWxlOiB7IGhlaWdodDogXCIxMDAlXCIgfSB9LFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgIF9jKFwiZGl2XCIsIHsgc3RhdGljQ2xhc3M6IFwiZWxfbWFpbl9jb250ZW50XCIgfSwgW1xuICAgICAgICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgICAgICAgICAgICAgIHsgc3RhdGljQ2xhc3M6IFwibWFpbl9jb250ZW50X2NlbnRlclwiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgX2MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiZWwtc2Nyb2xsYmFyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6IFwic2Nyb2xsYmFyUmVmXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6IFwiZmF1bHRFeHBlcnRDb25zdWx0YXRpb25fc2Nyb2xsYmFyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fbChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0ubWVzc2FnZXNXaXRoVGltZXN0YW1wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfYyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzaG93XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd05hbWU6IFwidi1zaG93XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5tZXNzYWdlc1dpdGhUaW1lc3RhbXBzLmxlbmd0aCA+IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtZXNzYWdlc1dpdGhUaW1lc3RhbXBzLmxlbmd0aCA+IDBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zaG93VGltZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBfYyhcImRpdlwiLCB7IHN0YXRpY0NsYXNzOiBcImNoYXRfdGltZVwiIH0sIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uZm9ybWF0U2VuZFRpbWUoaXRlbS50aW1lc3RhbXApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IF92bS5fZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic2hvd1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3TmFtZTogXCJ2LXNob3dcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLnF1ZXN0aW9uICE9PSBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogXCJpdGVtLnF1ZXN0aW9uICE9PSAnJ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiBcInF1ZXN0aW9uIGNoYXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hhdF9xdWVzdGlvbiBjaGF0X2NvbW1vblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoXCJzcGFuXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl92KF92bS5fcyhpdGVtLnF1ZXN0aW9uKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZWwtYXZhdGFyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdGF0aWNDbGFzczogXCJhdmF0YXJcIiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKFwic3BhblwiLCB7IHN0YXRpY0NsYXNzOiBcIm1lXCIgfSwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXCLmiJFcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5hbnN3ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0YXRpY0NsYXNzOiBcImFuc3dlciBjaGF0XCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbC1hdmF0YXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdGF0aWNDbGFzczogXCJhdmF0YXJcIiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoXCJpbWdcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiByZXF1aXJlKFwiQC9hc3NldHMveGN5LnBuZ1wiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0OiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInNob3dcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3TmFtZTogXCJ2LXNob3dcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uYW5zd2VyLmxlbmd0aCA+IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpdGVtLmFuc3dlci5sZW5ndGggPiAwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6IFwiY2hhdF9hbnN3ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKFwicFwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwi5Li65L2g5om+5Yiw5Lul5LiL5YaF5a6577yM6K+354K55Ye75p+l55yL44CCXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl9sKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5hbnN3ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzaG93XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3TmFtZTogXCJ2LXNob3dcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYW5zd2VyLmxlbmd0aCA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIml0ZW0uYW5zd2VyLmxlbmd0aCA+IDFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGF0X2Fuc3dlcl9jb250ZW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLnRvRGV0YWlsKGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl92KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3MoaW5kZXggKyAxKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIuIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnNpdGVOYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY29tcG9uZW50TmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX2woXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmFuc3dlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3RpdmVzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInNob3dcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdOYW1lOiBcInYtc2hvd1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5hbnN3ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmxlbmd0aCA9PSAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIml0ZW0uYW5zd2VyLmxlbmd0aCA9PSAxXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hhdF9hbnN3ZXJfY29udGVudFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS50b0RldGFpbChlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fcyhpbmRleCArIDEpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi4gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2l0ZU5hbWUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5jb21wb25lbnROYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKFwiYnJcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzcGFuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczogXCJ3b3Jkc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl92KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl9zKGUuY29udGVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzaG93XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd05hbWU6IFwidi1zaG93XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYW5zd2VyLmxlbmd0aCA9PSAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5xdWVzdGlvbiA9PSBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaXRlbS5hbnN3ZXIubGVuZ3RoID09IDAgJiYgaXRlbS5xdWVzdGlvbiA9PSAnJ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiBcImNoYXRfYW5zd2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3BhblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcInRleHQtY29udGFpbmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCLkvaDlpb3vvIzmiJHmmK/lsI/lvankupHvvIzmiJHlj6/ku6XluK7kvaDmn6Xor6LlnLDooajmsLTjgIHnqbrmsJTotKjph4/lkozmjpLmsaHljZXkvY3nmoTkv6Hmga/jgIJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzaG93XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd05hbWU6IFwidi1zaG93XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYW5zd2VyLmxlbmd0aCA9PSAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5xdWVzdGlvbiAhPT0gXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIml0ZW0uYW5zd2VyLmxlbmd0aCA9PSAwICYmIGl0ZW0ucXVlc3Rpb24gIT09ICcnXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6IFwiY2hhdF9hbnN3ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljU3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9hdDogXCJsZWZ0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCLlsI/lvankupHmraPlnKjliqrlipvliIbmnpDkuK0uLi5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoXCJkaXZcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6IFwibG9hZGluZy1pY29uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIF9jKFwiZGl2XCIsIHsgc3RhdGljQ2xhc3M6IFwibWFpbl9jb250ZW50X2Zvb3RlclwiIH0sIFtcbiAgICAgICAgICAgICAgICAgICAgICBfYyhcImlcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzaG93XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3TmFtZTogXCJ2LXNob3dcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLmljb25TaG93LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246IFwiaWNvblNob3dcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczogXCJlbC1pY29uLW1pY3JvcGhvbmVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7IGNsaWNrOiBfdm0uY2xvc2UgfSxcbiAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICBfYyhcImlcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzaG93XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3TmFtZTogXCJ2LXNob3dcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIV92bS5pY29uU2hvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uOiBcIiFpY29uU2hvd1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiBcImVsLWljb24tdHVybi1vZmYtbWljcm9waG9uZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgb246IHsgY2xpY2s6IF92bS5vcGVuIH0sXG4gICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgX2MoXCJkaXZcIiwgeyBzdGF0aWNDbGFzczogXCJpbnB1dF9ib3hcIiB9LCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBfYyhcInRleHRhcmVhXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwibW9kZWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd05hbWU6IFwidi1tb2RlbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5xdWVzdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246IFwicXVlc3Rpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic2hvd1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3TmFtZTogXCJ2LXNob3dcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAhX3ZtLmljb25TaG93LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogXCIhaWNvblNob3dcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczogXCJjaGF0LWlucHV0IG5vLWJvcmRlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb21Qcm9wczogeyB2YWx1ZTogX3ZtLnF1ZXN0aW9uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uICgkZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkZXZlbnQudGFyZ2V0LmNvbXBvc2luZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5xdWVzdGlvbiA9ICRldmVudC50YXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXCIgXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgX2MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3RpdmVzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic2hvd1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdOYW1lOiBcInYtc2hvd1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLmljb25TaG93LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uOiBcImljb25TaG93XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hhdC1kaXZcIjogIV92bS5hY3RpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNoYXQtZGl2LWFjdGl2ZVwiOiBfdm0uYWN0aXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdWNoc3RhcnQ6IF92bS5zdGFydFNwZWFraW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG91Y2hlbmQ6IF92bS5zdG9wU3BlYWtpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgW192bS5fdihcIiBcIiArIF92bS5fcyhfdm0ucXVlc3Rpb24pICsgXCIgXCIpXVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0YXRpY0NsYXNzOiBcImJ0bl9ib3hcIiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVsLWJ1dHRvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiBcImJ0blwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgdHlwZTogXCJwcmltYXJ5XCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoJGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5hc2tDbGljayhfdm0ucXVlc3Rpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW192bS5fdihcIuWPkemAgVwiKV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIDogX3ZtLnNob3dDb21wb25lbnRcbiAgICAgICAgICAgID8gX2MoXCJzZWFyY2hDb21wb25lbnRzXCIsIHsgcmVmOiBcInN1bW1hcnlBbGxSZWZcIiB9KVxuICAgICAgICAgICAgOiBfdm0uX2UoKSxcbiAgICAgICAgXSxcbiAgICAgICAgMVxuICAgICAgKSxcbiAgICBdLFxuICAgIDFcbiAgKVxufVxudmFyIHN0YXRpY1JlbmRlckZucyA9IFtdXG5yZW5kZXIuX3dpdGhTdHJpcHBlZCA9IHRydWVcblxuZXhwb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfSIsIid1c2Ugc3RyaWN0JztcbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcbnZhciBvcmRpbmFyeVRvUHJpbWl0aXZlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29yZGluYXJ5LXRvLXByaW1pdGl2ZScpO1xuXG52YXIgJFR5cGVFcnJvciA9IFR5cGVFcnJvcjtcblxuLy8gYERhdGUucHJvdG90eXBlW0BAdG9QcmltaXRpdmVdKGhpbnQpYCBtZXRob2QgaW1wbGVtZW50YXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtZGF0ZS5wcm90b3R5cGUtQEB0b3ByaW1pdGl2ZVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaGludCkge1xuICBhbk9iamVjdCh0aGlzKTtcbiAgaWYgKGhpbnQgPT09ICdzdHJpbmcnIHx8IGhpbnQgPT09ICdkZWZhdWx0JykgaGludCA9ICdzdHJpbmcnO1xuICBlbHNlIGlmIChoaW50ICE9PSAnbnVtYmVyJykgdGhyb3cgbmV3ICRUeXBlRXJyb3IoJ0luY29ycmVjdCBoaW50Jyk7XG4gIHJldHVybiBvcmRpbmFyeVRvUHJpbWl0aXZlKHRoaXMsIGhpbnQpO1xufTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy8yODBcbnZhciB1c2VyQWdlbnQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZW52aXJvbm1lbnQtdXNlci1hZ2VudCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IC9WZXJzaW9uXFwvMTAoPzpcXC5cXGQrKXsxLDJ9KD86IFtcXHcuL10rKT8oPzogTW9iaWxlXFwvXFx3Kyk/IFNhZmFyaVxcLy8udGVzdCh1c2VyQWdlbnQpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtc3RyaW5nLXBhZC1zdGFydC1lbmRcbnZhciB1bmN1cnJ5VGhpcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMnKTtcbnZhciB0b0xlbmd0aCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1sZW5ndGgnKTtcbnZhciB0b1N0cmluZyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1zdHJpbmcnKTtcbnZhciAkcmVwZWF0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3N0cmluZy1yZXBlYXQnKTtcbnZhciByZXF1aXJlT2JqZWN0Q29lcmNpYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlcXVpcmUtb2JqZWN0LWNvZXJjaWJsZScpO1xuXG52YXIgcmVwZWF0ID0gdW5jdXJyeVRoaXMoJHJlcGVhdCk7XG52YXIgc3RyaW5nU2xpY2UgPSB1bmN1cnJ5VGhpcygnJy5zbGljZSk7XG52YXIgY2VpbCA9IE1hdGguY2VpbDtcblxuLy8gYFN0cmluZy5wcm90b3R5cGUueyBwYWRTdGFydCwgcGFkRW5kIH1gIG1ldGhvZHMgaW1wbGVtZW50YXRpb25cbnZhciBjcmVhdGVNZXRob2QgPSBmdW5jdGlvbiAoSVNfRU5EKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoJHRoaXMsIG1heExlbmd0aCwgZmlsbFN0cmluZykge1xuICAgIHZhciBTID0gdG9TdHJpbmcocmVxdWlyZU9iamVjdENvZXJjaWJsZSgkdGhpcykpO1xuICAgIHZhciBpbnRNYXhMZW5ndGggPSB0b0xlbmd0aChtYXhMZW5ndGgpO1xuICAgIHZhciBzdHJpbmdMZW5ndGggPSBTLmxlbmd0aDtcbiAgICB2YXIgZmlsbFN0ciA9IGZpbGxTdHJpbmcgPT09IHVuZGVmaW5lZCA/ICcgJyA6IHRvU3RyaW5nKGZpbGxTdHJpbmcpO1xuICAgIHZhciBmaWxsTGVuLCBzdHJpbmdGaWxsZXI7XG4gICAgaWYgKGludE1heExlbmd0aCA8PSBzdHJpbmdMZW5ndGggfHwgZmlsbFN0ciA9PT0gJycpIHJldHVybiBTO1xuICAgIGZpbGxMZW4gPSBpbnRNYXhMZW5ndGggLSBzdHJpbmdMZW5ndGg7XG4gICAgc3RyaW5nRmlsbGVyID0gcmVwZWF0KGZpbGxTdHIsIGNlaWwoZmlsbExlbiAvIGZpbGxTdHIubGVuZ3RoKSk7XG4gICAgaWYgKHN0cmluZ0ZpbGxlci5sZW5ndGggPiBmaWxsTGVuKSBzdHJpbmdGaWxsZXIgPSBzdHJpbmdTbGljZShzdHJpbmdGaWxsZXIsIDAsIGZpbGxMZW4pO1xuICAgIHJldHVybiBJU19FTkQgPyBTICsgc3RyaW5nRmlsbGVyIDogc3RyaW5nRmlsbGVyICsgUztcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAvLyBgU3RyaW5nLnByb3RvdHlwZS5wYWRTdGFydGAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtc3RyaW5nLnByb3RvdHlwZS5wYWRzdGFydFxuICBzdGFydDogY3JlYXRlTWV0aG9kKGZhbHNlKSxcbiAgLy8gYFN0cmluZy5wcm90b3R5cGUucGFkRW5kYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1zdHJpbmcucHJvdG90eXBlLnBhZGVuZFxuICBlbmQ6IGNyZWF0ZU1ldGhvZCh0cnVlKVxufTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8vIGJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXN0aWVqcy9wdW55Y29kZS5qcy9ibG9iL21hc3Rlci9wdW55Y29kZS5qc1xudmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xuXG52YXIgbWF4SW50ID0gMjE0NzQ4MzY0NzsgLy8gYWthLiAweDdGRkZGRkZGIG9yIDJeMzEtMVxudmFyIGJhc2UgPSAzNjtcbnZhciB0TWluID0gMTtcbnZhciB0TWF4ID0gMjY7XG52YXIgc2tldyA9IDM4O1xudmFyIGRhbXAgPSA3MDA7XG52YXIgaW5pdGlhbEJpYXMgPSA3MjtcbnZhciBpbml0aWFsTiA9IDEyODsgLy8gMHg4MFxudmFyIGRlbGltaXRlciA9ICctJzsgLy8gJ1xceDJEJ1xudmFyIHJlZ2V4Tm9uQVNDSUkgPSAvW15cXDAtXFx1MDA3RV0vOyAvLyBub24tQVNDSUkgY2hhcnNcbnZhciByZWdleFNlcGFyYXRvcnMgPSAvWy5cXHUzMDAyXFx1RkYwRVxcdUZGNjFdL2c7IC8vIFJGQyAzNDkwIHNlcGFyYXRvcnNcbnZhciBPVkVSRkxPV19FUlJPUiA9ICdPdmVyZmxvdzogaW5wdXQgbmVlZHMgd2lkZXIgaW50ZWdlcnMgdG8gcHJvY2Vzcyc7XG52YXIgYmFzZU1pbnVzVE1pbiA9IGJhc2UgLSB0TWluO1xuXG52YXIgJFJhbmdlRXJyb3IgPSBSYW5nZUVycm9yO1xudmFyIGV4ZWMgPSB1bmN1cnJ5VGhpcyhyZWdleFNlcGFyYXRvcnMuZXhlYyk7XG52YXIgZmxvb3IgPSBNYXRoLmZsb29yO1xudmFyIGZyb21DaGFyQ29kZSA9IFN0cmluZy5mcm9tQ2hhckNvZGU7XG52YXIgY2hhckNvZGVBdCA9IHVuY3VycnlUaGlzKCcnLmNoYXJDb2RlQXQpO1xudmFyIGpvaW4gPSB1bmN1cnJ5VGhpcyhbXS5qb2luKTtcbnZhciBwdXNoID0gdW5jdXJyeVRoaXMoW10ucHVzaCk7XG52YXIgcmVwbGFjZSA9IHVuY3VycnlUaGlzKCcnLnJlcGxhY2UpO1xudmFyIHNwbGl0ID0gdW5jdXJyeVRoaXMoJycuc3BsaXQpO1xudmFyIHRvTG93ZXJDYXNlID0gdW5jdXJyeVRoaXMoJycudG9Mb3dlckNhc2UpO1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgY29udGFpbmluZyB0aGUgbnVtZXJpYyBjb2RlIHBvaW50cyBvZiBlYWNoIFVuaWNvZGVcbiAqIGNoYXJhY3RlciBpbiB0aGUgc3RyaW5nLiBXaGlsZSBKYXZhU2NyaXB0IHVzZXMgVUNTLTIgaW50ZXJuYWxseSxcbiAqIHRoaXMgZnVuY3Rpb24gd2lsbCBjb252ZXJ0IGEgcGFpciBvZiBzdXJyb2dhdGUgaGFsdmVzIChlYWNoIG9mIHdoaWNoXG4gKiBVQ1MtMiBleHBvc2VzIGFzIHNlcGFyYXRlIGNoYXJhY3RlcnMpIGludG8gYSBzaW5nbGUgY29kZSBwb2ludCxcbiAqIG1hdGNoaW5nIFVURi0xNi5cbiAqL1xudmFyIHVjczJkZWNvZGUgPSBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gIHZhciBvdXRwdXQgPSBbXTtcbiAgdmFyIGNvdW50ZXIgPSAwO1xuICB2YXIgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aDtcbiAgd2hpbGUgKGNvdW50ZXIgPCBsZW5ndGgpIHtcbiAgICB2YXIgdmFsdWUgPSBjaGFyQ29kZUF0KHN0cmluZywgY291bnRlcisrKTtcbiAgICBpZiAodmFsdWUgPj0gMHhEODAwICYmIHZhbHVlIDw9IDB4REJGRiAmJiBjb3VudGVyIDwgbGVuZ3RoKSB7XG4gICAgICAvLyBJdCdzIGEgaGlnaCBzdXJyb2dhdGUsIGFuZCB0aGVyZSBpcyBhIG5leHQgY2hhcmFjdGVyLlxuICAgICAgdmFyIGV4dHJhID0gY2hhckNvZGVBdChzdHJpbmcsIGNvdW50ZXIrKyk7XG4gICAgICBpZiAoKGV4dHJhICYgMHhGQzAwKSA9PT0gMHhEQzAwKSB7IC8vIExvdyBzdXJyb2dhdGUuXG4gICAgICAgIHB1c2gob3V0cHV0LCAoKHZhbHVlICYgMHgzRkYpIDw8IDEwKSArIChleHRyYSAmIDB4M0ZGKSArIDB4MTAwMDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSXQncyBhbiB1bm1hdGNoZWQgc3Vycm9nYXRlOyBvbmx5IGFwcGVuZCB0aGlzIGNvZGUgdW5pdCwgaW4gY2FzZSB0aGVcbiAgICAgICAgLy8gbmV4dCBjb2RlIHVuaXQgaXMgdGhlIGhpZ2ggc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIuXG4gICAgICAgIHB1c2gob3V0cHV0LCB2YWx1ZSk7XG4gICAgICAgIGNvdW50ZXItLTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcHVzaChvdXRwdXQsIHZhbHVlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn07XG5cbi8qKlxuICogQ29udmVydHMgYSBkaWdpdC9pbnRlZ2VyIGludG8gYSBiYXNpYyBjb2RlIHBvaW50LlxuICovXG52YXIgZGlnaXRUb0Jhc2ljID0gZnVuY3Rpb24gKGRpZ2l0KSB7XG4gIC8vICAwLi4yNSBtYXAgdG8gQVNDSUkgYS4ueiBvciBBLi5aXG4gIC8vIDI2Li4zNSBtYXAgdG8gQVNDSUkgMC4uOVxuICByZXR1cm4gZGlnaXQgKyAyMiArIDc1ICogKGRpZ2l0IDwgMjYpO1xufTtcblxuLyoqXG4gKiBCaWFzIGFkYXB0YXRpb24gZnVuY3Rpb24gYXMgcGVyIHNlY3Rpb24gMy40IG9mIFJGQyAzNDkyLlxuICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM0OTIjc2VjdGlvbi0zLjRcbiAqL1xudmFyIGFkYXB0ID0gZnVuY3Rpb24gKGRlbHRhLCBudW1Qb2ludHMsIGZpcnN0VGltZSkge1xuICB2YXIgayA9IDA7XG4gIGRlbHRhID0gZmlyc3RUaW1lID8gZmxvb3IoZGVsdGEgLyBkYW1wKSA6IGRlbHRhID4+IDE7XG4gIGRlbHRhICs9IGZsb29yKGRlbHRhIC8gbnVtUG9pbnRzKTtcbiAgd2hpbGUgKGRlbHRhID4gYmFzZU1pbnVzVE1pbiAqIHRNYXggPj4gMSkge1xuICAgIGRlbHRhID0gZmxvb3IoZGVsdGEgLyBiYXNlTWludXNUTWluKTtcbiAgICBrICs9IGJhc2U7XG4gIH1cbiAgcmV0dXJuIGZsb29yKGsgKyAoYmFzZU1pbnVzVE1pbiArIDEpICogZGVsdGEgLyAoZGVsdGEgKyBza2V3KSk7XG59O1xuXG4vKipcbiAqIENvbnZlcnRzIGEgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scyAoZS5nLiBhIGRvbWFpbiBuYW1lIGxhYmVsKSB0byBhXG4gKiBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLlxuICovXG52YXIgZW5jb2RlID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gIHZhciBvdXRwdXQgPSBbXTtcblxuICAvLyBDb252ZXJ0IHRoZSBpbnB1dCBpbiBVQ1MtMiB0byBhbiBhcnJheSBvZiBVbmljb2RlIGNvZGUgcG9pbnRzLlxuICBpbnB1dCA9IHVjczJkZWNvZGUoaW5wdXQpO1xuXG4gIC8vIENhY2hlIHRoZSBsZW5ndGguXG4gIHZhciBpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aDtcblxuICAvLyBJbml0aWFsaXplIHRoZSBzdGF0ZS5cbiAgdmFyIG4gPSBpbml0aWFsTjtcbiAgdmFyIGRlbHRhID0gMDtcbiAgdmFyIGJpYXMgPSBpbml0aWFsQmlhcztcbiAgdmFyIGksIGN1cnJlbnRWYWx1ZTtcblxuICAvLyBIYW5kbGUgdGhlIGJhc2ljIGNvZGUgcG9pbnRzLlxuICBmb3IgKGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHtcbiAgICBjdXJyZW50VmFsdWUgPSBpbnB1dFtpXTtcbiAgICBpZiAoY3VycmVudFZhbHVlIDwgMHg4MCkge1xuICAgICAgcHVzaChvdXRwdXQsIGZyb21DaGFyQ29kZShjdXJyZW50VmFsdWUpKTtcbiAgICB9XG4gIH1cblxuICB2YXIgYmFzaWNMZW5ndGggPSBvdXRwdXQubGVuZ3RoOyAvLyBudW1iZXIgb2YgYmFzaWMgY29kZSBwb2ludHMuXG4gIHZhciBoYW5kbGVkQ1BDb3VudCA9IGJhc2ljTGVuZ3RoOyAvLyBudW1iZXIgb2YgY29kZSBwb2ludHMgdGhhdCBoYXZlIGJlZW4gaGFuZGxlZDtcblxuICAvLyBGaW5pc2ggdGhlIGJhc2ljIHN0cmluZyB3aXRoIGEgZGVsaW1pdGVyIHVubGVzcyBpdCdzIGVtcHR5LlxuICBpZiAoYmFzaWNMZW5ndGgpIHtcbiAgICBwdXNoKG91dHB1dCwgZGVsaW1pdGVyKTtcbiAgfVxuXG4gIC8vIE1haW4gZW5jb2RpbmcgbG9vcDpcbiAgd2hpbGUgKGhhbmRsZWRDUENvdW50IDwgaW5wdXRMZW5ndGgpIHtcbiAgICAvLyBBbGwgbm9uLWJhc2ljIGNvZGUgcG9pbnRzIDwgbiBoYXZlIGJlZW4gaGFuZGxlZCBhbHJlYWR5LiBGaW5kIHRoZSBuZXh0IGxhcmdlciBvbmU6XG4gICAgdmFyIG0gPSBtYXhJbnQ7XG4gICAgZm9yIChpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjdXJyZW50VmFsdWUgPSBpbnB1dFtpXTtcbiAgICAgIGlmIChjdXJyZW50VmFsdWUgPj0gbiAmJiBjdXJyZW50VmFsdWUgPCBtKSB7XG4gICAgICAgIG0gPSBjdXJyZW50VmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSW5jcmVhc2UgYGRlbHRhYCBlbm91Z2ggdG8gYWR2YW5jZSB0aGUgZGVjb2RlcidzIDxuLGk+IHN0YXRlIHRvIDxtLDA+LCBidXQgZ3VhcmQgYWdhaW5zdCBvdmVyZmxvdy5cbiAgICB2YXIgaGFuZGxlZENQQ291bnRQbHVzT25lID0gaGFuZGxlZENQQ291bnQgKyAxO1xuICAgIGlmIChtIC0gbiA+IGZsb29yKChtYXhJbnQgLSBkZWx0YSkgLyBoYW5kbGVkQ1BDb3VudFBsdXNPbmUpKSB7XG4gICAgICB0aHJvdyBuZXcgJFJhbmdlRXJyb3IoT1ZFUkZMT1dfRVJST1IpO1xuICAgIH1cblxuICAgIGRlbHRhICs9IChtIC0gbikgKiBoYW5kbGVkQ1BDb3VudFBsdXNPbmU7XG4gICAgbiA9IG07XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGN1cnJlbnRWYWx1ZSA9IGlucHV0W2ldO1xuICAgICAgaWYgKGN1cnJlbnRWYWx1ZSA8IG4gJiYgKytkZWx0YSA+IG1heEludCkge1xuICAgICAgICB0aHJvdyBuZXcgJFJhbmdlRXJyb3IoT1ZFUkZMT1dfRVJST1IpO1xuICAgICAgfVxuICAgICAgaWYgKGN1cnJlbnRWYWx1ZSA9PT0gbikge1xuICAgICAgICAvLyBSZXByZXNlbnQgZGVsdGEgYXMgYSBnZW5lcmFsaXplZCB2YXJpYWJsZS1sZW5ndGggaW50ZWdlci5cbiAgICAgICAgdmFyIHEgPSBkZWx0YTtcbiAgICAgICAgdmFyIGsgPSBiYXNlO1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgIHZhciB0ID0gayA8PSBiaWFzID8gdE1pbiA6IGsgPj0gYmlhcyArIHRNYXggPyB0TWF4IDogayAtIGJpYXM7XG4gICAgICAgICAgaWYgKHEgPCB0KSBicmVhaztcbiAgICAgICAgICB2YXIgcU1pbnVzVCA9IHEgLSB0O1xuICAgICAgICAgIHZhciBiYXNlTWludXNUID0gYmFzZSAtIHQ7XG4gICAgICAgICAgcHVzaChvdXRwdXQsIGZyb21DaGFyQ29kZShkaWdpdFRvQmFzaWModCArIHFNaW51c1QgJSBiYXNlTWludXNUKSkpO1xuICAgICAgICAgIHEgPSBmbG9vcihxTWludXNUIC8gYmFzZU1pbnVzVCk7XG4gICAgICAgICAgayArPSBiYXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVzaChvdXRwdXQsIGZyb21DaGFyQ29kZShkaWdpdFRvQmFzaWMocSkpKTtcbiAgICAgICAgYmlhcyA9IGFkYXB0KGRlbHRhLCBoYW5kbGVkQ1BDb3VudFBsdXNPbmUsIGhhbmRsZWRDUENvdW50ID09PSBiYXNpY0xlbmd0aCk7XG4gICAgICAgIGRlbHRhID0gMDtcbiAgICAgICAgaGFuZGxlZENQQ291bnQrKztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkZWx0YSsrO1xuICAgIG4rKztcbiAgfVxuICByZXR1cm4gam9pbihvdXRwdXQsICcnKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gIHZhciBlbmNvZGVkID0gW107XG4gIHZhciBsYWJlbHMgPSBzcGxpdChyZXBsYWNlKHRvTG93ZXJDYXNlKGlucHV0KSwgcmVnZXhTZXBhcmF0b3JzLCAnXFx1MDAyRScpLCAnLicpO1xuICB2YXIgaSwgbGFiZWw7XG4gIGZvciAoaSA9IDA7IGkgPCBsYWJlbHMubGVuZ3RoOyBpKyspIHtcbiAgICBsYWJlbCA9IGxhYmVsc1tpXTtcbiAgICBwdXNoKGVuY29kZWQsIGV4ZWMocmVnZXhOb25BU0NJSSwgbGFiZWwpID8gJ3huLS0nICsgZW5jb2RlKGxhYmVsKSA6IGxhYmVsKTtcbiAgfVxuICByZXR1cm4gam9pbihlbmNvZGVkLCAnLicpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBQUk9QRVJfRlVOQ1RJT05fTkFNRSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1uYW1lJykuUFJPUEVSO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgd2hpdGVzcGFjZXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2hpdGVzcGFjZXMnKTtcblxudmFyIG5vbiA9ICdcXHUyMDBCXFx1MDA4NVxcdTE4MEUnO1xuXG4vLyBjaGVjayB0aGF0IGEgbWV0aG9kIHdvcmtzIHdpdGggdGhlIGNvcnJlY3QgbGlzdFxuLy8gb2Ygd2hpdGVzcGFjZXMgYW5kIGhhcyBhIGNvcnJlY3QgbmFtZVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoTUVUSE9EX05BTUUpIHtcbiAgcmV0dXJuIGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gISF3aGl0ZXNwYWNlc1tNRVRIT0RfTkFNRV0oKVxuICAgICAgfHwgbm9uW01FVEhPRF9OQU1FXSgpICE9PSBub25cbiAgICAgIHx8IChQUk9QRVJfRlVOQ1RJT05fTkFNRSAmJiB3aGl0ZXNwYWNlc1tNRVRIT0RfTkFNRV0ubmFtZSAhPT0gTUVUSE9EX05BTUUpO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcbnZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcbnZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xudmFyIElTX1BVUkUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtcHVyZScpO1xuXG52YXIgSVRFUkFUT1IgPSB3ZWxsS25vd25TeW1ib2woJ2l0ZXJhdG9yJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gIWZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHVuaWNvcm4vcmVsYXRpdmUtdXJsLXN0eWxlIC0tIHJlcXVpcmVkIGZvciB0ZXN0aW5nXG4gIHZhciB1cmwgPSBuZXcgVVJMKCdiP2E9MSZiPTImYz0zJywgJ2h0dHBzOi8vYScpO1xuICB2YXIgcGFyYW1zID0gdXJsLnNlYXJjaFBhcmFtcztcbiAgdmFyIHBhcmFtczIgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCdhPTEmYT0yJmI9MycpO1xuICB2YXIgcmVzdWx0ID0gJyc7XG4gIHVybC5wYXRobmFtZSA9ICdjJTIwZCc7XG4gIHBhcmFtcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgcGFyYW1zWydkZWxldGUnXSgnYicpO1xuICAgIHJlc3VsdCArPSBrZXkgKyB2YWx1ZTtcbiAgfSk7XG4gIHBhcmFtczJbJ2RlbGV0ZSddKCdhJywgMik7XG4gIC8vIGB1bmRlZmluZWRgIGNhc2UgaXMgYSBDaHJvbWl1bSAxMTcgYnVnXG4gIC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTE0MjIyXG4gIHBhcmFtczJbJ2RlbGV0ZSddKCdiJywgdW5kZWZpbmVkKTtcbiAgcmV0dXJuIChJU19QVVJFICYmICghdXJsLnRvSlNPTiB8fCAhcGFyYW1zMi5oYXMoJ2EnLCAxKSB8fCBwYXJhbXMyLmhhcygnYScsIDIpIHx8ICFwYXJhbXMyLmhhcygnYScsIHVuZGVmaW5lZCkgfHwgcGFyYW1zMi5oYXMoJ2InKSkpXG4gICAgfHwgKCFwYXJhbXMuc2l6ZSAmJiAoSVNfUFVSRSB8fCAhREVTQ1JJUFRPUlMpKVxuICAgIHx8ICFwYXJhbXMuc29ydFxuICAgIHx8IHVybC5ocmVmICE9PSAnaHR0cHM6Ly9hL2MlMjBkP2E9MSZjPTMnXG4gICAgfHwgcGFyYW1zLmdldCgnYycpICE9PSAnMydcbiAgICB8fCBTdHJpbmcobmV3IFVSTFNlYXJjaFBhcmFtcygnP2E9MScpKSAhPT0gJ2E9MSdcbiAgICB8fCAhcGFyYW1zW0lURVJBVE9SXVxuICAgIC8vIHRocm93cyBpbiBFZGdlXG4gICAgfHwgbmV3IFVSTCgnaHR0cHM6Ly9hQGInKS51c2VybmFtZSAhPT0gJ2EnXG4gICAgfHwgbmV3IFVSTFNlYXJjaFBhcmFtcyhuZXcgVVJMU2VhcmNoUGFyYW1zKCdhPWInKSkuZ2V0KCdhJykgIT09ICdiJ1xuICAgIC8vIG5vdCBwdW55Y29kZWQgaW4gRWRnZVxuICAgIHx8IG5ldyBVUkwoJ2h0dHBzOi8v0YLQtdGB0YInKS5ob3N0ICE9PSAneG4tLWUxYXliYydcbiAgICAvLyBub3QgZXNjYXBlZCBpbiBDaHJvbWUgNjItXG4gICAgfHwgbmV3IFVSTCgnaHR0cHM6Ly9hI9CxJykuaGFzaCAhPT0gJyMlRDAlQjEnXG4gICAgLy8gZmFpbHMgaW4gQ2hyb21lIDY2LVxuICAgIHx8IHJlc3VsdCAhPT0gJ2ExYzMnXG4gICAgLy8gdGhyb3dzIGluIFNhZmFyaVxuICAgIHx8IG5ldyBVUkwoJ2h0dHBzOi8veCcsIHVuZGVmaW5lZCkuaG9zdCAhPT0gJ3gnO1xufSk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciAkbWFwID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWl0ZXJhdGlvbicpLm1hcDtcbnZhciBhcnJheU1ldGhvZEhhc1NwZWNpZXNTdXBwb3J0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LW1ldGhvZC1oYXMtc3BlY2llcy1zdXBwb3J0Jyk7XG5cbnZhciBIQVNfU1BFQ0lFU19TVVBQT1JUID0gYXJyYXlNZXRob2RIYXNTcGVjaWVzU3VwcG9ydCgnbWFwJyk7XG5cbi8vIGBBcnJheS5wcm90b3R5cGUubWFwYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLm1hcFxuLy8gd2l0aCBhZGRpbmcgc3VwcG9ydCBvZiBAQHNwZWNpZXNcbiQoeyB0YXJnZXQ6ICdBcnJheScsIHByb3RvOiB0cnVlLCBmb3JjZWQ6ICFIQVNfU1BFQ0lFU19TVVBQT1JUIH0sIHtcbiAgbWFwOiBmdW5jdGlvbiBtYXAoY2FsbGJhY2tmbiAvKiAsIHRoaXNBcmcgKi8pIHtcbiAgICByZXR1cm4gJG1hcCh0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG4gIH1cbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGhhc093biA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oYXMtb3duLXByb3BlcnR5Jyk7XG52YXIgZGVmaW5lQnVpbHRJbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZWZpbmUtYnVpbHQtaW4nKTtcbnZhciBkYXRlVG9QcmltaXRpdmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGF0ZS10by1wcmltaXRpdmUnKTtcbnZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcblxudmFyIFRPX1BSSU1JVElWRSA9IHdlbGxLbm93blN5bWJvbCgndG9QcmltaXRpdmUnKTtcbnZhciBEYXRlUHJvdG90eXBlID0gRGF0ZS5wcm90b3R5cGU7XG5cbi8vIGBEYXRlLnByb3RvdHlwZVtAQHRvUHJpbWl0aXZlXWAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWRhdGUucHJvdG90eXBlLUBAdG9wcmltaXRpdmVcbmlmICghaGFzT3duKERhdGVQcm90b3R5cGUsIFRPX1BSSU1JVElWRSkpIHtcbiAgZGVmaW5lQnVpbHRJbihEYXRlUHJvdG90eXBlLCBUT19QUklNSVRJVkUsIGRhdGVUb1ByaW1pdGl2ZSk7XG59XG4iLCIndXNlIHN0cmljdCc7XG52YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xudmFyIHRvSW5kZXhlZE9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1pbmRleGVkLW9iamVjdCcpO1xudmFyIG5hdGl2ZUdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yJykuZjtcbnZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xuXG52YXIgRk9SQ0VEID0gIURFU0NSSVBUT1JTIHx8IGZhaWxzKGZ1bmN0aW9uICgpIHsgbmF0aXZlR2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKDEpOyB9KTtcblxuLy8gYE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1vYmplY3QuZ2V0b3ducHJvcGVydHlkZXNjcmlwdG9yXG4kKHsgdGFyZ2V0OiAnT2JqZWN0Jywgc3RhdDogdHJ1ZSwgZm9yY2VkOiBGT1JDRUQsIHNoYW06ICFERVNDUklQVE9SUyB9LCB7XG4gIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGl0LCBrZXkpIHtcbiAgICByZXR1cm4gbmF0aXZlR2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRvSW5kZXhlZE9iamVjdChpdCksIGtleSk7XG4gIH1cbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyICQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZXhwb3J0Jyk7XG52YXIgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVzY3JpcHRvcnMnKTtcbnZhciBvd25LZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL293bi1rZXlzJyk7XG52YXIgdG9JbmRleGVkT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWluZGV4ZWQtb2JqZWN0Jyk7XG52YXIgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yTW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3InKTtcbnZhciBjcmVhdGVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jcmVhdGUtcHJvcGVydHknKTtcblxuLy8gYE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtb2JqZWN0LmdldG93bnByb3BlcnR5ZGVzY3JpcHRvcnNcbiQoeyB0YXJnZXQ6ICdPYmplY3QnLCBzdGF0OiB0cnVlLCBzaGFtOiAhREVTQ1JJUFRPUlMgfSwge1xuICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzOiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG9iamVjdCkge1xuICAgIHZhciBPID0gdG9JbmRleGVkT2JqZWN0KG9iamVjdCk7XG4gICAgdmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvck1vZHVsZS5mO1xuICAgIHZhciBrZXlzID0gb3duS2V5cyhPKTtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB2YXIga2V5LCBkZXNjcmlwdG9yO1xuICAgIHdoaWxlIChrZXlzLmxlbmd0aCA+IGluZGV4KSB7XG4gICAgICBkZXNjcmlwdG9yID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIGtleSA9IGtleXNbaW5kZXgrK10pO1xuICAgICAgaWYgKGRlc2NyaXB0b3IgIT09IHVuZGVmaW5lZCkgY3JlYXRlUHJvcGVydHkocmVzdWx0LCBrZXksIGRlc2NyaXB0b3IpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59KTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciAkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2V4cG9ydCcpO1xudmFyIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLW9iamVjdCcpO1xudmFyIG5hdGl2ZUtleXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWtleXMnKTtcbnZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xuXG52YXIgRkFJTFNfT05fUFJJTUlUSVZFUyA9IGZhaWxzKGZ1bmN0aW9uICgpIHsgbmF0aXZlS2V5cygxKTsgfSk7XG5cbi8vIGBPYmplY3Qua2V5c2AgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLW9iamVjdC5rZXlzXG4kKHsgdGFyZ2V0OiAnT2JqZWN0Jywgc3RhdDogdHJ1ZSwgZm9yY2VkOiBGQUlMU19PTl9QUklNSVRJVkVTIH0sIHtcbiAga2V5czogZnVuY3Rpb24ga2V5cyhpdCkge1xuICAgIHJldHVybiBuYXRpdmVLZXlzKHRvT2JqZWN0KGl0KSk7XG4gIH1cbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyICQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZXhwb3J0Jyk7XG52YXIgdW5jdXJyeVRoaXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tdW5jdXJyeS10aGlzJyk7XG52YXIgdG9BYnNvbHV0ZUluZGV4ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWFic29sdXRlLWluZGV4Jyk7XG5cbnZhciAkUmFuZ2VFcnJvciA9IFJhbmdlRXJyb3I7XG52YXIgZnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy9uby1zdHJpbmctZnJvbWNvZGVwb2ludCAtLSByZXF1aXJlZCBmb3IgdGVzdGluZ1xudmFyICRmcm9tQ29kZVBvaW50ID0gU3RyaW5nLmZyb21Db2RlUG9pbnQ7XG52YXIgam9pbiA9IHVuY3VycnlUaGlzKFtdLmpvaW4pO1xuXG4vLyBsZW5ndGggc2hvdWxkIGJlIDEsIG9sZCBGRiBwcm9ibGVtXG52YXIgSU5DT1JSRUNUX0xFTkdUSCA9ICEhJGZyb21Db2RlUG9pbnQgJiYgJGZyb21Db2RlUG9pbnQubGVuZ3RoICE9PSAxO1xuXG4vLyBgU3RyaW5nLmZyb21Db2RlUG9pbnRgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1zdHJpbmcuZnJvbWNvZGVwb2ludFxuJCh7IHRhcmdldDogJ1N0cmluZycsIHN0YXQ6IHRydWUsIGFyaXR5OiAxLCBmb3JjZWQ6IElOQ09SUkVDVF9MRU5HVEggfSwge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMgLS0gcmVxdWlyZWQgZm9yIGAubGVuZ3RoYFxuICBmcm9tQ29kZVBvaW50OiBmdW5jdGlvbiBmcm9tQ29kZVBvaW50KHgpIHtcbiAgICB2YXIgZWxlbWVudHMgPSBbXTtcbiAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGNvZGU7XG4gICAgd2hpbGUgKGxlbmd0aCA+IGkpIHtcbiAgICAgIGNvZGUgPSArYXJndW1lbnRzW2krK107XG4gICAgICBpZiAodG9BYnNvbHV0ZUluZGV4KGNvZGUsIDB4MTBGRkZGKSAhPT0gY29kZSkgdGhyb3cgbmV3ICRSYW5nZUVycm9yKGNvZGUgKyAnIGlzIG5vdCBhIHZhbGlkIGNvZGUgcG9pbnQnKTtcbiAgICAgIGVsZW1lbnRzW2ldID0gY29kZSA8IDB4MTAwMDBcbiAgICAgICAgPyBmcm9tQ2hhckNvZGUoY29kZSlcbiAgICAgICAgOiBmcm9tQ2hhckNvZGUoKChjb2RlIC09IDB4MTAwMDApID4+IDEwKSArIDB4RDgwMCwgY29kZSAlIDB4NDAwICsgMHhEQzAwKTtcbiAgICB9IHJldHVybiBqb2luKGVsZW1lbnRzLCAnJyk7XG4gIH1cbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyICQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZXhwb3J0Jyk7XG52YXIgJHBhZFN0YXJ0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3N0cmluZy1wYWQnKS5zdGFydDtcbnZhciBXRUJLSVRfQlVHID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3N0cmluZy1wYWQtd2Via2l0LWJ1ZycpO1xuXG4vLyBgU3RyaW5nLnByb3RvdHlwZS5wYWRTdGFydGAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXN0cmluZy5wcm90b3R5cGUucGFkc3RhcnRcbiQoeyB0YXJnZXQ6ICdTdHJpbmcnLCBwcm90bzogdHJ1ZSwgZm9yY2VkOiBXRUJLSVRfQlVHIH0sIHtcbiAgcGFkU3RhcnQ6IGZ1bmN0aW9uIHBhZFN0YXJ0KG1heExlbmd0aCAvKiAsIGZpbGxTdHJpbmcgPSAnICcgKi8pIHtcbiAgICByZXR1cm4gJHBhZFN0YXJ0KHRoaXMsIG1heExlbmd0aCwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuICB9XG59KTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciAkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2V4cG9ydCcpO1xudmFyICR0cmltID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3N0cmluZy10cmltJykudHJpbTtcbnZhciBmb3JjZWRTdHJpbmdUcmltTWV0aG9kID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3N0cmluZy10cmltLWZvcmNlZCcpO1xuXG4vLyBgU3RyaW5nLnByb3RvdHlwZS50cmltYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtc3RyaW5nLnByb3RvdHlwZS50cmltXG4kKHsgdGFyZ2V0OiAnU3RyaW5nJywgcHJvdG86IHRydWUsIGZvcmNlZDogZm9yY2VkU3RyaW5nVHJpbU1ldGhvZCgndHJpbScpIH0sIHtcbiAgdHJpbTogZnVuY3Rpb24gdHJpbSgpIHtcbiAgICByZXR1cm4gJHRyaW0odGhpcyk7XG4gIH1cbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGRlZmluZVdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbC1kZWZpbmUnKTtcbnZhciBkZWZpbmVTeW1ib2xUb1ByaW1pdGl2ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zeW1ib2wtZGVmaW5lLXRvLXByaW1pdGl2ZScpO1xuXG4vLyBgU3ltYm9sLnRvUHJpbWl0aXZlYCB3ZWxsLWtub3duIHN5bWJvbFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1zeW1ib2wudG9wcmltaXRpdmVcbmRlZmluZVdlbGxLbm93blN5bWJvbCgndG9QcmltaXRpdmUnKTtcblxuLy8gYFN5bWJvbC5wcm90b3R5cGVbQEB0b1ByaW1pdGl2ZV1gIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1zeW1ib2wucHJvdG90eXBlLUBAdG9wcmltaXRpdmVcbmRlZmluZVN5bWJvbFRvUHJpbWl0aXZlKCk7XG4iLCIndXNlIHN0cmljdCc7XG4vLyBUT0RPOiBpbiBjb3JlLWpzQDQsIG1vdmUgL21vZHVsZXMvIGRlcGVuZGVuY2llcyB0byBwdWJsaWMgZW50cmllcyBmb3IgYmV0dGVyIG9wdGltaXphdGlvbiBieSB0b29scyBsaWtlIGBwcmVzZXQtZW52YFxucmVxdWlyZSgnLi4vbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvcicpO1xucmVxdWlyZSgnLi4vbW9kdWxlcy9lcy5zdHJpbmcuZnJvbS1jb2RlLXBvaW50Jyk7XG52YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciBnbG9iYWxUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbC10aGlzJyk7XG52YXIgc2FmZUdldEJ1aWx0SW4gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2FmZS1nZXQtYnVpbHQtaW4nKTtcbnZhciBnZXRCdWlsdEluID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dldC1idWlsdC1pbicpO1xudmFyIGNhbGwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tY2FsbCcpO1xudmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xudmFyIERFU0NSSVBUT1JTID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Rlc2NyaXB0b3JzJyk7XG52YXIgVVNFX05BVElWRV9VUkwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdXJsLWNvbnN0cnVjdG9yLWRldGVjdGlvbicpO1xudmFyIGRlZmluZUJ1aWx0SW4gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVmaW5lLWJ1aWx0LWluJyk7XG52YXIgZGVmaW5lQnVpbHRJbkFjY2Vzc29yID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RlZmluZS1idWlsdC1pbi1hY2Nlc3NvcicpO1xudmFyIGRlZmluZUJ1aWx0SW5zID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RlZmluZS1idWlsdC1pbnMnKTtcbnZhciBzZXRUb1N0cmluZ1RhZyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zZXQtdG8tc3RyaW5nLXRhZycpO1xudmFyIGNyZWF0ZUl0ZXJhdG9yQ29uc3RydWN0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXRlcmF0b3ItY3JlYXRlLWNvbnN0cnVjdG9yJyk7XG52YXIgSW50ZXJuYWxTdGF0ZU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbnRlcm5hbC1zdGF0ZScpO1xudmFyIGFuSW5zdGFuY2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4taW5zdGFuY2UnKTtcbnZhciBpc0NhbGxhYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWNhbGxhYmxlJyk7XG52YXIgaGFzT3duID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hhcy1vd24tcHJvcGVydHknKTtcbnZhciBiaW5kID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLWJpbmQtY29udGV4dCcpO1xudmFyIGNsYXNzb2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZicpO1xudmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FuLW9iamVjdCcpO1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW9iamVjdCcpO1xudmFyICR0b1N0cmluZyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1zdHJpbmcnKTtcbnZhciBjcmVhdGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWNyZWF0ZScpO1xudmFyIGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jcmVhdGUtcHJvcGVydHktZGVzY3JpcHRvcicpO1xudmFyIGdldEl0ZXJhdG9yID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dldC1pdGVyYXRvcicpO1xudmFyIGdldEl0ZXJhdG9yTWV0aG9kID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dldC1pdGVyYXRvci1tZXRob2QnKTtcbnZhciBjcmVhdGVJdGVyUmVzdWx0T2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NyZWF0ZS1pdGVyLXJlc3VsdC1vYmplY3QnKTtcbnZhciB2YWxpZGF0ZUFyZ3VtZW50c0xlbmd0aCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy92YWxpZGF0ZS1hcmd1bWVudHMtbGVuZ3RoJyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG52YXIgYXJyYXlTb3J0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LXNvcnQnKTtcblxudmFyIElURVJBVE9SID0gd2VsbEtub3duU3ltYm9sKCdpdGVyYXRvcicpO1xudmFyIFVSTF9TRUFSQ0hfUEFSQU1TID0gJ1VSTFNlYXJjaFBhcmFtcyc7XG52YXIgVVJMX1NFQVJDSF9QQVJBTVNfSVRFUkFUT1IgPSBVUkxfU0VBUkNIX1BBUkFNUyArICdJdGVyYXRvcic7XG52YXIgc2V0SW50ZXJuYWxTdGF0ZSA9IEludGVybmFsU3RhdGVNb2R1bGUuc2V0O1xudmFyIGdldEludGVybmFsUGFyYW1zU3RhdGUgPSBJbnRlcm5hbFN0YXRlTW9kdWxlLmdldHRlckZvcihVUkxfU0VBUkNIX1BBUkFNUyk7XG52YXIgZ2V0SW50ZXJuYWxJdGVyYXRvclN0YXRlID0gSW50ZXJuYWxTdGF0ZU1vZHVsZS5nZXR0ZXJGb3IoVVJMX1NFQVJDSF9QQVJBTVNfSVRFUkFUT1IpO1xuXG52YXIgbmF0aXZlRmV0Y2ggPSBzYWZlR2V0QnVpbHRJbignZmV0Y2gnKTtcbnZhciBOYXRpdmVSZXF1ZXN0ID0gc2FmZUdldEJ1aWx0SW4oJ1JlcXVlc3QnKTtcbnZhciBIZWFkZXJzID0gc2FmZUdldEJ1aWx0SW4oJ0hlYWRlcnMnKTtcbnZhciBSZXF1ZXN0UHJvdG90eXBlID0gTmF0aXZlUmVxdWVzdCAmJiBOYXRpdmVSZXF1ZXN0LnByb3RvdHlwZTtcbnZhciBIZWFkZXJzUHJvdG90eXBlID0gSGVhZGVycyAmJiBIZWFkZXJzLnByb3RvdHlwZTtcbnZhciBUeXBlRXJyb3IgPSBnbG9iYWxUaGlzLlR5cGVFcnJvcjtcbnZhciBlbmNvZGVVUklDb21wb25lbnQgPSBnbG9iYWxUaGlzLmVuY29kZVVSSUNvbXBvbmVudDtcbnZhciBmcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO1xudmFyIGZyb21Db2RlUG9pbnQgPSBnZXRCdWlsdEluKCdTdHJpbmcnLCAnZnJvbUNvZGVQb2ludCcpO1xudmFyICRwYXJzZUludCA9IHBhcnNlSW50O1xudmFyIGNoYXJBdCA9IHVuY3VycnlUaGlzKCcnLmNoYXJBdCk7XG52YXIgam9pbiA9IHVuY3VycnlUaGlzKFtdLmpvaW4pO1xudmFyIHB1c2ggPSB1bmN1cnJ5VGhpcyhbXS5wdXNoKTtcbnZhciByZXBsYWNlID0gdW5jdXJyeVRoaXMoJycucmVwbGFjZSk7XG52YXIgc2hpZnQgPSB1bmN1cnJ5VGhpcyhbXS5zaGlmdCk7XG52YXIgc3BsaWNlID0gdW5jdXJyeVRoaXMoW10uc3BsaWNlKTtcbnZhciBzcGxpdCA9IHVuY3VycnlUaGlzKCcnLnNwbGl0KTtcbnZhciBzdHJpbmdTbGljZSA9IHVuY3VycnlUaGlzKCcnLnNsaWNlKTtcbnZhciBleGVjID0gdW5jdXJyeVRoaXMoLy4vLmV4ZWMpO1xuXG52YXIgcGx1cyA9IC9cXCsvZztcbnZhciBGQUxMQkFDS19SRVBMQUNFUiA9ICdcXHVGRkZEJztcbnZhciBWQUxJRF9IRVggPSAvXlswLTlhLWZdKyQvaTtcblxudmFyIHBhcnNlSGV4T2N0ZXQgPSBmdW5jdGlvbiAoc3RyaW5nLCBzdGFydCkge1xuICB2YXIgc3Vic3RyID0gc3RyaW5nU2xpY2Uoc3RyaW5nLCBzdGFydCwgc3RhcnQgKyAyKTtcbiAgaWYgKCFleGVjKFZBTElEX0hFWCwgc3Vic3RyKSkgcmV0dXJuIE5hTjtcblxuICByZXR1cm4gJHBhcnNlSW50KHN1YnN0ciwgMTYpO1xufTtcblxudmFyIGdldExlYWRpbmdPbmVzID0gZnVuY3Rpb24gKG9jdGV0KSB7XG4gIHZhciBjb3VudCA9IDA7XG4gIGZvciAodmFyIG1hc2sgPSAweDgwOyBtYXNrID4gMCAmJiAob2N0ZXQgJiBtYXNrKSAhPT0gMDsgbWFzayA+Pj0gMSkge1xuICAgIGNvdW50Kys7XG4gIH1cbiAgcmV0dXJuIGNvdW50O1xufTtcblxudmFyIHV0ZjhEZWNvZGUgPSBmdW5jdGlvbiAob2N0ZXRzKSB7XG4gIHZhciBjb2RlUG9pbnQgPSBudWxsO1xuXG4gIHN3aXRjaCAob2N0ZXRzLmxlbmd0aCkge1xuICAgIGNhc2UgMTpcbiAgICAgIGNvZGVQb2ludCA9IG9jdGV0c1swXTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgIGNvZGVQb2ludCA9IChvY3RldHNbMF0gJiAweDFGKSA8PCA2IHwgKG9jdGV0c1sxXSAmIDB4M0YpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOlxuICAgICAgY29kZVBvaW50ID0gKG9jdGV0c1swXSAmIDB4MEYpIDw8IDEyIHwgKG9jdGV0c1sxXSAmIDB4M0YpIDw8IDYgfCAob2N0ZXRzWzJdICYgMHgzRik7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQ6XG4gICAgICBjb2RlUG9pbnQgPSAob2N0ZXRzWzBdICYgMHgwNykgPDwgMTggfCAob2N0ZXRzWzFdICYgMHgzRikgPDwgMTIgfCAob2N0ZXRzWzJdICYgMHgzRikgPDwgNiB8IChvY3RldHNbM10gJiAweDNGKTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIGNvZGVQb2ludCA+IDB4MTBGRkZGID8gbnVsbCA6IGNvZGVQb2ludDtcbn07XG5cbnZhciBkZWNvZGUgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgaW5wdXQgPSByZXBsYWNlKGlucHV0LCBwbHVzLCAnICcpO1xuICB2YXIgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICB2YXIgcmVzdWx0ID0gJyc7XG4gIHZhciBpID0gMDtcblxuICB3aGlsZSAoaSA8IGxlbmd0aCkge1xuICAgIHZhciBkZWNvZGVkQ2hhciA9IGNoYXJBdChpbnB1dCwgaSk7XG5cbiAgICBpZiAoZGVjb2RlZENoYXIgPT09ICclJykge1xuICAgICAgaWYgKGNoYXJBdChpbnB1dCwgaSArIDEpID09PSAnJScgfHwgaSArIDMgPiBsZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0ICs9ICclJztcbiAgICAgICAgaSsrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIG9jdGV0ID0gcGFyc2VIZXhPY3RldChpbnB1dCwgaSArIDEpO1xuXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlIC0tIE5hTiBjaGVja1xuICAgICAgaWYgKG9jdGV0ICE9PSBvY3RldCkge1xuICAgICAgICByZXN1bHQgKz0gZGVjb2RlZENoYXI7XG4gICAgICAgIGkrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGkgKz0gMjtcbiAgICAgIHZhciBieXRlU2VxdWVuY2VMZW5ndGggPSBnZXRMZWFkaW5nT25lcyhvY3RldCk7XG5cbiAgICAgIGlmIChieXRlU2VxdWVuY2VMZW5ndGggPT09IDApIHtcbiAgICAgICAgZGVjb2RlZENoYXIgPSBmcm9tQ2hhckNvZGUob2N0ZXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGJ5dGVTZXF1ZW5jZUxlbmd0aCA9PT0gMSB8fCBieXRlU2VxdWVuY2VMZW5ndGggPiA0KSB7XG4gICAgICAgICAgcmVzdWx0ICs9IEZBTExCQUNLX1JFUExBQ0VSO1xuICAgICAgICAgIGkrKztcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvY3RldHMgPSBbb2N0ZXRdO1xuICAgICAgICB2YXIgc2VxdWVuY2VJbmRleCA9IDE7XG5cbiAgICAgICAgd2hpbGUgKHNlcXVlbmNlSW5kZXggPCBieXRlU2VxdWVuY2VMZW5ndGgpIHtcbiAgICAgICAgICBpKys7XG4gICAgICAgICAgaWYgKGkgKyAzID4gbGVuZ3RoIHx8IGNoYXJBdChpbnB1dCwgaSkgIT09ICclJykgYnJlYWs7XG5cbiAgICAgICAgICB2YXIgbmV4dEJ5dGUgPSBwYXJzZUhleE9jdGV0KGlucHV0LCBpICsgMSk7XG5cbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlIC0tIE5hTiBjaGVja1xuICAgICAgICAgIGlmIChuZXh0Qnl0ZSAhPT0gbmV4dEJ5dGUpIHtcbiAgICAgICAgICAgIGkgKz0gMztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobmV4dEJ5dGUgPiAxOTEgfHwgbmV4dEJ5dGUgPCAxMjgpIGJyZWFrO1xuXG4gICAgICAgICAgcHVzaChvY3RldHMsIG5leHRCeXRlKTtcbiAgICAgICAgICBpICs9IDI7XG4gICAgICAgICAgc2VxdWVuY2VJbmRleCsrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9jdGV0cy5sZW5ndGggIT09IGJ5dGVTZXF1ZW5jZUxlbmd0aCkge1xuICAgICAgICAgIHJlc3VsdCArPSBGQUxMQkFDS19SRVBMQUNFUjtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjb2RlUG9pbnQgPSB1dGY4RGVjb2RlKG9jdGV0cyk7XG4gICAgICAgIGlmIChjb2RlUG9pbnQgPT09IG51bGwpIHtcbiAgICAgICAgICByZXN1bHQgKz0gRkFMTEJBQ0tfUkVQTEFDRVI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVjb2RlZENoYXIgPSBmcm9tQ29kZVBvaW50KGNvZGVQb2ludCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXN1bHQgKz0gZGVjb2RlZENoYXI7XG4gICAgaSsrO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbnZhciBmaW5kID0gL1shJygpfl18JTIwL2c7XG5cbnZhciByZXBsYWNlbWVudHMgPSB7XG4gICchJzogJyUyMScsXG4gIFwiJ1wiOiAnJTI3JyxcbiAgJygnOiAnJTI4JyxcbiAgJyknOiAnJTI5JyxcbiAgJ34nOiAnJTdFJyxcbiAgJyUyMCc6ICcrJ1xufTtcblxudmFyIHJlcGxhY2VyID0gZnVuY3Rpb24gKG1hdGNoKSB7XG4gIHJldHVybiByZXBsYWNlbWVudHNbbWF0Y2hdO1xufTtcblxudmFyIHNlcmlhbGl6ZSA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gcmVwbGFjZShlbmNvZGVVUklDb21wb25lbnQoaXQpLCBmaW5kLCByZXBsYWNlcik7XG59O1xuXG52YXIgVVJMU2VhcmNoUGFyYW1zSXRlcmF0b3IgPSBjcmVhdGVJdGVyYXRvckNvbnN0cnVjdG9yKGZ1bmN0aW9uIEl0ZXJhdG9yKHBhcmFtcywga2luZCkge1xuICBzZXRJbnRlcm5hbFN0YXRlKHRoaXMsIHtcbiAgICB0eXBlOiBVUkxfU0VBUkNIX1BBUkFNU19JVEVSQVRPUixcbiAgICB0YXJnZXQ6IGdldEludGVybmFsUGFyYW1zU3RhdGUocGFyYW1zKS5lbnRyaWVzLFxuICAgIGluZGV4OiAwLFxuICAgIGtpbmQ6IGtpbmRcbiAgfSk7XG59LCBVUkxfU0VBUkNIX1BBUkFNUywgZnVuY3Rpb24gbmV4dCgpIHtcbiAgdmFyIHN0YXRlID0gZ2V0SW50ZXJuYWxJdGVyYXRvclN0YXRlKHRoaXMpO1xuICB2YXIgdGFyZ2V0ID0gc3RhdGUudGFyZ2V0O1xuICB2YXIgaW5kZXggPSBzdGF0ZS5pbmRleCsrO1xuICBpZiAoIXRhcmdldCB8fCBpbmRleCA+PSB0YXJnZXQubGVuZ3RoKSB7XG4gICAgc3RhdGUudGFyZ2V0ID0gbnVsbDtcbiAgICByZXR1cm4gY3JlYXRlSXRlclJlc3VsdE9iamVjdCh1bmRlZmluZWQsIHRydWUpO1xuICB9XG4gIHZhciBlbnRyeSA9IHRhcmdldFtpbmRleF07XG4gIHN3aXRjaCAoc3RhdGUua2luZCkge1xuICAgIGNhc2UgJ2tleXMnOiByZXR1cm4gY3JlYXRlSXRlclJlc3VsdE9iamVjdChlbnRyeS5rZXksIGZhbHNlKTtcbiAgICBjYXNlICd2YWx1ZXMnOiByZXR1cm4gY3JlYXRlSXRlclJlc3VsdE9iamVjdChlbnRyeS52YWx1ZSwgZmFsc2UpO1xuICB9IHJldHVybiBjcmVhdGVJdGVyUmVzdWx0T2JqZWN0KFtlbnRyeS5rZXksIGVudHJ5LnZhbHVlXSwgZmFsc2UpO1xufSwgdHJ1ZSk7XG5cbnZhciBVUkxTZWFyY2hQYXJhbXNTdGF0ZSA9IGZ1bmN0aW9uIChpbml0KSB7XG4gIHRoaXMuZW50cmllcyA9IFtdO1xuICB0aGlzLnVybCA9IG51bGw7XG5cbiAgaWYgKGluaXQgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChpc09iamVjdChpbml0KSkgdGhpcy5wYXJzZU9iamVjdChpbml0KTtcbiAgICBlbHNlIHRoaXMucGFyc2VRdWVyeSh0eXBlb2YgaW5pdCA9PSAnc3RyaW5nJyA/IGNoYXJBdChpbml0LCAwKSA9PT0gJz8nID8gc3RyaW5nU2xpY2UoaW5pdCwgMSkgOiBpbml0IDogJHRvU3RyaW5nKGluaXQpKTtcbiAgfVxufTtcblxuVVJMU2VhcmNoUGFyYW1zU3RhdGUucHJvdG90eXBlID0ge1xuICB0eXBlOiBVUkxfU0VBUkNIX1BBUkFNUyxcbiAgYmluZFVSTDogZnVuY3Rpb24gKHVybCkge1xuICAgIHRoaXMudXJsID0gdXJsO1xuICAgIHRoaXMudXBkYXRlKCk7XG4gIH0sXG4gIHBhcnNlT2JqZWN0OiBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgdmFyIGVudHJpZXMgPSB0aGlzLmVudHJpZXM7XG4gICAgdmFyIGl0ZXJhdG9yTWV0aG9kID0gZ2V0SXRlcmF0b3JNZXRob2Qob2JqZWN0KTtcbiAgICB2YXIgaXRlcmF0b3IsIG5leHQsIHN0ZXAsIGVudHJ5SXRlcmF0b3IsIGVudHJ5TmV4dCwgZmlyc3QsIHNlY29uZDtcblxuICAgIGlmIChpdGVyYXRvck1ldGhvZCkge1xuICAgICAgaXRlcmF0b3IgPSBnZXRJdGVyYXRvcihvYmplY3QsIGl0ZXJhdG9yTWV0aG9kKTtcbiAgICAgIG5leHQgPSBpdGVyYXRvci5uZXh0O1xuICAgICAgd2hpbGUgKCEoc3RlcCA9IGNhbGwobmV4dCwgaXRlcmF0b3IpKS5kb25lKSB7XG4gICAgICAgIGVudHJ5SXRlcmF0b3IgPSBnZXRJdGVyYXRvcihhbk9iamVjdChzdGVwLnZhbHVlKSk7XG4gICAgICAgIGVudHJ5TmV4dCA9IGVudHJ5SXRlcmF0b3IubmV4dDtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIChmaXJzdCA9IGNhbGwoZW50cnlOZXh0LCBlbnRyeUl0ZXJhdG9yKSkuZG9uZSB8fFxuICAgICAgICAgIChzZWNvbmQgPSBjYWxsKGVudHJ5TmV4dCwgZW50cnlJdGVyYXRvcikpLmRvbmUgfHxcbiAgICAgICAgICAhY2FsbChlbnRyeU5leHQsIGVudHJ5SXRlcmF0b3IpLmRvbmVcbiAgICAgICAgKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBzZXF1ZW5jZSB3aXRoIGxlbmd0aCAyJyk7XG4gICAgICAgIHB1c2goZW50cmllcywgeyBrZXk6ICR0b1N0cmluZyhmaXJzdC52YWx1ZSksIHZhbHVlOiAkdG9TdHJpbmcoc2Vjb25kLnZhbHVlKSB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2UgZm9yICh2YXIga2V5IGluIG9iamVjdCkgaWYgKGhhc093bihvYmplY3QsIGtleSkpIHtcbiAgICAgIHB1c2goZW50cmllcywgeyBrZXk6IGtleSwgdmFsdWU6ICR0b1N0cmluZyhvYmplY3Rba2V5XSkgfSk7XG4gICAgfVxuICB9LFxuICBwYXJzZVF1ZXJ5OiBmdW5jdGlvbiAocXVlcnkpIHtcbiAgICBpZiAocXVlcnkpIHtcbiAgICAgIHZhciBlbnRyaWVzID0gdGhpcy5lbnRyaWVzO1xuICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBzcGxpdChxdWVyeSwgJyYnKTtcbiAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICB2YXIgYXR0cmlidXRlLCBlbnRyeTtcbiAgICAgIHdoaWxlIChpbmRleCA8IGF0dHJpYnV0ZXMubGVuZ3RoKSB7XG4gICAgICAgIGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZXNbaW5kZXgrK107XG4gICAgICAgIGlmIChhdHRyaWJ1dGUubGVuZ3RoKSB7XG4gICAgICAgICAgZW50cnkgPSBzcGxpdChhdHRyaWJ1dGUsICc9Jyk7XG4gICAgICAgICAgcHVzaChlbnRyaWVzLCB7XG4gICAgICAgICAgICBrZXk6IGRlY29kZShzaGlmdChlbnRyeSkpLFxuICAgICAgICAgICAgdmFsdWU6IGRlY29kZShqb2luKGVudHJ5LCAnPScpKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBzZXJpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZW50cmllcyA9IHRoaXMuZW50cmllcztcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB2YXIgZW50cnk7XG4gICAgd2hpbGUgKGluZGV4IDwgZW50cmllcy5sZW5ndGgpIHtcbiAgICAgIGVudHJ5ID0gZW50cmllc1tpbmRleCsrXTtcbiAgICAgIHB1c2gocmVzdWx0LCBzZXJpYWxpemUoZW50cnkua2V5KSArICc9JyArIHNlcmlhbGl6ZShlbnRyeS52YWx1ZSkpO1xuICAgIH0gcmV0dXJuIGpvaW4ocmVzdWx0LCAnJicpO1xuICB9LFxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmVudHJpZXMubGVuZ3RoID0gMDtcbiAgICB0aGlzLnBhcnNlUXVlcnkodGhpcy51cmwucXVlcnkpO1xuICB9LFxuICB1cGRhdGVVUkw6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy51cmwpIHRoaXMudXJsLnVwZGF0ZSgpO1xuICB9XG59O1xuXG4vLyBgVVJMU2VhcmNoUGFyYW1zYCBjb25zdHJ1Y3RvclxuLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNpbnRlcmZhY2UtdXJsc2VhcmNocGFyYW1zXG52YXIgVVJMU2VhcmNoUGFyYW1zQ29uc3RydWN0b3IgPSBmdW5jdGlvbiBVUkxTZWFyY2hQYXJhbXMoLyogaW5pdCAqLykge1xuICBhbkluc3RhbmNlKHRoaXMsIFVSTFNlYXJjaFBhcmFtc1Byb3RvdHlwZSk7XG4gIHZhciBpbml0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQ7XG4gIHZhciBzdGF0ZSA9IHNldEludGVybmFsU3RhdGUodGhpcywgbmV3IFVSTFNlYXJjaFBhcmFtc1N0YXRlKGluaXQpKTtcbiAgaWYgKCFERVNDUklQVE9SUykgdGhpcy5zaXplID0gc3RhdGUuZW50cmllcy5sZW5ndGg7XG59O1xuXG52YXIgVVJMU2VhcmNoUGFyYW1zUHJvdG90eXBlID0gVVJMU2VhcmNoUGFyYW1zQ29uc3RydWN0b3IucHJvdG90eXBlO1xuXG5kZWZpbmVCdWlsdElucyhVUkxTZWFyY2hQYXJhbXNQcm90b3R5cGUsIHtcbiAgLy8gYFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuYXBwZW5kYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsc2VhcmNocGFyYW1zLWFwcGVuZFxuICBhcHBlbmQ6IGZ1bmN0aW9uIGFwcGVuZChuYW1lLCB2YWx1ZSkge1xuICAgIHZhciBzdGF0ZSA9IGdldEludGVybmFsUGFyYW1zU3RhdGUodGhpcyk7XG4gICAgdmFsaWRhdGVBcmd1bWVudHNMZW5ndGgoYXJndW1lbnRzLmxlbmd0aCwgMik7XG4gICAgcHVzaChzdGF0ZS5lbnRyaWVzLCB7IGtleTogJHRvU3RyaW5nKG5hbWUpLCB2YWx1ZTogJHRvU3RyaW5nKHZhbHVlKSB9KTtcbiAgICBpZiAoIURFU0NSSVBUT1JTKSB0aGlzLmxlbmd0aCsrO1xuICAgIHN0YXRlLnVwZGF0ZVVSTCgpO1xuICB9LFxuICAvLyBgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5kZWxldGVgIG1ldGhvZFxuICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmxzZWFyY2hwYXJhbXMtZGVsZXRlXG4gICdkZWxldGUnOiBmdW5jdGlvbiAobmFtZSAvKiAsIHZhbHVlICovKSB7XG4gICAgdmFyIHN0YXRlID0gZ2V0SW50ZXJuYWxQYXJhbXNTdGF0ZSh0aGlzKTtcbiAgICB2YXIgbGVuZ3RoID0gdmFsaWRhdGVBcmd1bWVudHNMZW5ndGgoYXJndW1lbnRzLmxlbmd0aCwgMSk7XG4gICAgdmFyIGVudHJpZXMgPSBzdGF0ZS5lbnRyaWVzO1xuICAgIHZhciBrZXkgPSAkdG9TdHJpbmcobmFtZSk7XG4gICAgdmFyICR2YWx1ZSA9IGxlbmd0aCA8IDIgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbMV07XG4gICAgdmFyIHZhbHVlID0gJHZhbHVlID09PSB1bmRlZmluZWQgPyAkdmFsdWUgOiAkdG9TdHJpbmcoJHZhbHVlKTtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHdoaWxlIChpbmRleCA8IGVudHJpZXMubGVuZ3RoKSB7XG4gICAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcbiAgICAgIGlmIChlbnRyeS5rZXkgPT09IGtleSAmJiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCBlbnRyeS52YWx1ZSA9PT0gdmFsdWUpKSB7XG4gICAgICAgIHNwbGljZShlbnRyaWVzLCBpbmRleCwgMSk7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSBicmVhaztcbiAgICAgIH0gZWxzZSBpbmRleCsrO1xuICAgIH1cbiAgICBpZiAoIURFU0NSSVBUT1JTKSB0aGlzLnNpemUgPSBlbnRyaWVzLmxlbmd0aDtcbiAgICBzdGF0ZS51cGRhdGVVUkwoKTtcbiAgfSxcbiAgLy8gYFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuZ2V0YCBtZXRob2RcbiAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsc2VhcmNocGFyYW1zLWdldFxuICBnZXQ6IGZ1bmN0aW9uIGdldChuYW1lKSB7XG4gICAgdmFyIGVudHJpZXMgPSBnZXRJbnRlcm5hbFBhcmFtc1N0YXRlKHRoaXMpLmVudHJpZXM7XG4gICAgdmFsaWRhdGVBcmd1bWVudHNMZW5ndGgoYXJndW1lbnRzLmxlbmd0aCwgMSk7XG4gICAgdmFyIGtleSA9ICR0b1N0cmluZyhuYW1lKTtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIGZvciAoOyBpbmRleCA8IGVudHJpZXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBpZiAoZW50cmllc1tpbmRleF0ua2V5ID09PSBrZXkpIHJldHVybiBlbnRyaWVzW2luZGV4XS52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG4gIC8vIGBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmdldEFsbGAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybHNlYXJjaHBhcmFtcy1nZXRhbGxcbiAgZ2V0QWxsOiBmdW5jdGlvbiBnZXRBbGwobmFtZSkge1xuICAgIHZhciBlbnRyaWVzID0gZ2V0SW50ZXJuYWxQYXJhbXNTdGF0ZSh0aGlzKS5lbnRyaWVzO1xuICAgIHZhbGlkYXRlQXJndW1lbnRzTGVuZ3RoKGFyZ3VtZW50cy5sZW5ndGgsIDEpO1xuICAgIHZhciBrZXkgPSAkdG9TdHJpbmcobmFtZSk7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgZm9yICg7IGluZGV4IDwgZW50cmllcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGlmIChlbnRyaWVzW2luZGV4XS5rZXkgPT09IGtleSkgcHVzaChyZXN1bHQsIGVudHJpZXNbaW5kZXhdLnZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSxcbiAgLy8gYFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaGFzYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsc2VhcmNocGFyYW1zLWhhc1xuICBoYXM6IGZ1bmN0aW9uIGhhcyhuYW1lIC8qICwgdmFsdWUgKi8pIHtcbiAgICB2YXIgZW50cmllcyA9IGdldEludGVybmFsUGFyYW1zU3RhdGUodGhpcykuZW50cmllcztcbiAgICB2YXIgbGVuZ3RoID0gdmFsaWRhdGVBcmd1bWVudHNMZW5ndGgoYXJndW1lbnRzLmxlbmd0aCwgMSk7XG4gICAgdmFyIGtleSA9ICR0b1N0cmluZyhuYW1lKTtcbiAgICB2YXIgJHZhbHVlID0gbGVuZ3RoIDwgMiA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1sxXTtcbiAgICB2YXIgdmFsdWUgPSAkdmFsdWUgPT09IHVuZGVmaW5lZCA/ICR2YWx1ZSA6ICR0b1N0cmluZygkdmFsdWUpO1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgd2hpbGUgKGluZGV4IDwgZW50cmllcy5sZW5ndGgpIHtcbiAgICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXgrK107XG4gICAgICBpZiAoZW50cnkua2V5ID09PSBrZXkgJiYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgZW50cnkudmFsdWUgPT09IHZhbHVlKSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcbiAgLy8gYFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuc2V0YCBtZXRob2RcbiAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsc2VhcmNocGFyYW1zLXNldFxuICBzZXQ6IGZ1bmN0aW9uIHNldChuYW1lLCB2YWx1ZSkge1xuICAgIHZhciBzdGF0ZSA9IGdldEludGVybmFsUGFyYW1zU3RhdGUodGhpcyk7XG4gICAgdmFsaWRhdGVBcmd1bWVudHNMZW5ndGgoYXJndW1lbnRzLmxlbmd0aCwgMSk7XG4gICAgdmFyIGVudHJpZXMgPSBzdGF0ZS5lbnRyaWVzO1xuICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuICAgIHZhciBrZXkgPSAkdG9TdHJpbmcobmFtZSk7XG4gICAgdmFyIHZhbCA9ICR0b1N0cmluZyh2YWx1ZSk7XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB2YXIgZW50cnk7XG4gICAgZm9yICg7IGluZGV4IDwgZW50cmllcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG4gICAgICBpZiAoZW50cnkua2V5ID09PSBrZXkpIHtcbiAgICAgICAgaWYgKGZvdW5kKSBzcGxpY2UoZW50cmllcywgaW5kZXgtLSwgMSk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICBlbnRyeS52YWx1ZSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWZvdW5kKSBwdXNoKGVudHJpZXMsIHsga2V5OiBrZXksIHZhbHVlOiB2YWwgfSk7XG4gICAgaWYgKCFERVNDUklQVE9SUykgdGhpcy5zaXplID0gZW50cmllcy5sZW5ndGg7XG4gICAgc3RhdGUudXBkYXRlVVJMKCk7XG4gIH0sXG4gIC8vIGBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLnNvcnRgIG1ldGhvZFxuICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmxzZWFyY2hwYXJhbXMtc29ydFxuICBzb3J0OiBmdW5jdGlvbiBzb3J0KCkge1xuICAgIHZhciBzdGF0ZSA9IGdldEludGVybmFsUGFyYW1zU3RhdGUodGhpcyk7XG4gICAgYXJyYXlTb3J0KHN0YXRlLmVudHJpZXMsIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gYS5rZXkgPiBiLmtleSA/IDEgOiAtMTtcbiAgICB9KTtcbiAgICBzdGF0ZS51cGRhdGVVUkwoKTtcbiAgfSxcbiAgLy8gYFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuZm9yRWFjaGAgbWV0aG9kXG4gIGZvckVhY2g6IGZ1bmN0aW9uIGZvckVhY2goY2FsbGJhY2sgLyogLCB0aGlzQXJnICovKSB7XG4gICAgdmFyIGVudHJpZXMgPSBnZXRJbnRlcm5hbFBhcmFtc1N0YXRlKHRoaXMpLmVudHJpZXM7XG4gICAgdmFyIGJvdW5kRnVuY3Rpb24gPSBiaW5kKGNhbGxiYWNrLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB2YXIgZW50cnk7XG4gICAgd2hpbGUgKGluZGV4IDwgZW50cmllcy5sZW5ndGgpIHtcbiAgICAgIGVudHJ5ID0gZW50cmllc1tpbmRleCsrXTtcbiAgICAgIGJvdW5kRnVuY3Rpb24oZW50cnkudmFsdWUsIGVudHJ5LmtleSwgdGhpcyk7XG4gICAgfVxuICB9LFxuICAvLyBgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5rZXlzYCBtZXRob2RcbiAga2V5czogZnVuY3Rpb24ga2V5cygpIHtcbiAgICByZXR1cm4gbmV3IFVSTFNlYXJjaFBhcmFtc0l0ZXJhdG9yKHRoaXMsICdrZXlzJyk7XG4gIH0sXG4gIC8vIGBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLnZhbHVlc2AgbWV0aG9kXG4gIHZhbHVlczogZnVuY3Rpb24gdmFsdWVzKCkge1xuICAgIHJldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zSXRlcmF0b3IodGhpcywgJ3ZhbHVlcycpO1xuICB9LFxuICAvLyBgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5lbnRyaWVzYCBtZXRob2RcbiAgZW50cmllczogZnVuY3Rpb24gZW50cmllcygpIHtcbiAgICByZXR1cm4gbmV3IFVSTFNlYXJjaFBhcmFtc0l0ZXJhdG9yKHRoaXMsICdlbnRyaWVzJyk7XG4gIH1cbn0sIHsgZW51bWVyYWJsZTogdHJ1ZSB9KTtcblxuLy8gYFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGVbQEBpdGVyYXRvcl1gIG1ldGhvZFxuZGVmaW5lQnVpbHRJbihVUkxTZWFyY2hQYXJhbXNQcm90b3R5cGUsIElURVJBVE9SLCBVUkxTZWFyY2hQYXJhbXNQcm90b3R5cGUuZW50cmllcywgeyBuYW1lOiAnZW50cmllcycgfSk7XG5cbi8vIGBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLnRvU3RyaW5nYCBtZXRob2Rcbi8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsc2VhcmNocGFyYW1zLXN0cmluZ2lmaWNhdGlvbi1iZWhhdmlvclxuZGVmaW5lQnVpbHRJbihVUkxTZWFyY2hQYXJhbXNQcm90b3R5cGUsICd0b1N0cmluZycsIGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICByZXR1cm4gZ2V0SW50ZXJuYWxQYXJhbXNTdGF0ZSh0aGlzKS5zZXJpYWxpemUoKTtcbn0sIHsgZW51bWVyYWJsZTogdHJ1ZSB9KTtcblxuLy8gYFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuc2l6ZWAgZ2V0dGVyXG4vLyBodHRwczovL2dpdGh1Yi5jb20vd2hhdHdnL3VybC9wdWxsLzczNFxuaWYgKERFU0NSSVBUT1JTKSBkZWZpbmVCdWlsdEluQWNjZXNzb3IoVVJMU2VhcmNoUGFyYW1zUHJvdG90eXBlLCAnc2l6ZScsIHtcbiAgZ2V0OiBmdW5jdGlvbiBzaXplKCkge1xuICAgIHJldHVybiBnZXRJbnRlcm5hbFBhcmFtc1N0YXRlKHRoaXMpLmVudHJpZXMubGVuZ3RoO1xuICB9LFxuICBjb25maWd1cmFibGU6IHRydWUsXG4gIGVudW1lcmFibGU6IHRydWVcbn0pO1xuXG5zZXRUb1N0cmluZ1RhZyhVUkxTZWFyY2hQYXJhbXNDb25zdHJ1Y3RvciwgVVJMX1NFQVJDSF9QQVJBTVMpO1xuXG4kKHsgZ2xvYmFsOiB0cnVlLCBjb25zdHJ1Y3RvcjogdHJ1ZSwgZm9yY2VkOiAhVVNFX05BVElWRV9VUkwgfSwge1xuICBVUkxTZWFyY2hQYXJhbXM6IFVSTFNlYXJjaFBhcmFtc0NvbnN0cnVjdG9yXG59KTtcblxuLy8gV3JhcCBgZmV0Y2hgIGFuZCBgUmVxdWVzdGAgZm9yIGNvcnJlY3Qgd29yayB3aXRoIHBvbHlmaWxsZWQgYFVSTFNlYXJjaFBhcmFtc2BcbmlmICghVVNFX05BVElWRV9VUkwgJiYgaXNDYWxsYWJsZShIZWFkZXJzKSkge1xuICB2YXIgaGVhZGVyc0hhcyA9IHVuY3VycnlUaGlzKEhlYWRlcnNQcm90b3R5cGUuaGFzKTtcbiAgdmFyIGhlYWRlcnNTZXQgPSB1bmN1cnJ5VGhpcyhIZWFkZXJzUHJvdG90eXBlLnNldCk7XG5cbiAgdmFyIHdyYXBSZXF1ZXN0T3B0aW9ucyA9IGZ1bmN0aW9uIChpbml0KSB7XG4gICAgaWYgKGlzT2JqZWN0KGluaXQpKSB7XG4gICAgICB2YXIgYm9keSA9IGluaXQuYm9keTtcbiAgICAgIHZhciBoZWFkZXJzO1xuICAgICAgaWYgKGNsYXNzb2YoYm9keSkgPT09IFVSTF9TRUFSQ0hfUEFSQU1TKSB7XG4gICAgICAgIGhlYWRlcnMgPSBpbml0LmhlYWRlcnMgPyBuZXcgSGVhZGVycyhpbml0LmhlYWRlcnMpIDogbmV3IEhlYWRlcnMoKTtcbiAgICAgICAgaWYgKCFoZWFkZXJzSGFzKGhlYWRlcnMsICdjb250ZW50LXR5cGUnKSkge1xuICAgICAgICAgIGhlYWRlcnNTZXQoaGVhZGVycywgJ2NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD1VVEYtOCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjcmVhdGUoaW5pdCwge1xuICAgICAgICAgIGJvZHk6IGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvcigwLCAkdG9TdHJpbmcoYm9keSkpLFxuICAgICAgICAgIGhlYWRlcnM6IGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvcigwLCBoZWFkZXJzKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IHJldHVybiBpbml0O1xuICB9O1xuXG4gIGlmIChpc0NhbGxhYmxlKG5hdGl2ZUZldGNoKSkge1xuICAgICQoeyBnbG9iYWw6IHRydWUsIGVudW1lcmFibGU6IHRydWUsIGRvbnRDYWxsR2V0U2V0OiB0cnVlLCBmb3JjZWQ6IHRydWUgfSwge1xuICAgICAgZmV0Y2g6IGZ1bmN0aW9uIGZldGNoKGlucHV0IC8qICwgaW5pdCAqLykge1xuICAgICAgICByZXR1cm4gbmF0aXZlRmV0Y2goaW5wdXQsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gd3JhcFJlcXVlc3RPcHRpb25zKGFyZ3VtZW50c1sxXSkgOiB7fSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpZiAoaXNDYWxsYWJsZShOYXRpdmVSZXF1ZXN0KSkge1xuICAgIHZhciBSZXF1ZXN0Q29uc3RydWN0b3IgPSBmdW5jdGlvbiBSZXF1ZXN0KGlucHV0IC8qICwgaW5pdCAqLykge1xuICAgICAgYW5JbnN0YW5jZSh0aGlzLCBSZXF1ZXN0UHJvdG90eXBlKTtcbiAgICAgIHJldHVybiBuZXcgTmF0aXZlUmVxdWVzdChpbnB1dCwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyB3cmFwUmVxdWVzdE9wdGlvbnMoYXJndW1lbnRzWzFdKSA6IHt9KTtcbiAgICB9O1xuXG4gICAgUmVxdWVzdFByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJlcXVlc3RDb25zdHJ1Y3RvcjtcbiAgICBSZXF1ZXN0Q29uc3RydWN0b3IucHJvdG90eXBlID0gUmVxdWVzdFByb3RvdHlwZTtcblxuICAgICQoeyBnbG9iYWw6IHRydWUsIGNvbnN0cnVjdG9yOiB0cnVlLCBkb250Q2FsbEdldFNldDogdHJ1ZSwgZm9yY2VkOiB0cnVlIH0sIHtcbiAgICAgIFJlcXVlc3Q6IFJlcXVlc3RDb25zdHJ1Y3RvclxuICAgIH0pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBVUkxTZWFyY2hQYXJhbXM6IFVSTFNlYXJjaFBhcmFtc0NvbnN0cnVjdG9yLFxuICBnZXRTdGF0ZTogZ2V0SW50ZXJuYWxQYXJhbXNTdGF0ZVxufTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8vIFRPRE86IFJlbW92ZSB0aGlzIG1vZHVsZSBmcm9tIGBjb3JlLWpzQDRgIHNpbmNlIGl0J3MgcmVwbGFjZWQgdG8gbW9kdWxlIGJlbG93XG5yZXF1aXJlKCcuLi9tb2R1bGVzL3dlYi51cmwtc2VhcmNoLXBhcmFtcy5jb25zdHJ1Y3RvcicpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gVE9ETzogaW4gY29yZS1qc0A0LCBtb3ZlIC9tb2R1bGVzLyBkZXBlbmRlbmNpZXMgdG8gcHVibGljIGVudHJpZXMgZm9yIGJldHRlciBvcHRpbWl6YXRpb24gYnkgdG9vbHMgbGlrZSBgcHJlc2V0LWVudmBcbnJlcXVpcmUoJy4uL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yJyk7XG52YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xudmFyIFVTRV9OQVRJVkVfVVJMID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3VybC1jb25zdHJ1Y3Rvci1kZXRlY3Rpb24nKTtcbnZhciBnbG9iYWxUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbC10aGlzJyk7XG52YXIgYmluZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1iaW5kLWNvbnRleHQnKTtcbnZhciB1bmN1cnJ5VGhpcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMnKTtcbnZhciBkZWZpbmVCdWlsdEluID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RlZmluZS1idWlsdC1pbicpO1xudmFyIGRlZmluZUJ1aWx0SW5BY2Nlc3NvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZWZpbmUtYnVpbHQtaW4tYWNjZXNzb3InKTtcbnZhciBhbkluc3RhbmNlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FuLWluc3RhbmNlJyk7XG52YXIgaGFzT3duID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hhcy1vd24tcHJvcGVydHknKTtcbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWFzc2lnbicpO1xudmFyIGFycmF5RnJvbSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1mcm9tJyk7XG52YXIgYXJyYXlTbGljZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1zbGljZScpO1xudmFyIGNvZGVBdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zdHJpbmctbXVsdGlieXRlJykuY29kZUF0O1xudmFyIHRvQVNDSUkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc3RyaW5nLXB1bnljb2RlLXRvLWFzY2lpJyk7XG52YXIgJHRvU3RyaW5nID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXN0cmluZycpO1xudmFyIHNldFRvU3RyaW5nVGFnID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NldC10by1zdHJpbmctdGFnJyk7XG52YXIgdmFsaWRhdGVBcmd1bWVudHNMZW5ndGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdmFsaWRhdGUtYXJndW1lbnRzLWxlbmd0aCcpO1xudmFyIFVSTFNlYXJjaFBhcmFtc01vZHVsZSA9IHJlcXVpcmUoJy4uL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmNvbnN0cnVjdG9yJyk7XG52YXIgSW50ZXJuYWxTdGF0ZU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbnRlcm5hbC1zdGF0ZScpO1xuXG52YXIgc2V0SW50ZXJuYWxTdGF0ZSA9IEludGVybmFsU3RhdGVNb2R1bGUuc2V0O1xudmFyIGdldEludGVybmFsVVJMU3RhdGUgPSBJbnRlcm5hbFN0YXRlTW9kdWxlLmdldHRlckZvcignVVJMJyk7XG52YXIgVVJMU2VhcmNoUGFyYW1zID0gVVJMU2VhcmNoUGFyYW1zTW9kdWxlLlVSTFNlYXJjaFBhcmFtcztcbnZhciBnZXRJbnRlcm5hbFNlYXJjaFBhcmFtc1N0YXRlID0gVVJMU2VhcmNoUGFyYW1zTW9kdWxlLmdldFN0YXRlO1xuXG52YXIgTmF0aXZlVVJMID0gZ2xvYmFsVGhpcy5VUkw7XG52YXIgVHlwZUVycm9yID0gZ2xvYmFsVGhpcy5UeXBlRXJyb3I7XG52YXIgcGFyc2VJbnQgPSBnbG9iYWxUaGlzLnBhcnNlSW50O1xudmFyIGZsb29yID0gTWF0aC5mbG9vcjtcbnZhciBwb3cgPSBNYXRoLnBvdztcbnZhciBjaGFyQXQgPSB1bmN1cnJ5VGhpcygnJy5jaGFyQXQpO1xudmFyIGV4ZWMgPSB1bmN1cnJ5VGhpcygvLi8uZXhlYyk7XG52YXIgam9pbiA9IHVuY3VycnlUaGlzKFtdLmpvaW4pO1xudmFyIG51bWJlclRvU3RyaW5nID0gdW5jdXJyeVRoaXMoMS4wLnRvU3RyaW5nKTtcbnZhciBwb3AgPSB1bmN1cnJ5VGhpcyhbXS5wb3ApO1xudmFyIHB1c2ggPSB1bmN1cnJ5VGhpcyhbXS5wdXNoKTtcbnZhciByZXBsYWNlID0gdW5jdXJyeVRoaXMoJycucmVwbGFjZSk7XG52YXIgc2hpZnQgPSB1bmN1cnJ5VGhpcyhbXS5zaGlmdCk7XG52YXIgc3BsaXQgPSB1bmN1cnJ5VGhpcygnJy5zcGxpdCk7XG52YXIgc3RyaW5nU2xpY2UgPSB1bmN1cnJ5VGhpcygnJy5zbGljZSk7XG52YXIgdG9Mb3dlckNhc2UgPSB1bmN1cnJ5VGhpcygnJy50b0xvd2VyQ2FzZSk7XG52YXIgdW5zaGlmdCA9IHVuY3VycnlUaGlzKFtdLnVuc2hpZnQpO1xuXG52YXIgSU5WQUxJRF9BVVRIT1JJVFkgPSAnSW52YWxpZCBhdXRob3JpdHknO1xudmFyIElOVkFMSURfU0NIRU1FID0gJ0ludmFsaWQgc2NoZW1lJztcbnZhciBJTlZBTElEX0hPU1QgPSAnSW52YWxpZCBob3N0JztcbnZhciBJTlZBTElEX1BPUlQgPSAnSW52YWxpZCBwb3J0JztcblxudmFyIEFMUEhBID0gL1thLXpdL2k7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVnZXhwL25vLW9ic2N1cmUtcmFuZ2UgLS0gc2FmZVxudmFyIEFMUEhBTlVNRVJJQyA9IC9bXFxkKy0uYS16XS9pO1xudmFyIERJR0lUID0gL1xcZC87XG52YXIgSEVYX1NUQVJUID0gL14weC9pO1xudmFyIE9DVCA9IC9eWzAtN10rJC87XG52YXIgREVDID0gL15cXGQrJC87XG52YXIgSEVYID0gL15bXFxkYS1mXSskL2k7XG4vKiBlc2xpbnQtZGlzYWJsZSByZWdleHAvbm8tY29udHJvbC1jaGFyYWN0ZXIgLS0gc2FmZSAqL1xudmFyIEZPUkJJRERFTl9IT1NUX0NPREVfUE9JTlQgPSAvW1xcMFxcdFxcblxcciAjJS86PD4/QFtcXFxcXFxdXnxdLztcbnZhciBGT1JCSURERU5fSE9TVF9DT0RFX1BPSU5UX0VYQ0xVRElOR19QRVJDRU5UID0gL1tcXDBcXHRcXG5cXHIgIy86PD4/QFtcXFxcXFxdXnxdLztcbnZhciBMRUFESU5HX0MwX0NPTlRST0xfT1JfU1BBQ0UgPSAvXltcXHUwMDAwLVxcdTAwMjBdKy87XG52YXIgVFJBSUxJTkdfQzBfQ09OVFJPTF9PUl9TUEFDRSA9IC8oXnxbXlxcdTAwMDAtXFx1MDAyMF0pW1xcdTAwMDAtXFx1MDAyMF0rJC87XG52YXIgVEFCX0FORF9ORVdfTElORSA9IC9bXFx0XFxuXFxyXS9nO1xuLyogZXNsaW50LWVuYWJsZSByZWdleHAvbm8tY29udHJvbC1jaGFyYWN0ZXIgLS0gc2FmZSAqL1xudmFyIEVPRjtcblxuLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNpcHY0LW51bWJlci1wYXJzZXJcbnZhciBwYXJzZUlQdjQgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgdmFyIHBhcnRzID0gc3BsaXQoaW5wdXQsICcuJyk7XG4gIHZhciBwYXJ0c0xlbmd0aCwgbnVtYmVycywgaW5kZXgsIHBhcnQsIHJhZGl4LCBudW1iZXIsIGlwdjQ7XG4gIGlmIChwYXJ0cy5sZW5ndGggJiYgcGFydHNbcGFydHMubGVuZ3RoIC0gMV0gPT09ICcnKSB7XG4gICAgcGFydHMubGVuZ3RoLS07XG4gIH1cbiAgcGFydHNMZW5ndGggPSBwYXJ0cy5sZW5ndGg7XG4gIGlmIChwYXJ0c0xlbmd0aCA+IDQpIHJldHVybiBpbnB1dDtcbiAgbnVtYmVycyA9IFtdO1xuICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBwYXJ0c0xlbmd0aDsgaW5kZXgrKykge1xuICAgIHBhcnQgPSBwYXJ0c1tpbmRleF07XG4gICAgaWYgKHBhcnQgPT09ICcnKSByZXR1cm4gaW5wdXQ7XG4gICAgcmFkaXggPSAxMDtcbiAgICBpZiAocGFydC5sZW5ndGggPiAxICYmIGNoYXJBdChwYXJ0LCAwKSA9PT0gJzAnKSB7XG4gICAgICByYWRpeCA9IGV4ZWMoSEVYX1NUQVJULCBwYXJ0KSA/IDE2IDogODtcbiAgICAgIHBhcnQgPSBzdHJpbmdTbGljZShwYXJ0LCByYWRpeCA9PT0gOCA/IDEgOiAyKTtcbiAgICB9XG4gICAgaWYgKHBhcnQgPT09ICcnKSB7XG4gICAgICBudW1iZXIgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIWV4ZWMocmFkaXggPT09IDEwID8gREVDIDogcmFkaXggPT09IDggPyBPQ1QgOiBIRVgsIHBhcnQpKSByZXR1cm4gaW5wdXQ7XG4gICAgICBudW1iZXIgPSBwYXJzZUludChwYXJ0LCByYWRpeCk7XG4gICAgfVxuICAgIHB1c2gobnVtYmVycywgbnVtYmVyKTtcbiAgfVxuICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBwYXJ0c0xlbmd0aDsgaW5kZXgrKykge1xuICAgIG51bWJlciA9IG51bWJlcnNbaW5kZXhdO1xuICAgIGlmIChpbmRleCA9PT0gcGFydHNMZW5ndGggLSAxKSB7XG4gICAgICBpZiAobnVtYmVyID49IHBvdygyNTYsIDUgLSBwYXJ0c0xlbmd0aCkpIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSBpZiAobnVtYmVyID4gMjU1KSByZXR1cm4gbnVsbDtcbiAgfVxuICBpcHY0ID0gcG9wKG51bWJlcnMpO1xuICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBudW1iZXJzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgIGlwdjQgKz0gbnVtYmVyc1tpbmRleF0gKiBwb3coMjU2LCAzIC0gaW5kZXgpO1xuICB9XG4gIHJldHVybiBpcHY0O1xufTtcblxuLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNjb25jZXB0LWlwdjYtcGFyc2VyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LXN0YXRlbWVudHMgLS0gVE9ET1xudmFyIHBhcnNlSVB2NiA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICB2YXIgYWRkcmVzcyA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTtcbiAgdmFyIHBpZWNlSW5kZXggPSAwO1xuICB2YXIgY29tcHJlc3MgPSBudWxsO1xuICB2YXIgcG9pbnRlciA9IDA7XG4gIHZhciB2YWx1ZSwgbGVuZ3RoLCBudW1iZXJzU2VlbiwgaXB2NFBpZWNlLCBudW1iZXIsIHN3YXBzLCBzd2FwO1xuXG4gIHZhciBjaHIgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNoYXJBdChpbnB1dCwgcG9pbnRlcik7XG4gIH07XG5cbiAgaWYgKGNocigpID09PSAnOicpIHtcbiAgICBpZiAoY2hhckF0KGlucHV0LCAxKSAhPT0gJzonKSByZXR1cm47XG4gICAgcG9pbnRlciArPSAyO1xuICAgIHBpZWNlSW5kZXgrKztcbiAgICBjb21wcmVzcyA9IHBpZWNlSW5kZXg7XG4gIH1cbiAgd2hpbGUgKGNocigpKSB7XG4gICAgaWYgKHBpZWNlSW5kZXggPT09IDgpIHJldHVybjtcbiAgICBpZiAoY2hyKCkgPT09ICc6Jykge1xuICAgICAgaWYgKGNvbXByZXNzICE9PSBudWxsKSByZXR1cm47XG4gICAgICBwb2ludGVyKys7XG4gICAgICBwaWVjZUluZGV4Kys7XG4gICAgICBjb21wcmVzcyA9IHBpZWNlSW5kZXg7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgdmFsdWUgPSBsZW5ndGggPSAwO1xuICAgIHdoaWxlIChsZW5ndGggPCA0ICYmIGV4ZWMoSEVYLCBjaHIoKSkpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUgKiAxNiArIHBhcnNlSW50KGNocigpLCAxNik7XG4gICAgICBwb2ludGVyKys7XG4gICAgICBsZW5ndGgrKztcbiAgICB9XG4gICAgaWYgKGNocigpID09PSAnLicpIHtcbiAgICAgIGlmIChsZW5ndGggPT09IDApIHJldHVybjtcbiAgICAgIHBvaW50ZXIgLT0gbGVuZ3RoO1xuICAgICAgaWYgKHBpZWNlSW5kZXggPiA2KSByZXR1cm47XG4gICAgICBudW1iZXJzU2VlbiA9IDA7XG4gICAgICB3aGlsZSAoY2hyKCkpIHtcbiAgICAgICAgaXB2NFBpZWNlID0gbnVsbDtcbiAgICAgICAgaWYgKG51bWJlcnNTZWVuID4gMCkge1xuICAgICAgICAgIGlmIChjaHIoKSA9PT0gJy4nICYmIG51bWJlcnNTZWVuIDwgNCkgcG9pbnRlcisrO1xuICAgICAgICAgIGVsc2UgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZXhlYyhESUdJVCwgY2hyKCkpKSByZXR1cm47XG4gICAgICAgIHdoaWxlIChleGVjKERJR0lULCBjaHIoKSkpIHtcbiAgICAgICAgICBudW1iZXIgPSBwYXJzZUludChjaHIoKSwgMTApO1xuICAgICAgICAgIGlmIChpcHY0UGllY2UgPT09IG51bGwpIGlwdjRQaWVjZSA9IG51bWJlcjtcbiAgICAgICAgICBlbHNlIGlmIChpcHY0UGllY2UgPT09IDApIHJldHVybjtcbiAgICAgICAgICBlbHNlIGlwdjRQaWVjZSA9IGlwdjRQaWVjZSAqIDEwICsgbnVtYmVyO1xuICAgICAgICAgIGlmIChpcHY0UGllY2UgPiAyNTUpIHJldHVybjtcbiAgICAgICAgICBwb2ludGVyKys7XG4gICAgICAgIH1cbiAgICAgICAgYWRkcmVzc1twaWVjZUluZGV4XSA9IGFkZHJlc3NbcGllY2VJbmRleF0gKiAyNTYgKyBpcHY0UGllY2U7XG4gICAgICAgIG51bWJlcnNTZWVuKys7XG4gICAgICAgIGlmIChudW1iZXJzU2VlbiA9PT0gMiB8fCBudW1iZXJzU2VlbiA9PT0gNCkgcGllY2VJbmRleCsrO1xuICAgICAgfVxuICAgICAgaWYgKG51bWJlcnNTZWVuICE9PSA0KSByZXR1cm47XG4gICAgICBicmVhaztcbiAgICB9IGVsc2UgaWYgKGNocigpID09PSAnOicpIHtcbiAgICAgIHBvaW50ZXIrKztcbiAgICAgIGlmICghY2hyKCkpIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKGNocigpKSByZXR1cm47XG4gICAgYWRkcmVzc1twaWVjZUluZGV4KytdID0gdmFsdWU7XG4gIH1cbiAgaWYgKGNvbXByZXNzICE9PSBudWxsKSB7XG4gICAgc3dhcHMgPSBwaWVjZUluZGV4IC0gY29tcHJlc3M7XG4gICAgcGllY2VJbmRleCA9IDc7XG4gICAgd2hpbGUgKHBpZWNlSW5kZXggIT09IDAgJiYgc3dhcHMgPiAwKSB7XG4gICAgICBzd2FwID0gYWRkcmVzc1twaWVjZUluZGV4XTtcbiAgICAgIGFkZHJlc3NbcGllY2VJbmRleC0tXSA9IGFkZHJlc3NbY29tcHJlc3MgKyBzd2FwcyAtIDFdO1xuICAgICAgYWRkcmVzc1tjb21wcmVzcyArIC0tc3dhcHNdID0gc3dhcDtcbiAgICB9XG4gIH0gZWxzZSBpZiAocGllY2VJbmRleCAhPT0gOCkgcmV0dXJuO1xuICByZXR1cm4gYWRkcmVzcztcbn07XG5cbnZhciBmaW5kTG9uZ2VzdFplcm9TZXF1ZW5jZSA9IGZ1bmN0aW9uIChpcHY2KSB7XG4gIHZhciBtYXhJbmRleCA9IG51bGw7XG4gIHZhciBtYXhMZW5ndGggPSAxO1xuICB2YXIgY3VyclN0YXJ0ID0gbnVsbDtcbiAgdmFyIGN1cnJMZW5ndGggPSAwO1xuICB2YXIgaW5kZXggPSAwO1xuICBmb3IgKDsgaW5kZXggPCA4OyBpbmRleCsrKSB7XG4gICAgaWYgKGlwdjZbaW5kZXhdICE9PSAwKSB7XG4gICAgICBpZiAoY3Vyckxlbmd0aCA+IG1heExlbmd0aCkge1xuICAgICAgICBtYXhJbmRleCA9IGN1cnJTdGFydDtcbiAgICAgICAgbWF4TGVuZ3RoID0gY3Vyckxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGN1cnJTdGFydCA9IG51bGw7XG4gICAgICBjdXJyTGVuZ3RoID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGN1cnJTdGFydCA9PT0gbnVsbCkgY3VyclN0YXJ0ID0gaW5kZXg7XG4gICAgICArK2N1cnJMZW5ndGg7XG4gICAgfVxuICB9XG4gIHJldHVybiBjdXJyTGVuZ3RoID4gbWF4TGVuZ3RoID8gY3VyclN0YXJ0IDogbWF4SW5kZXg7XG59O1xuXG4vLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2hvc3Qtc2VyaWFsaXppbmdcbnZhciBzZXJpYWxpemVIb3N0ID0gZnVuY3Rpb24gKGhvc3QpIHtcbiAgdmFyIHJlc3VsdCwgaW5kZXgsIGNvbXByZXNzLCBpZ25vcmUwO1xuXG4gIC8vIGlwdjRcbiAgaWYgKHR5cGVvZiBob3N0ID09ICdudW1iZXInKSB7XG4gICAgcmVzdWx0ID0gW107XG4gICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgNDsgaW5kZXgrKykge1xuICAgICAgdW5zaGlmdChyZXN1bHQsIGhvc3QgJSAyNTYpO1xuICAgICAgaG9zdCA9IGZsb29yKGhvc3QgLyAyNTYpO1xuICAgIH1cbiAgICByZXR1cm4gam9pbihyZXN1bHQsICcuJyk7XG4gIH1cblxuICAvLyBpcHY2XG4gIGlmICh0eXBlb2YgaG9zdCA9PSAnb2JqZWN0Jykge1xuICAgIHJlc3VsdCA9ICcnO1xuICAgIGNvbXByZXNzID0gZmluZExvbmdlc3RaZXJvU2VxdWVuY2UoaG9zdCk7XG4gICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgODsgaW5kZXgrKykge1xuICAgICAgaWYgKGlnbm9yZTAgJiYgaG9zdFtpbmRleF0gPT09IDApIGNvbnRpbnVlO1xuICAgICAgaWYgKGlnbm9yZTApIGlnbm9yZTAgPSBmYWxzZTtcbiAgICAgIGlmIChjb21wcmVzcyA9PT0gaW5kZXgpIHtcbiAgICAgICAgcmVzdWx0ICs9IGluZGV4ID8gJzonIDogJzo6JztcbiAgICAgICAgaWdub3JlMCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gbnVtYmVyVG9TdHJpbmcoaG9zdFtpbmRleF0sIDE2KTtcbiAgICAgICAgaWYgKGluZGV4IDwgNykgcmVzdWx0ICs9ICc6JztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICdbJyArIHJlc3VsdCArICddJztcbiAgfVxuXG4gIHJldHVybiBob3N0O1xufTtcblxudmFyIEMwQ29udHJvbFBlcmNlbnRFbmNvZGVTZXQgPSB7fTtcbnZhciBmcmFnbWVudFBlcmNlbnRFbmNvZGVTZXQgPSBhc3NpZ24oe30sIEMwQ29udHJvbFBlcmNlbnRFbmNvZGVTZXQsIHtcbiAgJyAnOiAxLCAnXCInOiAxLCAnPCc6IDEsICc+JzogMSwgJ2AnOiAxXG59KTtcbnZhciBwYXRoUGVyY2VudEVuY29kZVNldCA9IGFzc2lnbih7fSwgZnJhZ21lbnRQZXJjZW50RW5jb2RlU2V0LCB7XG4gICcjJzogMSwgJz8nOiAxLCAneyc6IDEsICd9JzogMVxufSk7XG52YXIgdXNlcmluZm9QZXJjZW50RW5jb2RlU2V0ID0gYXNzaWduKHt9LCBwYXRoUGVyY2VudEVuY29kZVNldCwge1xuICAnLyc6IDEsICc6JzogMSwgJzsnOiAxLCAnPSc6IDEsICdAJzogMSwgJ1snOiAxLCAnXFxcXCc6IDEsICddJzogMSwgJ14nOiAxLCAnfCc6IDFcbn0pO1xuXG52YXIgcGVyY2VudEVuY29kZSA9IGZ1bmN0aW9uIChjaHIsIHNldCkge1xuICB2YXIgY29kZSA9IGNvZGVBdChjaHIsIDApO1xuICByZXR1cm4gY29kZSA+IDB4MjAgJiYgY29kZSA8IDB4N0YgJiYgIWhhc093bihzZXQsIGNocikgPyBjaHIgOiBlbmNvZGVVUklDb21wb25lbnQoY2hyKTtcbn07XG5cbi8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jc3BlY2lhbC1zY2hlbWVcbnZhciBzcGVjaWFsU2NoZW1lcyA9IHtcbiAgZnRwOiAyMSxcbiAgZmlsZTogbnVsbCxcbiAgaHR0cDogODAsXG4gIGh0dHBzOiA0NDMsXG4gIHdzOiA4MCxcbiAgd3NzOiA0NDNcbn07XG5cbi8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jd2luZG93cy1kcml2ZS1sZXR0ZXJcbnZhciBpc1dpbmRvd3NEcml2ZUxldHRlciA9IGZ1bmN0aW9uIChzdHJpbmcsIG5vcm1hbGl6ZWQpIHtcbiAgdmFyIHNlY29uZDtcbiAgcmV0dXJuIHN0cmluZy5sZW5ndGggPT09IDIgJiYgZXhlYyhBTFBIQSwgY2hhckF0KHN0cmluZywgMCkpXG4gICAgJiYgKChzZWNvbmQgPSBjaGFyQXQoc3RyaW5nLCAxKSkgPT09ICc6JyB8fCAoIW5vcm1hbGl6ZWQgJiYgc2Vjb25kID09PSAnfCcpKTtcbn07XG5cbi8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jc3RhcnQtd2l0aC1hLXdpbmRvd3MtZHJpdmUtbGV0dGVyXG52YXIgc3RhcnRzV2l0aFdpbmRvd3NEcml2ZUxldHRlciA9IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgdmFyIHRoaXJkO1xuICByZXR1cm4gc3RyaW5nLmxlbmd0aCA+IDEgJiYgaXNXaW5kb3dzRHJpdmVMZXR0ZXIoc3RyaW5nU2xpY2Uoc3RyaW5nLCAwLCAyKSkgJiYgKFxuICAgIHN0cmluZy5sZW5ndGggPT09IDIgfHxcbiAgICAoKHRoaXJkID0gY2hhckF0KHN0cmluZywgMikpID09PSAnLycgfHwgdGhpcmQgPT09ICdcXFxcJyB8fCB0aGlyZCA9PT0gJz8nIHx8IHRoaXJkID09PSAnIycpXG4gICk7XG59O1xuXG4vLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI3NpbmdsZS1kb3QtcGF0aC1zZWdtZW50XG52YXIgaXNTaW5nbGVEb3QgPSBmdW5jdGlvbiAoc2VnbWVudCkge1xuICByZXR1cm4gc2VnbWVudCA9PT0gJy4nIHx8IHRvTG93ZXJDYXNlKHNlZ21lbnQpID09PSAnJTJlJztcbn07XG5cbi8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG91YmxlLWRvdC1wYXRoLXNlZ21lbnRcbnZhciBpc0RvdWJsZURvdCA9IGZ1bmN0aW9uIChzZWdtZW50KSB7XG4gIHNlZ21lbnQgPSB0b0xvd2VyQ2FzZShzZWdtZW50KTtcbiAgcmV0dXJuIHNlZ21lbnQgPT09ICcuLicgfHwgc2VnbWVudCA9PT0gJyUyZS4nIHx8IHNlZ21lbnQgPT09ICcuJTJlJyB8fCBzZWdtZW50ID09PSAnJTJlJTJlJztcbn07XG5cbi8vIFN0YXRlczpcbnZhciBTQ0hFTUVfU1RBUlQgPSB7fTtcbnZhciBTQ0hFTUUgPSB7fTtcbnZhciBOT19TQ0hFTUUgPSB7fTtcbnZhciBTUEVDSUFMX1JFTEFUSVZFX09SX0FVVEhPUklUWSA9IHt9O1xudmFyIFBBVEhfT1JfQVVUSE9SSVRZID0ge307XG52YXIgUkVMQVRJVkUgPSB7fTtcbnZhciBSRUxBVElWRV9TTEFTSCA9IHt9O1xudmFyIFNQRUNJQUxfQVVUSE9SSVRZX1NMQVNIRVMgPSB7fTtcbnZhciBTUEVDSUFMX0FVVEhPUklUWV9JR05PUkVfU0xBU0hFUyA9IHt9O1xudmFyIEFVVEhPUklUWSA9IHt9O1xudmFyIEhPU1QgPSB7fTtcbnZhciBIT1NUTkFNRSA9IHt9O1xudmFyIFBPUlQgPSB7fTtcbnZhciBGSUxFID0ge307XG52YXIgRklMRV9TTEFTSCA9IHt9O1xudmFyIEZJTEVfSE9TVCA9IHt9O1xudmFyIFBBVEhfU1RBUlQgPSB7fTtcbnZhciBQQVRIID0ge307XG52YXIgQ0FOTk9UX0JFX0FfQkFTRV9VUkxfUEFUSCA9IHt9O1xudmFyIFFVRVJZID0ge307XG52YXIgRlJBR01FTlQgPSB7fTtcblxudmFyIFVSTFN0YXRlID0gZnVuY3Rpb24gKHVybCwgaXNCYXNlLCBiYXNlKSB7XG4gIHZhciB1cmxTdHJpbmcgPSAkdG9TdHJpbmcodXJsKTtcbiAgdmFyIGJhc2VTdGF0ZSwgZmFpbHVyZSwgc2VhcmNoUGFyYW1zO1xuICBpZiAoaXNCYXNlKSB7XG4gICAgZmFpbHVyZSA9IHRoaXMucGFyc2UodXJsU3RyaW5nKTtcbiAgICBpZiAoZmFpbHVyZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihmYWlsdXJlKTtcbiAgICB0aGlzLnNlYXJjaFBhcmFtcyA9IG51bGw7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGJhc2UgIT09IHVuZGVmaW5lZCkgYmFzZVN0YXRlID0gbmV3IFVSTFN0YXRlKGJhc2UsIHRydWUpO1xuICAgIGZhaWx1cmUgPSB0aGlzLnBhcnNlKHVybFN0cmluZywgbnVsbCwgYmFzZVN0YXRlKTtcbiAgICBpZiAoZmFpbHVyZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihmYWlsdXJlKTtcbiAgICBzZWFyY2hQYXJhbXMgPSBnZXRJbnRlcm5hbFNlYXJjaFBhcmFtc1N0YXRlKG5ldyBVUkxTZWFyY2hQYXJhbXMoKSk7XG4gICAgc2VhcmNoUGFyYW1zLmJpbmRVUkwodGhpcyk7XG4gICAgdGhpcy5zZWFyY2hQYXJhbXMgPSBzZWFyY2hQYXJhbXM7XG4gIH1cbn07XG5cblVSTFN0YXRlLnByb3RvdHlwZSA9IHtcbiAgdHlwZTogJ1VSTCcsXG4gIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsLXBhcnNpbmdcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1zdGF0ZW1lbnRzIC0tIFRPRE9cbiAgcGFyc2U6IGZ1bmN0aW9uIChpbnB1dCwgc3RhdGVPdmVycmlkZSwgYmFzZSkge1xuICAgIHZhciB1cmwgPSB0aGlzO1xuICAgIHZhciBzdGF0ZSA9IHN0YXRlT3ZlcnJpZGUgfHwgU0NIRU1FX1NUQVJUO1xuICAgIHZhciBwb2ludGVyID0gMDtcbiAgICB2YXIgYnVmZmVyID0gJyc7XG4gICAgdmFyIHNlZW5BdCA9IGZhbHNlO1xuICAgIHZhciBzZWVuQnJhY2tldCA9IGZhbHNlO1xuICAgIHZhciBzZWVuUGFzc3dvcmRUb2tlbiA9IGZhbHNlO1xuICAgIHZhciBjb2RlUG9pbnRzLCBjaHIsIGJ1ZmZlckNvZGVQb2ludHMsIGZhaWx1cmU7XG5cbiAgICBpbnB1dCA9ICR0b1N0cmluZyhpbnB1dCk7XG5cbiAgICBpZiAoIXN0YXRlT3ZlcnJpZGUpIHtcbiAgICAgIHVybC5zY2hlbWUgPSAnJztcbiAgICAgIHVybC51c2VybmFtZSA9ICcnO1xuICAgICAgdXJsLnBhc3N3b3JkID0gJyc7XG4gICAgICB1cmwuaG9zdCA9IG51bGw7XG4gICAgICB1cmwucG9ydCA9IG51bGw7XG4gICAgICB1cmwucGF0aCA9IFtdO1xuICAgICAgdXJsLnF1ZXJ5ID0gbnVsbDtcbiAgICAgIHVybC5mcmFnbWVudCA9IG51bGw7XG4gICAgICB1cmwuY2Fubm90QmVBQmFzZVVSTCA9IGZhbHNlO1xuICAgICAgaW5wdXQgPSByZXBsYWNlKGlucHV0LCBMRUFESU5HX0MwX0NPTlRST0xfT1JfU1BBQ0UsICcnKTtcbiAgICAgIGlucHV0ID0gcmVwbGFjZShpbnB1dCwgVFJBSUxJTkdfQzBfQ09OVFJPTF9PUl9TUEFDRSwgJyQxJyk7XG4gICAgfVxuXG4gICAgaW5wdXQgPSByZXBsYWNlKGlucHV0LCBUQUJfQU5EX05FV19MSU5FLCAnJyk7XG5cbiAgICBjb2RlUG9pbnRzID0gYXJyYXlGcm9tKGlucHV0KTtcblxuICAgIHdoaWxlIChwb2ludGVyIDw9IGNvZGVQb2ludHMubGVuZ3RoKSB7XG4gICAgICBjaHIgPSBjb2RlUG9pbnRzW3BvaW50ZXJdO1xuICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICBjYXNlIFNDSEVNRV9TVEFSVDpcbiAgICAgICAgICBpZiAoY2hyICYmIGV4ZWMoQUxQSEEsIGNocikpIHtcbiAgICAgICAgICAgIGJ1ZmZlciArPSB0b0xvd2VyQ2FzZShjaHIpO1xuICAgICAgICAgICAgc3RhdGUgPSBTQ0hFTUU7XG4gICAgICAgICAgfSBlbHNlIGlmICghc3RhdGVPdmVycmlkZSkge1xuICAgICAgICAgICAgc3RhdGUgPSBOT19TQ0hFTUU7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9IGVsc2UgcmV0dXJuIElOVkFMSURfU0NIRU1FO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgU0NIRU1FOlxuICAgICAgICAgIGlmIChjaHIgJiYgKGV4ZWMoQUxQSEFOVU1FUklDLCBjaHIpIHx8IGNociA9PT0gJysnIHx8IGNociA9PT0gJy0nIHx8IGNociA9PT0gJy4nKSkge1xuICAgICAgICAgICAgYnVmZmVyICs9IHRvTG93ZXJDYXNlKGNocik7XG4gICAgICAgICAgfSBlbHNlIGlmIChjaHIgPT09ICc6Jykge1xuICAgICAgICAgICAgaWYgKHN0YXRlT3ZlcnJpZGUgJiYgKFxuICAgICAgICAgICAgICAodXJsLmlzU3BlY2lhbCgpICE9PSBoYXNPd24oc3BlY2lhbFNjaGVtZXMsIGJ1ZmZlcikpIHx8XG4gICAgICAgICAgICAgIChidWZmZXIgPT09ICdmaWxlJyAmJiAodXJsLmluY2x1ZGVzQ3JlZGVudGlhbHMoKSB8fCB1cmwucG9ydCAhPT0gbnVsbCkpIHx8XG4gICAgICAgICAgICAgICh1cmwuc2NoZW1lID09PSAnZmlsZScgJiYgIXVybC5ob3N0KVxuICAgICAgICAgICAgKSkgcmV0dXJuO1xuICAgICAgICAgICAgdXJsLnNjaGVtZSA9IGJ1ZmZlcjtcbiAgICAgICAgICAgIGlmIChzdGF0ZU92ZXJyaWRlKSB7XG4gICAgICAgICAgICAgIGlmICh1cmwuaXNTcGVjaWFsKCkgJiYgc3BlY2lhbFNjaGVtZXNbdXJsLnNjaGVtZV0gPT09IHVybC5wb3J0KSB1cmwucG9ydCA9IG51bGw7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1ZmZlciA9ICcnO1xuICAgICAgICAgICAgaWYgKHVybC5zY2hlbWUgPT09ICdmaWxlJykge1xuICAgICAgICAgICAgICBzdGF0ZSA9IEZJTEU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHVybC5pc1NwZWNpYWwoKSAmJiBiYXNlICYmIGJhc2Uuc2NoZW1lID09PSB1cmwuc2NoZW1lKSB7XG4gICAgICAgICAgICAgIHN0YXRlID0gU1BFQ0lBTF9SRUxBVElWRV9PUl9BVVRIT1JJVFk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHVybC5pc1NwZWNpYWwoKSkge1xuICAgICAgICAgICAgICBzdGF0ZSA9IFNQRUNJQUxfQVVUSE9SSVRZX1NMQVNIRVM7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvZGVQb2ludHNbcG9pbnRlciArIDFdID09PSAnLycpIHtcbiAgICAgICAgICAgICAgc3RhdGUgPSBQQVRIX09SX0FVVEhPUklUWTtcbiAgICAgICAgICAgICAgcG9pbnRlcisrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdXJsLmNhbm5vdEJlQUJhc2VVUkwgPSB0cnVlO1xuICAgICAgICAgICAgICBwdXNoKHVybC5wYXRoLCAnJyk7XG4gICAgICAgICAgICAgIHN0YXRlID0gQ0FOTk9UX0JFX0FfQkFTRV9VUkxfUEFUSDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKCFzdGF0ZU92ZXJyaWRlKSB7XG4gICAgICAgICAgICBidWZmZXIgPSAnJztcbiAgICAgICAgICAgIHN0YXRlID0gTk9fU0NIRU1FO1xuICAgICAgICAgICAgcG9pbnRlciA9IDA7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9IGVsc2UgcmV0dXJuIElOVkFMSURfU0NIRU1FO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgTk9fU0NIRU1FOlxuICAgICAgICAgIGlmICghYmFzZSB8fCAoYmFzZS5jYW5ub3RCZUFCYXNlVVJMICYmIGNociAhPT0gJyMnKSkgcmV0dXJuIElOVkFMSURfU0NIRU1FO1xuICAgICAgICAgIGlmIChiYXNlLmNhbm5vdEJlQUJhc2VVUkwgJiYgY2hyID09PSAnIycpIHtcbiAgICAgICAgICAgIHVybC5zY2hlbWUgPSBiYXNlLnNjaGVtZTtcbiAgICAgICAgICAgIHVybC5wYXRoID0gYXJyYXlTbGljZShiYXNlLnBhdGgpO1xuICAgICAgICAgICAgdXJsLnF1ZXJ5ID0gYmFzZS5xdWVyeTtcbiAgICAgICAgICAgIHVybC5mcmFnbWVudCA9ICcnO1xuICAgICAgICAgICAgdXJsLmNhbm5vdEJlQUJhc2VVUkwgPSB0cnVlO1xuICAgICAgICAgICAgc3RhdGUgPSBGUkFHTUVOVDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdGF0ZSA9IGJhc2Uuc2NoZW1lID09PSAnZmlsZScgPyBGSUxFIDogUkVMQVRJVkU7XG4gICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgY2FzZSBTUEVDSUFMX1JFTEFUSVZFX09SX0FVVEhPUklUWTpcbiAgICAgICAgICBpZiAoY2hyID09PSAnLycgJiYgY29kZVBvaW50c1twb2ludGVyICsgMV0gPT09ICcvJykge1xuICAgICAgICAgICAgc3RhdGUgPSBTUEVDSUFMX0FVVEhPUklUWV9JR05PUkVfU0xBU0hFUztcbiAgICAgICAgICAgIHBvaW50ZXIrKztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhdGUgPSBSRUxBVElWRTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH0gYnJlYWs7XG5cbiAgICAgICAgY2FzZSBQQVRIX09SX0FVVEhPUklUWTpcbiAgICAgICAgICBpZiAoY2hyID09PSAnLycpIHtcbiAgICAgICAgICAgIHN0YXRlID0gQVVUSE9SSVRZO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0YXRlID0gUEFUSDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICBjYXNlIFJFTEFUSVZFOlxuICAgICAgICAgIHVybC5zY2hlbWUgPSBiYXNlLnNjaGVtZTtcbiAgICAgICAgICBpZiAoY2hyID09PSBFT0YpIHtcbiAgICAgICAgICAgIHVybC51c2VybmFtZSA9IGJhc2UudXNlcm5hbWU7XG4gICAgICAgICAgICB1cmwucGFzc3dvcmQgPSBiYXNlLnBhc3N3b3JkO1xuICAgICAgICAgICAgdXJsLmhvc3QgPSBiYXNlLmhvc3Q7XG4gICAgICAgICAgICB1cmwucG9ydCA9IGJhc2UucG9ydDtcbiAgICAgICAgICAgIHVybC5wYXRoID0gYXJyYXlTbGljZShiYXNlLnBhdGgpO1xuICAgICAgICAgICAgdXJsLnF1ZXJ5ID0gYmFzZS5xdWVyeTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNociA9PT0gJy8nIHx8IChjaHIgPT09ICdcXFxcJyAmJiB1cmwuaXNTcGVjaWFsKCkpKSB7XG4gICAgICAgICAgICBzdGF0ZSA9IFJFTEFUSVZFX1NMQVNIO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY2hyID09PSAnPycpIHtcbiAgICAgICAgICAgIHVybC51c2VybmFtZSA9IGJhc2UudXNlcm5hbWU7XG4gICAgICAgICAgICB1cmwucGFzc3dvcmQgPSBiYXNlLnBhc3N3b3JkO1xuICAgICAgICAgICAgdXJsLmhvc3QgPSBiYXNlLmhvc3Q7XG4gICAgICAgICAgICB1cmwucG9ydCA9IGJhc2UucG9ydDtcbiAgICAgICAgICAgIHVybC5wYXRoID0gYXJyYXlTbGljZShiYXNlLnBhdGgpO1xuICAgICAgICAgICAgdXJsLnF1ZXJ5ID0gJyc7XG4gICAgICAgICAgICBzdGF0ZSA9IFFVRVJZO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY2hyID09PSAnIycpIHtcbiAgICAgICAgICAgIHVybC51c2VybmFtZSA9IGJhc2UudXNlcm5hbWU7XG4gICAgICAgICAgICB1cmwucGFzc3dvcmQgPSBiYXNlLnBhc3N3b3JkO1xuICAgICAgICAgICAgdXJsLmhvc3QgPSBiYXNlLmhvc3Q7XG4gICAgICAgICAgICB1cmwucG9ydCA9IGJhc2UucG9ydDtcbiAgICAgICAgICAgIHVybC5wYXRoID0gYXJyYXlTbGljZShiYXNlLnBhdGgpO1xuICAgICAgICAgICAgdXJsLnF1ZXJ5ID0gYmFzZS5xdWVyeTtcbiAgICAgICAgICAgIHVybC5mcmFnbWVudCA9ICcnO1xuICAgICAgICAgICAgc3RhdGUgPSBGUkFHTUVOVDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdXJsLnVzZXJuYW1lID0gYmFzZS51c2VybmFtZTtcbiAgICAgICAgICAgIHVybC5wYXNzd29yZCA9IGJhc2UucGFzc3dvcmQ7XG4gICAgICAgICAgICB1cmwuaG9zdCA9IGJhc2UuaG9zdDtcbiAgICAgICAgICAgIHVybC5wb3J0ID0gYmFzZS5wb3J0O1xuICAgICAgICAgICAgdXJsLnBhdGggPSBhcnJheVNsaWNlKGJhc2UucGF0aCk7XG4gICAgICAgICAgICB1cmwucGF0aC5sZW5ndGgtLTtcbiAgICAgICAgICAgIHN0YXRlID0gUEFUSDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH0gYnJlYWs7XG5cbiAgICAgICAgY2FzZSBSRUxBVElWRV9TTEFTSDpcbiAgICAgICAgICBpZiAodXJsLmlzU3BlY2lhbCgpICYmIChjaHIgPT09ICcvJyB8fCBjaHIgPT09ICdcXFxcJykpIHtcbiAgICAgICAgICAgIHN0YXRlID0gU1BFQ0lBTF9BVVRIT1JJVFlfSUdOT1JFX1NMQVNIRVM7XG4gICAgICAgICAgfSBlbHNlIGlmIChjaHIgPT09ICcvJykge1xuICAgICAgICAgICAgc3RhdGUgPSBBVVRIT1JJVFk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVybC51c2VybmFtZSA9IGJhc2UudXNlcm5hbWU7XG4gICAgICAgICAgICB1cmwucGFzc3dvcmQgPSBiYXNlLnBhc3N3b3JkO1xuICAgICAgICAgICAgdXJsLmhvc3QgPSBiYXNlLmhvc3Q7XG4gICAgICAgICAgICB1cmwucG9ydCA9IGJhc2UucG9ydDtcbiAgICAgICAgICAgIHN0YXRlID0gUEFUSDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH0gYnJlYWs7XG5cbiAgICAgICAgY2FzZSBTUEVDSUFMX0FVVEhPUklUWV9TTEFTSEVTOlxuICAgICAgICAgIHN0YXRlID0gU1BFQ0lBTF9BVVRIT1JJVFlfSUdOT1JFX1NMQVNIRVM7XG4gICAgICAgICAgaWYgKGNociAhPT0gJy8nIHx8IGNoYXJBdChidWZmZXIsIHBvaW50ZXIgKyAxKSAhPT0gJy8nKSBjb250aW51ZTtcbiAgICAgICAgICBwb2ludGVyKys7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBTUEVDSUFMX0FVVEhPUklUWV9JR05PUkVfU0xBU0hFUzpcbiAgICAgICAgICBpZiAoY2hyICE9PSAnLycgJiYgY2hyICE9PSAnXFxcXCcpIHtcbiAgICAgICAgICAgIHN0YXRlID0gQVVUSE9SSVRZO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfSBicmVhaztcblxuICAgICAgICBjYXNlIEFVVEhPUklUWTpcbiAgICAgICAgICBpZiAoY2hyID09PSAnQCcpIHtcbiAgICAgICAgICAgIGlmIChzZWVuQXQpIGJ1ZmZlciA9ICclNDAnICsgYnVmZmVyO1xuICAgICAgICAgICAgc2VlbkF0ID0gdHJ1ZTtcbiAgICAgICAgICAgIGJ1ZmZlckNvZGVQb2ludHMgPSBhcnJheUZyb20oYnVmZmVyKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnVmZmVyQ29kZVBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICB2YXIgY29kZVBvaW50ID0gYnVmZmVyQ29kZVBvaW50c1tpXTtcbiAgICAgICAgICAgICAgaWYgKGNvZGVQb2ludCA9PT0gJzonICYmICFzZWVuUGFzc3dvcmRUb2tlbikge1xuICAgICAgICAgICAgICAgIHNlZW5QYXNzd29yZFRva2VuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB2YXIgZW5jb2RlZENvZGVQb2ludHMgPSBwZXJjZW50RW5jb2RlKGNvZGVQb2ludCwgdXNlcmluZm9QZXJjZW50RW5jb2RlU2V0KTtcbiAgICAgICAgICAgICAgaWYgKHNlZW5QYXNzd29yZFRva2VuKSB1cmwucGFzc3dvcmQgKz0gZW5jb2RlZENvZGVQb2ludHM7XG4gICAgICAgICAgICAgIGVsc2UgdXJsLnVzZXJuYW1lICs9IGVuY29kZWRDb2RlUG9pbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnVmZmVyID0gJyc7XG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIGNociA9PT0gRU9GIHx8IGNociA9PT0gJy8nIHx8IGNociA9PT0gJz8nIHx8IGNociA9PT0gJyMnIHx8XG4gICAgICAgICAgICAoY2hyID09PSAnXFxcXCcgJiYgdXJsLmlzU3BlY2lhbCgpKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgaWYgKHNlZW5BdCAmJiBidWZmZXIgPT09ICcnKSByZXR1cm4gSU5WQUxJRF9BVVRIT1JJVFk7XG4gICAgICAgICAgICBwb2ludGVyIC09IGFycmF5RnJvbShidWZmZXIpLmxlbmd0aCArIDE7XG4gICAgICAgICAgICBidWZmZXIgPSAnJztcbiAgICAgICAgICAgIHN0YXRlID0gSE9TVDtcbiAgICAgICAgICB9IGVsc2UgYnVmZmVyICs9IGNocjtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIEhPU1Q6XG4gICAgICAgIGNhc2UgSE9TVE5BTUU6XG4gICAgICAgICAgaWYgKHN0YXRlT3ZlcnJpZGUgJiYgdXJsLnNjaGVtZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEZJTEVfSE9TVDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY2hyID09PSAnOicgJiYgIXNlZW5CcmFja2V0KSB7XG4gICAgICAgICAgICBpZiAoYnVmZmVyID09PSAnJykgcmV0dXJuIElOVkFMSURfSE9TVDtcbiAgICAgICAgICAgIGZhaWx1cmUgPSB1cmwucGFyc2VIb3N0KGJ1ZmZlcik7XG4gICAgICAgICAgICBpZiAoZmFpbHVyZSkgcmV0dXJuIGZhaWx1cmU7XG4gICAgICAgICAgICBidWZmZXIgPSAnJztcbiAgICAgICAgICAgIHN0YXRlID0gUE9SVDtcbiAgICAgICAgICAgIGlmIChzdGF0ZU92ZXJyaWRlID09PSBIT1NUTkFNRSkgcmV0dXJuO1xuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICBjaHIgPT09IEVPRiB8fCBjaHIgPT09ICcvJyB8fCBjaHIgPT09ICc/JyB8fCBjaHIgPT09ICcjJyB8fFxuICAgICAgICAgICAgKGNociA9PT0gJ1xcXFwnICYmIHVybC5pc1NwZWNpYWwoKSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGlmICh1cmwuaXNTcGVjaWFsKCkgJiYgYnVmZmVyID09PSAnJykgcmV0dXJuIElOVkFMSURfSE9TVDtcbiAgICAgICAgICAgIGlmIChzdGF0ZU92ZXJyaWRlICYmIGJ1ZmZlciA9PT0gJycgJiYgKHVybC5pbmNsdWRlc0NyZWRlbnRpYWxzKCkgfHwgdXJsLnBvcnQgIT09IG51bGwpKSByZXR1cm47XG4gICAgICAgICAgICBmYWlsdXJlID0gdXJsLnBhcnNlSG9zdChidWZmZXIpO1xuICAgICAgICAgICAgaWYgKGZhaWx1cmUpIHJldHVybiBmYWlsdXJlO1xuICAgICAgICAgICAgYnVmZmVyID0gJyc7XG4gICAgICAgICAgICBzdGF0ZSA9IFBBVEhfU1RBUlQ7XG4gICAgICAgICAgICBpZiAoc3RhdGVPdmVycmlkZSkgcmV0dXJuO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjaHIgPT09ICdbJykgc2VlbkJyYWNrZXQgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZSBpZiAoY2hyID09PSAnXScpIHNlZW5CcmFja2V0ID0gZmFsc2U7XG4gICAgICAgICAgICBidWZmZXIgKz0gY2hyO1xuICAgICAgICAgIH0gYnJlYWs7XG5cbiAgICAgICAgY2FzZSBQT1JUOlxuICAgICAgICAgIGlmIChleGVjKERJR0lULCBjaHIpKSB7XG4gICAgICAgICAgICBidWZmZXIgKz0gY2hyO1xuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICBjaHIgPT09IEVPRiB8fCBjaHIgPT09ICcvJyB8fCBjaHIgPT09ICc/JyB8fCBjaHIgPT09ICcjJyB8fFxuICAgICAgICAgICAgKGNociA9PT0gJ1xcXFwnICYmIHVybC5pc1NwZWNpYWwoKSkgfHxcbiAgICAgICAgICAgIHN0YXRlT3ZlcnJpZGVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGlmIChidWZmZXIgIT09ICcnKSB7XG4gICAgICAgICAgICAgIHZhciBwb3J0ID0gcGFyc2VJbnQoYnVmZmVyLCAxMCk7XG4gICAgICAgICAgICAgIGlmIChwb3J0ID4gMHhGRkZGKSByZXR1cm4gSU5WQUxJRF9QT1JUO1xuICAgICAgICAgICAgICB1cmwucG9ydCA9ICh1cmwuaXNTcGVjaWFsKCkgJiYgcG9ydCA9PT0gc3BlY2lhbFNjaGVtZXNbdXJsLnNjaGVtZV0pID8gbnVsbCA6IHBvcnQ7XG4gICAgICAgICAgICAgIGJ1ZmZlciA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlT3ZlcnJpZGUpIHJldHVybjtcbiAgICAgICAgICAgIHN0YXRlID0gUEFUSF9TVEFSVDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH0gZWxzZSByZXR1cm4gSU5WQUxJRF9QT1JUO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgRklMRTpcbiAgICAgICAgICB1cmwuc2NoZW1lID0gJ2ZpbGUnO1xuICAgICAgICAgIGlmIChjaHIgPT09ICcvJyB8fCBjaHIgPT09ICdcXFxcJykgc3RhdGUgPSBGSUxFX1NMQVNIO1xuICAgICAgICAgIGVsc2UgaWYgKGJhc2UgJiYgYmFzZS5zY2hlbWUgPT09ICdmaWxlJykge1xuICAgICAgICAgICAgc3dpdGNoIChjaHIpIHtcbiAgICAgICAgICAgICAgY2FzZSBFT0Y6XG4gICAgICAgICAgICAgICAgdXJsLmhvc3QgPSBiYXNlLmhvc3Q7XG4gICAgICAgICAgICAgICAgdXJsLnBhdGggPSBhcnJheVNsaWNlKGJhc2UucGF0aCk7XG4gICAgICAgICAgICAgICAgdXJsLnF1ZXJ5ID0gYmFzZS5xdWVyeTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSAnPyc6XG4gICAgICAgICAgICAgICAgdXJsLmhvc3QgPSBiYXNlLmhvc3Q7XG4gICAgICAgICAgICAgICAgdXJsLnBhdGggPSBhcnJheVNsaWNlKGJhc2UucGF0aCk7XG4gICAgICAgICAgICAgICAgdXJsLnF1ZXJ5ID0gJyc7XG4gICAgICAgICAgICAgICAgc3RhdGUgPSBRVUVSWTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSAnIyc6XG4gICAgICAgICAgICAgICAgdXJsLmhvc3QgPSBiYXNlLmhvc3Q7XG4gICAgICAgICAgICAgICAgdXJsLnBhdGggPSBhcnJheVNsaWNlKGJhc2UucGF0aCk7XG4gICAgICAgICAgICAgICAgdXJsLnF1ZXJ5ID0gYmFzZS5xdWVyeTtcbiAgICAgICAgICAgICAgICB1cmwuZnJhZ21lbnQgPSAnJztcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IEZSQUdNRU5UO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmICghc3RhcnRzV2l0aFdpbmRvd3NEcml2ZUxldHRlcihqb2luKGFycmF5U2xpY2UoY29kZVBvaW50cywgcG9pbnRlciksICcnKSkpIHtcbiAgICAgICAgICAgICAgICAgIHVybC5ob3N0ID0gYmFzZS5ob3N0O1xuICAgICAgICAgICAgICAgICAgdXJsLnBhdGggPSBhcnJheVNsaWNlKGJhc2UucGF0aCk7XG4gICAgICAgICAgICAgICAgICB1cmwuc2hvcnRlblBhdGgoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RhdGUgPSBQQVRIO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGF0ZSA9IFBBVEg7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9IGJyZWFrO1xuXG4gICAgICAgIGNhc2UgRklMRV9TTEFTSDpcbiAgICAgICAgICBpZiAoY2hyID09PSAnLycgfHwgY2hyID09PSAnXFxcXCcpIHtcbiAgICAgICAgICAgIHN0YXRlID0gRklMRV9IT1NUO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChiYXNlICYmIGJhc2Uuc2NoZW1lID09PSAnZmlsZScgJiYgIXN0YXJ0c1dpdGhXaW5kb3dzRHJpdmVMZXR0ZXIoam9pbihhcnJheVNsaWNlKGNvZGVQb2ludHMsIHBvaW50ZXIpLCAnJykpKSB7XG4gICAgICAgICAgICBpZiAoaXNXaW5kb3dzRHJpdmVMZXR0ZXIoYmFzZS5wYXRoWzBdLCB0cnVlKSkgcHVzaCh1cmwucGF0aCwgYmFzZS5wYXRoWzBdKTtcbiAgICAgICAgICAgIGVsc2UgdXJsLmhvc3QgPSBiYXNlLmhvc3Q7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0YXRlID0gUEFUSDtcbiAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICBjYXNlIEZJTEVfSE9TVDpcbiAgICAgICAgICBpZiAoY2hyID09PSBFT0YgfHwgY2hyID09PSAnLycgfHwgY2hyID09PSAnXFxcXCcgfHwgY2hyID09PSAnPycgfHwgY2hyID09PSAnIycpIHtcbiAgICAgICAgICAgIGlmICghc3RhdGVPdmVycmlkZSAmJiBpc1dpbmRvd3NEcml2ZUxldHRlcihidWZmZXIpKSB7XG4gICAgICAgICAgICAgIHN0YXRlID0gUEFUSDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYnVmZmVyID09PSAnJykge1xuICAgICAgICAgICAgICB1cmwuaG9zdCA9ICcnO1xuICAgICAgICAgICAgICBpZiAoc3RhdGVPdmVycmlkZSkgcmV0dXJuO1xuICAgICAgICAgICAgICBzdGF0ZSA9IFBBVEhfU1RBUlQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBmYWlsdXJlID0gdXJsLnBhcnNlSG9zdChidWZmZXIpO1xuICAgICAgICAgICAgICBpZiAoZmFpbHVyZSkgcmV0dXJuIGZhaWx1cmU7XG4gICAgICAgICAgICAgIGlmICh1cmwuaG9zdCA9PT0gJ2xvY2FsaG9zdCcpIHVybC5ob3N0ID0gJyc7XG4gICAgICAgICAgICAgIGlmIChzdGF0ZU92ZXJyaWRlKSByZXR1cm47XG4gICAgICAgICAgICAgIGJ1ZmZlciA9ICcnO1xuICAgICAgICAgICAgICBzdGF0ZSA9IFBBVEhfU1RBUlQ7XG4gICAgICAgICAgICB9IGNvbnRpbnVlO1xuICAgICAgICAgIH0gZWxzZSBidWZmZXIgKz0gY2hyO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgUEFUSF9TVEFSVDpcbiAgICAgICAgICBpZiAodXJsLmlzU3BlY2lhbCgpKSB7XG4gICAgICAgICAgICBzdGF0ZSA9IFBBVEg7XG4gICAgICAgICAgICBpZiAoY2hyICE9PSAnLycgJiYgY2hyICE9PSAnXFxcXCcpIGNvbnRpbnVlO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIXN0YXRlT3ZlcnJpZGUgJiYgY2hyID09PSAnPycpIHtcbiAgICAgICAgICAgIHVybC5xdWVyeSA9ICcnO1xuICAgICAgICAgICAgc3RhdGUgPSBRVUVSWTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCFzdGF0ZU92ZXJyaWRlICYmIGNociA9PT0gJyMnKSB7XG4gICAgICAgICAgICB1cmwuZnJhZ21lbnQgPSAnJztcbiAgICAgICAgICAgIHN0YXRlID0gRlJBR01FTlQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChjaHIgIT09IEVPRikge1xuICAgICAgICAgICAgc3RhdGUgPSBQQVRIO1xuICAgICAgICAgICAgaWYgKGNociAhPT0gJy8nKSBjb250aW51ZTtcbiAgICAgICAgICB9IGJyZWFrO1xuXG4gICAgICAgIGNhc2UgUEFUSDpcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjaHIgPT09IEVPRiB8fCBjaHIgPT09ICcvJyB8fFxuICAgICAgICAgICAgKGNociA9PT0gJ1xcXFwnICYmIHVybC5pc1NwZWNpYWwoKSkgfHxcbiAgICAgICAgICAgICghc3RhdGVPdmVycmlkZSAmJiAoY2hyID09PSAnPycgfHwgY2hyID09PSAnIycpKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgaWYgKGlzRG91YmxlRG90KGJ1ZmZlcikpIHtcbiAgICAgICAgICAgICAgdXJsLnNob3J0ZW5QYXRoKCk7XG4gICAgICAgICAgICAgIGlmIChjaHIgIT09ICcvJyAmJiAhKGNociA9PT0gJ1xcXFwnICYmIHVybC5pc1NwZWNpYWwoKSkpIHtcbiAgICAgICAgICAgICAgICBwdXNoKHVybC5wYXRoLCAnJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNTaW5nbGVEb3QoYnVmZmVyKSkge1xuICAgICAgICAgICAgICBpZiAoY2hyICE9PSAnLycgJiYgIShjaHIgPT09ICdcXFxcJyAmJiB1cmwuaXNTcGVjaWFsKCkpKSB7XG4gICAgICAgICAgICAgICAgcHVzaCh1cmwucGF0aCwgJycpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAodXJsLnNjaGVtZSA9PT0gJ2ZpbGUnICYmICF1cmwucGF0aC5sZW5ndGggJiYgaXNXaW5kb3dzRHJpdmVMZXR0ZXIoYnVmZmVyKSkge1xuICAgICAgICAgICAgICAgIGlmICh1cmwuaG9zdCkgdXJsLmhvc3QgPSAnJztcbiAgICAgICAgICAgICAgICBidWZmZXIgPSBjaGFyQXQoYnVmZmVyLCAwKSArICc6JzsgLy8gbm9ybWFsaXplIHdpbmRvd3MgZHJpdmUgbGV0dGVyXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcHVzaCh1cmwucGF0aCwgYnVmZmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1ZmZlciA9ICcnO1xuICAgICAgICAgICAgaWYgKHVybC5zY2hlbWUgPT09ICdmaWxlJyAmJiAoY2hyID09PSBFT0YgfHwgY2hyID09PSAnPycgfHwgY2hyID09PSAnIycpKSB7XG4gICAgICAgICAgICAgIHdoaWxlICh1cmwucGF0aC5sZW5ndGggPiAxICYmIHVybC5wYXRoWzBdID09PSAnJykge1xuICAgICAgICAgICAgICAgIHNoaWZ0KHVybC5wYXRoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNociA9PT0gJz8nKSB7XG4gICAgICAgICAgICAgIHVybC5xdWVyeSA9ICcnO1xuICAgICAgICAgICAgICBzdGF0ZSA9IFFVRVJZO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjaHIgPT09ICcjJykge1xuICAgICAgICAgICAgICB1cmwuZnJhZ21lbnQgPSAnJztcbiAgICAgICAgICAgICAgc3RhdGUgPSBGUkFHTUVOVDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYnVmZmVyICs9IHBlcmNlbnRFbmNvZGUoY2hyLCBwYXRoUGVyY2VudEVuY29kZVNldCk7XG4gICAgICAgICAgfSBicmVhaztcblxuICAgICAgICBjYXNlIENBTk5PVF9CRV9BX0JBU0VfVVJMX1BBVEg6XG4gICAgICAgICAgaWYgKGNociA9PT0gJz8nKSB7XG4gICAgICAgICAgICB1cmwucXVlcnkgPSAnJztcbiAgICAgICAgICAgIHN0YXRlID0gUVVFUlk7XG4gICAgICAgICAgfSBlbHNlIGlmIChjaHIgPT09ICcjJykge1xuICAgICAgICAgICAgdXJsLmZyYWdtZW50ID0gJyc7XG4gICAgICAgICAgICBzdGF0ZSA9IEZSQUdNRU5UO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY2hyICE9PSBFT0YpIHtcbiAgICAgICAgICAgIHVybC5wYXRoWzBdICs9IHBlcmNlbnRFbmNvZGUoY2hyLCBDMENvbnRyb2xQZXJjZW50RW5jb2RlU2V0KTtcbiAgICAgICAgICB9IGJyZWFrO1xuXG4gICAgICAgIGNhc2UgUVVFUlk6XG4gICAgICAgICAgaWYgKCFzdGF0ZU92ZXJyaWRlICYmIGNociA9PT0gJyMnKSB7XG4gICAgICAgICAgICB1cmwuZnJhZ21lbnQgPSAnJztcbiAgICAgICAgICAgIHN0YXRlID0gRlJBR01FTlQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChjaHIgIT09IEVPRikge1xuICAgICAgICAgICAgaWYgKGNociA9PT0gXCInXCIgJiYgdXJsLmlzU3BlY2lhbCgpKSB1cmwucXVlcnkgKz0gJyUyNyc7XG4gICAgICAgICAgICBlbHNlIGlmIChjaHIgPT09ICcjJykgdXJsLnF1ZXJ5ICs9ICclMjMnO1xuICAgICAgICAgICAgZWxzZSB1cmwucXVlcnkgKz0gcGVyY2VudEVuY29kZShjaHIsIEMwQ29udHJvbFBlcmNlbnRFbmNvZGVTZXQpO1xuICAgICAgICAgIH0gYnJlYWs7XG5cbiAgICAgICAgY2FzZSBGUkFHTUVOVDpcbiAgICAgICAgICBpZiAoY2hyICE9PSBFT0YpIHVybC5mcmFnbWVudCArPSBwZXJjZW50RW5jb2RlKGNociwgZnJhZ21lbnRQZXJjZW50RW5jb2RlU2V0KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgcG9pbnRlcisrO1xuICAgIH1cbiAgfSxcbiAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNob3N0LXBhcnNpbmdcbiAgcGFyc2VIb3N0OiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICB2YXIgcmVzdWx0LCBjb2RlUG9pbnRzLCBpbmRleDtcbiAgICBpZiAoY2hhckF0KGlucHV0LCAwKSA9PT0gJ1snKSB7XG4gICAgICBpZiAoY2hhckF0KGlucHV0LCBpbnB1dC5sZW5ndGggLSAxKSAhPT0gJ10nKSByZXR1cm4gSU5WQUxJRF9IT1NUO1xuICAgICAgcmVzdWx0ID0gcGFyc2VJUHY2KHN0cmluZ1NsaWNlKGlucHV0LCAxLCAtMSkpO1xuICAgICAgaWYgKCFyZXN1bHQpIHJldHVybiBJTlZBTElEX0hPU1Q7XG4gICAgICB0aGlzLmhvc3QgPSByZXN1bHQ7XG4gICAgLy8gb3BhcXVlIGhvc3RcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmlzU3BlY2lhbCgpKSB7XG4gICAgICBpZiAoZXhlYyhGT1JCSURERU5fSE9TVF9DT0RFX1BPSU5UX0VYQ0xVRElOR19QRVJDRU5ULCBpbnB1dCkpIHJldHVybiBJTlZBTElEX0hPU1Q7XG4gICAgICByZXN1bHQgPSAnJztcbiAgICAgIGNvZGVQb2ludHMgPSBhcnJheUZyb20oaW5wdXQpO1xuICAgICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgY29kZVBvaW50cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgcmVzdWx0ICs9IHBlcmNlbnRFbmNvZGUoY29kZVBvaW50c1tpbmRleF0sIEMwQ29udHJvbFBlcmNlbnRFbmNvZGVTZXQpO1xuICAgICAgfVxuICAgICAgdGhpcy5ob3N0ID0gcmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnB1dCA9IHRvQVNDSUkoaW5wdXQpO1xuICAgICAgaWYgKGV4ZWMoRk9SQklEREVOX0hPU1RfQ09ERV9QT0lOVCwgaW5wdXQpKSByZXR1cm4gSU5WQUxJRF9IT1NUO1xuICAgICAgcmVzdWx0ID0gcGFyc2VJUHY0KGlucHV0KTtcbiAgICAgIGlmIChyZXN1bHQgPT09IG51bGwpIHJldHVybiBJTlZBTElEX0hPU1Q7XG4gICAgICB0aGlzLmhvc3QgPSByZXN1bHQ7XG4gICAgfVxuICB9LFxuICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2Nhbm5vdC1oYXZlLWEtdXNlcm5hbWUtcGFzc3dvcmQtcG9ydFxuICBjYW5ub3RIYXZlVXNlcm5hbWVQYXNzd29yZFBvcnQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gIXRoaXMuaG9zdCB8fCB0aGlzLmNhbm5vdEJlQUJhc2VVUkwgfHwgdGhpcy5zY2hlbWUgPT09ICdmaWxlJztcbiAgfSxcbiAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNpbmNsdWRlLWNyZWRlbnRpYWxzXG4gIGluY2x1ZGVzQ3JlZGVudGlhbHM6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy51c2VybmFtZSAhPT0gJycgfHwgdGhpcy5wYXNzd29yZCAhPT0gJyc7XG4gIH0sXG4gIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jaXMtc3BlY2lhbFxuICBpc1NwZWNpYWw6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gaGFzT3duKHNwZWNpYWxTY2hlbWVzLCB0aGlzLnNjaGVtZSk7XG4gIH0sXG4gIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jc2hvcnRlbi1hLXVybHMtcGF0aFxuICBzaG9ydGVuUGF0aDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBwYXRoID0gdGhpcy5wYXRoO1xuICAgIHZhciBwYXRoU2l6ZSA9IHBhdGgubGVuZ3RoO1xuICAgIGlmIChwYXRoU2l6ZSAmJiAodGhpcy5zY2hlbWUgIT09ICdmaWxlJyB8fCBwYXRoU2l6ZSAhPT0gMSB8fCAhaXNXaW5kb3dzRHJpdmVMZXR0ZXIocGF0aFswXSwgdHJ1ZSkpKSB7XG4gICAgICBwYXRoLmxlbmd0aC0tO1xuICAgIH1cbiAgfSxcbiAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNjb25jZXB0LXVybC1zZXJpYWxpemVyXG4gIHNlcmlhbGl6ZTogZnVuY3Rpb24gKCkge1xuICAgIHZhciB1cmwgPSB0aGlzO1xuICAgIHZhciBzY2hlbWUgPSB1cmwuc2NoZW1lO1xuICAgIHZhciB1c2VybmFtZSA9IHVybC51c2VybmFtZTtcbiAgICB2YXIgcGFzc3dvcmQgPSB1cmwucGFzc3dvcmQ7XG4gICAgdmFyIGhvc3QgPSB1cmwuaG9zdDtcbiAgICB2YXIgcG9ydCA9IHVybC5wb3J0O1xuICAgIHZhciBwYXRoID0gdXJsLnBhdGg7XG4gICAgdmFyIHF1ZXJ5ID0gdXJsLnF1ZXJ5O1xuICAgIHZhciBmcmFnbWVudCA9IHVybC5mcmFnbWVudDtcbiAgICB2YXIgb3V0cHV0ID0gc2NoZW1lICsgJzonO1xuICAgIGlmIChob3N0ICE9PSBudWxsKSB7XG4gICAgICBvdXRwdXQgKz0gJy8vJztcbiAgICAgIGlmICh1cmwuaW5jbHVkZXNDcmVkZW50aWFscygpKSB7XG4gICAgICAgIG91dHB1dCArPSB1c2VybmFtZSArIChwYXNzd29yZCA/ICc6JyArIHBhc3N3b3JkIDogJycpICsgJ0AnO1xuICAgICAgfVxuICAgICAgb3V0cHV0ICs9IHNlcmlhbGl6ZUhvc3QoaG9zdCk7XG4gICAgICBpZiAocG9ydCAhPT0gbnVsbCkgb3V0cHV0ICs9ICc6JyArIHBvcnQ7XG4gICAgfSBlbHNlIGlmIChzY2hlbWUgPT09ICdmaWxlJykgb3V0cHV0ICs9ICcvLyc7XG4gICAgb3V0cHV0ICs9IHVybC5jYW5ub3RCZUFCYXNlVVJMID8gcGF0aFswXSA6IHBhdGgubGVuZ3RoID8gJy8nICsgam9pbihwYXRoLCAnLycpIDogJyc7XG4gICAgaWYgKHF1ZXJ5ICE9PSBudWxsKSBvdXRwdXQgKz0gJz8nICsgcXVlcnk7XG4gICAgaWYgKGZyYWdtZW50ICE9PSBudWxsKSBvdXRwdXQgKz0gJyMnICsgZnJhZ21lbnQ7XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfSxcbiAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsLWhyZWZcbiAgc2V0SHJlZjogZnVuY3Rpb24gKGhyZWYpIHtcbiAgICB2YXIgZmFpbHVyZSA9IHRoaXMucGFyc2UoaHJlZik7XG4gICAgaWYgKGZhaWx1cmUpIHRocm93IG5ldyBUeXBlRXJyb3IoZmFpbHVyZSk7XG4gICAgdGhpcy5zZWFyY2hQYXJhbXMudXBkYXRlKCk7XG4gIH0sXG4gIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybC1vcmlnaW5cbiAgZ2V0T3JpZ2luOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNjaGVtZSA9IHRoaXMuc2NoZW1lO1xuICAgIHZhciBwb3J0ID0gdGhpcy5wb3J0O1xuICAgIGlmIChzY2hlbWUgPT09ICdibG9iJykgdHJ5IHtcbiAgICAgIHJldHVybiBuZXcgVVJMQ29uc3RydWN0b3Ioc2NoZW1lLnBhdGhbMF0pLm9yaWdpbjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuICdudWxsJztcbiAgICB9XG4gICAgaWYgKHNjaGVtZSA9PT0gJ2ZpbGUnIHx8ICF0aGlzLmlzU3BlY2lhbCgpKSByZXR1cm4gJ251bGwnO1xuICAgIHJldHVybiBzY2hlbWUgKyAnOi8vJyArIHNlcmlhbGl6ZUhvc3QodGhpcy5ob3N0KSArIChwb3J0ICE9PSBudWxsID8gJzonICsgcG9ydCA6ICcnKTtcbiAgfSxcbiAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsLXByb3RvY29sXG4gIGdldFByb3RvY29sOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2NoZW1lICsgJzonO1xuICB9LFxuICBzZXRQcm90b2NvbDogZnVuY3Rpb24gKHByb3RvY29sKSB7XG4gICAgdGhpcy5wYXJzZSgkdG9TdHJpbmcocHJvdG9jb2wpICsgJzonLCBTQ0hFTUVfU1RBUlQpO1xuICB9LFxuICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtdXNlcm5hbWVcbiAgZ2V0VXNlcm5hbWU6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy51c2VybmFtZTtcbiAgfSxcbiAgc2V0VXNlcm5hbWU6IGZ1bmN0aW9uICh1c2VybmFtZSkge1xuICAgIHZhciBjb2RlUG9pbnRzID0gYXJyYXlGcm9tKCR0b1N0cmluZyh1c2VybmFtZSkpO1xuICAgIGlmICh0aGlzLmNhbm5vdEhhdmVVc2VybmFtZVBhc3N3b3JkUG9ydCgpKSByZXR1cm47XG4gICAgdGhpcy51c2VybmFtZSA9ICcnO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29kZVBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy51c2VybmFtZSArPSBwZXJjZW50RW5jb2RlKGNvZGVQb2ludHNbaV0sIHVzZXJpbmZvUGVyY2VudEVuY29kZVNldCk7XG4gICAgfVxuICB9LFxuICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtcGFzc3dvcmRcbiAgZ2V0UGFzc3dvcmQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXNzd29yZDtcbiAgfSxcbiAgc2V0UGFzc3dvcmQ6IGZ1bmN0aW9uIChwYXNzd29yZCkge1xuICAgIHZhciBjb2RlUG9pbnRzID0gYXJyYXlGcm9tKCR0b1N0cmluZyhwYXNzd29yZCkpO1xuICAgIGlmICh0aGlzLmNhbm5vdEhhdmVVc2VybmFtZVBhc3N3b3JkUG9ydCgpKSByZXR1cm47XG4gICAgdGhpcy5wYXNzd29yZCA9ICcnO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29kZVBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5wYXNzd29yZCArPSBwZXJjZW50RW5jb2RlKGNvZGVQb2ludHNbaV0sIHVzZXJpbmZvUGVyY2VudEVuY29kZVNldCk7XG4gICAgfVxuICB9LFxuICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtaG9zdFxuICBnZXRIb3N0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGhvc3QgPSB0aGlzLmhvc3Q7XG4gICAgdmFyIHBvcnQgPSB0aGlzLnBvcnQ7XG4gICAgcmV0dXJuIGhvc3QgPT09IG51bGwgPyAnJ1xuICAgICAgOiBwb3J0ID09PSBudWxsID8gc2VyaWFsaXplSG9zdChob3N0KVxuICAgICAgOiBzZXJpYWxpemVIb3N0KGhvc3QpICsgJzonICsgcG9ydDtcbiAgfSxcbiAgc2V0SG9zdDogZnVuY3Rpb24gKGhvc3QpIHtcbiAgICBpZiAodGhpcy5jYW5ub3RCZUFCYXNlVVJMKSByZXR1cm47XG4gICAgdGhpcy5wYXJzZShob3N0LCBIT1NUKTtcbiAgfSxcbiAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsLWhvc3RuYW1lXG4gIGdldEhvc3RuYW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGhvc3QgPSB0aGlzLmhvc3Q7XG4gICAgcmV0dXJuIGhvc3QgPT09IG51bGwgPyAnJyA6IHNlcmlhbGl6ZUhvc3QoaG9zdCk7XG4gIH0sXG4gIHNldEhvc3RuYW1lOiBmdW5jdGlvbiAoaG9zdG5hbWUpIHtcbiAgICBpZiAodGhpcy5jYW5ub3RCZUFCYXNlVVJMKSByZXR1cm47XG4gICAgdGhpcy5wYXJzZShob3N0bmFtZSwgSE9TVE5BTUUpO1xuICB9LFxuICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtcG9ydFxuICBnZXRQb3J0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHBvcnQgPSB0aGlzLnBvcnQ7XG4gICAgcmV0dXJuIHBvcnQgPT09IG51bGwgPyAnJyA6ICR0b1N0cmluZyhwb3J0KTtcbiAgfSxcbiAgc2V0UG9ydDogZnVuY3Rpb24gKHBvcnQpIHtcbiAgICBpZiAodGhpcy5jYW5ub3RIYXZlVXNlcm5hbWVQYXNzd29yZFBvcnQoKSkgcmV0dXJuO1xuICAgIHBvcnQgPSAkdG9TdHJpbmcocG9ydCk7XG4gICAgaWYgKHBvcnQgPT09ICcnKSB0aGlzLnBvcnQgPSBudWxsO1xuICAgIGVsc2UgdGhpcy5wYXJzZShwb3J0LCBQT1JUKTtcbiAgfSxcbiAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsLXBhdGhuYW1lXG4gIGdldFBhdGhuYW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHBhdGggPSB0aGlzLnBhdGg7XG4gICAgcmV0dXJuIHRoaXMuY2Fubm90QmVBQmFzZVVSTCA/IHBhdGhbMF0gOiBwYXRoLmxlbmd0aCA/ICcvJyArIGpvaW4ocGF0aCwgJy8nKSA6ICcnO1xuICB9LFxuICBzZXRQYXRobmFtZTogZnVuY3Rpb24gKHBhdGhuYW1lKSB7XG4gICAgaWYgKHRoaXMuY2Fubm90QmVBQmFzZVVSTCkgcmV0dXJuO1xuICAgIHRoaXMucGF0aCA9IFtdO1xuICAgIHRoaXMucGFyc2UocGF0aG5hbWUsIFBBVEhfU1RBUlQpO1xuICB9LFxuICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtc2VhcmNoXG4gIGdldFNlYXJjaDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBxdWVyeSA9IHRoaXMucXVlcnk7XG4gICAgcmV0dXJuIHF1ZXJ5ID8gJz8nICsgcXVlcnkgOiAnJztcbiAgfSxcbiAgc2V0U2VhcmNoOiBmdW5jdGlvbiAoc2VhcmNoKSB7XG4gICAgc2VhcmNoID0gJHRvU3RyaW5nKHNlYXJjaCk7XG4gICAgaWYgKHNlYXJjaCA9PT0gJycpIHtcbiAgICAgIHRoaXMucXVlcnkgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoY2hhckF0KHNlYXJjaCwgMCkgPT09ICc/Jykgc2VhcmNoID0gc3RyaW5nU2xpY2Uoc2VhcmNoLCAxKTtcbiAgICAgIHRoaXMucXVlcnkgPSAnJztcbiAgICAgIHRoaXMucGFyc2Uoc2VhcmNoLCBRVUVSWSk7XG4gICAgfVxuICAgIHRoaXMuc2VhcmNoUGFyYW1zLnVwZGF0ZSgpO1xuICB9LFxuICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtc2VhcmNocGFyYW1zXG4gIGdldFNlYXJjaFBhcmFtczogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnNlYXJjaFBhcmFtcy5mYWNhZGU7XG4gIH0sXG4gIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybC1oYXNoXG4gIGdldEhhc2g6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZnJhZ21lbnQgPSB0aGlzLmZyYWdtZW50O1xuICAgIHJldHVybiBmcmFnbWVudCA/ICcjJyArIGZyYWdtZW50IDogJyc7XG4gIH0sXG4gIHNldEhhc2g6IGZ1bmN0aW9uIChoYXNoKSB7XG4gICAgaGFzaCA9ICR0b1N0cmluZyhoYXNoKTtcbiAgICBpZiAoaGFzaCA9PT0gJycpIHtcbiAgICAgIHRoaXMuZnJhZ21lbnQgPSBudWxsO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2hhckF0KGhhc2gsIDApID09PSAnIycpIGhhc2ggPSBzdHJpbmdTbGljZShoYXNoLCAxKTtcbiAgICB0aGlzLmZyYWdtZW50ID0gJyc7XG4gICAgdGhpcy5wYXJzZShoYXNoLCBGUkFHTUVOVCk7XG4gIH0sXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucXVlcnkgPSB0aGlzLnNlYXJjaFBhcmFtcy5zZXJpYWxpemUoKSB8fCBudWxsO1xuICB9XG59O1xuXG4vLyBgVVJMYCBjb25zdHJ1Y3RvclxuLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmwtY2xhc3NcbnZhciBVUkxDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uIFVSTCh1cmwgLyogLCBiYXNlICovKSB7XG4gIHZhciB0aGF0ID0gYW5JbnN0YW5jZSh0aGlzLCBVUkxQcm90b3R5cGUpO1xuICB2YXIgYmFzZSA9IHZhbGlkYXRlQXJndW1lbnRzTGVuZ3RoKGFyZ3VtZW50cy5sZW5ndGgsIDEpID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDtcbiAgdmFyIHN0YXRlID0gc2V0SW50ZXJuYWxTdGF0ZSh0aGF0LCBuZXcgVVJMU3RhdGUodXJsLCBmYWxzZSwgYmFzZSkpO1xuICBpZiAoIURFU0NSSVBUT1JTKSB7XG4gICAgdGhhdC5ocmVmID0gc3RhdGUuc2VyaWFsaXplKCk7XG4gICAgdGhhdC5vcmlnaW4gPSBzdGF0ZS5nZXRPcmlnaW4oKTtcbiAgICB0aGF0LnByb3RvY29sID0gc3RhdGUuZ2V0UHJvdG9jb2woKTtcbiAgICB0aGF0LnVzZXJuYW1lID0gc3RhdGUuZ2V0VXNlcm5hbWUoKTtcbiAgICB0aGF0LnBhc3N3b3JkID0gc3RhdGUuZ2V0UGFzc3dvcmQoKTtcbiAgICB0aGF0Lmhvc3QgPSBzdGF0ZS5nZXRIb3N0KCk7XG4gICAgdGhhdC5ob3N0bmFtZSA9IHN0YXRlLmdldEhvc3RuYW1lKCk7XG4gICAgdGhhdC5wb3J0ID0gc3RhdGUuZ2V0UG9ydCgpO1xuICAgIHRoYXQucGF0aG5hbWUgPSBzdGF0ZS5nZXRQYXRobmFtZSgpO1xuICAgIHRoYXQuc2VhcmNoID0gc3RhdGUuZ2V0U2VhcmNoKCk7XG4gICAgdGhhdC5zZWFyY2hQYXJhbXMgPSBzdGF0ZS5nZXRTZWFyY2hQYXJhbXMoKTtcbiAgICB0aGF0Lmhhc2ggPSBzdGF0ZS5nZXRIYXNoKCk7XG4gIH1cbn07XG5cbnZhciBVUkxQcm90b3R5cGUgPSBVUkxDb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG5cbnZhciBhY2Nlc3NvckRlc2NyaXB0b3IgPSBmdW5jdGlvbiAoZ2V0dGVyLCBzZXR0ZXIpIHtcbiAgcmV0dXJuIHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBnZXRJbnRlcm5hbFVSTFN0YXRlKHRoaXMpW2dldHRlcl0oKTtcbiAgICB9LFxuICAgIHNldDogc2V0dGVyICYmIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGdldEludGVybmFsVVJMU3RhdGUodGhpcylbc2V0dGVyXSh2YWx1ZSk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9O1xufTtcblxuaWYgKERFU0NSSVBUT1JTKSB7XG4gIC8vIGBVUkwucHJvdG90eXBlLmhyZWZgIGFjY2Vzc29ycyBwYWlyXG4gIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybC1ocmVmXG4gIGRlZmluZUJ1aWx0SW5BY2Nlc3NvcihVUkxQcm90b3R5cGUsICdocmVmJywgYWNjZXNzb3JEZXNjcmlwdG9yKCdzZXJpYWxpemUnLCAnc2V0SHJlZicpKTtcbiAgLy8gYFVSTC5wcm90b3R5cGUub3JpZ2luYCBnZXR0ZXJcbiAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsLW9yaWdpblxuICBkZWZpbmVCdWlsdEluQWNjZXNzb3IoVVJMUHJvdG90eXBlLCAnb3JpZ2luJywgYWNjZXNzb3JEZXNjcmlwdG9yKCdnZXRPcmlnaW4nKSk7XG4gIC8vIGBVUkwucHJvdG90eXBlLnByb3RvY29sYCBhY2Nlc3NvcnMgcGFpclxuICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtcHJvdG9jb2xcbiAgZGVmaW5lQnVpbHRJbkFjY2Vzc29yKFVSTFByb3RvdHlwZSwgJ3Byb3RvY29sJywgYWNjZXNzb3JEZXNjcmlwdG9yKCdnZXRQcm90b2NvbCcsICdzZXRQcm90b2NvbCcpKTtcbiAgLy8gYFVSTC5wcm90b3R5cGUudXNlcm5hbWVgIGFjY2Vzc29ycyBwYWlyXG4gIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybC11c2VybmFtZVxuICBkZWZpbmVCdWlsdEluQWNjZXNzb3IoVVJMUHJvdG90eXBlLCAndXNlcm5hbWUnLCBhY2Nlc3NvckRlc2NyaXB0b3IoJ2dldFVzZXJuYW1lJywgJ3NldFVzZXJuYW1lJykpO1xuICAvLyBgVVJMLnByb3RvdHlwZS5wYXNzd29yZGAgYWNjZXNzb3JzIHBhaXJcbiAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsLXBhc3N3b3JkXG4gIGRlZmluZUJ1aWx0SW5BY2Nlc3NvcihVUkxQcm90b3R5cGUsICdwYXNzd29yZCcsIGFjY2Vzc29yRGVzY3JpcHRvcignZ2V0UGFzc3dvcmQnLCAnc2V0UGFzc3dvcmQnKSk7XG4gIC8vIGBVUkwucHJvdG90eXBlLmhvc3RgIGFjY2Vzc29ycyBwYWlyXG4gIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybC1ob3N0XG4gIGRlZmluZUJ1aWx0SW5BY2Nlc3NvcihVUkxQcm90b3R5cGUsICdob3N0JywgYWNjZXNzb3JEZXNjcmlwdG9yKCdnZXRIb3N0JywgJ3NldEhvc3QnKSk7XG4gIC8vIGBVUkwucHJvdG90eXBlLmhvc3RuYW1lYCBhY2Nlc3NvcnMgcGFpclxuICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtaG9zdG5hbWVcbiAgZGVmaW5lQnVpbHRJbkFjY2Vzc29yKFVSTFByb3RvdHlwZSwgJ2hvc3RuYW1lJywgYWNjZXNzb3JEZXNjcmlwdG9yKCdnZXRIb3N0bmFtZScsICdzZXRIb3N0bmFtZScpKTtcbiAgLy8gYFVSTC5wcm90b3R5cGUucG9ydGAgYWNjZXNzb3JzIHBhaXJcbiAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsLXBvcnRcbiAgZGVmaW5lQnVpbHRJbkFjY2Vzc29yKFVSTFByb3RvdHlwZSwgJ3BvcnQnLCBhY2Nlc3NvckRlc2NyaXB0b3IoJ2dldFBvcnQnLCAnc2V0UG9ydCcpKTtcbiAgLy8gYFVSTC5wcm90b3R5cGUucGF0aG5hbWVgIGFjY2Vzc29ycyBwYWlyXG4gIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybC1wYXRobmFtZVxuICBkZWZpbmVCdWlsdEluQWNjZXNzb3IoVVJMUHJvdG90eXBlLCAncGF0aG5hbWUnLCBhY2Nlc3NvckRlc2NyaXB0b3IoJ2dldFBhdGhuYW1lJywgJ3NldFBhdGhuYW1lJykpO1xuICAvLyBgVVJMLnByb3RvdHlwZS5zZWFyY2hgIGFjY2Vzc29ycyBwYWlyXG4gIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybC1zZWFyY2hcbiAgZGVmaW5lQnVpbHRJbkFjY2Vzc29yKFVSTFByb3RvdHlwZSwgJ3NlYXJjaCcsIGFjY2Vzc29yRGVzY3JpcHRvcignZ2V0U2VhcmNoJywgJ3NldFNlYXJjaCcpKTtcbiAgLy8gYFVSTC5wcm90b3R5cGUuc2VhcmNoUGFyYW1zYCBnZXR0ZXJcbiAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsLXNlYXJjaHBhcmFtc1xuICBkZWZpbmVCdWlsdEluQWNjZXNzb3IoVVJMUHJvdG90eXBlLCAnc2VhcmNoUGFyYW1zJywgYWNjZXNzb3JEZXNjcmlwdG9yKCdnZXRTZWFyY2hQYXJhbXMnKSk7XG4gIC8vIGBVUkwucHJvdG90eXBlLmhhc2hgIGFjY2Vzc29ycyBwYWlyXG4gIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybC1oYXNoXG4gIGRlZmluZUJ1aWx0SW5BY2Nlc3NvcihVUkxQcm90b3R5cGUsICdoYXNoJywgYWNjZXNzb3JEZXNjcmlwdG9yKCdnZXRIYXNoJywgJ3NldEhhc2gnKSk7XG59XG5cbi8vIGBVUkwucHJvdG90eXBlLnRvSlNPTmAgbWV0aG9kXG4vLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtdG9qc29uXG5kZWZpbmVCdWlsdEluKFVSTFByb3RvdHlwZSwgJ3RvSlNPTicsIGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgcmV0dXJuIGdldEludGVybmFsVVJMU3RhdGUodGhpcykuc2VyaWFsaXplKCk7XG59LCB7IGVudW1lcmFibGU6IHRydWUgfSk7XG5cbi8vIGBVUkwucHJvdG90eXBlLnRvU3RyaW5nYCBtZXRob2Rcbi8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jVVJMLXN0cmluZ2lmaWNhdGlvbi1iZWhhdmlvclxuZGVmaW5lQnVpbHRJbihVUkxQcm90b3R5cGUsICd0b1N0cmluZycsIGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICByZXR1cm4gZ2V0SW50ZXJuYWxVUkxTdGF0ZSh0aGlzKS5zZXJpYWxpemUoKTtcbn0sIHsgZW51bWVyYWJsZTogdHJ1ZSB9KTtcblxuaWYgKE5hdGl2ZVVSTCkge1xuICB2YXIgbmF0aXZlQ3JlYXRlT2JqZWN0VVJMID0gTmF0aXZlVVJMLmNyZWF0ZU9iamVjdFVSTDtcbiAgdmFyIG5hdGl2ZVJldm9rZU9iamVjdFVSTCA9IE5hdGl2ZVVSTC5yZXZva2VPYmplY3RVUkw7XG4gIC8vIGBVUkwuY3JlYXRlT2JqZWN0VVJMYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1VSTC9jcmVhdGVPYmplY3RVUkxcbiAgaWYgKG5hdGl2ZUNyZWF0ZU9iamVjdFVSTCkgZGVmaW5lQnVpbHRJbihVUkxDb25zdHJ1Y3RvciwgJ2NyZWF0ZU9iamVjdFVSTCcsIGJpbmQobmF0aXZlQ3JlYXRlT2JqZWN0VVJMLCBOYXRpdmVVUkwpKTtcbiAgLy8gYFVSTC5yZXZva2VPYmplY3RVUkxgIG1ldGhvZFxuICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvVVJML3Jldm9rZU9iamVjdFVSTFxuICBpZiAobmF0aXZlUmV2b2tlT2JqZWN0VVJMKSBkZWZpbmVCdWlsdEluKFVSTENvbnN0cnVjdG9yLCAncmV2b2tlT2JqZWN0VVJMJywgYmluZChuYXRpdmVSZXZva2VPYmplY3RVUkwsIE5hdGl2ZVVSTCkpO1xufVxuXG5zZXRUb1N0cmluZ1RhZyhVUkxDb25zdHJ1Y3RvciwgJ1VSTCcpO1xuXG4kKHsgZ2xvYmFsOiB0cnVlLCBjb25zdHJ1Y3RvcjogdHJ1ZSwgZm9yY2VkOiAhVVNFX05BVElWRV9VUkwsIHNoYW06ICFERVNDUklQVE9SUyB9LCB7XG4gIFVSTDogVVJMQ29uc3RydWN0b3Jcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gVE9ETzogUmVtb3ZlIHRoaXMgbW9kdWxlIGZyb20gYGNvcmUtanNANGAgc2luY2UgaXQncyByZXBsYWNlZCB0byBtb2R1bGUgYmVsb3dcbnJlcXVpcmUoJy4uL21vZHVsZXMvd2ViLnVybC5jb25zdHJ1Y3RvcicpO1xuIiwiLy8gSW1wb3J0c1xudmFyIF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpO1xuZXhwb3J0cyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhmYWxzZSk7XG4vLyBNb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIkBjaGFyc2V0IFxcXCJVVEYtOFxcXCI7XFxuLm5vLWJvcmRlciB7XFxuICBib3JkZXI6IG5vbmU7XFxuICAvKiDlj6/pgInnmoTmoLflvI/vvIzku6XljrvpmaTnhKbngrnml7bnmoTovrnmoYbvvIjlpoLmnpzpnIDopoHnmoTor53vvIkgKi9cXG4gIG91dGxpbmU6IG5vbmU7XFxuICB3aWR0aDogbm9uZTtcXG4gIGhlaWdodDogbm9uZTtcXG4gIHJlc2l6ZTogbm9uZTtcXG59XFxuLmNvbnRlbnQge1xcbiAgd2lkdGg6IDEwMCU7XFxuICBoZWlnaHQ6IGNhbGMoMTAwdmggLSA1NXB4KTtcXG4gIG92ZXJmbG93LXk6IGF1dG87XFxuICBvdmVyZmxvdy14OiBoaWRkZW47XFxufVxcbi5jb250ZW50IC5lbF9tYWluX2NvbnRlbnQge1xcbiAgd2lkdGg6IDEwMCU7XFxuICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDNweCk7XFxuICBtYXJnaW46IGF1dG87XFxufVxcbi5jb250ZW50IC5lbF9tYWluX2NvbnRlbnQgLm1haW5fY29udGVudF9oZWFkZXIge1xcbiAgd2lkdGg6IDEwMCU7XFxuICBoZWlnaHQ6IDUwcHg7XFxuICBib3JkZXItcmFkaXVzOiA1cHg7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjN2RlMGJkO1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGZvbnQtc2l6ZTogMTZweDtcXG59XFxuLmNvbnRlbnQgLmVsX21haW5fY29udGVudCAubWFpbl9jb250ZW50X2NlbnRlciB7XFxuICB3aWR0aDogMTAwJTtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIGhlaWdodDogY2FsYygxMDAlIC0gNzBweCk7XFxuICBtYXJnaW46IDEwcHggMHB4O1xcbiAgb3ZlcmZsb3cteTogYXV0bztcXG59XFxuLmNvbnRlbnQgLmVsX21haW5fY29udGVudCAubWFpbl9jb250ZW50X2NlbnRlciAuY2hhdF90aW1lIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGZvbnQtc2l6ZTogMTJweDtcXG59XFxuLmNvbnRlbnQgLmVsX21haW5fY29udGVudCAubWFpbl9jb250ZW50X2NlbnRlciAucXVlc3Rpb24ge1xcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcXG59XFxuLmNvbnRlbnQgLmVsX21haW5fY29udGVudCAubWFpbl9jb250ZW50X2NlbnRlciAuY2hhdF9xdWVzdGlvbiB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjOGNlNDVmO1xcbiAgbWFyZ2luLXJpZ2h0OiA1cHg7XFxuICBjb2xvcjogI2ZmZmZmZjtcXG4gIGZvbnQtc2l6ZTogMTRweDtcXG59XFxuLmNvbnRlbnQgLmVsX21haW5fY29udGVudCAubWFpbl9jb250ZW50X2NlbnRlciAuY2hhdF9hbnN3ZXIge1xcbiAgbWF4LXdpZHRoOiA2MCU7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmM2Y1O1xcbiAgbWFyZ2luLWxlZnQ6IDVweDtcXG4gIHBhZGRpbmc6IDVweCAxMHB4IDEwcHggMTBweDtcXG4gIGJvcmRlci1yYWRpdXM6IDJweDtcXG4gIGZvbnQtc2l6ZTogMTRweDtcXG59XFxuLmNvbnRlbnQgLmVsX21haW5fY29udGVudCAubWFpbl9jb250ZW50X2NlbnRlciAuY2hhdF9hbnN3ZXIgcCB7XFxuICBmb250LXNpemU6IDE0cHg7XFxuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xcbn1cXG4uY29udGVudCAuZWxfbWFpbl9jb250ZW50IC5tYWluX2NvbnRlbnRfY2VudGVyIC5jaGF0X2Fuc3dlciAuY2hhdF9hbnN3ZXJfY29udGVudCB7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogYXV0bztcXG4gIHBhZGRpbmc6IDVweCAwO1xcbiAgY29sb3I6ICM2NDkyZmY7XFxufVxcbi5jb250ZW50IC5lbF9tYWluX2NvbnRlbnQgLm1haW5fY29udGVudF9jZW50ZXIgLmNoYXRfYW5zd2VyIC5jaGF0X2Fuc3dlcl9jb250ZW50IC53b3JkcyB7XFxuICBmb250LXNpemU6IDEzcHg7XFxuICBsaW5lLWhlaWdodDogMThweDtcXG4gIHBhZGRpbmctbGVmdDogMjZweDtcXG4gIGNvbG9yOiAjNjY2O1xcbn1cXG4uY29udGVudCAuZWxfbWFpbl9jb250ZW50IC5tYWluX2NvbnRlbnRfY2VudGVyIC5jaGF0X2Fuc3dlciAubG9hZGluZy1pY29uIHtcXG4gIGJvcmRlcjogMnB4IHNvbGlkICNkZGQ7XFxuICAvKiBMaWdodCBncmV5IGJhY2tncm91bmQgKi9cXG4gIGJvcmRlci10b3A6IDJweCBzb2xpZCAjMzQ5OGRiO1xcbiAgLyogQmx1ZSBiYWNrZ3JvdW5kIGZvciB0aGUgdG9wIGhhbGYgKi9cXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcXG4gIHdpZHRoOiAxNnB4O1xcbiAgaGVpZ2h0OiAxNnB4O1xcbiAgLXdlYmtpdC1hbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xcbiAgICAgICAgICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xcbiAgZmxvYXQ6IGxlZnQ7XFxufVxcbkAtd2Via2l0LWtleWZyYW1lcyBzcGluIHtcXG50byB7XFxuICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7XFxufVxcbn1cXG5Aa2V5ZnJhbWVzIHNwaW4ge1xcbnRvIHtcXG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTtcXG59XFxufVxcbi5jb250ZW50IC5lbF9tYWluX2NvbnRlbnQgLm1haW5fY29udGVudF9jZW50ZXIgLmNoYXQge1xcbiAgd2lkdGg6IDk4JTtcXG4gIG1hcmdpbjogMTBweCBhdXRvO1xcbiAgZGlzcGxheTogZmxleDtcXG59XFxuLmNvbnRlbnQgLmVsX21haW5fY29udGVudCAubWFpbl9jb250ZW50X2NlbnRlciAuY2hhdF9jb21tb24ge1xcbiAgbWF4LXdpZHRoOiA0MCU7XFxuICBwYWRkaW5nOiAycHggNXB4O1xcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xcbiAgd29yZC1icmVhazogYnJlYWstYWxsO1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxufVxcbi5jb250ZW50IC5lbF9tYWluX2NvbnRlbnQgLm1haW5fY29udGVudF9jZW50ZXIgLmF2YXRhciB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDA5ZWZmO1xcbn1cXG4uY29udGVudCAuZWxfbWFpbl9jb250ZW50IC5tYWluX2NvbnRlbnRfY2VudGVyIC5tZSB7XFxuICBmb250LXNpemU6IDE0cHg7XFxuICBjb2xvcjogI2ZmZmZmZjtcXG59XFxuLmNvbnRlbnQgLmVsX21haW5fY29udGVudCAubWFpbl9jb250ZW50X2Zvb3RlciB7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogNTBweDtcXG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZTRlN2VkO1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XFxuICBiYWNrZ3JvdW5kOiAjZjVmNWY1O1xcbn1cXG4uY29udGVudCAuZWxfbWFpbl9jb250ZW50IC5tYWluX2NvbnRlbnRfZm9vdGVyIC5lbC1pY29uLW1pY3JvcGhvbmUge1xcbiAgZm9udC1zaXplOiAyOHB4O1xcbiAgY29sb3I6ICM2NDkyZmY7XFxuICBtYXJnaW4tbGVmdDogMTVweDtcXG59XFxuLmNvbnRlbnQgLmVsX21haW5fY29udGVudCAubWFpbl9jb250ZW50X2Zvb3RlciAuZWwtaWNvbi10dXJuLW9mZi1taWNyb3Bob25lIHtcXG4gIGZvbnQtc2l6ZTogMjhweDtcXG4gIG1hcmdpbi1sZWZ0OiAxNXB4O1xcbn1cXG4uY29udGVudCAuZWxfbWFpbl9jb250ZW50IC5tYWluX2NvbnRlbnRfZm9vdGVyIC5pbnB1dF9ib3gge1xcbiAgd2lkdGg6IGNhbGMoMTAwJSAtIDEzMHB4KTtcXG4gIGhlaWdodDogNTBweDtcXG4gIGZsb2F0OiBsZWZ0O1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG59XFxuLmNvbnRlbnQgLmVsX21haW5fY29udGVudCAubWFpbl9jb250ZW50X2Zvb3RlciAuaW5wdXRfYm94IC5jaGF0LWlucHV0IHtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAzNHB4O1xcbiAgbGluZS1oZWlnaHQ6IDI0cHg7XFxuICBmb250LXNpemU6IDE0cHg7XFxuICBwYWRkaW5nOiAzcHggOHB4O1xcbiAgY29sb3I6ICM2NjY7XFxuICBtYXJnaW4tbGVmdDogNXB4O1xcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xcbn1cXG4uY29udGVudCAuZWxfbWFpbl9jb250ZW50IC5tYWluX2NvbnRlbnRfZm9vdGVyIC5pbnB1dF9ib3ggLmNoYXQtZGl2IHtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiA0MHB4O1xcbiAgbGluZS1oZWlnaHQ6IDQwcHg7XFxuICBmb250LXNpemU6IDE0cHg7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICBjb2xvcjogIzY2NjtcXG4gIG1hcmdpbi1sZWZ0OiA1cHg7XFxuICBib3JkZXItcmFkaXVzOiA1cHg7XFxuICBiYWNrZ3JvdW5kOiAjZmZmO1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcXG4gICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XFxuICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lO1xcbiAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcXG59XFxuLmNvbnRlbnQgLmVsX21haW5fY29udGVudCAubWFpbl9jb250ZW50X2Zvb3RlciAuaW5wdXRfYm94IC5jaGF0LWRpdiAuY2hhdC1tYXNrIHtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAyNHB4O1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgdG9wOiAwO1xcbiAgbGVmdDogMDtcXG4gIGJvcmRlci1yYWRpdXM6IDVweDtcXG4gIHotaW5kZXg6IDk5OTk7XFxuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xcbiAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcXG4gICAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7XFxuICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xcbn1cXG4uY29udGVudCAuZWxfbWFpbl9jb250ZW50IC5tYWluX2NvbnRlbnRfZm9vdGVyIC5pbnB1dF9ib3ggLmNoYXQtZGl2LWFjdGl2ZSB7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogNDBweDtcXG4gIGxpbmUtaGVpZ2h0OiA0MHB4O1xcbiAgZm9udC1zaXplOiAxNHB4O1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgY29sb3I6ICNmZmY7XFxuICBtYXJnaW4tbGVmdDogNXB4O1xcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xcbiAgYmFja2dyb3VuZDogIzQwOWVmZjtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XFxuICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xcbiAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTtcXG4gICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XFxuICAtd2Via2l0LWFuaW1hdGlvbjogYmxpbmsgMXMgbGluZWFyIGluZmluaXRlO1xcbiAgICAgICAgICBhbmltYXRpb246IGJsaW5rIDFzIGxpbmVhciBpbmZpbml0ZTtcXG59XFxuLmNvbnRlbnQgLmVsX21haW5fY29udGVudCAubWFpbl9jb250ZW50X2Zvb3RlciAuYnRuX2JveCB7XFxuICB3aWR0aDogOTBweDtcXG4gIGhlaWdodDogNTBweDtcXG4gIGZsb2F0OiBsZWZ0O1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG59XCIsIFwiXCJdKTtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbiIsIi8vIEltcG9ydHNcbnZhciBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcbmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuZWwtYXZhdGFyIHtcXG4gIHdpZHRoOiAzMHB4O1xcbiAgaGVpZ2h0OiAzMHB4O1xcbiAgbGluZS1oZWlnaHQ6IDMwcHg7XFxufVwiLCBcIlwiXSk7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENvbnNvbGVMb2dnaW5nTGlzdGVuZXIgfSBmcm9tIFwiLi9zcmMvY29tbW9uLmJyb3dzZXIvRXhwb3J0c1wiO1xuaW1wb3J0IHsgRXZlbnRzIH0gZnJvbSBcIi4vc3JjL2NvbW1vbi9FeHBvcnRzXCI7XG4vLyBDb21tb24uU3RvcmFnZS5TZXRMb2NhbFN0b3JhZ2UobmV3IENvbW1vbi5Ccm93c2VyLkxvY2FsU3RvcmFnZSgpKTtcbi8vIENvbW1vbi5TdG9yYWdlLlNldFNlc3Npb25TdG9yYWdlKG5ldyBDb21tb24uQnJvd3Nlci5TZXNzaW9uU3RvcmFnZSgpKTtcbkV2ZW50cy5pbnN0YW5jZS5hdHRhY2hDb25zb2xlTGlzdGVuZXIobmV3IENvbnNvbGVMb2dnaW5nTGlzdGVuZXIoKSk7XG4vLyBTcGVlY2ggU0RLIEFQSVxuZXhwb3J0ICogZnJvbSBcIi4vc3JjL3Nkay9FeHBvcnRzXCI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1pY3Jvc29mdC5jb2duaXRpdmVzZXJ2aWNlcy5zcGVlY2guc2RrLmpzLm1hcFxuIiwiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L29yZGVyICovXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0ICogYXMgdGxzIGZyb20gXCJ0bHNcIjtcbmltcG9ydCAqIGFzIG9jc3AgZnJvbSBcIi4uLy4uL2V4dGVybmFsL29jc3Avb2NzcFwiO1xuaW1wb3J0IHsgRXZlbnRzLCBPQ1NQQ2FjaGVFbnRyeUV4cGlyZWRFdmVudCwgT0NTUENhY2hlRW50cnlOZWVkc1JlZnJlc2hFdmVudCwgT0NTUENhY2hlRmV0Y2hFcnJvckV2ZW50LCBPQ1NQQ2FjaGVIaXRFdmVudCwgT0NTUENhY2hlTWlzc0V2ZW50LCBPQ1NQQ2FjaGVVcGRhdGVDb21wbGV0ZUV2ZW50LCBPQ1NQQ2FjaGVVcGRhdGVOZWVkZWRFdmVudCwgT0NTUERpc2tDYWNoZUhpdEV2ZW50LCBPQ1NQRGlza0NhY2hlU3RvcmVFdmVudCwgT0NTUE1lbW9yeUNhY2hlSGl0RXZlbnQsIE9DU1BNZW1vcnlDYWNoZVN0b3JlRXZlbnQsIE9DU1BSZXNwb25zZVJldHJpZXZlZEV2ZW50LCBPQ1NQU3RhcGxlUmVjZWl2ZWRFdmVudCwgT0NTUFZlcmlmaWNhdGlvbkZhaWxlZEV2ZW50LCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IEFnZW50IGZyb20gXCJhZ2VudC1iYXNlXCI7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgQ2FjaGUgZnJvbSBcImFzeW5jLWRpc2stY2FjaGVcIjtcbmltcG9ydCBIdHRwc1Byb3h5QWdlbnQgZnJvbSBcImh0dHBzLXByb3h5LWFnZW50XCI7XG5pbXBvcnQgKiBhcyBuZXQgZnJvbSBcIm5ldFwiO1xuaW1wb3J0IHsgT0NTUENhY2hlVXBkYXRlRXJyb3JFdmVudCB9IGZyb20gXCIuLi9jb21tb24vT0NTUEV2ZW50c1wiO1xuZXhwb3J0IGNsYXNzIENlcnRDaGVja0FnZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm94eUluZm8pIHtcbiAgICAgICAgaWYgKCEhcHJveHlJbmZvKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZQcm94eUluZm8gPSBwcm94eUluZm87XG4gICAgICAgIH1cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGlzIGhlcmUgdG8gYWxsb3cgdGVzdHMgdG8gc2V0IHRoZSBlbnYgdmFyaWFibGUgYmVmb3JlIHRoZSBjYWNoZSBpcyBjb25zdHJ1Y3RlZC5cbiAgICAgICAgaWYgKCFDZXJ0Q2hlY2tBZ2VudC5wcml2RGlza0NhY2hlKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50LCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWNhbGxcbiAgICAgICAgICAgIENlcnRDaGVja0FnZW50LnByaXZEaXNrQ2FjaGUgPSBuZXcgQ2FjaGUoXCJtaWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay1jYWNoZVwiLCB7IHN1cHBvcnRCdWZmZXI6IHRydWUsIGxvY2F0aW9uOiAodHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgISFwcm9jZXNzLmVudi5TUEVFQ0hfT0NTUF9DQUNIRV9ST09UKSA/IHByb2Nlc3MuZW52LlNQRUVDSF9PQ1NQX0NBQ0hFX1JPT1QgOiB1bmRlZmluZWQgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVGVzdCBob29rIHRvIGZvcmNlIHRoZSBkaXNrIGNhY2hlIHRvIGJlIHJlY3JlYXRlZC5cbiAgICBzdGF0aWMgZm9yY2VSZWluaXREaXNrQ2FjaGUoKSB7XG4gICAgICAgIENlcnRDaGVja0FnZW50LnByaXZEaXNrQ2FjaGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIENlcnRDaGVja0FnZW50LnByaXZNZW1DYWNoZSA9IHt9O1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgR2V0QWdlbnQoZGlzYWJsZVN0YXBsaW5nKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvdW5ib3VuZC1tZXRob2RcbiAgICAgICAgY29uc3QgYWdlbnQgPSBuZXcgQWdlbnQuQWdlbnQodGhpcy5DcmVhdGVDb25uZWN0aW9uKTtcbiAgICAgICAgaWYgKHRoaXMucHJpdlByb3h5SW5mbyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLnByaXZQcm94eUluZm8uSG9zdE5hbWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgdGhpcy5wcml2UHJveHlJbmZvLlBvcnQgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBwcm94eU5hbWUgPSBcInByaXZQcm94eUluZm9cIjtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgICAgIGFnZW50W3Byb3h5TmFtZV0gPSB0aGlzLnByaXZQcm94eUluZm87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFnZW50O1xuICAgIH1cbiAgICBzdGF0aWMgR2V0UHJveHlBZ2VudChwcm94eUluZm8pIHtcbiAgICAgICAgY29uc3QgaHR0cFByb3h5T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGhvc3Q6IHByb3h5SW5mby5Ib3N0TmFtZSxcbiAgICAgICAgICAgIHBvcnQ6IHByb3h5SW5mby5Qb3J0LFxuICAgICAgICB9O1xuICAgICAgICBpZiAoISFwcm94eUluZm8uVXNlck5hbWUpIHtcbiAgICAgICAgICAgIGh0dHBQcm94eU9wdGlvbnMuaGVhZGVycyA9IHtcbiAgICAgICAgICAgICAgICBcIlByb3h5LUF1dGhlbnRpY2F0aW9uXCI6IFwiQmFzaWMgXCIgKyBuZXcgQnVmZmVyKGAke3Byb3h5SW5mby5Vc2VyTmFtZX06JHsocHJveHlJbmZvLlBhc3N3b3JkID09PSB1bmRlZmluZWQpID8gXCJcIiA6IHByb3h5SW5mby5QYXNzd29yZH1gKS50b1N0cmluZyhcImJhc2U2NFwiKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBodHRwUHJveHlPcHRpb25zLmhlYWRlcnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBodHRwUHJveHlPcHRpb25zLmhlYWRlcnMucmVxdWVzdE9DU1AgPSBcInRydWVcIjtcbiAgICAgICAgY29uc3QgaHR0cFByb3h5QWdlbnQgPSBuZXcgSHR0cHNQcm94eUFnZW50KGh0dHBQcm94eU9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gaHR0cFByb3h5QWdlbnQ7XG4gICAgfVxuICAgIHN0YXRpYyBPQ1NQQ2hlY2soc29ja2V0UHJvbWlzZSwgcHJveHlJbmZvKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBsZXQgb2NzcFJlcXVlc3Q7XG4gICAgICAgICAgICBsZXQgc3RhcGxpbmc7XG4gICAgICAgICAgICBsZXQgcmVzb2x2ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IHNvY2tldCA9IHlpZWxkIHNvY2tldFByb21pc2U7XG4gICAgICAgICAgICBzb2NrZXQuY29yaygpO1xuICAgICAgICAgICAgY29uc3QgdGxzU29ja2V0ID0gc29ja2V0O1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBzb2NrZXQub24oXCJPQ1NQUmVzcG9uc2VcIiwgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBPQ1NQU3RhcGxlUmVjZWl2ZWRFdmVudCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXBsaW5nID0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNvY2tldC5vbihcImVycm9yXCIsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc29sdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb2NrZXQuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbWlzdXNlZC1wcm9taXNlcywgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LWZ1bmN0aW9uLXJldHVybi10eXBlXG4gICAgICAgICAgICAgICAgdGxzU29ja2V0Lm9uKFwic2VjdXJlXCIsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVlciA9IHRsc1NvY2tldC5nZXRQZWVyQ2VydGlmaWNhdGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc3N1ZXIgPSB5aWVsZCB0aGlzLkdldElzc3VlcihwZWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGFsd2F5cyBuZWVkIGEgcmVxdWVzdCB0byB2ZXJpZnkgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgb2NzcFJlcXVlc3QgPSBvY3NwLnJlcXVlc3QuZ2VuZXJhdGUocGVlci5yYXcsIGlzc3Vlci5yYXcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRG8gd2UgaGF2ZSBhIHJlc3VsdCBmb3IgdGhpcyBjZXJ0aWZpY2F0ZSBpbiBvdXIgbWVtb3J5IGNhY2hlP1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2lnID0gb2NzcFJlcXVlc3QuaWQudG9TdHJpbmcoXCJoZXhcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTdGFwbGVkIHJlc3BvbnNlIHRydW1wcyBjYWNoZWQgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YXBsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IHlpZWxkIENlcnRDaGVja0FnZW50LkdldFJlc3BvbnNlRnJvbUNhY2hlKHNpZywgb2NzcFJlcXVlc3QsIHByb3h5SW5mbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcGxpbmcgPSBjYWNoZUVudHJ5O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5WZXJpZnlPQ1NQUmVzcG9uc2Uoc3RhcGxpbmcsIG9jc3BSZXF1ZXN0LCBwcm94eUluZm8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc29ja2V0LnVuY29yaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShzb2NrZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb2NrZXQuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgR2V0SXNzdWVyKHBlZXIpIHtcbiAgICAgICAgaWYgKHBlZXIuaXNzdWVyQ2VydGlmaWNhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocGVlci5pc3N1ZXJDZXJ0aWZpY2F0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9jc3BBZ2VudCA9IG5ldyBvY3NwLkFnZW50KHt9KTtcbiAgICAgICAgICAgIG9jc3BBZ2VudC5mZXRjaElzc3VlcihwZWVyLCBudWxsLCAoZXJyb3IsIHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEhZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIEdldFJlc3BvbnNlRnJvbUNhY2hlKHNpZ25hdHVyZSwgb2NzcFJlcXVlc3QsIHByb3h5SW5mbykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgbGV0IGNhY2hlZFJlc3BvbnNlID0gQ2VydENoZWNrQWdlbnQucHJpdk1lbUNhY2hlW3NpZ25hdHVyZV07XG4gICAgICAgICAgICBpZiAoISFjYWNoZWRSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgT0NTUE1lbW9yeUNhY2hlSGl0RXZlbnQoc2lnbmF0dXJlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEbyB3ZSBoYXZlIGEgcmVzdWx0IGZvciB0aGlzIGNlcnRpZmljYXRlIG9uIGRpc2sgaW4gJVRNUCU/XG4gICAgICAgICAgICBpZiAoIWNhY2hlZFJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2VzcywgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc2tDYWNoZVJlc3BvbnNlID0geWllbGQgQ2VydENoZWNrQWdlbnQucHJpdkRpc2tDYWNoZS5nZXQoc2lnbmF0dXJlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZGlza0NhY2hlUmVzcG9uc2UuaXNDYWNoZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENlcnRDaGVja0FnZW50Lm9uRXZlbnQobmV3IE9DU1BEaXNrQ2FjaGVIaXRFdmVudChzaWduYXR1cmUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIENlcnRDaGVja0FnZW50LlN0b3JlTWVtb3J5Q2FjaGVFbnRyeShzaWduYXR1cmUsIGRpc2tDYWNoZVJlc3BvbnNlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlZFJlc3BvbnNlID0gZGlza0NhY2hlUmVzcG9uc2UudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlZFJlc3BvbnNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNhY2hlZFJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFJlc3BvbnNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZWRPY3NwUmVzcG9uc2UgPSBvY3NwLnV0aWxzLnBhcnNlUmVzcG9uc2UoY2FjaGVkUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlVmFsdWUgPSBjYWNoZWRPY3NwUmVzcG9uc2UudmFsdWU7XG4gICAgICAgICAgICAgICAgY29uc3QgdGJzRGF0YSA9IHJlc3BvbnNlVmFsdWUudGJzUmVzcG9uc2VEYXRhO1xuICAgICAgICAgICAgICAgIGlmICh0YnNEYXRhLnJlc3BvbnNlcy5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgT0NTUENhY2hlRmV0Y2hFcnJvckV2ZW50KHNpZ25hdHVyZSwgXCJOb3QgZW5vdWdoIGRhdGEgaW4gY2FjaGVkIHJlc3BvbnNlXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZWRTdGFydFRpbWUgPSB0YnNEYXRhLnJlc3BvbnNlc1swXS50aGlzVXBkYXRlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlZE5leHRUaW1lID0gdGJzRGF0YS5yZXNwb25zZXNbMF0ubmV4dFVwZGF0ZTtcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVkTmV4dFRpbWUgPCAoRGF0ZS5ub3coKSArIHRoaXMudGVzdFRpbWVPZmZzZXQgLSA2MDAwMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FjaGVkIGVudHJ5IGhhcyBleHBpcmVkLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IE9DU1BDYWNoZUVudHJ5RXhwaXJlZEV2ZW50KHNpZ25hdHVyZSwgY2FjaGVkTmV4dFRpbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVkUmVzcG9uc2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UncmUgd2l0aGluIG9uZSBkYXkgb2YgdGhlIG5leHQgdXBkYXRlLCBvciA1MCUgb2YgdGhlIHdheSB0aHJvdWdoIHRoZSB2YWxpZGl0eSBwZXJpb2QsXG4gICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgYW4gdXBkYXRlIHRvIHRoZSBjYWNoZS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWluVXBkYXRlID0gTWF0aC5taW4oMjQgKiA2MCAqIDYwICogMTAwMCwgKGNhY2hlZE5leHRUaW1lIC0gY2FjaGVkU3RhcnRUaW1lKSAvIDIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGNhY2hlZE5leHRUaW1lIC0gKERhdGUubm93KCkgKyB0aGlzLnRlc3RUaW1lT2Zmc2V0KSkgPCBtaW5VcGRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgT0NTUENhY2hlRW50cnlOZWVkc1JlZnJlc2hFdmVudChzaWduYXR1cmUsIGNhY2hlZFN0YXJ0VGltZSwgY2FjaGVkTmV4dFRpbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuVXBkYXRlQ2FjaGUob2NzcFJlcXVlc3QsIHByb3h5SW5mbykuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2VsbCwgbm90IG11Y2ggd2UgY2FuIGRvIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBPQ1NQQ2FjaGVVcGRhdGVFcnJvckV2ZW50KHNpZ25hdHVyZSwgZXJyb3IudG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IE9DU1BDYWNoZUhpdEV2ZW50KHNpZ25hdHVyZSwgY2FjaGVkU3RhcnRUaW1lLCBjYWNoZWROZXh0VGltZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBPQ1NQQ2FjaGVGZXRjaEVycm9yRXZlbnQoc2lnbmF0dXJlLCBlcnJvcikpO1xuICAgICAgICAgICAgICAgIGNhY2hlZFJlc3BvbnNlID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY2FjaGVkUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IE9DU1BDYWNoZU1pc3NFdmVudChzaWduYXR1cmUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRSZXNwb25zZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBWZXJpZnlPQ1NQUmVzcG9uc2UoY2FjaGVWYWx1ZSwgb2NzcFJlcXVlc3QsIHByb3h5SW5mbykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgbGV0IG9jc3BSZXNwb25zZSA9IGNhY2hlVmFsdWU7XG4gICAgICAgICAgICAvLyBEbyB3ZSBoYXZlIGEgdmFsaWQgcmVzcG9uc2U/XG4gICAgICAgICAgICBpZiAoIW9jc3BSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIG9jc3BSZXNwb25zZSA9IHlpZWxkIENlcnRDaGVja0FnZW50LkdldE9DU1BSZXNwb25zZShvY3NwUmVxdWVzdCwgcHJveHlJbmZvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgb2NzcC52ZXJpZnkoeyByZXF1ZXN0OiBvY3NwUmVxdWVzdCwgcmVzcG9uc2U6IG9jc3BSZXNwb25zZSB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENlcnRDaGVja0FnZW50Lm9uRXZlbnQobmV3IE9DU1BWZXJpZmljYXRpb25GYWlsZWRFdmVudChvY3NwUmVxdWVzdC5pZC50b1N0cmluZyhcImhleFwiKSwgZXJyb3IpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJhZCBDYWNoZWQgVmFsdWU/IE9uZSBtb3JlIHRyeSB3aXRob3V0IHRoZSBjYWNoZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIWNhY2hlVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlZlcmlmeU9DU1BSZXNwb25zZShudWxsLCBvY3NwUmVxdWVzdCwgcHJveHlJbmZvKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2FjaGVWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENlcnRDaGVja0FnZW50LlN0b3JlQ2FjaGVFbnRyeShvY3NwUmVxdWVzdC5pZC50b1N0cmluZyhcImhleFwiKSwgb2NzcFJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgVXBkYXRlQ2FjaGUocmVxLCBwcm94eUluZm8pIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IHJlcS5pZC50b1N0cmluZyhcImhleFwiKTtcbiAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgT0NTUENhY2hlVXBkYXRlTmVlZGVkRXZlbnQoc2lnbmF0dXJlKSk7XG4gICAgICAgICAgICBjb25zdCByYXdSZXNwb25zZSA9IHlpZWxkIHRoaXMuR2V0T0NTUFJlc3BvbnNlKHJlcSwgcHJveHlJbmZvKTtcbiAgICAgICAgICAgIHRoaXMuU3RvcmVDYWNoZUVudHJ5KHNpZ25hdHVyZSwgcmF3UmVzcG9uc2UpO1xuICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBPQ1NQQ2FjaGVVcGRhdGVDb21wbGV0ZUV2ZW50KHJlcS5pZC50b1N0cmluZyhcImhleFwiKSkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIFN0b3JlQ2FjaGVFbnRyeShzaWcsIHJhd1Jlc3BvbnNlKSB7XG4gICAgICAgIHRoaXMuU3RvcmVNZW1vcnlDYWNoZUVudHJ5KHNpZywgcmF3UmVzcG9uc2UpO1xuICAgICAgICB0aGlzLlN0b3JlRGlza0NhY2hlRW50cnkoc2lnLCByYXdSZXNwb25zZSk7XG4gICAgfVxuICAgIHN0YXRpYyBTdG9yZU1lbW9yeUNhY2hlRW50cnkoc2lnLCByYXdSZXNwb25zZSkge1xuICAgICAgICB0aGlzLnByaXZNZW1DYWNoZVtzaWddID0gcmF3UmVzcG9uc2U7XG4gICAgICAgIHRoaXMub25FdmVudChuZXcgT0NTUE1lbW9yeUNhY2hlU3RvcmVFdmVudChzaWcpKTtcbiAgICB9XG4gICAgc3RhdGljIFN0b3JlRGlza0NhY2hlRW50cnkoc2lnLCByYXdSZXNwb25zZSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWNhbGxcbiAgICAgICAgdGhpcy5wcml2RGlza0NhY2hlLnNldChzaWcsIHJhd1Jlc3BvbnNlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgT0NTUERpc2tDYWNoZVN0b3JlRXZlbnQoc2lnKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgR2V0T0NTUFJlc3BvbnNlKHJlcSwgcHJveHlJbmZvKSB7XG4gICAgICAgIGNvbnN0IG9jc3BNZXRob2QgPSBcIjEuMy42LjEuNS41LjcuNDguMVwiO1xuICAgICAgICBsZXQgb3B0aW9ucyA9IHt9O1xuICAgICAgICBpZiAoISFwcm94eUluZm8pIHtcbiAgICAgICAgICAgIGNvbnN0IGFnZW50ID0gQ2VydENoZWNrQWdlbnQuR2V0UHJveHlBZ2VudChwcm94eUluZm8pO1xuICAgICAgICAgICAgb3B0aW9ucy5hZ2VudCA9IGFnZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBvY3NwLnV0aWxzLmdldEF1dGhvcml0eUluZm8ocmVxLmNlcnQsIG9jc3BNZXRob2QsIChlcnJvciwgdXJpKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh1cmkpO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7IGhvc3Q6IHVybC5ob3N0LCBwcm90b2NvbDogdXJsLnByb3RvY29sLCBwb3J0OiB1cmwucG9ydCwgcGF0aDogdXJsLnBhdGhuYW1lLCBob3N0bmFtZTogdXJsLmhvc3QgfSk7XG4gICAgICAgICAgICAgICAgb2NzcC51dGlscy5nZXRSZXNwb25zZShvcHRpb25zLCByZXEuZGF0YSwgKGVycm9yLCByYXcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlcnRJRCA9IHJlcS5jZXJ0SUQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgT0NTUFJlc3BvbnNlUmV0cmlldmVkRXZlbnQoY2VydElELnRvU3RyaW5nKFwiaGV4XCIpKSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmF3KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIG9uRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgRXZlbnRzLmluc3RhbmNlLm9uRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgICBDcmVhdGVDb25uZWN0aW9uKHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZW5hYmxlT0NTUCA9ICh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudi5OT0RFX1RMU19SRUpFQ1RfVU5BVVRIT1JJWkVEICE9PSBcIjBcIiAmJiBwcm9jZXNzLmVudi5TUEVFQ0hfQ09ORFVDVF9PQ1NQX0NIRUNLICE9PSBcIjBcIikgJiYgb3B0aW9ucy5zZWN1cmVFbmRwb2ludDtcbiAgICAgICAgbGV0IHNvY2tldFByb21pc2U7XG4gICAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7XG4gICAgICAgICAgICByZXF1ZXN0T0NTUDogIUNlcnRDaGVja0FnZW50LmZvcmNlRGlzYWJsZU9DU1BTdGFwbGluZyxcbiAgICAgICAgICAgIHNlcnZlcm5hbWU6IG9wdGlvbnMuaG9zdFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2UHJveHlJbmZvKSB7XG4gICAgICAgICAgICBjb25zdCBodHRwUHJveHlBZ2VudCA9IENlcnRDaGVja0FnZW50LkdldFByb3h5QWdlbnQodGhpcy5wcml2UHJveHlJbmZvKTtcbiAgICAgICAgICAgIGNvbnN0IGJhc2VBZ2VudCA9IGh0dHBQcm94eUFnZW50O1xuICAgICAgICAgICAgc29ja2V0UHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBiYXNlQWdlbnQuY2FsbGJhY2socmVxdWVzdCwgb3B0aW9ucywgKGVycm9yLCBzb2NrZXQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHNvY2tldCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCEhb3B0aW9ucy5zZWN1cmVFbmRwb2ludCkge1xuICAgICAgICAgICAgICAgIHNvY2tldFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUodGxzLmNvbm5lY3Qob3B0aW9ucykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc29ja2V0UHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShuZXQuY29ubmVjdChvcHRpb25zKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhZW5hYmxlT0NTUCkge1xuICAgICAgICAgICAgcmV0dXJuIENlcnRDaGVja0FnZW50Lk9DU1BDaGVjayhzb2NrZXRQcm9taXNlLCB0aGlzLnByaXZQcm94eUluZm8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNvY2tldFByb21pc2U7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBUZXN0IGhvb2sgdG8gZW5hYmxlIGZvcmNpbmcgZXhwaXJhdGlvbiAvIHJlZnJlc2ggdG8gaGFwcGVuLlxuQ2VydENoZWNrQWdlbnQudGVzdFRpbWVPZmZzZXQgPSAwO1xuLy8gVGVzdCBob29rIHRvIGRpc2FibGUgc3RhcGxpbmcgZm9yIGNhY2hlIHRlc3RpbmcuXG5DZXJ0Q2hlY2tBZ2VudC5mb3JjZURpc2FibGVPQ1NQU3RhcGxpbmcgPSBmYWxzZTtcbi8vIEFuIGluIG1lbW9yeSBjYWNoZSBmb3IgcmVjaXZlZCByZXNwb25zZXMuXG5DZXJ0Q2hlY2tBZ2VudC5wcml2TWVtQ2FjaGUgPSB7fTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2VydENoZWNrcy5qcy5tYXBcbiIsIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudCAqL1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgKiBhcyBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCB7IExvZ0xldmVsIH0gZnJvbSBcIi4uL3Nkay9Mb2dMZXZlbFwiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4uL3Nkay9Db250cmFjdHNcIjtcbmV4cG9ydCBjbGFzcyBDb25zb2xlTG9nZ2luZ0xpc3RlbmVyIHtcbiAgICBjb25zdHJ1Y3Rvcihsb2dMZXZlbEZpbHRlciA9IExvZ0xldmVsLk5vbmUpIHtcbiAgICAgICAgdGhpcy5wcml2TG9nUGF0aCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wcml2TG9nTGV2ZWxGaWx0ZXIgPSBsb2dMZXZlbEZpbHRlcjtcbiAgICB9XG4gICAgc2V0IGxvZ1BhdGgocGF0aCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChmcy5vcGVuU3luYywgXCJcXG5GaWxlIFN5c3RlbSBhY2Nlc3Mgbm90IGF2YWlsYWJsZVwiKTtcbiAgICAgICAgdGhpcy5wcml2TG9nUGF0aCA9IHBhdGg7XG4gICAgfVxuICAgIG9uRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LmV2ZW50VHlwZSA+PSB0aGlzLnByaXZMb2dMZXZlbEZpbHRlcikge1xuICAgICAgICAgICAgY29uc3QgbG9nID0gdGhpcy50b1N0cmluZyhldmVudCk7XG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZMb2dQYXRoKSB7XG4gICAgICAgICAgICAgICAgZnMud3JpdGVGaWxlU3luYyh0aGlzLnByaXZMb2dQYXRoLCBsb2cgKyBcIlxcblwiLCB7IGZsYWc6IFwiYStcIiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuZXZlbnRUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBMb2dMZXZlbC5EZWJ1ZzpcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1Zyhsb2cpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIExvZ0xldmVsLkluZm86XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhsb2cpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIExvZ0xldmVsLldhcm5pbmc6XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybihsb2cpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIExvZ0xldmVsLkVycm9yOlxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGxvZyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxvZyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHRvU3RyaW5nKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGxvZ0ZyYWdtZW50cyA9IFtcbiAgICAgICAgICAgIGAke2V2ZW50LmV2ZW50VGltZX1gLFxuICAgICAgICAgICAgYCR7ZXZlbnQubmFtZX1gLFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCBlID0gZXZlbnQ7XG4gICAgICAgIGZvciAoY29uc3QgcHJvcCBpbiBlKSB7XG4gICAgICAgICAgICBpZiAocHJvcCAmJiBldmVudC5oYXNPd25Qcm9wZXJ0eShwcm9wKSAmJlxuICAgICAgICAgICAgICAgIHByb3AgIT09IFwiZXZlbnRUaW1lXCIgJiYgcHJvcCAhPT0gXCJldmVudFR5cGVcIiAmJlxuICAgICAgICAgICAgICAgIHByb3AgIT09IFwiZXZlbnRJZFwiICYmIHByb3AgIT09IFwibmFtZVwiICYmXG4gICAgICAgICAgICAgICAgcHJvcCAhPT0gXCJjb25zdHJ1Y3RvclwiKSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZVtwcm9wXTtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWVUb0xvZyA9IFwiPE5VTEw+XCI7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAodmFsdWUpID09PSBcIm51bWJlclwiIHx8IHR5cGVvZiAodmFsdWUpID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvTG9nID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlVG9Mb2cgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbG9nRnJhZ21lbnRzLnB1c2goYCR7cHJvcH06ICR7dmFsdWVUb0xvZ31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbG9nRnJhZ21lbnRzLmpvaW4oXCIgfCBcIik7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db25zb2xlTG9nZ2luZ0xpc3RlbmVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgKiBmcm9tIFwiLi9Db25zb2xlTG9nZ2luZ0xpc3RlbmVyXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9JUmVjb3JkZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL01pY0F1ZGlvU291cmNlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9GaWxlQXVkaW9Tb3VyY2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1BDTVJlY29yZGVyXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9XZWJzb2NrZXRDb25uZWN0aW9uXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9XZWJzb2NrZXRNZXNzYWdlQWRhcHRlclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vUmVwbGF5YWJsZUF1ZGlvTm9kZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vUHJveHlJbmZvXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9SZXN0TWVzc2FnZUFkYXB0ZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1Jlc3RDb25maWdCYXNlXCI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV4cG9ydHMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgY29ubmVjdGl2aXR5LCB0eXBlLCB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IEF1ZGlvU291cmNlRXJyb3JFdmVudCwgQXVkaW9Tb3VyY2VJbml0aWFsaXppbmdFdmVudCwgQXVkaW9Tb3VyY2VPZmZFdmVudCwgQXVkaW9Tb3VyY2VSZWFkeUV2ZW50LCBBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50LCBBdWRpb1N0cmVhbU5vZGVBdHRhY2hpbmdFdmVudCwgQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudCwgQXVkaW9TdHJlYW1Ob2RlRXJyb3JFdmVudCwgQ2h1bmtlZEFycmF5QnVmZmVyU3RyZWFtLCBjcmVhdGVOb0Rhc2hHdWlkLCBEZWZlcnJlZCwgRXZlbnRzLCBFdmVudFNvdXJjZSwgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IEF1ZGlvU3RyZWFtRm9ybWF0IH0gZnJvbSBcIi4uL3Nkay9BdWRpby9BdWRpb1N0cmVhbUZvcm1hdFwiO1xuZXhwb3J0IGNsYXNzIEZpbGVBdWRpb1NvdXJjZSB7XG4gICAgY29uc3RydWN0b3IoZmlsZSwgZmlsZW5hbWUsIGF1ZGlvU291cmNlSWQpIHtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtcyA9IHt9O1xuICAgICAgICB0aGlzLnByaXZIZWFkZXJFbmQgPSA0NDtcbiAgICAgICAgdGhpcy5wcml2SWQgPSBhdWRpb1NvdXJjZUlkID8gYXVkaW9Tb3VyY2VJZCA6IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2RXZlbnRzID0gbmV3IEV2ZW50U291cmNlKCk7XG4gICAgICAgIHRoaXMucHJpdlNvdXJjZSA9IGZpbGU7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBCbG9iICE9PSBcInVuZGVmaW5lZFwiICYmIHRoaXMucHJpdlNvdXJjZSBpbnN0YW5jZW9mIEJsb2IpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkZpbGVuYW1lID0gZmlsZS5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2RmlsZW5hbWUgPSBmaWxlbmFtZSB8fCBcInVua25vd24ud2F2XCI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVhZCB0aGUgaGVhZGVyLlxuICAgICAgICB0aGlzLnByaXZBdWRpb0Zvcm1hdFByb21pc2UgPSB0aGlzLnJlYWRIZWFkZXIoKTtcbiAgICB9XG4gICAgZ2V0IGZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvRm9ybWF0UHJvbWlzZTtcbiAgICB9XG4gICAgZ2V0IGJsb2IoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5wcml2U291cmNlKTtcbiAgICB9XG4gICAgdHVybk9uKCkge1xuICAgICAgICBpZiAodGhpcy5wcml2RmlsZW5hbWUubGFzdEluZGV4T2YoXCIud2F2XCIpICE9PSB0aGlzLnByaXZGaWxlbmFtZS5sZW5ndGggLSA0KSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IHRoaXMucHJpdkZpbGVuYW1lICsgXCIgaXMgbm90IHN1cHBvcnRlZC4gT25seSBXQVZFIGZpbGVzIGFyZSBhbGxvd2VkIGF0IHRoZSBtb21lbnQuXCI7XG4gICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU291cmNlRXJyb3JFdmVudChlcnJvck1zZywgXCJcIikpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yTXNnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU291cmNlSW5pdGlhbGl6aW5nRXZlbnQodGhpcy5wcml2SWQpKTsgLy8gbm8gc3RyZWFtIGlkXG4gICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9Tb3VyY2VSZWFkeUV2ZW50KHRoaXMucHJpdklkKSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJZDtcbiAgICB9XG4gICAgYXR0YWNoKGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGluZ0V2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0geWllbGQgdGhpcy51cGxvYWQoYXVkaW9Ob2RlSWQpO1xuICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgZGV0YWNoOiAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5yZWFkRW5kZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucHJpdlN0cmVhbXNbYXVkaW9Ob2RlSWRdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU3RyZWFtTm9kZURldGFjaGVkRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMudHVybk9mZigpO1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGlkOiAoKSA9PiBhdWRpb05vZGVJZCxcbiAgICAgICAgICAgICAgICByZWFkOiAoKSA9PiBzdHJlYW0ucmVhZCgpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZXRhY2goYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgaWYgKGF1ZGlvTm9kZUlkICYmIHRoaXMucHJpdlN0cmVhbXNbYXVkaW9Ob2RlSWRdKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZTdHJlYW1zW2F1ZGlvTm9kZUlkXS5jbG9zZSgpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMucHJpdlN0cmVhbXNbYXVkaW9Ob2RlSWRdO1xuICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHR1cm5PZmYoKSB7XG4gICAgICAgIGZvciAoY29uc3Qgc3RyZWFtSWQgaW4gdGhpcy5wcml2U3RyZWFtcykge1xuICAgICAgICAgICAgaWYgKHN0cmVhbUlkKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5wcml2U3RyZWFtc1tzdHJlYW1JZF07XG4gICAgICAgICAgICAgICAgaWYgKHN0cmVhbSAmJiAhc3RyZWFtLmlzQ2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU291cmNlT2ZmRXZlbnQodGhpcy5wcml2SWQpKTsgLy8gbm8gc3RyZWFtIG5vd1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldCBldmVudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFdmVudHM7XG4gICAgfVxuICAgIGdldCBkZXZpY2VJbmZvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Gb3JtYXRQcm9taXNlLnRoZW4oKHJlc3VsdCkgPT4gKFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBiaXRzcGVyc2FtcGxlOiByZXN1bHQuYml0c1BlclNhbXBsZSxcbiAgICAgICAgICAgIGNoYW5uZWxjb3VudDogcmVzdWx0LmNoYW5uZWxzLFxuICAgICAgICAgICAgY29ubmVjdGl2aXR5OiBjb25uZWN0aXZpdHkuVW5rbm93bixcbiAgICAgICAgICAgIG1hbnVmYWN0dXJlcjogXCJTcGVlY2ggU0RLXCIsXG4gICAgICAgICAgICBtb2RlbDogXCJGaWxlXCIsXG4gICAgICAgICAgICBzYW1wbGVyYXRlOiByZXN1bHQuc2FtcGxlc1BlclNlYyxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUuRmlsZSxcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgcmVhZEhlYWRlcigpIHtcbiAgICAgICAgLy8gUmVhZCB0aGUgd2F2ZSBoZWFkZXIuXG4gICAgICAgIGNvbnN0IG1heEhlYWRlclNpemUgPSA0Mjk2O1xuICAgICAgICBjb25zdCBoZWFkZXIgPSB0aGlzLnByaXZTb3VyY2Uuc2xpY2UoMCwgbWF4SGVhZGVyU2l6ZSk7XG4gICAgICAgIGNvbnN0IGhlYWRlclJlc3VsdCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICBjb25zdCBwcm9jZXNzSGVhZGVyID0gKGhlYWRlcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmlldyA9IG5ldyBEYXRhVmlldyhoZWFkZXIpO1xuICAgICAgICAgICAgY29uc3QgZ2V0V29yZCA9IChpbmRleCkgPT4gU3RyaW5nLmZyb21DaGFyQ29kZSh2aWV3LmdldFVpbnQ4KGluZGV4KSwgdmlldy5nZXRVaW50OChpbmRleCArIDEpLCB2aWV3LmdldFVpbnQ4KGluZGV4ICsgMiksIHZpZXcuZ2V0VWludDgoaW5kZXggKyAzKSk7XG4gICAgICAgICAgICAvLyBSSUZGIDQgYnl0ZXMuXG4gICAgICAgICAgICBpZiAoXCJSSUZGXCIgIT09IGdldFdvcmQoMCkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJSZXN1bHQucmVqZWN0KFwiSW52YWxpZCBXQVYgaGVhZGVyIGluIGZpbGUsIFJJRkYgd2FzIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBsZW5ndGgsIDQgYnl0ZXNcbiAgICAgICAgICAgIC8vIFJJRkYgVHlwZSAmIGZtdCA4IGJ5dGVzXG4gICAgICAgICAgICBpZiAoXCJXQVZFXCIgIT09IGdldFdvcmQoOCkgfHwgXCJmbXQgXCIgIT09IGdldFdvcmQoMTIpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUmVzdWx0LnJlamVjdChcIkludmFsaWQgV0FWIGhlYWRlciBpbiBmaWxlLCBXQVZFZm10IHdhcyBub3QgZm91bmRcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZm9ybWF0U2l6ZSA9IHZpZXcuZ2V0SW50MzIoMTYsIHRydWUpO1xuICAgICAgICAgICAgY29uc3QgY2hhbm5lbENvdW50ID0gdmlldy5nZXRVaW50MTYoMjIsIHRydWUpO1xuICAgICAgICAgICAgY29uc3Qgc2FtcGxlUmF0ZSA9IHZpZXcuZ2V0VWludDMyKDI0LCB0cnVlKTtcbiAgICAgICAgICAgIGNvbnN0IGJpdHNQZXJTYW1wbGUgPSB2aWV3LmdldFVpbnQxNigzNCwgdHJ1ZSk7XG4gICAgICAgICAgICAvLyBDb25maXJtIGlmIGhlYWRlciBpcyA0NCBieXRlcyBsb25nLlxuICAgICAgICAgICAgbGV0IHBvcyA9IDM2ICsgTWF0aC5tYXgoZm9ybWF0U2l6ZSAtIDE2LCAwKTtcbiAgICAgICAgICAgIGZvciAoOyBnZXRXb3JkKHBvcykgIT09IFwiZGF0YVwiOyBwb3MgKz0gMikge1xuICAgICAgICAgICAgICAgIGlmIChwb3MgPiBtYXhIZWFkZXJTaXplIC0gOCkge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJSZXN1bHQucmVqZWN0KFwiSW52YWxpZCBXQVYgaGVhZGVyIGluIGZpbGUsIGRhdGEgYmxvY2sgd2FzIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJpdkhlYWRlckVuZCA9IHBvcyArIDg7XG4gICAgICAgICAgICBoZWFkZXJSZXN1bHQucmVzb2x2ZShBdWRpb1N0cmVhbUZvcm1hdC5nZXRXYXZlRm9ybWF0UENNKHNhbXBsZVJhdGUsIGJpdHNQZXJTYW1wbGUsIGNoYW5uZWxDb3VudCkpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgQmxvYiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBoZWFkZXIgaW5zdGFuY2VvZiBCbG9iKSB7XG4gICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgcHJvY2Vzc0hlYWRlcihoZWFkZXIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihoZWFkZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaCA9IGhlYWRlcjtcbiAgICAgICAgICAgIHByb2Nlc3NIZWFkZXIoaC5idWZmZXIuc2xpY2UoaC5ieXRlT2Zmc2V0LCBoLmJ5dGVPZmZzZXQgKyBoLmJ5dGVMZW5ndGgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGVhZGVyUmVzdWx0LnByb21pc2U7XG4gICAgfVxuICAgIHVwbG9hZChhdWRpb05vZGVJZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3Qgb25lcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gYEVycm9yIG9jY3VycmVkIHdoaWxlIHByb2Nlc3NpbmcgJyR7dGhpcy5wcml2RmlsZW5hbWV9Jy4gJHtlcnJvcn1gO1xuICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9TdHJlYW1Ob2RlRXJyb3JFdmVudCh0aGlzLnByaXZJZCwgYXVkaW9Ob2RlSWQsIGVycm9yTXNnKSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTXNnKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMudHVybk9uKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0ID0geWllbGQgdGhpcy5wcml2QXVkaW9Gb3JtYXRQcm9taXNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IG5ldyBDaHVua2VkQXJyYXlCdWZmZXJTdHJlYW0oZm9ybWF0LmF2Z0J5dGVzUGVyU2VjIC8gMTAsIGF1ZGlvTm9kZUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTdHJlYW1zW2F1ZGlvTm9kZUlkXSA9IHN0cmVhbTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaHVuayA9IHRoaXMucHJpdlNvdXJjZS5zbGljZSh0aGlzLnByaXZIZWFkZXJFbmQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NGaWxlID0gKGJ1ZmYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmVhbS5pc0Nsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBvdXRwdXQgc3RyZWFtIHdhcyBjbG9zZWQgKHNvbWVib2R5IGNhbGxlZCBUdXJuT2ZmKS4gV2UncmUgZG9uZSBoZXJlLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS53cml0ZVN0cmVhbUNodW5rKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogYnVmZixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRW5kOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVSZWNlaXZlZDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIEJsb2IgIT09IFwidW5kZWZpbmVkXCIgJiYgY2h1bmsgaW5zdGFuY2VvZiBCbG9iKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmVycm9yID0gKGV2KSA9PiBvbmVycm9yKGV2LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlQnVmZmVyID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NGaWxlKGZpbGVCdWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoY2h1bmspO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYyA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRmlsZShjLmJ1ZmZlci5zbGljZShjLmJ5dGVPZmZzZXQsIGMuYnl0ZU9mZnNldCArIGMuYnl0ZUxlbmd0aCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBvbmVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb25FdmVudChldmVudCkge1xuICAgICAgICB0aGlzLnByaXZFdmVudHMub25FdmVudChldmVudCk7XG4gICAgICAgIEV2ZW50cy5pbnN0YW5jZS5vbkV2ZW50KGV2ZW50KTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZpbGVBdWRpb1NvdXJjZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JUmVjb3JkZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgY29ubmVjdGl2aXR5LCB0eXBlIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQXVkaW9Tb3VyY2VFcnJvckV2ZW50LCBBdWRpb1NvdXJjZUluaXRpYWxpemluZ0V2ZW50LCBBdWRpb1NvdXJjZU9mZkV2ZW50LCBBdWRpb1NvdXJjZVJlYWR5RXZlbnQsIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGVkRXZlbnQsIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGluZ0V2ZW50LCBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50LCBBdWRpb1N0cmVhbU5vZGVFcnJvckV2ZW50LCBDaHVua2VkQXJyYXlCdWZmZXJTdHJlYW0sIGNyZWF0ZU5vRGFzaEd1aWQsIERlZmVycmVkLCBFdmVudHMsIEV2ZW50U291cmNlLCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQXVkaW9TdHJlYW1Gb3JtYXQsIEF1ZGlvU3RyZWFtRm9ybWF0SW1wbCwgfSBmcm9tIFwiLi4vc2RrL0F1ZGlvL0F1ZGlvU3RyZWFtRm9ybWF0XCI7XG5leHBvcnQgY29uc3QgQXVkaW9Xb3JrbGV0U291cmNlVVJMUHJvcGVydHlOYW1lID0gXCJNSUNST1BIT05FLVdvcmtsZXRTb3VyY2VVcmxcIjtcbmV4cG9ydCBjbGFzcyBNaWNBdWRpb1NvdXJjZSB7XG4gICAgY29uc3RydWN0b3IocHJpdlJlY29yZGVyLCBkZXZpY2VJZCwgYXVkaW9Tb3VyY2VJZCwgbWVkaWFTdHJlYW0pIHtcbiAgICAgICAgdGhpcy5wcml2UmVjb3JkZXIgPSBwcml2UmVjb3JkZXI7XG4gICAgICAgIHRoaXMuZGV2aWNlSWQgPSBkZXZpY2VJZDtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtcyA9IHt9O1xuICAgICAgICB0aGlzLnByaXZPdXRwdXRDaHVua1NpemUgPSBNaWNBdWRpb1NvdXJjZS5BVURJT0ZPUk1BVC5hdmdCeXRlc1BlclNlYyAvIDEwO1xuICAgICAgICB0aGlzLnByaXZJZCA9IGF1ZGlvU291cmNlSWQgPyBhdWRpb1NvdXJjZUlkIDogY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZFdmVudHMgPSBuZXcgRXZlbnRTb3VyY2UoKTtcbiAgICAgICAgdGhpcy5wcml2TWVkaWFTdHJlYW0gPSBtZWRpYVN0cmVhbSB8fCBudWxsO1xuICAgICAgICB0aGlzLnByaXZJc0Nsb3NpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShNaWNBdWRpb1NvdXJjZS5BVURJT0ZPUk1BVCk7XG4gICAgfVxuICAgIGdldCBibG9iKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJOb3QgaW1wbGVtZW50ZWQgZm9yIE1pYyBpbnB1dFwiKTtcbiAgICB9XG4gICAgdHVybk9uKCkge1xuICAgICAgICBpZiAodGhpcy5wcml2SW5pdGlhbGl6ZURlZmVycmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2SW5pdGlhbGl6ZURlZmVycmFsLnByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2SW5pdGlhbGl6ZURlZmVycmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUF1ZGlvQ29udGV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlZEVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SW5pdGlhbGl6ZURlZmVycmFsLnJlamVjdCh0eXBlZEVycm9yLm5hbWUgKyBcIjogXCIgKyB0eXBlZEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SW5pdGlhbGl6ZURlZmVycmFsLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2SW5pdGlhbGl6ZURlZmVycmFsLnByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmF2ID0gd2luZG93Lm5hdmlnYXRvcjtcbiAgICAgICAgbGV0IGdldFVzZXJNZWRpYSA9IChcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIG5hdi5nZXRVc2VyTWVkaWEgfHxcbiAgICAgICAgICAgIG5hdi53ZWJraXRHZXRVc2VyTWVkaWEgfHxcbiAgICAgICAgICAgIG5hdi5tb3pHZXRVc2VyTWVkaWEgfHxcbiAgICAgICAgICAgIG5hdi5tc0dldFVzZXJNZWRpYSk7XG4gICAgICAgIGlmICghIW5hdi5tZWRpYURldmljZXMpIHtcbiAgICAgICAgICAgIGdldFVzZXJNZWRpYSA9IChjb25zdHJhaW50cywgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICAgICAgbmF2Lm1lZGlhRGV2aWNlc1xuICAgICAgICAgICAgICAgICAgICAuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihzdWNjZXNzQ2FsbGJhY2spXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvckNhbGxiYWNrKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFnZXRVc2VyTWVkaWEpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gXCJCcm93c2VyIGRvZXMgbm90IHN1cHBvcnQgZ2V0VXNlck1lZGlhLlwiO1xuICAgICAgICAgICAgdGhpcy5wcml2SW5pdGlhbGl6ZURlZmVycmFsLnJlamVjdChlcnJvck1zZyk7XG4gICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU291cmNlRXJyb3JFdmVudChlcnJvck1zZywgXCJcIikpOyAvLyBtaWMgaW5pdGlhbGl6ZWQgZXJyb3IgLSBubyBzdHJlYW1pZCBhdCB0aGlzIHBvaW50XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9Tb3VyY2VJbml0aWFsaXppbmdFdmVudCh0aGlzLnByaXZJZCkpOyAvLyBubyBzdHJlYW0gaWRcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2TWVkaWFTdHJlYW0gJiYgdGhpcy5wcml2TWVkaWFTdHJlYW0uYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9Tb3VyY2VSZWFkeUV2ZW50KHRoaXMucHJpdklkKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkluaXRpYWxpemVEZWZlcnJhbC5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBnZXRVc2VyTWVkaWEoeyBhdWRpbzogdGhpcy5kZXZpY2VJZCA/IHsgZGV2aWNlSWQ6IHRoaXMuZGV2aWNlSWQgfSA6IHRydWUsIHZpZGVvOiBmYWxzZSB9LCAobWVkaWFTdHJlYW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdk1lZGlhU3RyZWFtID0gbWVkaWFTdHJlYW07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU291cmNlUmVhZHlFdmVudCh0aGlzLnByaXZJZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2SW5pdGlhbGl6ZURlZmVycmFsLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IGBFcnJvciBvY2N1cnJlZCBkdXJpbmcgbWljcm9waG9uZSBpbml0aWFsaXphdGlvbjogJHtlcnJvcn1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2SW5pdGlhbGl6ZURlZmVycmFsLnJlamVjdChlcnJvck1zZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU291cmNlRXJyb3JFdmVudCh0aGlzLnByaXZJZCwgZXJyb3JNc2cpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZDb250ZXh0LnN0YXRlID09PSBcInN1c3BlbmRlZFwiKSB7XG4gICAgICAgICAgICAgICAgLy8gTk9URTogT24gaU9TLCB0aGUgV2ViIEF1ZGlvIEFQSSByZXF1aXJlcyBzb3VuZHMgdG8gYmUgdHJpZ2dlcmVkIGZyb20gYW4gZXhwbGljaXQgdXNlciBhY3Rpb24uXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL1dlYkF1ZGlvL3dlYi1hdWRpby1hcGkvaXNzdWVzLzc5MFxuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnRleHQucmVzdW1lKClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4obmV4dClcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChyZWFzb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2SW5pdGlhbGl6ZURlZmVycmFsLnJlamVjdChgRmFpbGVkIHRvIGluaXRpYWxpemUgYXVkaW8gY29udGV4dDogJHtyZWFzb259YCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkluaXRpYWxpemVEZWZlcnJhbC5wcm9taXNlO1xuICAgIH1cbiAgICBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklkO1xuICAgIH1cbiAgICBhdHRhY2goYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVBdHRhY2hpbmdFdmVudCh0aGlzLnByaXZJZCwgYXVkaW9Ob2RlSWQpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuKGF1ZGlvTm9kZUlkKS50aGVuKChzdHJlYW0pID0+IHtcbiAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9TdHJlYW1Ob2RlQXR0YWNoZWRFdmVudCh0aGlzLnByaXZJZCwgYXVkaW9Ob2RlSWQpKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZGV0YWNoOiAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5yZWFkRW5kZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucHJpdlN0cmVhbXNbYXVkaW9Ob2RlSWRdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU3RyZWFtTm9kZURldGFjaGVkRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnR1cm5PZmYoKTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBpZDogKCkgPT4gYXVkaW9Ob2RlSWQsXG4gICAgICAgICAgICAgICAgcmVhZDogKCkgPT4gc3RyZWFtLnJlYWQoKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZXRhY2goYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgaWYgKGF1ZGlvTm9kZUlkICYmIHRoaXMucHJpdlN0cmVhbXNbYXVkaW9Ob2RlSWRdKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZTdHJlYW1zW2F1ZGlvTm9kZUlkXS5jbG9zZSgpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMucHJpdlN0cmVhbXNbYXVkaW9Ob2RlSWRdO1xuICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHR1cm5PZmYoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN0cmVhbUlkIGluIHRoaXMucHJpdlN0cmVhbXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RyZWFtSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5wcml2U3RyZWFtc1tzdHJlYW1JZF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1NvdXJjZU9mZkV2ZW50KHRoaXMucHJpdklkKSk7IC8vIG5vIHN0cmVhbSBub3dcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZJbml0aWFsaXplRGVmZXJyYWwpIHtcbiAgICAgICAgICAgICAgICAvLyBDb3JyZWN0bHkgaGFuZGxlIHdoZW4gYnJvd3NlciBmb3JjZXMgbWljIG9mZiBiZWZvcmUgdHVybk9uKCkgY29tcGxldGVzXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9hd2FpdC10aGVuYWJsZVxuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdkluaXRpYWxpemVEZWZlcnJhbDtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZJbml0aWFsaXplRGVmZXJyYWwgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgdGhpcy5kZXN0cm95QXVkaW9Db250ZXh0KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgZXZlbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXZlbnRzO1xuICAgIH1cbiAgICBnZXQgZGV2aWNlSW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWljcm9waG9uZUxhYmVsKCkudGhlbigobGFiZWwpID0+ICh7XG4gICAgICAgICAgICBiaXRzcGVyc2FtcGxlOiBNaWNBdWRpb1NvdXJjZS5BVURJT0ZPUk1BVC5iaXRzUGVyU2FtcGxlLFxuICAgICAgICAgICAgY2hhbm5lbGNvdW50OiBNaWNBdWRpb1NvdXJjZS5BVURJT0ZPUk1BVC5jaGFubmVscyxcbiAgICAgICAgICAgIGNvbm5lY3Rpdml0eTogY29ubmVjdGl2aXR5LlVua25vd24sXG4gICAgICAgICAgICBtYW51ZmFjdHVyZXI6IFwiU3BlZWNoIFNES1wiLFxuICAgICAgICAgICAgbW9kZWw6IGxhYmVsLFxuICAgICAgICAgICAgc2FtcGxlcmF0ZTogTWljQXVkaW9Tb3VyY2UuQVVESU9GT1JNQVQuc2FtcGxlc1BlclNlYyxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUuTWljcm9waG9uZXMsXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2V0UHJvcGVydHkobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09IEF1ZGlvV29ya2xldFNvdXJjZVVSTFByb3BlcnR5TmFtZSkge1xuICAgICAgICAgICAgdGhpcy5wcml2UmVjb3JkZXIuc2V0V29ya2xldFVybCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9wZXJ0eSAnXCIgKyBuYW1lICsgXCInIGlzIG5vdCBzdXBwb3J0ZWQgb24gTWljcm9waG9uZS5cIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TWljcm9waG9uZUxhYmVsKCkge1xuICAgICAgICBjb25zdCBkZWZhdWx0TWljcm9waG9uZU5hbWUgPSBcIm1pY3JvcGhvbmVcIjtcbiAgICAgICAgLy8gSWYgd2UgZGlkIHRoaXMgYWxyZWFkeSwgcmV0dXJuIHRoZSB2YWx1ZS5cbiAgICAgICAgaWYgKHRoaXMucHJpdk1pY3JvcGhvbmVMYWJlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMucHJpdk1pY3JvcGhvbmVMYWJlbCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlIHN0cmVhbSBpc24ndCBjdXJyZW50bHkgcnVubmluZywgd2UgY2FuJ3QgcXVlcnkgZGV2aWNlcyBiZWNhdXNlIHNlY3VyaXR5LlxuICAgICAgICBpZiAodGhpcy5wcml2TWVkaWFTdHJlYW0gPT09IHVuZGVmaW5lZCB8fCAhdGhpcy5wcml2TWVkaWFTdHJlYW0uYWN0aXZlKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRlZmF1bHRNaWNyb3Bob25lTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0dXAgYSBkZWZhdWx0XG4gICAgICAgIHRoaXMucHJpdk1pY3JvcGhvbmVMYWJlbCA9IGRlZmF1bHRNaWNyb3Bob25lTmFtZTtcbiAgICAgICAgLy8gR2V0IHRoZSBpZCBvZiB0aGUgZGV2aWNlIHJ1bm5pbmcgdGhlIGF1ZGlvIHRyYWNrLlxuICAgICAgICBjb25zdCBtaWNyb3Bob25lRGV2aWNlSWQgPSB0aGlzLnByaXZNZWRpYVN0cmVhbS5nZXRUcmFja3MoKVswXS5nZXRTZXR0aW5ncygpLmRldmljZUlkO1xuICAgICAgICAvLyBJZiB0aGUgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgZ2V0dGluZyB0aGUgZGV2aWNlIElELCBzZXQgYSBkZWZhdWx0IGFuZCByZXR1cm4uXG4gICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1pY3JvcGhvbmVEZXZpY2VJZCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnByaXZNaWNyb3Bob25lTGFiZWwpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIC8vIEVudW1lcmF0ZSB0aGUgbWVkaWEgZGV2aWNlcy5cbiAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCkudGhlbigoZGV2aWNlcykgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBkZXZpY2Ugb2YgZGV2aWNlcykge1xuICAgICAgICAgICAgICAgIGlmIChkZXZpY2UuZGV2aWNlSWQgPT09IG1pY3JvcGhvbmVEZXZpY2VJZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBGb3VuZCB0aGUgZGV2aWNlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdk1pY3JvcGhvbmVMYWJlbCA9IGRldmljZS5sYWJlbDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh0aGlzLnByaXZNaWNyb3Bob25lTGFiZWwpO1xuICAgICAgICB9LCAoKSA9PiBkZWZlcnJlZC5yZXNvbHZlKHRoaXMucHJpdk1pY3JvcGhvbmVMYWJlbCkpO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG4gICAgbGlzdGVuKGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnR1cm5PbigpO1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gbmV3IENodW5rZWRBcnJheUJ1ZmZlclN0cmVhbSh0aGlzLnByaXZPdXRwdXRDaHVua1NpemUsIGF1ZGlvTm9kZUlkKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlN0cmVhbXNbYXVkaW9Ob2RlSWRdID0gc3RyZWFtO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNvcmRlci5yZWNvcmQodGhpcy5wcml2Q29udGV4dCwgdGhpcy5wcml2TWVkaWFTdHJlYW0sIHN0cmVhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU3RyZWFtTm9kZUVycm9yRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkLCBlcnJvcikpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gc3RyZWFtO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9uRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5wcml2RXZlbnRzLm9uRXZlbnQoZXZlbnQpO1xuICAgICAgICBFdmVudHMuaW5zdGFuY2Uub25FdmVudChldmVudCk7XG4gICAgfVxuICAgIGNyZWF0ZUF1ZGlvQ29udGV4dCgpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udGV4dCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdkNvbnRleHQgPSBBdWRpb1N0cmVhbUZvcm1hdEltcGwuZ2V0QXVkaW9Db250ZXh0KE1pY0F1ZGlvU291cmNlLkFVRElPRk9STUFULnNhbXBsZXNQZXJTZWMpO1xuICAgIH1cbiAgICBkZXN0cm95QXVkaW9Db250ZXh0KCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcml2UmVjb3JkZXIucmVsZWFzZU1lZGlhUmVzb3VyY2VzKHRoaXMucHJpdkNvbnRleHQpO1xuICAgICAgICAgICAgLy8gVGhpcyBwYXR0ZXJuIGJyb3VnaHQgdG8geW91IGJ5IGEgYnVnIGluIHRoZSBUeXBlU2NyaXB0IGNvbXBpbGVyIHdoZXJlIGl0XG4gICAgICAgICAgICAvLyBjb25mdXNlcyB0aGUgKFwiY2xvc2VcIiBpbiB0aGlzLnByaXZDb250ZXh0KSB3aXRoIHRoaXMucHJpdkNvbnRleHQgYWx3YXlzIGJlaW5nIG51bGwgYXMgdGhlIGFsdGVybmF0ZS5cbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMTE0OThcbiAgICAgICAgICAgIGxldCBoYXNDbG9zZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKFwiY2xvc2VcIiBpbiB0aGlzLnByaXZDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgaGFzQ2xvc2UgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc0Nsb3NlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZJc0Nsb3NpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGF1ZGlvIGNvbnRleHQgY2xvc2UgbWF5IHRha2UgZW5vdWdoIHRpbWUgdGhhdCB0aGUgY2xvc2UgaXMgY2FsbGVkIHR3aWNlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdklzQ2xvc2luZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdkNvbnRleHQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udGV4dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdklzQ2xvc2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG51bGwgIT09IHRoaXMucHJpdkNvbnRleHQgJiYgdGhpcy5wcml2Q29udGV4dC5zdGF0ZSA9PT0gXCJydW5uaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBTdXNwZW5kIGFjdHVhbGx5IHRha2VzIGEgY2FsbGJhY2ssIGJ1dCBhbmFsb2dvdXMgdG8gdGhlXG4gICAgICAgICAgICAgICAgLy8gcmVzdW1lIG1ldGhvZCwgaXQnbGwgYmUgb25seSBmaXJlZCBpZiBzdXNwZW5kIGlzIGNhbGxlZFxuICAgICAgICAgICAgICAgIC8vIGluIGEgZGlyZWN0IHJlc3BvbnNlIHRvIGEgdXNlciBhY3Rpb24uIFRoZSBsYXRlciBpcyBub3QgYWx3YXlzXG4gICAgICAgICAgICAgICAgLy8gdGhlIGNhc2UsIGFzIFR1cm5PZmYgaXMgYWxzbyBjYWxsZWQsIHdoZW4gd2UgcmVjZWl2ZSBhblxuICAgICAgICAgICAgICAgIC8vIGVuZC1vZi1zcGVlY2ggbWVzc2FnZSBmcm9tIHRoZSBzZXJ2aWNlLiBTbywgZG9pbmcgYSBiZXN0IGVmZm9ydFxuICAgICAgICAgICAgICAgIC8vIGZpcmUtYW5kLWZvcmdldCBoZXJlLlxuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdkNvbnRleHQuc3VzcGVuZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5NaWNBdWRpb1NvdXJjZS5BVURJT0ZPUk1BVCA9IEF1ZGlvU3RyZWFtRm9ybWF0LmdldERlZmF1bHRJbnB1dEZvcm1hdCgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1NaWNBdWRpb1NvdXJjZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUmlmZlBjbUVuY29kZXIgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmV4cG9ydCBjbGFzcyBQY21SZWNvcmRlciB7XG4gICAgY29uc3RydWN0b3Ioc3RvcElucHV0T25SZWxlYXNlKSB7XG4gICAgICAgIHRoaXMucHJpdlN0b3BJbnB1dE9uUmVsZWFzZSA9IHN0b3BJbnB1dE9uUmVsZWFzZTtcbiAgICB9XG4gICAgcmVjb3JkKGNvbnRleHQsIG1lZGlhU3RyZWFtLCBvdXRwdXRTdHJlYW0pIHtcbiAgICAgICAgY29uc3QgZGVzaXJlZFNhbXBsZVJhdGUgPSAxNjAwMDtcbiAgICAgICAgY29uc3Qgd2F2ZVN0cmVhbUVuY29kZXIgPSBuZXcgUmlmZlBjbUVuY29kZXIoY29udGV4dC5zYW1wbGVSYXRlLCBkZXNpcmVkU2FtcGxlUmF0ZSk7XG4gICAgICAgIGNvbnN0IG1pY0lucHV0ID0gY29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShtZWRpYVN0cmVhbSk7XG4gICAgICAgIGNvbnN0IGF0dGFjaFNjcmlwdFByb2Nlc3NvciA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtZnVuY3Rpb24tcmV0dXJuLXR5cGVcbiAgICAgICAgICAgIGNvbnN0IHNjcmlwdE5vZGUgPSAoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBidWZmZXJTaXplID0gMDtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5jcmVhdGVTY3JpcHRQcm9jZXNzb3IoYnVmZmVyU2l6ZSwgMSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZWJraXQgKDw9IHZlcnNpb24gMzEpIHJlcXVpcmVzIGEgdmFsaWQgYnVmZmVyU2l6ZS5cbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyU2l6ZSA9IDIwNDg7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhdWRpb1NhbXBsZVJhdGUgPSBjb250ZXh0LnNhbXBsZVJhdGU7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChidWZmZXJTaXplIDwgMTYzODQgJiYgYXVkaW9TYW1wbGVSYXRlID49ICgyICogZGVzaXJlZFNhbXBsZVJhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJTaXplIDw8PSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9TYW1wbGVSYXRlID4+PSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZVNjcmlwdFByb2Nlc3NvcihidWZmZXJTaXplLCAxLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSgpO1xuICAgICAgICAgICAgc2NyaXB0Tm9kZS5vbmF1ZGlvcHJvY2VzcyA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0RnJhbWUgPSBldmVudC5pbnB1dEJ1ZmZlci5nZXRDaGFubmVsRGF0YSgwKTtcbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0U3RyZWFtICYmICFvdXRwdXRTdHJlYW0uaXNDbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2F2ZUZyYW1lID0gd2F2ZVN0cmVhbUVuY29kZXIuZW5jb2RlKGlucHV0RnJhbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISF3YXZlRnJhbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFN0cmVhbS53cml0ZVN0cmVhbUNodW5rKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXI6IHdhdmVGcmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0VuZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZVJlY2VpdmVkOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbWljSW5wdXQuY29ubmVjdChzY3JpcHROb2RlKTtcbiAgICAgICAgICAgIHNjcmlwdE5vZGUuY29ubmVjdChjb250ZXh0LmRlc3RpbmF0aW9uKTtcbiAgICAgICAgICAgIHRoaXMucHJpdk1lZGlhUmVzb3VyY2VzID0ge1xuICAgICAgICAgICAgICAgIHNjcmlwdFByb2Nlc3Nvck5vZGU6IHNjcmlwdE5vZGUsXG4gICAgICAgICAgICAgICAgc291cmNlOiBtaWNJbnB1dCxcbiAgICAgICAgICAgICAgICBzdHJlYW06IG1lZGlhU3RyZWFtLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gaHR0cHM6Ly93ZWJhdWRpby5naXRodWIuaW8vd2ViLWF1ZGlvLWFwaS8jYXVkaW93b3JrbGV0XG4gICAgICAgIC8vIFVzaW5nIEF1ZGlvV29ya2xldCB0byBpbXByb3ZlIGF1ZGlvIHF1YWxpdHkgYW5kIGF2b2lkIGF1ZGlvIGdsaXRjaGVzIGR1ZSB0byBibG9ja2luZyB0aGUgVUkgdGhyZWFkXG4gICAgICAgIGlmICghIWNvbnRleHQuYXVkaW9Xb3JrbGV0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJpdlNwZWVjaFByb2Nlc3NvclNjcmlwdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtsZXRTY3JpcHQgPSBgY2xhc3MgU1AgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3Ige1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHN1cGVyKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzKGlucHV0cywgb3V0cHV0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBpbnB1dHNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGNoYW5uZWwgPSAwOyBjaGFubmVsIDwgaW5wdXQubGVuZ3RoOyBjaGFubmVsICs9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W2NoYW5uZWxdID0gaW5wdXRbY2hhbm5lbF07XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcnQucG9zdE1lc3NhZ2Uob3V0cHV0WzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICByZWdpc3RlclByb2Nlc3Nvcignc3BlZWNoLXByb2Nlc3NvcicsIFNQKTtgO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbd29ya2xldFNjcmlwdF0sIHsgdHlwZTogXCJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0OyBjaGFyc2V0PXV0Zi04XCIgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvY2Vzc29yU2NyaXB0ID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRleHQuYXVkaW9Xb3JrbGV0XG4gICAgICAgICAgICAgICAgLmFkZE1vZHVsZSh0aGlzLnByaXZTcGVlY2hQcm9jZXNzb3JTY3JpcHQpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtsZXROb2RlID0gbmV3IEF1ZGlvV29ya2xldE5vZGUoY29udGV4dCwgXCJzcGVlY2gtcHJvY2Vzc29yXCIpO1xuICAgICAgICAgICAgICAgIHdvcmtsZXROb2RlLnBvcnQub25tZXNzYWdlID0gKGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0RnJhbWUgPSBldi5kYXRhO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3V0cHV0U3RyZWFtICYmICFvdXRwdXRTdHJlYW0uaXNDbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdhdmVGcmFtZSA9IHdhdmVTdHJlYW1FbmNvZGVyLmVuY29kZShpbnB1dEZyYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXdhdmVGcmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFN0cmVhbS53cml0ZVN0cmVhbUNodW5rKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyOiB3YXZlRnJhbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRW5kOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZVJlY2VpdmVkOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBtaWNJbnB1dC5jb25uZWN0KHdvcmtsZXROb2RlKTtcbiAgICAgICAgICAgICAgICB3b3JrbGV0Tm9kZS5jb25uZWN0KGNvbnRleHQuZGVzdGluYXRpb24pO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdk1lZGlhUmVzb3VyY2VzID0ge1xuICAgICAgICAgICAgICAgICAgICBzY3JpcHRQcm9jZXNzb3JOb2RlOiB3b3JrbGV0Tm9kZSxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBtaWNJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtOiBtZWRpYVN0cmVhbSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF0dGFjaFNjcmlwdFByb2Nlc3NvcigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF0dGFjaFNjcmlwdFByb2Nlc3NvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIHN0YXJ0IGF1ZGlvIHdvcmtsZXQgbm9kZSBmb3IgUENNUmVjb3JkZXI6ICR7ZXJyfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJlbGVhc2VNZWRpYVJlc291cmNlcyhjb250ZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZNZWRpYVJlc291cmNlcykge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdk1lZGlhUmVzb3VyY2VzLnNjcmlwdFByb2Nlc3Nvck5vZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZNZWRpYVJlc291cmNlcy5zY3JpcHRQcm9jZXNzb3JOb2RlLmRpc2Nvbm5lY3QoY29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TWVkaWFSZXNvdXJjZXMuc2NyaXB0UHJvY2Vzc29yTm9kZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2TWVkaWFSZXNvdXJjZXMuc291cmNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TWVkaWFSZXNvdXJjZXMuc291cmNlLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2U3RvcElucHV0T25SZWxlYXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdk1lZGlhUmVzb3VyY2VzLnN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4gdHJhY2suc3RvcCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TWVkaWFSZXNvdXJjZXMuc291cmNlID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRXb3JrbGV0VXJsKHVybCkge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9jZXNzb3JTY3JpcHQgPSB1cmw7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1QQ01SZWNvcmRlci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIFByb3h5SW5mbyB7XG4gICAgY29uc3RydWN0b3IocHJveHlIb3N0TmFtZSwgcHJveHlQb3J0LCBwcm94eVVzZXJOYW1lLCBwcm94eVBhc3N3b3JkKSB7XG4gICAgICAgIHRoaXMucHJpdlByb3h5SG9zdE5hbWUgPSBwcm94eUhvc3ROYW1lO1xuICAgICAgICB0aGlzLnByaXZQcm94eVBvcnQgPSBwcm94eVBvcnQ7XG4gICAgICAgIHRoaXMucHJpdlByb3h5VXNlck5hbWUgPSBwcm94eVVzZXJOYW1lO1xuICAgICAgICB0aGlzLnByaXZQcm94eVBhc3N3b3JkID0gcHJveHlQYXNzd29yZDtcbiAgICB9XG4gICAgc3RhdGljIGZyb21QYXJhbWV0ZXJzKHBhcmFtZXRlcnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eUluZm8ocGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5SG9zdE5hbWUpLCBwYXJzZUludChwYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlQb3J0KSwgMTApLCBwYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlVc2VyTmFtZSksIHBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVBhc3N3b3JkKSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tUmVjb2duaXplckNvbmZpZyhjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnJvbVBhcmFtZXRlcnMoY29uZmlnLnBhcmFtZXRlcnMpO1xuICAgIH1cbiAgICBnZXQgSG9zdE5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm94eUhvc3ROYW1lO1xuICAgIH1cbiAgICBnZXQgUG9ydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3h5UG9ydDtcbiAgICB9XG4gICAgZ2V0IFVzZXJOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJveHlVc2VyTmFtZTtcbiAgICB9XG4gICAgZ2V0IFBhc3N3b3JkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJveHlQYXNzd29yZDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb3h5SW5mby5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuZXhwb3J0IGNsYXNzIFJlcGxheWFibGVBdWRpb05vZGUge1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvU291cmNlLCBieXRlc1BlclNlY29uZCkge1xuICAgICAgICB0aGlzLnByaXZCdWZmZXJzID0gW107XG4gICAgICAgIHRoaXMucHJpdlJlcGxheU9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMucHJpdkxhc3RTaHJpbmtPZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnByaXZCdWZmZXJTdGFydE9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMucHJpdkJ1ZmZlclNlcmlhbCA9IDA7XG4gICAgICAgIHRoaXMucHJpdkJ1ZmZlcmVkQnl0ZXMgPSAwO1xuICAgICAgICB0aGlzLnByaXZSZXBsYXkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2TGFzdENodW5rQWNxdWlyZWRUaW1lID0gMDtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlID0gYXVkaW9Tb3VyY2U7XG4gICAgICAgIHRoaXMucHJpdkJ5dGVzUGVyU2Vjb25kID0gYnl0ZXNQZXJTZWNvbmQ7XG4gICAgfVxuICAgIGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Ob2RlLmlkKCk7XG4gICAgfVxuICAgIC8vIFJlYWRzIGFuZCByZXR1cm5zIHRoZSBuZXh0IGNodW5rIG9mIGF1ZGlvIGJ1ZmZlci5cbiAgICAvLyBJZiByZXBsYXkgb2YgZXhpc3RpbmcgYnVmZmVycyBhcmUgbmVlZGVkLCByZWFkKCkgd2lsbCBmaXJzdCBzZWVrIGFuZCByZXBsYXlcbiAgICAvLyBleGlzdGluZyBjb250ZW50LCBhbmQgdXBvaW4gY29tcGxldGlvbiBpdCB3aWxsIHJlYWQgbmV3IGNvbnRlbnQgZnJvbSB0aGUgdW5kZXJseWluZ1xuICAgIC8vIGF1ZGlvIG5vZGUsIHNhdmluZyB0aGF0IGNvbnRlbnQgaW50byB0aGUgcmVwbGF5YWJsZSBidWZmZXJzLlxuICAgIHJlYWQoKSB7XG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgcmVwbGF5IHJlcXVlc3QgdG8gaG9ub3IuXG4gICAgICAgIGlmICghIXRoaXMucHJpdlJlcGxheSAmJiB0aGlzLnByaXZCdWZmZXJzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgLy8gRmluZCB0aGUgc3RhcnQgcG9pbnQgaW4gdGhlIGJ1ZmZlcnMuXG4gICAgICAgICAgICAvLyBPZmZzZXRzIGFyZSBpbiAxMDBucyBpbmNyZW1lbnRzLlxuICAgICAgICAgICAgLy8gU28gaG93IG1hbnkgYnl0ZXMgZG8gd2UgbmVlZCB0byBzZWVrIHRvIGdldCB0aGUgcmlnaHQgb2Zmc2V0P1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0VG9TZWVrID0gdGhpcy5wcml2UmVwbGF5T2Zmc2V0IC0gdGhpcy5wcml2QnVmZmVyU3RhcnRPZmZzZXQ7XG4gICAgICAgICAgICBsZXQgYnl0ZXNUb1NlZWsgPSBNYXRoLnJvdW5kKG9mZnNldFRvU2VlayAqIHRoaXMucHJpdkJ5dGVzUGVyU2Vjb25kICogMWUtNyk7XG4gICAgICAgICAgICBpZiAoMCAhPT0gKGJ5dGVzVG9TZWVrICUgMikpIHtcbiAgICAgICAgICAgICAgICBieXRlc1RvU2VlaysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGkgPCB0aGlzLnByaXZCdWZmZXJzLmxlbmd0aCAmJiBieXRlc1RvU2VlayA+PSB0aGlzLnByaXZCdWZmZXJzW2ldLmNodW5rLmJ1ZmZlci5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgYnl0ZXNUb1NlZWsgLT0gdGhpcy5wcml2QnVmZmVyc1tpKytdLmNodW5rLmJ1ZmZlci5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGkgPCB0aGlzLnByaXZCdWZmZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJldFZhbCA9IHRoaXMucHJpdkJ1ZmZlcnNbaV0uY2h1bmsuYnVmZmVyLnNsaWNlKGJ5dGVzVG9TZWVrKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXBsYXlPZmZzZXQgKz0gKHJldFZhbC5ieXRlTGVuZ3RoIC8gdGhpcy5wcml2Qnl0ZXNQZXJTZWNvbmQpICogMWUrNztcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSByZWFjaGVkIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlcnMsIHN0b3AgcmVwbGF5aW5nLlxuICAgICAgICAgICAgICAgIGlmIChpID09PSB0aGlzLnByaXZCdWZmZXJzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVwbGF5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgICAgICBidWZmZXI6IHJldFZhbCxcbiAgICAgICAgICAgICAgICAgICAgaXNFbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB0aW1lUmVjZWl2ZWQ6IHRoaXMucHJpdkJ1ZmZlcnNbaV0uY2h1bmsudGltZVJlY2VpdmVkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb05vZGUucmVhZCgpXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5idWZmZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZCdWZmZXJzLnB1c2gobmV3IEJ1ZmZlckVudHJ5KHJlc3VsdCwgdGhpcy5wcml2QnVmZmVyU2VyaWFsKyssIHRoaXMucHJpdkJ1ZmZlcmVkQnl0ZXMpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZCdWZmZXJlZEJ5dGVzICs9IHJlc3VsdC5idWZmZXIuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZXRhY2goKSB7XG4gICAgICAgIHRoaXMucHJpdkJ1ZmZlcnMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb05vZGUuZGV0YWNoKCk7XG4gICAgfVxuICAgIHJlcGxheSgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdkJ1ZmZlcnMgJiYgMCAhPT0gdGhpcy5wcml2QnVmZmVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlcGxheSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXBsYXlPZmZzZXQgPSB0aGlzLnByaXZMYXN0U2hyaW5rT2Zmc2V0O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFNocmlua3MgdGhlIGV4aXN0aW5nIGF1ZGlvIGJ1ZmZlcnMgdG8gc3RhcnQgYXQgdGhlIG5ldyBvZmZzZXQsIG9yIGF0IHRoZVxuICAgIC8vIGJlZ2lubmluZyBvZiB0aGUgYnVmZmVyIGNsb3Nlc3QgdG8gdGhlIHJlcXVlc3RlZCBvZmZzZXQuXG4gICAgLy8gQSByZXBsYXkgcmVxdWVzdCB3aWxsIHN0YXJ0IGZyb20gdGhlIGxhc3Qgc2hyaW5rIHBvaW50LlxuICAgIHNocmlua0J1ZmZlcnMob2Zmc2V0KSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZCdWZmZXJzID09PSB1bmRlZmluZWQgfHwgdGhpcy5wcml2QnVmZmVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZMYXN0U2hyaW5rT2Zmc2V0ID0gb2Zmc2V0O1xuICAgICAgICAvLyBGaW5kIHRoZSBzdGFydCBwb2ludCBpbiB0aGUgYnVmZmVycy5cbiAgICAgICAgLy8gT2Zmc2V0cyBhcmUgaW4gMTAwbnMgaW5jcmVtZW50cy5cbiAgICAgICAgLy8gU28gaG93IG1hbnkgYnl0ZXMgZG8gd2UgbmVlZCB0byBzZWVrIHRvIGdldCB0aGUgcmlnaHQgb2Zmc2V0P1xuICAgICAgICBjb25zdCBvZmZzZXRUb1NlZWsgPSBvZmZzZXQgLSB0aGlzLnByaXZCdWZmZXJTdGFydE9mZnNldDtcbiAgICAgICAgbGV0IGJ5dGVzVG9TZWVrID0gTWF0aC5yb3VuZChvZmZzZXRUb1NlZWsgKiB0aGlzLnByaXZCeXRlc1BlclNlY29uZCAqIDFlLTcpO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgdGhpcy5wcml2QnVmZmVycy5sZW5ndGggJiYgYnl0ZXNUb1NlZWsgPj0gdGhpcy5wcml2QnVmZmVyc1tpXS5jaHVuay5idWZmZXIuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgYnl0ZXNUb1NlZWsgLT0gdGhpcy5wcml2QnVmZmVyc1tpKytdLmNodW5rLmJ1ZmZlci5ieXRlTGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdkJ1ZmZlclN0YXJ0T2Zmc2V0ID0gTWF0aC5yb3VuZChvZmZzZXQgLSAoKGJ5dGVzVG9TZWVrIC8gdGhpcy5wcml2Qnl0ZXNQZXJTZWNvbmQpICogMWUrNykpO1xuICAgICAgICB0aGlzLnByaXZCdWZmZXJzID0gdGhpcy5wcml2QnVmZmVycy5zbGljZShpKTtcbiAgICB9XG4gICAgLy8gRmluZHMgdGhlIHRpbWUgYSBidWZmZXIgb2YgYXVkaW8gd2FzIGZpcnN0IHNlZW4gYnkgb2Zmc2V0LlxuICAgIGZpbmRUaW1lQXRPZmZzZXQob2Zmc2V0KSB7XG4gICAgICAgIGlmIChvZmZzZXQgPCB0aGlzLnByaXZCdWZmZXJTdGFydE9mZnNldCB8fCB0aGlzLnByaXZCdWZmZXJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5wcml2QnVmZmVycykge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRPZmZzZXQgPSAodmFsdWUuYnl0ZU9mZnNldCAvIHRoaXMucHJpdkJ5dGVzUGVyU2Vjb25kKSAqIDFlNztcbiAgICAgICAgICAgIGNvbnN0IGVuZE9mZnNldCA9IHN0YXJ0T2Zmc2V0ICsgKCh2YWx1ZS5jaHVuay5idWZmZXIuYnl0ZUxlbmd0aCAvIHRoaXMucHJpdkJ5dGVzUGVyU2Vjb25kKSAqIDFlNyk7XG4gICAgICAgICAgICBpZiAob2Zmc2V0ID49IHN0YXJ0T2Zmc2V0ICYmIG9mZnNldCA8PSBlbmRPZmZzZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuY2h1bmsudGltZVJlY2VpdmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbn1cbi8vIFByaW1hcnkgdXNlIG9mIHRoaXMgY2xhc3MgaXMgdG8gaGVscCBkZWJ1Z2dpbmcgcHJvYmxlbXMgd2l0aCB0aGUgcmVwbGF5XG4vLyBjb2RlLiBJZiB0aGUgbWVtb3J5IGNvc3Qgb2YgYWxsb2MgLyBkZWFsbG9jIGdldHMgdG9vIG11Y2gsIGRyb3AgaXQgYW5kIGp1c3QgdXNlXG4vLyB0aGUgQXJyYXlCdWZmZXIgZGlyZWN0bHkuXG5jbGFzcyBCdWZmZXJFbnRyeSB7XG4gICAgY29uc3RydWN0b3IoY2h1bmssIHNlcmlhbCwgYnl0ZU9mZnNldCkge1xuICAgICAgICB0aGlzLmNodW5rID0gY2h1bms7XG4gICAgICAgIHRoaXMuc2VyaWFsID0gc2VyaWFsO1xuICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0O1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVwbGF5YWJsZUF1ZGlvTm9kZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuZXhwb3J0IGNsYXNzIFJlc3RDb25maWdCYXNlIHtcbiAgICBzdGF0aWMgZ2V0IHJlcXVlc3RPcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gUmVzdENvbmZpZ0Jhc2UucHJpdkRlZmF1bHRSZXF1ZXN0T3B0aW9ucztcbiAgICB9XG4gICAgc3RhdGljIGdldCBjb25maWdQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiBSZXN0Q29uZmlnQmFzZS5wcml2RGVmYXVsdFBhcmFtcztcbiAgICB9XG4gICAgc3RhdGljIGdldCByZXN0RXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gUmVzdENvbmZpZ0Jhc2UucHJpdlJlc3RFcnJvcnM7XG4gICAgfVxufVxuUmVzdENvbmZpZ0Jhc2UucHJpdkRlZmF1bHRSZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICBoZWFkZXJzOiB7XG4gICAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgfSxcbiAgICBpZ25vcmVDYWNoZTogZmFsc2UsXG4gICAgdGltZW91dDogMTAwMDAsXG59O1xuUmVzdENvbmZpZ0Jhc2UucHJpdlJlc3RFcnJvcnMgPSB7XG4gICAgYXV0aEludmFsaWRTdWJzY3JpcHRpb25LZXk6IFwiWW91IG11c3Qgc3BlY2lmeSBlaXRoZXIgYW4gYXV0aGVudGljYXRpb24gdG9rZW4gdG8gdXNlLCBvciBhIENvZ25pdGl2ZSBTcGVlY2ggc3Vic2NyaXB0aW9uIGtleS5cIixcbiAgICBhdXRoSW52YWxpZFN1YnNjcmlwdGlvblJlZ2lvbjogXCJZb3UgbXVzdCBzcGVjaWZ5IHRoZSBDb2duaXRpdmUgU3BlZWNoIHJlZ2lvbiB0byB1c2UuXCIsXG4gICAgaW52YWxpZEFyZ3M6IFwiUmVxdWlyZWQgaW5wdXQgbm90IGZvdW5kOiB7YXJnfS5cIixcbiAgICBpbnZhbGlkQ3JlYXRlSm9pbkNvbnZlcnNhdGlvblJlc3BvbnNlOiBcIkNyZWF0aW5nL0pvaW5pbmcgY29udmVyc2F0aW9uIGZhaWxlZCB3aXRoIEhUVFAge3N0YXR1c30uXCIsXG4gICAgaW52YWxpZFBhcnRpY2lwYW50UmVxdWVzdDogXCJUaGUgcmVxdWVzdGVkIHBhcnRpY2lwYW50IHdhcyBub3QgZm91bmQuXCIsXG4gICAgcGVybWlzc2lvbkRlbmllZENvbm5lY3Q6IFwiUmVxdWlyZWQgY3JlZGVudGlhbHMgbm90IGZvdW5kLlwiLFxuICAgIHBlcm1pc3Npb25EZW5pZWRDb252ZXJzYXRpb246IFwiSW52YWxpZCBvcGVyYXRpb246IG9ubHkgdGhlIGhvc3QgY2FuIHtjb21tYW5kfSB0aGUgY29udmVyc2F0aW9uLlwiLFxuICAgIHBlcm1pc3Npb25EZW5pZWRQYXJ0aWNpcGFudDogXCJJbnZhbGlkIG9wZXJhdGlvbjogb25seSB0aGUgaG9zdCBjYW4ge2NvbW1hbmR9IGEgcGFydGljaXBhbnQuXCIsXG4gICAgcGVybWlzc2lvbkRlbmllZFNlbmQ6IFwiSW52YWxpZCBvcGVyYXRpb246IHRoZSBjb252ZXJzYXRpb24gaXMgbm90IGluIGEgY29ubmVjdGVkIHN0YXRlLlwiLFxuICAgIHBlcm1pc3Npb25EZW5pZWRTdGFydDogXCJJbnZhbGlkIG9wZXJhdGlvbjogdGhlcmUgaXMgYWxyZWFkeSBhbiBhY3RpdmUgY29udmVyc2F0aW9uLlwiLFxufTtcblJlc3RDb25maWdCYXNlLnByaXZEZWZhdWx0UGFyYW1zID0ge1xuICAgIGFwaVZlcnNpb246IFwiYXBpLXZlcnNpb25cIixcbiAgICBhdXRob3JpemF0aW9uOiBcIkF1dGhvcml6YXRpb25cIixcbiAgICBjbGllbnRBcHBJZDogXCJYLUNsaWVudEFwcElkXCIsXG4gICAgY29udGVudFR5cGVLZXk6IFwiQ29udGVudC1UeXBlXCIsXG4gICAgY29ycmVsYXRpb25JZDogXCJYLUNvcnJlbGF0aW9uSWRcIixcbiAgICBsYW5ndWFnZUNvZGU6IFwibGFuZ3VhZ2VcIixcbiAgICBuaWNrbmFtZTogXCJuaWNrbmFtZVwiLFxuICAgIHByb2Zhbml0eTogXCJwcm9mYW5pdHlcIixcbiAgICByZXF1ZXN0SWQ6IFwiWC1SZXF1ZXN0SWRcIixcbiAgICByb29tSWQ6IFwicm9vbWlkXCIsXG4gICAgc2Vzc2lvblRva2VuOiBcInRva2VuXCIsXG4gICAgc3Vic2NyaXB0aW9uS2V5OiBcIk9jcC1BcGltLVN1YnNjcmlwdGlvbi1LZXlcIixcbiAgICBzdWJzY3JpcHRpb25SZWdpb246IFwiT2NwLUFwaW0tU3Vic2NyaXB0aW9uLVJlZ2lvblwiLFxuICAgIHRva2VuOiBcIlgtQ2FwaXRvVG9rZW5cIixcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlc3RDb25maWdCYXNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCBiZW50IGZyb20gXCJiZW50XCI7XG5pbXBvcnQgeyBBcmd1bWVudE51bGxFcnJvciwgRGVmZXJyZWQgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmV4cG9ydCB2YXIgUmVzdFJlcXVlc3RUeXBlO1xuKGZ1bmN0aW9uIChSZXN0UmVxdWVzdFR5cGUpIHtcbiAgICBSZXN0UmVxdWVzdFR5cGVbXCJHZXRcIl0gPSBcIkdFVFwiO1xuICAgIFJlc3RSZXF1ZXN0VHlwZVtcIlBvc3RcIl0gPSBcIlBPU1RcIjtcbiAgICBSZXN0UmVxdWVzdFR5cGVbXCJEZWxldGVcIl0gPSBcIkRFTEVURVwiO1xuICAgIFJlc3RSZXF1ZXN0VHlwZVtcIkZpbGVcIl0gPSBcImZpbGVcIjtcbn0pKFJlc3RSZXF1ZXN0VHlwZSB8fCAoUmVzdFJlcXVlc3RUeXBlID0ge30pKTtcbi8vIGFjY2VwdCByZXN0IG9wZXJhdGlvbnMgdmlhIHJlcXVlc3QgbWV0aG9kIGFuZCByZXR1cm4gYWJzdHJhY3RlZCBvYmplY3RzIGZyb20gc2VydmVyIHJlc3BvbnNlXG5leHBvcnQgY2xhc3MgUmVzdE1lc3NhZ2VBZGFwdGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWdQYXJhbXMpIHtcbiAgICAgICAgaWYgKCFjb25maWdQYXJhbXMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcImNvbmZpZ1BhcmFtc1wiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZIZWFkZXJzID0gY29uZmlnUGFyYW1zLmhlYWRlcnM7XG4gICAgICAgIHRoaXMucHJpdklnbm9yZUNhY2hlID0gY29uZmlnUGFyYW1zLmlnbm9yZUNhY2hlO1xuICAgIH1cbiAgICBzdGF0aWMgZXh0cmFjdEhlYWRlclZhbHVlKGhlYWRlcktleSwgaGVhZGVycykge1xuICAgICAgICBsZXQgaGVhZGVyVmFsdWUgPSBcIlwiO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYXJyID0gaGVhZGVycy50cmltKCkuc3BsaXQoL1tcXHJcXG5dKy8pO1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyTWFwID0ge307XG4gICAgICAgICAgICBhcnIuZm9yRWFjaCgobGluZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdChcIjogXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IHBhcnRzLnNoaWZ0KCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcnRzLmpvaW4oXCI6IFwiKTtcbiAgICAgICAgICAgICAgICBoZWFkZXJNYXBbaGVhZGVyXSA9IHZhbHVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBoZWFkZXJWYWx1ZSA9IGhlYWRlck1hcFtoZWFkZXJLZXkudG9Mb3dlckNhc2UoKV07XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIGlnbm9yZSB0aGUgZXJyb3JcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGVhZGVyVmFsdWU7XG4gICAgfVxuICAgIHNldCBvcHRpb25zKGNvbmZpZ1BhcmFtcykge1xuICAgICAgICB0aGlzLnByaXZIZWFkZXJzID0gY29uZmlnUGFyYW1zLmhlYWRlcnM7XG4gICAgICAgIHRoaXMucHJpdklnbm9yZUNhY2hlID0gY29uZmlnUGFyYW1zLmlnbm9yZUNhY2hlO1xuICAgIH1cbiAgICBzZXRIZWFkZXJzKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5wcml2SGVhZGVyc1trZXldID0gdmFsdWU7XG4gICAgfVxuICAgIHJlcXVlc3QobWV0aG9kLCB1cmksIHF1ZXJ5UGFyYW1zID0ge30sIGJvZHkgPSBudWxsLCBiaW5hcnlCb2R5ID0gbnVsbCkge1xuICAgICAgICBjb25zdCByZXNwb25zZVJlY2VpdmVkRGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgY29uc3QgcmVxdWVzdENvbW1hbmQgPSBtZXRob2QgPT09IFJlc3RSZXF1ZXN0VHlwZS5GaWxlID8gXCJQT1NUXCIgOiBtZXRob2Q7XG4gICAgICAgIGNvbnN0IGhhbmRsZVJlc3RSZXNwb25zZSA9IChkYXRhLCBqID0ge30pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGQgPSBkYXRhO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShqKSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBKU09OLnN0cmluZ2lmeShkYXRhLmhlYWRlcnMpLFxuICAgICAgICAgICAgICAgIGpzb246IGosXG4gICAgICAgICAgICAgICAgb2s6IGRhdGEuc3RhdHVzQ29kZSA+PSAyMDAgJiYgZGF0YS5zdGF0dXNDb2RlIDwgMzAwLFxuICAgICAgICAgICAgICAgIHN0YXR1czogZGF0YS5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IGouZXJyb3IgPyBqLmVycm9yLm1lc3NhZ2UgOiBkLnN0YXR1c1RleHQgPyBkLnN0YXR1c1RleHQgOiBkLnN0YXR1c01lc3NhZ2VcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGJsb2JUb0FycmF5QnVmZmVyID0gKGJsb2IpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYik7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkZW5kID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc2VuZCA9IChwb3N0RGF0YSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2VuZFJlcXVlc3QgPSBiZW50KHVyaSwgcmVxdWVzdENvbW1hbmQsIHRoaXMucHJpdkhlYWRlcnMsIDIwMCwgMjAxLCAyMDIsIDIwNCwgNDAwLCA0MDEsIDQwMiwgNDAzLCA0MDQpO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gdGhpcy5xdWVyeVBhcmFtcyhxdWVyeVBhcmFtcykgPT09IFwiXCIgPyBcIlwiIDogYD8ke3RoaXMucXVlcnlQYXJhbXMocXVlcnlQYXJhbXMpfWA7XG4gICAgICAgICAgICBzZW5kUmVxdWVzdChwYXJhbXMsIHBvc3REYXRhKS50aGVuKChkYXRhKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1ldGhvZCA9PT0gUmVzdFJlcXVlc3RUeXBlLkRlbGV0ZSB8fCBkYXRhLnN0YXR1c0NvZGUgPT09IDIwNCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBObyBKU09OIGZyb20gRGVsZXRlIGFuZCByZXNldCAoMjA0KSBvcGVyYXRpb25zXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlUmVjZWl2ZWREZWZlcnJhbC5yZXNvbHZlKGhhbmRsZVJlc3RSZXNwb25zZShkYXRhKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaiA9IHlpZWxkIGRhdGEuanNvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VSZWNlaXZlZERlZmVycmFsLnJlc29sdmUoaGFuZGxlUmVzdFJlc3BvbnNlKGRhdGEsIGopKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlUmVjZWl2ZWREZWZlcnJhbC5yZXNvbHZlKGhhbmRsZVJlc3RSZXNwb25zZShkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VSZWNlaXZlZERlZmVycmFsLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMucHJpdklnbm9yZUNhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZIZWFkZXJzW1wiQ2FjaGUtQ29udHJvbFwiXSA9IFwibm8tY2FjaGVcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWV0aG9kID09PSBSZXN0UmVxdWVzdFR5cGUuRmlsZSAmJiBiaW5hcnlCb2R5KSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50VHlwZSA9IFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiO1xuICAgICAgICAgICAgdGhpcy5wcml2SGVhZGVyc1tcImNvbnRlbnQtdHlwZVwiXSA9IGNvbnRlbnRUeXBlO1xuICAgICAgICAgICAgdGhpcy5wcml2SGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXSA9IGNvbnRlbnRUeXBlO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiAoQmxvYikgIT09IFwidW5kZWZpbmVkXCIgJiYgYmluYXJ5Qm9keSBpbnN0YW5jZW9mIEJsb2IpIHtcbiAgICAgICAgICAgICAgICBibG9iVG9BcnJheUJ1ZmZlcihiaW5hcnlCb2R5KS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZChyZXMpO1xuICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZVJlY2VpdmVkRGVmZXJyYWwucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbmQoYmluYXJ5Qm9keSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAobWV0aG9kID09PSBSZXN0UmVxdWVzdFR5cGUuUG9zdCAmJiBib2R5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SGVhZGVyc1tcImNvbnRlbnQtdHlwZVwiXSA9IFwiYXBwbGljYXRpb24vanNvblwiO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl0gPSBcImFwcGxpY2F0aW9uL2pzb25cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbmQoYm9keSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlUmVjZWl2ZWREZWZlcnJhbC5wcm9taXNlO1xuICAgIH1cbiAgICB3aXRoUXVlcnkodXJsLCBwYXJhbXMgPSB7fSkge1xuICAgICAgICBjb25zdCBxdWVyeVN0cmluZyA9IHRoaXMucXVlcnlQYXJhbXMocGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHF1ZXJ5U3RyaW5nID8gdXJsICsgKHVybC5pbmRleE9mKFwiP1wiKSA9PT0gLTEgPyBcIj9cIiA6IFwiJlwiKSArIHF1ZXJ5U3RyaW5nIDogdXJsO1xuICAgIH1cbiAgICBxdWVyeVBhcmFtcyhwYXJhbXMgPSB7fSkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKVxuICAgICAgICAgICAgLm1hcCgoaykgPT4gZW5jb2RlVVJJQ29tcG9uZW50KGspICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tdKSlcbiAgICAgICAgICAgIC5qb2luKFwiJlwiKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlc3RNZXNzYWdlQWRhcHRlci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBBcmd1bWVudE51bGxFcnJvciwgY3JlYXRlTm9EYXNoR3VpZCwgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IFdlYnNvY2tldE1lc3NhZ2VBZGFwdGVyIH0gZnJvbSBcIi4vV2Vic29ja2V0TWVzc2FnZUFkYXB0ZXJcIjtcbmV4cG9ydCBjbGFzcyBXZWJzb2NrZXRDb25uZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih1cmksIHF1ZXJ5UGFyYW1ldGVycywgaGVhZGVycywgbWVzc2FnZUZvcm1hdHRlciwgcHJveHlJbmZvLCBlbmFibGVDb21wcmVzc2lvbiA9IGZhbHNlLCBjb25uZWN0aW9uSWQpIHtcbiAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgICBpZiAoIXVyaSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwidXJpXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbWVzc2FnZUZvcm1hdHRlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwibWVzc2FnZUZvcm1hdHRlclwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZNZXNzYWdlRm9ybWF0dGVyID0gbWVzc2FnZUZvcm1hdHRlcjtcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1zID0gXCJcIjtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBpZiAocXVlcnlQYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhcmFtTmFtZSBpbiBxdWVyeVBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1OYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zICs9ICgoaSA9PT0gMCkgJiYgKHVyaS5pbmRleE9mKFwiP1wiKSA9PT0gLTEpKSA/IFwiP1wiIDogXCImXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGVuY29kZVVSSUNvbXBvbmVudChwYXJhbU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBxdWVyeVBhcmFtcyArPSBrZXk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWwgPSBxdWVyeVBhcmFtZXRlcnNbcGFyYW1OYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gZW5jb2RlVVJJQ29tcG9uZW50KHZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVBhcmFtcyArPSBgPSR7dmFsfWA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaGVhZGVycykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBoZWFkZXJOYW1lIGluIGhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeVBhcmFtcyArPSAoKGkgPT09IDApICYmICh1cmkuaW5kZXhPZihcIj9cIikgPT09IC0xKSkgPyBcIj9cIiA6IFwiJlwiO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBlbmNvZGVVUklDb21wb25lbnQoaGVhZGVyc1toZWFkZXJOYW1lXSk7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zICs9IGAke2hlYWRlck5hbWV9PSR7dmFsfWA7XG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2VXJpID0gdXJpICsgcXVlcnlQYXJhbXM7XG4gICAgICAgIHRoaXMucHJpdklkID0gY29ubmVjdGlvbklkID8gY29ubmVjdGlvbklkIDogY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZUFkYXB0ZXIgPSBuZXcgV2Vic29ja2V0TWVzc2FnZUFkYXB0ZXIodGhpcy5wcml2VXJpLCB0aGlzLmlkLCB0aGlzLnByaXZNZXNzYWdlRm9ybWF0dGVyLCBwcm94eUluZm8sIGhlYWRlcnMsIGVuYWJsZUNvbXByZXNzaW9uKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlQWRhcHRlcikge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlQWRhcHRlci5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaXNEaXNwb3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklzRGlzcG9zZWQ7XG4gICAgfVxuICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklkO1xuICAgIH1cbiAgICBnZXQgdXJpKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VXJpO1xuICAgIH1cbiAgICBzdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlQWRhcHRlci5zdGF0ZTtcbiAgICB9XG4gICAgb3BlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlQWRhcHRlci5vcGVuKCk7XG4gICAgfVxuICAgIHNlbmQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2VBZGFwdGVyLnNlbmQobWVzc2FnZSk7XG4gICAgfVxuICAgIHJlYWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZUFkYXB0ZXIucmVhZCgpO1xuICAgIH1cbiAgICBnZXQgZXZlbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2VBZGFwdGVyLmV2ZW50cztcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVdlYnNvY2tldENvbm5lY3Rpb24uanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuLy8gTm9kZS5KUyBzcGVjaWZpYyB3ZWIgc29ja2V0IC8gYnJvd3NlciBzdXBwb3J0LlxuaW1wb3J0IHdzIGZyb20gXCJ3c1wiO1xuaW1wb3J0IHsgSGVhZGVyTmFtZXMgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9IZWFkZXJOYW1lc1wiO1xuaW1wb3J0IHsgQXJndW1lbnROdWxsRXJyb3IsIEJhY2tncm91bmRFdmVudCwgQ29ubmVjdGlvbkNsb3NlZEV2ZW50LCBDb25uZWN0aW9uRXJyb3JFdmVudCwgQ29ubmVjdGlvbkVzdGFibGlzaGVkRXZlbnQsIENvbm5lY3Rpb25NZXNzYWdlUmVjZWl2ZWRFdmVudCwgQ29ubmVjdGlvbk1lc3NhZ2VTZW50RXZlbnQsIENvbm5lY3Rpb25PcGVuUmVzcG9uc2UsIENvbm5lY3Rpb25TdGFydEV2ZW50LCBDb25uZWN0aW9uU3RhdGUsIERlZmVycmVkLCBFdmVudHMsIEV2ZW50U291cmNlLCBNZXNzYWdlVHlwZSwgUXVldWUsIFJhd1dlYnNvY2tldE1lc3NhZ2UsIH0gZnJvbSBcIi4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDZXJ0Q2hlY2tBZ2VudCB9IGZyb20gXCIuL0NlcnRDaGVja3NcIjtcbmV4cG9ydCBjbGFzcyBXZWJzb2NrZXRNZXNzYWdlQWRhcHRlciB7XG4gICAgY29uc3RydWN0b3IodXJpLCBjb25uZWN0aW9uSWQsIG1lc3NhZ2VGb3JtYXR0ZXIsIHByb3h5SW5mbywgaGVhZGVycywgZW5hYmxlQ29tcHJlc3Npb24pIHtcbiAgICAgICAgaWYgKCF1cmkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcInVyaVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1lc3NhZ2VGb3JtYXR0ZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcIm1lc3NhZ2VGb3JtYXR0ZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm94eUluZm8gPSBwcm94eUluZm87XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25FdmVudHMgPSBuZXcgRXZlbnRTb3VyY2UoKTtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbklkID0gY29ubmVjdGlvbklkO1xuICAgICAgICB0aGlzLnByaXZNZXNzYWdlRm9ybWF0dGVyID0gbWVzc2FnZUZvcm1hdHRlcjtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblN0YXRlID0gQ29ubmVjdGlvblN0YXRlLk5vbmU7XG4gICAgICAgIHRoaXMucHJpdlVyaSA9IHVyaTtcbiAgICAgICAgdGhpcy5wcml2SGVhZGVycyA9IGhlYWRlcnM7XG4gICAgICAgIHRoaXMucHJpdkVuYWJsZUNvbXByZXNzaW9uID0gZW5hYmxlQ29tcHJlc3Npb247XG4gICAgICAgIC8vIEFkZCB0aGUgY29ubmVjdGlvbiBJRCB0byB0aGUgaGVhZGVyc1xuICAgICAgICB0aGlzLnByaXZIZWFkZXJzW0hlYWRlck5hbWVzLkNvbm5lY3Rpb25JZF0gPSB0aGlzLnByaXZDb25uZWN0aW9uSWQ7XG4gICAgICAgIHRoaXMucHJpdkxhc3RFcnJvclJlY2VpdmVkID0gXCJcIjtcbiAgICB9XG4gICAgZ2V0IHN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvblN0YXRlO1xuICAgIH1cbiAgICBvcGVuKCkge1xuICAgICAgICBpZiAodGhpcy5wcml2Q29ubmVjdGlvblN0YXRlID09PSBDb25uZWN0aW9uU3RhdGUuRGlzY29ubmVjdGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYENhbm5vdCBvcGVuIGEgY29ubmVjdGlvbiB0aGF0IGlzIGluICR7dGhpcy5wcml2Q29ubmVjdGlvblN0YXRlfSBzdGF0ZWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoRGVmZXJyYWwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoRGVmZXJyYWwucHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoRGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgdGhpcy5wcml2Q2VydGlmaWNhdGVWYWxpZGF0ZWREZWZlcnJhbCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uU3RhdGUgPSBDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGluZztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgV2ViU29ja2V0ICE9PSBcInVuZGVmaW5lZFwiICYmICFXZWJzb2NrZXRNZXNzYWdlQWRhcHRlci5mb3JjZU5wbVdlYlNvY2tldCkge1xuICAgICAgICAgICAgICAgIC8vIEJyb3dzZXIgaGFuZGxlcyBjZXJ0IGNoZWNrcy5cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDZXJ0aWZpY2F0ZVZhbGlkYXRlZERlZmVycmFsLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZXZWJzb2NrZXRDbGllbnQgPSBuZXcgV2ViU29ja2V0KHRoaXMucHJpdlVyaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25zID0geyBoZWFkZXJzOiB0aGlzLnByaXZIZWFkZXJzLCBwZXJNZXNzYWdlRGVmbGF0ZTogdGhpcy5wcml2RW5hYmxlQ29tcHJlc3Npb24gfTtcbiAgICAgICAgICAgICAgICAvLyBUaGUgb2NzcCBsaWJyYXJ5IHdpbGwgaGFuZGxlIHZhbGlkYXRpb24gZm9yIHVzIGFuZCBmYWlsIHRoZSBjb25uZWN0aW9uIGlmIG5lZWRlZC5cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDZXJ0aWZpY2F0ZVZhbGlkYXRlZERlZmVycmFsLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja0FnZW50ID0gbmV3IENlcnRDaGVja0FnZW50KHRoaXMucHJveHlJbmZvKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmFnZW50ID0gY2hlY2tBZ2VudC5HZXRBZ2VudCgpO1xuICAgICAgICAgICAgICAgIC8vIFdvcmthcm91bmQgZm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvY29nbml0aXZlLXNlcnZpY2VzLXNwZWVjaC1zZGstanMvaXNzdWVzLzQ2NVxuICAgICAgICAgICAgICAgIC8vIFdoaWNoIGlzIHJvb3QgY2F1c2VkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9Ub29UYWxsTmF0ZS9ub2RlLWFnZW50LWJhc2UvaXNzdWVzLzYxXG4gICAgICAgICAgICAgICAgY29uc3QgdXJpID0gbmV3IFVSTCh0aGlzLnByaXZVcmkpO1xuICAgICAgICAgICAgICAgIGxldCBwcm90b2NvbCA9IHVyaS5wcm90b2NvbDtcbiAgICAgICAgICAgICAgICBpZiAoKHByb3RvY29sID09PSBudWxsIHx8IHByb3RvY29sID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm90b2NvbC50b0xvY2FsZUxvd2VyQ2FzZSgpKSA9PT0gXCJ3c3M6XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2wgPSBcImh0dHBzOlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvdG9jb2wgPT09IG51bGwgfHwgcHJvdG9jb2wgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb3RvY29sLnRvTG9jYWxlTG93ZXJDYXNlKCkpID09PSBcIndzOlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3RvY29sID0gXCJodHRwOlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5hZ2VudC5wcm90b2NvbCA9IHByb3RvY29sO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdldlYnNvY2tldENsaWVudCA9IG5ldyB3cyh0aGlzLnByaXZVcmksIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50LmJpbmFyeVR5cGUgPSBcImFycmF5YnVmZmVyXCI7XG4gICAgICAgICAgICB0aGlzLnByaXZSZWNlaXZpbmdNZXNzYWdlUXVldWUgPSBuZXcgUXVldWUoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdkRpc2Nvbm5lY3REZWZlcnJhbCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhpcy5wcml2U2VuZE1lc3NhZ2VRdWV1ZSA9IG5ldyBRdWV1ZSgpO1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzU2VuZFF1ZXVlKCkuY2F0Y2goKHJlYXNvbikgPT4ge1xuICAgICAgICAgICAgICAgIEV2ZW50cy5pbnN0YW5jZS5vbkV2ZW50KG5ldyBCYWNrZ3JvdW5kRXZlbnQocmVhc29uKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hEZWZlcnJhbC5yZXNvbHZlKG5ldyBDb25uZWN0aW9uT3BlblJlc3BvbnNlKDUwMCwgZXJyb3IpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoRGVmZXJyYWwucHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uRXZlbnQobmV3IENvbm5lY3Rpb25TdGFydEV2ZW50KHRoaXMucHJpdkNvbm5lY3Rpb25JZCwgdGhpcy5wcml2VXJpKSk7XG4gICAgICAgIHRoaXMucHJpdldlYnNvY2tldENsaWVudC5vbm9wZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByaXZDZXJ0aWZpY2F0ZVZhbGlkYXRlZERlZmVycmFsLnByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblN0YXRlID0gQ29ubmVjdGlvblN0YXRlLkNvbm5lY3RlZDtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IENvbm5lY3Rpb25Fc3RhYmxpc2hlZEV2ZW50KHRoaXMucHJpdkNvbm5lY3Rpb25JZCkpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hEZWZlcnJhbC5yZXNvbHZlKG5ldyBDb25uZWN0aW9uT3BlblJlc3BvbnNlKDIwMCwgXCJcIikpO1xuICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaERlZmVycmFsLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50Lm9uZXJyb3IgPSAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBDb25uZWN0aW9uRXJyb3JFdmVudCh0aGlzLnByaXZDb25uZWN0aW9uSWQsIGUubWVzc2FnZSwgZS50eXBlKSk7XG4gICAgICAgICAgICB0aGlzLnByaXZMYXN0RXJyb3JSZWNlaXZlZCA9IGUubWVzc2FnZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50Lm9uY2xvc2UgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25TdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkNvbm5lY3RpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uU3RhdGUgPSBDb25uZWN0aW9uU3RhdGUuRGlzY29ubmVjdGVkO1xuICAgICAgICAgICAgICAgIC8vIHRoaXMub25FdmVudChuZXcgQ29ubmVjdGlvbkVzdGFibGlzaEVycm9yRXZlbnQodGhpcy5jb25uZWN0aW9uSWQsIGUuY29kZSwgZS5yZWFzb24pKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoRGVmZXJyYWwucmVzb2x2ZShuZXcgQ29ubmVjdGlvbk9wZW5SZXNwb25zZShlLmNvZGUsIGUucmVhc29uICsgXCIgXCIgKyB0aGlzLnByaXZMYXN0RXJyb3JSZWNlaXZlZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblN0YXRlID0gQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZDtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZXZWJzb2NrZXRDbGllbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQ29ubmVjdGlvbkNsb3NlZEV2ZW50KHRoaXMucHJpdkNvbm5lY3Rpb25JZCwgZS5jb2RlLCBlLnJlYXNvbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbkNsb3NlKGUuY29kZSwgZS5yZWFzb24pLmNhdGNoKChyZWFzb24pID0+IHtcbiAgICAgICAgICAgICAgICBFdmVudHMuaW5zdGFuY2Uub25FdmVudChuZXcgQmFja2dyb3VuZEV2ZW50KHJlYXNvbikpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucHJpdldlYnNvY2tldENsaWVudC5vbm1lc3NhZ2UgPSAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV0d29ya1JlY2VpdmVkVGltZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uU3RhdGUgPT09IENvbm5lY3Rpb25TdGF0ZS5Db25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICAgICAgICAgIC8vIGxldCBpZCA9ICsrdGhpcy5pZENvdW50ZXI7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjZWl2aW5nTWVzc2FnZVF1ZXVlLmVucXVldWVGcm9tUHJvbWlzZShkZWZlcnJlZC5wcm9taXNlKTtcbiAgICAgICAgICAgICAgICBpZiAoZS5kYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF3TWVzc2FnZSA9IG5ldyBSYXdXZWJzb2NrZXRNZXNzYWdlKE1lc3NhZ2VUeXBlLkJpbmFyeSwgZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TWVzc2FnZUZvcm1hdHRlclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRvQ29ubmVjdGlvbk1lc3NhZ2UocmF3TWVzc2FnZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChjb25uZWN0aW9uTWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBDb25uZWN0aW9uTWVzc2FnZVJlY2VpdmVkRXZlbnQodGhpcy5wcml2Q29ubmVjdGlvbklkLCBuZXR3b3JrUmVjZWl2ZWRUaW1lLCBjb25uZWN0aW9uTWVzc2FnZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShjb25uZWN0aW9uTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogRXZlbnRzIGZvciB0aGVzZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoYEludmFsaWQgYmluYXJ5IG1lc3NhZ2UgZm9ybWF0LiBFcnJvcjogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByYXdNZXNzYWdlID0gbmV3IFJhd1dlYnNvY2tldE1lc3NhZ2UoTWVzc2FnZVR5cGUuVGV4dCwgZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TWVzc2FnZUZvcm1hdHRlclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRvQ29ubmVjdGlvbk1lc3NhZ2UocmF3TWVzc2FnZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChjb25uZWN0aW9uTWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBDb25uZWN0aW9uTWVzc2FnZVJlY2VpdmVkRXZlbnQodGhpcy5wcml2Q29ubmVjdGlvbklkLCBuZXR3b3JrUmVjZWl2ZWRUaW1lLCBjb25uZWN0aW9uTWVzc2FnZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShjb25uZWN0aW9uTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogRXZlbnRzIGZvciB0aGVzZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoYEludmFsaWQgdGV4dCBtZXNzYWdlIGZvcm1hdC4gRXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hEZWZlcnJhbC5wcm9taXNlO1xuICAgIH1cbiAgICBzZW5kKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25TdGF0ZSAhPT0gQ29ubmVjdGlvblN0YXRlLkNvbm5lY3RlZCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBDYW5ub3Qgc2VuZCBvbiBjb25uZWN0aW9uIHRoYXQgaXMgaW4gJHtDb25uZWN0aW9uU3RhdGVbdGhpcy5wcml2Q29ubmVjdGlvblN0YXRlXX0gc3RhdGVgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtZXNzYWdlU2VuZFN0YXR1c0RlZmVycmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VTZW5kRGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgdGhpcy5wcml2U2VuZE1lc3NhZ2VRdWV1ZS5lbnF1ZXVlRnJvbVByb21pc2UobWVzc2FnZVNlbmREZWZlcnJhbC5wcm9taXNlKTtcbiAgICAgICAgdGhpcy5wcml2TWVzc2FnZUZvcm1hdHRlclxuICAgICAgICAgICAgLmZyb21Db25uZWN0aW9uTWVzc2FnZShtZXNzYWdlKVxuICAgICAgICAgICAgLnRoZW4oKHJhd01lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIG1lc3NhZ2VTZW5kRGVmZXJyYWwucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgTWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICBSYXdXZWJzb2NrZXRNZXNzYWdlOiByYXdNZXNzYWdlLFxuICAgICAgICAgICAgICAgIHNlbmRTdGF0dXNEZWZlcnJhbDogbWVzc2FnZVNlbmRTdGF0dXNEZWZlcnJhbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIG1lc3NhZ2VTZW5kRGVmZXJyYWwucmVqZWN0KGBFcnJvciBmb3JtYXR0aW5nIHRoZSBtZXNzYWdlLiAke2Vycm9yfWApO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VTZW5kU3RhdHVzRGVmZXJyYWwucHJvbWlzZTtcbiAgICB9XG4gICAgcmVhZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25TdGF0ZSAhPT0gQ29ubmVjdGlvblN0YXRlLkNvbm5lY3RlZCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBDYW5ub3QgcmVhZCBvbiBjb25uZWN0aW9uIHRoYXQgaXMgaW4gJHt0aGlzLnByaXZDb25uZWN0aW9uU3RhdGV9IHN0YXRlYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlY2VpdmluZ01lc3NhZ2VRdWV1ZS5kZXF1ZXVlKCk7XG4gICAgfVxuICAgIGNsb3NlKHJlYXNvbikge1xuICAgICAgICBpZiAodGhpcy5wcml2V2Vic29ja2V0Q2xpZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2Q29ubmVjdGlvblN0YXRlICE9PSBDb25uZWN0aW9uU3RhdGUuRGlzY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50LmNsb3NlKDEwMDAsIHJlYXNvbiA/IHJlYXNvbiA6IFwiTm9ybWFsIGNsb3N1cmUgYnkgY2xpZW50XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEaXNjb25uZWN0RGVmZXJyYWwucHJvbWlzZTtcbiAgICB9XG4gICAgZ2V0IGV2ZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25FdmVudHM7XG4gICAgfVxuICAgIHNlbmRSYXdNZXNzYWdlKHNlbmRJdGVtKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBpbmRpY2F0ZXMgd2UgYXJlIGRyYWluaW5nIHRoZSBxdWV1ZSBhbmQgaXQgY2FtZSB3aXRoIG5vIG1lc3NhZ2U7XG4gICAgICAgICAgICBpZiAoIXNlbmRJdGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBDb25uZWN0aW9uTWVzc2FnZVNlbnRFdmVudCh0aGlzLnByaXZDb25uZWN0aW9uSWQsIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgc2VuZEl0ZW0uTWVzc2FnZSkpO1xuICAgICAgICAgICAgLy8gYWRkIGEgY2hlY2sgZm9yIHRoZSB3cyByZWFkeXN0YXRlIGluIG9yZGVyIHRvIHN0b3AgdGhlIHJlZCBjb25zb2xlIGVycm9yICdXZWJTb2NrZXQgaXMgYWxyZWFkeSBpbiBDTE9TSU5HIG9yIENMT1NFRCBzdGF0ZScgYXBwZWFyaW5nXG4gICAgICAgICAgICBpZiAodGhpcy5pc1dlYnNvY2tldE9wZW4pIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hcmd1bWVudFxuICAgICAgICAgICAgICAgIHRoaXMucHJpdldlYnNvY2tldENsaWVudC5zZW5kKHNlbmRJdGVtLlJhd1dlYnNvY2tldE1lc3NhZ2UucGF5bG9hZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJ3ZWJzb2NrZXQgc2VuZCBlcnJvcjogV2Vic29ja2V0IG5vdCByZWFkeSBcIiArIHRoaXMucHJpdkNvbm5lY3Rpb25JZCArIFwiIFwiICsgc2VuZEl0ZW0uTWVzc2FnZS5pZCArIFwiIFwiICsgbmV3IEVycm9yKCkuc3RhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYHdlYnNvY2tldCBzZW5kIGVycm9yOiAke2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25DbG9zZShjb2RlLCByZWFzb24pIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsb3NlUmVhc29uID0gYENvbm5lY3Rpb24gY2xvc2VkLiAke2NvZGV9OiAke3JlYXNvbn1gO1xuICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblN0YXRlID0gQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZDtcbiAgICAgICAgICAgIHRoaXMucHJpdkRpc2Nvbm5lY3REZWZlcnJhbC5yZXNvbHZlKCk7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZSZWNlaXZpbmdNZXNzYWdlUXVldWUuZHJhaW5BbmREaXNwb3NlKCgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBFdmVudHMgZm9yIHRoZXNlID9cbiAgICAgICAgICAgICAgICAvLyBMb2dnZXIuaW5zdGFuY2Uub25FdmVudChuZXcgTG9nZ2luZ0V2ZW50KExvZ1R5cGUuV2FybmluZywgbnVsbCwgYEZhaWxlZCB0byBwcm9jZXNzIHJlY2VpdmVkIG1lc3NhZ2UuIFJlYXNvbjogJHtjbG9zZVJlYXNvbn0sIE1lc3NhZ2U6ICR7SlNPTi5zdHJpbmdpZnkocGVuZGluZ1JlY2VpdmVJdGVtKX1gKSk7XG4gICAgICAgICAgICB9LCBjbG9zZVJlYXNvbik7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZTZW5kTWVzc2FnZVF1ZXVlLmRyYWluQW5kRGlzcG9zZSgocGVuZGluZ1NlbmRJdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgcGVuZGluZ1NlbmRJdGVtLnNlbmRTdGF0dXNEZWZlcnJhbC5yZWplY3QoY2xvc2VSZWFzb24pO1xuICAgICAgICAgICAgfSwgY2xvc2VSZWFzb24pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcHJvY2Vzc1NlbmRRdWV1ZSgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbVRvU2VuZCA9IHRoaXMucHJpdlNlbmRNZXNzYWdlUXVldWUuZGVxdWV1ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbmRJdGVtID0geWllbGQgaXRlbVRvU2VuZDtcbiAgICAgICAgICAgICAgICAvLyBpbmRpY2F0ZXMgd2UgYXJlIGRyYWluaW5nIHRoZSBxdWV1ZSBhbmQgaXQgY2FtZSB3aXRoIG5vIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgaWYgKCFzZW5kSXRlbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuc2VuZFJhd01lc3NhZ2Uoc2VuZEl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICBzZW5kSXRlbS5zZW5kU3RhdHVzRGVmZXJyYWwucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoc2VuZEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbmRJdGVtLnNlbmRTdGF0dXNEZWZlcnJhbC5yZWplY3Qoc2VuZEVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvbkV2ZW50KGV2ZW50KSB7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25FdmVudHMub25FdmVudChldmVudCk7XG4gICAgICAgIEV2ZW50cy5pbnN0YW5jZS5vbkV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgZ2V0IGlzV2Vic29ja2V0T3BlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdldlYnNvY2tldENsaWVudCAmJiB0aGlzLnByaXZXZWJzb2NrZXRDbGllbnQucmVhZHlTdGF0ZSA9PT0gdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50Lk9QRU47XG4gICAgfVxufVxuV2Vic29ja2V0TWVzc2FnZUFkYXB0ZXIuZm9yY2VOcG1XZWJTb2NrZXQgPSBmYWxzZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9V2Vic29ja2V0TWVzc2FnZUFkYXB0ZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogQGNsYXNzIEFkZGVkTG1JbnRlbnRcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgQWRkZWRMbUludGVudCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0gbW9kZWxJbXBsIC0gVGhlIG1vZGVsLlxuICAgICAqIEBwYXJhbSBpbnRlbnROYW1lIC0gVGhlIGludGVudCBuYW1lLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG1vZGVsSW1wbCwgaW50ZW50TmFtZSkge1xuICAgICAgICB0aGlzLm1vZGVsSW1wbCA9IG1vZGVsSW1wbDtcbiAgICAgICAgdGhpcy5pbnRlbnROYW1lID0gaW50ZW50TmFtZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFkZGVkTG1JbnRlbnQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgSlNPTiB1c2VkIGluIHRoZSBhZ2VudC5jb25maWcgbWVzc2FnZSBzZW50IHRvIHRoZSBzcGVlY2ggc2VydmljZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEFnZW50Q29uZmlnIHtcbiAgICB0b0pzb25TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLmlQcml2Q29uZmlnKTtcbiAgICB9XG4gICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pUHJpdkNvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0dGVyIGZvciB0aGUgYWdlbnQuY29uZmlnIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gdmFsdWUgYSBKU09OIHNlcmlhbGl6YWJsZSBvYmplY3QuXG4gICAgICovXG4gICAgc2V0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaVByaXZDb25maWcgPSB2YWx1ZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFnZW50Q29uZmlnLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBBcmd1bWVudE51bGxFcnJvciwgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IEhlYWRlck5hbWVzIH0gZnJvbSBcIi4vSGVhZGVyTmFtZXNcIjtcbmltcG9ydCB7IEF1dGhJbmZvIH0gZnJvbSBcIi4vSUF1dGhlbnRpY2F0aW9uXCI7XG4vKipcbiAqIEBjbGFzc1xuICovXG5leHBvcnQgY2xhc3MgQ29nbml0aXZlU3Vic2NyaXB0aW9uS2V5QXV0aGVudGljYXRpb24ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoZSBDb2duaXRpdmVTdWJzY3JpcHRpb25LZXlBdXRoZW50aWNhdGlvbiBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3Vic2NyaXB0aW9uS2V5IC0gVGhlIHN1YnNjcmlwdGlvbiBrZXlcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzdWJzY3JpcHRpb25LZXkpIHtcbiAgICAgICAgaWYgKCFzdWJzY3JpcHRpb25LZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcInN1YnNjcmlwdGlvbktleVwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZBdXRoSW5mbyA9IG5ldyBBdXRoSW5mbyhIZWFkZXJOYW1lcy5BdXRoS2V5LCBzdWJzY3JpcHRpb25LZXkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIHRoZSBzdWJzY3JpcHRpb24ga2V5LlxuICAgICAqIEBtZW1iZXJcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGF1dGhGZXRjaEV2ZW50SWQgLSBUaGUgaWQgdG8gZmV0Y2guXG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgIGZldGNoKGF1dGhGZXRjaEV2ZW50SWQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnByaXZBdXRoSW5mbyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIHN1YnNjcmlwdGlvbiBrZXkuXG4gICAgICogQG1lbWJlclxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXV0aEZldGNoRXZlbnRJZCAtIFRoZSBpZCB0byBmZXRjaC5cbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgZmV0Y2hPbkV4cGlyeShhdXRoRmV0Y2hFdmVudElkKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5wcml2QXV0aEluZm8pO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29nbml0aXZlU3Vic2NyaXB0aW9uS2V5QXV0aGVudGljYXRpb24uanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IEFyZ3VtZW50TnVsbEVycm9yIH0gZnJvbSBcIi4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBBdXRoSW5mbyB9IGZyb20gXCIuL0lBdXRoZW50aWNhdGlvblwiO1xuaW1wb3J0IHsgSGVhZGVyTmFtZXMgfSBmcm9tIFwiLi9IZWFkZXJOYW1lc1wiO1xuZXhwb3J0IGNsYXNzIENvZ25pdGl2ZVRva2VuQXV0aGVudGljYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGZldGNoQ2FsbGJhY2ssIGZldGNoT25FeHBpcnlDYWxsYmFjaykge1xuICAgICAgICBpZiAoIWZldGNoQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcImZldGNoQ2FsbGJhY2tcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmZXRjaE9uRXhwaXJ5Q2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcImZldGNoT25FeHBpcnlDYWxsYmFja1wiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZGZXRjaENhbGxiYWNrID0gZmV0Y2hDYWxsYmFjaztcbiAgICAgICAgdGhpcy5wcml2RmV0Y2hPbkV4cGlyeUNhbGxiYWNrID0gZmV0Y2hPbkV4cGlyeUNhbGxiYWNrO1xuICAgIH1cbiAgICBmZXRjaChhdXRoRmV0Y2hFdmVudElkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZGZXRjaENhbGxiYWNrKGF1dGhGZXRjaEV2ZW50SWQpLnRoZW4oKHRva2VuKSA9PiBuZXcgQXV0aEluZm8oSGVhZGVyTmFtZXMuQXV0aG9yaXphdGlvbiwgdG9rZW4gPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IENvZ25pdGl2ZVRva2VuQXV0aGVudGljYXRpb24ucHJpdlRva2VuUHJlZml4ICsgdG9rZW4pKTtcbiAgICB9XG4gICAgZmV0Y2hPbkV4cGlyeShhdXRoRmV0Y2hFdmVudElkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZGZXRjaE9uRXhwaXJ5Q2FsbGJhY2soYXV0aEZldGNoRXZlbnRJZCkudGhlbigodG9rZW4pID0+IG5ldyBBdXRoSW5mbyhIZWFkZXJOYW1lcy5BdXRob3JpemF0aW9uLCB0b2tlbiA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogQ29nbml0aXZlVG9rZW5BdXRoZW50aWNhdGlvbi5wcml2VG9rZW5QcmVmaXggKyB0b2tlbikpO1xuICAgIH1cbn1cbkNvZ25pdGl2ZVRva2VuQXV0aGVudGljYXRpb24ucHJpdlRva2VuUHJlZml4ID0gXCJiZWFyZXIgXCI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvZ25pdGl2ZVRva2VuQXV0aGVudGljYXRpb24uanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFNlcnZpY2VQcm9wZXJ0aWVzUHJvcGVydHlOYW1lLCB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IFByb3BlcnR5SWQgfSBmcm9tIFwiLi4vc2RrL0V4cG9ydHNcIjtcbmltcG9ydCB7IFF1ZXJ5UGFyYW1ldGVyTmFtZXMgfSBmcm9tIFwiLi9RdWVyeVBhcmFtZXRlck5hbWVzXCI7XG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbkZhY3RvcnlCYXNlIHtcbiAgICBzdGF0aWMgZ2V0SG9zdFN1ZmZpeChyZWdpb24pIHtcbiAgICAgICAgaWYgKCEhcmVnaW9uKSB7XG4gICAgICAgICAgICBpZiAocmVnaW9uLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChcImNoaW5hXCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiLmF6dXJlLmNuXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVnaW9uLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChcInVzZ292XCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiLmF6dXJlLnVzXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiLm1pY3Jvc29mdC5jb21cIjtcbiAgICB9XG4gICAgc2V0Q29tbW9uVXJsUGFyYW1zKGNvbmZpZywgcXVlcnlQYXJhbXMsIGVuZHBvaW50KSB7XG4gICAgICAgIGNvbnN0IHByb3BlcnR5SWRUb1BhcmFtZXRlck1hcCA9IG5ldyBNYXAoW1xuICAgICAgICAgICAgW1Byb3BlcnR5SWQuU3BlZWNoX1NlZ21lbnRhdGlvblNpbGVuY2VUaW1lb3V0TXMsIFF1ZXJ5UGFyYW1ldGVyTmFtZXMuU2VnbWVudGF0aW9uU2lsZW5jZVRpbWVvdXRNc10sXG4gICAgICAgICAgICBbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmFibGVBdWRpb0xvZ2dpbmcsIFF1ZXJ5UGFyYW1ldGVyTmFtZXMuRW5hYmxlQXVkaW9Mb2dnaW5nXSxcbiAgICAgICAgICAgIFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZFNpbGVuY2VUaW1lb3V0TXMsIFF1ZXJ5UGFyYW1ldGVyTmFtZXMuRW5kU2lsZW5jZVRpbWVvdXRNc10sXG4gICAgICAgICAgICBbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Jbml0aWFsU2lsZW5jZVRpbWVvdXRNcywgUXVlcnlQYXJhbWV0ZXJOYW1lcy5Jbml0aWFsU2lsZW5jZVRpbWVvdXRNc10sXG4gICAgICAgICAgICBbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUG9zdFByb2Nlc3NpbmdPcHRpb24sIFF1ZXJ5UGFyYW1ldGVyTmFtZXMuUG9zdHByb2Nlc3NpbmddLFxuICAgICAgICAgICAgW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1Byb2Zhbml0eU9wdGlvbiwgUXVlcnlQYXJhbWV0ZXJOYW1lcy5Qcm9mYW5pdHldLFxuICAgICAgICAgICAgW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RXb3JkTGV2ZWxUaW1lc3RhbXBzLCBRdWVyeVBhcmFtZXRlck5hbWVzLkVuYWJsZVdvcmRMZXZlbFRpbWVzdGFtcHNdLFxuICAgICAgICAgICAgW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1N0YWJsZVBhcnRpYWxSZXN1bHRUaHJlc2hvbGQsIFF1ZXJ5UGFyYW1ldGVyTmFtZXMuU3RhYmxlSW50ZXJtZWRpYXRlVGhyZXNob2xkXSxcbiAgICAgICAgXSk7XG4gICAgICAgIHByb3BlcnR5SWRUb1BhcmFtZXRlck1hcC5mb3JFYWNoKChwYXJhbWV0ZXJOYW1lLCBwcm9wZXJ0eUlkKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldFVybFBhcmFtZXRlcihwcm9wZXJ0eUlkLCBwYXJhbWV0ZXJOYW1lLCBjb25maWcsIHF1ZXJ5UGFyYW1zLCBlbmRwb2ludCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzZXJ2aWNlUHJvcGVydGllcyA9IEpTT04ucGFyc2UoY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoU2VydmljZVByb3BlcnRpZXNQcm9wZXJ0eU5hbWUsIFwie31cIikpO1xuICAgICAgICBPYmplY3Qua2V5cyhzZXJ2aWNlUHJvcGVydGllcykuZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW3ZhbHVlXSA9IHNlcnZpY2VQcm9wZXJ0aWVzW3ZhbHVlXTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNldFVybFBhcmFtZXRlcihwcm9wSWQsIHBhcmFtZXRlck5hbWUsIGNvbmZpZywgcXVlcnlQYXJhbXMsIGVuZHBvaW50KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkocHJvcElkLCB1bmRlZmluZWQpO1xuICAgICAgICAvLyBGSVhNRTogVGhlIC5zZWFyY2goKSBjaGVjayB3aWxsIGluY29ycmVjdGx5IG1hdGNoIHBhcmFtZXRlciBuYW1lIGFueXdoZXJlIGluIHRoZSBzdHJpbmdcbiAgICAgICAgLy8gICAgICAgIGluY2x1ZGluZyBlLmcuIHRoZSBwYXRoIHBvcnRpb24sIG9yIGV2ZW4gYXMgYSBzdWJzdHJpbmcgb2Ygb3RoZXIgcXVlcnkgcGFyYW1ldGVyc1xuICAgICAgICBpZiAodmFsdWUgJiYgKCFlbmRwb2ludCB8fCBlbmRwb2ludC5zZWFyY2gocGFyYW1ldGVyTmFtZSkgPT09IC0xKSkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbXNbcGFyYW1ldGVyTmFtZV0gPSB2YWx1ZS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db25uZWN0aW9uRmFjdG9yeUJhc2UuanMubWFwXG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IE91dHB1dEZvcm1hdCwgUHJvcGVydHlDb2xsZWN0aW9uLCBQcm9wZXJ0eUlkLCBSZXN1bHRSZWFzb24sIFNwZWVjaFJlY29nbml0aW9uUmVzdWx0IH0gZnJvbSBcIi4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBEZXRhaWxlZFNwZWVjaFBocmFzZSwgRW51bVRyYW5zbGF0aW9uLCBPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUsIFJlY29nbml0aW9uU3RhdHVzLCBTZXJ2aWNlUmVjb2duaXplckJhc2UsIFNpbXBsZVNwZWVjaFBocmFzZSwgU3BlZWNoSHlwb3RoZXNpcyB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbmV4cG9ydCBjbGFzcyBDb252ZXJzYXRpb25TZXJ2aWNlUmVjb2duaXplciBleHRlbmRzIFNlcnZpY2VSZWNvZ25pemVyQmFzZSB7XG4gICAgY29uc3RydWN0b3IoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb1NvdXJjZSwgcmVjb2duaXplckNvbmZpZywgcmVjb2duaXplcikge1xuICAgICAgICBzdXBlcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCByZWNvZ25pemVyKTtcbiAgICAgICAgdGhpcy5oYW5kbGVTcGVlY2hQaHJhc2VNZXNzYWdlID0gKHRleHRCb2R5KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7IHJldHVybiB0aGlzLmhhbmRsZVNwZWVjaFBocmFzZSh0ZXh0Qm9keSk7IH0pO1xuICAgICAgICB0aGlzLmhhbmRsZVNwZWVjaEh5cG90aGVzaXNNZXNzYWdlID0gKHRleHRCb2R5KSA9PiB0aGlzLmhhbmRsZVNwZWVjaEh5cG90aGVzaXModGV4dEJvZHkpO1xuICAgIH1cbiAgICBwcm9jZXNzVHlwZVNwZWNpZmljTWVzc2FnZXMoY29ubmVjdGlvbk1lc3NhZ2UpIHtcbiAgICAgICAgdm9pZCBjb25uZWN0aW9uTWVzc2FnZTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBoYW5kbGVSZWNvZ25pemVkQ2FsbGJhY2socmVzdWx0LCBvZmZzZXQsIHNlc3Npb25JZCkge1xuICAgICAgICB2b2lkIHJlc3VsdDtcbiAgICAgICAgdm9pZCBvZmZzZXQ7XG4gICAgICAgIHZvaWQgc2Vzc2lvbklkO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGhhbmRsZVJlY29nbml6aW5nQ2FsbGJhY2socmVzdWx0LCBkdXJhdGlvbiwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHZvaWQgcmVzdWx0O1xuICAgICAgICB2b2lkIGR1cmF0aW9uO1xuICAgICAgICB2b2lkIHNlc3Npb25JZDtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwcm9jZXNzU3BlZWNoTWVzc2FnZXMoY29ubmVjdGlvbk1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGxldCBwcm9jZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHN3aXRjaCAoY29ubmVjdGlvbk1lc3NhZ2UucGF0aC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcInNwZWVjaC5oeXBvdGhlc2lzXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcInNwZWVjaC5mcmFnbWVudFwiOlxuICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLmhhbmRsZVNwZWVjaEh5cG90aGVzaXNNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVNwZWVjaEh5cG90aGVzaXNNZXNzYWdlKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwic3BlZWNoLnBocmFzZVwiOlxuICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLmhhbmRsZVNwZWVjaFBocmFzZU1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuaGFuZGxlU3BlZWNoUGhyYXNlTWVzc2FnZShjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJvY2Vzc2VkO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2FuY2VsUmVjb2duaXRpb24oc2Vzc2lvbklkLCByZXF1ZXN0SWQsIGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3JDb2RlLCBlcnJvcikge1xuICAgICAgICAvLyBJbXBsZW1lbnRpbmcgdG8gYWxsb3cgaW5oZXJpdGFuY2VcbiAgICAgICAgdm9pZCBzZXNzaW9uSWQ7XG4gICAgICAgIHZvaWQgcmVxdWVzdElkO1xuICAgICAgICB2b2lkIGNhbmNlbGxhdGlvblJlYXNvbjtcbiAgICAgICAgdm9pZCBlcnJvckNvZGU7XG4gICAgICAgIHZvaWQgZXJyb3I7XG4gICAgfVxuICAgIGhhbmRsZVNwZWVjaFBocmFzZSh0ZXh0Qm9keSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3Qgc2ltcGxlID0gU2ltcGxlU3BlZWNoUGhyYXNlLmZyb21KU09OKHRleHRCb2R5KTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdFJlYXNvbiA9IEVudW1UcmFuc2xhdGlvbi5pbXBsVHJhbnNsYXRlUmVjb2duaXRpb25SZXN1bHQoc2ltcGxlLlJlY29nbml0aW9uU3RhdHVzKTtcbiAgICAgICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRQcm9wcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgIHJlc3VsdFByb3BzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHQsIHRleHRCb2R5KTtcbiAgICAgICAgICAgIGNvbnN0IHNpbXBsZU9mZnNldCA9IHNpbXBsZS5PZmZzZXQgKyB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0O1xuICAgICAgICAgICAgbGV0IG9mZnNldCA9IHNpbXBsZU9mZnNldDtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uUGhyYXNlUmVjb2duaXplZCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0ICsgc2ltcGxlLk9mZnNldCArIHNpbXBsZS5EdXJhdGlvbik7XG4gICAgICAgICAgICBpZiAoUmVzdWx0UmVhc29uLkNhbmNlbGVkID09PSByZXN1bHRSZWFzb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxSZWFzb24gPSBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZUNhbmNlbFJlc3VsdChzaW1wbGUuUmVjb2duaXRpb25TdGF0dXMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbmNlbGxhdGlvbkVycm9yQ29kZSA9IEVudW1UcmFuc2xhdGlvbi5pbXBsVHJhbnNsYXRlQ2FuY2VsRXJyb3JDb2RlKHNpbXBsZS5SZWNvZ25pdGlvblN0YXR1cyk7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5jYW5jZWxSZWNvZ25pdGlvbkxvY2FsKGNhbmNlbFJlYXNvbiwgY2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZUVycm9yRGV0YWlscyhjYW5jZWxsYXRpb25FcnJvckNvZGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmlzU3BlZWNoRW5kZWQgJiYgcmVzdWx0UmVhc29uID09PSBSZXN1bHRSZWFzb24uTm9NYXRjaCAmJiBzaW1wbGUuUmVjb2duaXRpb25TdGF0dXMgIT09IFJlY29nbml0aW9uU3RhdHVzLkluaXRpYWxTaWxlbmNlVGltZW91dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUpID09PSBPdXRwdXRGb3JtYXRbT3V0cHV0Rm9ybWF0LlNpbXBsZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIHJlc3VsdFJlYXNvbiwgc2ltcGxlLkRpc3BsYXlUZXh0LCBzaW1wbGUuRHVyYXRpb24sIHNpbXBsZU9mZnNldCwgc2ltcGxlLkxhbmd1YWdlLCBzaW1wbGUuTGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlLCBzaW1wbGUuU3BlYWtlcklkLCB1bmRlZmluZWQsIHRleHRCb2R5LCByZXN1bHRQcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWxlZCA9IERldGFpbGVkU3BlZWNoUGhyYXNlLmZyb21KU09OKHRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsT2Zmc2V0ID0gZGV0YWlsZWQuT2Zmc2V0ICsgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uY3VycmVudFR1cm5BdWRpb09mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNldENvcnJlY3RlZEpzb24gPSBkZXRhaWxlZC5nZXRKc29uV2l0aENvcnJlY3RlZE9mZnNldHModG90YWxPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uUmVzdWx0KHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgcmVzdWx0UmVhc29uLCBkZXRhaWxlZC5UZXh0LCBkZXRhaWxlZC5EdXJhdGlvbiwgdG90YWxPZmZzZXQsIGRldGFpbGVkLkxhbmd1YWdlLCBkZXRhaWxlZC5MYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2UsIGRldGFpbGVkLlNwZWFrZXJJZCwgdW5kZWZpbmVkLCBvZmZzZXRDb3JyZWN0ZWRKc29uLCByZXN1bHRQcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSByZXN1bHQub2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmVjb2duaXplZENhbGxiYWNrKHJlc3VsdCwgb2Zmc2V0LCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGhhbmRsZVNwZWVjaEh5cG90aGVzaXModGV4dEJvZHkpIHtcbiAgICAgICAgY29uc3QgaHlwb3RoZXNpcyA9IFNwZWVjaEh5cG90aGVzaXMuZnJvbUpTT04odGV4dEJvZHkpO1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBoeXBvdGhlc2lzLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQ7XG4gICAgICAgIGNvbnN0IHJlc3VsdFByb3BzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICByZXN1bHRQcm9wcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uUmVzdWx0LCB0ZXh0Qm9keSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIFJlc3VsdFJlYXNvbi5SZWNvZ25pemluZ1NwZWVjaCwgaHlwb3RoZXNpcy5UZXh0LCBoeXBvdGhlc2lzLkR1cmF0aW9uLCBvZmZzZXQsIGh5cG90aGVzaXMuTGFuZ3VhZ2UsIGh5cG90aGVzaXMuTGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlLCBoeXBvdGhlc2lzLlNwZWFrZXJJZCwgdW5kZWZpbmVkLCB0ZXh0Qm9keSwgcmVzdWx0UHJvcHMpO1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkh5cG90aGVzaXMob2Zmc2V0KTtcbiAgICAgICAgdGhpcy5oYW5kbGVSZWNvZ25pemluZ0NhbGxiYWNrKHJlc3VsdCwgaHlwb3RoZXNpcy5EdXJhdGlvbiwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvblNlcnZpY2VSZWNvZ25pemVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtY2xhc3Nlcy1wZXItZmlsZSAqL1xuaW1wb3J0IHsgUHJveHlJbmZvLCBXZWJzb2NrZXRDb25uZWN0aW9uLCB9IGZyb20gXCIuLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCI7XG5pbXBvcnQgeyBPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBEaWFsb2dTZXJ2aWNlQ29uZmlnLCBPdXRwdXRGb3JtYXQsIFByb3BlcnR5SWQgfSBmcm9tIFwiLi4vc2RrL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb25GYWN0b3J5QmFzZSB9IGZyb20gXCIuL0Nvbm5lY3Rpb25GYWN0b3J5QmFzZVwiO1xuaW1wb3J0IHsgV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlciB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbmltcG9ydCB7IEhlYWRlck5hbWVzIH0gZnJvbSBcIi4vSGVhZGVyTmFtZXNcIjtcbmltcG9ydCB7IFF1ZXJ5UGFyYW1ldGVyTmFtZXMgfSBmcm9tIFwiLi9RdWVyeVBhcmFtZXRlck5hbWVzXCI7XG5leHBvcnQgY2xhc3MgRGlhbG9nQ29ubmVjdGlvbkZhY3RvcnkgZXh0ZW5kcyBDb25uZWN0aW9uRmFjdG9yeUJhc2Uge1xuICAgIGNyZWF0ZShjb25maWcsIGF1dGhJbmZvLCBjb25uZWN0aW9uSWQpIHtcbiAgICAgICAgY29uc3QgYXBwbGljYXRpb25JZCA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0FwcGxpY2F0aW9uSWQsIFwiXCIpO1xuICAgICAgICBjb25zdCBkaWFsb2dUeXBlID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25fRGlhbG9nVHlwZSk7XG4gICAgICAgIGNvbnN0IHJlZ2lvbiA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVnaW9uKTtcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2UgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSwgXCJlbi1VU1wiKTtcbiAgICAgICAgY29uc3QgcmVxdWVzdFR1cm5TdGF0dXMgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9SZXF1ZXN0X0JvdF9TdGF0dXNfTWVzc2FnZXMsIFwidHJ1ZVwiKTtcbiAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7fTtcbiAgICAgICAgcXVlcnlQYXJhbXNbSGVhZGVyTmFtZXMuQ29ubmVjdGlvbklkXSA9IGNvbm5lY3Rpb25JZDtcbiAgICAgICAgcXVlcnlQYXJhbXNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5Gb3JtYXRdID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCBPdXRwdXRGb3JtYXRbT3V0cHV0Rm9ybWF0LlNpbXBsZV0pLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuTGFuZ3VhZ2VdID0gbGFuZ3VhZ2U7XG4gICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuUmVxdWVzdEJvdFN0YXR1c01lc3NhZ2VzXSA9IHJlcXVlc3RUdXJuU3RhdHVzO1xuICAgICAgICBpZiAoYXBwbGljYXRpb25JZCkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbXNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5Cb3RJZF0gPSBhcHBsaWNhdGlvbklkO1xuICAgICAgICAgICAgaWYgKGRpYWxvZ1R5cGUgPT09IERpYWxvZ1NlcnZpY2VDb25maWcuRGlhbG9nVHlwZXMuQ3VzdG9tQ29tbWFuZHMpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtc1tIZWFkZXJOYW1lcy5DdXN0b21Db21tYW5kc0FwcElkXSA9IGFwcGxpY2F0aW9uSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzb3VyY2VJbmZpeCA9IGRpYWxvZ1R5cGUgPT09IERpYWxvZ1NlcnZpY2VDb25maWcuRGlhbG9nVHlwZXMuQ3VzdG9tQ29tbWFuZHMgPyBcImNvbW1hbmRzL1wiXG4gICAgICAgICAgICA6IFwiXCI7XG4gICAgICAgIGNvbnN0IHZlcnNpb24gPSBkaWFsb2dUeXBlID09PSBEaWFsb2dTZXJ2aWNlQ29uZmlnLkRpYWxvZ1R5cGVzLkN1c3RvbUNvbW1hbmRzID8gXCJ2MVwiXG4gICAgICAgICAgICA6IGRpYWxvZ1R5cGUgPT09IERpYWxvZ1NlcnZpY2VDb25maWcuRGlhbG9nVHlwZXMuQm90RnJhbWV3b3JrID8gXCJ2M1wiXG4gICAgICAgICAgICAgICAgOiBcInYwXCI7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7fTtcbiAgICAgICAgaWYgKGF1dGhJbmZvLnRva2VuICE9IG51bGwgJiYgYXV0aEluZm8udG9rZW4gIT09IFwiXCIpIHtcbiAgICAgICAgICAgIGhlYWRlcnNbYXV0aEluZm8uaGVhZGVyTmFtZV0gPSBhdXRoSW5mby50b2tlbjtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgVVJMIHVzZWQgZm9yIGNvbm5lY3Rpb24gaXMgY2hvc2VuIGluIGEgcHJpb3JpdHkgb3JkZXIgb2Ygc3BlY2lmaWNhdGlvbjpcbiAgICAgICAgLy8gIDEuIElmIGEgY3VzdG9tIGVuZHBvaW50IGlzIHByb3ZpZGVkLCB0aGF0IFVSTCBpcyB1c2VkIHZlcmJhdGltLlxuICAgICAgICAvLyAgMi4gSWYgYSBjdXN0b20gaG9zdCBpcyBwcm92aWRlZCAoZS5nLiBcIndzczovL215LmN1c3RvbS5lbmRwb2ludC5jb206MTEyM1wiKSwgYSBVUkwgaXMgY29uc3RydWN0ZWQgZnJvbSBpdC5cbiAgICAgICAgLy8gIDMuIElmIG5vIGN1c3RvbSBjb25uZWN0aW9uIGRldGFpbHMgYXJlIHByb3ZpZGVkLCBhIFVSTCBpcyBjb25zdHJ1Y3RlZCBmcm9tIGRlZmF1bHQgdmFsdWVzLlxuICAgICAgICBsZXQgZW5kcG9pbnQgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50LCBcIlwiKTtcbiAgICAgICAgaWYgKCFlbmRwb2ludCkge1xuICAgICAgICAgICAgY29uc3QgaG9zdFN1ZmZpeCA9IENvbm5lY3Rpb25GYWN0b3J5QmFzZS5nZXRIb3N0U3VmZml4KHJlZ2lvbik7XG4gICAgICAgICAgICBjb25zdCBob3N0ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Ib3N0LCBgd3NzOi8vJHtyZWdpb259LiR7RGlhbG9nQ29ubmVjdGlvbkZhY3RvcnkuQmFzZVVybH0ke2hvc3RTdWZmaXh9YCk7XG4gICAgICAgICAgICBjb25zdCBzdGFuZGFyZGl6ZWRIb3N0ID0gaG9zdC5lbmRzV2l0aChcIi9cIikgPyBob3N0IDogaG9zdCArIFwiL1wiO1xuICAgICAgICAgICAgZW5kcG9pbnQgPSBgJHtzdGFuZGFyZGl6ZWRIb3N0fSR7cmVzb3VyY2VJbmZpeH0ke0RpYWxvZ0Nvbm5lY3Rpb25GYWN0b3J5LkFwaUtleX0vJHt2ZXJzaW9ufWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRDb21tb25VcmxQYXJhbXMoY29uZmlnLCBxdWVyeVBhcmFtcywgZW5kcG9pbnQpO1xuICAgICAgICBjb25zdCBlbmFibGVDb21wcmVzc2lvbiA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFwiU1BFRUNILUVuYWJsZVdlYnNvY2tldENvbXByZXNzaW9uXCIsIFwiZmFsc2VcIikgPT09IFwidHJ1ZVwiO1xuICAgICAgICByZXR1cm4gbmV3IFdlYnNvY2tldENvbm5lY3Rpb24oZW5kcG9pbnQsIHF1ZXJ5UGFyYW1zLCBoZWFkZXJzLCBuZXcgV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlcigpLCBQcm94eUluZm8uZnJvbVJlY29nbml6ZXJDb25maWcoY29uZmlnKSwgZW5hYmxlQ29tcHJlc3Npb24sIGNvbm5lY3Rpb25JZCk7XG4gICAgfVxufVxuRGlhbG9nQ29ubmVjdGlvbkZhY3RvcnkuQXBpS2V5ID0gXCJhcGlcIjtcbkRpYWxvZ0Nvbm5lY3Rpb25GYWN0b3J5LkJhc2VVcmwgPSBcImNvbnZhaS5zcGVlY2hcIjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGlhbG9nQ29ubmVjdG9yRmFjdG9yeS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBSZXBsYXlhYmxlQXVkaW9Ob2RlIH0gZnJvbSBcIi4uL2NvbW1vbi5icm93c2VyL0V4cG9ydHNcIjtcbmltcG9ydCB7IFNlbmRpbmdBZ2VudENvbnRleHRNZXNzYWdlRXZlbnQgfSBmcm9tIFwiLi4vY29tbW9uL0RpYWxvZ0V2ZW50c1wiO1xuaW1wb3J0IHsgQmFja2dyb3VuZEV2ZW50LCBjcmVhdGVHdWlkLCBjcmVhdGVOb0Rhc2hHdWlkLCBEZWZlcnJlZCwgRXZlbnRzLCBFdmVudFNvdXJjZSwgTWVzc2FnZVR5cGUsIFNlcnZpY2VFdmVudCwgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbCB9IGZyb20gXCIuLi9zZGsvQXVkaW8vQXVkaW9PdXRwdXRGb3JtYXRcIjtcbmltcG9ydCB7IEFjdGl2aXR5UmVjZWl2ZWRFdmVudEFyZ3MsIENhbmNlbGxhdGlvbkVycm9yQ29kZSwgQ2FuY2VsbGF0aW9uUmVhc29uLCBEaWFsb2dTZXJ2aWNlQ29uZmlnLCBQcm9wZXJ0eUNvbGxlY3Rpb24sIFByb3BlcnR5SWQsIFJlY29nbml0aW9uRXZlbnRBcmdzLCBSZXN1bHRSZWFzb24sIFNlc3Npb25FdmVudEFyZ3MsIFNwZWVjaFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MsIFNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzLCBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdCwgVHVyblN0YXR1c1JlY2VpdmVkRXZlbnRBcmdzLCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgRGlhbG9nU2VydmljZVR1cm5TdGF0ZU1hbmFnZXIgfSBmcm9tIFwiLi9EaWFsb2dTZXJ2aWNlVHVyblN0YXRlTWFuYWdlclwiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBFbnVtVHJhbnNsYXRpb24sIFJlY29nbml0aW9uU3RhdHVzLCBTZXJ2aWNlUmVjb2duaXplckJhc2UsIFNpbXBsZVNwZWVjaFBocmFzZSwgU3BlZWNoRGV0ZWN0ZWQsIFNwZWVjaEh5cG90aGVzaXMsIFNwZWVjaEtleXdvcmQsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQWN0aXZpdHlQYXlsb2FkUmVzcG9uc2UgfSBmcm9tIFwiLi9TZXJ2aWNlTWVzc2FnZXMvQWN0aXZpdHlSZXNwb25zZVBheWxvYWRcIjtcbmltcG9ydCB7IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlIH0gZnJvbSBcIi4vU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UuSW50ZXJuYWxcIjtcbmV4cG9ydCBjbGFzcyBEaWFsb2dTZXJ2aWNlQWRhcHRlciBleHRlbmRzIFNlcnZpY2VSZWNvZ25pemVyQmFzZSB7XG4gICAgY29uc3RydWN0b3IoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb1NvdXJjZSwgcmVjb2duaXplckNvbmZpZywgZGlhbG9nU2VydmljZUNvbm5lY3Rvcikge1xuICAgICAgICBzdXBlcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCBkaWFsb2dTZXJ2aWNlQ29ubmVjdG9yKTtcbiAgICAgICAgdGhpcy5wcml2RXZlbnRzID0gbmV3IEV2ZW50U291cmNlKCk7XG4gICAgICAgIHRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IgPSBkaWFsb2dTZXJ2aWNlQ29ubmVjdG9yO1xuICAgICAgICB0aGlzLnJlY2VpdmVNZXNzYWdlT3ZlcnJpZGUgPSAoKSA9PiB0aGlzLnJlY2VpdmVEaWFsb2dNZXNzYWdlT3ZlcnJpZGUoKTtcbiAgICAgICAgdGhpcy5wcml2VHVyblN0YXRlTWFuYWdlciA9IG5ldyBEaWFsb2dTZXJ2aWNlVHVyblN0YXRlTWFuYWdlcigpO1xuICAgICAgICB0aGlzLnJlY29nbml6ZU92ZXJyaWRlID1cbiAgICAgICAgICAgIChyZWNvTW9kZSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSA9PiB0aGlzLmxpc3Rlbk9uY2UocmVjb01vZGUsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgICAgIHRoaXMucG9zdENvbm5lY3RJbXBsT3ZlcnJpZGUgPSAoY29ubmVjdGlvbikgPT4gdGhpcy5kaWFsb2dDb25uZWN0SW1wbChjb25uZWN0aW9uKTtcbiAgICAgICAgdGhpcy5jb25maWdDb25uZWN0aW9uT3ZlcnJpZGUgPSAoY29ubmVjdGlvbikgPT4gdGhpcy5jb25maWdDb25uZWN0aW9uKGNvbm5lY3Rpb24pO1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RPdmVycmlkZSA9ICgpID0+IHRoaXMucHJpdkRpc2Nvbm5lY3QoKTtcbiAgICAgICAgdGhpcy5wcml2RGlhbG9nQXVkaW9Tb3VyY2UgPSBhdWRpb1NvdXJjZTtcbiAgICAgICAgdGhpcy5hZ2VudENvbmZpZ1NlbnQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2TGFzdFJlc3VsdCA9IG51bGw7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbkV2ZW50cy5hdHRhY2goKGNvbm5lY3Rpb25FdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb25FdmVudC5uYW1lID09PSBcIkNvbm5lY3Rpb25DbG9zZWRFdmVudFwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBpbnRlcmFjdGlvbkd1aWQgPSBjcmVhdGVHdWlkKCk7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgICAgICBjb25zdCBhZ2VudE1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgY29udGV4dDoge1xuICAgICAgICAgICAgICAgICAgICBpbnRlcmFjdGlvbklkOiBpbnRlcmFjdGlvbkd1aWRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbiAgICAgICAgICAgICAgICBtZXNzYWdlUGF5bG9hZDogSlNPTi5wYXJzZShtZXNzYWdlKSxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiAwLjVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBhZ2VudE1lc3NhZ2VKc29uID0gSlNPTi5zdHJpbmdpZnkoYWdlbnRNZXNzYWdlKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgeWllbGQgY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBcImFnZW50XCIsIHJlcXVlc3RJZCwgXCJhcHBsaWNhdGlvbi9qc29uXCIsIGFnZW50TWVzc2FnZUpzb24pKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHByaXZEaXNjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgeWllbGQgdGhpcy5jYW5jZWxSZWNvZ25pdGlvbih0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBDYW5jZWxsYXRpb25FcnJvckNvZGUuTm9FcnJvciwgXCJEaXNjb25uZWN0aW5nXCIpO1xuICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFnZW50Q29uZmlnU2VudCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcHJvY2Vzc1R5cGVTcGVjaWZpY01lc3NhZ2VzKGNvbm5lY3Rpb25NZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdFByb3BzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICBpZiAoY29ubmVjdGlvbk1lc3NhZ2UubWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLlRleHQpIHtcbiAgICAgICAgICAgIHJlc3VsdFByb3BzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHQsIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICBsZXQgcHJvY2Vzc2VkO1xuICAgICAgICBzd2l0Y2ggKGNvbm5lY3Rpb25NZXNzYWdlLnBhdGgudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgY2FzZSBcInNwZWVjaC5waHJhc2VcIjpcbiAgICAgICAgICAgICAgICBjb25zdCBzcGVlY2hQaHJhc2UgPSBTaW1wbGVTcGVlY2hQaHJhc2UuZnJvbUpTT04oY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uUGhyYXNlUmVjb2duaXplZCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0ICsgc3BlZWNoUGhyYXNlLk9mZnNldCArIHNwZWVjaFBocmFzZS5EdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKHNwZWVjaFBocmFzZS5SZWNvZ25pdGlvblN0YXR1cyAhPT0gUmVjb2duaXRpb25TdGF0dXMuVG9vTWFueVJlcXVlc3RzICYmIHNwZWVjaFBocmFzZS5SZWNvZ25pdGlvblN0YXR1cyAhPT0gUmVjb2duaXRpb25TdGF0dXMuRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJncyA9IHRoaXMuZmlyZUV2ZW50Rm9yUmVzdWx0KHNwZWVjaFBocmFzZSwgcmVzdWx0UHJvcHMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZMYXN0UmVzdWx0ID0gYXJncy5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IucmVjb2duaXplZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnJlY29nbml6ZWQodGhpcy5wcml2RGlhbG9nU2VydmljZUNvbm5lY3RvciwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzcGVlY2guaHlwb3RoZXNpc1wiOlxuICAgICAgICAgICAgICAgIGNvbnN0IGh5cG90aGVzaXMgPSBTcGVlY2hIeXBvdGhlc2lzLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBoeXBvdGhlc2lzLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQ7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uUmVzdWx0KHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgUmVzdWx0UmVhc29uLlJlY29nbml6aW5nU3BlZWNoLCBoeXBvdGhlc2lzLlRleHQsIGh5cG90aGVzaXMuRHVyYXRpb24sIG9mZnNldCwgaHlwb3RoZXNpcy5MYW5ndWFnZSwgaHlwb3RoZXNpcy5MYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2UsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSwgcmVzdWx0UHJvcHMpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uSHlwb3RoZXNpcyhvZmZzZXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV2ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzKHJlc3VsdCwgaHlwb3RoZXNpcy5EdXJhdGlvbiwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnJlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnJlY29nbml6aW5nKHRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IsIGV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzcGVlY2gua2V5d29yZFwiOlxuICAgICAgICAgICAgICAgIGNvbnN0IGtleXdvcmQgPSBTcGVlY2hLZXl3b3JkLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQodGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBrZXl3b3JkLlN0YXR1cyA9PT0gXCJBY2NlcHRlZFwiID8gUmVzdWx0UmVhc29uLlJlY29nbml6ZWRLZXl3b3JkIDogUmVzdWx0UmVhc29uLk5vTWF0Y2gsIGtleXdvcmQuVGV4dCwga2V5d29yZC5EdXJhdGlvbiwga2V5d29yZC5PZmZzZXQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHksIHJlc3VsdFByb3BzKTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5d29yZC5TdGF0dXMgIT09IFwiQWNjZXB0ZWRcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZMYXN0UmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncyhyZXN1bHQsIHJlc3VsdC5kdXJhdGlvbiwgcmVzdWx0LnJlc3VsdElkKTtcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnJlY29nbml6ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IucmVjb2duaXplZCh0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLCBldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYXVkaW9cIjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvUmVxdWVzdElkID0gY29ubmVjdGlvbk1lc3NhZ2UucmVxdWVzdElkLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm4gPSB0aGlzLnByaXZUdXJuU3RhdGVNYW5hZ2VyLkdldFR1cm4oYXVkaW9SZXF1ZXN0SWQpO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW1wdHkgYmluYXJ5IG1lc3NhZ2Ugc2lnbmFscyBlbmQgb2Ygc3RyZWFtLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uTWVzc2FnZS5iaW5hcnlCb2R5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVybi5lbmRBdWRpb1N0cmVhbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVybi5hdWRpb1N0cmVhbS53cml0ZShjb25uZWN0aW9uTWVzc2FnZS5iaW5hcnlCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcm9jZXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInJlc3BvbnNlXCI6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJlc3BvbnNlTWVzc2FnZShjb25uZWN0aW9uTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlZmZlcmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIGRlZmZlcmFsLnJlc29sdmUocHJvY2Vzc2VkKTtcbiAgICAgICAgcmV0dXJuIGRlZmZlcmFsLnByb21pc2U7XG4gICAgfVxuICAgIC8vIENhbmNlbHMgcmVjb2duaXRpb24uXG4gICAgY2FuY2VsUmVjb2duaXRpb24oc2Vzc2lvbklkLCByZXF1ZXN0SWQsIGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3JDb2RlLCBlcnJvcikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1JlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25TdG9wUmVjb2duaXppbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IuY2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMuc2V0UHJvcGVydHkoQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBDYW5jZWxsYXRpb25FcnJvckNvZGVbZXJyb3JDb2RlXSk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FuY2VsRXZlbnQgPSBuZXcgU3BlZWNoUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncyhjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yLCBlcnJvckNvZGUsIHVuZGVmaW5lZCwgc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLmNhbmNlbGVkKHRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IsIGNhbmNlbEV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uUmVzdWx0KHVuZGVmaW5lZCwgLy8gUmVzdWx0SWRcbiAgICAgICAgICAgICAgICAgICAgUmVzdWx0UmVhc29uLkNhbmNlbGVkLCB1bmRlZmluZWQsIC8vIFRleHRcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBEdXJhdGlvblxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsIC8vIE9mZnNldFxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsIC8vIExhbmd1YWdlXG4gICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gTGFuZ3VhZ2UgRGV0ZWN0aW9uIENvbmZpZGVuY2VcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBTcGVha2VyIElkXG4gICAgICAgICAgICAgICAgICAgIGVycm9yLCB1bmRlZmluZWQsIC8vIEpzb25cbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllcyk7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF9iKSB7IH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsaXN0ZW5PbmNlKHJlY29Nb2RlLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcucmVjb2duaXRpb25Nb2RlID0gcmVjb01vZGU7XG4gICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2sgPSBzdWNjZXNzQ2FsbGJhY2s7XG4gICAgICAgICAgICB0aGlzLnByaXZFcnJvckNhbGxiYWNrID0gZXJyb3JDYWxsYmFjaztcbiAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnN0YXJ0TmV3UmVjb2duaXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmxpc3RlbkZvclNlcnZpY2VUZWxlbWV0cnkodGhpcy5wcml2RGlhbG9nQXVkaW9Tb3VyY2UuZXZlbnRzKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcucGFyYW1ldGVycy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaF9TZXNzaW9uSWQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAvLyBTdGFydCB0aGUgY29ubmVjdGlvbiB0byB0aGUgc2VydmljZS4gVGhlIHByb21pc2UgdGhpcyB3aWxsIGNyZWF0ZSBpcyBzdG9yZWQgYW5kIHdpbGwgYmUgdXNlZCBieSBjb25maWd1cmVDb25uZWN0aW9uKCkuXG4gICAgICAgICAgICBjb25zdCBjb25Qcm9taXNlID0gdGhpcy5jb25uZWN0SW1wbCgpO1xuICAgICAgICAgICAgY29uc3QgcHJlQXVkaW9Qcm9taXNlID0gdGhpcy5zZW5kUHJlQXVkaW9NZXNzYWdlcygpO1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHlpZWxkIHRoaXMucHJpdkRpYWxvZ0F1ZGlvU291cmNlLmF0dGFjaCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5hdWRpb05vZGVJZCk7XG4gICAgICAgICAgICBjb25zdCBmb3JtYXQgPSB5aWVsZCB0aGlzLnByaXZEaWFsb2dBdWRpb1NvdXJjZS5mb3JtYXQ7XG4gICAgICAgICAgICBjb25zdCBkZXZpY2VJbmZvID0geWllbGQgdGhpcy5wcml2RGlhbG9nQXVkaW9Tb3VyY2UuZGV2aWNlSW5mbztcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvTm9kZSA9IG5ldyBSZXBsYXlhYmxlQXVkaW9Ob2RlKG5vZGUsIGZvcm1hdC5hdmdCeXRlc1BlclNlYyk7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkF1ZGlvU291cmNlQXR0YWNoQ29tcGxldGVkKGF1ZGlvTm9kZSwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5TcGVlY2hTZXJ2aWNlQ29uZmlnLkNvbnRleHQuYXVkaW8gPSB7IHNvdXJjZTogZGV2aWNlSW5mbyB9O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB5aWVsZCBjb25Qcm9taXNlO1xuICAgICAgICAgICAgICAgIHlpZWxkIHByZUF1ZGlvUHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuY2FuY2VsUmVjb2duaXRpb24odGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIENhbmNlbGxhdGlvblJlYXNvbi5FcnJvciwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLkNvbm5lY3Rpb25GYWlsdXJlLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvblN0YXJ0RXZlbnRBcmdzID0gbmV3IFNlc3Npb25FdmVudEFyZ3ModGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlJlY29nbml6ZXIuc2Vzc2lvblN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyLnNlc3Npb25TdGFydGVkKHRoaXMucHJpdlJlY29nbml6ZXIsIHNlc3Npb25TdGFydEV2ZW50QXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhdWRpb1NlbmRQcm9taXNlID0gdGhpcy5zZW5kQXVkaW8oYXVkaW9Ob2RlKTtcbiAgICAgICAgICAgIC8vIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICBhdWRpb1NlbmRQcm9taXNlLnRoZW4oKCkgPT4geyB9LCAoZXJyb3IpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmNhbmNlbFJlY29nbml0aW9uKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBDYW5jZWxsYXRpb25SZWFzb24uRXJyb3IsIENhbmNlbGxhdGlvbkVycm9yQ29kZS5SdW50aW1lRXJyb3IsIGVycm9yKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIEVzdGFibGlzaGVzIGEgd2Vic29ja2V0IGNvbm5lY3Rpb24gdG8gdGhlIGVuZCBwb2ludC5cbiAgICBkaWFsb2dDb25uZWN0SW1wbChjb25uZWN0aW9uKSB7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Mb29wID0gdGhpcy5zdGFydE1lc3NhZ2VMb29wKCk7XG4gICAgICAgIHJldHVybiBjb25uZWN0aW9uO1xuICAgIH1cbiAgICByZWNlaXZlRGlhbG9nTWVzc2FnZU92ZXJyaWRlKCkge1xuICAgICAgICAvLyB3ZSB3b24ndCByZWx5IG9uIHRoZSBjYXNjYWRpbmcgcHJvbWlzZXMgb2YgdGhlIGNvbm5lY3Rpb24gc2luY2Ugd2Ugd2FudCB0byBjb250aW51YWxseSBiZSBhdmFpbGFibGUgdG8gcmVjZWl2ZSBtZXNzYWdlc1xuICAgICAgICBjb25zdCBjb21tdW5pY2F0aW9uQ3VzdG9kaWFuID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIGNvbnN0IGxvb3AgPSAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzRGlzcG9zZWQgPSB0aGlzLmlzRGlzcG9zZWQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXJtaW5hdGVNZXNzYWdlTG9vcCA9ICghdGhpcy5pc0Rpc3Bvc2VkKCkgJiYgdGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzRGlzcG9zZWQgfHwgdGVybWluYXRlTWVzc2FnZUxvb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UncmUgZG9uZS5cbiAgICAgICAgICAgICAgICAgICAgY29tbXVuaWNhdGlvbkN1c3RvZGlhbi5yZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHlpZWxkIHRoaXMuZmV0Y2hDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHlpZWxkIGNvbm5lY3Rpb24ucmVhZCgpO1xuICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9vcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uTWVzc2FnZSA9IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlLmZyb21Db25uZWN0aW9uTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbm5lY3Rpb25NZXNzYWdlLnBhdGgudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidHVybi5zdGFydFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXF1ZXN0SWQgPSBjb25uZWN0aW9uTWVzc2FnZS5yZXF1ZXN0SWQudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdWRpb1Nlc3Npb25SZXFJZCA9IHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHR1cm4gc3RhcnRlZCBieSB0aGUgc2VydmljZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0dXJuUmVxdWVzdElkICE9PSBhdWRpb1Nlc3Npb25SZXFJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZUdXJuU3RhdGVNYW5hZ2VyLlN0YXJ0VHVybih0dXJuUmVxdWVzdElkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uU2VydmljZVR1cm5TdGFydFJlc3BvbnNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzcGVlY2guc3RhcnRkZXRlY3RlZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlZWNoU3RhcnREZXRlY3RlZCA9IFNwZWVjaERldGVjdGVkLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZWVjaFN0YXJ0RXZlbnRBcmdzID0gbmV3IFJlY29nbml0aW9uRXZlbnRBcmdzKHNwZWVjaFN0YXJ0RGV0ZWN0ZWQuT2Zmc2V0LCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2UmVjb2duaXplci5zcGVlY2hTdGFydERldGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjb2duaXplci5zcGVlY2hTdGFydERldGVjdGVkKHRoaXMucHJpdlJlY29nbml6ZXIsIHNwZWVjaFN0YXJ0RXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3BlZWNoLmVuZGRldGVjdGVkXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQganNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbiA9IGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3Qgd2FzIGVtcHR5LCB0aGUgSlNPTiByZXR1cm5lZCBpcyBlbXB0eS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uID0gXCJ7IE9mZnNldDogMCB9XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGVlY2hTdG9wRGV0ZWN0ZWQgPSBTcGVlY2hEZXRlY3RlZC5mcm9tSlNPTihqc29uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uU2VydmljZVJlY29nbml6ZWQoc3BlZWNoU3RvcERldGVjdGVkLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlZWNoU3RvcEV2ZW50QXJncyA9IG5ldyBSZWNvZ25pdGlvbkV2ZW50QXJncyhzcGVlY2hTdG9wRGV0ZWN0ZWQuT2Zmc2V0ICsgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uY3VycmVudFR1cm5BdWRpb09mZnNldCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlJlY29nbml6ZXIuc3BlZWNoRW5kRGV0ZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyLnNwZWVjaEVuZERldGVjdGVkKHRoaXMucHJpdlJlY29nbml6ZXIsIHNwZWVjaFN0b3BFdmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0dXJuLmVuZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5FbmRSZXF1ZXN0SWQgPSBjb25uZWN0aW9uTWVzc2FnZS5yZXF1ZXN0SWQudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdWRpb1Nlc3Npb25SZXFJZCA9IHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHR1cm4gc3RhcnRlZCBieSB0aGUgc2VydmljZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0dXJuRW5kUmVxdWVzdElkICE9PSBhdWRpb1Nlc3Npb25SZXFJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZUdXJuU3RhdGVNYW5hZ2VyLkNvbXBsZXRlVHVybih0dXJuRW5kUmVxdWVzdElkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF1ZGlvIHNlc3Npb24gdHVyblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXNzaW9uU3RvcEV2ZW50QXJncyA9IG5ldyBTZXNzaW9uRXZlbnRBcmdzKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uU2VydmljZVR1cm5FbmRSZXNwb25zZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5pc0NvbnRpbnVvdXNSZWNvZ25pdGlvbiB8fCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1NwZWVjaEVuZGVkIHx8ICF0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1JlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZSZWNvZ25pemVyLnNlc3Npb25TdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjb2duaXplci5zZXNzaW9uU3RvcHBlZCh0aGlzLnByaXZSZWNvZ25pemVyLCBzZXNzaW9uU3RvcEV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVwb3J0IHJlc3VsdCB0byBwcm9taXNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2sgJiYgdGhpcy5wcml2TGFzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2sodGhpcy5wcml2TGFzdFJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TGFzdFJlc3VsdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RXJyb3JDYWxsYmFjayhlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IGludm9rZSB0aGUgY2FsbCBiYWNrIG9uY2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgaWYgaXQncyBzdWNjZXNzZnVsIGRvbid0IGludm9rZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVycm9yIGFmdGVyIHRoYXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZFcnJvckNhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZCA9IHlpZWxkIHRoaXMucHJvY2Vzc1R5cGVTcGVjaWZpY01lc3NhZ2VzKGNvbm5lY3Rpb25NZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXByb2Nlc3NlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnNlcnZpY2VFdmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VydmljZUV2ZW50cy5vbkV2ZW50KG5ldyBTZXJ2aWNlRXZlbnQoY29ubmVjdGlvbk1lc3NhZ2UucGF0aC50b0xvd2VyQ2FzZSgpLCBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXQgPSBsb29wKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMudGVybWluYXRlTWVzc2FnZUxvb3AgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbW11bmljYXRpb25DdXN0b2RpYW4ucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgbG9vcCgpLmNhdGNoKChyZWFzb24pID0+IHtcbiAgICAgICAgICAgIEV2ZW50cy5pbnN0YW5jZS5vbkV2ZW50KG5ldyBCYWNrZ3JvdW5kRXZlbnQocmVhc29uKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY29tbXVuaWNhdGlvbkN1c3RvZGlhbi5wcm9taXNlO1xuICAgIH1cbiAgICBzdGFydE1lc3NhZ2VMb29wKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCA9IGZhbHNlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnJlY2VpdmVEaWFsb2dNZXNzYWdlT3ZlcnJpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuY2FuY2VsUmVjb2duaXRpb24odGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIENhbmNlbGxhdGlvblJlYXNvbi5FcnJvciwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLlJ1bnRpbWVFcnJvciwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gVGFrZXMgYW4gZXN0YWJsaXNoZWQgd2Vic29ja2V0IGNvbm5lY3Rpb24gdG8gdGhlIGVuZHBvaW50IGFuZCBzZW5kcyBzcGVlY2ggY29uZmlndXJhdGlvbiBpbmZvcm1hdGlvbi5cbiAgICBjb25maWdDb25uZWN0aW9uKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRlcm1pbmF0ZU1lc3NhZ2VMb29wKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIkNvbm5lY3Rpb24gdG8gc2VydmljZSB0ZXJtaW5hdGVkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHlpZWxkIHRoaXMuc2VuZFNwZWVjaFNlcnZpY2VDb25maWcoY29ubmVjdGlvbiwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24sIHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcuU3BlZWNoU2VydmljZUNvbmZpZy5zZXJpYWxpemUoKSk7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnNlbmRBZ2VudENvbmZpZyhjb25uZWN0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2VuZFByZUF1ZGlvTWVzc2FnZXMoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uID0geWllbGQgdGhpcy5mZXRjaENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMuYWRkS2V5d29yZENvbnRleHREYXRhKCk7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnNlbmRTcGVlY2hDb250ZXh0KGNvbm5lY3Rpb24sIHRydWUpO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5zZW5kQWdlbnRDb250ZXh0KGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5zZW5kV2F2ZUhlYWRlcihjb25uZWN0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNlbmRBZ2VudENvbmZpZyhjb25uZWN0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLmFnZW50Q29uZmlnICYmICF0aGlzLmFnZW50Q29uZmlnU2VudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdlJlY29nbml6ZXJDb25maWdcbiAgICAgICAgICAgICAgICAucGFyYW1ldGVyc1xuICAgICAgICAgICAgICAgIC5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9EaWFsb2dUeXBlKSA9PT0gRGlhbG9nU2VydmljZUNvbmZpZy5EaWFsb2dUeXBlcy5DdXN0b21Db21tYW5kcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuYWdlbnRDb25maWcuZ2V0KCk7XG4gICAgICAgICAgICAgICAgY29uZmlnLmJvdEluZm8uY29tbWFuZHNDdWx0dXJlID0gdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlLCBcImVuLXVzXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWdlbnRDb25maWcuc2V0KGNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IFNlbmRpbmdBZ2VudENvbnRleHRNZXNzYWdlRXZlbnQodGhpcy5hZ2VudENvbmZpZykpO1xuICAgICAgICAgICAgY29uc3QgYWdlbnRDb25maWdKc29uID0gdGhpcy5hZ2VudENvbmZpZy50b0pzb25TdHJpbmcoKTtcbiAgICAgICAgICAgIC8vIGd1YXJkIGFnYWluc3Qgc2VuZGluZyB0aGlzIG11bHRpcGxlIHRpbWVzIG9uIG9uZSBjb25uZWN0aW9uXG4gICAgICAgICAgICB0aGlzLmFnZW50Q29uZmlnU2VudCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBcImFnZW50LmNvbmZpZ1wiLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIFwiYXBwbGljYXRpb24vanNvblwiLCBhZ2VudENvbmZpZ0pzb24pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNlbmRBZ2VudENvbnRleHQoY29ubmVjdGlvbikge1xuICAgICAgICBjb25zdCBndWlkID0gY3JlYXRlR3VpZCgpO1xuICAgICAgICBjb25zdCBzcGVlY2hBY3Rpdml0eVRlbXBsYXRlID0gdGhpcy5wcml2RGlhbG9nU2VydmljZUNvbm5lY3Rvci5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX1NwZWVjaF9BY3Rpdml0eV9UZW1wbGF0ZSk7XG4gICAgICAgIGNvbnN0IGFnZW50Q29udGV4dCA9IHtcbiAgICAgICAgICAgIGNoYW5uZWxEYXRhOiBcIlwiLFxuICAgICAgICAgICAgY29udGV4dDoge1xuICAgICAgICAgICAgICAgIGludGVyYWN0aW9uSWQ6IGd1aWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXNzYWdlUGF5bG9hZDogdHlwZW9mIHNwZWVjaEFjdGl2aXR5VGVtcGxhdGUgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHNwZWVjaEFjdGl2aXR5VGVtcGxhdGUsXG4gICAgICAgICAgICB2ZXJzaW9uOiAwLjVcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYWdlbnRDb250ZXh0SnNvbiA9IEpTT04uc3RyaW5naWZ5KGFnZW50Q29udGV4dCk7XG4gICAgICAgIHJldHVybiBjb25uZWN0aW9uLnNlbmQobmV3IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlKE1lc3NhZ2VUeXBlLlRleHQsIFwic3BlZWNoLmFnZW50LmNvbnRleHRcIiwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBcImFwcGxpY2F0aW9uL2pzb25cIiwgYWdlbnRDb250ZXh0SnNvbikpO1xuICAgIH1cbiAgICBmaXJlRXZlbnRGb3JSZXN1bHQoc2VydmljZVJlc3VsdCwgcHJvcGVydGllcykge1xuICAgICAgICBjb25zdCByZXN1bHRSZWFzb24gPSBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZVJlY29nbml0aW9uUmVzdWx0KHNlcnZpY2VSZXN1bHQuUmVjb2duaXRpb25TdGF0dXMpO1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBzZXJ2aWNlUmVzdWx0Lk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQ7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIHJlc3VsdFJlYXNvbiwgc2VydmljZVJlc3VsdC5EaXNwbGF5VGV4dCwgc2VydmljZVJlc3VsdC5EdXJhdGlvbiwgb2Zmc2V0LCBzZXJ2aWNlUmVzdWx0Lkxhbmd1YWdlLCBzZXJ2aWNlUmVzdWx0Lkxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIEpTT04uc3RyaW5naWZ5KHNlcnZpY2VSZXN1bHQpLCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgY29uc3QgZXYgPSBuZXcgU3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3MocmVzdWx0LCBvZmZzZXQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgIHJldHVybiBldjtcbiAgICB9XG4gICAgaGFuZGxlUmVzcG9uc2VNZXNzYWdlKHJlc3BvbnNlTWVzc2FnZSkge1xuICAgICAgICAvLyBcInJlc3BvbnNlXCIgbWVzc2FnZXMgY2FuIGNvbnRhaW4gZWl0aGVyIFwibWVzc2FnZVwiIChhY3Rpdml0eSkgb3IgXCJNZXNzYWdlU3RhdHVzXCIgZGF0YS4gRmlyZSB0aGUgYXBwcm9wcmlhdGVcbiAgICAgICAgLy8gZXZlbnQgYWNjb3JkaW5nIHRvIHRoZSBtZXNzYWdlIHR5cGUgdGhhdCdzIHNwZWNpZmllZC5cbiAgICAgICAgY29uc3QgcmVzcG9uc2VQYXlsb2FkID0gSlNPTi5wYXJzZShyZXNwb25zZU1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlUGF5bG9hZC5tZXNzYWdlVHlwZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICBjYXNlIFwibWVzc2FnZVwiOlxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlUmVxdWVzdElkID0gcmVzcG9uc2VNZXNzYWdlLnJlcXVlc3RJZC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2aXR5UGF5bG9hZCA9IEFjdGl2aXR5UGF5bG9hZFJlc3BvbnNlLmZyb21KU09OKHJlc3BvbnNlTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdHVybiA9IHRoaXMucHJpdlR1cm5TdGF0ZU1hbmFnZXIuR2V0VHVybihyZXNwb25zZVJlcXVlc3RJZCk7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBjb252ZXJzYXRpb24gSWRcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZpdHlQYXlsb2FkLmNvbnZlcnNhdGlvbklkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUFnZW50Q29uZmlnID0gdGhpcy5hZ2VudENvbmZpZy5nZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQWdlbnRDb25maWcuYm90SW5mby5jb252ZXJzYXRpb25JZCA9IGFjdGl2aXR5UGF5bG9hZC5jb252ZXJzYXRpb25JZDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZ2VudENvbmZpZy5zZXQodXBkYXRlQWdlbnRDb25maWcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBwdWxsQXVkaW9PdXRwdXRTdHJlYW0gPSB0dXJuLnByb2Nlc3NBY3Rpdml0eVBheWxvYWQoYWN0aXZpdHlQYXlsb2FkLCBBdWRpb091dHB1dEZvcm1hdEltcGwuZnJvbVNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZyh0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aE91dHB1dEZvcm1hdCwgdW5kZWZpbmVkKSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2aXR5ID0gbmV3IEFjdGl2aXR5UmVjZWl2ZWRFdmVudEFyZ3MoYWN0aXZpdHlQYXlsb2FkLm1lc3NhZ2VQYXlsb2FkLCBwdWxsQXVkaW9PdXRwdXRTdHJlYW0pO1xuICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IuYWN0aXZpdHlSZWNlaXZlZCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RGlhbG9nU2VydmljZUNvbm5lY3Rvci5hY3Rpdml0eVJlY2VpdmVkKHRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IsIGFjdGl2aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm1lc3NhZ2VzdGF0dXNcIjpcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnR1cm5TdGF0dXNSZWNlaXZlZCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RGlhbG9nU2VydmljZUNvbm5lY3Rvci50dXJuU3RhdHVzUmVjZWl2ZWQodGhpcy5wcml2RGlhbG9nU2VydmljZUNvbm5lY3RvciwgbmV3IFR1cm5TdGF0dXNSZWNlaXZlZEV2ZW50QXJncyhyZXNwb25zZU1lc3NhZ2UudGV4dEJvZHkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBFdmVudHMuaW5zdGFuY2Uub25FdmVudChuZXcgQmFja2dyb3VuZEV2ZW50KGBVbmV4cGVjdGVkIHJlc3BvbnNlIG9mIHR5cGUgJHtyZXNwb25zZVBheWxvYWQubWVzc2FnZVR5cGV9LiBJZ25vcmluZy5gKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25FdmVudChldmVudCkge1xuICAgICAgICB0aGlzLnByaXZFdmVudHMub25FdmVudChldmVudCk7XG4gICAgICAgIEV2ZW50cy5pbnN0YW5jZS5vbkV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgYWRkS2V5d29yZENvbnRleHREYXRhKCkge1xuICAgICAgICBjb25zdCBrZXl3b3JkUHJvcGVydHlWYWx1ZSA9IHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShcIlNQRUVDSC1LZXl3b3Jkc1RvRGV0ZWN0XCIpO1xuICAgICAgICBpZiAoa2V5d29yZFByb3BlcnR5VmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGtleXdvcmRPZmZzZXRQcm9wZXJ0eVZhbHVlID0gdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5wYXJhbWV0ZXJzXG4gICAgICAgICAgICAuZ2V0UHJvcGVydHkoXCJTUEVFQ0gtS2V5d29yZHNUb0RldGVjdC1PZmZzZXRzXCIpO1xuICAgICAgICBjb25zdCBrZXl3b3JkRHVyYXRpb25Qcm9wZXJ0eVZhbHVlID0gdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5wYXJhbWV0ZXJzXG4gICAgICAgICAgICAuZ2V0UHJvcGVydHkoXCJTUEVFQ0gtS2V5d29yZHNUb0RldGVjdC1EdXJhdGlvbnNcIik7XG4gICAgICAgIGNvbnN0IGtleXdvcmRzID0ga2V5d29yZFByb3BlcnR5VmFsdWUuc3BsaXQoXCI7XCIpO1xuICAgICAgICBjb25zdCBrZXl3b3JkT2Zmc2V0cyA9IGtleXdvcmRPZmZzZXRQcm9wZXJ0eVZhbHVlID09PSB1bmRlZmluZWQgPyBbXSA6IGtleXdvcmRPZmZzZXRQcm9wZXJ0eVZhbHVlLnNwbGl0KFwiO1wiKTtcbiAgICAgICAgY29uc3Qga2V5d29yZER1cmF0aW9ucyA9IGtleXdvcmREdXJhdGlvblByb3BlcnR5VmFsdWUgPT09IHVuZGVmaW5lZCA/IFtdIDoga2V5d29yZER1cmF0aW9uUHJvcGVydHlWYWx1ZS5zcGxpdChcIjtcIik7XG4gICAgICAgIGNvbnN0IGtleXdvcmREZWZpbml0aW9uQXJyYXkgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXl3b3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZGVmaW5pdGlvbiA9IHt9O1xuICAgICAgICAgICAgZGVmaW5pdGlvbi50ZXh0ID0ga2V5d29yZHNbaV07XG4gICAgICAgICAgICBpZiAoaSA8IGtleXdvcmRPZmZzZXRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGRlZmluaXRpb24ub2Zmc2V0ID0gTnVtYmVyKGtleXdvcmRPZmZzZXRzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpIDwga2V5d29yZER1cmF0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uLmR1cmF0aW9uID0gTnVtYmVyKGtleXdvcmREdXJhdGlvbnNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAga2V5d29yZERlZmluaXRpb25BcnJheS5wdXNoKGRlZmluaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3BlZWNoQ29udGV4dC5zZXRTZWN0aW9uKFwiaW52b2NhdGlvblNvdXJjZVwiLCBcIlZvaWNlQWN0aXZhdGlvbldpdGhLZXl3b3JkXCIpO1xuICAgICAgICB0aGlzLnNwZWVjaENvbnRleHQuc2V0U2VjdGlvbihcImtleXdvcmREZXRlY3Rpb25cIiwgW3tcbiAgICAgICAgICAgICAgICBjbGllbnREZXRlY3RlZEtleXdvcmRzOiBrZXl3b3JkRGVmaW5pdGlvbkFycmF5LFxuICAgICAgICAgICAgICAgIG9uUmVqZWN0OiB7IGFjdGlvbjogXCJFbmRPZlR1cm5cIiB9LFxuICAgICAgICAgICAgICAgIHR5cGU6IFwic3RhcnRUcmlnZ2VyXCJcbiAgICAgICAgICAgIH1dKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURpYWxvZ1NlcnZpY2VBZGFwdGVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBBdWRpb091dHB1dEZvcm1hdEltcGwgfSBmcm9tIFwiLi4vc2RrL0F1ZGlvL0F1ZGlvT3V0cHV0Rm9ybWF0XCI7XG5pbXBvcnQgeyBBdWRpb091dHB1dFN0cmVhbSB9IGZyb20gXCIuLi9zZGsvQXVkaW8vQXVkaW9PdXRwdXRTdHJlYW1cIjtcbmltcG9ydCB7IE1lc3NhZ2VEYXRhU3RyZWFtVHlwZSB9IGZyb20gXCIuL1NlcnZpY2VNZXNzYWdlcy9BY3Rpdml0eVJlc3BvbnNlUGF5bG9hZFwiO1xuZXhwb3J0IGNsYXNzIERpYWxvZ1NlcnZpY2VUdXJuU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKG1hbmFnZXIsIHJlcXVlc3RJZCkge1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0SWQgPSByZXF1ZXN0SWQ7XG4gICAgICAgIHRoaXMucHJpdklzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvU3RyZWFtID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcml2VHVybk1hbmFnZXIgPSBtYW5hZ2VyO1xuICAgICAgICB0aGlzLnJlc2V0VHVybkVuZFRpbWVvdXQoKTtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvU3RyZWFtKCkge1xuICAgICAgICAvLyBDYWxsZWQgd2hlbiBpcyBuZWVkZWQgdG8gc3RyZWFtLlxuICAgICAgICB0aGlzLnJlc2V0VHVybkVuZFRpbWVvdXQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvU3RyZWFtO1xuICAgIH1cbiAgICBwcm9jZXNzQWN0aXZpdHlQYXlsb2FkKHBheWxvYWQsIGF1ZGlvRm9ybWF0KSB7XG4gICAgICAgIGlmIChwYXlsb2FkLm1lc3NhZ2VEYXRhU3RyZWFtVHlwZSA9PT0gTWVzc2FnZURhdGFTdHJlYW1UeXBlLlRleHRUb1NwZWVjaEF1ZGlvKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZBdWRpb1N0cmVhbSA9IEF1ZGlvT3V0cHV0U3RyZWFtLmNyZWF0ZVB1bGxTdHJlYW0oKTtcbiAgICAgICAgICAgIHRoaXMucHJpdkF1ZGlvU3RyZWFtLmZvcm1hdCA9IChhdWRpb0Zvcm1hdCAhPT0gdW5kZWZpbmVkKSA/IGF1ZGlvRm9ybWF0IDogQXVkaW9PdXRwdXRGb3JtYXRJbXBsLmdldERlZmF1bHRPdXRwdXRGb3JtYXQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9TdHJlYW07XG4gICAgfVxuICAgIGVuZEF1ZGlvU3RyZWFtKCkge1xuICAgICAgICBpZiAodGhpcy5wcml2QXVkaW9TdHJlYW0gIT09IG51bGwgJiYgIXRoaXMucHJpdkF1ZGlvU3RyZWFtLmlzQ2xvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZBdWRpb1N0cmVhbS5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbXBsZXRlKCkge1xuICAgICAgICBpZiAodGhpcy5wcml2VGltZW91dFRva2VuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5wcml2VGltZW91dFRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVuZEF1ZGlvU3RyZWFtKCk7XG4gICAgfVxuICAgIHJlc2V0VHVybkVuZFRpbWVvdXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZUaW1lb3V0VG9rZW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnRcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnByaXZUaW1lb3V0VG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdlRpbWVvdXRUb2tlbiA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcml2VHVybk1hbmFnZXIuQ29tcGxldGVUdXJuKHRoaXMucHJpdlJlcXVlc3RJZCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0sIDIwMDApO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGlhbG9nU2VydmljZVR1cm5TdGF0ZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgSW52YWxpZE9wZXJhdGlvbkVycm9yIH0gZnJvbSBcIi4uL2NvbW1vbi9FcnJvclwiO1xuaW1wb3J0IHsgRGlhbG9nU2VydmljZVR1cm5TdGF0ZSB9IGZyb20gXCIuL0RpYWxvZ1NlcnZpY2VUdXJuU3RhdGVcIjtcbmV4cG9ydCBjbGFzcyBEaWFsb2dTZXJ2aWNlVHVyblN0YXRlTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJpdlR1cm5NYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgU3RhcnRUdXJuKGlkKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZUdXJuTWFwLmhhcyhpZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXJyb3IoXCJTZXJ2aWNlIGVycm9yOiBUaGVyZSBpcyBhbHJlYWR5IGEgdHVybiB3aXRoIGlkOlwiICsgaWQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHR1cm5TdGF0ZSA9IG5ldyBEaWFsb2dTZXJ2aWNlVHVyblN0YXRlKHRoaXMsIGlkKTtcbiAgICAgICAgdGhpcy5wcml2VHVybk1hcC5zZXQoaWQsIHR1cm5TdGF0ZSk7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUdXJuTWFwLmdldChpZCk7XG4gICAgfVxuICAgIEdldFR1cm4oaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlR1cm5NYXAuZ2V0KGlkKTtcbiAgICB9XG4gICAgQ29tcGxldGVUdXJuKGlkKSB7XG4gICAgICAgIGlmICghdGhpcy5wcml2VHVybk1hcC5oYXMoaWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiU2VydmljZSBlcnJvcjogUmVjZWl2ZWQgdHVybiBlbmQgZm9yIGFuIHVua25vd24gdHVybiBpZDpcIiArIGlkKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0dXJuU3RhdGUgPSB0aGlzLnByaXZUdXJuTWFwLmdldChpZCk7XG4gICAgICAgIHR1cm5TdGF0ZS5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLnByaXZUdXJuTWFwLmRlbGV0ZShpZCk7XG4gICAgICAgIHJldHVybiB0dXJuU3RhdGU7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EaWFsb2dTZXJ2aWNlVHVyblN0YXRlTWFuYWdlci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBSZXNwb25zaWJsZSBmb3IgYnVpbGRpbmcgdGhlIG9iamVjdCB0byBiZSBzZW50IHRvIHRoZSBzcGVlY2ggc2VydmljZSB0byBzdXBwb3J0IGR5bmFtaWMgZ3JhbW1hcnMuXG4gKiBAY2xhc3MgRHluYW1pY0dyYW1tYXJCdWlsZGVyXG4gKi9cbmV4cG9ydCBjbGFzcyBEeW5hbWljR3JhbW1hckJ1aWxkZXIge1xuICAgIC8vIEFkZHMgb25lIG1vcmUgcmVmZXJlbmNlIHBocmFzZXMgdG8gdGhlIGR5bmFtaWMgZ3JhbW1hciB0byBzZW5kLlxuICAgIC8vIEFsbCBhZGRlZCBwaHJhc2VzIGFyZSBnZW5lcmljIHBocmFzZXMuXG4gICAgYWRkUGhyYXNlKHBocmFzZSkge1xuICAgICAgICBpZiAoIXRoaXMucHJpdlBocmFzZXMpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlBocmFzZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGhyYXNlIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlBocmFzZXMgPSB0aGlzLnByaXZQaHJhc2VzLmNvbmNhdChwaHJhc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2UGhyYXNlcy5wdXNoKHBocmFzZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQ2xlYXJzIGFsbCBwaHJhc2VzIHN0b3JlZCBpbiB0aGUgY3VycmVudCBvYmplY3QuXG4gICAgY2xlYXJQaHJhc2VzKCkge1xuICAgICAgICB0aGlzLnByaXZQaHJhc2VzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLyBBZGRzIG9uZSBvciBtb3JlIHJlZmVyZW5jZSBncmFtbWFycyB0byB0aGUgY3VycmVudCBncmFtbWFyLlxuICAgIGFkZFJlZmVyZW5jZUdyYW1tYXIoZ3JhbW1hcikge1xuICAgICAgICBpZiAoIXRoaXMucHJpdkdyYW1tYXJzKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZHcmFtbWFycyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChncmFtbWFyIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkdyYW1tYXJzID0gdGhpcy5wcml2R3JhbW1hcnMuY29uY2F0KGdyYW1tYXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2R3JhbW1hcnMucHVzaChncmFtbWFyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBjbGVhcnMgYWxsIGdyYW1tYXJzIHN0b3JlZCBvbiB0aGUgcmVjb2duaXplci5cbiAgICBjbGVhckdyYW1tYXJzKCkge1xuICAgICAgICB0aGlzLnByaXZHcmFtbWFycyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLy8gR2VuZXJhdGVzIGFuIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIGR5bmFtaWMgZ3JhbW1hciB1c2VkIGJ5IHRoZSBTcGVlY2ggU2VydmljZS5cbiAgICAvLyBUaGlzIGlzIGRvbmUgYnkgYnVpbGRpbmcgYW4gb2JqZWN0IHdpdGggdGhlIGNvcnJlY3QgbGF5b3V0IGJhc2VkIG9uIHRoZSBwaHJhc2VzIGFuZCByZWZlcmVuY2UgZ3JhbW1hcnMgYWRkZWQgdG8gdGhpcyBpbnN0YW5jZVxuICAgIC8vIG9mIGEgRHluYW1pY0dyYW1tYXJCdWlsZGVyXG4gICAgZ2VuZXJhdGVHcmFtbWFyT2JqZWN0KCkge1xuICAgICAgICBpZiAodGhpcy5wcml2R3JhbW1hcnMgPT09IHVuZGVmaW5lZCAmJiB0aGlzLnByaXZQaHJhc2VzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmV0T2JqID0ge307XG4gICAgICAgIHJldE9iai5SZWZlcmVuY2VHcmFtbWFycyA9IHRoaXMucHJpdkdyYW1tYXJzO1xuICAgICAgICBpZiAodW5kZWZpbmVkICE9PSB0aGlzLnByaXZQaHJhc2VzICYmIDAgIT09IHRoaXMucHJpdlBocmFzZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCByZXRQaHJhc2VzID0gW107XG4gICAgICAgICAgICB0aGlzLnByaXZQaHJhc2VzLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0UGhyYXNlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgVGV4dDogdmFsdWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldE9iai5Hcm91cHMgPSBbeyBUeXBlOiBcIkdlbmVyaWNcIiwgSXRlbXM6IHJldFBocmFzZXMgfV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldE9iajtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUR5bmFtaWNHcmFtbWFyQnVpbGRlci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EeW5hbWljR3JhbW1hckludGVyZmFjZXMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENhbmNlbGxhdGlvbkVycm9yQ29kZSwgQ2FuY2VsbGF0aW9uUmVhc29uLCBSZXN1bHRSZWFzb24gfSBmcm9tIFwiLi4vc2RrL0V4cG9ydHNcIjtcbmltcG9ydCB7IFJlY29nbml0aW9uU3RhdHVzIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIEVudW1UcmFuc2xhdGlvbiB7XG4gICAgc3RhdGljIGltcGxUcmFuc2xhdGVSZWNvZ25pdGlvblJlc3VsdChyZWNvZ25pdGlvblN0YXR1cykge1xuICAgICAgICBsZXQgcmVhc29uID0gUmVzdWx0UmVhc29uLkNhbmNlbGVkO1xuICAgICAgICBzd2l0Y2ggKHJlY29nbml0aW9uU3RhdHVzKSB7XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLlN1Y2Nlc3M6XG4gICAgICAgICAgICAgICAgcmVhc29uID0gUmVzdWx0UmVhc29uLlJlY29nbml6ZWRTcGVlY2g7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLk5vTWF0Y2g6XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLkluaXRpYWxTaWxlbmNlVGltZW91dDpcbiAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25TdGF0dXMuQmFiYmxlVGltZW91dDpcbiAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25TdGF0dXMuRW5kT2ZEaWN0YXRpb246XG4gICAgICAgICAgICAgICAgcmVhc29uID0gUmVzdWx0UmVhc29uLk5vTWF0Y2g7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLkVycm9yOlxuICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvblN0YXR1cy5CYWRSZXF1ZXN0OlxuICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvblN0YXR1cy5Gb3JiaWRkZW46XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IFJlc3VsdFJlYXNvbi5DYW5jZWxlZDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVhc29uO1xuICAgIH1cbiAgICBzdGF0aWMgaW1wbFRyYW5zbGF0ZUNhbmNlbFJlc3VsdChyZWNvZ25pdGlvblN0YXR1cykge1xuICAgICAgICBsZXQgcmVhc29uID0gQ2FuY2VsbGF0aW9uUmVhc29uLkVuZE9mU3RyZWFtO1xuICAgICAgICBzd2l0Y2ggKHJlY29nbml0aW9uU3RhdHVzKSB7XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLlN1Y2Nlc3M6XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLkVuZE9mRGljdGF0aW9uOlxuICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvblN0YXR1cy5Ob01hdGNoOlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IENhbmNlbGxhdGlvblJlYXNvbi5FbmRPZlN0cmVhbTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25TdGF0dXMuSW5pdGlhbFNpbGVuY2VUaW1lb3V0OlxuICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvblN0YXR1cy5CYWJibGVUaW1lb3V0OlxuICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvblN0YXR1cy5FcnJvcjpcbiAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25TdGF0dXMuQmFkUmVxdWVzdDpcbiAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25TdGF0dXMuRm9yYmlkZGVuOlxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFzb24gPSBDYW5jZWxsYXRpb25SZWFzb24uRXJyb3I7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlYXNvbjtcbiAgICB9XG4gICAgc3RhdGljIGltcGxUcmFuc2xhdGVDYW5jZWxFcnJvckNvZGUocmVjb2duaXRpb25TdGF0dXMpIHtcbiAgICAgICAgbGV0IHJlYXNvbiA9IENhbmNlbGxhdGlvbkVycm9yQ29kZS5Ob0Vycm9yO1xuICAgICAgICBzd2l0Y2ggKHJlY29nbml0aW9uU3RhdHVzKSB7XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLkVycm9yOlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IENhbmNlbGxhdGlvbkVycm9yQ29kZS5TZXJ2aWNlRXJyb3I7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLlRvb01hbnlSZXF1ZXN0czpcbiAgICAgICAgICAgICAgICByZWFzb24gPSBDYW5jZWxsYXRpb25FcnJvckNvZGUuVG9vTWFueVJlcXVlc3RzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvblN0YXR1cy5CYWRSZXF1ZXN0OlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IENhbmNlbGxhdGlvbkVycm9yQ29kZS5CYWRSZXF1ZXN0UGFyYW1ldGVycztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25TdGF0dXMuRm9yYmlkZGVuOlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IENhbmNlbGxhdGlvbkVycm9yQ29kZS5Gb3JiaWRkZW47XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IENhbmNlbGxhdGlvbkVycm9yQ29kZS5Ob0Vycm9yO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWFzb247XG4gICAgfVxuICAgIHN0YXRpYyBpbXBsVHJhbnNsYXRlRXJyb3JEZXRhaWxzKGNhbmNlbGxhdGlvbkVycm9yQ29kZSkge1xuICAgICAgICBsZXQgZXJyb3JEZXRhaWxzID0gXCJUaGUgc3BlZWNoIHNlcnZpY2UgZW5jb3VudGVyZWQgYW4gaW50ZXJuYWwgZXJyb3IgYW5kIGNvdWxkIG5vdCBjb250aW51ZS5cIjtcbiAgICAgICAgc3dpdGNoIChjYW5jZWxsYXRpb25FcnJvckNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLkZvcmJpZGRlbjpcbiAgICAgICAgICAgICAgICBlcnJvckRldGFpbHMgPSBcIlRoZSByZWNvZ25pemVyIGlzIHVzaW5nIGEgZnJlZSBzdWJzY3JpcHRpb24gdGhhdCByYW4gb3V0IG9mIHF1b3RhLlwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDYW5jZWxsYXRpb25FcnJvckNvZGUuQmFkUmVxdWVzdFBhcmFtZXRlcnM6XG4gICAgICAgICAgICAgICAgZXJyb3JEZXRhaWxzID0gXCJJbnZhbGlkIHBhcmFtZXRlciBvciB1bnN1cHBvcnRlZCBhdWRpbyBmb3JtYXQgaW4gdGhlIHJlcXVlc3QuXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENhbmNlbGxhdGlvbkVycm9yQ29kZS5Ub29NYW55UmVxdWVzdHM6XG4gICAgICAgICAgICAgICAgZXJyb3JEZXRhaWxzID0gXCJUaGUgbnVtYmVyIG9mIHBhcmFsbGVsIHJlcXVlc3RzIGV4Y2VlZGVkIHRoZSBudW1iZXIgb2YgYWxsb3dlZCBjb25jdXJyZW50IHRyYW5zY3JpcHRpb25zLlwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXJyb3JEZXRhaWxzO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RW51bVRyYW5zbGF0aW9uLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vLyBNYWtlIHN1cmUgbm90IHRvIGV4cG9ydCBpbnRlcm5hbCBtb2R1bGVzLlxuLy9cbmV4cG9ydCAqIGZyb20gXCIuL0NvZ25pdGl2ZVN1YnNjcmlwdGlvbktleUF1dGhlbnRpY2F0aW9uXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9Db2duaXRpdmVUb2tlbkF1dGhlbnRpY2F0aW9uXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9JQXV0aGVudGljYXRpb25cIjtcbmV4cG9ydCAqIGZyb20gXCIuL0lDb25uZWN0aW9uRmFjdG9yeVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSVN5bnRoZXNpc0Nvbm5lY3Rpb25GYWN0b3J5XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9JbnRlbnRDb25uZWN0aW9uRmFjdG9yeVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vUmVjb2duaXRpb25FdmVudHNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NlcnZpY2VSZWNvZ25pemVyQmFzZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vQ29udmVyc2F0aW9uU2VydmljZVJlY29nbml6ZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1JlY29nbml6ZXJDb25maWdcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NwZWVjaFNlcnZpY2VJbnRlcmZhY2VzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9XZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TcGVlY2hDb25uZWN0aW9uRmFjdG9yeVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vVHJhbnNjcmliZXJDb25uZWN0aW9uRmFjdG9yeVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vVHJhbnNsYXRpb25Db25uZWN0aW9uRmFjdG9yeVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vU3BlZWNoU3ludGhlc2lzQ29ubmVjdGlvbkZhY3RvcnlcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0VudW1UcmFuc2xhdGlvblwiO1xuZXhwb3J0ICogZnJvbSBcIi4vU2VydmljZU1lc3NhZ2VzL0VudW1zXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TZXJ2aWNlTWVzc2FnZXMvVHJhbnNsYXRpb25TeW50aGVzaXNFbmRcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NlcnZpY2VNZXNzYWdlcy9UcmFuc2xhdGlvbkh5cG90aGVzaXNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NlcnZpY2VNZXNzYWdlcy9UcmFuc2xhdGlvblBocmFzZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vVHJhbnNsYXRpb25TZXJ2aWNlUmVjb2duaXplclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vU2VydmljZU1lc3NhZ2VzL1NwZWVjaERldGVjdGVkXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TZXJ2aWNlTWVzc2FnZXMvU3BlZWNoSHlwb3RoZXNpc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vU2VydmljZU1lc3NhZ2VzL1NwZWVjaEtleXdvcmRcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NwZWVjaFNlcnZpY2VSZWNvZ25pemVyXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9UcmFuc2NyaXB0aW9uU2VydmljZVJlY29nbml6ZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NlcnZpY2VNZXNzYWdlcy9EZXRhaWxlZFNwZWVjaFBocmFzZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vU2VydmljZU1lc3NhZ2VzL1NpbXBsZVNwZWVjaFBocmFzZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vQWRkZWRMbUludGVudFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSW50ZW50U2VydmljZVJlY29nbml6ZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NlcnZpY2VNZXNzYWdlcy9JbnRlbnRSZXNwb25zZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vUmVxdWVzdFNlc3Npb25cIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NwZWVjaENvbnRleHRcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0R5bmFtaWNHcmFtbWFyQnVpbGRlclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vRHluYW1pY0dyYW1tYXJJbnRlcmZhY2VzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9EaWFsb2dTZXJ2aWNlQWRhcHRlclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vQWdlbnRDb25maWdcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1RyYW5zY3JpcHRpb24vRXhwb3J0c1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vU2VydmljZU1lc3NhZ2VzL1N5bnRoZXNpc0F1ZGlvTWV0YWRhdGFcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1N5bnRoZXNpc1R1cm5cIjtcbmV4cG9ydCAqIGZyb20gXCIuL1N5bnRoZXNpc0FkYXB0ZXJCYXNlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TeW50aGVzaXNSZXN0QWRhcHRlclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vU3ludGhlc2l6ZXJDb25maWdcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1N5bnRoZXNpc0NvbnRleHRcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NwZWFrZXJSZWNvZ25pdGlvbkNvbmZpZ1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vU3BlYWtlcklkTWVzc2FnZUFkYXB0ZXJcIjtcbmV4cG9ydCBjb25zdCBPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUgPSBcIk91dHB1dEZvcm1hdFwiO1xuZXhwb3J0IGNvbnN0IENhbmNlbGxhdGlvbkVycm9yQ29kZVByb3BlcnR5TmFtZSA9IFwiQ2FuY2VsbGF0aW9uRXJyb3JDb2RlXCI7XG5leHBvcnQgY29uc3QgU2VydmljZVByb3BlcnRpZXNQcm9wZXJ0eU5hbWUgPSBcIlNlcnZpY2VQcm9wZXJ0aWVzXCI7XG5leHBvcnQgY29uc3QgRm9yY2VEaWN0YXRpb25Qcm9wZXJ0eU5hbWUgPSBcIkZvcmNlRGljdGF0aW9uXCI7XG5leHBvcnQgY29uc3QgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlc09wZW5SYW5nZU9wdGlvbk5hbWUgPSBcIk9wZW5SYW5nZVwiO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FeHBvcnRzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgY2xhc3MgSGVhZGVyTmFtZXMge1xufVxuSGVhZGVyTmFtZXMuQXV0aEtleSA9IFwiT2NwLUFwaW0tU3Vic2NyaXB0aW9uLUtleVwiO1xuSGVhZGVyTmFtZXMuQXV0aG9yaXphdGlvbiA9IFwiQXV0aG9yaXphdGlvblwiO1xuSGVhZGVyTmFtZXMuQ29ubmVjdGlvbklkID0gXCJYLUNvbm5lY3Rpb25JZFwiO1xuSGVhZGVyTmFtZXMuQ29udGVudFR5cGUgPSBcIkNvbnRlbnQtVHlwZVwiO1xuSGVhZGVyTmFtZXMuQ3VzdG9tQ29tbWFuZHNBcHBJZCA9IFwiWC1Db21tYW5kc0FwcElkXCI7XG5IZWFkZXJOYW1lcy5QYXRoID0gXCJQYXRoXCI7XG5IZWFkZXJOYW1lcy5SZXF1ZXN0SWQgPSBcIlgtUmVxdWVzdElkXCI7XG5IZWFkZXJOYW1lcy5SZXF1ZXN0U3RyZWFtSWQgPSBcIlgtU3RyZWFtSWRcIjtcbkhlYWRlck5hbWVzLlJlcXVlc3RUaW1lc3RhbXAgPSBcIlgtVGltZXN0YW1wXCI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUhlYWRlck5hbWVzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgY2xhc3MgQXV0aEluZm8ge1xuICAgIGNvbnN0cnVjdG9yKGhlYWRlck5hbWUsIHRva2VuKSB7XG4gICAgICAgIHRoaXMucHJpdkhlYWRlck5hbWUgPSBoZWFkZXJOYW1lO1xuICAgICAgICB0aGlzLnByaXZUb2tlbiA9IHRva2VuO1xuICAgIH1cbiAgICBnZXQgaGVhZGVyTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkhlYWRlck5hbWU7XG4gICAgfVxuICAgIGdldCB0b2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRva2VuO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SUF1dGhlbnRpY2F0aW9uLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUlDb25uZWN0aW9uRmFjdG9yeS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JU3ludGhlc2lzQ29ubmVjdGlvbkZhY3RvcnkuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFByb3h5SW5mbywgV2Vic29ja2V0Q29ubmVjdGlvbiwgfSBmcm9tIFwiLi4vY29tbW9uLmJyb3dzZXIvRXhwb3J0c1wiO1xuaW1wb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29ubmVjdGlvbkZhY3RvcnlCYXNlIH0gZnJvbSBcIi4vQ29ubmVjdGlvbkZhY3RvcnlCYXNlXCI7XG5pbXBvcnQgeyBXZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyLCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbmltcG9ydCB7IEhlYWRlck5hbWVzIH0gZnJvbSBcIi4vSGVhZGVyTmFtZXNcIjtcbmV4cG9ydCBjbGFzcyBJbnRlbnRDb25uZWN0aW9uRmFjdG9yeSBleHRlbmRzIENvbm5lY3Rpb25GYWN0b3J5QmFzZSB7XG4gICAgY3JlYXRlKGNvbmZpZywgYXV0aEluZm8sIGNvbm5lY3Rpb25JZCkge1xuICAgICAgICBsZXQgZW5kcG9pbnQgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50KTtcbiAgICAgICAgaWYgKCFlbmRwb2ludCkge1xuICAgICAgICAgICAgY29uc3QgcmVnaW9uID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9JbnRlbnRSZWdpb24pO1xuICAgICAgICAgICAgY29uc3QgaG9zdFN1ZmZpeCA9IENvbm5lY3Rpb25GYWN0b3J5QmFzZS5nZXRIb3N0U3VmZml4KHJlZ2lvbik7XG4gICAgICAgICAgICBjb25zdCBob3N0ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Ib3N0LCBcIndzczovL1wiICsgcmVnaW9uICsgXCIuc3Iuc3BlZWNoXCIgKyBob3N0U3VmZml4KTtcbiAgICAgICAgICAgIGVuZHBvaW50ID0gaG9zdCArIFwiL3NwZWVjaC9yZWNvZ25pdGlvbi9pbnRlcmFjdGl2ZS9jb2duaXRpdmVzZXJ2aWNlcy92MVwiO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0ge1xuICAgICAgICAgICAgZm9ybWF0OiBcInNpbXBsZVwiLFxuICAgICAgICAgICAgbGFuZ3VhZ2U6IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlKSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZXRDb21tb25VcmxQYXJhbXMoY29uZmlnLCBxdWVyeVBhcmFtcywgZW5kcG9pbnQpO1xuICAgICAgICBjb25zdCBoZWFkZXJzID0ge307XG4gICAgICAgIGlmIChhdXRoSW5mby50b2tlbiAhPT0gdW5kZWZpbmVkICYmIGF1dGhJbmZvLnRva2VuICE9PSBcIlwiKSB7XG4gICAgICAgICAgICBoZWFkZXJzW2F1dGhJbmZvLmhlYWRlck5hbWVdID0gYXV0aEluZm8udG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgaGVhZGVyc1tIZWFkZXJOYW1lcy5Db25uZWN0aW9uSWRdID0gY29ubmVjdGlvbklkO1xuICAgICAgICBjb25maWcucGFyYW1ldGVycy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1VybCwgZW5kcG9pbnQpO1xuICAgICAgICBjb25zdCBlbmFibGVDb21wcmVzc2lvbiA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFwiU1BFRUNILUVuYWJsZVdlYnNvY2tldENvbXByZXNzaW9uXCIsIFwiZmFsc2VcIikgPT09IFwidHJ1ZVwiO1xuICAgICAgICByZXR1cm4gbmV3IFdlYnNvY2tldENvbm5lY3Rpb24oZW5kcG9pbnQsIHF1ZXJ5UGFyYW1zLCBoZWFkZXJzLCBuZXcgV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlcigpLCBQcm94eUluZm8uZnJvbVJlY29nbml6ZXJDb25maWcoY29uZmlnKSwgZW5hYmxlQ29tcHJlc3Npb24sIGNvbm5lY3Rpb25JZCk7XG4gICAgfVxuICAgIGdldFNwZWVjaFJlZ2lvbkZyb21JbnRlbnRSZWdpb24oaW50ZW50UmVnaW9uKSB7XG4gICAgICAgIHN3aXRjaCAoaW50ZW50UmVnaW9uKSB7XG4gICAgICAgICAgICBjYXNlIFwiV2VzdCBVU1wiOlxuICAgICAgICAgICAgY2FzZSBcIlVTIFdlc3RcIjpcbiAgICAgICAgICAgIGNhc2UgXCJ3ZXN0dXNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ1c3dlc3RcIjtcbiAgICAgICAgICAgIGNhc2UgXCJXZXN0IFVTIDJcIjpcbiAgICAgICAgICAgIGNhc2UgXCJVUyBXZXN0IDJcIjpcbiAgICAgICAgICAgIGNhc2UgXCJ3ZXN0dXMyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidXN3ZXN0MlwiO1xuICAgICAgICAgICAgY2FzZSBcIlNvdXRoIENlbnRyYWwgVVNcIjpcbiAgICAgICAgICAgIGNhc2UgXCJVUyBTb3V0aCBDZW50cmFsXCI6XG4gICAgICAgICAgICBjYXNlIFwic291dGhjZW50cmFsdXNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ1c3NvdXRoY2VudHJhbFwiO1xuICAgICAgICAgICAgY2FzZSBcIldlc3QgQ2VudHJhbCBVU1wiOlxuICAgICAgICAgICAgY2FzZSBcIlVTIFdlc3QgQ2VudHJhbFwiOlxuICAgICAgICAgICAgY2FzZSBcIndlc3RjZW50cmFsdXNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ1c3dlc3RjZW50cmFsXCI7XG4gICAgICAgICAgICBjYXNlIFwiRWFzdCBVU1wiOlxuICAgICAgICAgICAgY2FzZSBcIlVTIEVhc3RcIjpcbiAgICAgICAgICAgIGNhc2UgXCJlYXN0dXNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ1c2Vhc3RcIjtcbiAgICAgICAgICAgIGNhc2UgXCJFYXN0IFVTIDJcIjpcbiAgICAgICAgICAgIGNhc2UgXCJVUyBFYXN0IDJcIjpcbiAgICAgICAgICAgIGNhc2UgXCJlYXN0dXMyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidXNlYXN0MlwiO1xuICAgICAgICAgICAgY2FzZSBcIldlc3QgRXVyb3BlXCI6XG4gICAgICAgICAgICBjYXNlIFwiRXVyb3BlIFdlc3RcIjpcbiAgICAgICAgICAgIGNhc2UgXCJ3ZXN0ZXVyb3BlXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZXVyb3Bld2VzdFwiO1xuICAgICAgICAgICAgY2FzZSBcIk5vcnRoIEV1cm9wZVwiOlxuICAgICAgICAgICAgY2FzZSBcIkV1cm9wZSBOb3J0aFwiOlxuICAgICAgICAgICAgY2FzZSBcIm5vcnRoZXVyb3BlXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZXVyb3Blbm9ydGhcIjtcbiAgICAgICAgICAgIGNhc2UgXCJCcmF6aWwgU291dGhcIjpcbiAgICAgICAgICAgIGNhc2UgXCJTb3V0aCBCcmF6aWxcIjpcbiAgICAgICAgICAgIGNhc2UgXCJzb3V0aGJyYXppbFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImJyYXppbHNvdXRoXCI7XG4gICAgICAgICAgICBjYXNlIFwiQXVzdHJhbGlhIEVhc3RcIjpcbiAgICAgICAgICAgIGNhc2UgXCJFYXN0IEF1c3RyYWxpYVwiOlxuICAgICAgICAgICAgY2FzZSBcImVhc3RhdXN0cmFsaWFcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhdXN0cmFsaWFlYXN0XCI7XG4gICAgICAgICAgICBjYXNlIFwiU291dGhlYXN0IEFzaWFcIjpcbiAgICAgICAgICAgIGNhc2UgXCJBc2lhIFNvdXRoZWFzdFwiOlxuICAgICAgICAgICAgY2FzZSBcInNvdXRoZWFzdGFzaWFcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhc2lhc291dGhlYXN0XCI7XG4gICAgICAgICAgICBjYXNlIFwiRWFzdCBBc2lhXCI6XG4gICAgICAgICAgICBjYXNlIFwiQXNpYSBFYXN0XCI6XG4gICAgICAgICAgICBjYXNlIFwiZWFzdGFzaWFcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhc2lhZWFzdFwiO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gaW50ZW50UmVnaW9uO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlbnRDb25uZWN0aW9uRmFjdG9yeS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgRGVmZXJyZWQsIE1lc3NhZ2VUeXBlLCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBJbnRlbnRSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLCBJbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncywgSW50ZW50UmVjb2duaXRpb25SZXN1bHQsIFByb3BlcnR5Q29sbGVjdGlvbiwgUHJvcGVydHlJZCwgUmVzdWx0UmVhc29uLCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBFbnVtVHJhbnNsYXRpb24sIEludGVudFJlc3BvbnNlLCBTZXJ2aWNlUmVjb2duaXplckJhc2UsIFNpbXBsZVNwZWVjaFBocmFzZSwgU3BlZWNoSHlwb3RoZXNpcywgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBJbnRlbnRTZXJ2aWNlUmVjb2duaXplciBleHRlbmRzIFNlcnZpY2VSZWNvZ25pemVyQmFzZSB7XG4gICAgY29uc3RydWN0b3IoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb1NvdXJjZSwgcmVjb2duaXplckNvbmZpZywgcmVjb2duaXplcikge1xuICAgICAgICBzdXBlcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCByZWNvZ25pemVyKTtcbiAgICAgICAgdGhpcy5wcml2SW50ZW50UmVjb2duaXplciA9IHJlY29nbml6ZXI7XG4gICAgICAgIHRoaXMucHJpdkludGVudERhdGFTZW50ID0gZmFsc2U7XG4gICAgfVxuICAgIHNldEludGVudHMoYWRkZWRJbnRlbnRzLCB1bWJyZWxsYUludGVudCkge1xuICAgICAgICB0aGlzLnByaXZBZGRlZExtSW50ZW50cyA9IGFkZGVkSW50ZW50cztcbiAgICAgICAgdGhpcy5wcml2VW1icmVsbGFJbnRlbnQgPSB1bWJyZWxsYUludGVudDtcbiAgICAgICAgdGhpcy5wcml2SW50ZW50RGF0YVNlbnQgPSB0cnVlO1xuICAgIH1cbiAgICBwcm9jZXNzVHlwZVNwZWNpZmljTWVzc2FnZXMoY29ubmVjdGlvbk1lc3NhZ2UpIHtcbiAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgbGV0IGV2O1xuICAgICAgICBsZXQgcHJvY2Vzc2VkID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IHJlc3VsdFByb3BzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICBpZiAoY29ubmVjdGlvbk1lc3NhZ2UubWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLlRleHQpIHtcbiAgICAgICAgICAgIHJlc3VsdFByb3BzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHQsIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKGNvbm5lY3Rpb25NZXNzYWdlLnBhdGgudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgY2FzZSBcInNwZWVjaC5oeXBvdGhlc2lzXCI6XG4gICAgICAgICAgICAgICAgY29uc3Qgc3BlZWNoSHlwb3RoZXNpcyA9IFNwZWVjaEh5cG90aGVzaXMuZnJvbUpTT04oY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBJbnRlbnRSZWNvZ25pdGlvblJlc3VsdCh1bmRlZmluZWQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgUmVzdWx0UmVhc29uLlJlY29nbml6aW5nSW50ZW50LCBzcGVlY2hIeXBvdGhlc2lzLlRleHQsIHNwZWVjaEh5cG90aGVzaXMuRHVyYXRpb24sIHNwZWVjaEh5cG90aGVzaXMuT2Zmc2V0ICsgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uY3VycmVudFR1cm5BdWRpb09mZnNldCwgc3BlZWNoSHlwb3RoZXNpcy5MYW5ndWFnZSwgc3BlZWNoSHlwb3RoZXNpcy5MYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2UsIHVuZGVmaW5lZCwgY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHksIHJlc3VsdFByb3BzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkh5cG90aGVzaXMocmVzdWx0Lm9mZnNldCk7XG4gICAgICAgICAgICAgICAgZXYgPSBuZXcgSW50ZW50UmVjb2duaXRpb25FdmVudEFyZ3MocmVzdWx0LCBzcGVlY2hIeXBvdGhlc2lzLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2SW50ZW50UmVjb2duaXplci5yZWNvZ25pemluZykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2SW50ZW50UmVjb2duaXplci5yZWNvZ25pemluZyh0aGlzLnByaXZJbnRlbnRSZWNvZ25pemVyLCBldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic3BlZWNoLnBocmFzZVwiOlxuICAgICAgICAgICAgICAgIGNvbnN0IHNpbXBsZSA9IFNpbXBsZVNwZWVjaFBocmFzZS5mcm9tSlNPTihjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IEludGVudFJlY29nbml0aW9uUmVzdWx0KHVuZGVmaW5lZCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZVJlY29nbml0aW9uUmVzdWx0KHNpbXBsZS5SZWNvZ25pdGlvblN0YXR1cyksIHNpbXBsZS5EaXNwbGF5VGV4dCwgc2ltcGxlLkR1cmF0aW9uLCBzaW1wbGUuT2Zmc2V0ICsgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uY3VycmVudFR1cm5BdWRpb09mZnNldCwgc2ltcGxlLkxhbmd1YWdlLCBzaW1wbGUuTGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlLCB1bmRlZmluZWQsIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5LCByZXN1bHRQcm9wcyk7XG4gICAgICAgICAgICAgICAgZXYgPSBuZXcgSW50ZW50UmVjb2duaXRpb25FdmVudEFyZ3MocmVzdWx0LCByZXN1bHQub2Zmc2V0LCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbmRFdmVudCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2SW50ZW50UmVjb2duaXplci5yZWNvZ25pemVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkludGVudFJlY29nbml6ZXIucmVjb2duaXplZCh0aGlzLnByaXZJbnRlbnRSZWNvZ25pemVyLCBldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gcmVwb3J0IHJlc3VsdCB0byBwcm9taXNlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RXJyb3JDYWxsYmFjayhlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IGludm9rZSB0aGUgY2FsbCBiYWNrIG9uY2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgaWYgaXQncyBzdWNjZXNzZnVsIGRvbid0IGludm9rZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVycm9yIGFmdGVyIHRoYXQuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZFcnJvckNhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBJZiBpbnRlbnQgZGF0YSB3YXMgc2VudCwgdGhlIHRlcm1pbmFsIHJlc3VsdCBmb3IgdGhpcyByZWNvZ25pemVyIGlzIGFuIGludGVudCBiZWluZyBmb3VuZC5cbiAgICAgICAgICAgICAgICAvLyBJZiBubyBpbnRlbnQgZGF0YSB3YXMgc2VudCwgdGhlIHRlcm1pbmFsIGV2ZW50IGlzIHNwZWVjaCByZWNvZ25pdGlvbiBiZWluZyBzdWNjZXNzZnVsLlxuICAgICAgICAgICAgICAgIGlmIChmYWxzZSA9PT0gdGhpcy5wcml2SW50ZW50RGF0YVNlbnQgfHwgUmVzdWx0UmVhc29uLk5vTWF0Y2ggPT09IGV2LnJlc3VsdC5yZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWR2YW5jZSB0aGUgYnVmZmVycy5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25QaHJhc2VSZWNvZ25pemVkKGV2Lm9mZnNldCArIGV2LnJlc3VsdC5kdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHNlbmRFdmVudCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU3F1aXJyZWwgYXdheSB0aGUgYXJncywgd2hlbiB0aGUgcmVzcG9uc2UgZXZlbnQgYXJyaXZlcyBpdCB3aWxsIGJ1aWxkIHVwb24gdGhlbVxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgdGhlbiByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UGVuZGluZ0ludGVudEFyZ3MgPSBldjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJyZXNwb25zZVwiOlxuICAgICAgICAgICAgICAgIC8vIFJlc3BvbnNlIGZyb20gTFVJU1xuICAgICAgICAgICAgICAgIGV2ID0gdGhpcy5wcml2UGVuZGluZ0ludGVudEFyZ3M7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UGVuZGluZ0ludGVudEFyZ3MgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwiXCIgPT09IGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGNvbmRpdGlvbiBoYXBwZW5zIGlmIHRoZXJlIGlzIG5vdGhpbmcgYnV0IHNpbGVuY2UgaW4gdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhdWRpbyBzZW50IHRvIHRoZSBzZXJ2aWNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIE9kZC4uLiBOb3Qgc3VyZSB0aGlzIGNhbiBoYXBwZW5cbiAgICAgICAgICAgICAgICAgICAgZXYgPSBuZXcgSW50ZW50UmVjb2duaXRpb25FdmVudEFyZ3MobmV3IEludGVudFJlY29nbml0aW9uUmVzdWx0KCksIDAsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGludGVudFJlc3BvbnNlID0gSW50ZW50UmVzcG9uc2UuZnJvbUpTT04oY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgIC8vIElmIExVSVMgZGlkbid0IHJldHVybiBhbnl0aGluZywgc2VuZCB0aGUgZXhpc3RpbmcgZXZlbnQsIGVsc2VcbiAgICAgICAgICAgICAgICAvLyBtb2RpZnkgaXQgdG8gc2hvdyB0aGUgbWF0Y2guXG4gICAgICAgICAgICAgICAgLy8gU2VlIGlmIHRoZSBpbnRlbnQgZm91bmQgaXMgaW4gdGhlIGxpc3Qgb2YgaW50ZW50cyBhc2tlZCBmb3IuXG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGludGVudFJlc3BvbnNlICYmICEhaW50ZW50UmVzcG9uc2UudG9wU2NvcmluZ0ludGVudCAmJiAhIWludGVudFJlc3BvbnNlLnRvcFNjb3JpbmdJbnRlbnQuaW50ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhZGRlZEludGVudCA9IHRoaXMucHJpdkFkZGVkTG1JbnRlbnRzW2ludGVudFJlc3BvbnNlLnRvcFNjb3JpbmdJbnRlbnQuaW50ZW50XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlVtYnJlbGxhSW50ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkSW50ZW50ID0gdGhpcy5wcml2VW1icmVsbGFJbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhYWRkZWRJbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGludGVudElkID0gYWRkZWRJbnRlbnQgPT09IHVuZGVmaW5lZCB8fCBhZGRlZEludGVudC5pbnRlbnROYW1lID09PSB1bmRlZmluZWQgPyBpbnRlbnRSZXNwb25zZS50b3BTY29yaW5nSW50ZW50LmludGVudCA6IGFkZGVkSW50ZW50LmludGVudE5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVhc29uID0gZXYucmVzdWx0LnJlYXNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IGludGVudElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uID0gUmVzdWx0UmVhc29uLlJlY29nbml6ZWRJbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUsIHByb3BlcnRpZXMgaXMgc2V0LlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcGVydGllcyA9ICh1bmRlZmluZWQgIT09IGV2LnJlc3VsdC5wcm9wZXJ0aWVzKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYucmVzdWx0LnByb3BlcnRpZXMgOiBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHQsIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ID0gbmV3IEludGVudFJlY29nbml0aW9uRXZlbnRBcmdzKG5ldyBJbnRlbnRSZWNvZ25pdGlvblJlc3VsdChpbnRlbnRJZCwgZXYucmVzdWx0LnJlc3VsdElkLCByZWFzb24sIGV2LnJlc3VsdC50ZXh0LCBldi5yZXN1bHQuZHVyYXRpb24sIGV2LnJlc3VsdC5vZmZzZXQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBldi5yZXN1bHQuZXJyb3JEZXRhaWxzLCBldi5yZXN1bHQuanNvbiwgcHJvcGVydGllcyksIGV2Lm9mZnNldCwgZXYuc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vblBocmFzZVJlY29nbml6ZWQoZXYub2Zmc2V0ICsgZXYucmVzdWx0LmR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZJbnRlbnRSZWNvZ25pemVyLnJlY29nbml6ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkludGVudFJlY29nbml6ZXIucmVjb2duaXplZCh0aGlzLnByaXZJbnRlbnRSZWNvZ25pemVyLCBldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJlcG9ydCByZXN1bHQgdG8gcHJvbWlzZS5cbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjayhldi5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZFcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RXJyb3JDYWxsYmFjayhlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IGludm9rZSB0aGUgY2FsbCBiYWNrIG9uY2UuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFuZCBpZiBpdCdzIHN1Y2Nlc3NmdWwgZG9uJ3QgaW52b2tlIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBlcnJvciBhZnRlciB0aGF0LlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkVycm9yQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlZmZlcmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIGRlZmZlcmFsLnJlc29sdmUocHJvY2Vzc2VkKTtcbiAgICAgICAgcmV0dXJuIGRlZmZlcmFsLnByb21pc2U7XG4gICAgfVxuICAgIC8vIENhbmNlbHMgcmVjb2duaXRpb24uXG4gICAgY2FuY2VsUmVjb2duaXRpb24oc2Vzc2lvbklkLCByZXF1ZXN0SWQsIGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3JDb2RlLCBlcnJvcikge1xuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICBwcm9wZXJ0aWVzLnNldFByb3BlcnR5KENhbmNlbGxhdGlvbkVycm9yQ29kZVByb3BlcnR5TmFtZSwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW2Vycm9yQ29kZV0pO1xuICAgICAgICBpZiAoISF0aGlzLnByaXZJbnRlbnRSZWNvZ25pemVyLmNhbmNlbGVkKSB7XG4gICAgICAgICAgICBjb25zdCBjYW5jZWxFdmVudCA9IG5ldyBJbnRlbnRSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzKGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3IsIGVycm9yQ29kZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHNlc3Npb25JZCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkludGVudFJlY29nbml6ZXIuY2FuY2VsZWQodGhpcy5wcml2SW50ZW50UmVjb2duaXplciwgY2FuY2VsRXZlbnQpO1xuICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghIXRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IEludGVudFJlY29nbml0aW9uUmVzdWx0KHVuZGVmaW5lZCwgLy8gSW50ZW50IElkXG4gICAgICAgICAgICByZXF1ZXN0SWQsIFJlc3VsdFJlYXNvbi5DYW5jZWxlZCwgdW5kZWZpbmVkLCAvLyBUZXh0XG4gICAgICAgICAgICB1bmRlZmluZWQsIC8vIER1cmF0aW9uXG4gICAgICAgICAgICB1bmRlZmluZWQsIC8vIE9mZnNldFxuICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBMYW5ndWFnZVxuICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBMYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2VcbiAgICAgICAgICAgIGVycm9yLCB1bmRlZmluZWQsIC8vIEpzb25cbiAgICAgICAgICAgIHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfYikgeyB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUludGVudFNlcnZpY2VSZWNvZ25pemVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgY2xhc3MgUXVlcnlQYXJhbWV0ZXJOYW1lcyB7XG59XG5RdWVyeVBhcmFtZXRlck5hbWVzLkJvdElkID0gXCJib3RpZFwiO1xuUXVlcnlQYXJhbWV0ZXJOYW1lcy5DdXN0b21TcGVlY2hEZXBsb3ltZW50SWQgPSBcImNpZFwiO1xuUXVlcnlQYXJhbWV0ZXJOYW1lcy5DdXN0b21Wb2ljZURlcGxveW1lbnRJZCA9IFwiZGVwbG95bWVudElkXCI7XG5RdWVyeVBhcmFtZXRlck5hbWVzLkVuYWJsZUF1ZGlvTG9nZ2luZyA9IFwic3RvcmVBdWRpb1wiO1xuUXVlcnlQYXJhbWV0ZXJOYW1lcy5FbmFibGVMYW5ndWFnZUlkID0gXCJsaWRFbmFibGVkXCI7XG5RdWVyeVBhcmFtZXRlck5hbWVzLkVuYWJsZVdvcmRMZXZlbFRpbWVzdGFtcHMgPSBcIndvcmRMZXZlbFRpbWVzdGFtcHNcIjtcblF1ZXJ5UGFyYW1ldGVyTmFtZXMuRW5kU2lsZW5jZVRpbWVvdXRNcyA9IFwiZW5kU2lsZW5jZVRpbWVvdXRNc1wiO1xuUXVlcnlQYXJhbWV0ZXJOYW1lcy5TZWdtZW50YXRpb25TaWxlbmNlVGltZW91dE1zID0gXCJzZWdtZW50YXRpb25TaWxlbmNlVGltZW91dE1zXCI7XG5RdWVyeVBhcmFtZXRlck5hbWVzLkZvcm1hdCA9IFwiZm9ybWF0XCI7XG5RdWVyeVBhcmFtZXRlck5hbWVzLkluaXRpYWxTaWxlbmNlVGltZW91dE1zID0gXCJpbml0aWFsU2lsZW5jZVRpbWVvdXRNc1wiO1xuUXVlcnlQYXJhbWV0ZXJOYW1lcy5MYW5ndWFnZSA9IFwibGFuZ3VhZ2VcIjtcblF1ZXJ5UGFyYW1ldGVyTmFtZXMuUHJvZmFuaXR5ID0gXCJwcm9mYW5pdHlcIjtcblF1ZXJ5UGFyYW1ldGVyTmFtZXMuUmVxdWVzdEJvdFN0YXR1c01lc3NhZ2VzID0gXCJlbmFibGVCb3RNZXNzYWdlU3RhdHVzXCI7XG5RdWVyeVBhcmFtZXRlck5hbWVzLlN0YWJsZUludGVybWVkaWF0ZVRocmVzaG9sZCA9IFwic3RhYmxlSW50ZXJtZWRpYXRlVGhyZXNob2xkXCI7XG5RdWVyeVBhcmFtZXRlck5hbWVzLlN0YWJsZVRyYW5zbGF0aW9uID0gXCJzdGFibGVUcmFuc2xhdGlvblwiO1xuUXVlcnlQYXJhbWV0ZXJOYW1lcy5UZXN0SG9va3MgPSBcInRlc3Rob29rc1wiO1xuUXVlcnlQYXJhbWV0ZXJOYW1lcy5Qb3N0cHJvY2Vzc2luZyA9IFwicG9zdHByb2Nlc3NpbmdcIjtcblF1ZXJ5UGFyYW1ldGVyTmFtZXMuQ3RzTWVldGluZ0lkID0gXCJtZWV0aW5nSWRcIjtcblF1ZXJ5UGFyYW1ldGVyTmFtZXMuQ3RzRGV2aWNlSWQgPSBcImRldmljZUlkXCI7XG5RdWVyeVBhcmFtZXRlck5hbWVzLkN0c0lzUGFydGljaXBhbnQgPSBcImlzUGFydGljaXBhbnRcIjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UXVlcnlQYXJhbWV0ZXJOYW1lcy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cbmltcG9ydCB7IEV2ZW50VHlwZSwgUGxhdGZvcm1FdmVudCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIFNwZWVjaFJlY29nbml0aW9uRXZlbnQgZXh0ZW5kcyBQbGF0Zm9ybUV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihldmVudE5hbWUsIHJlcXVlc3RJZCwgc2Vzc2lvbklkLCBldmVudFR5cGUgPSBFdmVudFR5cGUuSW5mbykge1xuICAgICAgICBzdXBlcihldmVudE5hbWUsIGV2ZW50VHlwZSk7XG4gICAgICAgIHRoaXMucHJpdlJlcXVlc3RJZCA9IHJlcXVlc3RJZDtcbiAgICAgICAgdGhpcy5wcml2U2Vzc2lvbklkID0gc2Vzc2lvbklkO1xuICAgIH1cbiAgICBnZXQgcmVxdWVzdElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVxdWVzdElkO1xuICAgIH1cbiAgICBnZXQgc2Vzc2lvbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U2Vzc2lvbklkO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSZWNvZ25pdGlvblRyaWdnZXJlZEV2ZW50IGV4dGVuZHMgU3BlZWNoUmVjb2duaXRpb25FdmVudCB7XG4gICAgY29uc3RydWN0b3IocmVxdWVzdElkLCBzZXNzaW9uSWQsIGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHN1cGVyKFwiUmVjb2duaXRpb25UcmlnZ2VyZWRFdmVudFwiLCByZXF1ZXN0SWQsIHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvU291cmNlSWQgPSBhdWRpb1NvdXJjZUlkO1xuICAgICAgICB0aGlzLnByaXZBdWRpb05vZGVJZCA9IGF1ZGlvTm9kZUlkO1xuICAgIH1cbiAgICBnZXQgYXVkaW9Tb3VyY2VJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvU291cmNlSWQ7XG4gICAgfVxuICAgIGdldCBhdWRpb05vZGVJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvTm9kZUlkO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBMaXN0ZW5pbmdTdGFydGVkRXZlbnQgZXh0ZW5kcyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihyZXF1ZXN0SWQsIHNlc3Npb25JZCwgYXVkaW9Tb3VyY2VJZCwgYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgc3VwZXIoXCJMaXN0ZW5pbmdTdGFydGVkRXZlbnRcIiwgcmVxdWVzdElkLCBzZXNzaW9uSWQpO1xuICAgICAgICB0aGlzLnByaXZBdWRpb1NvdXJjZUlkID0gYXVkaW9Tb3VyY2VJZDtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlSWQgPSBhdWRpb05vZGVJZDtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvU291cmNlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb1NvdXJjZUlkO1xuICAgIH1cbiAgICBnZXQgYXVkaW9Ob2RlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb05vZGVJZDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ29ubmVjdGluZ1RvU2VydmljZUV2ZW50IGV4dGVuZHMgU3BlZWNoUmVjb2duaXRpb25FdmVudCB7XG4gICAgY29uc3RydWN0b3IocmVxdWVzdElkLCBhdXRoRmV0Y2hFdmVudGlkLCBzZXNzaW9uSWQpIHtcbiAgICAgICAgc3VwZXIoXCJDb25uZWN0aW5nVG9TZXJ2aWNlRXZlbnRcIiwgcmVxdWVzdElkLCBzZXNzaW9uSWQpO1xuICAgICAgICB0aGlzLnByaXZBdXRoRmV0Y2hFdmVudGlkID0gYXV0aEZldGNoRXZlbnRpZDtcbiAgICB9XG4gICAgZ2V0IGF1dGhGZXRjaEV2ZW50aWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdXRoRmV0Y2hFdmVudGlkO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSZWNvZ25pdGlvblN0YXJ0ZWRFdmVudCBleHRlbmRzIFNwZWVjaFJlY29nbml0aW9uRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKHJlcXVlc3RJZCwgYXVkaW9Tb3VyY2VJZCwgYXVkaW9Ob2RlSWQsIGF1dGhGZXRjaEV2ZW50SWQsIHNlc3Npb25JZCkge1xuICAgICAgICBzdXBlcihcIlJlY29nbml0aW9uU3RhcnRlZEV2ZW50XCIsIHJlcXVlc3RJZCwgc2Vzc2lvbklkKTtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCA9IGF1ZGlvU291cmNlSWQ7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvTm9kZUlkID0gYXVkaW9Ob2RlSWQ7XG4gICAgICAgIHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQgPSBhdXRoRmV0Y2hFdmVudElkO1xuICAgIH1cbiAgICBnZXQgYXVkaW9Tb3VyY2VJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvU291cmNlSWQ7XG4gICAgfVxuICAgIGdldCBhdWRpb05vZGVJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvTm9kZUlkO1xuICAgIH1cbiAgICBnZXQgYXV0aEZldGNoRXZlbnRJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQ7XG4gICAgfVxufVxuZXhwb3J0IHZhciBSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXM7XG4oZnVuY3Rpb24gKFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1cykge1xuICAgIFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbXCJTdWNjZXNzXCJdID0gMF0gPSBcIlN1Y2Nlc3NcIjtcbiAgICBSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1wiQXVkaW9Tb3VyY2VFcnJvclwiXSA9IDFdID0gXCJBdWRpb1NvdXJjZUVycm9yXCI7XG4gICAgUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1JlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tcIkF1ZGlvU291cmNlVGltZW91dFwiXSA9IDJdID0gXCJBdWRpb1NvdXJjZVRpbWVvdXRcIjtcbiAgICBSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1wiQXV0aFRva2VuRmV0Y2hFcnJvclwiXSA9IDNdID0gXCJBdXRoVG9rZW5GZXRjaEVycm9yXCI7XG4gICAgUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1JlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tcIkF1dGhUb2tlbkZldGNoVGltZW91dFwiXSA9IDRdID0gXCJBdXRoVG9rZW5GZXRjaFRpbWVvdXRcIjtcbiAgICBSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1wiVW5BdXRob3JpemVkXCJdID0gNV0gPSBcIlVuQXV0aG9yaXplZFwiO1xuICAgIFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbXCJDb25uZWN0VGltZW91dFwiXSA9IDZdID0gXCJDb25uZWN0VGltZW91dFwiO1xuICAgIFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbXCJDb25uZWN0RXJyb3JcIl0gPSA3XSA9IFwiQ29ubmVjdEVycm9yXCI7XG4gICAgUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1JlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tcIkNsaWVudFJlY29nbml0aW9uQWN0aXZpdHlUaW1lb3V0XCJdID0gOF0gPSBcIkNsaWVudFJlY29nbml0aW9uQWN0aXZpdHlUaW1lb3V0XCI7XG4gICAgUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1JlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tcIlVua25vd25FcnJvclwiXSA9IDldID0gXCJVbmtub3duRXJyb3JcIjtcbn0pKFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1cyB8fCAoUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzID0ge30pKTtcbmV4cG9ydCBjbGFzcyBSZWNvZ25pdGlvbkVuZGVkRXZlbnQgZXh0ZW5kcyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihyZXF1ZXN0SWQsIGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkLCBhdXRoRmV0Y2hFdmVudElkLCBzZXNzaW9uSWQsIHNlcnZpY2VUYWcsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgc3VwZXIoXCJSZWNvZ25pdGlvbkVuZGVkRXZlbnRcIiwgcmVxdWVzdElkLCBzZXNzaW9uSWQsIHN0YXR1cyA9PT0gUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzLlN1Y2Nlc3MgPyBFdmVudFR5cGUuSW5mbyA6IEV2ZW50VHlwZS5FcnJvcik7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvU291cmNlSWQgPSBhdWRpb1NvdXJjZUlkO1xuICAgICAgICB0aGlzLnByaXZBdWRpb05vZGVJZCA9IGF1ZGlvTm9kZUlkO1xuICAgICAgICB0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkID0gYXV0aEZldGNoRXZlbnRJZDtcbiAgICAgICAgdGhpcy5wcml2U3RhdHVzID0gc3RhdHVzO1xuICAgICAgICB0aGlzLnByaXZFcnJvciA9IGVycm9yO1xuICAgICAgICB0aGlzLnByaXZTZXJ2aWNlVGFnID0gc2VydmljZVRhZztcbiAgICB9XG4gICAgZ2V0IGF1ZGlvU291cmNlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb1NvdXJjZUlkO1xuICAgIH1cbiAgICBnZXQgYXVkaW9Ob2RlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb05vZGVJZDtcbiAgICB9XG4gICAgZ2V0IGF1dGhGZXRjaEV2ZW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkO1xuICAgIH1cbiAgICBnZXQgc2VydmljZVRhZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNlcnZpY2VUYWc7XG4gICAgfVxuICAgIGdldCBzdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTdGF0dXM7XG4gICAgfVxuICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkVycm9yO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVjb2duaXRpb25FdmVudHMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5pbXBvcnQgeyBQcm9wZXJ0eUlkIH0gZnJvbSBcIi4uL3Nkay9FeHBvcnRzXCI7XG5leHBvcnQgdmFyIFJlY29nbml0aW9uTW9kZTtcbihmdW5jdGlvbiAoUmVjb2duaXRpb25Nb2RlKSB7XG4gICAgUmVjb2duaXRpb25Nb2RlW1JlY29nbml0aW9uTW9kZVtcIkludGVyYWN0aXZlXCJdID0gMF0gPSBcIkludGVyYWN0aXZlXCI7XG4gICAgUmVjb2duaXRpb25Nb2RlW1JlY29nbml0aW9uTW9kZVtcIkNvbnZlcnNhdGlvblwiXSA9IDFdID0gXCJDb252ZXJzYXRpb25cIjtcbiAgICBSZWNvZ25pdGlvbk1vZGVbUmVjb2duaXRpb25Nb2RlW1wiRGljdGF0aW9uXCJdID0gMl0gPSBcIkRpY3RhdGlvblwiO1xufSkoUmVjb2duaXRpb25Nb2RlIHx8IChSZWNvZ25pdGlvbk1vZGUgPSB7fSkpO1xuZXhwb3J0IHZhciBTcGVlY2hSZXN1bHRGb3JtYXQ7XG4oZnVuY3Rpb24gKFNwZWVjaFJlc3VsdEZvcm1hdCkge1xuICAgIFNwZWVjaFJlc3VsdEZvcm1hdFtTcGVlY2hSZXN1bHRGb3JtYXRbXCJTaW1wbGVcIl0gPSAwXSA9IFwiU2ltcGxlXCI7XG4gICAgU3BlZWNoUmVzdWx0Rm9ybWF0W1NwZWVjaFJlc3VsdEZvcm1hdFtcIkRldGFpbGVkXCJdID0gMV0gPSBcIkRldGFpbGVkXCI7XG59KShTcGVlY2hSZXN1bHRGb3JtYXQgfHwgKFNwZWVjaFJlc3VsdEZvcm1hdCA9IHt9KSk7XG5leHBvcnQgY2xhc3MgUmVjb2duaXplckNvbmZpZyB7XG4gICAgY29uc3RydWN0b3Ioc3BlZWNoU2VydmljZUNvbmZpZywgcGFyYW1ldGVycykge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hTZXJ2aWNlQ29uZmlnID0gc3BlZWNoU2VydmljZUNvbmZpZyA/IHNwZWVjaFNlcnZpY2VDb25maWcgOiBuZXcgU3BlZWNoU2VydmljZUNvbmZpZyhuZXcgQ29udGV4dChudWxsKSk7XG4gICAgICAgIHRoaXMucHJpdlBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzO1xuICAgICAgICB0aGlzLnByaXZNYXhSZXRyeUNvdW50ID0gcGFyc2VJbnQocGFyYW1ldGVycy5nZXRQcm9wZXJ0eShcIlNQRUVDSC1FcnJvci1NYXhSZXRyeUNvdW50XCIsIFwiNFwiKSwgMTApO1xuICAgICAgICB0aGlzLnByaXZMYW5ndWFnZUlkTW9kZSA9IHBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9MYW5ndWFnZUlkTW9kZSwgdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgZ2V0IHBhcmFtZXRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJhbWV0ZXJzO1xuICAgIH1cbiAgICBnZXQgcmVjb2duaXRpb25Nb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVjb2duaXRpb25Nb2RlO1xuICAgIH1cbiAgICBzZXQgcmVjb2duaXRpb25Nb2RlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpdlJlY29nbml0aW9uTW9kZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnByaXZSZWNvZ25pdGlvbkFjdGl2aXR5VGltZW91dCA9IHZhbHVlID09PSBSZWNvZ25pdGlvbk1vZGUuSW50ZXJhY3RpdmUgPyA4MDAwIDogMjUwMDA7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFNlcnZpY2VDb25maWcuUmVjb2duaXRpb24gPSBSZWNvZ25pdGlvbk1vZGVbdmFsdWVdO1xuICAgIH1cbiAgICBnZXQgU3BlZWNoU2VydmljZUNvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFNlcnZpY2VDb25maWc7XG4gICAgfVxuICAgIGdldCByZWNvZ25pdGlvbkFjdGl2aXR5VGltZW91dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlY29nbml0aW9uQWN0aXZpdHlUaW1lb3V0O1xuICAgIH1cbiAgICBnZXQgaXNDb250aW51b3VzUmVjb2duaXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWNvZ25pdGlvbk1vZGUgIT09IFJlY29nbml0aW9uTW9kZS5JbnRlcmFjdGl2ZTtcbiAgICB9XG4gICAgZ2V0IGxhbmd1YWdlSWRNb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TGFuZ3VhZ2VJZE1vZGU7XG4gICAgfVxuICAgIGdldCBhdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlcywgdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgZ2V0IHJlY29nbml0aW9uRW5kcG9pbnRWZXJzaW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb2duaXRpb25FbmRwb2ludFZlcnNpb24sIHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIGdldCBzb3VyY2VMYW5ndWFnZU1vZGVscygpIHtcbiAgICAgICAgY29uc3QgbW9kZWxzID0gW107XG4gICAgICAgIGxldCBtb2RlbHNFeGlzdCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5hdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGFuZ3VhZ2Ugb2YgdGhpcy5hdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VzLnNwbGl0KFwiLFwiKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1c3RvbVByb3BlcnR5ID0gbGFuZ3VhZ2UgKyBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50SWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RlbElkID0gdGhpcy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KGN1c3RvbVByb3BlcnR5LCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIGlmIChtb2RlbElkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxzLnB1c2goeyBsYW5ndWFnZSwgZW5kcG9pbnQ6IG1vZGVsSWQgfSk7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsc0V4aXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVscy5wdXNoKHsgbGFuZ3VhZ2UsIGVuZHBvaW50OiBcIlwiIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbW9kZWxzRXhpc3QgPyBtb2RlbHMgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGdldCBtYXhSZXRyeUNvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TWF4UmV0cnlDb3VudDtcbiAgICB9XG59XG4vLyBUaGUgY29uZmlnIGlzIHNlcmlhbGl6ZWQgYW5kIHNlbnQgYXMgdGhlIFNwZWVjaC5Db25maWdcbmV4cG9ydCBjbGFzcyBTcGVlY2hTZXJ2aWNlQ29uZmlnIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgfVxuICAgIHNlcmlhbGl6ZSgpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSB7fTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGsgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBrKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRbayAmJiBrLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgay5zdWJzdHJpbmcoMSldID0gdmFsdWVba107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2VtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IENvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQ7XG4gICAgfVxuICAgIGdldCBSZWNvZ25pdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVjb2duaXRpb247XG4gICAgfVxuICAgIHNldCBSZWNvZ25pdGlvbih2YWx1ZSkge1xuICAgICAgICB0aGlzLnJlY29nbml0aW9uID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ29udGV4dCB7XG4gICAgY29uc3RydWN0b3Iob3MpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW0gPSBuZXcgU3lzdGVtKCk7XG4gICAgICAgIHRoaXMub3MgPSBvcztcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgU3lzdGVtIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gTm90ZTogYmVsb3cgd2lsbCBiZSBwYXRjaGVkIGZvciBvZmZpY2lhbCBidWlsZHMuXG4gICAgICAgIGNvbnN0IFNQRUVDSFNES19DTElFTlRTREtfVkVSU0lPTiA9IFwiMS4yNS4xXCI7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiU3BlZWNoU0RLXCI7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IFNQRUVDSFNES19DTElFTlRTREtfVkVSU0lPTjtcbiAgICAgICAgdGhpcy5idWlsZCA9IFwiSmF2YVNjcmlwdFwiO1xuICAgICAgICB0aGlzLmxhbmcgPSBcIkphdmFTY3JpcHRcIjtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgT1Mge1xuICAgIGNvbnN0cnVjdG9yKHBsYXRmb3JtLCBuYW1lLCB2ZXJzaW9uKSB7XG4gICAgICAgIHRoaXMucGxhdGZvcm0gPSBwbGF0Zm9ybTtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgRGV2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcihtYW51ZmFjdHVyZXIsIG1vZGVsLCB2ZXJzaW9uKSB7XG4gICAgICAgIHRoaXMubWFudWZhY3R1cmVyID0gbWFudWZhY3R1cmVyO1xuICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247XG4gICAgfVxufVxuZXhwb3J0IHZhciBjb25uZWN0aXZpdHk7XG4oZnVuY3Rpb24gKGNvbm5lY3Rpdml0eSkge1xuICAgIGNvbm5lY3Rpdml0eVtcIkJsdWV0b290aFwiXSA9IFwiQmx1ZXRvb3RoXCI7XG4gICAgY29ubmVjdGl2aXR5W1wiV2lyZWRcIl0gPSBcIldpcmVkXCI7XG4gICAgY29ubmVjdGl2aXR5W1wiV2lGaVwiXSA9IFwiV2lGaVwiO1xuICAgIGNvbm5lY3Rpdml0eVtcIkNlbGx1bGFyXCJdID0gXCJDZWxsdWxhclwiO1xuICAgIGNvbm5lY3Rpdml0eVtcIkluQnVpbHRcIl0gPSBcIkluQnVpbHRcIjtcbiAgICBjb25uZWN0aXZpdHlbXCJVbmtub3duXCJdID0gXCJVbmtub3duXCI7XG59KShjb25uZWN0aXZpdHkgfHwgKGNvbm5lY3Rpdml0eSA9IHt9KSk7XG5leHBvcnQgdmFyIHR5cGU7XG4oZnVuY3Rpb24gKHR5cGUpIHtcbiAgICB0eXBlW1wiUGhvbmVcIl0gPSBcIlBob25lXCI7XG4gICAgdHlwZVtcIlNwZWFrZXJcIl0gPSBcIlNwZWFrZXJcIjtcbiAgICB0eXBlW1wiQ2FyXCJdID0gXCJDYXJcIjtcbiAgICB0eXBlW1wiSGVhZHNldFwiXSA9IFwiSGVhZHNldFwiO1xuICAgIHR5cGVbXCJUaGVybW9zdGF0XCJdID0gXCJUaGVybW9zdGF0XCI7XG4gICAgdHlwZVtcIk1pY3JvcGhvbmVzXCJdID0gXCJNaWNyb3Bob25lc1wiO1xuICAgIHR5cGVbXCJEZXNrcGhvbmVcIl0gPSBcIkRlc2twaG9uZVwiO1xuICAgIHR5cGVbXCJSZW1vdGVDb250cm9sXCJdID0gXCJSZW1vdGVDb250cm9sXCI7XG4gICAgdHlwZVtcIlVua25vd25cIl0gPSBcIlVua25vd25cIjtcbiAgICB0eXBlW1wiRmlsZVwiXSA9IFwiRmlsZVwiO1xuICAgIHR5cGVbXCJTdHJlYW1cIl0gPSBcIlN0cmVhbVwiO1xufSkodHlwZSB8fCAodHlwZSA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlY29nbml6ZXJDb25maWcuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgY3JlYXRlTm9EYXNoR3VpZCwgRGVmZXJyZWQsIEV2ZW50cyB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29ubmVjdGluZ1RvU2VydmljZUV2ZW50LCBMaXN0ZW5pbmdTdGFydGVkRXZlbnQsIFJlY29nbml0aW9uU3RhcnRlZEV2ZW50LCBSZWNvZ25pdGlvblRyaWdnZXJlZEV2ZW50LCB9IGZyb20gXCIuL1JlY29nbml0aW9uRXZlbnRzXCI7XG5pbXBvcnQgeyBTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIgfSBmcm9tIFwiLi9TZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIuSW50ZXJuYWxcIjtcbmV4cG9ydCBjbGFzcyBSZXF1ZXN0U2Vzc2lvbiB7XG4gICAgY29uc3RydWN0b3IoYXVkaW9Tb3VyY2VJZCkge1xuICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkRldGFjaGFibGVzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIHRoaXMucHJpdklzQXVkaW9Ob2RlRGV0YWNoZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2SXNSZWNvZ25pemluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZJc1NwZWVjaEVuZGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdlR1cm5TdGFydEF1ZGlvT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5wcml2TGFzdFJlY29PZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnByaXZIeXBvdGhlc2lzUmVjZWl2ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2Qnl0ZXNTZW50ID0gMDtcbiAgICAgICAgdGhpcy5wcml2UmVjb2dOdW1iZXIgPSAwO1xuICAgICAgICB0aGlzLnByaXZJblR1cm4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkF0dGVtcHRzID0gMDtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCA9IGF1ZGlvU291cmNlSWQ7XG4gICAgICAgIHRoaXMucHJpdlJlcXVlc3RJZCA9IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlSWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHRoaXMucHJpdlR1cm5EZWZlcnJhbCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICAvLyBXZSdyZSBub3QgaW4gYSB0dXJuLCBzbyByZXNvbHZlLlxuICAgICAgICB0aGlzLnByaXZUdXJuRGVmZXJyYWwucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXQgc2Vzc2lvbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U2Vzc2lvbklkO1xuICAgIH1cbiAgICBnZXQgcmVxdWVzdElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVxdWVzdElkO1xuICAgIH1cbiAgICBnZXQgYXVkaW9Ob2RlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb05vZGVJZDtcbiAgICB9XG4gICAgZ2V0IHR1cm5Db21wbGV0aW9uUHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlR1cm5EZWZlcnJhbC5wcm9taXNlO1xuICAgIH1cbiAgICBnZXQgaXNTcGVlY2hFbmRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklzU3BlZWNoRW5kZWQ7XG4gICAgfVxuICAgIGdldCBpc1JlY29nbml6aW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNSZWNvZ25pemluZztcbiAgICB9XG4gICAgZ2V0IGN1cnJlbnRUdXJuQXVkaW9PZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUdXJuU3RhcnRBdWRpb09mZnNldDtcbiAgICB9XG4gICAgZ2V0IHJlY29nTnVtYmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVjb2dOdW1iZXI7XG4gICAgfVxuICAgIGdldCBudW1Db25uZWN0aW9uQXR0ZW1wdHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uQXR0ZW1wdHM7XG4gICAgfVxuICAgIC8vIFRoZSBudW1iZXIgb2YgYnl0ZXMgc2VudCBmb3IgdGhlIGN1cnJlbnQgY29ubmVjdGlvbi5cbiAgICAvLyBDb3VudGVyIGlzIHJlc2V0IHRvIDAgZWFjaCB0aW1lIGEgY29ubmVjdGlvbiBpcyBlc3RhYmxpc2hlZC5cbiAgICBnZXQgYnl0ZXNTZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Qnl0ZXNTZW50O1xuICAgIH1cbiAgICBsaXN0ZW5Gb3JTZXJ2aWNlVGVsZW1ldHJ5KGV2ZW50U291cmNlKSB7XG4gICAgICAgIGlmICghIXRoaXMucHJpdlNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lcikge1xuICAgICAgICAgICAgdGhpcy5wcml2RGV0YWNoYWJsZXMucHVzaChldmVudFNvdXJjZS5hdHRhY2hMaXN0ZW5lcih0aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGFydE5ld1JlY29nbml0aW9uKCkge1xuICAgICAgICB0aGlzLnByaXZJc1NwZWVjaEVuZGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdklzUmVjb2duaXppbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLnByaXZUdXJuU3RhcnRBdWRpb09mZnNldCA9IDA7XG4gICAgICAgIHRoaXMucHJpdkxhc3RSZWNvT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5wcml2UmVjb2dOdW1iZXIrKztcbiAgICAgICAgdGhpcy5wcml2U2VydmljZVRlbGVtZXRyeUxpc3RlbmVyID0gbmV3IFNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lcih0aGlzLnByaXZSZXF1ZXN0SWQsIHRoaXMucHJpdkF1ZGlvU291cmNlSWQsIHRoaXMucHJpdkF1ZGlvTm9kZUlkKTtcbiAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBSZWNvZ25pdGlvblRyaWdnZXJlZEV2ZW50KHRoaXMucmVxdWVzdElkLCB0aGlzLnByaXZTZXNzaW9uSWQsIHRoaXMucHJpdkF1ZGlvU291cmNlSWQsIHRoaXMucHJpdkF1ZGlvTm9kZUlkKSk7XG4gICAgfVxuICAgIG9uQXVkaW9Tb3VyY2VBdHRhY2hDb21wbGV0ZWQoYXVkaW9Ob2RlLCBpc0Vycm9yKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZBdWRpb05vZGUgPSBhdWRpb05vZGU7XG4gICAgICAgICAgICB0aGlzLnByaXZJc0F1ZGlvTm9kZURldGFjaGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoaXNFcnJvcikge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMub25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBMaXN0ZW5pbmdTdGFydGVkRXZlbnQodGhpcy5wcml2UmVxdWVzdElkLCB0aGlzLnByaXZTZXNzaW9uSWQsIHRoaXMucHJpdkF1ZGlvU291cmNlSWQsIHRoaXMucHJpdkF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvblByZUNvbm5lY3Rpb25TdGFydChhdXRoRmV0Y2hFdmVudElkLCBjb25uZWN0aW9uSWQpIHtcbiAgICAgICAgdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCA9IGF1dGhGZXRjaEV2ZW50SWQ7XG4gICAgICAgIHRoaXMucHJpdlNlc3Npb25JZCA9IGNvbm5lY3Rpb25JZDtcbiAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBDb25uZWN0aW5nVG9TZXJ2aWNlRXZlbnQodGhpcy5wcml2UmVxdWVzdElkLCB0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkLCB0aGlzLnByaXZTZXNzaW9uSWQpKTtcbiAgICB9XG4gICAgb25BdXRoQ29tcGxldGVkKGlzRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChpc0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5vbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgb25Db25uZWN0aW9uRXN0YWJsaXNoQ29tcGxldGVkKHN0YXR1c0NvZGUsIHJlYXNvbikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHN0YXR1c0NvZGUgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgUmVjb2duaXRpb25TdGFydGVkRXZlbnQodGhpcy5yZXF1ZXN0SWQsIHRoaXMucHJpdkF1ZGlvU291cmNlSWQsIHRoaXMucHJpdkF1ZGlvTm9kZUlkLCB0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkLCB0aGlzLnByaXZTZXNzaW9uSWQpKTtcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZBdWRpb05vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlLnJlcGxheSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZUdXJuU3RhcnRBdWRpb09mZnNldCA9IHRoaXMucHJpdkxhc3RSZWNvT2Zmc2V0O1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkJ5dGVzU2VudCA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc3RhdHVzQ29kZSA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5vbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvblNlcnZpY2VUdXJuRW5kUmVzcG9uc2UoY29udGludW91c1JlY29nbml0aW9uKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZUdXJuRGVmZXJyYWwucmVzb2x2ZSgpO1xuICAgICAgICAgICAgaWYgKCFjb250aW51b3VzUmVjb2duaXRpb24gfHwgdGhpcy5pc1NwZWVjaEVuZGVkKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5vbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SW5UdXJuID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBTdGFydCBhIG5ldyByZXF1ZXN0IHNldC5cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZUdXJuU3RhcnRBdWRpb09mZnNldCA9IHRoaXMucHJpdkxhc3RSZWNvT2Zmc2V0O1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkF1ZGlvTm9kZS5yZXBsYXkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9uU3BlZWNoQ29udGV4dCgpIHtcbiAgICAgICAgdGhpcy5wcml2UmVxdWVzdElkID0gY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgIH1cbiAgICBvblNlcnZpY2VUdXJuU3RhcnRSZXNwb25zZSgpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2VHVybkRlZmVycmFsICYmICEhdGhpcy5wcml2SW5UdXJuKSB7XG4gICAgICAgICAgICAvLyBXaGF0PyBIb3cgYXJlIHdlIHN0YXJ0aW5nIGEgdHVybiB3aXRoIGFub3RoZXIgbm90IGRvbmU/XG4gICAgICAgICAgICB0aGlzLnByaXZUdXJuRGVmZXJyYWwucmVqZWN0KFwiQW5vdGhlciB0dXJuIHN0YXJ0ZWQgYmVmb3JlIGN1cnJlbnQgY29tcGxldGVkLlwiKTtcbiAgICAgICAgICAgIC8vIEF2b2lkIFVuaGFuZGxlZFByb21pc2VSZWplY3Rpb24gaWYgcHJpdlR1cm5EZWZlcnJhbCBpcyBub3QgYmVpbmcgYXdhaXRlZFxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgICAgICAgICAgdGhpcy5wcml2VHVybkRlZmVycmFsLnByb21pc2UudGhlbigpLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2SW5UdXJuID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wcml2VHVybkRlZmVycmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgfVxuICAgIG9uSHlwb3RoZXNpcyhvZmZzZXQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnByaXZIeXBvdGhlc2lzUmVjZWl2ZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkh5cG90aGVzaXNSZWNlaXZlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIuaHlwb3RoZXNpc1JlY2VpdmVkKHRoaXMucHJpdkF1ZGlvTm9kZS5maW5kVGltZUF0T2Zmc2V0KG9mZnNldCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uUGhyYXNlUmVjb2duaXplZChvZmZzZXQpIHtcbiAgICAgICAgdGhpcy5wcml2U2VydmljZVRlbGVtZXRyeUxpc3RlbmVyLnBocmFzZVJlY2VpdmVkKHRoaXMucHJpdkF1ZGlvTm9kZS5maW5kVGltZUF0T2Zmc2V0KG9mZnNldCkpO1xuICAgICAgICB0aGlzLm9uU2VydmljZVJlY29nbml6ZWQob2Zmc2V0KTtcbiAgICB9XG4gICAgb25TZXJ2aWNlUmVjb2duaXplZChvZmZzZXQpIHtcbiAgICAgICAgdGhpcy5wcml2TGFzdFJlY29PZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIHRoaXMucHJpdkh5cG90aGVzaXNSZWNlaXZlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZBdWRpb05vZGUuc2hyaW5rQnVmZmVycyhvZmZzZXQpO1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uQXR0ZW1wdHMgPSAwO1xuICAgIH1cbiAgICBvbkF1ZGlvU2VudChieXRlc1NlbnQpIHtcbiAgICAgICAgdGhpcy5wcml2Qnl0ZXNTZW50ICs9IGJ5dGVzU2VudDtcbiAgICB9XG4gICAgb25SZXRyeUNvbm5lY3Rpb24oKSB7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25BdHRlbXB0cysrO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZJc0Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICAgICAgLy8gd2Ugc2hvdWxkIGhhdmUgY29tcGxldGVkIGJ5IG5vdy4gSWYgd2UgZGlkIG5vdCBpdHMgYW4gdW5rbm93biBlcnJvci5cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRldGFjaGFibGUgb2YgdGhpcy5wcml2RGV0YWNoYWJsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgZGV0YWNoYWJsZS5kZXRhY2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2U2VydmljZVRlbGVtZXRyeUxpc3RlbmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lci5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucHJpdklzUmVjb2duaXppbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldFRlbGVtZXRyeSgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdlNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lci5oYXNUZWxlbWV0cnkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIuZ2V0VGVsZW1ldHJ5KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvblN0b3BSZWNvZ25pemluZygpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMub25Db21wbGV0ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gU2hvdWxkIGJlIGNhbGxlZCB3aXRoIHRoZSBhdWRpb05vZGUgZm9yIHRoaXMgc2Vzc2lvbiBoYXMgaW5kaWNhdGVkIHRoYXQgaXQgaXMgb3V0IG9mIHNwZWVjaC5cbiAgICBvblNwZWVjaEVuZGVkKCkge1xuICAgICAgICB0aGlzLnByaXZJc1NwZWVjaEVuZGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgb25FdmVudChldmVudCkge1xuICAgICAgICBpZiAoISF0aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lci5vbkV2ZW50KGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBFdmVudHMuaW5zdGFuY2Uub25FdmVudChldmVudCk7XG4gICAgfVxuICAgIG9uQ29tcGxldGUoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZJc1JlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNSZWNvZ25pemluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuZGV0YWNoQXVkaW9Ob2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZXRhY2hBdWRpb05vZGUoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJpdklzQXVkaW9Ob2RlRGV0YWNoZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZJc0F1ZGlvTm9kZURldGFjaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2QXVkaW9Ob2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdkF1ZGlvTm9kZS5kZXRhY2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVxdWVzdFNlc3Npb24uanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8vIHJlc3BvbnNlXG5leHBvcnQgY2xhc3MgQWN0aXZpdHlQYXlsb2FkUmVzcG9uc2Uge1xuICAgIGNvbnN0cnVjdG9yKGpzb24pIHtcbiAgICAgICAgdGhpcy5wcml2QWN0aXZpdHlSZXNwb25zZSA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIHJldHVybiBuZXcgQWN0aXZpdHlQYXlsb2FkUmVzcG9uc2UoanNvbik7XG4gICAgfVxuICAgIGdldCBjb252ZXJzYXRpb25JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkFjdGl2aXR5UmVzcG9uc2UuY29udmVyc2F0aW9uSWQ7XG4gICAgfVxuICAgIGdldCBtZXNzYWdlRGF0YVN0cmVhbVR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBY3Rpdml0eVJlc3BvbnNlLm1lc3NhZ2VEYXRhU3RyZWFtVHlwZTtcbiAgICB9XG4gICAgZ2V0IG1lc3NhZ2VQYXlsb2FkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QWN0aXZpdHlSZXNwb25zZS5tZXNzYWdlUGF5bG9hZDtcbiAgICB9XG4gICAgZ2V0IHZlcnNpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBY3Rpdml0eVJlc3BvbnNlLnZlcnNpb247XG4gICAgfVxufVxuZXhwb3J0IHZhciBNZXNzYWdlRGF0YVN0cmVhbVR5cGU7XG4oZnVuY3Rpb24gKE1lc3NhZ2VEYXRhU3RyZWFtVHlwZSkge1xuICAgIE1lc3NhZ2VEYXRhU3RyZWFtVHlwZVtNZXNzYWdlRGF0YVN0cmVhbVR5cGVbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcbiAgICBNZXNzYWdlRGF0YVN0cmVhbVR5cGVbTWVzc2FnZURhdGFTdHJlYW1UeXBlW1wiVGV4dFRvU3BlZWNoQXVkaW9cIl0gPSAxXSA9IFwiVGV4dFRvU3BlZWNoQXVkaW9cIjtcbn0pKE1lc3NhZ2VEYXRhU3RyZWFtVHlwZSB8fCAoTWVzc2FnZURhdGFTdHJlYW1UeXBlID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QWN0aXZpdHlSZXNwb25zZVBheWxvYWQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFJlY29nbml0aW9uU3RhdHVzIH0gZnJvbSBcIi4uL0V4cG9ydHNcIjtcbmV4cG9ydCBjbGFzcyBEZXRhaWxlZFNwZWVjaFBocmFzZSB7XG4gICAgY29uc3RydWN0b3IoanNvbikge1xuICAgICAgICB0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZSA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgICAgIHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzID0gUmVjb2duaXRpb25TdGF0dXNbdGhpcy5wcml2RGV0YWlsZWRTcGVlY2hQaHJhc2UuUmVjb2duaXRpb25TdGF0dXNdO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICByZXR1cm4gbmV3IERldGFpbGVkU3BlZWNoUGhyYXNlKGpzb24pO1xuICAgIH1cbiAgICBnZXRKc29uV2l0aENvcnJlY3RlZE9mZnNldHMoYmFzZU9mZnNldCkge1xuICAgICAgICBpZiAoISF0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZS5OQmVzdCkge1xuICAgICAgICAgICAgbGV0IGZpcnN0V29yZE9mZnNldDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGhyYXNlIG9mIHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlLk5CZXN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhcGhyYXNlLldvcmRzICYmICEhcGhyYXNlLldvcmRzWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0V29yZE9mZnNldCA9IHBocmFzZS5Xb3Jkc1swXS5PZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghIWZpcnN0V29yZE9mZnNldCAmJiBmaXJzdFdvcmRPZmZzZXQgPCBiYXNlT2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gYmFzZU9mZnNldCAtIGZpcnN0V29yZE9mZnNldDtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRldGFpbHMgb2YgdGhpcy5wcml2RGV0YWlsZWRTcGVlY2hQaHJhc2UuTkJlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZGV0YWlscy5Xb3Jkcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIGRldGFpbHMuV29yZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JkLk9mZnNldCArPSBvZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlKTtcbiAgICB9XG4gICAgZ2V0IFJlY29nbml0aW9uU3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RGV0YWlsZWRTcGVlY2hQaHJhc2UuUmVjb2duaXRpb25TdGF0dXM7XG4gICAgfVxuICAgIGdldCBOQmVzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlLk5CZXN0O1xuICAgIH1cbiAgICBnZXQgRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZS5EdXJhdGlvbjtcbiAgICB9XG4gICAgZ2V0IE9mZnNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlLk9mZnNldDtcbiAgICB9XG4gICAgZ2V0IExhbmd1YWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RGV0YWlsZWRTcGVlY2hQaHJhc2UuUHJpbWFyeUxhbmd1YWdlID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiB0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZS5QcmltYXJ5TGFuZ3VhZ2UuTGFuZ3VhZ2U7XG4gICAgfVxuICAgIGdldCBMYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZS5QcmltYXJ5TGFuZ3VhZ2UgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlLlByaW1hcnlMYW5ndWFnZS5Db25maWRlbmNlO1xuICAgIH1cbiAgICBnZXQgVGV4dCgpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2RGV0YWlsZWRTcGVlY2hQaHJhc2UuTkJlc3QgJiYgdGhpcy5wcml2RGV0YWlsZWRTcGVlY2hQaHJhc2UuTkJlc3RbMF0pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZS5OQmVzdFswXS5EaXNwbGF5IHx8IHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlLk5CZXN0WzBdLkRpc3BsYXlUZXh0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZS5EaXNwbGF5VGV4dDtcbiAgICB9XG4gICAgZ2V0IFNwZWFrZXJJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlLlNwZWFrZXJJZDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURldGFpbGVkU3BlZWNoUGhyYXNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIEBjbGFzcyBTeW50aGVzaXNTdGF0dXNcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCB2YXIgU3ludGhlc2lzU3RhdHVzO1xuKGZ1bmN0aW9uIChTeW50aGVzaXNTdGF0dXMpIHtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVzcG9uc2UgY29udGFpbnMgdmFsaWQgYXVkaW8gZGF0YS5cbiAgICAgKiBAbWVtYmVyIFN5bnRoZXNpc1N0YXR1cy5TdWNjZXNzXG4gICAgICovXG4gICAgU3ludGhlc2lzU3RhdHVzW1N5bnRoZXNpc1N0YXR1c1tcIlN1Y2Nlc3NcIl0gPSAwXSA9IFwiU3VjY2Vzc1wiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgZW5kIG9mIGF1ZGlvIGRhdGEuIE5vIHZhbGlkIGF1ZGlvIGRhdGEgaXMgaW5jbHVkZWQgaW4gdGhlIG1lc3NhZ2UuXG4gICAgICogQG1lbWJlciBTeW50aGVzaXNTdGF0dXMuU3ludGhlc2lzRW5kXG4gICAgICovXG4gICAgU3ludGhlc2lzU3RhdHVzW1N5bnRoZXNpc1N0YXR1c1tcIlN5bnRoZXNpc0VuZFwiXSA9IDFdID0gXCJTeW50aGVzaXNFbmRcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgYW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHN5bnRoZXNpcyBkYXRhIHByb2Nlc3NpbmcuXG4gICAgICogQG1lbWJlciBTeW50aGVzaXNTdGF0dXMuRXJyb3JcbiAgICAgKi9cbiAgICBTeW50aGVzaXNTdGF0dXNbU3ludGhlc2lzU3RhdHVzW1wiRXJyb3JcIl0gPSAyXSA9IFwiRXJyb3JcIjtcbn0pKFN5bnRoZXNpc1N0YXR1cyB8fCAoU3ludGhlc2lzU3RhdHVzID0ge30pKTtcbmV4cG9ydCB2YXIgUmVjb2duaXRpb25TdGF0dXM7XG4oZnVuY3Rpb24gKFJlY29nbml0aW9uU3RhdHVzKSB7XG4gICAgUmVjb2duaXRpb25TdGF0dXNbUmVjb2duaXRpb25TdGF0dXNbXCJTdWNjZXNzXCJdID0gMF0gPSBcIlN1Y2Nlc3NcIjtcbiAgICBSZWNvZ25pdGlvblN0YXR1c1tSZWNvZ25pdGlvblN0YXR1c1tcIk5vTWF0Y2hcIl0gPSAxXSA9IFwiTm9NYXRjaFwiO1xuICAgIFJlY29nbml0aW9uU3RhdHVzW1JlY29nbml0aW9uU3RhdHVzW1wiSW5pdGlhbFNpbGVuY2VUaW1lb3V0XCJdID0gMl0gPSBcIkluaXRpYWxTaWxlbmNlVGltZW91dFwiO1xuICAgIFJlY29nbml0aW9uU3RhdHVzW1JlY29nbml0aW9uU3RhdHVzW1wiQmFiYmxlVGltZW91dFwiXSA9IDNdID0gXCJCYWJibGVUaW1lb3V0XCI7XG4gICAgUmVjb2duaXRpb25TdGF0dXNbUmVjb2duaXRpb25TdGF0dXNbXCJFcnJvclwiXSA9IDRdID0gXCJFcnJvclwiO1xuICAgIFJlY29nbml0aW9uU3RhdHVzW1JlY29nbml0aW9uU3RhdHVzW1wiRW5kT2ZEaWN0YXRpb25cIl0gPSA1XSA9IFwiRW5kT2ZEaWN0YXRpb25cIjtcbiAgICBSZWNvZ25pdGlvblN0YXR1c1tSZWNvZ25pdGlvblN0YXR1c1tcIlRvb01hbnlSZXF1ZXN0c1wiXSA9IDZdID0gXCJUb29NYW55UmVxdWVzdHNcIjtcbiAgICBSZWNvZ25pdGlvblN0YXR1c1tSZWNvZ25pdGlvblN0YXR1c1tcIkJhZFJlcXVlc3RcIl0gPSA3XSA9IFwiQmFkUmVxdWVzdFwiO1xuICAgIFJlY29nbml0aW9uU3RhdHVzW1JlY29nbml0aW9uU3RhdHVzW1wiRm9yYmlkZGVuXCJdID0gOF0gPSBcIkZvcmJpZGRlblwiO1xufSkoUmVjb2duaXRpb25TdGF0dXMgfHwgKFJlY29nbml0aW9uU3RhdHVzID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RW51bXMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8vIHJlc3BvbnNlXG5leHBvcnQgY2xhc3MgSW50ZW50UmVzcG9uc2Uge1xuICAgIGNvbnN0cnVjdG9yKGpzb24pIHtcbiAgICAgICAgaWYgKGpzb24gPT09IFwiXCIpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkludGVudFJlc3BvbnNlID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnByaXZJbnRlbnRSZXNwb25zZSA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbnRlbnRSZXNwb25zZShqc29uKTtcbiAgICB9XG4gICAgZ2V0IHF1ZXJ5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SW50ZW50UmVzcG9uc2UucXVlcnk7XG4gICAgfVxuICAgIGdldCB0b3BTY29yaW5nSW50ZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SW50ZW50UmVzcG9uc2UudG9wU2NvcmluZ0ludGVudDtcbiAgICB9XG4gICAgZ2V0IGVudGl0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SW50ZW50UmVzcG9uc2UuZW50aXRpZXM7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlbnRSZXNwb25zZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUmVjb2duaXRpb25TdGF0dXMgfSBmcm9tIFwiLi4vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIFNpbXBsZVNwZWVjaFBocmFzZSB7XG4gICAgY29uc3RydWN0b3IoanNvbikge1xuICAgICAgICB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgICAgICB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UuUmVjb2duaXRpb25TdGF0dXMgPSBSZWNvZ25pdGlvblN0YXR1c1t0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UuUmVjb2duaXRpb25TdGF0dXNdO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVNwZWVjaFBocmFzZShqc29uKTtcbiAgICB9XG4gICAgZ2V0IFJlY29nbml0aW9uU3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U2ltcGxlU3BlZWNoUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzO1xuICAgIH1cbiAgICBnZXQgRGlzcGxheVRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UuRGlzcGxheVRleHQ7XG4gICAgfVxuICAgIGdldCBPZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UuT2Zmc2V0O1xuICAgIH1cbiAgICBnZXQgRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UuRHVyYXRpb247XG4gICAgfVxuICAgIGdldCBMYW5ndWFnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNpbXBsZVNwZWVjaFBocmFzZS5QcmltYXJ5TGFuZ3VhZ2UgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHRoaXMucHJpdlNpbXBsZVNwZWVjaFBocmFzZS5QcmltYXJ5TGFuZ3VhZ2UuTGFuZ3VhZ2U7XG4gICAgfVxuICAgIGdldCBMYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UuUHJpbWFyeUxhbmd1YWdlID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UuUHJpbWFyeUxhbmd1YWdlLkNvbmZpZGVuY2U7XG4gICAgfVxuICAgIGdldCBTcGVha2VySWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UuU3BlYWtlcklkO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U2ltcGxlU3BlZWNoUGhyYXNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgY2xhc3MgU3BlZWNoRGV0ZWN0ZWQge1xuICAgIGNvbnN0cnVjdG9yKGpzb24pIHtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoU3RhcnREZXRlY3RlZCA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3BlZWNoRGV0ZWN0ZWQoanNvbik7XG4gICAgfVxuICAgIGdldCBPZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hTdGFydERldGVjdGVkLk9mZnNldDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaERldGVjdGVkLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgY2xhc3MgU3BlZWNoSHlwb3RoZXNpcyB7XG4gICAgY29uc3RydWN0b3IoanNvbikge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hIeXBvdGhlc2lzID0gSlNPTi5wYXJzZShqc29uKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTcGVlY2hIeXBvdGhlc2lzKGpzb24pO1xuICAgIH1cbiAgICBnZXQgVGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaEh5cG90aGVzaXMuVGV4dDtcbiAgICB9XG4gICAgZ2V0IE9mZnNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaEh5cG90aGVzaXMuT2Zmc2V0O1xuICAgIH1cbiAgICBnZXQgRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hIeXBvdGhlc2lzLkR1cmF0aW9uO1xuICAgIH1cbiAgICBnZXQgTGFuZ3VhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hIeXBvdGhlc2lzLlByaW1hcnlMYW5ndWFnZSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogdGhpcy5wcml2U3BlZWNoSHlwb3RoZXNpcy5QcmltYXJ5TGFuZ3VhZ2UuTGFuZ3VhZ2U7XG4gICAgfVxuICAgIGdldCBMYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hIeXBvdGhlc2lzLlByaW1hcnlMYW5ndWFnZSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogdGhpcy5wcml2U3BlZWNoSHlwb3RoZXNpcy5QcmltYXJ5TGFuZ3VhZ2UuQ29uZmlkZW5jZTtcbiAgICB9XG4gICAgZ2V0IFNwZWFrZXJJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaEh5cG90aGVzaXMuU3BlYWtlcklkO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoSHlwb3RoZXNpcy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuZXhwb3J0IGNsYXNzIFNwZWVjaEtleXdvcmQge1xuICAgIGNvbnN0cnVjdG9yKGpzb24pIHtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoS2V5d29yZCA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3BlZWNoS2V5d29yZChqc29uKTtcbiAgICB9XG4gICAgZ2V0IFN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaEtleXdvcmQuU3RhdHVzO1xuICAgIH1cbiAgICBnZXQgVGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaEtleXdvcmQuVGV4dDtcbiAgICB9XG4gICAgZ2V0IE9mZnNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaEtleXdvcmQuT2Zmc2V0O1xuICAgIH1cbiAgICBnZXQgRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hLZXl3b3JkLkR1cmF0aW9uO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoS2V5d29yZC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuZXhwb3J0IHZhciBNZXRhZGF0YVR5cGU7XG4oZnVuY3Rpb24gKE1ldGFkYXRhVHlwZSkge1xuICAgIE1ldGFkYXRhVHlwZVtcIldvcmRCb3VuZGFyeVwiXSA9IFwiV29yZEJvdW5kYXJ5XCI7XG4gICAgTWV0YWRhdGFUeXBlW1wiQm9va21hcmtcIl0gPSBcIkJvb2ttYXJrXCI7XG4gICAgTWV0YWRhdGFUeXBlW1wiVmlzZW1lXCJdID0gXCJWaXNlbWVcIjtcbiAgICBNZXRhZGF0YVR5cGVbXCJTZW50ZW5jZUJvdW5kYXJ5XCJdID0gXCJTZW50ZW5jZUJvdW5kYXJ5XCI7XG4gICAgTWV0YWRhdGFUeXBlW1wiU2Vzc2lvbkVuZFwiXSA9IFwiU2Vzc2lvbkVuZFwiO1xufSkoTWV0YWRhdGFUeXBlIHx8IChNZXRhZGF0YVR5cGUgPSB7fSkpO1xuZXhwb3J0IGNsYXNzIFN5bnRoZXNpc0F1ZGlvTWV0YWRhdGEge1xuICAgIGNvbnN0cnVjdG9yKGpzb24pIHtcbiAgICAgICAgdGhpcy5wcml2U3ludGhlc2lzQXVkaW9NZXRhZGF0YSA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3ludGhlc2lzQXVkaW9NZXRhZGF0YShqc29uKTtcbiAgICB9XG4gICAgZ2V0IE1ldGFkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3ludGhlc2lzQXVkaW9NZXRhZGF0YS5NZXRhZGF0YTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN5bnRoZXNpc0F1ZGlvTWV0YWRhdGEuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFRyYW5zbGF0aW9uU3RhdHVzIH0gZnJvbSBcIi4uL1RyYW5zbGF0aW9uU3RhdHVzXCI7XG5leHBvcnQgY2xhc3MgVHJhbnNsYXRpb25IeXBvdGhlc2lzIHtcbiAgICBjb25zdHJ1Y3Rvcihqc29uKSB7XG4gICAgICAgIHRoaXMucHJpdlRyYW5zbGF0aW9uSHlwb3RoZXNpcyA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgICAgIHRoaXMucHJpdlRyYW5zbGF0aW9uSHlwb3RoZXNpcy5UcmFuc2xhdGlvbi5UcmFuc2xhdGlvblN0YXR1cyA9IFRyYW5zbGF0aW9uU3RhdHVzW3RoaXMucHJpdlRyYW5zbGF0aW9uSHlwb3RoZXNpcy5UcmFuc2xhdGlvbi5UcmFuc2xhdGlvblN0YXR1c107XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJhbnNsYXRpb25IeXBvdGhlc2lzKGpzb24pO1xuICAgIH1cbiAgICBnZXQgRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUcmFuc2xhdGlvbkh5cG90aGVzaXMuRHVyYXRpb247XG4gICAgfVxuICAgIGdldCBPZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUcmFuc2xhdGlvbkh5cG90aGVzaXMuT2Zmc2V0O1xuICAgIH1cbiAgICBnZXQgVGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9uSHlwb3RoZXNpcy5UZXh0O1xuICAgIH1cbiAgICBnZXQgVHJhbnNsYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUcmFuc2xhdGlvbkh5cG90aGVzaXMuVHJhbnNsYXRpb247XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2xhdGlvbkh5cG90aGVzaXMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuLi8uLi9zZGsvQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBSZWNvZ25pdGlvblN0YXR1cyB9IGZyb20gXCIuLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBUcmFuc2xhdGlvblN0YXR1cyB9IGZyb20gXCIuLi9UcmFuc2xhdGlvblN0YXR1c1wiO1xuZXhwb3J0IGNsYXNzIFRyYW5zbGF0aW9uUGhyYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihwaHJhc2UpIHtcbiAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25QaHJhc2UgPSBwaHJhc2U7XG4gICAgICAgIHRoaXMucHJpdlRyYW5zbGF0aW9uUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzID0gUmVjb2duaXRpb25TdGF0dXNbdGhpcy5wcml2VHJhbnNsYXRpb25QaHJhc2UuUmVjb2duaXRpb25TdGF0dXNdO1xuICAgICAgICBpZiAodGhpcy5wcml2VHJhbnNsYXRpb25QaHJhc2UuVHJhbnNsYXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25QaHJhc2UuVHJhbnNsYXRpb24uVHJhbnNsYXRpb25TdGF0dXMgPSBUcmFuc2xhdGlvblN0YXR1c1t0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5UcmFuc2xhdGlvbi5UcmFuc2xhdGlvblN0YXR1c107XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2xhdGlvblBocmFzZShKU09OLnBhcnNlKGpzb24pKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21UcmFuc2xhdGlvblJlc3BvbnNlKHRyYW5zbGF0aW9uUmVzcG9uc2UpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQodHJhbnNsYXRpb25SZXNwb25zZSwgXCJ0cmFuc2xhdGlvblJlc3BvbnNlXCIpO1xuICAgICAgICBjb25zdCBwaHJhc2UgPSB0cmFuc2xhdGlvblJlc3BvbnNlLlNwZWVjaFBocmFzZTtcbiAgICAgICAgdHJhbnNsYXRpb25SZXNwb25zZS5TcGVlY2hQaHJhc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIHBocmFzZS5UcmFuc2xhdGlvbiA9IHRyYW5zbGF0aW9uUmVzcG9uc2U7XG4gICAgICAgIHBocmFzZS5UZXh0ID0gcGhyYXNlLkRpc3BsYXlUZXh0O1xuICAgICAgICByZXR1cm4gbmV3IFRyYW5zbGF0aW9uUGhyYXNlKHBocmFzZSk7XG4gICAgfVxuICAgIGdldCBSZWNvZ25pdGlvblN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9uUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzO1xuICAgIH1cbiAgICBnZXQgT2Zmc2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VHJhbnNsYXRpb25QaHJhc2UuT2Zmc2V0O1xuICAgIH1cbiAgICBnZXQgRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5EdXJhdGlvbjtcbiAgICB9XG4gICAgZ2V0IFRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5UZXh0O1xuICAgIH1cbiAgICBnZXQgVHJhbnNsYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5UcmFuc2xhdGlvbjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9uUGhyYXNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBTeW50aGVzaXNTdGF0dXMgfSBmcm9tIFwiLi4vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIFRyYW5zbGF0aW9uU3ludGhlc2lzRW5kIHtcbiAgICBjb25zdHJ1Y3Rvcihqc29uKSB7XG4gICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc0VuZCA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc0VuZC5TeW50aGVzaXNTdGF0dXMgPSBTeW50aGVzaXNTdGF0dXNbdGhpcy5wcml2U3ludGhlc2lzRW5kLlN5bnRoZXNpc1N0YXR1c107XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJhbnNsYXRpb25TeW50aGVzaXNFbmQoanNvbik7XG4gICAgfVxuICAgIGdldCBTeW50aGVzaXNTdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTeW50aGVzaXNFbmQuU3ludGhlc2lzU3RhdHVzO1xuICAgIH1cbiAgICBnZXQgRmFpbHVyZVJlYXNvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlN5bnRoZXNpc0VuZC5GYWlsdXJlUmVhc29uO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNsYXRpb25TeW50aGVzaXNFbmQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmV4cG9ydCBjbGFzcyBUdXJuU3RhdHVzUmVzcG9uc2VQYXlsb2FkIHtcbiAgICBjb25zdHJ1Y3Rvcihqc29uKSB7XG4gICAgICAgIHRoaXMucHJpdk1lc3NhZ2VTdGF0dXNSZXNwb25zZSA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIHJldHVybiBuZXcgVHVyblN0YXR1c1Jlc3BvbnNlUGF5bG9hZChqc29uKTtcbiAgICB9XG4gICAgZ2V0IGludGVyYWN0aW9uSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZNZXNzYWdlU3RhdHVzUmVzcG9uc2UuaW50ZXJhY3Rpb25JZDtcbiAgICB9XG4gICAgZ2V0IGNvbnZlcnNhdGlvbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TWVzc2FnZVN0YXR1c1Jlc3BvbnNlLmNvbnZlcnNhdGlvbklkO1xuICAgIH1cbiAgICBnZXQgc3RhdHVzQ29kZSgpIHtcbiAgICAgICAgLy8gUGF5bG9hZHMgbWF5IGNvbnRhaW4gYSBsaW1pdGVkIHNldCBvZiB0ZXh0dWFsIHJlcHJlc2VudGF0aW9ucyBvciBhIG51bWVyaWMgc3RhdHVzXG4gICAgICAgIC8vIGNvZGUuIFRoZSB0ZXh0dWFsIHZhbHVlcyBhcmUgaGVyZSBjb252ZXJ0ZWQgaW50byBudW1lcmljIG9uZXMuXG4gICAgICAgIHN3aXRjaCAodGhpcy5wcml2TWVzc2FnZVN0YXR1c1Jlc3BvbnNlLnN0YXR1c0NvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJTdWNjZXNzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDIwMDtcbiAgICAgICAgICAgIGNhc2UgXCJGYWlsZWRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gNDAwO1xuICAgICAgICAgICAgY2FzZSBcIlRpbWVkT3V0XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDQyOTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtcmV0dXJuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdk1lc3NhZ2VTdGF0dXNSZXNwb25zZS5zdGF0dXNDb2RlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UdXJuU3RhdHVzUGF5bG9hZC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBSZXBsYXlhYmxlQXVkaW9Ob2RlIH0gZnJvbSBcIi4uL2NvbW1vbi5icm93c2VyL0V4cG9ydHNcIjtcbmltcG9ydCB7IEFyZ3VtZW50TnVsbEVycm9yLCBDb25uZWN0aW9uU3RhdGUsIGNyZWF0ZU5vRGFzaEd1aWQsIEV2ZW50U291cmNlLCBNZXNzYWdlVHlwZSwgU2VydmljZUV2ZW50LCBUaW1lb3V0IH0gZnJvbSBcIi4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25FcnJvckNvZGUsIENhbmNlbGxhdGlvblJlYXNvbiwgUHJvcGVydHlJZCwgUmVjb2duaXRpb25FdmVudEFyZ3MsIFNlc3Npb25FdmVudEFyZ3MsIH0gZnJvbSBcIi4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBBZ2VudENvbmZpZywgRHluYW1pY0dyYW1tYXJCdWlsZGVyLCBSZXF1ZXN0U2Vzc2lvbiwgU3BlZWNoQ29udGV4dCwgU3BlZWNoRGV0ZWN0ZWQsIHR5cGUgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZSB9IGZyb20gXCIuL1NwZWVjaENvbm5lY3Rpb25NZXNzYWdlLkludGVybmFsXCI7XG5leHBvcnQgY2xhc3MgU2VydmljZVJlY29nbml6ZXJCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCByZWNvZ25pemVyKSB7XG4gICAgICAgIC8vIEEgcHJvbWlzZSBmb3IgYSBjb25maWd1cmVkIGNvbm5lY3Rpb24uXG4gICAgICAgIC8vIERvIG5vdCBjb25zdW1lIGRpcmVjdGx5LCBjYWxsIGZldGNoQ29ubmVjdGlvbiBpbnN0ZWFkLlxuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8vIEEgcHJvbWlzZSBmb3IgYSBjb25uZWN0aW9uLCBidXQgb25lIHRoYXQgaGFzIG5vdCBoYWQgdGhlIHNwZWVjaCBjb250ZXh0IHNlbnQgeWV0LlxuICAgICAgICAvLyBEbyBub3QgY29uc3VtZSBkaXJlY3RseSwgY2FsbCBmZXRjaENvbm5lY3Rpb24gaW5zdGVhZC5cbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucHJpdlNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB0aGlzLnByaXZJc0xpdmVBdWRpbyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJlY29nbml6ZU92ZXJyaWRlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RPdmVycmlkZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5yZWNlaXZlTWVzc2FnZU92ZXJyaWRlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnNlbmRQcmVQYXlsb2FkSlNPTk92ZXJyaWRlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnBvc3RDb25uZWN0SW1wbE92ZXJyaWRlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNvbmZpZ0Nvbm5lY3Rpb25PdmVycmlkZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5oYW5kbGVTcGVlY2hQaHJhc2VNZXNzYWdlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmhhbmRsZVNwZWVjaEh5cG90aGVzaXNNZXNzYWdlID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoIWF1dGhlbnRpY2F0aW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXJyb3IoXCJhdXRoZW50aWNhdGlvblwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNvbm5lY3Rpb25GYWN0b3J5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXJyb3IoXCJjb25uZWN0aW9uRmFjdG9yeVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWF1ZGlvU291cmNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXJyb3IoXCJhdWRpb1NvdXJjZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlY29nbml6ZXJDb25maWcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcInJlY29nbml6ZXJDb25maWdcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2TXVzdFJlcG9ydEVuZE9mU3RyZWFtID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkF1dGhlbnRpY2F0aW9uID0gYXV0aGVudGljYXRpb247XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25GYWN0b3J5ID0gY29ubmVjdGlvbkZhY3Rvcnk7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvU291cmNlID0gYXVkaW9Tb3VyY2U7XG4gICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcgPSByZWNvZ25pemVyQ29uZmlnO1xuICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXIgPSByZWNvZ25pemVyO1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbiA9IG5ldyBSZXF1ZXN0U2Vzc2lvbih0aGlzLnByaXZBdWRpb1NvdXJjZS5pZCgpKTtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkV2ZW50cyA9IG5ldyBFdmVudFNvdXJjZSgpO1xuICAgICAgICB0aGlzLnByaXZTZXJ2aWNlRXZlbnRzID0gbmV3IEV2ZW50U291cmNlKCk7XG4gICAgICAgIHRoaXMucHJpdkR5bmFtaWNHcmFtbWFyID0gbmV3IER5bmFtaWNHcmFtbWFyQnVpbGRlcigpO1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hDb250ZXh0ID0gbmV3IFNwZWVjaENvbnRleHQodGhpcy5wcml2RHluYW1pY0dyYW1tYXIpO1xuICAgICAgICB0aGlzLnByaXZBZ2VudENvbmZpZyA9IG5ldyBBZ2VudENvbmZpZygpO1xuICAgICAgICBpZiAodHlwZW9mIChCbG9iKSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgKFdvcmtlcikgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlNldFRpbWVvdXQgPSBUaW1lb3V0LnNldFRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb25uZWN0aW9uRXZlbnRzLmF0dGFjaCgoY29ubmVjdGlvbkV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoY29ubmVjdGlvbkV2ZW50Lm5hbWUgPT09IFwiQ29ubmVjdGlvbkNsb3NlZEV2ZW50XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uQ2xvc2VkRXZlbnQgPSBjb25uZWN0aW9uRXZlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb25DbG9zZWRFdmVudC5zdGF0dXNDb2RlID09PSAxMDAzIHx8XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25DbG9zZWRFdmVudC5zdGF0dXNDb2RlID09PSAxMDA3IHx8XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25DbG9zZWRFdmVudC5zdGF0dXNDb2RlID09PSAxMDAyIHx8XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25DbG9zZWRFdmVudC5zdGF0dXNDb2RlID09PSA0MDAwIHx8XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm51bUNvbm5lY3Rpb25BdHRlbXB0cyA+IHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcubWF4UmV0cnlDb3VudCkge1xuICAgICAgICAgICAgICAgICAgICB2b2lkIHRoaXMuY2FuY2VsUmVjb2duaXRpb25Mb2NhbChDYW5jZWxsYXRpb25SZWFzb24uRXJyb3IsIGNvbm5lY3Rpb25DbG9zZWRFdmVudC5zdGF0dXNDb2RlID09PSAxMDA3ID8gQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLkJhZFJlcXVlc3RQYXJhbWV0ZXJzIDogQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLkNvbm5lY3Rpb25GYWlsdXJlLCBgJHtjb25uZWN0aW9uQ2xvc2VkRXZlbnQucmVhc29ufSB3ZWJzb2NrZXQgZXJyb3IgY29kZTogJHtjb25uZWN0aW9uQ2xvc2VkRXZlbnQuc3RhdHVzQ29kZX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgYXVkaW9Tb3VyY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb1NvdXJjZTtcbiAgICB9XG4gICAgZ2V0IHNwZWVjaENvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hDb250ZXh0O1xuICAgIH1cbiAgICBnZXQgZHluYW1pY0dyYW1tYXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEeW5hbWljR3JhbW1hcjtcbiAgICB9XG4gICAgZ2V0IGFnZW50Q29uZmlnKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QWdlbnRDb25maWc7XG4gICAgfVxuICAgIHNldCBjb252ZXJzYXRpb25UcmFuc2xhdG9yVG9rZW4odG9rZW4pIHtcbiAgICAgICAgdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5wYXJhbWV0ZXJzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uVHJhbnNsYXRvcl9Ub2tlbiwgdG9rZW4pO1xuICAgIH1cbiAgICBzZXQgYXV0aGVudGljYXRpb24oYXV0aCkge1xuICAgICAgICB0aGlzLnByaXZBdXRoZW50aWNhdGlvbiA9IHRoaXMuYXV0aGVudGljYXRpb247XG4gICAgfVxuICAgIGlzRGlzcG9zZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc0Rpc3Bvc2VkO1xuICAgIH1cbiAgICBkaXNwb3NlKHJlYXNvbikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uID0geWllbGQgdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlO1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBjb25uZWN0aW9uLmRpc3Bvc2UocmVhc29uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBjb25uZWN0aW9uIGlzIGluIGEgYmFkIHN0YXRlLiBCdXQgd2UncmUgdHJ5aW5nIHRvIGtpbGwgaXQsIHNvLi4uXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgY29ubmVjdGlvbkV2ZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25FdmVudHM7XG4gICAgfVxuICAgIGdldCBzZXJ2aWNlRXZlbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U2VydmljZUV2ZW50cztcbiAgICB9XG4gICAgZ2V0IHJlY29nbml0aW9uTW9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcucmVjb2duaXRpb25Nb2RlO1xuICAgIH1cbiAgICByZWNvZ25pemUocmVjb01vZGUsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsQmFjaykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVjb2duaXplT3ZlcnJpZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucmVjb2duaXplT3ZlcnJpZGUocmVjb01vZGUsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsQmFjayk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ2xlYXIgdGhlIGV4aXN0aW5nIGNvbmZpZ3VyYXRpb24gcHJvbWlzZSB0byBmb3JjZSBhIHJlLXRyYW5zbWlzc2lvbiBvZiBjb25maWcgYW5kIGNvbnRleHQuXG4gICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLnJlY29nbml0aW9uTW9kZSA9IHJlY29Nb2RlO1xuICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrID0gc3VjY2Vzc0NhbGxiYWNrO1xuICAgICAgICAgICAgdGhpcy5wcml2RXJyb3JDYWxsYmFjayA9IGVycm9yQ2FsbEJhY2s7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zdGFydE5ld1JlY29nbml0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5saXN0ZW5Gb3JTZXJ2aWNlVGVsZW1ldHJ5KHRoaXMucHJpdkF1ZGlvU291cmNlLmV2ZW50cyk7XG4gICAgICAgICAgICAvLyBTdGFydCB0aGUgY29ubmVjdGlvbiB0byB0aGUgc2VydmljZS4gVGhlIHByb21pc2UgdGhpcyB3aWxsIGNyZWF0ZSBpcyBzdG9yZWQgYW5kIHdpbGwgYmUgdXNlZCBieSBjb25maWd1cmVDb25uZWN0aW9uKCkuXG4gICAgICAgICAgICBjb25zdCBjb25Qcm9taXNlID0gdGhpcy5jb25uZWN0SW1wbCgpO1xuICAgICAgICAgICAgbGV0IGF1ZGlvTm9kZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9TdHJlYW1Ob2RlID0geWllbGQgdGhpcy5hdWRpb1NvdXJjZS5hdHRhY2godGhpcy5wcml2UmVxdWVzdFNlc3Npb24uYXVkaW9Ob2RlSWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdCA9IHlpZWxkIHRoaXMuYXVkaW9Tb3VyY2UuZm9ybWF0O1xuICAgICAgICAgICAgICAgIGNvbnN0IGRldmljZUluZm8gPSB5aWVsZCB0aGlzLmF1ZGlvU291cmNlLmRldmljZUluZm87XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNMaXZlQXVkaW8gPSBkZXZpY2VJbmZvLnR5cGUgJiYgZGV2aWNlSW5mby50eXBlID09PSB0eXBlLk1pY3JvcGhvbmVzO1xuICAgICAgICAgICAgICAgIGF1ZGlvTm9kZSA9IG5ldyBSZXBsYXlhYmxlQXVkaW9Ob2RlKGF1ZGlvU3RyZWFtTm9kZSwgZm9ybWF0LmF2Z0J5dGVzUGVyU2VjKTtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkF1ZGlvU291cmNlQXR0YWNoQ29tcGxldGVkKGF1ZGlvTm9kZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcuU3BlZWNoU2VydmljZUNvbmZpZy5Db250ZXh0LmF1ZGlvID0geyBzb3VyY2U6IGRldmljZUluZm8gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uU3RvcFJlY29nbml6aW5nKCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHlpZWxkIGNvblByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmNhbmNlbFJlY29nbml0aW9uTG9jYWwoQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBDYW5jZWxsYXRpb25FcnJvckNvZGUuQ29ubmVjdGlvbkZhaWx1cmUsIGVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uU3RhcnRFdmVudEFyZ3MgPSBuZXcgU2Vzc2lvbkV2ZW50QXJncyh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2UmVjb2duaXplci5zZXNzaW9uU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXIuc2Vzc2lvblN0YXJ0ZWQodGhpcy5wcml2UmVjb2duaXplciwgc2Vzc2lvblN0YXJ0RXZlbnRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZvaWQgdGhpcy5yZWNlaXZlTWVzc2FnZSgpO1xuICAgICAgICAgICAgY29uc3QgYXVkaW9TZW5kUHJvbWlzZSA9IHRoaXMuc2VuZEF1ZGlvKGF1ZGlvTm9kZSk7XG4gICAgICAgICAgICBhdWRpb1NlbmRQcm9taXNlLmNhdGNoKChlcnJvcikgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuY2FuY2VsUmVjb2duaXRpb25Mb2NhbChDYW5jZWxsYXRpb25SZWFzb24uRXJyb3IsIENhbmNlbGxhdGlvbkVycm9yQ29kZS5SdW50aW1lRXJyb3IsIGVycm9yKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0b3BSZWNvZ25pemluZygpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1JlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5hdWRpb1NvdXJjZS50dXJuT2ZmKCk7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuc2VuZEZpbmFsQXVkaW8oKTtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25TdG9wUmVjb2duaXppbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24udHVybkNvbXBsZXRpb25Qcm9taXNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLmNvbm5lY3RJbXBsKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25uZWN0QXN5bmMoY2IsIGVycikge1xuICAgICAgICB0aGlzLmNvbm5lY3RJbXBsKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgKHJlYXNvbikgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLmNhbmNlbFJlY29nbml0aW9uTG9jYWwoQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBDYW5jZWxsYXRpb25FcnJvckNvZGUuTm9FcnJvciwgXCJEaXNjb25uZWN0aW5nXCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGlzY29ubmVjdE92ZXJyaWRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmRpc2Nvbm5lY3RPdmVycmlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25Qcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCAoeWllbGQgdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UpLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNlbmROZXR3b3JrTWVzc2FnZShwYXRoLCBwYXlsb2FkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gdHlwZW9mIHBheWxvYWQgPT09IFwic3RyaW5nXCIgPyBNZXNzYWdlVHlwZS5UZXh0IDogTWVzc2FnZVR5cGUuQmluYXJ5O1xuICAgICAgICAgICAgY29uc3QgY29udGVudFR5cGUgPSB0eXBlb2YgcGF5bG9hZCA9PT0gXCJzdHJpbmdcIiA/IFwiYXBwbGljYXRpb24vanNvblwiIDogXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24uc2VuZChuZXcgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UodHlwZSwgcGF0aCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBjb250ZW50VHlwZSwgcGF5bG9hZCkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0IGFjdGl2aXR5VGVtcGxhdGUobWVzc2FnZVBheWxvYWQpIHtcbiAgICAgICAgdGhpcy5wcml2QWN0aXZpdHlUZW1wbGF0ZSA9IG1lc3NhZ2VQYXlsb2FkO1xuICAgIH1cbiAgICBnZXQgYWN0aXZpdHlUZW1wbGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkFjdGl2aXR5VGVtcGxhdGU7XG4gICAgfVxuICAgIHNlbmRUZWxlbWV0cnlEYXRhKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgdGVsZW1ldHJ5RGF0YSA9IHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmdldFRlbGVtZXRyeSgpO1xuICAgICAgICAgICAgaWYgKFNlcnZpY2VSZWNvZ25pemVyQmFzZS50ZWxlbWV0cnlEYXRhRW5hYmxlZCAhPT0gdHJ1ZSB8fFxuICAgICAgICAgICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgfHxcbiAgICAgICAgICAgICAgICBudWxsID09PSB0ZWxlbWV0cnlEYXRhKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhU2VydmljZVJlY29nbml6ZXJCYXNlLnRlbGVtZXRyeURhdGEpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBTZXJ2aWNlUmVjb2duaXplckJhc2UudGVsZW1ldHJ5RGF0YSh0ZWxlbWV0cnlEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgeWllbGQgY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBcInRlbGVtZXRyeVwiLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIFwiYXBwbGljYXRpb24vanNvblwiLCB0ZWxlbWV0cnlEYXRhKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDYW5jZWxzIHJlY29nbml0aW9uLlxuICAgIGNhbmNlbFJlY29nbml0aW9uTG9jYWwoY2FuY2VsbGF0aW9uUmVhc29uLCBlcnJvckNvZGUsIGVycm9yKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1JlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25TdG9wUmVjb2duaXppbmcoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbFJlY29nbml0aW9uKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yQ29kZSwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVjZWl2ZU1lc3NhZ2UoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZJc0Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlJ3JlIGRvbmUuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB5aWVsZCBjb25uZWN0aW9uLnJlYWQoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWNlaXZlTWVzc2FnZU92ZXJyaWRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZU1lc3NhZ2VPdmVycmlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBpbmRpY2F0ZXMgd2UgYXJlIGRyYWluaW5nIHRoZSBxdWV1ZSBhbmQgaXQgY2FtZSB3aXRoIG5vIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uaXNSZWNvZ25pemluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZU1lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTZXJ2aWNlSGFzU2VudE1lc3NhZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb25NZXNzYWdlID0gU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UuZnJvbUNvbm5lY3Rpb25NZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uTWVzc2FnZS5yZXF1ZXN0SWQudG9Mb3dlckNhc2UoKSA9PT0gdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb25uZWN0aW9uTWVzc2FnZS5wYXRoLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0dXJuLnN0YXJ0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TXVzdFJlcG9ydEVuZE9mU3RyZWFtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vblNlcnZpY2VUdXJuU3RhcnRSZXNwb25zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNwZWVjaC5zdGFydGRldGVjdGVkXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlZWNoU3RhcnREZXRlY3RlZCA9IFNwZWVjaERldGVjdGVkLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGVlY2hTdGFydEV2ZW50QXJncyA9IG5ldyBSZWNvZ25pdGlvbkV2ZW50QXJncyhzcGVlY2hTdGFydERldGVjdGVkLk9mZnNldCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZSZWNvZ25pemVyLnNwZWVjaFN0YXJ0RGV0ZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjb2duaXplci5zcGVlY2hTdGFydERldGVjdGVkKHRoaXMucHJpdlJlY29nbml6ZXIsIHNwZWVjaFN0YXJ0RXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3BlZWNoLmVuZGRldGVjdGVkXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGpzb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbiA9IGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3Qgd2FzIGVtcHR5LCB0aGUgSlNPTiByZXR1cm5lZCBpcyBlbXB0eS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbiA9IFwieyBPZmZzZXQ6IDAgfVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGVlY2hTdG9wRGV0ZWN0ZWQgPSBTcGVlY2hEZXRlY3RlZC5mcm9tSlNPTihqc29uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHNocmluayB0aGUgYnVmZmVycyBmb3IgY29udGludW91cyByZWNvZ25pdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3Igc2luZ2xlIHNob3QsIHRoZSBzcGVlY2gucGhyYXNlIG1lc3NhZ2Ugd2lsbCBjb21lIGFmdGVyIHRoZSBzcGVlY2guZW5kIGFuZCBpdCBzaG91bGQgb3duIGJ1ZmZlciBzaHJpbmsuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcuaXNDb250aW51b3VzUmVjb2duaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25TZXJ2aWNlUmVjb2duaXplZChzcGVlY2hTdG9wRGV0ZWN0ZWQuT2Zmc2V0ICsgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uY3VycmVudFR1cm5BdWRpb09mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZWVjaFN0b3BFdmVudEFyZ3MgPSBuZXcgUmVjb2duaXRpb25FdmVudEFyZ3Moc3BlZWNoU3RvcERldGVjdGVkLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2UmVjb2duaXplci5zcGVlY2hFbmREZXRlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyLnNwZWVjaEVuZERldGVjdGVkKHRoaXMucHJpdlJlY29nbml6ZXIsIHNwZWVjaFN0b3BFdmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0dXJuLmVuZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuc2VuZFRlbGVtZXRyeURhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2UmVxdWVzdFNlc3Npb24uaXNTcGVlY2hFbmRlZCAmJiB0aGlzLnByaXZNdXN0UmVwb3J0RW5kT2ZTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TXVzdFJlcG9ydEVuZE9mU3RyZWFtID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuY2FuY2VsUmVjb2duaXRpb25Mb2NhbChDYW5jZWxsYXRpb25SZWFzb24uRW5kT2ZTdHJlYW0sIENhbmNlbGxhdGlvbkVycm9yQ29kZS5Ob0Vycm9yLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXNzaW9uU3RvcEV2ZW50QXJncyA9IG5ldyBTZXNzaW9uRXZlbnRBcmdzKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25TZXJ2aWNlVHVybkVuZFJlc3BvbnNlKHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcuaXNDb250aW51b3VzUmVjb2duaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5pc0NvbnRpbnVvdXNSZWNvZ25pdGlvbiB8fCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1NwZWVjaEVuZGVkIHx8ICF0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1JlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlJlY29nbml6ZXIuc2Vzc2lvblN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXIuc2Vzc2lvblN0b3BwZWQodGhpcy5wcml2UmVjb2duaXplciwgc2Vzc2lvblN0b3BFdmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnNlbmRQcmVQYXlsb2FkSlNPTihjb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHlpZWxkIHRoaXMucHJvY2Vzc1R5cGVTcGVjaWZpY01lc3NhZ2VzKGNvbm5lY3Rpb25NZXNzYWdlKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGVyZSBhcmUgc29tZSBtZXNzYWdlcyB0aGF0IHRoZSBkZXJpdmVkIGNsYXNzIGhhcyBub3QgcHJvY2Vzc2VkLCBkaXNwYXRjaCB0aGVtIHRvIGNvbm5lY3QgY2xhc3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2U2VydmljZUV2ZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXJ2aWNlRXZlbnRzLm9uRXZlbnQobmV3IFNlcnZpY2VFdmVudChjb25uZWN0aW9uTWVzc2FnZS5wYXRoLnRvTG93ZXJDYXNlKCksIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZU1lc3NhZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2VuZFNwZWVjaENvbnRleHQoY29ubmVjdGlvbiwgZ2VuZXJhdGVOZXdSZXF1ZXN0SWQpIHtcbiAgICAgICAgY29uc3Qgc3BlZWNoQ29udGV4dEpzb24gPSB0aGlzLnNwZWVjaENvbnRleHQudG9KU09OKCk7XG4gICAgICAgIGlmIChnZW5lcmF0ZU5ld1JlcXVlc3RJZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25TcGVlY2hDb250ZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNwZWVjaENvbnRleHRKc29uKSB7XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBcInNwZWVjaC5jb250ZXh0XCIsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgXCJhcHBsaWNhdGlvbi9qc29uXCIsIHNwZWVjaENvbnRleHRKc29uKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBFbmNhcHN1bGF0ZWQgZm9yIGRlcml2ZWQgc2VydmljZSByZWNvZ25pemVycyB0aGF0IG5lZWQgdG8gc2VuZCBhZGRpdGlvbmFsIEpTT05cbiAgICBzZW5kUHJlUGF5bG9hZEpTT04oY29ubmVjdGlvbiwgZ2VuZXJhdGVOZXdSZXF1ZXN0SWQgPSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZW5kUHJlUGF5bG9hZEpTT05PdmVycmlkZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZFByZVBheWxvYWRKU09OT3ZlcnJpZGUoY29ubmVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnNlbmRTcGVlY2hDb250ZXh0KGNvbm5lY3Rpb24sIGdlbmVyYXRlTmV3UmVxdWVzdElkKTtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMuc2VuZFdhdmVIZWFkZXIoY29ubmVjdGlvbik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kV2F2ZUhlYWRlcihjb25uZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBmb3JtYXQgPSB5aWVsZCB0aGlzLmF1ZGlvU291cmNlLmZvcm1hdDtcbiAgICAgICAgICAgIC8vIHRoaXMud3JpdGVCdWZmZXJUb0NvbnNvbGUoZm9ybWF0LmhlYWRlcik7XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5CaW5hcnksIFwiYXVkaW9cIiwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBcImF1ZGlvL3gtd2F2XCIsIGZvcm1hdC5oZWFkZXIpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIEVzdGFibGlzaGVzIGEgd2Vic29ja2V0IGNvbm5lY3Rpb24gdG8gdGhlIGVuZCBwb2ludC5cbiAgICBjb25uZWN0SW1wbCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25Qcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZS50aGVuKChjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24uc3RhdGUoKSA9PT0gQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U2VydmljZUhhc1NlbnRNZXNzYWdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3RJbXBsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZTtcbiAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Qcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlNlcnZpY2VIYXNTZW50TWVzc2FnZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3RJbXBsKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZSA9IHRoaXMucmV0cnlhYmxlQ29ubmVjdCgpO1xuICAgICAgICAvLyBBdHRhY2ggYW4gZW1wdHkgaGFuZGxlciB0byBhbGxvdyB0aGUgcHJvbWlzZSB0byBydW4gaW4gdGhlIGJhY2tncm91bmQgd2hpbGVcbiAgICAgICAgLy8gb3RoZXIgc3RhcnR1cCBldmVudHMgaGFwcGVuLiBJdCdsbCBldmVudHVhbGx5IGJlIGF3YWl0ZWQgb24uXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAgICAgaWYgKHRoaXMucG9zdENvbm5lY3RJbXBsT3ZlcnJpZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zdENvbm5lY3RJbXBsT3ZlcnJpZGUodGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZTtcbiAgICB9XG4gICAgc2VuZFNwZWVjaFNlcnZpY2VDb25maWcoY29ubmVjdGlvbiwgcmVxdWVzdFNlc3Npb24sIFNwZWVjaFNlcnZpY2VDb25maWdKc29uKSB7XG4gICAgICAgIHJlcXVlc3RTZXNzaW9uLm9uU3BlZWNoQ29udGV4dCgpO1xuICAgICAgICAvLyBmaWx0ZXIgb3V0IGFueXRoaW5nIHRoYXQgaXMgbm90IHJlcXVpcmVkIGZvciB0aGUgc2VydmljZSB0byB3b3JrLlxuICAgICAgICBpZiAoU2VydmljZVJlY29nbml6ZXJCYXNlLnRlbGVtZXRyeURhdGFFbmFibGVkICE9PSB0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCB3aXRoVGVsZW1ldHJ5ID0gSlNPTi5wYXJzZShTcGVlY2hTZXJ2aWNlQ29uZmlnSnNvbik7XG4gICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9IHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgICAgICAgICAgIHN5c3RlbTogd2l0aFRlbGVtZXRyeS5jb250ZXh0LnN5c3RlbSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFNwZWVjaFNlcnZpY2VDb25maWdKc29uID0gSlNPTi5zdHJpbmdpZnkocmVwbGFjZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoXCJmMGY1ZGViYy1mOGM5LTQ4OTItYWM0Yi05MGE3YWIzNTlmZDJcIiwgXCJmYWxzZVwiKS50b0xvd2VyQ2FzZSgpID09PSBcInRydWVcIikge1xuICAgICAgICAgICAgY29uc3QganNvbiA9IEpTT04ucGFyc2UoU3BlZWNoU2VydmljZUNvbmZpZ0pzb24pO1xuICAgICAgICAgICAganNvbi5jb250ZXh0LkRpc2FibGVSZWZlcmVuY2VDaGFubmVsID0gXCJUcnVlXCI7XG4gICAgICAgICAgICBqc29uLmNvbnRleHQuTWljU3BlYyA9IFwiMV8wXzBcIjtcbiAgICAgICAgICAgIFNwZWVjaFNlcnZpY2VDb25maWdKc29uID0gSlNPTi5zdHJpbmdpZnkoanNvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFNwZWVjaFNlcnZpY2VDb25maWdKc29uKSB7XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBcInNwZWVjaC5jb25maWdcIiwgcmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBcImFwcGxpY2F0aW9uL2pzb25cIiwgU3BlZWNoU2VydmljZUNvbmZpZ0pzb24pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGZldGNoQ29ubmVjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UudGhlbigoY29ubmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGlvbi5zdGF0ZSgpID09PSBDb25uZWN0aW9uU3RhdGUuRGlzY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U2VydmljZUhhc1NlbnRNZXNzYWdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlO1xuICAgICAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbklkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTZXJ2aWNlSGFzU2VudE1lc3NhZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UgPSB0aGlzLmNvbmZpZ3VyZUNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2U7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kQXVkaW8oYXVkaW9TdHJlYW1Ob2RlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBhdWRpb0Zvcm1hdCA9IHlpZWxkIHRoaXMuYXVkaW9Tb3VyY2UuZm9ybWF0O1xuICAgICAgICAgICAgLy8gVGhlIHRpbWUgd2UgbGFzdCBzZW50IGRhdGEgdG8gdGhlIHNlcnZpY2UuXG4gICAgICAgICAgICBsZXQgbmV4dFNlbmRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIC8vIE1heCBhbW91bnQgdG8gc2VuZCBiZWZvcmUgd2Ugc3RhcnQgdG8gdGhyb3R0bGVcbiAgICAgICAgICAgIGNvbnN0IGZhc3RMYW5lU2l6ZU1zID0gdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFwiU1BFRUNILVRyYW5zbWl0TGVuZ3RoQmVmb3JUaHJvdHRsZU1zXCIsIFwiNTAwMFwiKTtcbiAgICAgICAgICAgIGNvbnN0IG1heFNlbmRVbnRocm90dGxlZEJ5dGVzID0gYXVkaW9Gb3JtYXQuYXZnQnl0ZXNQZXJTZWMgLyAxMDAwICogcGFyc2VJbnQoZmFzdExhbmVTaXplTXMsIDEwKTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0UmVjb2dOdW1iZXIgPSB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZWNvZ051bWJlcjtcbiAgICAgICAgICAgIGNvbnN0IHJlYWRBbmRVcGxvYWRDeWNsZSA9ICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBzcGVlY2ggaXMgZG9uZSwgc3RvcCBzZW5kaW5nIGF1ZGlvLlxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcml2SXNEaXNwb3NlZCAmJlxuICAgICAgICAgICAgICAgICAgICAhdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uaXNTcGVlY2hFbmRlZCAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1JlY29nbml6aW5nICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlY29nTnVtYmVyID09PSBzdGFydFJlY29nTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdWRpb1N0cmVhbUNodW5rID0geWllbGQgYXVkaW9TdHJlYW1Ob2RlLnJlYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgaGF2ZSBhIG5ldyBhdWRpbyBjaHVuayB0byB1cGxvYWQuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1NwZWVjaEVuZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBzZXJ2aWNlIGFscmVhZHkgcmVjb2duaXplZCBhdWRpbyBlbmQgdGhlbiBkb24ndCBzZW5kIGFueSBtb3JlIGF1ZGlvXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IHBheWxvYWQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzZW5kRGVsYXk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXVkaW9TdHJlYW1DaHVuayB8fCBhdWRpb1N0cmVhbUNodW5rLmlzRW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmREZWxheSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkID0gYXVkaW9TdHJlYW1DaHVuay5idWZmZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkF1ZGlvU2VudChwYXlsb2FkLmJ5dGVMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1heFNlbmRVbnRocm90dGxlZEJ5dGVzID49IHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmJ5dGVzU2VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmREZWxheSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kRGVsYXkgPSBNYXRoLm1heCgwLCBuZXh0U2VuZFRpbWUgLSBEYXRlLm5vdygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoMCAhPT0gc2VuZERlbGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmRlbGF5KHNlbmREZWxheSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBheWxvYWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTZW5kVGltZSA9IERhdGUubm93KCkgKyAocGF5bG9hZC5ieXRlTGVuZ3RoICogMTAwMCAvIChhdWRpb0Zvcm1hdC5hdmdCeXRlc1BlclNlYyAqIDIpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBBcmUgd2Ugc3RpbGwgYWxpdmU/XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcml2SXNEaXNwb3NlZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmlzU3BlZWNoRW5kZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmlzUmVjb2duaXppbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlY29nTnVtYmVyID09PSBzdGFydFJlY29nTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNlbmQobmV3IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlKE1lc3NhZ2VUeXBlLkJpbmFyeSwgXCJhdWRpb1wiLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIG51bGwsIHBheWxvYWQpKS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uU2VydmljZVR1cm5FbmRSZXNwb25zZSh0aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLmlzQ29udGludW91c1JlY29nbml0aW9uKS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShhdWRpb1N0cmVhbUNodW5rID09PSBudWxsIHx8IGF1ZGlvU3RyZWFtQ2h1bmsgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGF1ZGlvU3RyZWFtQ2h1bmsuaXNFbmQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy53cml0ZUJ1ZmZlclRvQ29uc29sZShwYXlsb2FkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWdhcmRsZXNzIG9mIHN1Y2Nlc3Mgb3IgZmFpbHVyZSwgc2NoZWR1bGUgdGhlIG5leHQgdXBsb2FkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSB1bmRlcmx5aW5nIGNvbm5lY3Rpb24gd2FzIGJyb2tlbiwgdGhlIG5leHQgY3ljbGUgd2lsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBhIG5ldyBjb25uZWN0aW9uIGFuZCByZS10cmFuc21pdCBtaXNzaW5nIGF1ZGlvIGF1dG9tYXRpY2FsbHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRBbmRVcGxvYWRDeWNsZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGF1ZGlvIHN0cmVhbSBoYXMgYmVlbiBjbG9zZWQsIG5vIG5lZWQgdG8gc2NoZWR1bGUgbmV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlYWQtdXBsb2FkIGN5Y2xlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcml2SXNMaXZlQXVkaW8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25TcGVlY2hFbmRlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJlYWRBbmRVcGxvYWRDeWNsZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0cnlhYmxlQ29ubmVjdCgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGxldCBpc1VuQXV0aG9yaXplZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCA9IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb25JZCA9IHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZDtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25JZCA9IChzZXNzaW9uSWQgIT09IHVuZGVmaW5lZCkgPyBzZXNzaW9uSWQgOiBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vblByZUNvbm5lY3Rpb25TdGFydCh0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkLCB0aGlzLnByaXZDb25uZWN0aW9uSWQpO1xuICAgICAgICAgICAgbGV0IGxhc3RTdGF0dXNDb2RlID0gMDtcbiAgICAgICAgICAgIGxldCBsYXN0UmVhc29uID0gXCJcIjtcbiAgICAgICAgICAgIHdoaWxlICh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5udW1Db25uZWN0aW9uQXR0ZW1wdHMgPD0gdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5tYXhSZXRyeUNvdW50KSB7XG4gICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBhdXRoIGluZm9ybWF0aW9uIGZvciB0aGUgY29ubmVjdGlvbi4gVGhpcyBpcyBhIGJpdCBvZiBvdmVya2lsbCBmb3IgdGhlIGN1cnJlbnQgQVBJIHN1cmZhY2UsIGJ1dCBsZWF2aW5nIHRoZSBwbHVtYmluZyBpbiBwbGFjZSB0byBiZSBhYmxlIHRvIHJhaXNlIGEgZGV2ZWxvcGVyLWN1c3RvbWVyXG4gICAgICAgICAgICAgICAgLy8gZmFjaW5nIGV2ZW50IHdoZW4gYSBjb25uZWN0aW9uIGZhaWxzIHRvIGxldCB0aGVtIHRyeSBhbmQgcHJvdmlkZSBuZXcgYXV0aCBpbmZvcm1hdGlvbi5cbiAgICAgICAgICAgICAgICBjb25zdCBhdXRoUHJvbWlzZSA9IGlzVW5BdXRob3JpemVkID8gdGhpcy5wcml2QXV0aGVudGljYXRpb24uZmV0Y2hPbkV4cGlyeSh0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkKSA6IHRoaXMucHJpdkF1dGhlbnRpY2F0aW9uLmZldGNoKHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1dGggPSB5aWVsZCBhdXRoUHJvbWlzZTtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkF1dGhDb21wbGV0ZWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY29ubmVjdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB0aGlzLnByaXZDb25uZWN0aW9uRmFjdG9yeS5jcmVhdGUodGhpcy5wcml2UmVjb2duaXplckNvbmZpZywgYXV0aCwgdGhpcy5wcml2Q29ubmVjdGlvbklkKTtcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2ggdGhlIHRlbGVtZXRyeSBoYW5kbGVycy5cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5saXN0ZW5Gb3JTZXJ2aWNlVGVsZW1ldHJ5KGNvbm5lY3Rpb24uZXZlbnRzKTtcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2ggdG8gdGhlIHVuZGVybHlpbmcgZXZlbnQuIE5vIG5lZWQgdG8gaG9sZCBvbnRvIHRoZSBkZXRhY2ggcG9pbnRlcnMgYXMgaW4gdGhlIGV2ZW50IHRoZSBjb25uZWN0aW9uIGdvZXMgYXdheSxcbiAgICAgICAgICAgICAgICAvLyBpdCdsbCBzdG9wIHNlbmRpbmcgZXZlbnRzLlxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uZXZlbnRzLmF0dGFjaCgoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uRXZlbnRzLm9uRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgY29ubmVjdGlvbi5vcGVuKCk7XG4gICAgICAgICAgICAgICAgLy8gMjAwID09IGV2ZXJ5dGhpbmcgaXMgZmluZS5cbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uQ29ubmVjdGlvbkVzdGFibGlzaENvbXBsZXRlZChyZXNwb25zZS5zdGF0dXNDb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gMTAwNikge1xuICAgICAgICAgICAgICAgICAgICBpc1VuQXV0aG9yaXplZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxhc3RTdGF0dXNDb2RlID0gcmVzcG9uc2Uuc3RhdHVzQ29kZTtcbiAgICAgICAgICAgICAgICBsYXN0UmVhc29uID0gcmVzcG9uc2UucmVhc29uO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uUmV0cnlDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkNvbm5lY3Rpb25Fc3RhYmxpc2hDb21wbGV0ZWQobGFzdFN0YXR1c0NvZGUsIGxhc3RSZWFzb24pO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBVbmFibGUgdG8gY29udGFjdCBzZXJ2ZXIuIFN0YXR1c0NvZGU6ICR7bGFzdFN0YXR1c0NvZGV9LCAke3RoaXMucHJpdlJlY29nbml6ZXJDb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50KX0gUmVhc29uOiAke2xhc3RSZWFzb259YCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWxheShkZWxheU1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gdGhpcy5wcml2U2V0VGltZW91dChyZXNvbHZlLCBkZWxheU1zKSk7XG4gICAgfVxuICAgIHdyaXRlQnVmZmVyVG9Db25zb2xlKGJ1ZmZlcikge1xuICAgICAgICBsZXQgb3V0ID0gXCJCdWZmZXIgU2l6ZTogXCI7XG4gICAgICAgIGlmIChudWxsID09PSBidWZmZXIpIHtcbiAgICAgICAgICAgIG91dCArPSBcIm51bGxcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHJlYWRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICAgICAgICAgIG91dCArPSBgJHtidWZmZXIuYnl0ZUxlbmd0aH1cXHJcXG5gO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWZmZXIuYnl0ZUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0ICs9IHJlYWRWaWV3W2ldLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCBcIjBcIikgKyBcIiBcIjtcbiAgICAgICAgICAgICAgICBpZiAoKChpICsgMSkgJSAxNikgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKG91dCk7XG4gICAgICAgICAgICAgICAgICAgIG91dCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUuaW5mbyhvdXQpO1xuICAgIH1cbiAgICBzZW5kRmluYWxBdWRpbygpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgeWllbGQgY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5CaW5hcnksIFwiYXVkaW9cIiwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBudWxsLCBudWxsKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBUYWtlcyBhbiBlc3RhYmxpc2hlZCB3ZWJzb2NrZXQgY29ubmVjdGlvbiB0byB0aGUgZW5kcG9pbnQgYW5kIHNlbmRzIHNwZWVjaCBjb25maWd1cmF0aW9uIGluZm9ybWF0aW9uLlxuICAgIGNvbmZpZ3VyZUNvbm5lY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uID0geWllbGQgdGhpcy5jb25uZWN0SW1wbCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnQ29ubmVjdGlvbk92ZXJyaWRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25maWdDb25uZWN0aW9uT3ZlcnJpZGUoY29ubmVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnNlbmRTcGVlY2hTZXJ2aWNlQ29uZmlnKGNvbm5lY3Rpb24sIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLCB0aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLlNwZWVjaFNlcnZpY2VDb25maWcuc2VyaWFsaXplKCkpO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5zZW5kUHJlUGF5bG9hZEpTT04oY29ubmVjdGlvbiwgZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb247XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblNlcnZpY2VSZWNvZ25pemVyQmFzZS50ZWxlbWV0cnlEYXRhRW5hYmxlZCA9IHRydWU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNlcnZpY2VSZWNvZ25pemVyQmFzZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cbmltcG9ydCB7IEF1ZGlvU291cmNlRXJyb3JFdmVudCwgQXVkaW9TdHJlYW1Ob2RlQXR0YWNoZWRFdmVudCwgQXVkaW9TdHJlYW1Ob2RlQXR0YWNoaW5nRXZlbnQsIEF1ZGlvU3RyZWFtTm9kZURldGFjaGVkRXZlbnQsIEF1ZGlvU3RyZWFtTm9kZUVycm9yRXZlbnQsIENvbm5lY3Rpb25Fc3RhYmxpc2hlZEV2ZW50LCBDb25uZWN0aW9uRXN0YWJsaXNoRXJyb3JFdmVudCwgQ29ubmVjdGlvbk1lc3NhZ2VSZWNlaXZlZEV2ZW50LCBDb25uZWN0aW9uU3RhcnRFdmVudCwgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbm5lY3RpbmdUb1NlcnZpY2VFdmVudCwgUmVjb2duaXRpb25UcmlnZ2VyZWRFdmVudCB9IGZyb20gXCIuL1JlY29nbml0aW9uRXZlbnRzXCI7XG5leHBvcnQgY2xhc3MgU2VydmljZVRlbGVtZXRyeUxpc3RlbmVyIHtcbiAgICBjb25zdHJ1Y3RvcihyZXF1ZXN0SWQsIGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2TGlzdGVuaW5nVHJpZ2dlck1ldHJpYyA9IG51bGw7XG4gICAgICAgIHRoaXMucHJpdk1pY01ldHJpYyA9IG51bGw7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hNZXRyaWMgPSBudWxsO1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0SWQgPSByZXF1ZXN0SWQ7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvU291cmNlSWQgPSBhdWRpb1NvdXJjZUlkO1xuICAgICAgICB0aGlzLnByaXZBdWRpb05vZGVJZCA9IGF1ZGlvTm9kZUlkO1xuICAgICAgICB0aGlzLnByaXZSZWNlaXZlZE1lc3NhZ2VzID0ge307XG4gICAgICAgIHRoaXMucHJpdlBocmFzZUxhdGVuY2llcyA9IFtdO1xuICAgICAgICB0aGlzLnByaXZIeXBvdGhlc2lzTGF0ZW5jaWVzID0gW107XG4gICAgfVxuICAgIHBocmFzZVJlY2VpdmVkKGF1ZGlvUmVjZWl2ZWRUaW1lKSB7XG4gICAgICAgIGlmIChhdWRpb1JlY2VpdmVkVGltZSA+IDApIHsgLy8gMCBpbmRpY2F0ZXMgdGhlIHRpbWUgaXMgdW5rbm93bi4gRHJvcCBpdC5cbiAgICAgICAgICAgIHRoaXMucHJpdlBocmFzZUxhdGVuY2llcy5wdXNoKERhdGUubm93KCkgLSBhdWRpb1JlY2VpdmVkVGltZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaHlwb3RoZXNpc1JlY2VpdmVkKGF1ZGlvUmVjZWl2ZWRUaW1lKSB7XG4gICAgICAgIGlmIChhdWRpb1JlY2VpdmVkVGltZSA+IDApIHsgLy8gMCBpbmRpY2F0ZXMgdGhlIHRpbWUgaXMgdW5rbm93bi4gRHJvcCBpdC5cbiAgICAgICAgICAgIHRoaXMucHJpdkh5cG90aGVzaXNMYXRlbmNpZXMucHVzaChEYXRlLm5vdygpIC0gYXVkaW9SZWNlaXZlZFRpbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uRXZlbnQoZSkge1xuICAgICAgICBpZiAodGhpcy5wcml2SXNEaXNwb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgUmVjb2duaXRpb25UcmlnZ2VyZWRFdmVudCAmJiBlLnJlcXVlc3RJZCA9PT0gdGhpcy5wcml2UmVxdWVzdElkKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZMaXN0ZW5pbmdUcmlnZ2VyTWV0cmljID0ge1xuICAgICAgICAgICAgICAgIEVuZDogZS5ldmVudFRpbWUsXG4gICAgICAgICAgICAgICAgTmFtZTogXCJMaXN0ZW5pbmdUcmlnZ2VyXCIsXG4gICAgICAgICAgICAgICAgU3RhcnQ6IGUuZXZlbnRUaW1lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGluZ0V2ZW50ICYmIGUuYXVkaW9Tb3VyY2VJZCA9PT0gdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCAmJiBlLmF1ZGlvTm9kZUlkID09PSB0aGlzLnByaXZBdWRpb05vZGVJZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2TWljU3RhcnRUaW1lID0gZS5ldmVudFRpbWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50ICYmIGUuYXVkaW9Tb3VyY2VJZCA9PT0gdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCAmJiBlLmF1ZGlvTm9kZUlkID09PSB0aGlzLnByaXZBdWRpb05vZGVJZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2TWljU3RhcnRUaW1lID0gZS5ldmVudFRpbWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBdWRpb1NvdXJjZUVycm9yRXZlbnQgJiYgZS5hdWRpb1NvdXJjZUlkID09PSB0aGlzLnByaXZBdWRpb1NvdXJjZUlkKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJpdk1pY01ldHJpYykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdk1pY01ldHJpYyA9IHtcbiAgICAgICAgICAgICAgICAgICAgRW5kOiBlLmV2ZW50VGltZSxcbiAgICAgICAgICAgICAgICAgICAgRXJyb3I6IGUuZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIE5hbWU6IFwiTWljcm9waG9uZVwiLFxuICAgICAgICAgICAgICAgICAgICBTdGFydDogdGhpcy5wcml2TWljU3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBdWRpb1N0cmVhbU5vZGVFcnJvckV2ZW50ICYmIGUuYXVkaW9Tb3VyY2VJZCA9PT0gdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCAmJiBlLmF1ZGlvTm9kZUlkID09PSB0aGlzLnByaXZBdWRpb05vZGVJZCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZNaWNNZXRyaWMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZNaWNNZXRyaWMgPSB7XG4gICAgICAgICAgICAgICAgICAgIEVuZDogZS5ldmVudFRpbWUsXG4gICAgICAgICAgICAgICAgICAgIEVycm9yOiBlLmVycm9yLFxuICAgICAgICAgICAgICAgICAgICBOYW1lOiBcIk1pY3JvcGhvbmVcIixcbiAgICAgICAgICAgICAgICAgICAgU3RhcnQ6IHRoaXMucHJpdk1pY1N0YXJ0VGltZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudCAmJiBlLmF1ZGlvU291cmNlSWQgPT09IHRoaXMucHJpdkF1ZGlvU291cmNlSWQgJiYgZS5hdWRpb05vZGVJZCA9PT0gdGhpcy5wcml2QXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wcml2TWljTWV0cmljKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TWljTWV0cmljID0ge1xuICAgICAgICAgICAgICAgICAgICBFbmQ6IGUuZXZlbnRUaW1lLFxuICAgICAgICAgICAgICAgICAgICBOYW1lOiBcIk1pY3JvcGhvbmVcIixcbiAgICAgICAgICAgICAgICAgICAgU3RhcnQ6IHRoaXMucHJpdk1pY1N0YXJ0VGltZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgQ29ubmVjdGluZ1RvU2VydmljZUV2ZW50ICYmIGUucmVxdWVzdElkID09PSB0aGlzLnByaXZSZXF1ZXN0SWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25JZCA9IGUuc2Vzc2lvbklkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgQ29ubmVjdGlvblN0YXJ0RXZlbnQgJiYgZS5jb25uZWN0aW9uSWQgPT09IHRoaXMucHJpdkNvbm5lY3Rpb25JZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblN0YXJ0VGltZSA9IGUuZXZlbnRUaW1lO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgQ29ubmVjdGlvbkVzdGFibGlzaGVkRXZlbnQgJiYgZS5jb25uZWN0aW9uSWQgPT09IHRoaXMucHJpdkNvbm5lY3Rpb25JZCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoTWV0cmljKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaE1ldHJpYyA9IHtcbiAgICAgICAgICAgICAgICAgICAgRW5kOiBlLmV2ZW50VGltZSxcbiAgICAgICAgICAgICAgICAgICAgSWQ6IHRoaXMucHJpdkNvbm5lY3Rpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgTmFtZTogXCJDb25uZWN0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgIFN0YXJ0OiB0aGlzLnByaXZDb25uZWN0aW9uU3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBDb25uZWN0aW9uRXN0YWJsaXNoRXJyb3JFdmVudCAmJiBlLmNvbm5lY3Rpb25JZCA9PT0gdGhpcy5wcml2Q29ubmVjdGlvbklkKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hNZXRyaWMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoTWV0cmljID0ge1xuICAgICAgICAgICAgICAgICAgICBFbmQ6IGUuZXZlbnRUaW1lLFxuICAgICAgICAgICAgICAgICAgICBFcnJvcjogdGhpcy5nZXRDb25uZWN0aW9uRXJyb3IoZS5zdGF0dXNDb2RlKSxcbiAgICAgICAgICAgICAgICAgICAgSWQ6IHRoaXMucHJpdkNvbm5lY3Rpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgTmFtZTogXCJDb25uZWN0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgIFN0YXJ0OiB0aGlzLnByaXZDb25uZWN0aW9uU3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBDb25uZWN0aW9uTWVzc2FnZVJlY2VpdmVkRXZlbnQgJiYgZS5jb25uZWN0aW9uSWQgPT09IHRoaXMucHJpdkNvbm5lY3Rpb25JZCkge1xuICAgICAgICAgICAgaWYgKGUubWVzc2FnZSAmJiBlLm1lc3NhZ2UuaGVhZGVycyAmJiBlLm1lc3NhZ2UuaGVhZGVycy5wYXRoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZSZWNlaXZlZE1lc3NhZ2VzW2UubWVzc2FnZS5oZWFkZXJzLnBhdGhdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY2VpdmVkTWVzc2FnZXNbZS5tZXNzYWdlLmhlYWRlcnMucGF0aF0gPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbWF4TWVzc2FnZXNUb1NlbmQgPSA1MDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2UmVjZWl2ZWRNZXNzYWdlc1tlLm1lc3NhZ2UuaGVhZGVycy5wYXRoXS5sZW5ndGggPCBtYXhNZXNzYWdlc1RvU2VuZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNlaXZlZE1lc3NhZ2VzW2UubWVzc2FnZS5oZWFkZXJzLnBhdGhdLnB1c2goZS5uZXR3b3JrUmVjZWl2ZWRUaW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0VGVsZW1ldHJ5KCkge1xuICAgICAgICBjb25zdCBtZXRyaWNzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIGlmICh0aGlzLnByaXZMaXN0ZW5pbmdUcmlnZ2VyTWV0cmljKSB7XG4gICAgICAgICAgICBtZXRyaWNzLnB1c2godGhpcy5wcml2TGlzdGVuaW5nVHJpZ2dlck1ldHJpYyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHJpdk1pY01ldHJpYykge1xuICAgICAgICAgICAgbWV0cmljcy5wdXNoKHRoaXMucHJpdk1pY01ldHJpYyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hNZXRyaWMpIHtcbiAgICAgICAgICAgIG1ldHJpY3MucHVzaCh0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoTWV0cmljKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcml2UGhyYXNlTGF0ZW5jaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG1ldHJpY3MucHVzaCh7XG4gICAgICAgICAgICAgICAgUGhyYXNlTGF0ZW5jeU1zOiB0aGlzLnByaXZQaHJhc2VMYXRlbmNpZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcml2SHlwb3RoZXNpc0xhdGVuY2llcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBtZXRyaWNzLnB1c2goe1xuICAgICAgICAgICAgICAgIEZpcnN0SHlwb3RoZXNpc0xhdGVuY3lNczogdGhpcy5wcml2SHlwb3RoZXNpc0xhdGVuY2llcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRlbGVtZXRyeSA9IHtcbiAgICAgICAgICAgIE1ldHJpY3M6IG1ldHJpY3MsXG4gICAgICAgICAgICBSZWNlaXZlZE1lc3NhZ2VzOiB0aGlzLnByaXZSZWNlaXZlZE1lc3NhZ2VzLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkodGVsZW1ldHJ5KTtcbiAgICAgICAgLy8gV2UgZG9udCB3YW50IHRvIHNlbmQgdGhlIHNhbWUgdGVsZW1ldHJ5IGFnYWluLiBTbyBjbGVhbiB0aG9zZSBvdXQuXG4gICAgICAgIHRoaXMucHJpdlJlY2VpdmVkTWVzc2FnZXMgPSB7fTtcbiAgICAgICAgdGhpcy5wcml2TGlzdGVuaW5nVHJpZ2dlck1ldHJpYyA9IG51bGw7XG4gICAgICAgIHRoaXMucHJpdk1pY01ldHJpYyA9IG51bGw7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hNZXRyaWMgPSBudWxsO1xuICAgICAgICB0aGlzLnByaXZQaHJhc2VMYXRlbmNpZXMgPSBbXTtcbiAgICAgICAgdGhpcy5wcml2SHlwb3RoZXNpc0xhdGVuY2llcyA9IFtdO1xuICAgICAgICByZXR1cm4ganNvbjtcbiAgICB9XG4gICAgLy8gRGV0ZXJtaW5lcyBpZiB0aGVyZSBhcmUgYW55IHRlbGVtZXRyeSBldmVudHMgdG8gc2VuZCB0byB0aGUgc2VydmljZS5cbiAgICBnZXQgaGFzVGVsZW1ldHJ5KCkge1xuICAgICAgICByZXR1cm4gKE9iamVjdC5rZXlzKHRoaXMucHJpdlJlY2VpdmVkTWVzc2FnZXMpLmxlbmd0aCAhPT0gMCB8fFxuICAgICAgICAgICAgdGhpcy5wcml2TGlzdGVuaW5nVHJpZ2dlck1ldHJpYyAhPT0gbnVsbCB8fFxuICAgICAgICAgICAgdGhpcy5wcml2TWljTWV0cmljICE9PSBudWxsIHx8XG4gICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoTWV0cmljICE9PSBudWxsIHx8XG4gICAgICAgICAgICB0aGlzLnByaXZQaHJhc2VMYXRlbmNpZXMubGVuZ3RoICE9PSAwIHx8XG4gICAgICAgICAgICB0aGlzLnByaXZIeXBvdGhlc2lzTGF0ZW5jaWVzLmxlbmd0aCAhPT0gMCk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSB0cnVlO1xuICAgIH1cbiAgICBnZXRDb25uZWN0aW9uRXJyb3Ioc3RhdHVzQ29kZSkge1xuICAgICAgICAvKlxuICAgICAgICAtLSBXZWJzb2NrZXQgc3RhdHVzIGNvZGVzIC0tXG4gICAgICAgIE5vcm1hbENsb3N1cmUgPSAxMDAwLFxuICAgICAgICBFbmRwb2ludFVuYXZhaWxhYmxlID0gMTAwMSxcbiAgICAgICAgUHJvdG9jb2xFcnJvciA9IDEwMDIsXG4gICAgICAgIEludmFsaWRNZXNzYWdlVHlwZSA9IDEwMDMsXG4gICAgICAgIEVtcHR5ID0gMTAwNSxcbiAgICAgICAgSW52YWxpZFBheWxvYWREYXRhID0gMTAwNyxcbiAgICAgICAgUG9saWN5VmlvbGF0aW9uID0gMTAwOCxcbiAgICAgICAgTWVzc2FnZVRvb0JpZyA9IDEwMDksXG4gICAgICAgIE1hbmRhdG9yeUV4dGVuc2lvbiA9IDEwMTAsXG4gICAgICAgIEludGVybmFsU2VydmVyRXJyb3IgPSAxMDExXG4gICAgICAgICovXG4gICAgICAgIHN3aXRjaCAoc3RhdHVzQ29kZSkge1xuICAgICAgICAgICAgY2FzZSA0MDA6XG4gICAgICAgICAgICBjYXNlIDEwMDI6XG4gICAgICAgICAgICBjYXNlIDEwMDM6XG4gICAgICAgICAgICBjYXNlIDEwMDU6XG4gICAgICAgICAgICBjYXNlIDEwMDc6XG4gICAgICAgICAgICBjYXNlIDEwMDg6XG4gICAgICAgICAgICBjYXNlIDEwMDk6IHJldHVybiBcIkJhZFJlcXVlc3RcIjtcbiAgICAgICAgICAgIGNhc2UgNDAxOiByZXR1cm4gXCJVbmF1dGhvcml6ZWRcIjtcbiAgICAgICAgICAgIGNhc2UgNDAzOiByZXR1cm4gXCJGb3JiaWRkZW5cIjtcbiAgICAgICAgICAgIGNhc2UgNTAzOlxuICAgICAgICAgICAgY2FzZSAxMDAxOiByZXR1cm4gXCJTZXJ2ZXJVbmF2YWlsYWJsZVwiO1xuICAgICAgICAgICAgY2FzZSA1MDA6XG4gICAgICAgICAgICBjYXNlIDEwMTE6IHJldHVybiBcIlNlcnZlckVycm9yXCI7XG4gICAgICAgICAgICBjYXNlIDQwODpcbiAgICAgICAgICAgIGNhc2UgNTA0OiByZXR1cm4gXCJUaW1lb3V0XCI7XG4gICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gXCJzdGF0dXNjb2RlOlwiICsgc3RhdHVzQ29kZS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIuSW50ZXJuYWwuanMubWFwXG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IFJlc3RDb25maWdCYXNlLCBSZXN0TWVzc2FnZUFkYXB0ZXIsIFJlc3RSZXF1ZXN0VHlwZSwgfSBmcm9tIFwiLi4vY29tbW9uLmJyb3dzZXIvRXhwb3J0c1wiO1xuaW1wb3J0IHsgUHJvcGVydHlJZCwgVm9pY2VQcm9maWxlVHlwZSwgfSBmcm9tIFwiLi4vc2RrL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb25GYWN0b3J5QmFzZSB9IGZyb20gXCIuL0Nvbm5lY3Rpb25GYWN0b3J5QmFzZVwiO1xuLyoqXG4gKiBJbXBsZW1lbnRzIG1ldGhvZHMgZm9yIHNwZWFrZXIgcmVjb2duaXRpb24gY2xhc3Nlcywgc2VuZGluZyByZXF1ZXN0cyB0byBlbmRwb2ludFxuICogYW5kIHBhcnNpbmcgcmVzcG9uc2UgaW50byBleHBlY3RlZCBmb3JtYXRcbiAqIEBjbGFzcyBTcGVha2VySWRNZXNzYWdlQWRhcHRlclxuICovXG5leHBvcnQgY2xhc3MgU3BlYWtlcklkTWVzc2FnZUFkYXB0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBsZXQgZW5kcG9pbnQgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50LCB1bmRlZmluZWQpO1xuICAgICAgICBpZiAoIWVuZHBvaW50KSB7XG4gICAgICAgICAgICBjb25zdCByZWdpb24gPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbiwgXCJ3ZXN0dXNcIik7XG4gICAgICAgICAgICBjb25zdCBob3N0U3VmZml4ID0gQ29ubmVjdGlvbkZhY3RvcnlCYXNlLmdldEhvc3RTdWZmaXgocmVnaW9uKTtcbiAgICAgICAgICAgIGVuZHBvaW50ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Ib3N0LCBgaHR0cHM6Ly8ke3JlZ2lvbn0uYXBpLmNvZ25pdGl2ZSR7aG9zdFN1ZmZpeH1gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZVcmkgPSBgJHtlbmRwb2ludH0vc3BlYWtlci1yZWNvZ25pdGlvbi97bW9kZX0ve2RlcGVuZGVuY3l9L3Byb2ZpbGVzYDtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IFJlc3RDb25maWdCYXNlLnJlcXVlc3RPcHRpb25zO1xuICAgICAgICBvcHRpb25zLmhlYWRlcnNbUmVzdENvbmZpZ0Jhc2UuY29uZmlnUGFyYW1zLnN1YnNjcmlwdGlvbktleV0gPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleSwgdW5kZWZpbmVkKTtcbiAgICAgICAgdGhpcy5wcml2QXBpVmVyc2lvbiA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlYWtlclJlY29nbml0aW9uX0FwaV9WZXJzaW9uLCBcIjIwMjEtMDktMDVcIik7XG4gICAgICAgIHRoaXMucHJpdlJlc3RBZGFwdGVyID0gbmV3IFJlc3RNZXNzYWdlQWRhcHRlcihvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgY3JlYXRlIHByb2ZpbGUgcmVxdWVzdCB0byBlbmRwb2ludC5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge1ZvaWNlUHJvZmlsZVR5cGV9IHByb2ZpbGVUeXBlIC0gdHlwZSBvZiB2b2ljZSBwcm9maWxlIHRvIGNyZWF0ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZyAtIGxhbmd1YWdlL2xvY2FsZSBvZiB2b2ljZSBwcm9maWxlXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPElSZXN0UmVzcG9uc2U+fSBwcm9taXNlZCByZXN0IHJlc3BvbnNlIGNvbnRhaW5pbmcgaWQgb2YgY3JlYXRlZCBwcm9maWxlLlxuICAgICAqL1xuICAgIGNyZWF0ZVByb2ZpbGUocHJvZmlsZVR5cGUsIGxhbmcpIHtcbiAgICAgICAgY29uc3QgdXJpID0gdGhpcy5nZXRPcGVyYXRpb25VcmkocHJvZmlsZVR5cGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVzdEFkYXB0ZXIucmVxdWVzdChSZXN0UmVxdWVzdFR5cGUuUG9zdCwgdXJpLCB0aGlzLmdldFF1ZXJ5UGFyYW1zKHt9KSwgeyBsb2NhbGU6IGxhbmcgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGNyZWF0ZSBlbnJvbGxtZW50IHJlcXVlc3QgdG8gZW5kcG9pbnQuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtWb2ljZVByb2ZpbGV9IHByb2ZpbGVUeXBlIC0gdm9pY2UgcHJvZmlsZSBmb3Igd2hpY2ggdG8gY3JlYXRlIG5ldyBlbnJvbGxtZW50LlxuICAgICAqIEBwYXJhbSB7SUF1ZGlvU291cmNlfSBhdWRpb1NvdXJjZSAtIGF1ZGlvU291cmNlIGZyb20gd2hpY2ggdG8gcHVsbCBkYXRhIHRvIHNlbmRcbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1Byb21pc2U8SVJlc3RSZXNwb25zZT59IHJlc3QgcmVzcG9uc2UgdG8gZW5yb2xsbWVudCByZXF1ZXN0LlxuICAgICAqL1xuICAgIGNyZWF0ZUVucm9sbG1lbnQocHJvZmlsZSwgYXVkaW9Tb3VyY2UpIHtcbiAgICAgICAgY29uc3QgdXJpID0gdGhpcy5nZXRPcGVyYXRpb25VcmkocHJvZmlsZS5wcm9maWxlVHlwZSkgKyBcIi9cIiArIHByb2ZpbGUucHJvZmlsZUlkICsgXCIvZW5yb2xsbWVudHNcIjtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnRcbiAgICAgICAgcmV0dXJuIGF1ZGlvU291cmNlLmJsb2IudGhlbigocmVzdWx0KSA9PiB0aGlzLnByaXZSZXN0QWRhcHRlci5yZXF1ZXN0KFJlc3RSZXF1ZXN0VHlwZS5GaWxlLCB1cmksIHRoaXMuZ2V0UXVlcnlQYXJhbXMoeyBpZ25vcmVNaW5MZW5ndGg6IFwidHJ1ZVwiIH0pLCBudWxsLCByZXN1bHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgdmVyaWZpY2F0aW9uIHJlcXVlc3QgdG8gZW5kcG9pbnQuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtTcGVha2VyVmVyaWZpY2F0aW9uTW9kZWx9IG1vZGVsIC0gdm9pY2UgbW9kZWwgdG8gdmVyaWZ5IGFnYWluc3QuXG4gICAgICogQHBhcmFtIHtJQXVkaW9Tb3VyY2V9IGF1ZGlvU291cmNlIC0gYXVkaW9Tb3VyY2UgZnJvbSB3aGljaCB0byBwdWxsIGRhdGEgdG8gc2VuZFxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxJUmVzdFJlc3BvbnNlPn0gcmVzdCByZXNwb25zZSB0byBlbnJvbGxtZW50IHJlcXVlc3QuXG4gICAgICovXG4gICAgdmVyaWZ5U3BlYWtlcihtb2RlbCwgYXVkaW9Tb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHVyaSA9IHRoaXMuZ2V0T3BlcmF0aW9uVXJpKG1vZGVsLnZvaWNlUHJvZmlsZS5wcm9maWxlVHlwZSkgKyBcIi9cIiArIG1vZGVsLnZvaWNlUHJvZmlsZS5wcm9maWxlSWQgKyBcIjp2ZXJpZnlcIjtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geWllbGQgYXVkaW9Tb3VyY2UuYmxvYjtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVzdEFkYXB0ZXIucmVxdWVzdChSZXN0UmVxdWVzdFR5cGUuRmlsZSwgdXJpLCB0aGlzLmdldFF1ZXJ5UGFyYW1zKHsgaWdub3JlTWluTGVuZ3RoOiBcInRydWVcIiB9KSwgbnVsbCwgcmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7IGRhdGE6IGUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBpZGVudGlmaWNhdGlvbiByZXF1ZXN0IHRvIGVuZHBvaW50LlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7U3BlYWtlcklkZW50aWZpY2F0aW9uTW9kZWx9IG1vZGVsIC0gdm9pY2UgcHJvZmlsZXMgYWdhaW5zdCB3aGljaCB0byBpZGVudGlmeS5cbiAgICAgKiBAcGFyYW0ge0lBdWRpb1NvdXJjZX0gYXVkaW9Tb3VyY2UgLSBhdWRpb1NvdXJjZSBmcm9tIHdoaWNoIHRvIHB1bGwgZGF0YSB0byBzZW5kXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPElSZXN0UmVzcG9uc2U+fSByZXN0IHJlc3BvbnNlIHRvIGVucm9sbG1lbnQgcmVxdWVzdC5cbiAgICAgKi9cbiAgICBpZGVudGlmeVNwZWFrZXIobW9kZWwsIGF1ZGlvU291cmNlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCB1cmkgPSB0aGlzLmdldE9wZXJhdGlvblVyaShWb2ljZVByb2ZpbGVUeXBlLlRleHRJbmRlcGVuZGVudElkZW50aWZpY2F0aW9uKSArIFwiOmlkZW50aWZ5U2luZ2xlU3BlYWtlclwiO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB5aWVsZCBhdWRpb1NvdXJjZS5ibG9iO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN0QWRhcHRlci5yZXF1ZXN0KFJlc3RSZXF1ZXN0VHlwZS5GaWxlLCB1cmksIHRoaXMuZ2V0UXVlcnlQYXJhbXMoeyBwcm9maWxlSWRzOiBtb2RlbC52b2ljZVByb2ZpbGVJZHMsIGlnbm9yZU1pbkxlbmd0aDogXCJ0cnVlXCIgfSksIG51bGwsIHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoeyBkYXRhOiBlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgcHJvZmlsZSBzdGF0dXMgcmVxdWVzdCB0byBlbmRwb2ludC5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge1ZvaWNlUHJvZmlsZX0gcHJvZmlsZSAtIHZvaWNlIHByb2ZpbGUgdG8gY2hlY2suXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPElSZXN0UmVzcG9uc2U+fSByZXN0IHJlc3BvbnNlIHRvIHN0YXR1cyByZXF1ZXN0XG4gICAgICovXG4gICAgZ2V0UHJvZmlsZVN0YXR1cyhwcm9maWxlKSB7XG4gICAgICAgIGNvbnN0IHVyaSA9IGAke3RoaXMuZ2V0T3BlcmF0aW9uVXJpKHByb2ZpbGUucHJvZmlsZVR5cGUpfS8ke3Byb2ZpbGUucHJvZmlsZUlkfWA7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN0QWRhcHRlci5yZXF1ZXN0KFJlc3RSZXF1ZXN0VHlwZS5HZXQsIHVyaSwgdGhpcy5nZXRRdWVyeVBhcmFtcygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgZ2V0IGFsbCBwcm9maWxlcyByZXF1ZXN0IHRvIGVuZHBvaW50LlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7Vm9pY2VQcm9maWxlVHlwZX0gcHJvZmlsZVR5cGUgLSB0eXBlIG9mIHByb2ZpbGVzIHRvIHJldHVybiBsaXN0IG9mXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPElSZXN0UmVzcG9uc2U+fSBwcm9taXNlZCByZXN0IHJlc3BvbnNlIGNvbnRhaW5pbmcgYWxsIHByb2ZpbGVzXG4gICAgICovXG4gICAgZ2V0UHJvZmlsZXMocHJvZmlsZVR5cGUpIHtcbiAgICAgICAgY29uc3QgdXJpID0gdGhpcy5nZXRPcGVyYXRpb25VcmkocHJvZmlsZVR5cGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVzdEFkYXB0ZXIucmVxdWVzdChSZXN0UmVxdWVzdFR5cGUuR2V0LCB1cmksIHRoaXMuZ2V0UXVlcnlQYXJhbXMoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGdldCBhY3RpdmF0aW9uL2F1dGggcGhyYXNlcyByZXF1ZXN0IHRvIGVuZHBvaW50LlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7Vm9pY2VQcm9maWxlVHlwZX0gcHJvZmlsZVR5cGUgLSB0eXBlIG9mIHByb2ZpbGVzIHRvIHJldHVybiBwaHJhc2VzIGZvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5nIC0gbGFuZ3VhZ2UvbG9jYWxlIG9mIHZvaWNlIHByb2ZpbGVcbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1Byb21pc2U8SVJlc3RSZXNwb25zZT59IHByb21pc2VkIHJlc3QgcmVzcG9uc2UgY29udGFpbmluZyBsaXN0IG9mIHZhbGlkIHBocmFzZXNcbiAgICAgKi9cbiAgICBnZXRQaHJhc2VzKHByb2ZpbGVUeXBlLCBsYW5nKSB7XG4gICAgICAgIGNvbnN0IHVyaSA9IGAke3RoaXMuZ2V0T3BlcmF0aW9uVXJpKHByb2ZpbGVUeXBlKX1gLnJlcGxhY2UoXCJwcm9maWxlc1wiLCBcInBocmFzZXNcIikgKyBcIi9cIiArIGxhbmc7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN0QWRhcHRlci5yZXF1ZXN0KFJlc3RSZXF1ZXN0VHlwZS5HZXQsIHVyaSwgdGhpcy5nZXRRdWVyeVBhcmFtcygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgZGVsZXRlIHByb2ZpbGUgcmVxdWVzdCB0byBlbmRwb2ludC5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge1ZvaWNlUHJvZmlsZX0gcHJvZmlsZSAtIHZvaWNlIHByb2ZpbGUgdG8gZGVsZXRlLlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxJUmVzdFJlc3BvbnNlPn0gcmVzdCByZXNwb25zZSB0byBkZWxldGlvbiByZXF1ZXN0XG4gICAgICovXG4gICAgZGVsZXRlUHJvZmlsZShwcm9maWxlKSB7XG4gICAgICAgIGNvbnN0IHVyaSA9IHRoaXMuZ2V0T3BlcmF0aW9uVXJpKHByb2ZpbGUucHJvZmlsZVR5cGUpICsgXCIvXCIgKyBwcm9maWxlLnByb2ZpbGVJZDtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlc3RBZGFwdGVyLnJlcXVlc3QoUmVzdFJlcXVlc3RUeXBlLkRlbGV0ZSwgdXJpLCB0aGlzLmdldFF1ZXJ5UGFyYW1zKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyByZXNldCBwcm9maWxlIHJlcXVlc3QgdG8gZW5kcG9pbnQuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtWb2ljZVByb2ZpbGV9IHByb2ZpbGUgLSB2b2ljZSBwcm9maWxlIHRvIHJlc2V0IGVucm9sbG1lbnRzIGZvci5cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1Byb21pc2U8SVJlc3RSZXNwb25zZT59IHJlc3QgcmVzcG9uc2UgdG8gcmVzZXQgcmVxdWVzdFxuICAgICAqL1xuICAgIHJlc2V0UHJvZmlsZShwcm9maWxlKSB7XG4gICAgICAgIGNvbnN0IHVyaSA9IHRoaXMuZ2V0T3BlcmF0aW9uVXJpKHByb2ZpbGUucHJvZmlsZVR5cGUpICsgXCIvXCIgKyBwcm9maWxlLnByb2ZpbGVJZCArIFwiOnJlc2V0XCI7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN0QWRhcHRlci5yZXF1ZXN0KFJlc3RSZXF1ZXN0VHlwZS5Qb3N0LCB1cmksIHRoaXMuZ2V0UXVlcnlQYXJhbXMoKSk7XG4gICAgfVxuICAgIGdldE9wZXJhdGlvblVyaShwcm9maWxlVHlwZSkge1xuICAgICAgICBjb25zdCBtb2RlID0gcHJvZmlsZVR5cGUgPT09IFZvaWNlUHJvZmlsZVR5cGUuVGV4dEluZGVwZW5kZW50SWRlbnRpZmljYXRpb24gPyBcImlkZW50aWZpY2F0aW9uXCIgOiBcInZlcmlmaWNhdGlvblwiO1xuICAgICAgICBjb25zdCBkZXBlbmRlbmN5ID0gcHJvZmlsZVR5cGUgPT09IFZvaWNlUHJvZmlsZVR5cGUuVGV4dERlcGVuZGVudFZlcmlmaWNhdGlvbiA/IFwidGV4dC1kZXBlbmRlbnRcIiA6IFwidGV4dC1pbmRlcGVuZGVudFwiO1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VXJpLnJlcGxhY2UoXCJ7bW9kZX1cIiwgbW9kZSkucmVwbGFjZShcIntkZXBlbmRlbmN5fVwiLCBkZXBlbmRlbmN5KTtcbiAgICB9XG4gICAgZ2V0UXVlcnlQYXJhbXMocGFyYW1zID0ge30pIHtcbiAgICAgICAgcGFyYW1zW1Jlc3RDb25maWdCYXNlLmNvbmZpZ1BhcmFtcy5hcGlWZXJzaW9uXSA9IHRoaXMucHJpdkFwaVZlcnNpb247XG4gICAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVha2VySWRNZXNzYWdlQWRhcHRlci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbmV4cG9ydCBjbGFzcyBTcGVha2VyUmVjb2duaXRpb25Db25maWcge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgdGhpcy5wcml2Q29udGV4dCA9IGNvbnRleHQgPyBjb250ZXh0IDogbmV3IENvbnRleHQobnVsbCk7XG4gICAgICAgIHRoaXMucHJpdlBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzO1xuICAgIH1cbiAgICBnZXQgcGFyYW1ldGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlBhcmFtZXRlcnM7XG4gICAgfVxuICAgIGdldCBDb250ZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29udGV4dDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWFrZXJSZWNvZ25pdGlvbkNvbmZpZy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUHJveHlJbmZvLCBXZWJzb2NrZXRDb25uZWN0aW9uLCB9IGZyb20gXCIuLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCI7XG5pbXBvcnQgeyBGb3JjZURpY3RhdGlvblByb3BlcnR5TmFtZSwgT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IE91dHB1dEZvcm1hdCwgUHJvcGVydHlJZCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29ubmVjdGlvbkZhY3RvcnlCYXNlIH0gZnJvbSBcIi4vQ29ubmVjdGlvbkZhY3RvcnlCYXNlXCI7XG5pbXBvcnQgeyBSZWNvZ25pdGlvbk1vZGUsIFdlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBIZWFkZXJOYW1lcyB9IGZyb20gXCIuL0hlYWRlck5hbWVzXCI7XG5pbXBvcnQgeyBRdWVyeVBhcmFtZXRlck5hbWVzIH0gZnJvbSBcIi4vUXVlcnlQYXJhbWV0ZXJOYW1lc1wiO1xuZXhwb3J0IGNsYXNzIFNwZWVjaENvbm5lY3Rpb25GYWN0b3J5IGV4dGVuZHMgQ29ubmVjdGlvbkZhY3RvcnlCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5pbnRlcmFjdGl2ZVJlbGF0aXZlVXJpID0gXCIvc3BlZWNoL3JlY29nbml0aW9uL2ludGVyYWN0aXZlL2NvZ25pdGl2ZXNlcnZpY2VzL3YxXCI7XG4gICAgICAgIHRoaXMuY29udmVyc2F0aW9uUmVsYXRpdmVVcmkgPSBcIi9zcGVlY2gvcmVjb2duaXRpb24vY29udmVyc2F0aW9uL2NvZ25pdGl2ZXNlcnZpY2VzL3YxXCI7XG4gICAgICAgIHRoaXMuZGljdGF0aW9uUmVsYXRpdmVVcmkgPSBcIi9zcGVlY2gvcmVjb2duaXRpb24vZGljdGF0aW9uL2NvZ25pdGl2ZXNlcnZpY2VzL3YxXCI7XG4gICAgICAgIHRoaXMudW5pdmVyc2FsVXJpID0gXCIvc3BlZWNoL3VuaXZlcnNhbC92XCI7XG4gICAgfVxuICAgIGNyZWF0ZShjb25maWcsIGF1dGhJbmZvLCBjb25uZWN0aW9uSWQpIHtcbiAgICAgICAgbGV0IGVuZHBvaW50ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCwgdW5kZWZpbmVkKTtcbiAgICAgICAgY29uc3QgcmVnaW9uID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24sIHVuZGVmaW5lZCk7XG4gICAgICAgIGNvbnN0IGhvc3RTdWZmaXggPSBDb25uZWN0aW9uRmFjdG9yeUJhc2UuZ2V0SG9zdFN1ZmZpeChyZWdpb24pO1xuICAgICAgICBjb25zdCBob3N0ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Ib3N0LCBcIndzczovL1wiICsgcmVnaW9uICsgXCIuc3R0LnNwZWVjaFwiICsgaG9zdFN1ZmZpeCk7XG4gICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0ge307XG4gICAgICAgIGNvbnN0IGVuZHBvaW50SWQgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50SWQsIHVuZGVmaW5lZCk7XG4gICAgICAgIGNvbnN0IGxhbmd1YWdlID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UsIHVuZGVmaW5lZCk7XG4gICAgICAgIGlmIChlbmRwb2ludElkKSB7XG4gICAgICAgICAgICBpZiAoIWVuZHBvaW50IHx8IGVuZHBvaW50LnNlYXJjaChRdWVyeVBhcmFtZXRlck5hbWVzLkN1c3RvbVNwZWVjaERlcGxveW1lbnRJZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5DdXN0b21TcGVlY2hEZXBsb3ltZW50SWRdID0gZW5kcG9pbnRJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsYW5ndWFnZSkge1xuICAgICAgICAgICAgaWYgKCFlbmRwb2ludCB8fCBlbmRwb2ludC5zZWFyY2goUXVlcnlQYXJhbWV0ZXJOYW1lcy5MYW5ndWFnZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5MYW5ndWFnZV0gPSBsYW5ndWFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVuZHBvaW50IHx8IGVuZHBvaW50LnNlYXJjaChRdWVyeVBhcmFtZXRlck5hbWVzLkZvcm1hdCkgPT09IC0xKSB7XG4gICAgICAgICAgICBxdWVyeVBhcmFtc1tRdWVyeVBhcmFtZXRlck5hbWVzLkZvcm1hdF0gPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUsIE91dHB1dEZvcm1hdFtPdXRwdXRGb3JtYXQuU2ltcGxlXSkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uZmlnLmF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbXNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5FbmFibGVMYW5ndWFnZUlkXSA9IFwidHJ1ZVwiO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0Q29tbW9uVXJsUGFyYW1zKGNvbmZpZywgcXVlcnlQYXJhbXMsIGVuZHBvaW50KTtcbiAgICAgICAgaWYgKCFlbmRwb2ludCkge1xuICAgICAgICAgICAgc3dpdGNoIChjb25maWcucmVjb2duaXRpb25Nb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvbk1vZGUuQ29udmVyc2F0aW9uOlxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoRm9yY2VEaWN0YXRpb25Qcm9wZXJ0eU5hbWUsIFwiZmFsc2VcIikgPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRwb2ludCA9IGhvc3QgKyB0aGlzLmRpY3RhdGlvblJlbGF0aXZlVXJpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5yZWNvZ25pdGlvbkVuZHBvaW50VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHBhcnNlSW50KGNvbmZpZy5yZWNvZ25pdGlvbkVuZHBvaW50VmVyc2lvbiwgMTApID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvaW50ID0gYCR7aG9zdH0ke3RoaXMudW5pdmVyc2FsVXJpfSR7Y29uZmlnLnJlY29nbml0aW9uRW5kcG9pbnRWZXJzaW9ufWA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRwb2ludCA9IGhvc3QgKyB0aGlzLmNvbnZlcnNhdGlvblJlbGF0aXZlVXJpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25Nb2RlLkRpY3RhdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQgPSBob3N0ICsgdGhpcy5kaWN0YXRpb25SZWxhdGl2ZVVyaTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5yZWNvZ25pdGlvbkVuZHBvaW50VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHBhcnNlSW50KGNvbmZpZy5yZWNvZ25pdGlvbkVuZHBvaW50VmVyc2lvbiwgMTApID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQgPSBgJHtob3N0fSR7dGhpcy51bml2ZXJzYWxVcml9JHtjb25maWcucmVjb2duaXRpb25FbmRwb2ludFZlcnNpb259YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvaW50ID0gaG9zdCArIHRoaXMuaW50ZXJhY3RpdmVSZWxhdGl2ZVVyaTsgLy8gZGVmYXVsdCBpcyBpbnRlcmFjdGl2ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7fTtcbiAgICAgICAgaWYgKGF1dGhJbmZvLnRva2VuICE9PSB1bmRlZmluZWQgJiYgYXV0aEluZm8udG9rZW4gIT09IFwiXCIpIHtcbiAgICAgICAgICAgIGhlYWRlcnNbYXV0aEluZm8uaGVhZGVyTmFtZV0gPSBhdXRoSW5mby50b2tlbjtcbiAgICAgICAgfVxuICAgICAgICBoZWFkZXJzW0hlYWRlck5hbWVzLkNvbm5lY3Rpb25JZF0gPSBjb25uZWN0aW9uSWQ7XG4gICAgICAgIGNvbnN0IGVuYWJsZUNvbXByZXNzaW9uID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoXCJTUEVFQ0gtRW5hYmxlV2Vic29ja2V0Q29tcHJlc3Npb25cIiwgXCJmYWxzZVwiKSA9PT0gXCJ0cnVlXCI7XG4gICAgICAgIGNvbnN0IHdlYlNvY2tldENvbm5lY3Rpb24gPSBuZXcgV2Vic29ja2V0Q29ubmVjdGlvbihlbmRwb2ludCwgcXVlcnlQYXJhbXMsIGhlYWRlcnMsIG5ldyBXZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyKCksIFByb3h5SW5mby5mcm9tUmVjb2duaXplckNvbmZpZyhjb25maWcpLCBlbmFibGVDb21wcmVzc2lvbiwgY29ubmVjdGlvbklkKTtcbiAgICAgICAgLy8gU2V0IHRoZSB2YWx1ZSBvZiBTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9VcmwgdG8gd2ViU29ja2V0Q29ubmVjdGlvbi51cmkgKGFuZCBub3QgdG8gYGVuZHBvaW50YCksIHNpbmNlIHRoaXMgdmFsdWUgaXMgdGhlIGZpbmFsXG4gICAgICAgIC8vIFVSSSB0aGF0IHdhcyB1c2VkIHRvIG1ha2UgdGhlIGNvbm5lY3Rpb24gKGluY2x1ZGluZyBxdWVyeSBwYXJhbWV0ZXJzKS5cbiAgICAgICAgY29uc3QgdXJpID0gd2ViU29ja2V0Q29ubmVjdGlvbi51cmk7XG4gICAgICAgIGNvbmZpZy5wYXJhbWV0ZXJzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVXJsLCB1cmkpO1xuICAgICAgICByZXR1cm4gd2ViU29ja2V0Q29ubmVjdGlvbjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaENvbm5lY3Rpb25GYWN0b3J5LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBBcmd1bWVudE51bGxFcnJvciwgQ29ubmVjdGlvbk1lc3NhZ2UgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IEhlYWRlck5hbWVzIH0gZnJvbSBcIi4vSGVhZGVyTmFtZXNcIjtcbmV4cG9ydCBjbGFzcyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZSBleHRlbmRzIENvbm5lY3Rpb25NZXNzYWdlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlVHlwZSwgcGF0aCwgcmVxdWVzdElkLCBjb250ZW50VHlwZSwgYm9keSwgc3RyZWFtSWQsIGFkZGl0aW9uYWxIZWFkZXJzLCBpZCkge1xuICAgICAgICBpZiAoIXBhdGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcInBhdGhcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZXF1ZXN0SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcInJlcXVlc3RJZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoZWFkZXJzID0ge307XG4gICAgICAgIGhlYWRlcnNbSGVhZGVyTmFtZXMuUGF0aF0gPSBwYXRoO1xuICAgICAgICBoZWFkZXJzW0hlYWRlck5hbWVzLlJlcXVlc3RJZF0gPSByZXF1ZXN0SWQ7XG4gICAgICAgIGhlYWRlcnNbSGVhZGVyTmFtZXMuUmVxdWVzdFRpbWVzdGFtcF0gPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIGlmIChjb250ZW50VHlwZSkge1xuICAgICAgICAgICAgaGVhZGVyc1tIZWFkZXJOYW1lcy5Db250ZW50VHlwZV0gPSBjb250ZW50VHlwZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RyZWFtSWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnNbSGVhZGVyTmFtZXMuUmVxdWVzdFN0cmVhbUlkXSA9IHN0cmVhbUlkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhZGRpdGlvbmFsSGVhZGVycykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBoZWFkZXJOYW1lIGluIGFkZGl0aW9uYWxIZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhlYWRlck5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1toZWFkZXJOYW1lXSA9IGFkZGl0aW9uYWxIZWFkZXJzW2hlYWRlck5hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgIHN1cGVyKG1lc3NhZ2VUeXBlLCBib2R5LCBoZWFkZXJzLCBpZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdXBlcihtZXNzYWdlVHlwZSwgYm9keSwgaGVhZGVycyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2UGF0aCA9IHBhdGg7XG4gICAgICAgIHRoaXMucHJpdlJlcXVlc3RJZCA9IHJlcXVlc3RJZDtcbiAgICAgICAgdGhpcy5wcml2Q29udGVudFR5cGUgPSBjb250ZW50VHlwZTtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtSWQgPSBzdHJlYW1JZDtcbiAgICAgICAgdGhpcy5wcml2QWRkaXRpb25hbEhlYWRlcnMgPSBhZGRpdGlvbmFsSGVhZGVycztcbiAgICB9XG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXRoO1xuICAgIH1cbiAgICBnZXQgcmVxdWVzdElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVxdWVzdElkO1xuICAgIH1cbiAgICBnZXQgY29udGVudFR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb250ZW50VHlwZTtcbiAgICB9XG4gICAgZ2V0IHN0cmVhbUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3RyZWFtSWQ7XG4gICAgfVxuICAgIGdldCBhZGRpdGlvbmFsSGVhZGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkFkZGl0aW9uYWxIZWFkZXJzO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUNvbm5lY3Rpb25NZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAgICAgbGV0IHBhdGggPSBudWxsO1xuICAgICAgICBsZXQgcmVxdWVzdElkID0gbnVsbDtcbiAgICAgICAgbGV0IGNvbnRlbnRUeXBlID0gbnVsbDtcbiAgICAgICAgLy8gbGV0IHJlcXVlc3RUaW1lc3RhbXAgPSBudWxsO1xuICAgICAgICBsZXQgc3RyZWFtSWQgPSBudWxsO1xuICAgICAgICBjb25zdCBhZGRpdGlvbmFsSGVhZGVycyA9IHt9O1xuICAgICAgICBpZiAobWVzc2FnZS5oZWFkZXJzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGhlYWRlck5hbWUgaW4gbWVzc2FnZS5oZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhlYWRlck5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlck5hbWUudG9Mb3dlckNhc2UoKSA9PT0gSGVhZGVyTmFtZXMuUGF0aC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gbWVzc2FnZS5oZWFkZXJzW2hlYWRlck5hbWVdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRlck5hbWUudG9Mb3dlckNhc2UoKSA9PT0gSGVhZGVyTmFtZXMuUmVxdWVzdElkLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJZCA9IG1lc3NhZ2UuaGVhZGVyc1toZWFkZXJOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0gZWxzZSBpZiAoaGVhZGVyTmFtZS50b0xvd2VyQ2FzZSgpID09PSBIZWFkZXJOYW1lcy5SZXF1ZXN0VGltZXN0YW1wLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICByZXF1ZXN0VGltZXN0YW1wID0gbWVzc2FnZS5oZWFkZXJzW2hlYWRlck5hbWVdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRlck5hbWUudG9Mb3dlckNhc2UoKSA9PT0gSGVhZGVyTmFtZXMuQ29udGVudFR5cGUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGUgPSBtZXNzYWdlLmhlYWRlcnNbaGVhZGVyTmFtZV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaGVhZGVyTmFtZS50b0xvd2VyQ2FzZSgpID09PSBIZWFkZXJOYW1lcy5SZXF1ZXN0U3RyZWFtSWQudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtSWQgPSBtZXNzYWdlLmhlYWRlcnNbaGVhZGVyTmFtZV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsSGVhZGVyc1toZWFkZXJOYW1lXSA9IG1lc3NhZ2UuaGVhZGVyc1toZWFkZXJOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlKG1lc3NhZ2UubWVzc2FnZVR5cGUsIHBhdGgsIHJlcXVlc3RJZCwgY29udGVudFR5cGUsIG1lc3NhZ2UuYm9keSwgc3RyZWFtSWQsIGFkZGl0aW9uYWxIZWFkZXJzLCBtZXNzYWdlLmlkKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaENvbm5lY3Rpb25NZXNzYWdlLkludGVybmFsLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIEpTT04gdXNlZCBpbiB0aGUgc3BlZWNoLmNvbnRleHQgbWVzc2FnZSBzZW50IHRvIHRoZSBzcGVlY2ggc2VydmljZS5cbiAqIFRoZSBkeW5hbWljIGdyYW1tYXIgaXMgYWx3YXlzIHJlZnJlc2hlZCBmcm9tIHRoZSBlbmNhcHN1bGF0ZWQgZHluYW1pYyBncmFtbWFyIG9iamVjdC5cbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWVjaENvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKGR5bmFtaWNHcmFtbWFyKSB7XG4gICAgICAgIHRoaXMucHJpdkNvbnRleHQgPSB7fTtcbiAgICAgICAgdGhpcy5wcml2RHluYW1pY0dyYW1tYXIgPSBkeW5hbWljR3JhbW1hcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIHNlY3Rpb24gdG8gdGhlIHNwZWVjaC5jb250ZXh0IG9iamVjdC5cbiAgICAgKiBAcGFyYW0gc2VjdGlvbk5hbWUgTmFtZSBvZiB0aGUgc2VjdGlvbiB0byBhZGQuXG4gICAgICogQHBhcmFtIHZhbHVlIEpTT04gc2VyaWFsaXphYmxlIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIHZhbHVlLlxuICAgICAqL1xuICAgIHNldFNlY3Rpb24oc2VjdGlvbk5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpdkNvbnRleHRbc2VjdGlvbk5hbWVdID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBJbnRlcm5hbFxuICAgICAqIFRoaXMgaXMgb25seSB1c2VkIGJ5IHByb251bmNpYXRpb24gYXNzZXNzbWVudCBjb25maWcuXG4gICAgICogRG8gbm90IHVzZSBleHRlcm5hbGx5LCBvYmplY3QgcmV0dXJuZWQgd2lsbCBjaGFuZ2Ugd2l0aG91dCB3YXJuaW5nIG9yIG5vdGljZS5cbiAgICAgKi9cbiAgICBzZXRQcm9udW5jaWF0aW9uQXNzZXNzbWVudFBhcmFtcyhwYXJhbXMpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdkNvbnRleHQucGhyYXNlRGV0ZWN0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbnRleHQucGhyYXNlRGV0ZWN0aW9uID0ge1xuICAgICAgICAgICAgICAgIGVucmljaG1lbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbkFzc2Vzc21lbnQ6IHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZDb250ZXh0LnBocmFzZURldGVjdGlvbi5lbnJpY2htZW50LnByb251bmNpYXRpb25Bc3Nlc3NtZW50ID0gSlNPTi5wYXJzZShwYXJhbXMpO1xuICAgICAgICB0aGlzLnNldFdvcmRMZXZlbFRpbWluZ3MoKTtcbiAgICAgICAgdGhpcy5wcml2Q29udGV4dC5waHJhc2VPdXRwdXQuZGV0YWlsZWQub3B0aW9ucy5wdXNoKFwiUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRcIik7XG4gICAgICAgIGlmICh0aGlzLnByaXZDb250ZXh0LnBocmFzZU91dHB1dC5kZXRhaWxlZC5vcHRpb25zLmluZGV4T2YoXCJTTlJcIikgPT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZDb250ZXh0LnBocmFzZU91dHB1dC5kZXRhaWxlZC5vcHRpb25zLnB1c2goXCJTTlJcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0V29yZExldmVsVGltaW5ncygpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdkNvbnRleHQucGhyYXNlT3V0cHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbnRleHQucGhyYXNlT3V0cHV0ID0ge1xuICAgICAgICAgICAgICAgIGRldGFpbGVkOiB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IFtdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IHt9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByaXZDb250ZXh0LnBocmFzZU91dHB1dC5kZXRhaWxlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZDb250ZXh0LnBocmFzZU91dHB1dC5kZXRhaWxlZCA9IHtcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZDb250ZXh0LnBocmFzZU91dHB1dC5mb3JtYXQgPSBcIkRldGFpbGVkXCI7XG4gICAgICAgIGlmICh0aGlzLnByaXZDb250ZXh0LnBocmFzZU91dHB1dC5kZXRhaWxlZC5vcHRpb25zLmluZGV4T2YoXCJXb3JkVGltaW5nc1wiKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbnRleHQucGhyYXNlT3V0cHV0LmRldGFpbGVkLm9wdGlvbnMucHVzaChcIldvcmRUaW1pbmdzXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgZGdpID0gdGhpcy5wcml2RHluYW1pY0dyYW1tYXIuZ2VuZXJhdGVHcmFtbWFyT2JqZWN0KCk7XG4gICAgICAgIHRoaXMuc2V0U2VjdGlvbihcImRnaVwiLCBkZ2kpO1xuICAgICAgICBjb25zdCByZXQgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnByaXZDb250ZXh0KTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaENvbnRleHQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoU2VydmljZUludGVyZmFjZXMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBPdXRwdXRGb3JtYXQsIFByb3BlcnR5Q29sbGVjdGlvbiwgUHJvcGVydHlJZCwgUmVzdWx0UmVhc29uLCBTcGVlY2hSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLCBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncywgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQsIH0gZnJvbSBcIi4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIERldGFpbGVkU3BlZWNoUGhyYXNlLCBFbnVtVHJhbnNsYXRpb24sIE91dHB1dEZvcm1hdFByb3BlcnR5TmFtZSwgUmVjb2duaXRpb25TdGF0dXMsIFNlcnZpY2VSZWNvZ25pemVyQmFzZSwgU2ltcGxlU3BlZWNoUGhyYXNlLCBTcGVlY2hIeXBvdGhlc2lzLCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIFNwZWVjaFNlcnZpY2VSZWNvZ25pemVyIGV4dGVuZHMgU2VydmljZVJlY29nbml6ZXJCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCBzcGVlY2hSZWNvZ25pemVyKSB7XG4gICAgICAgIHN1cGVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Tb3VyY2UsIHJlY29nbml6ZXJDb25maWcsIHNwZWVjaFJlY29nbml6ZXIpO1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hSZWNvZ25pemVyID0gc3BlZWNoUmVjb2duaXplcjtcbiAgICAgICAgY29uc3QgcGhyYXNlRGV0ZWN0aW9uID0ge307XG4gICAgICAgIGNvbnN0IHNwZWVjaFNlZ21lbnRhdGlvblRpbWVvdXQgPSByZWNvZ25pemVyQ29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hfU2VnbWVudGF0aW9uU2lsZW5jZVRpbWVvdXRNcywgdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKHNwZWVjaFNlZ21lbnRhdGlvblRpbWVvdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3Qgc2VnbWVudGF0aW9uU2lsZW5jZVRpbWVvdXRNcyA9IHBhcnNlSW50KHNwZWVjaFNlZ21lbnRhdGlvblRpbWVvdXQsIDEwKTtcbiAgICAgICAgICAgIHBocmFzZURldGVjdGlvbi5tb2RlID0gXCJJTlRFUkFDVElWRVwiO1xuICAgICAgICAgICAgcGhyYXNlRGV0ZWN0aW9uLklOVEVSQUNUSVZFID0ge1xuICAgICAgICAgICAgICAgIHNlZ21lbnRhdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBtb2RlOiBcIkN1c3RvbVwiLFxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50YXRpb25TaWxlbmNlVGltZW91dE1zXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVjb2duaXplckNvbmZpZy5hdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZUxhbmd1YWdlcyA9IHJlY29nbml6ZXJDb25maWcuYXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlcy5zcGxpdChcIixcIik7XG4gICAgICAgICAgICBsZXQgc3BlZWNoQ29udGV4dExpZE1vZGU7XG4gICAgICAgICAgICBpZiAocmVjb2duaXplckNvbmZpZy5sYW5ndWFnZUlkTW9kZSA9PT0gXCJDb250aW51b3VzXCIpIHtcbiAgICAgICAgICAgICAgICBzcGVlY2hDb250ZXh0TGlkTW9kZSA9IFwiRGV0ZWN0Q29udGludW91c1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7IC8vIHJlY29nbml6ZXJDb25maWcubGFuZ3VhZ2VJZE1vZGUgPT09IFwiQXRTdGFydFwiXG4gICAgICAgICAgICAgICAgc3BlZWNoQ29udGV4dExpZE1vZGUgPSBcIkRldGVjdEF0QXVkaW9TdGFydFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoQ29udGV4dC5zZXRTZWN0aW9uKFwibGFuZ3VhZ2VJZFwiLCB7XG4gICAgICAgICAgICAgICAgUHJpb3JpdHk6IFwiUHJpb3JpdGl6ZUxhdGVuY3lcIixcbiAgICAgICAgICAgICAgICBsYW5ndWFnZXM6IHNvdXJjZUxhbmd1YWdlcyxcbiAgICAgICAgICAgICAgICBtb2RlOiBzcGVlY2hDb250ZXh0TGlkTW9kZSxcbiAgICAgICAgICAgICAgICBvblN1Y2Nlc3M6IHsgYWN0aW9uOiBcIlJlY29nbml6ZVwiIH0sXG4gICAgICAgICAgICAgICAgb25Vbmtub3duOiB7IGFjdGlvbjogXCJOb25lXCIgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hDb250ZXh0LnNldFNlY3Rpb24oXCJwaHJhc2VPdXRwdXRcIiwge1xuICAgICAgICAgICAgICAgIGludGVyaW1SZXN1bHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFR5cGU6IFwiQXV0b1wiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwaHJhc2VSZXN1bHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFR5cGU6IFwiQWx3YXlzXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbU1vZGVscyA9IHJlY29nbml6ZXJDb25maWcuc291cmNlTGFuZ3VhZ2VNb2RlbHM7XG4gICAgICAgICAgICBpZiAoY3VzdG9tTW9kZWxzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBwaHJhc2VEZXRlY3Rpb24uY3VzdG9tTW9kZWxzID0gY3VzdG9tTW9kZWxzO1xuICAgICAgICAgICAgICAgIHBocmFzZURldGVjdGlvbi5vbkludGVyaW0gPSB7IGFjdGlvbjogXCJOb25lXCIgfTtcbiAgICAgICAgICAgICAgICBwaHJhc2VEZXRlY3Rpb24ub25TdWNjZXNzID0geyBhY3Rpb246IFwiTm9uZVwiIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNFbXB0eSA9IChvYmopID0+IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBndWFyZC1mb3ItaW4sIGJyYWNlLXN0eWxlXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHggaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIGlmICghaXNFbXB0eShwaHJhc2VEZXRlY3Rpb24pKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hDb250ZXh0LnNldFNlY3Rpb24oXCJwaHJhc2VEZXRlY3Rpb25cIiwgcGhyYXNlRGV0ZWN0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9jZXNzVHlwZVNwZWNpZmljTWVzc2FnZXMoY29ubmVjdGlvbk1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRQcm9wcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgIHJlc3VsdFByb3BzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHQsIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgIGxldCBwcm9jZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHN3aXRjaCAoY29ubmVjdGlvbk1lc3NhZ2UucGF0aC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcInNwZWVjaC5oeXBvdGhlc2lzXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcInNwZWVjaC5mcmFnbWVudFwiOlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBoeXBvdGhlc2lzID0gU3BlZWNoSHlwb3RoZXNpcy5mcm9tSlNPTihjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGh5cG90aGVzaXMuT2Zmc2V0ICsgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uY3VycmVudFR1cm5BdWRpb09mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uUmVzdWx0KHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgUmVzdWx0UmVhc29uLlJlY29nbml6aW5nU3BlZWNoLCBoeXBvdGhlc2lzLlRleHQsIGh5cG90aGVzaXMuRHVyYXRpb24sIG9mZnNldCwgaHlwb3RoZXNpcy5MYW5ndWFnZSwgaHlwb3RoZXNpcy5MYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2UsIHVuZGVmaW5lZCwgLy8gU3BlYWtlciBJZFxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5LCByZXN1bHRQcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uSHlwb3RoZXNpcyhvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBldiA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncyhyZXN1bHQsIGh5cG90aGVzaXMuRHVyYXRpb24sIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlNwZWVjaFJlY29nbml6ZXIucmVjb2duaXppbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoUmVjb2duaXplci5yZWNvZ25pemluZyh0aGlzLnByaXZTcGVlY2hSZWNvZ25pemVyLCBldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInNwZWVjaC5waHJhc2VcIjpcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2ltcGxlID0gU2ltcGxlU3BlZWNoUGhyYXNlLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0UmVhc29uID0gRW51bVRyYW5zbGF0aW9uLmltcGxUcmFuc2xhdGVSZWNvZ25pdGlvblJlc3VsdChzaW1wbGUuUmVjb2duaXRpb25TdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vblBocmFzZVJlY29nbml6ZWQodGhpcy5wcml2UmVxdWVzdFNlc3Npb24uY3VycmVudFR1cm5BdWRpb09mZnNldCArIHNpbXBsZS5PZmZzZXQgKyBzaW1wbGUuRHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoUmVzdWx0UmVhc29uLkNhbmNlbGVkID09PSByZXN1bHRSZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbmNlbFJlYXNvbiA9IEVudW1UcmFuc2xhdGlvbi5pbXBsVHJhbnNsYXRlQ2FuY2VsUmVzdWx0KHNpbXBsZS5SZWNvZ25pdGlvblN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxsYXRpb25FcnJvckNvZGUgPSBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZUNhbmNlbEVycm9yQ29kZShzaW1wbGUuUmVjb2duaXRpb25TdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5jYW5jZWxSZWNvZ25pdGlvbkxvY2FsKGNhbmNlbFJlYXNvbiwgY2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZUVycm9yRGV0YWlscyhjYW5jZWxsYXRpb25FcnJvckNvZGUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmlzU3BlZWNoRW5kZWQgJiYgcmVzdWx0UmVhc29uID09PSBSZXN1bHRSZWFzb24uTm9NYXRjaCAmJiBzaW1wbGUuUmVjb2duaXRpb25TdGF0dXMgIT09IFJlY29nbml0aW9uU3RhdHVzLkluaXRpYWxTaWxlbmNlVGltZW91dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KE91dHB1dEZvcm1hdFByb3BlcnR5TmFtZSkgPT09IE91dHB1dEZvcm1hdFtPdXRwdXRGb3JtYXQuU2ltcGxlXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQodGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCByZXN1bHRSZWFzb24sIHNpbXBsZS5EaXNwbGF5VGV4dCwgc2ltcGxlLkR1cmF0aW9uLCBzaW1wbGUuT2Zmc2V0ICsgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uY3VycmVudFR1cm5BdWRpb09mZnNldCwgc2ltcGxlLkxhbmd1YWdlLCBzaW1wbGUuTGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlLCB1bmRlZmluZWQsIC8vIFNwZWFrZXIgSWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSwgcmVzdWx0UHJvcHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGV0YWlsZWQgPSBEZXRhaWxlZFNwZWVjaFBocmFzZS5mcm9tSlNPTihjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsT2Zmc2V0ID0gZGV0YWlsZWQuT2Zmc2V0ICsgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uY3VycmVudFR1cm5BdWRpb09mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0Q29ycmVjdGVkSnNvbiA9IGRldGFpbGVkLmdldEpzb25XaXRoQ29ycmVjdGVkT2Zmc2V0cyh0b3RhbE9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIHJlc3VsdFJlYXNvbiwgZGV0YWlsZWQuUmVjb2duaXRpb25TdGF0dXMgPT09IFJlY29nbml0aW9uU3RhdHVzLlN1Y2Nlc3MgPyBkZXRhaWxlZC5OQmVzdFswXS5EaXNwbGF5IDogdW5kZWZpbmVkLCBkZXRhaWxlZC5EdXJhdGlvbiwgdG90YWxPZmZzZXQsIGRldGFpbGVkLkxhbmd1YWdlLCBkZXRhaWxlZC5MYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2UsIHVuZGVmaW5lZCwgLy8gU3BlYWtlciBJZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsIG9mZnNldENvcnJlY3RlZEpzb24sIHJlc3VsdFByb3BzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgU3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3MocmVzdWx0LCByZXN1bHQub2Zmc2V0LCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlNwZWVjaFJlY29nbml6ZXIucmVjb2duaXplZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoUmVjb2duaXplci5yZWNvZ25pemVkKHRoaXMucHJpdlNwZWVjaFJlY29nbml6ZXIsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2RXJyb3JDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RXJyb3JDYWxsYmFjayhlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IGludm9rZSB0aGUgY2FsbCBiYWNrIG9uY2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGlmIGl0J3Mgc3VjY2Vzc2Z1bCBkb24ndCBpbnZva2UgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXJyb3IgYWZ0ZXIgdGhhdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RXJyb3JDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwcm9jZXNzZWQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDYW5jZWxzIHJlY29nbml0aW9uLlxuICAgIGNhbmNlbFJlY29nbml0aW9uKHNlc3Npb25JZCwgcmVxdWVzdElkLCBjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yQ29kZSwgZXJyb3IpIHtcbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgcHJvcGVydGllcy5zZXRQcm9wZXJ0eShDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIENhbmNlbGxhdGlvbkVycm9yQ29kZVtlcnJvckNvZGVdKTtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2U3BlZWNoUmVjb2duaXplci5jYW5jZWxlZCkge1xuICAgICAgICAgICAgY29uc3QgY2FuY2VsRXZlbnQgPSBuZXcgU3BlZWNoUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncyhjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yLCBlcnJvckNvZGUsIHVuZGVmaW5lZCwgc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoUmVjb2duaXplci5jYW5jZWxlZCh0aGlzLnByaXZTcGVlY2hSZWNvZ25pemVyLCBjYW5jZWxFdmVudCk7XG4gICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfYSkgeyB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQocmVxdWVzdElkLCBSZXN1bHRSZWFzb24uQ2FuY2VsZWQsIHVuZGVmaW5lZCwgLy8gVGV4dFxuICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBEdXJhdGlvblxuICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBPZmZzZXRcbiAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gTGFuZ3VhZ2VcbiAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gTGFuZ3VhZ2UgRGV0ZWN0aW9uIENvbmZpZGVuY2VcbiAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gU3BlYWtlciBJZFxuICAgICAgICAgICAgZXJyb3IsIHVuZGVmaW5lZCwgLy8gSnNvblxuICAgICAgICAgICAgcHJvcGVydGllcyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF9iKSB7IH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoU2VydmljZVJlY29nbml6ZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFByb3h5SW5mbywgV2Vic29ja2V0Q29ubmVjdGlvbiB9IGZyb20gXCIuLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUlkIH0gZnJvbSBcIi4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb25uZWN0aW9uRmFjdG9yeUJhc2UgfSBmcm9tIFwiLi9Db25uZWN0aW9uRmFjdG9yeUJhc2VcIjtcbmltcG9ydCB7IFdlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBIZWFkZXJOYW1lcyB9IGZyb20gXCIuL0hlYWRlck5hbWVzXCI7XG5pbXBvcnQgeyBRdWVyeVBhcmFtZXRlck5hbWVzIH0gZnJvbSBcIi4vUXVlcnlQYXJhbWV0ZXJOYW1lc1wiO1xuZXhwb3J0IGNsYXNzIFNwZWVjaFN5bnRoZXNpc0Nvbm5lY3Rpb25GYWN0b3J5IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zeW50aGVzaXNVcmkgPSBcIi9jb2duaXRpdmVzZXJ2aWNlcy93ZWJzb2NrZXQvdjFcIjtcbiAgICB9XG4gICAgY3JlYXRlKGNvbmZpZywgYXV0aEluZm8sIGNvbm5lY3Rpb25JZCkge1xuICAgICAgICBsZXQgZW5kcG9pbnQgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50LCB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCByZWdpb24gPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbiwgdW5kZWZpbmVkKTtcbiAgICAgICAgY29uc3QgaG9zdFN1ZmZpeCA9IENvbm5lY3Rpb25GYWN0b3J5QmFzZS5nZXRIb3N0U3VmZml4KHJlZ2lvbik7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50SWQgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50SWQsIHVuZGVmaW5lZCk7XG4gICAgICAgIGNvbnN0IGhvc3RQcmVmaXggPSAoZW5kcG9pbnRJZCA9PT0gdW5kZWZpbmVkKSA/IFwidHRzXCIgOiBcInZvaWNlXCI7XG4gICAgICAgIGNvbnN0IGhvc3QgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0hvc3QsIFwid3NzOi8vXCIgKyByZWdpb24gKyBcIi5cIiArIGhvc3RQcmVmaXggKyBcIi5zcGVlY2hcIiArIGhvc3RTdWZmaXgpO1xuICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHt9O1xuICAgICAgICBpZiAoIWVuZHBvaW50KSB7XG4gICAgICAgICAgICBlbmRwb2ludCA9IGhvc3QgKyB0aGlzLnN5bnRoZXNpc1VyaTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoZWFkZXJzID0ge307XG4gICAgICAgIGlmIChhdXRoSW5mby50b2tlbiAhPT0gdW5kZWZpbmVkICYmIGF1dGhJbmZvLnRva2VuICE9PSBcIlwiKSB7XG4gICAgICAgICAgICBoZWFkZXJzW2F1dGhJbmZvLmhlYWRlck5hbWVdID0gYXV0aEluZm8udG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgaGVhZGVyc1tIZWFkZXJOYW1lcy5Db25uZWN0aW9uSWRdID0gY29ubmVjdGlvbklkO1xuICAgICAgICBpZiAoZW5kcG9pbnRJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuQ3VzdG9tVm9pY2VEZXBsb3ltZW50SWRdID0gZW5kcG9pbnRJZDtcbiAgICAgICAgfVxuICAgICAgICBjb25maWcucGFyYW1ldGVycy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1VybCwgZW5kcG9pbnQpO1xuICAgICAgICBjb25zdCBlbmFibGVDb21wcmVzc2lvbiA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFwiU1BFRUNILUVuYWJsZVdlYnNvY2tldENvbXByZXNzaW9uXCIsIFwiZmFsc2VcIikgPT09IFwidHJ1ZVwiO1xuICAgICAgICByZXR1cm4gbmV3IFdlYnNvY2tldENvbm5lY3Rpb24oZW5kcG9pbnQsIHF1ZXJ5UGFyYW1zLCBoZWFkZXJzLCBuZXcgV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlcigpLCBQcm94eUluZm8uZnJvbVBhcmFtZXRlcnMoY29uZmlnLnBhcmFtZXRlcnMpLCBlbmFibGVDb21wcmVzc2lvbiwgY29ubmVjdGlvbklkKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaFN5bnRoZXNpc0Nvbm5lY3Rpb25GYWN0b3J5LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IEFyZ3VtZW50TnVsbEVycm9yLCBDb25uZWN0aW9uU3RhdGUsIGNyZWF0ZU5vRGFzaEd1aWQsIEV2ZW50U291cmNlLCBNZXNzYWdlVHlwZSwgU2VydmljZUV2ZW50LCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBDYW5jZWxsYXRpb25SZWFzb24sIFByb3BlcnR5Q29sbGVjdGlvbiwgUHJvcGVydHlJZCwgUmVzdWx0UmVhc29uLCBTcGVlY2hTeW50aGVzaXNCb29rbWFya0V2ZW50QXJncywgU3BlZWNoU3ludGhlc2lzRXZlbnRBcmdzLCBTcGVlY2hTeW50aGVzaXNSZXN1bHQsIFNwZWVjaFN5bnRoZXNpc1Zpc2VtZUV2ZW50QXJncywgU3BlZWNoU3ludGhlc2lzV29yZEJvdW5kYXJ5RXZlbnRBcmdzLCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQWdlbnRDb25maWcsIENhbmNlbGxhdGlvbkVycm9yQ29kZVByb3BlcnR5TmFtZSwgTWV0YWRhdGFUeXBlLCBTeW50aGVzaXNBdWRpb01ldGFkYXRhLCBTeW50aGVzaXNDb250ZXh0LCBTeW50aGVzaXNUdXJuIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuaW1wb3J0IHsgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UgfSBmcm9tIFwiLi9TcGVlY2hDb25uZWN0aW9uTWVzc2FnZS5JbnRlcm5hbFwiO1xuZXhwb3J0IGNsYXNzIFN5bnRoZXNpc0FkYXB0ZXJCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIHN5bnRoZXNpemVyQ29uZmlnLCBzcGVlY2hTeW50aGVzaXplciwgYXVkaW9EZXN0aW5hdGlvbikge1xuICAgICAgICB0aGlzLnNwZWFrT3ZlcnJpZGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucmVjZWl2ZU1lc3NhZ2VPdmVycmlkZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jb25uZWN0SW1wbE92ZXJyaWRlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNvbmZpZ0Nvbm5lY3Rpb25PdmVycmlkZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gQSBwcm9taXNlIGZvciBhIGNvbmZpZ3VyZWQgY29ubmVjdGlvbi5cbiAgICAgICAgLy8gRG8gbm90IGNvbnN1bWUgZGlyZWN0bHksIGNhbGwgZmV0Y2hDb25uZWN0aW9uIGluc3RlYWQuXG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWd1cmF0aW9uUHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKCFhdXRoZW50aWNhdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwiYXV0aGVudGljYXRpb25cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb25uZWN0aW9uRmFjdG9yeSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwiY29ubmVjdGlvbkZhY3RvcnlcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzeW50aGVzaXplckNvbmZpZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwic3ludGhlc2l6ZXJDb25maWdcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2QXV0aGVudGljYXRpb24gPSBhdXRoZW50aWNhdGlvbjtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkZhY3RvcnkgPSBjb25uZWN0aW9uRmFjdG9yeTtcbiAgICAgICAgdGhpcy5wcml2U3ludGhlc2l6ZXJDb25maWcgPSBzeW50aGVzaXplckNvbmZpZztcbiAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplciA9IHNwZWVjaFN5bnRoZXNpemVyO1xuICAgICAgICB0aGlzLnByaXZTZXNzaW9uQXVkaW9EZXN0aW5hdGlvbiA9IGF1ZGlvRGVzdGluYXRpb247XG4gICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc1R1cm4gPSBuZXcgU3ludGhlc2lzVHVybigpO1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRXZlbnRzID0gbmV3IEV2ZW50U291cmNlKCk7XG4gICAgICAgIHRoaXMucHJpdlNlcnZpY2VFdmVudHMgPSBuZXcgRXZlbnRTb3VyY2UoKTtcbiAgICAgICAgdGhpcy5wcml2U3ludGhlc2lzQ29udGV4dCA9IG5ldyBTeW50aGVzaXNDb250ZXh0KHRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyKTtcbiAgICAgICAgdGhpcy5wcml2QWdlbnRDb25maWcgPSBuZXcgQWdlbnRDb25maWcoKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uRXZlbnRzLmF0dGFjaCgoY29ubmVjdGlvbkV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoY29ubmVjdGlvbkV2ZW50Lm5hbWUgPT09IFwiQ29ubmVjdGlvbkNsb3NlZEV2ZW50XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uQ2xvc2VkRXZlbnQgPSBjb25uZWN0aW9uRXZlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb25DbG9zZWRFdmVudC5zdGF0dXNDb2RlICE9PSAxMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsU3ludGhlc2lzTG9jYWwoQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBjb25uZWN0aW9uQ2xvc2VkRXZlbnQuc3RhdHVzQ29kZSA9PT0gMTAwNyA/IENhbmNlbGxhdGlvbkVycm9yQ29kZS5CYWRSZXF1ZXN0UGFyYW1ldGVycyA6IENhbmNlbGxhdGlvbkVycm9yQ29kZS5Db25uZWN0aW9uRmFpbHVyZSwgYCR7Y29ubmVjdGlvbkNsb3NlZEV2ZW50LnJlYXNvbn0gd2Vic29ja2V0IGVycm9yIGNvZGU6ICR7Y29ubmVjdGlvbkNsb3NlZEV2ZW50LnN0YXR1c0NvZGV9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IHN5bnRoZXNpc0NvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTeW50aGVzaXNDb250ZXh0O1xuICAgIH1cbiAgICBnZXQgYWdlbnRDb25maWcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBZ2VudENvbmZpZztcbiAgICB9XG4gICAgZ2V0IGNvbm5lY3Rpb25FdmVudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uRXZlbnRzO1xuICAgIH1cbiAgICBnZXQgc2VydmljZUV2ZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNlcnZpY2VFdmVudHM7XG4gICAgfVxuICAgIHNldCBhY3Rpdml0eVRlbXBsYXRlKG1lc3NhZ2VQYXlsb2FkKSB7XG4gICAgICAgIHRoaXMucHJpdkFjdGl2aXR5VGVtcGxhdGUgPSBtZXNzYWdlUGF5bG9hZDtcbiAgICB9XG4gICAgZ2V0IGFjdGl2aXR5VGVtcGxhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBY3Rpdml0eVRlbXBsYXRlO1xuICAgIH1cbiAgICBzZXQgYXVkaW9PdXRwdXRGb3JtYXQoZm9ybWF0KSB7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvT3V0cHV0Rm9ybWF0ID0gZm9ybWF0O1xuICAgICAgICB0aGlzLnByaXZTeW50aGVzaXNUdXJuLmF1ZGlvT3V0cHV0Rm9ybWF0ID0gZm9ybWF0O1xuICAgICAgICBpZiAodGhpcy5wcml2U2Vzc2lvbkF1ZGlvRGVzdGluYXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2U2Vzc2lvbkF1ZGlvRGVzdGluYXRpb24uZm9ybWF0ID0gZm9ybWF0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN5bnRoZXNpc0NvbnRleHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5zeW50aGVzaXNDb250ZXh0LmF1ZGlvT3V0cHV0Rm9ybWF0ID0gZm9ybWF0O1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBhZGRIZWFkZXIoYXVkaW8sIGZvcm1hdCkge1xuICAgICAgICBpZiAoIWZvcm1hdC5oYXNIZWFkZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBhdWRpbztcbiAgICAgICAgfVxuICAgICAgICBmb3JtYXQudXBkYXRlSGVhZGVyKGF1ZGlvLmJ5dGVMZW5ndGgpO1xuICAgICAgICBjb25zdCB0bXAgPSBuZXcgVWludDhBcnJheShhdWRpby5ieXRlTGVuZ3RoICsgZm9ybWF0LmhlYWRlci5ieXRlTGVuZ3RoKTtcbiAgICAgICAgdG1wLnNldChuZXcgVWludDhBcnJheShmb3JtYXQuaGVhZGVyKSwgMCk7XG4gICAgICAgIHRtcC5zZXQobmV3IFVpbnQ4QXJyYXkoYXVkaW8pLCBmb3JtYXQuaGVhZGVyLmJ5dGVMZW5ndGgpO1xuICAgICAgICByZXR1cm4gdG1wLmJ1ZmZlcjtcbiAgICB9XG4gICAgaXNEaXNwb3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklzRGlzcG9zZWQ7XG4gICAgfVxuICAgIGRpc3Bvc2UocmVhc29uKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZTZXNzaW9uQXVkaW9EZXN0aW5hdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U2Vzc2lvbkF1ZGlvRGVzdGluYXRpb24uY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2U7XG4gICAgICAgICAgICAgICAgeWllbGQgY29ubmVjdGlvbi5kaXNwb3NlKHJlYXNvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgeWllbGQgdGhpcy5jb25uZWN0SW1wbCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2VuZE5ldHdvcmtNZXNzYWdlKHBhdGgsIHBheWxvYWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgcGF5bG9hZCA9PT0gXCJzdHJpbmdcIiA/IE1lc3NhZ2VUeXBlLlRleHQgOiBNZXNzYWdlVHlwZS5CaW5hcnk7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50VHlwZSA9IHR5cGVvZiBwYXlsb2FkID09PSBcInN0cmluZ1wiID8gXCJhcHBsaWNhdGlvbi9qc29uXCIgOiBcIlwiO1xuICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHlpZWxkIHRoaXMuZmV0Y2hDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZSh0eXBlLCBwYXRoLCB0aGlzLnByaXZTeW50aGVzaXNUdXJuLnJlcXVlc3RJZCwgY29udGVudFR5cGUsIHBheWxvYWQpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFNwZWFrKHRleHQsIGlzU1NNTCwgcmVxdWVzdElkLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbEJhY2ssIGF1ZGlvRGVzdGluYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGxldCBzc21sO1xuICAgICAgICAgICAgaWYgKGlzU1NNTCkge1xuICAgICAgICAgICAgICAgIHNzbWwgPSB0ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3NtbCA9IHRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyLmJ1aWxkU3NtbCh0ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNwZWFrT3ZlcnJpZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNwZWFrT3ZlcnJpZGUoc3NtbCwgcmVxdWVzdElkLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbEJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrID0gc3VjY2Vzc0NhbGxiYWNrO1xuICAgICAgICAgICAgdGhpcy5wcml2RXJyb3JDYWxsYmFjayA9IGVycm9yQ2FsbEJhY2s7XG4gICAgICAgICAgICB0aGlzLnByaXZTeW50aGVzaXNUdXJuLnN0YXJ0TmV3U3ludGhlc2lzKHJlcXVlc3RJZCwgdGV4dCwgaXNTU01MLCBhdWRpb0Rlc3RpbmF0aW9uKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5jb25uZWN0SW1wbCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuc2VuZFN5bnRoZXNpc0NvbnRleHQoY29ubmVjdGlvbik7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5zZW5kU3NtbE1lc3NhZ2UoY29ubmVjdGlvbiwgc3NtbCwgcmVxdWVzdElkKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzeW50aGVzaXNTdGFydEV2ZW50QXJncyA9IG5ldyBTcGVlY2hTeW50aGVzaXNFdmVudEFyZ3MobmV3IFNwZWVjaFN5bnRoZXNpc1Jlc3VsdChyZXF1ZXN0SWQsIFJlc3VsdFJlYXNvbi5TeW50aGVzaXppbmdBdWRpb1N0YXJ0ZWQpKTtcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplci5zeW50aGVzaXNTdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyLnN5bnRoZXNpc1N0YXJ0ZWQodGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIsIHN5bnRoZXNpc1N0YXJ0RXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdm9pZCB0aGlzLnJlY2VpdmVNZXNzYWdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsU3ludGhlc2lzTG9jYWwoQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBDYW5jZWxsYXRpb25FcnJvckNvZGUuQ29ubmVjdGlvbkZhaWx1cmUsIGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIENhbmNlbHMgc3ludGhlc2lzLlxuICAgIGNhbmNlbFN5bnRoZXNpcyhyZXF1ZXN0SWQsIGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3JDb2RlLCBlcnJvcikge1xuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICBwcm9wZXJ0aWVzLnNldFByb3BlcnR5KENhbmNlbGxhdGlvbkVycm9yQ29kZVByb3BlcnR5TmFtZSwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW2Vycm9yQ29kZV0pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgU3BlZWNoU3ludGhlc2lzUmVzdWx0KHJlcXVlc3RJZCwgUmVzdWx0UmVhc29uLkNhbmNlbGVkLCB1bmRlZmluZWQsIGVycm9yLCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIuU3ludGhlc2lzQ2FuY2VsZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbEV2ZW50ID0gbmV3IFNwZWVjaFN5bnRoZXNpc0V2ZW50QXJncyhyZXN1bHQpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplci5TeW50aGVzaXNDYW5jZWxlZCh0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplciwgY2FuY2VsRXZlbnQpO1xuICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghIXRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF9iKSB7IH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBDYW5jZWxzIHN5bnRoZXNpcy5cbiAgICBjYW5jZWxTeW50aGVzaXNMb2NhbChjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yQ29kZSwgZXJyb3IpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2U3ludGhlc2lzVHVybi5pc1N5bnRoZXNpemluZykge1xuICAgICAgICAgICAgdGhpcy5wcml2U3ludGhlc2lzVHVybi5vblN0b3BTeW50aGVzaXppbmcoKTtcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsU3ludGhlc2lzKHRoaXMucHJpdlN5bnRoZXNpc1R1cm4ucmVxdWVzdElkLCBjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yQ29kZSwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICBwcm9jZXNzVHlwZVNwZWNpZmljTWVzc2FnZXMoY29ubmVjdGlvbk1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJlY2VpdmVNZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uID0geWllbGQgdGhpcy5mZXRjaENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0geWllbGQgY29ubmVjdGlvbi5yZWFkKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVjZWl2ZU1lc3NhZ2VPdmVycmlkZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlY2VpdmVNZXNzYWdlT3ZlcnJpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdklzRGlzcG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UncmUgZG9uZS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBpbmRpY2F0ZXMgd2UgYXJlIGRyYWluaW5nIHRoZSBxdWV1ZSBhbmQgaXQgY2FtZSB3aXRoIG5vIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcml2U3ludGhlc2lzVHVybi5pc1N5bnRoZXNpemluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZU1lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uTWVzc2FnZSA9IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlLmZyb21Db25uZWN0aW9uTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGlvbk1lc3NhZ2UucmVxdWVzdElkLnRvTG93ZXJDYXNlKCkgPT09IHRoaXMucHJpdlN5bnRoZXNpc1R1cm4ucmVxdWVzdElkLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb25uZWN0aW9uTWVzc2FnZS5wYXRoLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0dXJuLnN0YXJ0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3ludGhlc2lzVHVybi5vblNlcnZpY2VUdXJuU3RhcnRSZXNwb25zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJlc3BvbnNlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3ludGhlc2lzVHVybi5vblNlcnZpY2VSZXNwb25zZU1lc3NhZ2UoY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImF1ZGlvXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlN5bnRoZXNpc1R1cm4uc3RyZWFtSWQudG9Mb3dlckNhc2UoKSA9PT0gY29ubmVjdGlvbk1lc3NhZ2Uuc3RyZWFtSWQudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAhIWNvbm5lY3Rpb25NZXNzYWdlLmJpbmFyeUJvZHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3ludGhlc2lzVHVybi5vbkF1ZGlvQ2h1bmtSZWNlaXZlZChjb25uZWN0aW9uTWVzc2FnZS5iaW5hcnlCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIuc3ludGhlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvV2l0aEhlYWRlciA9IFN5bnRoZXNpc0FkYXB0ZXJCYXNlLmFkZEhlYWRlcihjb25uZWN0aW9uTWVzc2FnZS5iaW5hcnlCb2R5LCB0aGlzLnByaXZTeW50aGVzaXNUdXJuLmF1ZGlvT3V0cHV0Rm9ybWF0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBldiA9IG5ldyBTcGVlY2hTeW50aGVzaXNFdmVudEFyZ3MobmV3IFNwZWVjaFN5bnRoZXNpc1Jlc3VsdCh0aGlzLnByaXZTeW50aGVzaXNUdXJuLnJlcXVlc3RJZCwgUmVzdWx0UmVhc29uLlN5bnRoZXNpemluZ0F1ZGlvLCBhdWRpb1dpdGhIZWFkZXIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplci5zeW50aGVzaXppbmcodGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIsIGV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlNlc3Npb25BdWRpb0Rlc3RpbmF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlNlc3Npb25BdWRpb0Rlc3RpbmF0aW9uLndyaXRlKGNvbm5lY3Rpb25NZXNzYWdlLmJpbmFyeUJvZHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImF1ZGlvLm1ldGFkYXRhXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGFMaXN0ID0gU3ludGhlc2lzQXVkaW9NZXRhZGF0YS5mcm9tSlNPTihjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSkuTWV0YWRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBtZXRhZGF0YSBvZiBtZXRhZGF0YUxpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtZXRhZGF0YS5UeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1ldGFkYXRhVHlwZS5Xb3JkQm91bmRhcnk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1ldGFkYXRhVHlwZS5TZW50ZW5jZUJvdW5kYXJ5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc1R1cm4ub25UZXh0Qm91bmRhcnlFdmVudChtZXRhZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29yZEJvdW5kYXJ5RXZlbnRBcmdzID0gbmV3IFNwZWVjaFN5bnRoZXNpc1dvcmRCb3VuZGFyeUV2ZW50QXJncyhtZXRhZGF0YS5EYXRhLk9mZnNldCwgbWV0YWRhdGEuRGF0YS5EdXJhdGlvbiwgbWV0YWRhdGEuRGF0YS50ZXh0LlRleHQsIG1ldGFkYXRhLkRhdGEudGV4dC5MZW5ndGgsIG1ldGFkYXRhLlR5cGUgPT09IE1ldGFkYXRhVHlwZS5Xb3JkQm91bmRhcnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnByaXZTeW50aGVzaXNUdXJuLmN1cnJlbnRUZXh0T2Zmc2V0IDogdGhpcy5wcml2U3ludGhlc2lzVHVybi5jdXJyZW50U2VudGVuY2VPZmZzZXQsIG1ldGFkYXRhLkRhdGEudGV4dC5Cb3VuZGFyeVR5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyLndvcmRCb3VuZGFyeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIud29yZEJvdW5kYXJ5KHRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyLCB3b3JkQm91bmRhcnlFdmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBNZXRhZGF0YVR5cGUuQm9va21hcms6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYm9va21hcmtFdmVudEFyZ3MgPSBuZXcgU3BlZWNoU3ludGhlc2lzQm9va21hcmtFdmVudEFyZ3MobWV0YWRhdGEuRGF0YS5PZmZzZXQsIG1ldGFkYXRhLkRhdGEuQm9va21hcmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyLmJvb2ttYXJrUmVhY2hlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIuYm9va21hcmtSZWFjaGVkKHRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyLCBib29rbWFya0V2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1ldGFkYXRhVHlwZS5WaXNlbWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3ludGhlc2lzVHVybi5vblZpc2VtZU1ldGFkYXRhUmVjZWl2ZWQobWV0YWRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YS5EYXRhLklzTGFzdEFuaW1hdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2aXNlbWVFdmVudEFyZ3MgPSBuZXcgU3BlZWNoU3ludGhlc2lzVmlzZW1lRXZlbnRBcmdzKG1ldGFkYXRhLkRhdGEuT2Zmc2V0LCBtZXRhZGF0YS5EYXRhLlZpc2VtZUlkLCB0aGlzLnByaXZTeW50aGVzaXNUdXJuLmdldEFuZENsZWFyVmlzZW1lQW5pbWF0aW9uKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplci52aXNlbWVSZWNlaXZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplci52aXNlbWVSZWNlaXZlZCh0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplciwgdmlzZW1lRXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1ldGFkYXRhVHlwZS5TZXNzaW9uRW5kOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc1R1cm4ub25TZXNzaW9uRW5kKG1ldGFkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0dXJuLmVuZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc1R1cm4ub25TZXJ2aWNlVHVybkVuZFJlc3BvbnNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0J1ZmZlciA9IHlpZWxkIHRoaXMucHJpdlN5bnRoZXNpc1R1cm4uZ2V0QWxsUmVjZWl2ZWRBdWRpb1dpdGhIZWFkZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFNwZWVjaFN5bnRoZXNpc1Jlc3VsdCh0aGlzLnByaXZTeW50aGVzaXNUdXJuLnJlcXVlc3RJZCwgUmVzdWx0UmVhc29uLlN5bnRoZXNpemluZ0F1ZGlvQ29tcGxldGVkLCBhdWRpb0J1ZmZlciwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRoaXMucHJpdlN5bnRoZXNpc1R1cm4uYXVkaW9EdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkVycm9yQ2FsbGJhY2soZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplci5zeW50aGVzaXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyLnN5bnRoZXNpc0NvbXBsZXRlZCh0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplciwgbmV3IFNwZWVjaFN5bnRoZXNpc0V2ZW50QXJncyhyZXN1bHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJvY2Vzc1R5cGVTcGVjaWZpY01lc3NhZ2VzKGNvbm5lY3Rpb25NZXNzYWdlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBoZXJlIGFyZSBzb21lIG1lc3NhZ2VzIHRoYXQgdGhlIGRlcml2ZWQgY2xhc3MgaGFzIG5vdCBwcm9jZXNzZWQsIGRpc3BhdGNoIHRoZW0gdG8gY29ubmVjdCBjbGFzc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTZXJ2aWNlRXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlcnZpY2VFdmVudHMub25FdmVudChuZXcgU2VydmljZUV2ZW50KGNvbm5lY3Rpb25NZXNzYWdlLnBhdGgudG9Mb3dlckNhc2UoKSwgY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWNlaXZlTWVzc2FnZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBXaGF0IGdvZXMgaGVyZT9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNlbmRTeW50aGVzaXNDb250ZXh0KGNvbm5lY3Rpb24pIHtcbiAgICAgICAgY29uc3Qgc3ludGhlc2lzQ29udGV4dEpzb24gPSB0aGlzLnN5bnRoZXNpc0NvbnRleHQudG9KU09OKCk7XG4gICAgICAgIGlmIChzeW50aGVzaXNDb250ZXh0SnNvbikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24uc2VuZChuZXcgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UoTWVzc2FnZVR5cGUuVGV4dCwgXCJzeW50aGVzaXMuY29udGV4dFwiLCB0aGlzLnByaXZTeW50aGVzaXNUdXJuLnJlcXVlc3RJZCwgXCJhcHBsaWNhdGlvbi9qc29uXCIsIHN5bnRoZXNpc0NvbnRleHRKc29uKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25uZWN0SW1wbChpc1VuQXV0aG9yaXplZCA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZSAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UudGhlbigoY29ubmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uLnN0YXRlKCkgPT09IENvbm5lY3Rpb25TdGF0ZS5EaXNjb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbklkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0SW1wbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2U7XG4gICAgICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbklkID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdEltcGwoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25JZCA9IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2U3ludGhlc2lzVHVybi5vblByZUNvbm5lY3Rpb25TdGFydCh0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkKTtcbiAgICAgICAgY29uc3QgYXV0aFByb21pc2UgPSBpc1VuQXV0aG9yaXplZCA/IHRoaXMucHJpdkF1dGhlbnRpY2F0aW9uLmZldGNoT25FeHBpcnkodGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCkgOiB0aGlzLnByaXZBdXRoZW50aWNhdGlvbi5mZXRjaCh0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkKTtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UgPSBhdXRoUHJvbWlzZS50aGVuKChyZXN1bHQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc1R1cm4ub25BdXRoQ29tcGxldGVkKGZhbHNlKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB0aGlzLnByaXZDb25uZWN0aW9uRmFjdG9yeS5jcmVhdGUodGhpcy5wcml2U3ludGhlc2l6ZXJDb25maWcsIHJlc3VsdCwgdGhpcy5wcml2Q29ubmVjdGlvbklkKTtcbiAgICAgICAgICAgIC8vIEF0dGFjaCB0byB0aGUgdW5kZXJseWluZyBldmVudC4gTm8gbmVlZCB0byBob2xkIG9udG8gdGhlIGRldGFjaCBwb2ludGVycyBhcyBpbiB0aGUgZXZlbnQgdGhlIGNvbm5lY3Rpb24gZ29lcyBhd2F5LFxuICAgICAgICAgICAgLy8gaXQnbGwgc3RvcCBzZW5kaW5nIGV2ZW50cy5cbiAgICAgICAgICAgIGNvbm5lY3Rpb24uZXZlbnRzLmF0dGFjaCgoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25FdmVudHMub25FdmVudChldmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgY29ubmVjdGlvbi5vcGVuKCk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3ludGhlc2lzVHVybi5vbkNvbm5lY3Rpb25Fc3RhYmxpc2hDb21wbGV0ZWQocmVzcG9uc2Uuc3RhdHVzQ29kZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjb25uZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDQwMyAmJiAhaXNVbkF1dGhvcml6ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0SW1wbCh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc1R1cm4ub25Db25uZWN0aW9uRXN0YWJsaXNoQ29tcGxldGVkKHJlc3BvbnNlLnN0YXR1c0NvZGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgVW5hYmxlIHRvIGNvbnRhY3Qgc2VydmVyLiBTdGF0dXNDb2RlOiAke3Jlc3BvbnNlLnN0YXR1c0NvZGV9LCAke3RoaXMucHJpdlN5bnRoZXNpemVyQ29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCl9IFJlYXNvbjogJHtyZXNwb25zZS5yZWFzb259YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc1R1cm4ub25BdXRoQ29tcGxldGVkKHRydWUpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEF0dGFjaCBhbiBlbXB0eSBoYW5kbGVyIHRvIGFsbG93IHRoZSBwcm9taXNlIHRvIHJ1biBpbiB0aGUgYmFja2dyb3VuZCB3aGlsZVxuICAgICAgICAvLyBvdGhlciBzdGFydHVwIGV2ZW50cyBoYXBwZW4uIEl0J2xsIGV2ZW50dWFsbHkgYmUgYXdhaXRlZCBvbi5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2U7XG4gICAgfVxuICAgIHNlbmRTcGVlY2hTZXJ2aWNlQ29uZmlnKGNvbm5lY3Rpb24sIFNwZWVjaFNlcnZpY2VDb25maWdKc29uKSB7XG4gICAgICAgIGlmIChTcGVlY2hTZXJ2aWNlQ29uZmlnSnNvbikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24uc2VuZChuZXcgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UoTWVzc2FnZVR5cGUuVGV4dCwgXCJzcGVlY2guY29uZmlnXCIsIHRoaXMucHJpdlN5bnRoZXNpc1R1cm4ucmVxdWVzdElkLCBcImFwcGxpY2F0aW9uL2pzb25cIiwgU3BlZWNoU2VydmljZUNvbmZpZ0pzb24pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZW5kU3NtbE1lc3NhZ2UoY29ubmVjdGlvbiwgc3NtbCwgcmVxdWVzdElkKSB7XG4gICAgICAgIHJldHVybiBjb25uZWN0aW9uLnNlbmQobmV3IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlKE1lc3NhZ2VUeXBlLlRleHQsIFwic3NtbFwiLCByZXF1ZXN0SWQsIFwiYXBwbGljYXRpb24vc3NtbCt4bWxcIiwgc3NtbCkpO1xuICAgIH1cbiAgICBmZXRjaENvbm5lY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlLnRoZW4oKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24uc3RhdGUoKSA9PT0gQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbklkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWd1cmF0aW9uUHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2U7XG4gICAgICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlID0gdGhpcy5jb25maWd1cmVDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gVGFrZXMgYW4gZXN0YWJsaXNoZWQgd2Vic29ja2V0IGNvbm5lY3Rpb24gdG8gdGhlIGVuZHBvaW50IGFuZCBzZW5kcyBzcGVlY2ggY29uZmlndXJhdGlvbiBpbmZvcm1hdGlvbi5cbiAgICBjb25maWd1cmVDb25uZWN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHlpZWxkIHRoaXMuY29ubmVjdEltcGwoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ0Nvbm5lY3Rpb25PdmVycmlkZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnQ29ubmVjdGlvbk92ZXJyaWRlKGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgdGhpcy5zZW5kU3BlZWNoU2VydmljZUNvbmZpZyhjb25uZWN0aW9uLCB0aGlzLnByaXZTeW50aGVzaXplckNvbmZpZy5TcGVlY2hTZXJ2aWNlQ29uZmlnLnNlcmlhbGl6ZSgpKTtcbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5TeW50aGVzaXNBZGFwdGVyQmFzZS50ZWxlbWV0cnlEYXRhRW5hYmxlZCA9IHRydWU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN5bnRoZXNpc0FkYXB0ZXJCYXNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBQcm9wZXJ0eUlkIH0gZnJvbSBcIi4uL3Nkay9FeHBvcnRzXCI7XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIEpTT04gdXNlZCBpbiB0aGUgc3ludGhlc2lzLmNvbnRleHQgbWVzc2FnZSBzZW50IHRvIHRoZSBzcGVlY2ggc2VydmljZS5cbiAqIFRoZSBkeW5hbWljIGdyYW1tYXIgaXMgYWx3YXlzIHJlZnJlc2hlZCBmcm9tIHRoZSBlbmNhcHN1bGF0ZWQgZHluYW1pYyBncmFtbWFyIG9iamVjdC5cbiAqL1xuZXhwb3J0IGNsYXNzIFN5bnRoZXNpc0NvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKHNwZWVjaFN5bnRoZXNpemVyKSB7XG4gICAgICAgIHRoaXMucHJpdkNvbnRleHQgPSB7fTtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIgPSBzcGVlY2hTeW50aGVzaXplcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIHNlY3Rpb24gdG8gdGhlIHN5bnRoZXNpcy5jb250ZXh0IG9iamVjdC5cbiAgICAgKiBAcGFyYW0gc2VjdGlvbk5hbWUgTmFtZSBvZiB0aGUgc2VjdGlvbiB0byBhZGQuXG4gICAgICogQHBhcmFtIHZhbHVlIEpTT04gc2VyaWFsaXphYmxlIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIHZhbHVlLlxuICAgICAqL1xuICAgIHNldFNlY3Rpb24oc2VjdGlvbk5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpdkNvbnRleHRbc2VjdGlvbk5hbWVdID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGF1ZGlvIG91dHB1dCBmb3JtYXQgZm9yIHN5bnRoZXNpcyBjb250ZXh0IGdlbmVyYXRpb24uXG4gICAgICogQHBhcmFtIGZvcm1hdCB7QXVkaW9PdXRwdXRGb3JtYXRJbXBsfSB0aGUgb3V0cHV0IGZvcm1hdFxuICAgICAqL1xuICAgIHNldCBhdWRpb091dHB1dEZvcm1hdChmb3JtYXQpIHtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9PdXRwdXRGb3JtYXQgPSBmb3JtYXQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3Qgc3ludGhlc2lzU2VjdGlvbiA9IHRoaXMuYnVpbGRTeW50aGVzaXNDb250ZXh0KCk7XG4gICAgICAgIHRoaXMuc2V0U2VjdGlvbihcInN5bnRoZXNpc1wiLCBzeW50aGVzaXNTZWN0aW9uKTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMucHJpdkNvbnRleHQpO1xuICAgIH1cbiAgICBidWlsZFN5bnRoZXNpc0NvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhdWRpbzoge1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICBib29rbWFya0VuYWJsZWQ6ICghIXRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyLmJvb2ttYXJrUmVhY2hlZCksXG4gICAgICAgICAgICAgICAgICAgIHB1bmN0dWF0aW9uQm91bmRhcnlFbmFibGVkOiB0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplci5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RQdW5jdHVhdGlvbkJvdW5kYXJ5LCAoISF0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplci53b3JkQm91bmRhcnkpKSxcbiAgICAgICAgICAgICAgICAgICAgc2VudGVuY2VCb3VuZGFyeUVuYWJsZWQ6IHRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFNlbnRlbmNlQm91bmRhcnksIGZhbHNlKSxcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbkVuZEVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZpc2VtZUVuYWJsZWQ6ICghIXRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyLnZpc2VtZVJlY2VpdmVkKSxcbiAgICAgICAgICAgICAgICAgICAgd29yZEJvdW5kYXJ5RW5hYmxlZDogdGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0V29yZEJvdW5kYXJ5LCAoISF0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplci53b3JkQm91bmRhcnkpKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG91dHB1dEZvcm1hdDogdGhpcy5wcml2QXVkaW9PdXRwdXRGb3JtYXQucmVxdWVzdEF1ZGlvRm9ybWF0U3RyaW5nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxhbmd1YWdlOiB7XG4gICAgICAgICAgICAgICAgYXV0b0RldGVjdGlvbjogdGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIuYXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TeW50aGVzaXNDb250ZXh0LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtY2xhc3Nlcy1wZXItZmlsZSAqL1xuaW1wb3J0IHsgRXZlbnRUeXBlLCBQbGF0Zm9ybUV2ZW50IH0gZnJvbSBcIi4uL2NvbW1vbi9FeHBvcnRzXCI7XG5leHBvcnQgY2xhc3MgU3BlZWNoU3ludGhlc2lzRXZlbnQgZXh0ZW5kcyBQbGF0Zm9ybUV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihldmVudE5hbWUsIHJlcXVlc3RJZCwgZXZlbnRUeXBlID0gRXZlbnRUeXBlLkluZm8pIHtcbiAgICAgICAgc3VwZXIoZXZlbnROYW1lLCBldmVudFR5cGUpO1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0SWQgPSByZXF1ZXN0SWQ7XG4gICAgfVxuICAgIGdldCByZXF1ZXN0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZXF1ZXN0SWQ7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFN5bnRoZXNpc1RyaWdnZXJlZEV2ZW50IGV4dGVuZHMgU3BlZWNoU3ludGhlc2lzRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKHJlcXVlc3RJZCwgc2Vzc2lvbkF1ZGlvRGVzdGluYXRpb25JZCwgdHVybkF1ZGlvRGVzdGluYXRpb25JZCkge1xuICAgICAgICBzdXBlcihcIlN5bnRoZXNpc1RyaWdnZXJlZEV2ZW50XCIsIHJlcXVlc3RJZCk7XG4gICAgICAgIHRoaXMucHJpdlNlc3Npb25BdWRpb0Rlc3RpbmF0aW9uSWQgPSBzZXNzaW9uQXVkaW9EZXN0aW5hdGlvbklkO1xuICAgICAgICB0aGlzLnByaXZUdXJuQXVkaW9EZXN0aW5hdGlvbklkID0gdHVybkF1ZGlvRGVzdGluYXRpb25JZDtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvU2Vzc2lvbkRlc3RpbmF0aW9uSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTZXNzaW9uQXVkaW9EZXN0aW5hdGlvbklkO1xuICAgIH1cbiAgICBnZXQgYXVkaW9UdXJuRGVzdGluYXRpb25JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlR1cm5BdWRpb0Rlc3RpbmF0aW9uSWQ7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENvbm5lY3RpbmdUb1N5bnRoZXNpc1NlcnZpY2VFdmVudCBleHRlbmRzIFNwZWVjaFN5bnRoZXNpc0V2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihyZXF1ZXN0SWQsIGF1dGhGZXRjaEV2ZW50SWQpIHtcbiAgICAgICAgc3VwZXIoXCJDb25uZWN0aW5nVG9TeW50aGVzaXNTZXJ2aWNlRXZlbnRcIiwgcmVxdWVzdElkKTtcbiAgICAgICAgdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCA9IGF1dGhGZXRjaEV2ZW50SWQ7XG4gICAgfVxuICAgIGdldCBhdXRoRmV0Y2hFdmVudElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgU3ludGhlc2lzU3RhcnRlZEV2ZW50IGV4dGVuZHMgU3BlZWNoU3ludGhlc2lzRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKHJlcXVlc3RJZCwgYXV0aEZldGNoRXZlbnRJZCkge1xuICAgICAgICBzdXBlcihcIlN5bnRoZXNpc1N0YXJ0ZWRFdmVudFwiLCByZXF1ZXN0SWQpO1xuICAgICAgICB0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkID0gYXV0aEZldGNoRXZlbnRJZDtcbiAgICB9XG4gICAgZ2V0IGF1dGhGZXRjaEV2ZW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ludGhlc2lzRXZlbnRzLmpzLm1hcFxuIiwiaW1wb3J0IHsgUmVzdENvbmZpZ0Jhc2UsIFJlc3RNZXNzYWdlQWRhcHRlciwgUmVzdFJlcXVlc3RUeXBlLCB9IGZyb20gXCIuLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUlkLCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29ubmVjdGlvbkZhY3RvcnlCYXNlIH0gZnJvbSBcIi4vQ29ubmVjdGlvbkZhY3RvcnlCYXNlXCI7XG5pbXBvcnQgeyBIZWFkZXJOYW1lcyB9IGZyb20gXCIuL0hlYWRlck5hbWVzXCI7XG4vKipcbiAqIEltcGxlbWVudHMgbWV0aG9kcyBmb3Igc3BlYWtlciByZWNvZ25pdGlvbiBjbGFzc2VzLCBzZW5kaW5nIHJlcXVlc3RzIHRvIGVuZHBvaW50XG4gKiBhbmQgcGFyc2luZyByZXNwb25zZSBpbnRvIGV4cGVjdGVkIGZvcm1hdFxuICogQGNsYXNzIFN5bnRoZXNpc1Jlc3RBZGFwdGVyXG4gKi9cbmV4cG9ydCBjbGFzcyBTeW50aGVzaXNSZXN0QWRhcHRlciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBhdXRoZW50aWNhdGlvbikge1xuICAgICAgICBsZXQgZW5kcG9pbnQgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50LCB1bmRlZmluZWQpO1xuICAgICAgICBpZiAoIWVuZHBvaW50KSB7XG4gICAgICAgICAgICBjb25zdCByZWdpb24gPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbiwgXCJ3ZXN0dXNcIik7XG4gICAgICAgICAgICBjb25zdCBob3N0U3VmZml4ID0gQ29ubmVjdGlvbkZhY3RvcnlCYXNlLmdldEhvc3RTdWZmaXgocmVnaW9uKTtcbiAgICAgICAgICAgIGVuZHBvaW50ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Ib3N0LCBgaHR0cHM6Ly8ke3JlZ2lvbn0udHRzLnNwZWVjaCR7aG9zdFN1ZmZpeH1gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZVcmkgPSBgJHtlbmRwb2ludH0vY29nbml0aXZlc2VydmljZXMvdm9pY2VzL2xpc3RgO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gUmVzdENvbmZpZ0Jhc2UucmVxdWVzdE9wdGlvbnM7XG4gICAgICAgIHRoaXMucHJpdlJlc3RBZGFwdGVyID0gbmV3IFJlc3RNZXNzYWdlQWRhcHRlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy5wcml2QXV0aGVudGljYXRpb24gPSBhdXRoZW50aWNhdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgbGlzdCB2b2ljZXMgcmVxdWVzdCB0byBlbmRwb2ludC5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNvbm5lY3Rpb25JZCAtIGd1aWQgZm9yIGNvbm5lY3Rpb25JZFxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPElSZXN0UmVzcG9uc2U+fSByZXN0IHJlc3BvbnNlIHRvIHN0YXR1cyByZXF1ZXN0XG4gICAgICovXG4gICAgZ2V0Vm9pY2VzTGlzdChjb25uZWN0aW9uSWQpIHtcbiAgICAgICAgdGhpcy5wcml2UmVzdEFkYXB0ZXIuc2V0SGVhZGVycyhIZWFkZXJOYW1lcy5Db25uZWN0aW9uSWQsIGNvbm5lY3Rpb25JZCk7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdXRoZW50aWNhdGlvbi5mZXRjaChjb25uZWN0aW9uSWQpLnRoZW4oKGF1dGhJbmZvKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXN0QWRhcHRlci5zZXRIZWFkZXJzKGF1dGhJbmZvLmhlYWRlck5hbWUsIGF1dGhJbmZvLnRva2VuKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN0QWRhcHRlci5yZXF1ZXN0KFJlc3RSZXF1ZXN0VHlwZS5HZXQsIHRoaXMucHJpdlVyaSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ludGhlc2lzUmVzdEFkYXB0ZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgY3JlYXRlTm9EYXNoR3VpZCwgRGVmZXJyZWQsIEV2ZW50cyB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtSW1wbCB9IGZyb20gXCIuLi9zZGsvQXVkaW8vQXVkaW9PdXRwdXRTdHJlYW1cIjtcbmltcG9ydCB7IE1ldGFkYXRhVHlwZSB9IGZyb20gXCIuL1NlcnZpY2VNZXNzYWdlcy9TeW50aGVzaXNBdWRpb01ldGFkYXRhXCI7XG5pbXBvcnQgeyBTeW50aGVzaXNBZGFwdGVyQmFzZSB9IGZyb20gXCIuL1N5bnRoZXNpc0FkYXB0ZXJCYXNlXCI7XG5pbXBvcnQgeyBDb25uZWN0aW5nVG9TeW50aGVzaXNTZXJ2aWNlRXZlbnQsIFN5bnRoZXNpc1N0YXJ0ZWRFdmVudCwgU3ludGhlc2lzVHJpZ2dlcmVkRXZlbnQsIH0gZnJvbSBcIi4vU3ludGhlc2lzRXZlbnRzXCI7XG5leHBvcnQgY2xhc3MgU3ludGhlc2lzVHVybiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2SXNTeW50aGVzaXppbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2SXNTeW50aGVzaXNFbmRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZCeXRlc1JlY2VpdmVkID0gMDtcbiAgICAgICAgdGhpcy5wcml2SW5UdXJuID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdlRleHRPZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnByaXZOZXh0U2VhcmNoVGV4dEluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5wcml2U2VudGVuY2VPZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnByaXZOZXh0U2VhcmNoU2VudGVuY2VJbmRleCA9IDA7XG4gICAgICAgIHRoaXMucHJpdlJlcXVlc3RJZCA9IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2VHVybkRlZmVycmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIC8vIFdlJ3JlIG5vdCBpbiBhIHR1cm4sIHNvIHJlc29sdmUuXG4gICAgICAgIHRoaXMucHJpdlR1cm5EZWZlcnJhbC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldCByZXF1ZXN0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZXF1ZXN0SWQ7XG4gICAgfVxuICAgIGdldCBzdHJlYW1JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlN0cmVhbUlkO1xuICAgIH1cbiAgICBzZXQgc3RyZWFtSWQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtSWQgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvT3V0cHV0Rm9ybWF0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9PdXRwdXRGb3JtYXQ7XG4gICAgfVxuICAgIHNldCBhdWRpb091dHB1dEZvcm1hdChmb3JtYXQpIHtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9PdXRwdXRGb3JtYXQgPSBmb3JtYXQ7XG4gICAgfVxuICAgIGdldCB0dXJuQ29tcGxldGlvblByb21pc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUdXJuRGVmZXJyYWwucHJvbWlzZTtcbiAgICB9XG4gICAgZ2V0IGlzU3ludGhlc2lzRW5kZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc1N5bnRoZXNpc0VuZGVkO1xuICAgIH1cbiAgICBnZXQgaXNTeW50aGVzaXppbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc1N5bnRoZXNpemluZztcbiAgICB9XG4gICAgZ2V0IGN1cnJlbnRUZXh0T2Zmc2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VGV4dE9mZnNldDtcbiAgICB9XG4gICAgZ2V0IGN1cnJlbnRTZW50ZW5jZU9mZnNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNlbnRlbmNlT2Zmc2V0O1xuICAgIH1cbiAgICAvLyBUaGUgbnVtYmVyIG9mIGJ5dGVzIHJlY2VpdmVkIGZvciBjdXJyZW50IHR1cm5cbiAgICBnZXQgYnl0ZXNSZWNlaXZlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkJ5dGVzUmVjZWl2ZWQ7XG4gICAgfVxuICAgIGdldCBhdWRpb0R1cmF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9EdXJhdGlvbjtcbiAgICB9XG4gICAgZ2V0QWxsUmVjZWl2ZWRBdWRpbygpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlJlY2VpdmVkQXVkaW8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMucHJpdlJlY2VpdmVkQXVkaW8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZJc1N5bnRoZXNpc0VuZGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnJlYWRBbGxBdWRpb0Zyb21TdHJlYW0oKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5wcml2UmVjZWl2ZWRBdWRpbyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRBbGxSZWNlaXZlZEF1ZGlvV2l0aEhlYWRlcigpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlJlY2VpdmVkQXVkaW9XaXRoSGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlY2VpdmVkQXVkaW9XaXRoSGVhZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZJc1N5bnRoZXNpc0VuZGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hdWRpb091dHB1dEZvcm1hdC5oYXNIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpbyA9IHlpZWxkIHRoaXMuZ2V0QWxsUmVjZWl2ZWRBdWRpbygpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY2VpdmVkQXVkaW9XaXRoSGVhZGVyID0gU3ludGhlc2lzQWRhcHRlckJhc2UuYWRkSGVhZGVyKGF1ZGlvLCB0aGlzLmF1ZGlvT3V0cHV0Rm9ybWF0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVjZWl2ZWRBdWRpb1dpdGhIZWFkZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRBbGxSZWNlaXZlZEF1ZGlvKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGFydE5ld1N5bnRoZXNpcyhyZXF1ZXN0SWQsIHJhd1RleHQsIGlzU1NNTCwgYXVkaW9EZXN0aW5hdGlvbikge1xuICAgICAgICB0aGlzLnByaXZJc1N5bnRoZXNpc0VuZGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdklzU3ludGhlc2l6aW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wcml2UmVxdWVzdElkID0gcmVxdWVzdElkO1xuICAgICAgICB0aGlzLnByaXZSYXdUZXh0ID0gcmF3VGV4dDtcbiAgICAgICAgdGhpcy5wcml2SXNTU01MID0gaXNTU01MO1xuICAgICAgICB0aGlzLnByaXZBdWRpb091dHB1dFN0cmVhbSA9IG5ldyBQdWxsQXVkaW9PdXRwdXRTdHJlYW1JbXBsKCk7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvT3V0cHV0U3RyZWFtLmZvcm1hdCA9IHRoaXMucHJpdkF1ZGlvT3V0cHV0Rm9ybWF0O1xuICAgICAgICB0aGlzLnByaXZSZWNlaXZlZEF1ZGlvID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcml2UmVjZWl2ZWRBdWRpb1dpdGhIZWFkZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnByaXZCeXRlc1JlY2VpdmVkID0gMDtcbiAgICAgICAgdGhpcy5wcml2VGV4dE9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMucHJpdk5leHRTZWFyY2hUZXh0SW5kZXggPSAwO1xuICAgICAgICB0aGlzLnByaXZTZW50ZW5jZU9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMucHJpdk5leHRTZWFyY2hTZW50ZW5jZUluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5wcml2UGFydGlhbFZpc2VtZUFuaW1hdGlvbiA9IFwiXCI7XG4gICAgICAgIGlmIChhdWRpb0Rlc3RpbmF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlR1cm5BdWRpb0Rlc3RpbmF0aW9uID0gYXVkaW9EZXN0aW5hdGlvbjtcbiAgICAgICAgICAgIHRoaXMucHJpdlR1cm5BdWRpb0Rlc3RpbmF0aW9uLmZvcm1hdCA9IHRoaXMucHJpdkF1ZGlvT3V0cHV0Rm9ybWF0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25FdmVudChuZXcgU3ludGhlc2lzVHJpZ2dlcmVkRXZlbnQodGhpcy5yZXF1ZXN0SWQsIHVuZGVmaW5lZCwgYXVkaW9EZXN0aW5hdGlvbiA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogYXVkaW9EZXN0aW5hdGlvbi5pZCgpKSk7XG4gICAgfVxuICAgIG9uUHJlQ29ubmVjdGlvblN0YXJ0KGF1dGhGZXRjaEV2ZW50SWQpIHtcbiAgICAgICAgdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCA9IGF1dGhGZXRjaEV2ZW50SWQ7XG4gICAgICAgIHRoaXMub25FdmVudChuZXcgQ29ubmVjdGluZ1RvU3ludGhlc2lzU2VydmljZUV2ZW50KHRoaXMucHJpdlJlcXVlc3RJZCwgdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCkpO1xuICAgIH1cbiAgICBvbkF1dGhDb21wbGV0ZWQoaXNFcnJvcikge1xuICAgICAgICBpZiAoaXNFcnJvcikge1xuICAgICAgICAgICAgdGhpcy5vbkNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25Db25uZWN0aW9uRXN0YWJsaXNoQ29tcGxldGVkKHN0YXR1c0NvZGUpIHtcbiAgICAgICAgaWYgKHN0YXR1c0NvZGUgPT09IDIwMCkge1xuICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBTeW50aGVzaXNTdGFydGVkRXZlbnQodGhpcy5yZXF1ZXN0SWQsIHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQpKTtcbiAgICAgICAgICAgIHRoaXMucHJpdkJ5dGVzUmVjZWl2ZWQgPSAwO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgdGhpcy5vbkNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25TZXJ2aWNlUmVzcG9uc2VNZXNzYWdlKHJlc3BvbnNlSnNvbikge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IEpTT04ucGFyc2UocmVzcG9uc2VKc29uKTtcbiAgICAgICAgdGhpcy5zdHJlYW1JZCA9IHJlc3BvbnNlLmF1ZGlvLnN0cmVhbUlkO1xuICAgIH1cbiAgICBvblNlcnZpY2VUdXJuRW5kUmVzcG9uc2UoKSB7XG4gICAgICAgIHRoaXMucHJpdkluVHVybiA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZUdXJuRGVmZXJyYWwucmVzb2x2ZSgpO1xuICAgICAgICB0aGlzLm9uQ29tcGxldGUoKTtcbiAgICB9XG4gICAgb25TZXJ2aWNlVHVyblN0YXJ0UmVzcG9uc2UoKSB7XG4gICAgICAgIGlmICghIXRoaXMucHJpdlR1cm5EZWZlcnJhbCAmJiAhIXRoaXMucHJpdkluVHVybikge1xuICAgICAgICAgICAgLy8gV2hhdD8gSG93IGFyZSB3ZSBzdGFydGluZyBhIHR1cm4gd2l0aCBhbm90aGVyIG5vdCBkb25lP1xuICAgICAgICAgICAgdGhpcy5wcml2VHVybkRlZmVycmFsLnJlamVjdChcIkFub3RoZXIgdHVybiBzdGFydGVkIGJlZm9yZSBjdXJyZW50IGNvbXBsZXRlZC5cIik7XG4gICAgICAgICAgICAvLyBBdm9pZCBVbmhhbmRsZWRQcm9taXNlUmVqZWN0aW9uIGlmIHByaXZUdXJuRGVmZXJyYWwgaXMgbm90IGJlaW5nIGF3YWl0ZWRcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgICAgICAgICAgIHRoaXMucHJpdlR1cm5EZWZlcnJhbC5wcm9taXNlLnRoZW4oKS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdkluVHVybiA9IHRydWU7XG4gICAgICAgIHRoaXMucHJpdlR1cm5EZWZlcnJhbCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgIH1cbiAgICBvbkF1ZGlvQ2h1bmtSZWNlaXZlZChkYXRhKSB7XG4gICAgICAgIGlmICh0aGlzLmlzU3ludGhlc2l6aW5nKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZBdWRpb091dHB1dFN0cmVhbS53cml0ZShkYXRhKTtcbiAgICAgICAgICAgIHRoaXMucHJpdkJ5dGVzUmVjZWl2ZWQgKz0gZGF0YS5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdlR1cm5BdWRpb0Rlc3RpbmF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZUdXJuQXVkaW9EZXN0aW5hdGlvbi53cml0ZShkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBvblRleHRCb3VuZGFyeUV2ZW50KG1ldGFkYXRhKSB7XG4gICAgICAgIHRoaXMudXBkYXRlVGV4dE9mZnNldChtZXRhZGF0YS5EYXRhLnRleHQuVGV4dCwgbWV0YWRhdGEuVHlwZSk7XG4gICAgfVxuICAgIG9uVmlzZW1lTWV0YWRhdGFSZWNlaXZlZChtZXRhZGF0YSkge1xuICAgICAgICBpZiAobWV0YWRhdGEuRGF0YS5BbmltYXRpb25DaHVuayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZQYXJ0aWFsVmlzZW1lQW5pbWF0aW9uICs9IG1ldGFkYXRhLkRhdGEuQW5pbWF0aW9uQ2h1bms7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25TZXNzaW9uRW5kKG1ldGFkYXRhKSB7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvRHVyYXRpb24gPSBtZXRhZGF0YS5EYXRhLk9mZnNldDtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnByaXZJc0Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICAvLyB3ZSBzaG91bGQgaGF2ZSBjb21wbGV0ZWQgYnkgbm93LiBJZiB3ZSBkaWQgbm90IGl0cyBhbiB1bmtub3duIGVycm9yLlxuICAgICAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25TdG9wU3ludGhlc2l6aW5nKCkge1xuICAgICAgICB0aGlzLm9uQ29tcGxldGUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgdmlzZW1lIGFuaW1hdGlvbiBzdHJpbmcgKG1lcmdlZCBmcm9tIGFuaW1hdGlvbiBjaHVuayksIGFuZCBjbGVhcnMgdGhlIGludGVybmFsXG4gICAgICogcGFydGlhbCBhbmltYXRpb24uXG4gICAgICovXG4gICAgZ2V0QW5kQ2xlYXJWaXNlbWVBbmltYXRpb24oKSB7XG4gICAgICAgIGNvbnN0IGFuaW1hdGlvbiA9IHRoaXMucHJpdlBhcnRpYWxWaXNlbWVBbmltYXRpb247XG4gICAgICAgIHRoaXMucHJpdlBhcnRpYWxWaXNlbWVBbmltYXRpb24gPSBcIlwiO1xuICAgICAgICByZXR1cm4gYW5pbWF0aW9uO1xuICAgIH1cbiAgICBvbkV2ZW50KGV2ZW50KSB7XG4gICAgICAgIEV2ZW50cy5pbnN0YW5jZS5vbkV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgdGhlIHRleHQgaXMgYW4gWE1MKFNTTUwpIHRhZ1xuICAgICAqIEBwYXJhbSB0ZXh0XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBzdGF0aWMgaXNYbWxUYWcodGV4dCkge1xuICAgICAgICByZXR1cm4gdGV4dC5sZW5ndGggPj0gMiAmJiB0ZXh0WzBdID09PSBcIjxcIiAmJiB0ZXh0W3RleHQubGVuZ3RoIC0gMV0gPT09IFwiPlwiO1xuICAgIH1cbiAgICB1cGRhdGVUZXh0T2Zmc2V0KHRleHQsIHR5cGUpIHtcbiAgICAgICAgaWYgKHR5cGUgPT09IE1ldGFkYXRhVHlwZS5Xb3JkQm91bmRhcnkpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlRleHRPZmZzZXQgPSB0aGlzLnByaXZSYXdUZXh0LmluZGV4T2YodGV4dCwgdGhpcy5wcml2TmV4dFNlYXJjaFRleHRJbmRleCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2VGV4dE9mZnNldCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TmV4dFNlYXJjaFRleHRJbmRleCA9IHRoaXMucHJpdlRleHRPZmZzZXQgKyB0ZXh0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2SXNTU01MKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndpdGhpblhtbFRhZyh0aGlzLnByaXZUZXh0T2Zmc2V0KSAmJiAhU3ludGhlc2lzVHVybi5pc1htbFRhZyh0ZXh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUZXh0T2Zmc2V0KHRleHQsIHR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2U2VudGVuY2VPZmZzZXQgPSB0aGlzLnByaXZSYXdUZXh0LmluZGV4T2YodGV4dCwgdGhpcy5wcml2TmV4dFNlYXJjaFNlbnRlbmNlSW5kZXgpO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdlNlbnRlbmNlT2Zmc2V0ID49IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZOZXh0U2VhcmNoU2VudGVuY2VJbmRleCA9IHRoaXMucHJpdlNlbnRlbmNlT2Zmc2V0ICsgdGV4dC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdklzU1NNTCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53aXRoaW5YbWxUYWcodGhpcy5wcml2U2VudGVuY2VPZmZzZXQpICYmICFTeW50aGVzaXNUdXJuLmlzWG1sVGFnKHRleHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRleHRPZmZzZXQodGV4dCwgdHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25Db21wbGV0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdklzU3ludGhlc2l6aW5nKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZJc1N5bnRoZXNpemluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wcml2SXNTeW50aGVzaXNFbmRlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnByaXZBdWRpb091dHB1dFN0cmVhbS5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5wcml2SW5UdXJuID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2VHVybkF1ZGlvRGVzdGluYXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlR1cm5BdWRpb0Rlc3RpbmF0aW9uLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2VHVybkF1ZGlvRGVzdGluYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVhZEFsbEF1ZGlvRnJvbVN0cmVhbSgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZJc1N5bnRoZXNpc0VuZGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjZWl2ZWRBdWRpbyA9IG5ldyBBcnJheUJ1ZmZlcih0aGlzLmJ5dGVzUmVjZWl2ZWQpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdkF1ZGlvT3V0cHV0U3RyZWFtLnJlYWQodGhpcy5wcml2UmVjZWl2ZWRBdWRpbyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY2VpdmVkQXVkaW8gPSBuZXcgQXJyYXlCdWZmZXIoMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgY3VycmVudCBpZHggaXMgaW4gWE1MKFNTTUwpIHRhZ1xuICAgICAqIEBwYXJhbSBpZHhcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHdpdGhpblhtbFRhZyhpZHgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJhd1RleHQuaW5kZXhPZihcIjxcIiwgaWR4ICsgMSkgPiB0aGlzLnByaXZSYXdUZXh0LmluZGV4T2YoXCI+XCIsIGlkeCArIDEpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ludGhlc2lzVHVybi5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQ29udGV4dCwgU3BlZWNoU2VydmljZUNvbmZpZyB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbmV4cG9ydCB2YXIgU3ludGhlc2lzU2VydmljZVR5cGU7XG4oZnVuY3Rpb24gKFN5bnRoZXNpc1NlcnZpY2VUeXBlKSB7XG4gICAgU3ludGhlc2lzU2VydmljZVR5cGVbU3ludGhlc2lzU2VydmljZVR5cGVbXCJTdGFuZGFyZFwiXSA9IDBdID0gXCJTdGFuZGFyZFwiO1xuICAgIFN5bnRoZXNpc1NlcnZpY2VUeXBlW1N5bnRoZXNpc1NlcnZpY2VUeXBlW1wiQ3VzdG9tXCJdID0gMV0gPSBcIkN1c3RvbVwiO1xufSkoU3ludGhlc2lzU2VydmljZVR5cGUgfHwgKFN5bnRoZXNpc1NlcnZpY2VUeXBlID0ge30pKTtcbmV4cG9ydCBjbGFzcyBTeW50aGVzaXplckNvbmZpZyB7XG4gICAgY29uc3RydWN0b3Ioc3BlZWNoU2VydmljZUNvbmZpZywgcGFyYW1ldGVycykge1xuICAgICAgICB0aGlzLnByaXZTeW50aGVzaXNTZXJ2aWNlVHlwZSA9IFN5bnRoZXNpc1NlcnZpY2VUeXBlLlN0YW5kYXJkO1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hTZXJ2aWNlQ29uZmlnID0gc3BlZWNoU2VydmljZUNvbmZpZyA/IHNwZWVjaFNlcnZpY2VDb25maWcgOiBuZXcgU3BlZWNoU2VydmljZUNvbmZpZyhuZXcgQ29udGV4dChudWxsKSk7XG4gICAgICAgIHRoaXMucHJpdlBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzO1xuICAgIH1cbiAgICBnZXQgcGFyYW1ldGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlBhcmFtZXRlcnM7XG4gICAgfVxuICAgIGdldCBzeW50aGVzaXNTZXJ2aWNlVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlN5bnRoZXNpc1NlcnZpY2VUeXBlO1xuICAgIH1cbiAgICBzZXQgc3ludGhlc2lzU2VydmljZVR5cGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wcml2U3ludGhlc2lzU2VydmljZVR5cGUgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IFNwZWVjaFNlcnZpY2VDb25maWcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hTZXJ2aWNlQ29uZmlnO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ludGhlc2l6ZXJDb25maWcuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFByb3h5SW5mbywgV2Vic29ja2V0Q29ubmVjdGlvbiwgfSBmcm9tIFwiLi4vY29tbW9uLmJyb3dzZXIvRXhwb3J0c1wiO1xuaW1wb3J0IHsgT3V0cHV0Rm9ybWF0LCBQcm9wZXJ0eUlkIH0gZnJvbSBcIi4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb25uZWN0aW9uRmFjdG9yeUJhc2UgfSBmcm9tIFwiLi9Db25uZWN0aW9uRmFjdG9yeUJhc2VcIjtcbmltcG9ydCB7IE91dHB1dEZvcm1hdFByb3BlcnR5TmFtZSwgV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlciB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbmltcG9ydCB7IEhlYWRlck5hbWVzIH0gZnJvbSBcIi4vSGVhZGVyTmFtZXNcIjtcbmltcG9ydCB7IFF1ZXJ5UGFyYW1ldGVyTmFtZXMgfSBmcm9tIFwiLi9RdWVyeVBhcmFtZXRlck5hbWVzXCI7XG5leHBvcnQgY2xhc3MgVHJhbnNjcmliZXJDb25uZWN0aW9uRmFjdG9yeSBleHRlbmRzIENvbm5lY3Rpb25GYWN0b3J5QmFzZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMubXVsdGlhdWRpb1JlbGF0aXZlVXJpID0gXCIvc3BlZWNoL3JlY29nbml0aW9uL211bHRpYXVkaW9cIjtcbiAgICB9XG4gICAgY3JlYXRlKGNvbmZpZywgYXV0aEluZm8sIGNvbm5lY3Rpb25JZCkge1xuICAgICAgICBsZXQgZW5kcG9pbnQgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50LCB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCByZWdpb24gPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbiwgXCJjZW50cmFsdXNcIik7XG4gICAgICAgIGNvbnN0IGhvc3RTdWZmaXggPSBDb25uZWN0aW9uRmFjdG9yeUJhc2UuZ2V0SG9zdFN1ZmZpeChyZWdpb24pO1xuICAgICAgICBjb25zdCBob3N0RGVmYXVsdCA9IFwid3NzOi8vdHJhbnNjcmliZS5cIiArIHJlZ2lvbiArIFwiLmN0cy5zcGVlY2hcIiArIGhvc3RTdWZmaXggKyB0aGlzLm11bHRpYXVkaW9SZWxhdGl2ZVVyaTtcbiAgICAgICAgY29uc3QgaG9zdCA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSG9zdCwgaG9zdERlZmF1bHQpO1xuICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHt9O1xuICAgICAgICB0aGlzLnNldFF1ZXJ5UGFyYW1zKHF1ZXJ5UGFyYW1zLCBjb25maWcsIGVuZHBvaW50KTtcbiAgICAgICAgaWYgKCFlbmRwb2ludCkge1xuICAgICAgICAgICAgZW5kcG9pbnQgPSBob3N0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7fTtcbiAgICAgICAgaWYgKGF1dGhJbmZvLnRva2VuICE9PSB1bmRlZmluZWQgJiYgYXV0aEluZm8udG9rZW4gIT09IFwiXCIpIHtcbiAgICAgICAgICAgIGhlYWRlcnNbYXV0aEluZm8uaGVhZGVyTmFtZV0gPSBhdXRoSW5mby50b2tlbjtcbiAgICAgICAgfVxuICAgICAgICBoZWFkZXJzW0hlYWRlck5hbWVzLkNvbm5lY3Rpb25JZF0gPSBjb25uZWN0aW9uSWQ7XG4gICAgICAgIGNvbmZpZy5wYXJhbWV0ZXJzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVXJsLCBlbmRwb2ludCk7XG4gICAgICAgIGNvbnN0IGVuYWJsZUNvbXByZXNzaW9uID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoXCJTUEVFQ0gtRW5hYmxlV2Vic29ja2V0Q29tcHJlc3Npb25cIiwgXCJmYWxzZVwiKSA9PT0gXCJ0cnVlXCI7XG4gICAgICAgIHJldHVybiBuZXcgV2Vic29ja2V0Q29ubmVjdGlvbihlbmRwb2ludCwgcXVlcnlQYXJhbXMsIGhlYWRlcnMsIG5ldyBXZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyKCksIFByb3h5SW5mby5mcm9tUmVjb2duaXplckNvbmZpZyhjb25maWcpLCBlbmFibGVDb21wcmVzc2lvbiwgY29ubmVjdGlvbklkKTtcbiAgICB9XG4gICAgc2V0UXVlcnlQYXJhbXMocXVlcnlQYXJhbXMsIGNvbmZpZywgZW5kcG9pbnRVcmwpIHtcbiAgICAgICAgY29uc3QgZW5kcG9pbnRJZCA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnRJZCwgdW5kZWZpbmVkKTtcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2UgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKGVuZHBvaW50SWQgJiYgIShRdWVyeVBhcmFtZXRlck5hbWVzLkN1c3RvbVNwZWVjaERlcGxveW1lbnRJZCBpbiBxdWVyeVBhcmFtcykpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuQ3VzdG9tU3BlZWNoRGVwbG95bWVudElkXSA9IGVuZHBvaW50SWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxhbmd1YWdlICYmICEoUXVlcnlQYXJhbWV0ZXJOYW1lcy5MYW5ndWFnZSBpbiBxdWVyeVBhcmFtcykpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuTGFuZ3VhZ2VdID0gbGFuZ3VhZ2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd29yZExldmVsVGltaW5ncyA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RXb3JkTGV2ZWxUaW1lc3RhbXBzLCBcImZhbHNlXCIpLnRvTG93ZXJDYXNlKCkgPT09IFwidHJ1ZVwiO1xuICAgICAgICBjb25zdCBkZXRhaWxlZCA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KE91dHB1dEZvcm1hdFByb3BlcnR5TmFtZSwgT3V0cHV0Rm9ybWF0W091dHB1dEZvcm1hdC5TaW1wbGVdKSAhPT0gT3V0cHV0Rm9ybWF0W091dHB1dEZvcm1hdC5TaW1wbGVdO1xuICAgICAgICBpZiAod29yZExldmVsVGltaW5ncyB8fCBkZXRhaWxlZCkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbXNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5Gb3JtYXRdID0gT3V0cHV0Rm9ybWF0W091dHB1dEZvcm1hdC5EZXRhaWxlZF0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldENvbW1vblVybFBhcmFtcyhjb25maWcsIHF1ZXJ5UGFyYW1zLCBlbmRwb2ludFVybCk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2NyaWJlckNvbm5lY3Rpb25GYWN0b3J5LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBSZXN0Q29uZmlnQmFzZSB9IGZyb20gXCIuLi8uLi9jb21tb24uYnJvd3Nlci9SZXN0Q29uZmlnQmFzZVwiO1xuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcgZXh0ZW5kcyBSZXN0Q29uZmlnQmFzZSB7XG4gICAgc3RhdGljIGdldCBob3N0KCkge1xuICAgICAgICByZXR1cm4gQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5wcml2SG9zdDtcbiAgICB9XG4gICAgc3RhdGljIGdldCBhcGlWZXJzaW9uKCkge1xuICAgICAgICByZXR1cm4gQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5wcml2QXBpVmVyc2lvbjtcbiAgICB9XG4gICAgc3RhdGljIGdldCBjbGllbnRBcHBJZCgpIHtcbiAgICAgICAgcmV0dXJuIENvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcucHJpdkNsaWVudEFwcElkO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGRlZmF1bHRMYW5ndWFnZUNvZGUoKSB7XG4gICAgICAgIHJldHVybiBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLnByaXZEZWZhdWx0TGFuZ3VhZ2VDb2RlO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IHJlc3RQYXRoKCkge1xuICAgICAgICByZXR1cm4gQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5wcml2UmVzdFBhdGg7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgd2ViU29ja2V0UGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIENvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcucHJpdldlYlNvY2tldFBhdGg7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgdHJhbnNjcmlwdGlvbkV2ZW50S2V5cygpIHtcbiAgICAgICAgcmV0dXJuIENvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcucHJpdlRyYW5zY3JpcHRpb25FdmVudEtleXM7XG4gICAgfVxufVxuQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5wcml2SG9zdCA9IFwiZGV2Lm1pY3Jvc29mdHRyYW5zbGF0b3IuY29tXCI7XG5Db252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLnByaXZSZXN0UGF0aCA9IFwiL2NhcGl0by9yb29tXCI7XG5Db252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLnByaXZBcGlWZXJzaW9uID0gXCIyLjBcIjtcbkNvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcucHJpdkRlZmF1bHRMYW5ndWFnZUNvZGUgPSBcImVuLVVTXCI7XG5Db252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLnByaXZDbGllbnRBcHBJZCA9IFwiRkM1MzlDMjItMTc2Ny00RjFGLTg0QkMtQjREODExMTE0RjE1XCI7XG5Db252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLnByaXZXZWJTb2NrZXRQYXRoID0gXCIvY2FwaXRvL3RyYW5zbGF0ZVwiO1xuQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5wcml2VHJhbnNjcmlwdGlvbkV2ZW50S2V5cyA9IFtcImlDYWxVaWRcIiwgXCJjYWxsSWRcIiwgXCJvcmdhbml6ZXJcIiwgXCJGTEFDXCIsIFwiTVRVcmlcIiwgXCJEaWZmZXJlbnRpYXRlR3Vlc3RTcGVha2Vyc1wiLCBcImF1ZGlvcmVjb3JkaW5nXCIsIFwiVGhyZWFkaWRcIiwgXCJPcmdhbml6ZXJNcmlcIiwgXCJPcmdhbml6ZXJUZW5hbnRJZFwiLCBcIlVzZXJUb2tlblwiXTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUHJveHlJbmZvLCBXZWJzb2NrZXRDb25uZWN0aW9uIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi5icm93c2VyL0V4cG9ydHNcIjtcbmltcG9ydCB7IGNyZWF0ZUd1aWQgfSBmcm9tIFwiLi4vLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuLi8uLi9zZGsvQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUlkIH0gZnJvbSBcIi4uLy4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb25uZWN0aW9uRmFjdG9yeUJhc2UgfSBmcm9tIFwiLi4vQ29ubmVjdGlvbkZhY3RvcnlCYXNlXCI7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnIH0gZnJvbSBcIi4vQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZ1wiO1xuaW1wb3J0IHsgQ29udmVyc2F0aW9uV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlciB9IGZyb20gXCIuL0NvbnZlcnNhdGlvbldlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXJcIjtcbi8qKlxuICogQ3JlYXRlIGEgY29ubmVjdGlvbiB0byB0aGUgQ29udmVyc2F0aW9uIFRyYW5zbGF0b3Igd2Vic29ja2V0IGZvciBzZW5kaW5nIGluc3RhbnQgbWVzc2FnZXMgYW5kIGNvbW1hbmRzLCBhbmQgZm9yIHJlY2VpdmluZyB0cmFuc2xhdGVkIG1lc3NhZ2VzLlxuICogVGhlIGNvbnZlcnNhdGlvbiBtdXN0IGFscmVhZHkgaGF2ZSBiZWVuIHN0YXJ0ZWQgb3Igam9pbmVkLlxuICovXG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uQ29ubmVjdGlvbkZhY3RvcnkgZXh0ZW5kcyBDb25uZWN0aW9uRmFjdG9yeUJhc2Uge1xuICAgIGNyZWF0ZShjb25maWcsIGF1dGhJbmZvLCBjb25uZWN0aW9uSWQpIHtcbiAgICAgICAgY29uc3QgZW5kcG9pbnRIb3N0ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25UcmFuc2xhdG9yX0hvc3QsIENvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcuaG9zdCk7XG4gICAgICAgIGNvbnN0IGNvcnJlbGF0aW9uSWQgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfQ29ycmVsYXRpb25JZCwgY3JlYXRlR3VpZCgpKTtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgd3NzOi8vJHtlbmRwb2ludEhvc3R9JHtDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLndlYlNvY2tldFBhdGh9YDtcbiAgICAgICAgY29uc3QgdG9rZW4gPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfVG9rZW4sIHVuZGVmaW5lZCk7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRva2VuLCBcInRva2VuXCIpO1xuICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHt9O1xuICAgICAgICBxdWVyeVBhcmFtc1tDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLmNvbmZpZ1BhcmFtcy5hcGlWZXJzaW9uXSA9IENvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcuYXBpVmVyc2lvbjtcbiAgICAgICAgcXVlcnlQYXJhbXNbQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5jb25maWdQYXJhbXMudG9rZW5dID0gdG9rZW47XG4gICAgICAgIHF1ZXJ5UGFyYW1zW0NvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcuY29uZmlnUGFyYW1zLmNvcnJlbGF0aW9uSWRdID0gY29ycmVsYXRpb25JZDtcbiAgICAgICAgY29uc3QgZW5hYmxlQ29tcHJlc3Npb24gPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShcIlNQRUVDSC1FbmFibGVXZWJzb2NrZXRDb21wcmVzc2lvblwiLCBcImZhbHNlXCIpID09PSBcInRydWVcIjtcbiAgICAgICAgcmV0dXJuIG5ldyBXZWJzb2NrZXRDb25uZWN0aW9uKGVuZHBvaW50LCBxdWVyeVBhcmFtcywge30sIG5ldyBDb252ZXJzYXRpb25XZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyKCksIFByb3h5SW5mby5mcm9tUmVjb2duaXplckNvbmZpZyhjb25maWcpLCBlbmFibGVDb21wcmVzc2lvbiwgY29ubmVjdGlvbklkKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvbkNvbm5lY3Rpb25GYWN0b3J5LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBDb25uZWN0aW9uTWVzc2FnZSB9IGZyb20gXCIuLi8uLi9jb21tb24vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvbkNvbm5lY3Rpb25NZXNzYWdlIGV4dGVuZHMgQ29ubmVjdGlvbk1lc3NhZ2Uge1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2VUeXBlLCBib2R5LCBoZWFkZXJzLCBpZCkge1xuICAgICAgICBzdXBlcihtZXNzYWdlVHlwZSwgYm9keSwgaGVhZGVycywgaWQpO1xuICAgICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZSh0aGlzLnRleHRCb2R5KTtcbiAgICAgICAgaWYgKGpzb24udHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25NZXNzYWdlVHlwZSA9IGpzb24udHlwZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgY29udmVyc2F0aW9uTWVzc2FnZVR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb252ZXJzYXRpb25NZXNzYWdlVHlwZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvbkNvbm5lY3Rpb25NZXNzYWdlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBSZXN0TWVzc2FnZUFkYXB0ZXIsIFJlc3RSZXF1ZXN0VHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi4vLi4vc2RrL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuLi8uLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZyB9IGZyb20gXCIuL0NvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWdcIjtcbmV4cG9ydCBjbGFzcyBDb252ZXJzYXRpb25NYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy9cbiAgICAgICAgdGhpcy5wcml2UmVxdWVzdFBhcmFtcyA9IENvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcuY29uZmlnUGFyYW1zO1xuICAgICAgICB0aGlzLnByaXZFcnJvcnMgPSBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLnJlc3RFcnJvcnM7XG4gICAgICAgIHRoaXMucHJpdkhvc3QgPSBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLmhvc3Q7XG4gICAgICAgIHRoaXMucHJpdkFwaVZlcnNpb24gPSBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLmFwaVZlcnNpb247XG4gICAgICAgIHRoaXMucHJpdlJlc3RQYXRoID0gQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5yZXN0UGF0aDtcbiAgICAgICAgdGhpcy5wcml2UmVzdEFkYXB0ZXIgPSBuZXcgUmVzdE1lc3NhZ2VBZGFwdGVyKHt9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFrZSBhIFBPU1QgcmVxdWVzdCB0byB0aGUgQ29udmVyc2F0aW9uIE1hbmFnZXIgc2VydmljZSBlbmRwb2ludCB0byBjcmVhdGUgb3Igam9pbiBhIGNvbnZlcnNhdGlvbi5cbiAgICAgKiBAcGFyYW0gYXJnc1xuICAgICAqIEBwYXJhbSBjb252ZXJzYXRpb25Db2RlXG4gICAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAgICogQHBhcmFtIGVycm9yQ2FsbGJhY2tcbiAgICAgKi9cbiAgICBjcmVhdGVPckpvaW4oYXJncywgY29udmVyc2F0aW9uQ29kZSwgY2IsIGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoYXJncywgXCJhcmdzXCIpO1xuICAgICAgICAgICAgY29uc3QgbGFuZ3VhZ2VDb2RlID0gYXJncy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSwgQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5kZWZhdWx0TGFuZ3VhZ2VDb2RlKTtcbiAgICAgICAgICAgIGNvbnN0IG5pY2tuYW1lID0gYXJncy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfTmFtZSwgXCJjb252ZXJzYXRpb25faG9zdFwiKTtcbiAgICAgICAgICAgIGNvbnN0IGVuZHBvaW50SG9zdCA9IGFyZ3MuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25UcmFuc2xhdG9yX0hvc3QsIHRoaXMucHJpdkhvc3QpO1xuICAgICAgICAgICAgY29uc3QgY29ycmVsYXRpb25JZCA9IGFyZ3MuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25UcmFuc2xhdG9yX0NvcnJlbGF0aW9uSWQpO1xuICAgICAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uS2V5ID0gYXJncy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleSk7XG4gICAgICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25SZWdpb24gPSBhcmdzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVnaW9uKTtcbiAgICAgICAgICAgIGNvbnN0IGF1dGhUb2tlbiA9IGFyZ3MuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbik7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UobGFuZ3VhZ2VDb2RlLCBcImxhbmd1YWdlQ29kZVwiKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShuaWNrbmFtZSwgXCJuaWNrbmFtZVwiKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShlbmRwb2ludEhvc3QsIFwiZW5kcG9pbnRIb3N0XCIpO1xuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7fTtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW3RoaXMucHJpdlJlcXVlc3RQYXJhbXMuYXBpVmVyc2lvbl0gPSB0aGlzLnByaXZBcGlWZXJzaW9uO1xuICAgICAgICAgICAgcXVlcnlQYXJhbXNbdGhpcy5wcml2UmVxdWVzdFBhcmFtcy5sYW5ndWFnZUNvZGVdID0gbGFuZ3VhZ2VDb2RlO1xuICAgICAgICAgICAgcXVlcnlQYXJhbXNbdGhpcy5wcml2UmVxdWVzdFBhcmFtcy5uaWNrbmFtZV0gPSBuaWNrbmFtZTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmIChjb3JyZWxhdGlvbklkKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyc1t0aGlzLnByaXZSZXF1ZXN0UGFyYW1zLmNvcnJlbGF0aW9uSWRdID0gY29ycmVsYXRpb25JZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhlYWRlcnNbdGhpcy5wcml2UmVxdWVzdFBhcmFtcy5jbGllbnRBcHBJZF0gPSBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLmNsaWVudEFwcElkO1xuICAgICAgICAgICAgaWYgKGNvbnZlcnNhdGlvbkNvZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW3RoaXMucHJpdlJlcXVlc3RQYXJhbXMucm9vbUlkXSA9IGNvbnZlcnNhdGlvbkNvZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChzdWJzY3JpcHRpb25SZWdpb24sIHRoaXMucHJpdkVycm9ycy5hdXRoSW52YWxpZFN1YnNjcmlwdGlvblJlZ2lvbik7XG4gICAgICAgICAgICAgICAgaGVhZGVyc1t0aGlzLnByaXZSZXF1ZXN0UGFyYW1zLnN1YnNjcmlwdGlvblJlZ2lvbl0gPSBzdWJzY3JpcHRpb25SZWdpb247XG4gICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbktleSkge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW3RoaXMucHJpdlJlcXVlc3RQYXJhbXMuc3Vic2NyaXB0aW9uS2V5XSA9IHN1YnNjcmlwdGlvbktleTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYXV0aFRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbdGhpcy5wcml2UmVxdWVzdFBhcmFtcy5hdXRob3JpemF0aW9uXSA9IGBCZWFyZXIgJHthdXRoVG9rZW59YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHN1YnNjcmlwdGlvbktleSwgdGhpcy5wcml2RXJyb3JzLmF1dGhJbnZhbGlkU3Vic2NyaXB0aW9uS2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSB7fTtcbiAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzID0gaGVhZGVycztcbiAgICAgICAgICAgIHRoaXMucHJpdlJlc3RBZGFwdGVyLm9wdGlvbnMgPSBjb25maWc7XG4gICAgICAgICAgICBjb25zdCBlbmRwb2ludCA9IGBodHRwczovLyR7ZW5kcG9pbnRIb3N0fSR7dGhpcy5wcml2UmVzdFBhdGh9YDtcbiAgICAgICAgICAgIC8vIFRPRE86IHN1cHBvcnQgYSBwcm94eSBhbmQgY2VydGlmaWNhdGUgdmFsaWRhdGlvblxuICAgICAgICAgICAgdGhpcy5wcml2UmVzdEFkYXB0ZXIucmVxdWVzdChSZXN0UmVxdWVzdFR5cGUuUG9zdCwgZW5kcG9pbnQsIHF1ZXJ5UGFyYW1zLCBudWxsKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RJZCA9IFJlc3RNZXNzYWdlQWRhcHRlci5leHRyYWN0SGVhZGVyVmFsdWUodGhpcy5wcml2UmVxdWVzdFBhcmFtcy5yZXF1ZXN0SWQsIHJlc3BvbnNlLmhlYWRlcnMpO1xuICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3JNZXNzYWdlID0gdGhpcy5wcml2RXJyb3JzLmludmFsaWRDcmVhdGVKb2luQ29udmVyc2F0aW9uUmVzcG9uc2UucmVwbGFjZShcIntzdGF0dXN9XCIsIHJlc3BvbnNlLnN0YXR1cy50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlcnJNZXNzYWdlUmF3O1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJNZXNzYWdlUmF3ID0gSlNPTi5wYXJzZShyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgKz0gYCBbJHtlcnJNZXNzYWdlUmF3LmVycm9yLmNvZGV9OiAke2Vyck1lc3NhZ2VSYXcuZXJyb3IubWVzc2FnZX1dYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlICs9IGAgWyR7cmVzcG9uc2UuZGF0YX1dYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgKz0gYCAke3JlcXVlc3RJZH1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyKGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjb252ZXJzYXRpb24gPSBKU09OLnBhcnNlKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmIChjb252ZXJzYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uLnJlcXVlc3RJZCA9IHJlcXVlc3RJZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiKGNvbnZlcnNhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycihlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVkRXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgZXJyKHR5cGVkRXJyb3IubmFtZSArIFwiOiBcIiArIHR5cGVkRXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlcnIoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlIGEgREVMRVRFIHJlcXVlc3QgdG8gdGhlIENvbnZlcnNhdGlvbiBNYW5hZ2VyIHNlcnZpY2UgZW5kcG9pbnQgdG8gbGVhdmUgdGhlIGNvbnZlcnNhdGlvbi5cbiAgICAgKiBAcGFyYW0gYXJnc1xuICAgICAqIEBwYXJhbSBzZXNzaW9uVG9rZW5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICAgKi9cbiAgICBsZWF2ZShhcmdzLCBzZXNzaW9uVG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoYXJncywgdGhpcy5wcml2RXJyb3JzLmludmFsaWRBcmdzLnJlcGxhY2UoXCJ7YXJnfVwiLCBcImNvbmZpZ1wiKSk7XG4gICAgICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHNlc3Npb25Ub2tlbiwgdGhpcy5wcml2RXJyb3JzLmludmFsaWRBcmdzLnJlcGxhY2UoXCJ7YXJnfVwiLCBcInRva2VuXCIpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmRwb2ludEhvc3QgPSBhcmdzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uVHJhbnNsYXRvcl9Ib3N0LCB0aGlzLnByaXZIb3N0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb3JyZWxhdGlvbklkID0gYXJncy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfQ29ycmVsYXRpb25JZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7fTtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtc1t0aGlzLnByaXZSZXF1ZXN0UGFyYW1zLmFwaVZlcnNpb25dID0gdGhpcy5wcml2QXBpVmVyc2lvbjtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtc1t0aGlzLnByaXZSZXF1ZXN0UGFyYW1zLnNlc3Npb25Ub2tlbl0gPSBzZXNzaW9uVG9rZW47XG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChjb3JyZWxhdGlvbklkKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbdGhpcy5wcml2UmVxdWVzdFBhcmFtcy5jb3JyZWxhdGlvbklkXSA9IGNvcnJlbGF0aW9uSWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHt9O1xuICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzID0gaGVhZGVycztcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXN0QWRhcHRlci5vcHRpb25zID0gY29uZmlnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVuZHBvaW50ID0gYGh0dHBzOi8vJHtlbmRwb2ludEhvc3R9JHt0aGlzLnByaXZSZXN0UGF0aH1gO1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IHN1cHBvcnQgYSBwcm94eSBhbmQgY2VydGlmaWNhdGUgdmFsaWRhdGlvblxuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlc3RBZGFwdGVyLnJlcXVlc3QoUmVzdFJlcXVlc3RUeXBlLkRlbGV0ZSwgZW5kcG9pbnQsIHF1ZXJ5UGFyYW1zLCBudWxsKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3JzIG9uIGRlbGV0ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlZEVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCh0eXBlZEVycm9yLm5hbWUgKyBcIjogXCIgKyB0eXBlZEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29udmVyc2F0aW9uTWFuYWdlci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBjcmVhdGVOb0Rhc2hHdWlkLCBEZWZlcnJlZCwgfSBmcm9tIFwiLi4vLi4vY29tbW9uL0V4cG9ydHNcIjtcbi8qKlxuICogUGxhY2Vob2xkZXIgY2xhc3MgZm9yIHRoZSBDb252ZXJzYXRpb24gUmVxdWVzdCBTZXNzaW9uLiBCYXNlZCBvZmYgUmVxdWVzdFNlc3Npb24uXG4gKiBUT0RPOiBkZWZpbmUgd2hhdCB0ZWxlbWV0cnkgaXMgcmVxdWlyZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBDb252ZXJzYXRpb25SZXF1ZXN0U2Vzc2lvbiB7XG4gICAgY29uc3RydWN0b3Ioc2Vzc2lvbklkKSB7XG4gICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2RGV0YWNoYWJsZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdGhpcy5wcml2U2Vzc2lvbklkID0gc2Vzc2lvbklkO1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0SWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHRoaXMucHJpdlJlcXVlc3RDb21wbGV0aW9uRGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICB9XG4gICAgZ2V0IHNlc3Npb25JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNlc3Npb25JZDtcbiAgICB9XG4gICAgZ2V0IHJlcXVlc3RJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlcXVlc3RJZDtcbiAgICB9XG4gICAgZ2V0IGNvbXBsZXRpb25Qcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVxdWVzdENvbXBsZXRpb25EZWZlcnJhbC5wcm9taXNlO1xuICAgIH1cbiAgICBvblByZUNvbm5lY3Rpb25TdGFydChhdXRoRmV0Y2hFdmVudElkLCBjb25uZWN0aW9uSWQpIHtcbiAgICAgICAgdGhpcy5wcml2U2Vzc2lvbklkID0gY29ubmVjdGlvbklkO1xuICAgIH1cbiAgICBvbkF1dGhDb21wbGV0ZWQoaXNFcnJvcikge1xuICAgICAgICBpZiAoaXNFcnJvcikge1xuICAgICAgICAgICAgdGhpcy5vbkNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25Db25uZWN0aW9uRXN0YWJsaXNoQ29tcGxldGVkKHN0YXR1c0NvZGUpIHtcbiAgICAgICAgaWYgKHN0YXR1c0NvZGUgPT09IDIwMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgdGhpcy5vbkNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25TZXJ2aWNlVHVybkVuZFJlc3BvbnNlKGNvbnRpbnVvdXNSZWNvZ25pdGlvbikge1xuICAgICAgICBpZiAoIWNvbnRpbnVvdXNSZWNvZ25pdGlvbikge1xuICAgICAgICAgICAgdGhpcy5vbkNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0SWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wcml2SXNEaXNwb3NlZCkge1xuICAgICAgICAgICAgICAgIC8vIHdlIHNob3VsZCBoYXZlIGNvbXBsZXRlZCBieSBub3cuIElmIHdlIGRpZCBub3QgaXRzIGFuIHVua25vd24gZXJyb3IuXG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBkZXRhY2hhYmxlIG9mIHRoaXMucHJpdkRldGFjaGFibGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGRldGFjaGFibGUuZGV0YWNoKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb25Db21wbGV0ZSgpIHtcbiAgICAgICAgLy9cbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvblJlcXVlc3RTZXNzaW9uLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IENvbm5lY3Rpb25TdGF0ZSwgY3JlYXRlTm9EYXNoR3VpZCwgRGVmZXJyZWQsIE1lc3NhZ2VUeXBlLCB9IGZyb20gXCIuLi8uLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBDYW5jZWxsYXRpb25SZWFzb24sIENvbnZlcnNhdGlvbkV4cGlyYXRpb25FdmVudEFyZ3MsIENvbnZlcnNhdGlvblRyYW5zbGF0aW9uQ2FuY2VsZWRFdmVudEFyZ3MsIENvbnZlcnNhdGlvblRyYW5zbGF0aW9uUmVzdWx0LCBUcmFuc2xhdGlvbnMgfSBmcm9tIFwiLi4vLi4vc2RrL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvZ25pdGl2ZVRva2VuQXV0aGVudGljYXRpb24sIFNlcnZpY2VSZWNvZ25pemVyQmFzZSB9IGZyb20gXCIuLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25Db25uZWN0aW9uTWVzc2FnZSB9IGZyb20gXCIuL0NvbnZlcnNhdGlvbkNvbm5lY3Rpb25NZXNzYWdlXCI7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25SZXF1ZXN0U2Vzc2lvbiB9IGZyb20gXCIuL0NvbnZlcnNhdGlvblJlcXVlc3RTZXNzaW9uXCI7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25SZWNlaXZlZFRyYW5zbGF0aW9uRXZlbnRBcmdzLCBMb2NrUm9vbUV2ZW50QXJncywgTXV0ZUFsbEV2ZW50QXJncywgUGFydGljaXBhbnRBdHRyaWJ1dGVFdmVudEFyZ3MsIFBhcnRpY2lwYW50RXZlbnRBcmdzLCBQYXJ0aWNpcGFudHNMaXN0RXZlbnRBcmdzIH0gZnJvbSBcIi4vQ29udmVyc2F0aW9uVHJhbnNsYXRvckV2ZW50QXJnc1wiO1xuaW1wb3J0IHsgQ29udmVyc2F0aW9uVHJhbnNsYXRvckNvbW1hbmRUeXBlcywgQ29udmVyc2F0aW9uVHJhbnNsYXRvck1lc3NhZ2VUeXBlcyB9IGZyb20gXCIuL0NvbnZlcnNhdGlvblRyYW5zbGF0b3JJbnRlcmZhY2VzXCI7XG5pbXBvcnQgeyBDb21tYW5kUmVzcG9uc2VQYXlsb2FkLCBQYXJ0aWNpcGFudFBheWxvYWRSZXNwb25zZSwgUGFydGljaXBhbnRzTGlzdFBheWxvYWRSZXNwb25zZSwgU3BlZWNoUmVzcG9uc2VQYXlsb2FkLCBUZXh0UmVzcG9uc2VQYXlsb2FkIH0gZnJvbSBcIi4vU2VydmljZU1lc3NhZ2VzL0V4cG9ydHNcIjtcbi8qKlxuICogVGhlIHNlcnZpY2UgYWRhcHRlciBoYW5kbGVzIHNlbmRpbmcgYW5kIHJlY2VpdmluZyBtZXNzYWdlcyB0byB0aGUgQ29udmVyc2F0aW9uIFRyYW5zbGF0b3Igd2Vic29ja2V0LlxuICovXG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uU2VydmljZUFkYXB0ZXIgZXh0ZW5kcyBTZXJ2aWNlUmVjb2duaXplckJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Tb3VyY2UsIHJlY29nbml6ZXJDb25maWcsIGNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IpIHtcbiAgICAgICAgc3VwZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb1NvdXJjZSwgcmVjb2duaXplckNvbmZpZywgY29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvcik7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWdQcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByaXZMYXN0UGFydGlhbFV0dGVyYW5jZUlkID0gXCJcIjtcbiAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3RvciA9IGNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3I7XG4gICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbkF1dGhlbnRpY2F0aW9uID0gYXV0aGVudGljYXRpb247XG4gICAgICAgIHRoaXMucmVjZWl2ZU1lc3NhZ2VPdmVycmlkZSA9ICgpID0+IHRoaXMucmVjZWl2ZUNvbnZlcnNhdGlvbk1lc3NhZ2VPdmVycmlkZSgpO1xuICAgICAgICB0aGlzLnJlY29nbml6ZU92ZXJyaWRlID0gKCkgPT4gdGhpcy5ub09wKCk7XG4gICAgICAgIHRoaXMucG9zdENvbm5lY3RJbXBsT3ZlcnJpZGUgPSAoY29ubmVjdGlvbikgPT4gdGhpcy5jb252ZXJzYXRpb25Db25uZWN0SW1wbChjb25uZWN0aW9uKTtcbiAgICAgICAgdGhpcy5jb25maWdDb25uZWN0aW9uT3ZlcnJpZGUgPSAoKSA9PiB0aGlzLmNvbmZpZ0Nvbm5lY3Rpb24oKTtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0T3ZlcnJpZGUgPSAoKSA9PiB0aGlzLnByaXZEaXNjb25uZWN0KCk7XG4gICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlcXVlc3RTZXNzaW9uID0gbmV3IENvbnZlcnNhdGlvblJlcXVlc3RTZXNzaW9uKGNyZWF0ZU5vRGFzaEd1aWQoKSk7XG4gICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbkNvbm5lY3Rpb25GYWN0b3J5ID0gY29ubmVjdGlvbkZhY3Rvcnk7XG4gICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbklzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaXNEaXNwb3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmlzRGlzcG9zZWQoKSB8fCB0aGlzLnByaXZDb252ZXJzYXRpb25Jc0Rpc3Bvc2VkO1xuICAgIH1cbiAgICBkaXNwb3NlKHJlYXNvbikge1xuICAgICAgICBjb25zdCBfc3VwZXIgPSBPYmplY3QuY3JlYXRlKG51bGwsIHtcbiAgICAgICAgICAgIGRpc3Bvc2U6IHsgZ2V0OiAoKSA9PiBzdXBlci5kaXNwb3NlIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25Jc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlnUHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHlpZWxkIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWdQcm9taXNlO1xuICAgICAgICAgICAgICAgIHlpZWxkIGNvbm5lY3Rpb24uZGlzcG9zZShyZWFzb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgX3N1cGVyLmRpc3Bvc2UuY2FsbCh0aGlzLCByZWFzb24pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHlpZWxkIHRoaXMuZmV0Y2hDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5zZW5kKG5ldyBDb252ZXJzYXRpb25Db25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBtZXNzYWdlKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kTWVzc2FnZUFzeW5jKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgeWllbGQgY29ubmVjdGlvbi5zZW5kKG5ldyBDb252ZXJzYXRpb25Db25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBtZXNzYWdlKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwcml2RGlzY29ubmVjdCgpIHtcbiAgICAgICAgaWYgKHRoaXMudGVybWluYXRlTWVzc2FnZUxvb3ApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbmNlbFJlY29nbml0aW9uKHRoaXMucHJpdkNvbnZlcnNhdGlvblJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCwgdGhpcy5wcml2Q29udmVyc2F0aW9uUmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBDYW5jZWxsYXRpb25SZWFzb24uRXJyb3IsIENhbmNlbGxhdGlvbkVycm9yQ29kZS5Ob0Vycm9yLCBcIkRpc2Nvbm5lY3RpbmdcIik7XG4gICAgICAgIHRoaXMudGVybWluYXRlTWVzc2FnZUxvb3AgPSB0cnVlO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvcmVxdWlyZS1hd2FpdFxuICAgIHByb2Nlc3NUeXBlU3BlY2lmaWNNZXNzYWdlcygpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gQ2FuY2VscyByZWNvZ25pdGlvbi5cbiAgICBjYW5jZWxSZWNvZ25pdGlvbihzZXNzaW9uSWQsIHJlcXVlc3RJZCwgY2FuY2VsbGF0aW9uUmVhc29uLCBlcnJvckNvZGUsIGVycm9yKSB7XG4gICAgICAgIHRoaXMudGVybWluYXRlTWVzc2FnZUxvb3AgPSB0cnVlO1xuICAgICAgICBjb25zdCBjYW5jZWxFdmVudCA9IG5ldyBDb252ZXJzYXRpb25UcmFuc2xhdGlvbkNhbmNlbGVkRXZlbnRBcmdzKGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3IsIGVycm9yQ29kZSwgdW5kZWZpbmVkLCBzZXNzaW9uSWQpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci5jYW5jZWxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IuY2FuY2VsZWQodGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3RvciwgY2FuY2VsRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfYSkge1xuICAgICAgICAgICAgLy8gY29udGludWUgb24gZXJyb3JcbiAgICAgICAgfVxuICAgIH1cbiAgICBub09wKCkge1xuICAgICAgICAvLyBvcGVyYXRpb24gbm90IHN1cHBvcnRlZFxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVzdGFibGlzaGVzIGEgd2Vic29ja2V0IGNvbm5lY3Rpb24gdG8gdGhlIGVuZCBwb2ludC5cbiAgICAgKi9cbiAgICBjb252ZXJzYXRpb25Db25uZWN0SW1wbChjb25uZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uTG9vcCA9IHRoaXMuc3RhcnRNZXNzYWdlTG9vcCgpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb247XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIGluY29taW5nIHdlYnNvY2tldCBtZXNzYWdlc1xuICAgICAqL1xuICAgIHJlY2VpdmVDb252ZXJzYXRpb25NZXNzYWdlT3ZlcnJpZGUoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rpc3Bvc2VkKCkgfHwgdGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHdlIHdvbid0IHJlbHkgb24gdGhlIGNhc2NhZGluZyBwcm9taXNlcyBvZiB0aGUgY29ubmVjdGlvbiBzaW5jZSB3ZSB3YW50IHRvIGNvbnRpbnVhbGx5IGJlIGF2YWlsYWJsZSB0byByZWNlaXZlIG1lc3NhZ2VzXG4gICAgICAgICAgICBjb25zdCBjb21tdW5pY2F0aW9uQ3VzdG9kaWFuID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB5aWVsZCBjb25uZWN0aW9uLnJlYWQoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0Rpc3Bvc2VkKCkgfHwgdGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSdyZSBkb25lLlxuICAgICAgICAgICAgICAgICAgICBjb21tdW5pY2F0aW9uQ3VzdG9kaWFuLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZUNvbnZlcnNhdGlvbk1lc3NhZ2VPdmVycmlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzZXNzaW9uSWQgPSB0aGlzLnByaXZDb252ZXJzYXRpb25SZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQ7XG4gICAgICAgICAgICAgICAgbGV0IHNlbmRGaW5hbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZS5jb252ZXJzYXRpb25NZXNzYWdlVHlwZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5mb1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInBhcnRpY2lwYW50X2NvbW1hbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjb21tYW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWFuZFBheWxvYWQgPSBDb21tYW5kUmVzcG9uc2VQYXlsb2FkLmZyb21KU09OKG1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY29tbWFuZFBheWxvYWQuY29tbWFuZC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAnUGFydGljcGFudExpc3QnIGlzIHRoZSBmaXJzdCBtZXNzYWdlIHNlbnQgdG8gdGhlIHVzZXIgYWZ0ZXIgdGhlIHdlYnNvY2tldCBjb25uZWN0aW9uIGhhcyBvcGVuZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFRoZSBjb25zdW1pbmcgY2xpZW50IG11c3Qgd2FpdCBmb3IgdGhpcyBtZXNzYWdlIHRvIGFycml2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBiZWZvcmUgc3RhcnRpbmcgdG8gc2VuZCB0aGVpciBvd24gZGF0YS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJwYXJ0aWNpcGFudGxpc3RcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRpY2lwYW50c1BheWxvYWQgPSBQYXJ0aWNpcGFudHNMaXN0UGF5bG9hZFJlc3BvbnNlLmZyb21KU09OKG1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydGljaXBhbnRzUmVzdWx0ID0gcGFydGljaXBhbnRzUGF5bG9hZC5wYXJ0aWNpcGFudHMubWFwKChwKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydGljaXBhbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF2YXRhcjogcC5hdmF0YXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBwLm5pY2tuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogcC5wYXJ0aWNpcGFudElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0hvc3Q6IHAuaXNob3N0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc011dGVkOiBwLmlzbXV0ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVXNpbmdUdHM6IHAudXNldHRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRMYW5ndWFnZTogcC5sb2NhbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0aWNpcGFudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci5wYXJ0aWNpcGFudHNMaXN0UmVjZWl2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLnBhcnRpY2lwYW50c0xpc3RSZWNlaXZlZCh0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLCBuZXcgUGFydGljaXBhbnRzTGlzdEV2ZW50QXJncyhwYXJ0aWNpcGFudHNQYXlsb2FkLnJvb21pZCwgcGFydGljaXBhbnRzUGF5bG9hZC50b2tlbiwgcGFydGljaXBhbnRzUGF5bG9hZC50cmFuc2xhdGVUbywgcGFydGljaXBhbnRzUGF5bG9hZC5wcm9mYW5pdHlGaWx0ZXIsIHBhcnRpY2lwYW50c1BheWxvYWQucm9vbVByb2Zhbml0eUZpbHRlciwgcGFydGljaXBhbnRzUGF5bG9hZC5yb29tTG9ja2VkLCBwYXJ0aWNpcGFudHNQYXlsb2FkLm11dGVBbGwsIHBhcnRpY2lwYW50c1Jlc3VsdCwgc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICdTZXRUcmFuc2xhdGVUb0xhbmd1YWdlcycgcmVwcmVzZW50cyB0aGUgbGlzdCBvZiBsYW5ndWFnZXMgYmVpbmcgdXNlZCBpbiB0aGUgQ29udmVyc2F0aW9uIGJ5IGFsbCB1c2Vycyg/KS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogVGhpcyBpcyBzZW50IGF0IHRoZSBzdGFydCBvZiB0aGUgQ29udmVyc2F0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2V0dHJhbnNsYXRldG9sYW5ndWFnZXNcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IucGFydGljaXBhbnRVcGRhdGVDb21tYW5kUmVjZWl2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLnBhcnRpY2lwYW50VXBkYXRlQ29tbWFuZFJlY2VpdmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IsIG5ldyBQYXJ0aWNpcGFudEF0dHJpYnV0ZUV2ZW50QXJncyhjb21tYW5kUGF5bG9hZC5wYXJ0aWNpcGFudElkLCBDb252ZXJzYXRpb25UcmFuc2xhdG9yQ29tbWFuZFR5cGVzLnNldFRyYW5zbGF0ZVRvTGFuZ3VhZ2VzLCBjb21tYW5kUGF5bG9hZC52YWx1ZSwgc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICdTZXRQcm9mYW5pdHlGaWx0ZXJpbmcnIGxldHMgdGhlIGNsaWVudCBzZXQgdGhlIGxldmVsIG9mIHByb2Zhbml0eSBmaWx0ZXJpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIElmIHNlbnQgYnkgdGhlIHBhcnRpY2lwYW50IHRoZSBzZXR0aW5nIHdpbGwgZWZmZWN0IG9ubHkgdGhlaXIgb3duIHByb2Zhbml0eSBsZXZlbC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogSWYgc2VudCBieSB0aGUgaG9zdCwgdGhlIHNldHRpbmcgd2lsbCBlZmZlY3QgYWxsIHBhcnRpY2lwYW50cyBpbmNsdWRpbmcgdGhlIGhvc3QuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIE5vdGU6IHRoZSBwcm9mYW5pdHkgZmlsdGVycyBkaWZmZXIgZnJvbSBTcGVlY2ggU2VydmljZSAoPyk6ICdtYXJrZWQnLCAncmF3JywgJ3JlbW92ZWQnLCAndGFnZ2VkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNldHByb2Zhbml0eWZpbHRlcmluZ1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci5wYXJ0aWNpcGFudFVwZGF0ZUNvbW1hbmRSZWNlaXZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IucGFydGljaXBhbnRVcGRhdGVDb21tYW5kUmVjZWl2ZWQodGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3RvciwgbmV3IFBhcnRpY2lwYW50QXR0cmlidXRlRXZlbnRBcmdzKGNvbW1hbmRQYXlsb2FkLnBhcnRpY2lwYW50SWQsIENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMuc2V0UHJvZmFuaXR5RmlsdGVyaW5nLCBjb21tYW5kUGF5bG9hZC52YWx1ZSwgc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICdTZXRNdXRlJyBpcyBzZW50IGlmIHRoZSBwYXJ0aWNpcGFudCBoYXMgYmVlbiBtdXRlZCBieSB0aGUgaG9zdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ2hlY2sgdGhlICdwYXJ0aWNpcGFudElkJyB0byBkZXRlcm1pbmUgaWYgdGhlIGN1cnJlbnQgdXNlciBoYXMgYmVlbiBtdXRlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzZXRtdXRlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLnBhcnRpY2lwYW50VXBkYXRlQ29tbWFuZFJlY2VpdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci5wYXJ0aWNpcGFudFVwZGF0ZUNvbW1hbmRSZWNlaXZlZCh0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLCBuZXcgUGFydGljaXBhbnRBdHRyaWJ1dGVFdmVudEFyZ3MoY29tbWFuZFBheWxvYWQucGFydGljaXBhbnRJZCwgQ29udmVyc2F0aW9uVHJhbnNsYXRvckNvbW1hbmRUeXBlcy5zZXRNdXRlLCBjb21tYW5kUGF5bG9hZC52YWx1ZSwgc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICdTZXRNdXRlQWxsJyBpcyBzZW50IGlmIHRoZSBDb252ZXJzYXRpb24gaGFzIGJlZW4gbXV0ZWQgYnkgdGhlIGhvc3QuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2V0bXV0ZWFsbFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci5tdXRlQWxsQ29tbWFuZFJlY2VpdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci5tdXRlQWxsQ29tbWFuZFJlY2VpdmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IsIG5ldyBNdXRlQWxsRXZlbnRBcmdzKGNvbW1hbmRQYXlsb2FkLnZhbHVlLCBzZXNzaW9uSWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogJ1Jvb21FeHBpcmF0aW9uV2FybmluZycgaXMgc2VudCB0b3dhcmRzIHRoZSBlbmQgb2YgdGhlIENvbnZlcnNhdGlvbiBzZXNzaW9uIHRvIGdpdmUgYSB0aW1lb3V0IHdhcm5pbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicm9vbWV4cGlyYXRpb253YXJuaW5nXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLmNvbnZlcnNhdGlvbkV4cGlyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLmNvbnZlcnNhdGlvbkV4cGlyYXRpb24odGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3RvciwgbmV3IENvbnZlcnNhdGlvbkV4cGlyYXRpb25FdmVudEFyZ3MoY29tbWFuZFBheWxvYWQudmFsdWUsIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAnU2V0VXNlVHRzJyBpcyBzZW50IGFzIGEgY29uZmlybWF0aW9uIGlmIHRoZSB1c2VyIHJlcXVlc3RzIFRUUyB0byBiZSB0dXJuZWQgb24gb3Igb2ZmLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNldHVzZXR0c1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci5wYXJ0aWNpcGFudFVwZGF0ZUNvbW1hbmRSZWNlaXZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IucGFydGljaXBhbnRVcGRhdGVDb21tYW5kUmVjZWl2ZWQodGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3RvciwgbmV3IFBhcnRpY2lwYW50QXR0cmlidXRlRXZlbnRBcmdzKGNvbW1hbmRQYXlsb2FkLnBhcnRpY2lwYW50SWQsIENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMuc2V0VXNlVFRTLCBjb21tYW5kUGF5bG9hZC52YWx1ZSwgc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICdTZXRMb2NrU3RhdGUnIGlzIHNldCBpZiB0aGUgaG9zdCBoYXMgbG9ja2VkIG9yIHVubG9ja2VkIHRoZSBDb252ZXJzYXRpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2V0bG9ja3N0YXRlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLmxvY2tSb29tQ29tbWFuZFJlY2VpdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci5sb2NrUm9vbUNvbW1hbmRSZWNlaXZlZCh0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLCBuZXcgTG9ja1Jvb21FdmVudEFyZ3MoY29tbWFuZFBheWxvYWQudmFsdWUsIHNlc3Npb25JZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAnQ2hhbmdlTmlja25hbWUnIGlzIHJlY2VpdmVkIGlmIGEgdXNlciBjaGFuZ2VzIHRoZWlyIGRpc3BsYXkgbmFtZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQW55IGNhY2hlZCBwYXJ0aWNwaWFudHMgbGlzdCBzaG91bGQgYmUgdXBkYXRlZCB0byByZWZsZWN0IHRoZSBkaXNwbGF5IG5hbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2hhbmdlbmlja25hbWVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IucGFydGljaXBhbnRVcGRhdGVDb21tYW5kUmVjZWl2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLnBhcnRpY2lwYW50VXBkYXRlQ29tbWFuZFJlY2VpdmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IsIG5ldyBQYXJ0aWNpcGFudEF0dHJpYnV0ZUV2ZW50QXJncyhjb21tYW5kUGF5bG9hZC5wYXJ0aWNpcGFudElkLCBDb252ZXJzYXRpb25UcmFuc2xhdG9yQ29tbWFuZFR5cGVzLmNoYW5nZU5pY2tuYW1lLCBjb21tYW5kUGF5bG9hZC5uaWNrbmFtZSwgc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICdKb2luU2Vzc2lvbicgaXMgc2VudCB3aGVuIGEgdXNlciBqb2lucyB0aGUgQ29udmVyc2F0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImpvaW5zZXNzaW9uXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqb2luUGFydGljaXBhbnRQYXlsb2FkID0gUGFydGljaXBhbnRQYXlsb2FkUmVzcG9uc2UuZnJvbUpTT04obWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqb2luaW5nUGFydGljaXBhbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZhdGFyOiBqb2luUGFydGljaXBhbnRQYXlsb2FkLmF2YXRhcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogam9pblBhcnRpY2lwYW50UGF5bG9hZC5uaWNrbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogam9pblBhcnRpY2lwYW50UGF5bG9hZC5wYXJ0aWNpcGFudElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSG9zdDogam9pblBhcnRpY2lwYW50UGF5bG9hZC5pc2hvc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNdXRlZDogam9pblBhcnRpY2lwYW50UGF5bG9hZC5pc211dGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVXNpbmdUdHM6IGpvaW5QYXJ0aWNpcGFudFBheWxvYWQudXNldHRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWZlcnJlZExhbmd1YWdlOiBqb2luUGFydGljaXBhbnRQYXlsb2FkLmxvY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLnBhcnRpY2lwYW50Sm9pbkNvbW1hbmRSZWNlaXZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IucGFydGljaXBhbnRKb2luQ29tbWFuZFJlY2VpdmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IsIG5ldyBQYXJ0aWNpcGFudEV2ZW50QXJncyhqb2luaW5nUGFydGljaXBhbnQsIHNlc3Npb25JZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAnTGVhdmVTZXNzaW9uJyBpcyBzZW50IHdoZW4gYSB1c2VyIGxlYXZlcyB0aGUgQ29udmVyc2F0aW9uJy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJsZWF2ZXNlc3Npb25cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlYXZpbmdQYXJ0aWNpcGFudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogY29tbWFuZFBheWxvYWQucGFydGljaXBhbnRJZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IucGFydGljaXBhbnRMZWF2ZUNvbW1hbmRSZWNlaXZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IucGFydGljaXBhbnRMZWF2ZUNvbW1hbmRSZWNlaXZlZCh0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLCBuZXcgUGFydGljaXBhbnRFdmVudEFyZ3MobGVhdmluZ1BhcnRpY2lwYW50LCBzZXNzaW9uSWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogJ0Rpc2Nvbm5lY3RTZXNzaW9uJyBpcyBzZW50IHdoZW4gYSB1c2VyIGlzIGRpc2Nvbm5lY3RlZCBmcm9tIHRoZSBzZXNzaW9uIChlLmcuIG5ldHdvcmsgcHJvYmxlbSkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENoZWNrIHRoZSAnUGFydGljaXBhbnRJZCcgdG8gY2hlY2sgd2hldGhlciB0aGUgbWVzc2FnZSBpcyBmb3IgdGhlIGN1cnJlbnQgdXNlci5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJkaXNjb25uZWN0c2Vzc2lvblwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzY29ubmVjdFBhcnRpY2lwYW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjb21tYW5kUGF5bG9hZC5wYXJ0aWNpcGFudElkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0b2tlblwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBuZXcgQ29nbml0aXZlVG9rZW5BdXRoZW50aWNhdGlvbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXV0aG9yaXphdGlvblRva2VuID0gY29tbWFuZFBheWxvYWQudG9rZW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShhdXRob3JpemF0aW9uVG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF1dGhvcml6YXRpb25Ub2tlbiA9IGNvbW1hbmRQYXlsb2FkLnRva2VuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYXV0aG9yaXphdGlvblRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hdXRoZW50aWNhdGlvbiA9IHRva2VuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBNZXNzYWdlIG5vdCByZWNvZ25pemVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogJ3BhcnRpYWwnIChvciAnaHlwb3RoZXNpcycpIHJlcHJlc2VudHMgYSB1bmZpbmFsaXplZCBzcGVlY2ggbWVzc2FnZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInBhcnRpYWxcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogJ2ZpbmFsJyAob3IgJ3BocmFzZScpIHJlcHJlc2VudHMgYSBmaW5hbGl6ZWQgc3BlZWNoIG1lc3NhZ2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmaW5hbFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZWVjaFBheWxvYWQgPSBTcGVlY2hSZXNwb25zZVBheWxvYWQuZnJvbUpTT04obWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlZWNoUmVzdWx0ID0gbmV3IENvbnZlcnNhdGlvblRyYW5zbGF0aW9uUmVzdWx0KHNwZWVjaFBheWxvYWQucGFydGljaXBhbnRJZCwgdGhpcy5nZXRUcmFuc2xhdGlvbnMoc3BlZWNoUGF5bG9hZC50cmFuc2xhdGlvbnMpLCBzcGVlY2hQYXlsb2FkLmxhbmd1YWdlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgc3BlZWNoUGF5bG9hZC5yZWNvZ25pdGlvbiwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG1lc3NhZ2UudGV4dEJvZHksIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNwZWVjaFBheWxvYWQuaXNGaW5hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayB0aGUgbGVuZ3RoLCBzb21ldGltZXMgZW1wdHkgZmluYWxzIGFyZSByZXR1cm5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BlZWNoUmVzdWx0LnRleHQgIT09IHVuZGVmaW5lZCAmJiBzcGVlY2hSZXN1bHQudGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kRmluYWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNwZWVjaFBheWxvYWQuaWQgPT09IHRoaXMucHJpdkxhc3RQYXJ0aWFsVXR0ZXJhbmNlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbmQgZmluYWwgYXMgbm9ybWFsLiBXZSBoYWQgYSBub24tZW1wdHkgcGFydGlhbCBmb3IgdGhpcyBzYW1lIHV0dGVyYW5jZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc28gc2VuZGluZyB0aGUgZW1wdHkgZmluYWwgaXMgaW1wb3J0YW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kRmluYWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3VwcHJlc3MgdW5uZWVkZWQgZmluYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VuZEZpbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLnRyYW5zbGF0aW9uUmVjZWl2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLnRyYW5zbGF0aW9uUmVjZWl2ZWQodGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3RvciwgbmV3IENvbnZlcnNhdGlvblJlY2VpdmVkVHJhbnNsYXRpb25FdmVudEFyZ3MoQ29udmVyc2F0aW9uVHJhbnNsYXRvck1lc3NhZ2VUeXBlcy5maW5hbCwgc3BlZWNoUmVzdWx0LCBzZXNzaW9uSWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzcGVlY2hSZXN1bHQudGV4dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkxhc3RQYXJ0aWFsVXR0ZXJhbmNlSWQgPSBzcGVlY2hQYXlsb2FkLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLnRyYW5zbGF0aW9uUmVjZWl2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IudHJhbnNsYXRpb25SZWNlaXZlZCh0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLCBuZXcgQ29udmVyc2F0aW9uUmVjZWl2ZWRUcmFuc2xhdGlvbkV2ZW50QXJncyhDb252ZXJzYXRpb25UcmFuc2xhdG9yTWVzc2FnZVR5cGVzLnBhcnRpYWwsIHNwZWVjaFJlc3VsdCwgc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIFwidHJhbnNsYXRlZF9tZXNzYWdlXCIgaXMgYSB0ZXh0IG1lc3NhZ2Ugb3IgaW5zdGFudCBtZXNzYWdlIChJTSkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2xhdGVkX21lc3NhZ2VcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0UGF5bG9hZCA9IFRleHRSZXNwb25zZVBheWxvYWQuZnJvbUpTT04obWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dFJlc3VsdCA9IG5ldyBDb252ZXJzYXRpb25UcmFuc2xhdGlvblJlc3VsdCh0ZXh0UGF5bG9hZC5wYXJ0aWNpcGFudElkLCB0aGlzLmdldFRyYW5zbGF0aW9ucyh0ZXh0UGF5bG9hZC50cmFuc2xhdGlvbnMpLCB0ZXh0UGF5bG9hZC5sYW5ndWFnZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRleHRQYXlsb2FkLm9yaWdpbmFsVGV4dCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgbWVzc2FnZS50ZXh0Qm9keSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLnRyYW5zbGF0aW9uUmVjZWl2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci50cmFuc2xhdGlvblJlY2VpdmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IsIG5ldyBDb252ZXJzYXRpb25SZWNlaXZlZFRyYW5zbGF0aW9uRXZlbnRBcmdzKENvbnZlcnNhdGlvblRyYW5zbGF0b3JNZXNzYWdlVHlwZXMuaW5zdGFudE1lc3NhZ2UsIHRleHRSZXN1bHQsIHNlc3Npb25JZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGFueSB1bnN1cHBvcnRlZCBtZXNzYWdlIHR5cGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29udGludWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZUNvbnZlcnNhdGlvbk1lc3NhZ2VPdmVycmlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlcm1pbmF0ZU1lc3NhZ2VMb29wID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb21tdW5pY2F0aW9uQ3VzdG9kaWFuLnByb21pc2U7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGFydE1lc3NhZ2VMb29wKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEaXNwb3NlZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZVJldHJpZXZhbFByb21pc2UgPSB0aGlzLnJlY2VpdmVDb252ZXJzYXRpb25NZXNzYWdlT3ZlcnJpZGUoKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHlpZWxkIG1lc3NhZ2VSZXRyaWV2YWxQcm9taXNlO1xuICAgICAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxSZWNvZ25pdGlvbih0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbiA/IHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCA6IFwiXCIsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uID8gdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkIDogXCJcIiwgQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBDYW5jZWxsYXRpb25FcnJvckNvZGUuUnVudGltZUVycm9yLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBUYWtlcyBhbiBlc3RhYmxpc2hlZCB3ZWJzb2NrZXQgY29ubmVjdGlvbiB0byB0aGUgZW5kcG9pbnRcbiAgICBjb25maWdDb25uZWN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5pc0Rpc3Bvc2VkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ1Byb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWdQcm9taXNlLnRoZW4oKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGlvbi5zdGF0ZSgpID09PSBDb25uZWN0aW9uU3RhdGUuRGlzY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25JZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWdQcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25maWdDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlnUHJvbWlzZTtcbiAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWdQcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ0Nvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRlcm1pbmF0ZU1lc3NhZ2VMb29wKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ1Byb21pc2UgPSB0aGlzLmNvbm5lY3RJbXBsKCkudGhlbigoY29ubmVjdGlvbikgPT4gY29ubmVjdGlvbik7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlnUHJvbWlzZTtcbiAgICB9XG4gICAgZ2V0VHJhbnNsYXRpb25zKHNlcnZpY2VSZXN1bHRUcmFuc2xhdGlvbnMpIHtcbiAgICAgICAgbGV0IHRyYW5zbGF0aW9ucztcbiAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gc2VydmljZVJlc3VsdFRyYW5zbGF0aW9ucykge1xuICAgICAgICAgICAgdHJhbnNsYXRpb25zID0gbmV3IFRyYW5zbGF0aW9ucygpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0cmFuc2xhdGlvbiBvZiBzZXJ2aWNlUmVzdWx0VHJhbnNsYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgdHJhbnNsYXRpb25zLnNldCh0cmFuc2xhdGlvbi5sYW5nLCB0cmFuc2xhdGlvbi50cmFuc2xhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyYW5zbGF0aW9ucztcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvblNlcnZpY2VBZGFwdGVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBQcm94eUluZm8sIFJlc3RDb25maWdCYXNlLCBXZWJzb2NrZXRDb25uZWN0aW9uLCB9IGZyb20gXCIuLi8uLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCI7XG5pbXBvcnQgeyBTdHJpbmdVdGlscyB9IGZyb20gXCIuLi8uLi9jb21tb24vU3RyaW5nVXRpbHNcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuLi8uLi9zZGsvQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUlkIH0gZnJvbSBcIi4uLy4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBIZWFkZXJOYW1lcyB9IGZyb20gXCIuLi9IZWFkZXJOYW1lc1wiO1xuaW1wb3J0IHsgUXVlcnlQYXJhbWV0ZXJOYW1lcyB9IGZyb20gXCIuLi9RdWVyeVBhcmFtZXRlck5hbWVzXCI7XG5pbXBvcnQgeyBDb25uZWN0aW9uRmFjdG9yeUJhc2UgfSBmcm9tIFwiLi8uLi9Db25uZWN0aW9uRmFjdG9yeUJhc2VcIjtcbmltcG9ydCB7IFRyYW5zY3JpYmVyQ29ubmVjdGlvbkZhY3RvcnksIFRyYW5zbGF0aW9uQ29ubmVjdGlvbkZhY3RvcnksIFdlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIsIH0gZnJvbSBcIi4vLi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBDb25uZWN0aW9uIGZhY3RvcnkgZm9yIHRoZSBjb252ZXJzYXRpb24gdHJhbnNsYXRvci4gSGFuZGxlcyBjb25uZWN0aW5nIHRvIHRoZSByZWd1bGFyIHRyYW5zbGF0b3IgZW5kcG9pbnQsXG4gKiBhcyB3ZWxsIGFzIHRoZSB2aXJ0dWFsIG1pY3JvcGhvbmUgYXJyYXkgdHJhbnNjcmlwdGlvbiBlbmRwb2ludFxuICovXG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uVHJhbnNsYXRvckNvbm5lY3Rpb25GYWN0b3J5IGV4dGVuZHMgQ29ubmVjdGlvbkZhY3RvcnlCYXNlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb252R2V0dGVyKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGNvbnZHZXR0ZXIsIFwiY29udkdldHRlclwiKTtcbiAgICAgICAgdGhpcy5wcml2Q29udkdldHRlciA9IGNvbnZHZXR0ZXI7XG4gICAgfVxuICAgIGNyZWF0ZShjb25maWcsIGF1dGhJbmZvLCBjb25uZWN0aW9uSWQpIHtcbiAgICAgICAgY29uc3QgaXNWaXJ0TWljQXJyYXlFbmRwb2ludCA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFwiQ29udmVyc2F0aW9uVHJhbnNsYXRvcl9NdWx0aUNoYW5uZWxBdWRpb1wiLCBcIlwiKS50b1VwcGVyQ2FzZSgpID09PSBcIlRSVUVcIjtcbiAgICAgICAgY29uc3QgY29udkluZm8gPSB0aGlzLnByaXZDb252R2V0dGVyKCkucm9vbTtcbiAgICAgICAgY29uc3QgcmVnaW9uID0gY29udkluZm8uY29nbml0aXZlU3BlZWNoUmVnaW9uIHx8IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVnaW9uLCBcIlwiKTtcbiAgICAgICAgY29uc3QgcmVwbGFjZW1lbnRWYWx1ZXMgPSB7XG4gICAgICAgICAgICBob3N0U3VmZml4OiBDb25uZWN0aW9uRmFjdG9yeUJhc2UuZ2V0SG9zdFN1ZmZpeChyZWdpb24pLFxuICAgICAgICAgICAgcGF0aDogQ29udmVyc2F0aW9uVHJhbnNsYXRvckNvbm5lY3Rpb25GYWN0b3J5LkNUU19WSVJUX01JQ19QQVRILFxuICAgICAgICAgICAgcmVnaW9uOiBlbmNvZGVVUklDb21wb25lbnQocmVnaW9uKVxuICAgICAgICB9O1xuICAgICAgICByZXBsYWNlbWVudFZhbHVlc1tRdWVyeVBhcmFtZXRlck5hbWVzLkxhbmd1YWdlXSA9IGVuY29kZVVSSUNvbXBvbmVudChjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSwgXCJcIikpO1xuICAgICAgICByZXBsYWNlbWVudFZhbHVlc1tRdWVyeVBhcmFtZXRlck5hbWVzLkN0c01lZXRpbmdJZF0gPSBlbmNvZGVVUklDb21wb25lbnQoY29udkluZm8ucm9vbUlkKTtcbiAgICAgICAgcmVwbGFjZW1lbnRWYWx1ZXNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5DdHNEZXZpY2VJZF0gPSBlbmNvZGVVUklDb21wb25lbnQoY29udkluZm8ucGFydGljaXBhbnRJZCk7XG4gICAgICAgIHJlcGxhY2VtZW50VmFsdWVzW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuQ3RzSXNQYXJ0aWNpcGFudF0gPSBjb252SW5mby5pc0hvc3QgPyBcIlwiIDogKFwiJlwiICsgUXVlcnlQYXJhbWV0ZXJOYW1lcy5DdHNJc1BhcnRpY2lwYW50KTtcbiAgICAgICAgbGV0IGVuZHBvaW50VXJsID0gXCJcIjtcbiAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7fTtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHt9O1xuICAgICAgICBpZiAoaXNWaXJ0TWljQXJyYXlFbmRwb2ludCkge1xuICAgICAgICAgICAgLy8gY29ubmVjdGluZyB0byB0aGUgY29udmVyc2F0aW9uIHRyYW5zY3JpcHRpb24gdmlydHVhbCBtaWNyb3Bob25lIGFycmF5IGVuZHBvaW50XG4gICAgICAgICAgICBlbmRwb2ludFVybCA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnQpO1xuICAgICAgICAgICAgaWYgKCFlbmRwb2ludFVybCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhvc3ROYW1lID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Ib3N0LCBcInRyYW5zY3JpYmUue3JlZ2lvbn0uY3RzLnNwZWVjaHtob3N0U3VmZml4fVwiKTtcbiAgICAgICAgICAgICAgICBlbmRwb2ludFVybCA9IFwid3NzOi8vXCIgKyBob3N0TmFtZSArIFwie3BhdGh9XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBiZWNhdXNlIHRoZSByZWdpb24gY2FuIGNoYW5nZSBkdXJpbmcgYSBzZXNzaW9uLCB3ZSBzdXBwb3J0IGJlaW5nIHBhc3NlZCBhIGZvcm1hdCBzdHJpbmcgd2hpY2ggd2UgY2FuIHRoZW5cbiAgICAgICAgICAgIC8vIHJlcGxhY2Ugd2l0aCB0aGUgY29ycmVjdCBpbmZvcm1hdGlvbi5cbiAgICAgICAgICAgIGVuZHBvaW50VXJsID0gU3RyaW5nVXRpbHMuZm9ybWF0U3RyaW5nKGVuZHBvaW50VXJsLCByZXBsYWNlbWVudFZhbHVlcyk7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRVcmwgPSBuZXcgVVJMKGVuZHBvaW50VXJsKTtcbiAgICAgICAgICAgIHBhcnNlZFVybC5zZWFyY2hQYXJhbXMuZm9yRWFjaCgodmFsLCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtc1trZXldID0gdmFsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBjb25uRmFjdG9yeSA9IG5ldyBUcmFuc2NyaWJlckNvbm5lY3Rpb25GYWN0b3J5KCk7XG4gICAgICAgICAgICBjb25uRmFjdG9yeS5zZXRRdWVyeVBhcmFtcyhxdWVyeVBhcmFtcywgY29uZmlnLCBlbmRwb2ludFVybCk7XG4gICAgICAgICAgICAvLyBTb21lIHF1ZXJ5IHBhcmFtZXRlcnMgYXJlIHJlcXVpcmVkIGZvciB0aGUgQ1RTIGVuZHBvaW50LCBsZXQncyBleHBsaWNpdHkgc2V0IHRoZW0gaGVyZVxuICAgICAgICAgICAgcXVlcnlQYXJhbXNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5DdHNNZWV0aW5nSWRdID0gcmVwbGFjZW1lbnRWYWx1ZXNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5DdHNNZWV0aW5nSWRdO1xuICAgICAgICAgICAgcXVlcnlQYXJhbXNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5DdHNEZXZpY2VJZF0gPSByZXBsYWNlbWVudFZhbHVlc1tRdWVyeVBhcmFtZXRlck5hbWVzLkN0c0RldmljZUlkXTtcbiAgICAgICAgICAgIGlmICghY29udkluZm8uaXNIb3N0KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5DdHNJc1BhcnRpY2lwYW50XSA9IFwiXCI7IC8vIHRoaXMgZG9lc24ndCBoYXZlIGEgdmFsdWUgc28gc2V0IHRvIGFuIGVtcHR5IHN0cmluZ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEoUXVlcnlQYXJhbWV0ZXJOYW1lcy5Gb3JtYXQgaW4gcXVlcnlQYXJhbXMpKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5Gb3JtYXRdID0gXCJzaW1wbGVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnNlZFVybC5zZWFyY2hQYXJhbXMuZm9yRWFjaCgodmFsLCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgICBwYXJzZWRVcmwuc2VhcmNoUGFyYW1zLnNldChrZXksIHF1ZXJ5UGFyYW1zW2tleV0pO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBxdWVyeVBhcmFtc1trZXldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbmRwb2ludFVybCA9IHBhcnNlZFVybC50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gY29ubmVjdGluZyB0byByZWd1bGFyIHRyYW5zbGF0aW9uIGVuZHBvaW50XG4gICAgICAgICAgICBjb25zdCBjb25uRmFjdG9yeSA9IG5ldyBUcmFuc2xhdGlvbkNvbm5lY3Rpb25GYWN0b3J5KCk7XG4gICAgICAgICAgICBlbmRwb2ludFVybCA9IGNvbm5GYWN0b3J5LmdldEVuZHBvaW50VXJsKGNvbmZpZywgdHJ1ZSk7XG4gICAgICAgICAgICBlbmRwb2ludFVybCA9IFN0cmluZ1V0aWxzLmZvcm1hdFN0cmluZyhlbmRwb2ludFVybCwgcmVwbGFjZW1lbnRWYWx1ZXMpO1xuICAgICAgICAgICAgY29ubkZhY3Rvcnkuc2V0UXVlcnlQYXJhbXMocXVlcnlQYXJhbXMsIGNvbmZpZywgZW5kcG9pbnRVcmwpO1xuICAgICAgICB9XG4gICAgICAgIGhlYWRlcnNbSGVhZGVyTmFtZXMuQ29ubmVjdGlvbklkXSA9IGNvbm5lY3Rpb25JZDtcbiAgICAgICAgaGVhZGVyc1tSZXN0Q29uZmlnQmFzZS5jb25maWdQYXJhbXMudG9rZW5dID0gY29udkluZm8udG9rZW47XG4gICAgICAgIGlmIChhdXRoSW5mby50b2tlbikge1xuICAgICAgICAgICAgaGVhZGVyc1thdXRoSW5mby5oZWFkZXJOYW1lXSA9IGF1dGhJbmZvLnRva2VuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVuYWJsZUNvbXByZXNzaW9uID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoXCJTUEVFQ0gtRW5hYmxlV2Vic29ja2V0Q29tcHJlc3Npb25cIiwgXCJcIikudG9VcHBlckNhc2UoKSA9PT0gXCJUUlVFXCI7XG4gICAgICAgIHJldHVybiBuZXcgV2Vic29ja2V0Q29ubmVjdGlvbihlbmRwb2ludFVybCwgcXVlcnlQYXJhbXMsIGhlYWRlcnMsIG5ldyBXZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyKCksIFByb3h5SW5mby5mcm9tUmVjb2duaXplckNvbmZpZyhjb25maWcpLCBlbmFibGVDb21wcmVzc2lvbiwgY29ubmVjdGlvbklkKTtcbiAgICB9XG59XG5Db252ZXJzYXRpb25UcmFuc2xhdG9yQ29ubmVjdGlvbkZhY3RvcnkuQ1RTX1ZJUlRfTUlDX1BBVEggPSBcIi9zcGVlY2gvcmVjb2duaXRpb24vZHluYW1pY2F1ZGlvXCI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvblRyYW5zbGF0b3JDb25uZWN0aW9uRmFjdG9yeS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cbmltcG9ydCB7IFNlc3Npb25FdmVudEFyZ3MgfSBmcm9tIFwiLi4vLi4vc2RrL0V4cG9ydHNcIjtcbmV4cG9ydCBjbGFzcyBNdXRlQWxsRXZlbnRBcmdzIGV4dGVuZHMgU2Vzc2lvbkV2ZW50QXJncyB7XG4gICAgY29uc3RydWN0b3IoaXNNdXRlZCwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHN1cGVyKHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdklzTXV0ZWQgPSBpc011dGVkO1xuICAgIH1cbiAgICBnZXQgaXNNdXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklzTXV0ZWQ7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIExvY2tSb29tRXZlbnRBcmdzIGV4dGVuZHMgU2Vzc2lvbkV2ZW50QXJncyB7XG4gICAgY29uc3RydWN0b3IoaXNMb2NrZWQsIHNlc3Npb25JZCkge1xuICAgICAgICBzdXBlcihzZXNzaW9uSWQpO1xuICAgICAgICB0aGlzLnByaXZJc0xvY2tlZCA9IGlzTG9ja2VkO1xuICAgIH1cbiAgICBnZXQgaXNNdXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklzTG9ja2VkO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBQYXJ0aWNpcGFudEV2ZW50QXJncyBleHRlbmRzIFNlc3Npb25FdmVudEFyZ3Mge1xuICAgIGNvbnN0cnVjdG9yKHBhcnRpY2lwYW50LCBzZXNzaW9uSWQpIHtcbiAgICAgICAgc3VwZXIoc2Vzc2lvbklkKTtcbiAgICAgICAgdGhpcy5wcml2UGFydGljaXBhbnQgPSBwYXJ0aWNpcGFudDtcbiAgICB9XG4gICAgZ2V0IHBhcnRpY2lwYW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFydGljaXBhbnQ7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFBhcnRpY2lwYW50QXR0cmlidXRlRXZlbnRBcmdzIGV4dGVuZHMgU2Vzc2lvbkV2ZW50QXJncyB7XG4gICAgY29uc3RydWN0b3IocGFydGljaXBhbnRJZCwga2V5LCB2YWx1ZSwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHN1cGVyKHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdktleSA9IGtleTtcbiAgICAgICAgdGhpcy5wcml2VmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5wcml2UGFydGljaXBhbnRJZCA9IHBhcnRpY2lwYW50SWQ7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlZhbHVlO1xuICAgIH1cbiAgICBnZXQga2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2S2V5O1xuICAgIH1cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJ0aWNpcGFudElkO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBQYXJ0aWNpcGFudHNMaXN0RXZlbnRBcmdzIGV4dGVuZHMgU2Vzc2lvbkV2ZW50QXJncyB7XG4gICAgY29uc3RydWN0b3IoY29udmVyc2F0aW9uSWQsIHRva2VuLCB0cmFuc2xhdGVUbywgcHJvZmFuaXR5RmlsdGVyLCByb29tUHJvZmFuaXR5RmlsdGVyLCBpc1Jvb21Mb2NrZWQsIGlzTXV0ZUFsbCwgcGFydGljaXBhbnRzLCBzZXNzaW9uSWQpIHtcbiAgICAgICAgc3VwZXIoc2Vzc2lvbklkKTtcbiAgICAgICAgdGhpcy5wcml2Um9vbUlkID0gY29udmVyc2F0aW9uSWQ7XG4gICAgICAgIHRoaXMucHJpdlNlc3Npb25Ub2tlbiA9IHRva2VuO1xuICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGVUbyA9IHRyYW5zbGF0ZVRvO1xuICAgICAgICB0aGlzLnByaXZQcm9mYW5pdHlGaWx0ZXIgPSBwcm9mYW5pdHlGaWx0ZXI7XG4gICAgICAgIHRoaXMucHJpdlJvb21Qcm9mYW5pdHlGaWx0ZXIgPSByb29tUHJvZmFuaXR5RmlsdGVyO1xuICAgICAgICB0aGlzLnByaXZJc1Jvb21Mb2NrZWQgPSBpc1Jvb21Mb2NrZWQ7XG4gICAgICAgIHRoaXMucHJpdklzUm9vbUxvY2tlZCA9IGlzTXV0ZUFsbDtcbiAgICAgICAgdGhpcy5wcml2UGFydGljaXBhbnRzID0gcGFydGljaXBhbnRzO1xuICAgIH1cbiAgICBnZXQgc2Vzc2lvblRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U2Vzc2lvblRva2VuO1xuICAgIH1cbiAgICBnZXQgY29udmVyc2F0aW9uSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSb29tSWQ7XG4gICAgfVxuICAgIGdldCB0cmFuc2xhdGVUbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0ZVRvO1xuICAgIH1cbiAgICBnZXQgcHJvZmFuaXR5RmlsdGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvZmFuaXR5RmlsdGVyO1xuICAgIH1cbiAgICBnZXQgcm9vbVByb2Zhbml0eUZpbHRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJvb21Qcm9mYW5pdHlGaWx0ZXI7XG4gICAgfVxuICAgIGdldCBpc1Jvb21Mb2NrZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc1Jvb21Mb2NrZWQ7XG4gICAgfVxuICAgIGdldCBpc011dGVBbGwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc011dGVBbGw7XG4gICAgfVxuICAgIGdldCBwYXJ0aWNpcGFudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJ0aWNpcGFudHM7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvblJlY2VpdmVkVHJhbnNsYXRpb25FdmVudEFyZ3Mge1xuICAgIGNvbnN0cnVjdG9yKGNvbW1hbmQsIHBheWxvYWQsIHNlc3Npb25JZCkge1xuICAgICAgICB0aGlzLnByaXZQYXlsb2FkID0gcGF5bG9hZDtcbiAgICAgICAgdGhpcy5wcml2Q29tbWFuZCA9IGNvbW1hbmQ7XG4gICAgICAgIHRoaXMucHJpdlNlc3Npb25JZCA9IHNlc3Npb25JZDtcbiAgICB9XG4gICAgZ2V0IHBheWxvYWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXlsb2FkO1xuICAgIH1cbiAgICBnZXQgY29tbWFuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbW1hbmQ7XG4gICAgfVxuICAgIGdldCBzZXNzaW9uSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTZXNzaW9uSWQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db252ZXJzYXRpb25UcmFuc2xhdG9yRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKiogVXNlcnMgcGFydGljaXBhdGluZyBpbiB0aGUgY29udmVyc2F0aW9uICovXG5leHBvcnQgY2xhc3MgSW50ZXJuYWxQYXJ0aWNpcGFudHMge1xuICAgIGNvbnN0cnVjdG9yKHBhcnRpY2lwYW50cyA9IFtdLCBtZUlkKSB7XG4gICAgICAgIHRoaXMucGFydGljaXBhbnRzID0gcGFydGljaXBhbnRzO1xuICAgICAgICB0aGlzLm1lSWQgPSBtZUlkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgb3IgdXBkYXRlIGEgcGFydGljaXBhbnRcbiAgICAgKiBAcGFyYW0gdmFsdWVcbiAgICAgKi9cbiAgICBhZGRPclVwZGF0ZVBhcnRpY2lwYW50KHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXhpc3RzID0gdGhpcy5nZXRQYXJ0aWNpcGFudEluZGV4KHZhbHVlLmlkKTtcbiAgICAgICAgaWYgKGV4aXN0cyA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50cy5zcGxpY2UoZXhpc3RzLCAxLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50cy5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlbnN1cmUgaXQgd2FzIGFkZGVkIG9rXG4gICAgICAgIHJldHVybiB0aGlzLmdldFBhcnRpY2lwYW50KHZhbHVlLmlkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZCB0aGUgcGFydGljaXBhbnQncyBwb3NpdGlvbiBpbiB0aGUgcGFydGljaXBhbnRzIGxpc3QuXG4gICAgICogQHBhcmFtIGlkXG4gICAgICovXG4gICAgZ2V0UGFydGljaXBhbnRJbmRleChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHMuZmluZEluZGV4KChwKSA9PiBwLmlkID09PSBpZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmQgdGhlIHBhcnRpY2lwYW50IGJ5IGlkLlxuICAgICAqIEBwYXJhbSBpZFxuICAgICAqL1xuICAgIGdldFBhcnRpY2lwYW50KGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnRpY2lwYW50cy5maW5kKChwKSA9PiBwLmlkID09PSBpZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIHBhcnRpY2lwYW50IGZyb20gdGhlIHBhcnRpY2lwYW50cyBsaXN0LlxuICAgICAqL1xuICAgIGRlbGV0ZVBhcnRpY2lwYW50KGlkKSB7XG4gICAgICAgIHRoaXMucGFydGljaXBhbnRzID0gdGhpcy5wYXJ0aWNpcGFudHMuZmlsdGVyKChwKSA9PiBwLmlkICE9PSBpZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhlbHBlciB0byByZXR1cm4gdGhlIGNvbnZlcnNhdGlvbiBob3N0LlxuICAgICAqL1xuICAgIGdldCBob3N0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHMuZmluZCgocCkgPT4gcC5pc0hvc3QgPT09IHRydWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgdG8gcmV0dXJuIHRoZSBjdXJyZW50IHVzZXIuXG4gICAgICovXG4gICAgZ2V0IG1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQYXJ0aWNpcGFudCh0aGlzLm1lSWQpO1xuICAgIH1cbn1cbi8qKlxuICogTGlzdCBvZiBjb21tYW5kIG1lc3NhZ2UgdHlwZXNcbiAqL1xuZXhwb3J0IGNvbnN0IENvbnZlcnNhdGlvblRyYW5zbGF0b3JNZXNzYWdlVHlwZXMgPSB7XG4gICAgY29tbWFuZDogXCJjb21tYW5kXCIsXG4gICAgZmluYWw6IFwiZmluYWxcIixcbiAgICBpbmZvOiBcImluZm9cIixcbiAgICBpbnN0YW50TWVzc2FnZTogXCJpbnN0YW50X21lc3NhZ2VcIixcbiAgICBrZWVwQWxpdmU6IFwia2VlcF9hbGl2ZVwiLFxuICAgIHBhcnRpYWw6IFwicGFydGlhbFwiLFxuICAgIHBhcnRpY2lwYW50Q29tbWFuZDogXCJwYXJ0aWNpcGFudF9jb21tYW5kXCIsXG4gICAgdHJhbnNsYXRlZE1lc3NhZ2U6IFwidHJhbnNsYXRlZF9tZXNzYWdlXCJcbn07XG4vKipcbiAqIExpc3Qgb2YgY29tbWFuZCB0eXBlc1xuICovXG5leHBvcnQgY29uc3QgQ29udmVyc2F0aW9uVHJhbnNsYXRvckNvbW1hbmRUeXBlcyA9IHtcbiAgICBjaGFuZ2VOaWNrbmFtZTogXCJDaGFuZ2VOaWNrbmFtZVwiLFxuICAgIGRpc2Nvbm5lY3RTZXNzaW9uOiBcIkRpc2Nvbm5lY3RTZXNzaW9uXCIsXG4gICAgZWplY3RQYXJ0aWNpcGFudDogXCJFamVjdFBhcnRpY2lwYW50XCIsXG4gICAgaW5zdGFudF9tZXNzYWdlOiBcImluc3RhbnRfbWVzc2FnZVwiLFxuICAgIGpvaW5TZXNzaW9uOiBcIkpvaW5TZXNzaW9uXCIsXG4gICAgbGVhdmVTZXNzaW9uOiBcIkxlYXZlU2Vzc2lvblwiLFxuICAgIHBhcnRpY2lwYW50TGlzdDogXCJQYXJ0aWNpcGFudExpc3RcIixcbiAgICByb29tRXhwaXJhdGlvbldhcm5pbmc6IFwiUm9vbUV4cGlyYXRpb25XYXJuaW5nXCIsXG4gICAgc2V0TG9ja1N0YXRlOiBcIlNldExvY2tTdGF0ZVwiLFxuICAgIHNldE11dGU6IFwiU2V0TXV0ZVwiLFxuICAgIHNldE11dGVBbGw6IFwiU2V0TXV0ZUFsbFwiLFxuICAgIHNldFByb2Zhbml0eUZpbHRlcmluZzogXCJTZXRQcm9mYW5pdHlGaWx0ZXJpbmdcIixcbiAgICBzZXRUcmFuc2xhdGVUb0xhbmd1YWdlczogXCJTZXRUcmFuc2xhdGVUb0xhbmd1YWdlc1wiLFxuICAgIHNldFVzZVRUUzogXCJTZXRVc2VUVFNcIlxufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29udmVyc2F0aW9uVHJhbnNsYXRvckludGVyZmFjZXMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1jbGFzc2VzLXBlci1maWxlXG5pbXBvcnQgeyBSZWNvZ25pemVyQ29uZmlnIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQmFja2dyb3VuZEV2ZW50LCBFdmVudHMsIFRpbWVvdXQgfSBmcm9tIFwiLi4vLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuLi8uLi9zZGsvQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBDb25uZWN0aW9uLCBSZWNvZ25pemVyIH0gZnJvbSBcIi4uLy4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25Db25uZWN0aW9uRmFjdG9yeSB9IGZyb20gXCIuL0NvbnZlcnNhdGlvbkNvbm5lY3Rpb25GYWN0b3J5XCI7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25TZXJ2aWNlQWRhcHRlciB9IGZyb20gXCIuL0NvbnZlcnNhdGlvblNlcnZpY2VBZGFwdGVyXCI7XG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uUmVjb2duaXplckZhY3Rvcnkge1xuICAgIHN0YXRpYyBmcm9tQ29uZmlnKGNvbnZlcnNhdGlvbiwgc3BlZWNoQ29uZmlnLCBhdWRpb0NvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IENvbnZlcnNhdGlvblRyYW5zbGF0b3JSZWNvZ25pemVyKGNvbnZlcnNhdGlvbiwgc3BlZWNoQ29uZmlnLCBhdWRpb0NvbmZpZyk7XG4gICAgfVxufVxuLyoqXG4gKiBTZW5kcyBtZXNzYWdlcyB0byB0aGUgQ29udmVyc2F0aW9uIFRyYW5zbGF0b3Igd2Vic29ja2V0IGFuZCBsaXN0ZW5zIGZvciBpbmNvbWluZyBldmVudHMgY29udGFpbmluZyB3ZWJzb2NrZXQgbWVzc2FnZXMuXG4gKiBCYXNlZCBvZmYgdGhlIHJlY29nbml6ZXJzIGluIHRoZSBTREsgZm9sZGVyLlxuICovXG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uVHJhbnNsYXRvclJlY29nbml6ZXIgZXh0ZW5kcyBSZWNvZ25pemVyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb252ZXJzYXRpb24sIHNwZWVjaENvbmZpZywgYXVkaW9Db25maWcpIHtcbiAgICAgICAgY29uc3Qgc2VydmljZUNvbmZpZ0ltcGwgPSBzcGVlY2hDb25maWc7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChzZXJ2aWNlQ29uZmlnSW1wbCwgXCJzcGVlY2hDb25maWdcIik7XG4gICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkltcGwgPSBjb252ZXJzYXRpb247XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChjb252ZXJzYXRpb25JbXBsLCBcImNvbnZlcnNhdGlvbkltcGxcIik7XG4gICAgICAgIHN1cGVyKGF1ZGlvQ29uZmlnLCBzZXJ2aWNlQ29uZmlnSW1wbC5wcm9wZXJ0aWVzLCBuZXcgQ29udmVyc2F0aW9uQ29ubmVjdGlvbkZhY3RvcnkoKSk7XG4gICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbiA9IGNvbnZlcnNhdGlvbkltcGw7XG4gICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IHNlcnZpY2VDb25maWdJbXBsLnByb3BlcnRpZXMuY2xvbmUoKTtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbiA9IENvbm5lY3Rpb24uZnJvbVJlY29nbml6ZXIodGhpcyk7XG4gICAgICAgIHRoaXMucHJpdlNldFRpbWVvdXQgPSAodHlwZW9mIChCbG9iKSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgKFdvcmtlcikgIT09IFwidW5kZWZpbmVkXCIpID8gVGltZW91dC5zZXRUaW1lb3V0IDogc2V0VGltZW91dDtcbiAgICAgICAgdGhpcy5wcml2Q2xlYXJUaW1lb3V0ID0gKHR5cGVvZiAoQmxvYikgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIChXb3JrZXIpICE9PSBcInVuZGVmaW5lZFwiKSA/IFRpbWVvdXQuY2xlYXJUaW1lb3V0IDogY2xlYXJUaW1lb3V0O1xuICAgIH1cbiAgICBzZXQgY29ubmVjdGVkKGNiKSB7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb24uY29ubmVjdGVkID0gY2I7XG4gICAgfVxuICAgIHNldCBkaXNjb25uZWN0ZWQoY2IpIHtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbi5kaXNjb25uZWN0ZWQgPSBjYjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBzcGVlY2ggbGFuZ3VhZ2UgdXNlZCBieSB0aGUgcmVjb2duaXplclxuICAgICAqL1xuICAgIGdldCBzcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBwcm9wZXJ0aWVzIGZvciB0aGUgcmVjb2duaXplclxuICAgICAqL1xuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcztcbiAgICB9XG4gICAgaXNEaXNwb3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklzRGlzcG9zZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdG8gdGhlIHJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0gdG9rZW5cbiAgICAgKi9cbiAgICBjb25uZWN0KHRva2VuLCBjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdklzRGlzcG9zZWQpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRva2VuLCBcInRva2VuXCIpO1xuICAgICAgICAgICAgdGhpcy5wcml2UmVjby5jb252ZXJzYXRpb25UcmFuc2xhdG9yVG9rZW4gPSB0b2tlbjtcbiAgICAgICAgICAgIHRoaXMucmVzZXRDb252ZXJzYXRpb25UaW1lb3V0KCk7XG4gICAgICAgICAgICB0aGlzLnByaXZSZWNvLmNvbm5lY3RBc3luYyhjYiwgZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVkRXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgZXJyKHR5cGVkRXJyb3IubmFtZSArIFwiOiBcIiArIHR5cGVkRXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlcnIoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNjb25uZWN0IGZyb20gdGhlIHJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkaXNjb25uZWN0KGNiLCBlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2SXNEaXNwb3NlZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2VGltZW91dFRva2VuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hcmd1bWVudFxuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNsZWFyVGltZW91dCh0aGlzLnByaXZUaW1lb3V0VG9rZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcml2UmVjby5kaXNjb25uZWN0KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVkRXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgZXJyKHR5cGVkRXJyb3IubmFtZSArIFwiOiBcIiArIHR5cGVkRXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlcnIoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERlc3Ryb3kgdGhlIHJlY29nbml6ZXIuXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UodHJ1ZSkuY2F0Y2goKHJlYXNvbikgPT4ge1xuICAgICAgICAgICAgICAgIEV2ZW50cy5pbnN0YW5jZS5vbkV2ZW50KG5ldyBCYWNrZ3JvdW5kRXZlbnQocmVhc29uKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIHRoZSBtdXRlIGFsbCBwYXJ0aWNpcGFudHMgY29tbWFuZCB0byB0aGUgd2Vic29ja2V0XG4gICAgICogQHBhcmFtIGNvbnZlcnNhdGlvbklkXG4gICAgICogQHBhcmFtIHBhcnRpY2lwYW50SWRcbiAgICAgKiBAcGFyYW0gaXNNdXRlZFxuICAgICAqL1xuICAgIHNlbmRSZXF1ZXN0KGNvbW1hbmQsIGNiLCBlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2SXNEaXNwb3NlZCk7XG4gICAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKGNvbW1hbmQsIGNiLCBlcnIpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZWRFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICBlcnIodHlwZWRFcnJvci5uYW1lICsgXCI6IFwiICsgdHlwZWRFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRGVzdHJveSB0aGUgcmVjb2duaXplci5cbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSh0cnVlKS5jYXRjaCgocmVhc29uKSA9PiB7XG4gICAgICAgICAgICAgICAgRXZlbnRzLmluc3RhbmNlLm9uRXZlbnQobmV3IEJhY2tncm91bmRFdmVudChyZWFzb24pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlIGFuZCBkaXNwb3NlIHRoZSByZWNvZ25pemVyXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJpdklzRGlzcG9zZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb24uY2xvc2VDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmRpc3Bvc2UodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIHRoZSByZWNvZ25pemVyXG4gICAgICogQHBhcmFtIGRpc3Bvc2luZ1xuICAgICAqL1xuICAgIGRpc3Bvc2UoZGlzcG9zaW5nKSB7XG4gICAgICAgIGNvbnN0IF9zdXBlciA9IE9iamVjdC5jcmVhdGUobnVsbCwge1xuICAgICAgICAgICAgZGlzcG9zZTogeyBnZXQ6ICgpID0+IHN1cGVyLmRpc3Bvc2UgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZJc0Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpc3Bvc2luZykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZUaW1lb3V0VG9rZW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hcmd1bWVudFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDbGVhclRpbWVvdXQodGhpcy5wcml2VGltZW91dFRva2VuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uLmNsb3NlQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHlpZWxkIF9zdXBlci5kaXNwb3NlLmNhbGwodGhpcywgZGlzcG9zaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgY29uZmlnIGZvciB0aGUgcmVjb2duaXplclxuICAgICAqIEBwYXJhbSBzcGVlY2hDb25maWdcbiAgICAgKi9cbiAgICBjcmVhdGVSZWNvZ25pemVyQ29uZmlnKHNwZWVjaENvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IFJlY29nbml6ZXJDb25maWcoc3BlZWNoQ29uZmlnLCB0aGlzLnByaXZQcm9wZXJ0aWVzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRoZSBzZXJ2aWNlIHJlY29nbml6ZXIuXG4gICAgICogVGhlIGF1ZGlvIHNvdXJjZSBpcyByZWR1bmRuYW50IGhlcmUgYnV0IGlzIHJlcXVpcmVkIGJ5IHRoZSBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKiBAcGFyYW0gYXV0aGVudGljYXRpb25cbiAgICAgKiBAcGFyYW0gY29ubmVjdGlvbkZhY3RvcnlcbiAgICAgKiBAcGFyYW0gYXVkaW9Db25maWdcbiAgICAgKiBAcGFyYW0gcmVjb2duaXplckNvbmZpZ1xuICAgICAqL1xuICAgIGNyZWF0ZVNlcnZpY2VSZWNvZ25pemVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Db25maWcsIHJlY29nbml6ZXJDb25maWcpIHtcbiAgICAgICAgY29uc3QgYXVkaW9Tb3VyY2UgPSBhdWRpb0NvbmZpZztcbiAgICAgICAgcmV0dXJuIG5ldyBDb252ZXJzYXRpb25TZXJ2aWNlQWRhcHRlcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCB0aGlzKTtcbiAgICB9XG4gICAgc2VuZE1lc3NhZ2UobXNnLCBjYiwgZXJyKSB7XG4gICAgICAgIGNvbnN0IHdpdGhBc3luYyA9IHRoaXMucHJpdlJlY287XG4gICAgICAgIGNvbnN0IFByb21pc2VUb0VtcHR5Q2FsbGJhY2sgPSAocHJvbWlzZSwgY2IsIGVycikgPT4ge1xuICAgICAgICAgICAgaWYgKHByb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFjYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycihgJ1VuaGFuZGxlZCBlcnJvciBvbiBwcm9taXNlIGNhbGxiYWNrOiAke2V9J2ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgKHJlYXNvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZW1wdHlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHsgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihcIk51bGwgcHJvbWlzZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFByb21pc2VUb0VtcHR5Q2FsbGJhY2sod2l0aEFzeW5jLnNlbmRNZXNzYWdlQXN5bmMobXNnKSwgY2IsIGVycik7XG4gICAgICAgIHRoaXMucmVzZXRDb252ZXJzYXRpb25UaW1lb3V0KCk7XG4gICAgfVxuICAgIHJlc2V0Q29udmVyc2F0aW9uVGltZW91dCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdlRpbWVvdXRUb2tlbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hcmd1bWVudFxuICAgICAgICAgICAgdGhpcy5wcml2Q2xlYXJUaW1lb3V0KHRoaXMucHJpdlRpbWVvdXRUb2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2VGltZW91dFRva2VuID0gdGhpcy5wcml2U2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KHRoaXMucHJpdkNvbnZlcnNhdGlvbi5nZXRLZWVwQWxpdmUoKSk7XG4gICAgICAgIH0sIDYwMDAwKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvblRyYW5zbGF0b3JSZWNvZ25pemVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBEZWZlcnJlZCwgTWVzc2FnZVR5cGUsIFJhd1dlYnNvY2tldE1lc3NhZ2UsIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25Db25uZWN0aW9uTWVzc2FnZSB9IGZyb20gXCIuL0NvbnZlcnNhdGlvbkNvbm5lY3Rpb25NZXNzYWdlXCI7XG4vKipcbiAqIEJhc2VkIG9mZiBXZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyLiBUaGUgbWVzc2FnZXMgZm9yIENvbnZlcnNhdGlvbiBUcmFuc2xhdG9yIGhhdmUgc29tZSB2YXJpYXRpb25zIGZyb20gdGhlIFNwZWVjaCBtZXNzYWdlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvbldlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIge1xuICAgIC8qKlxuICAgICAqIEZvcm1hdCBpbmNvbWluZyBtZXNzYWdlczogdGV4dCAoc3BlZWNoIHBhcnRpYWwvZmluYWwsIElNKSBvciBiaW5hcnkgKHR0cylcbiAgICAgKi9cbiAgICB0b0Nvbm5lY3Rpb25NZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5UZXh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5jb21pbmdNZXNzYWdlID0gbmV3IENvbnZlcnNhdGlvbkNvbm5lY3Rpb25NZXNzYWdlKG1lc3NhZ2UubWVzc2FnZVR5cGUsIG1lc3NhZ2UudGV4dENvbnRlbnQsIHt9LCBtZXNzYWdlLmlkKTtcbiAgICAgICAgICAgICAgICBkZWZlcnJhbC5yZXNvbHZlKGluY29taW5nTWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5CaW5hcnkpIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJhbC5yZXNvbHZlKG5ldyBDb252ZXJzYXRpb25Db25uZWN0aW9uTWVzc2FnZShtZXNzYWdlLm1lc3NhZ2VUeXBlLCBtZXNzYWdlLmJpbmFyeUNvbnRlbnQsIHVuZGVmaW5lZCwgbWVzc2FnZS5pZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBkZWZlcnJhbC5yZWplY3QoYEVycm9yIGZvcm1hdHRpbmcgdGhlIG1lc3NhZ2UuIEVycm9yOiAke2V9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZmVycmFsLnByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcm1hdCBvdXRnb2luZyBtZXNzYWdlczogdGV4dCAoY29tbWFuZHMgb3IgSU0pXG4gICAgICovXG4gICAgZnJvbUNvbm5lY3Rpb25NZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5UZXh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IGAke21lc3NhZ2UudGV4dEJvZHkgPyBtZXNzYWdlLnRleHRCb2R5IDogXCJcIn1gO1xuICAgICAgICAgICAgICAgIGRlZmVycmFsLnJlc29sdmUobmV3IFJhd1dlYnNvY2tldE1lc3NhZ2UoTWVzc2FnZVR5cGUuVGV4dCwgcGF5bG9hZCwgbWVzc2FnZS5pZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBkZWZlcnJhbC5yZWplY3QoYEVycm9yIGZvcm1hdHRpbmcgdGhlIG1lc3NhZ2UuICR7ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmZXJyYWwucHJvbWlzZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvbldlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmV4cG9ydCB7IENvbnZlcnNhdGlvbk1hbmFnZXIgfSBmcm9tIFwiLi9Db252ZXJzYXRpb25NYW5hZ2VyXCI7XG5leHBvcnQgeyBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnIH0gZnJvbSBcIi4vQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZ1wiO1xuZXhwb3J0IHsgQ29udmVyc2F0aW9uUmVjb2duaXplckZhY3RvcnkgfSBmcm9tIFwiLi9Db252ZXJzYXRpb25UcmFuc2xhdG9yUmVjb2duaXplclwiO1xuZXhwb3J0IHsgVHJhbnNjcmliZXJSZWNvZ25pemVyIH0gZnJvbSBcIi4vVHJhbnNjcmliZXJSZWNvZ25pemVyXCI7XG5leHBvcnQgeyBDb252ZXJzYXRpb25SZWNlaXZlZFRyYW5zbGF0aW9uRXZlbnRBcmdzLCBMb2NrUm9vbUV2ZW50QXJncywgTXV0ZUFsbEV2ZW50QXJncywgUGFydGljaXBhbnRBdHRyaWJ1dGVFdmVudEFyZ3MsIFBhcnRpY2lwYW50RXZlbnRBcmdzLCBQYXJ0aWNpcGFudHNMaXN0RXZlbnRBcmdzIH0gZnJvbSBcIi4vQ29udmVyc2F0aW9uVHJhbnNsYXRvckV2ZW50QXJnc1wiO1xuZXhwb3J0IHsgQ29udmVyc2F0aW9uVHJhbnNsYXRvckNvbW1hbmRUeXBlcywgQ29udmVyc2F0aW9uVHJhbnNsYXRvck1lc3NhZ2VUeXBlcywgSW50ZXJuYWxQYXJ0aWNpcGFudHMgfSBmcm9tIFwiLi9Db252ZXJzYXRpb25UcmFuc2xhdG9ySW50ZXJmYWNlc1wiO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FeHBvcnRzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5jb25zdCBwYXJzZUNvbW1hbmRSZXNwb25zZSA9IChqc29uKSA9PiBKU09OLnBhcnNlKGpzb24pO1xuZXhwb3J0IGNsYXNzIENvbW1hbmRSZXNwb25zZVBheWxvYWQge1xuICAgIGNvbnN0cnVjdG9yKGpzb24pIHtcbiAgICAgICAgdGhpcy5wcml2Q29tbWFuZFJlc3BvbnNlID0gcGFyc2VDb21tYW5kUmVzcG9uc2UoanNvbik7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29tbWFuZFJlc3BvbnNlLnR5cGU7XG4gICAgfVxuICAgIGdldCBjb21tYW5kKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29tbWFuZFJlc3BvbnNlLmNvbW1hbmQ7XG4gICAgfVxuICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbW1hbmRSZXNwb25zZS5pZDtcbiAgICB9XG4gICAgZ2V0IG5pY2tuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29tbWFuZFJlc3BvbnNlLm5pY2tuYW1lO1xuICAgIH1cbiAgICBnZXQgcGFydGljaXBhbnRJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbW1hbmRSZXNwb25zZS5wYXJ0aWNpcGFudElkO1xuICAgIH1cbiAgICBnZXQgcm9vbWlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29tbWFuZFJlc3BvbnNlLnJvb21pZDtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29tbWFuZFJlc3BvbnNlLnZhbHVlO1xuICAgIH1cbiAgICBnZXQgdG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb21tYW5kUmVzcG9uc2UudG9rZW47XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29tbWFuZFJlc3BvbnNlUGF5bG9hZChqc29uKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbW1hbmRSZXNwb25zZVBheWxvYWQuanMubWFwXG4iLCJleHBvcnQgeyBDb21tYW5kUmVzcG9uc2VQYXlsb2FkIH0gZnJvbSBcIi4vQ29tbWFuZFJlc3BvbnNlUGF5bG9hZFwiO1xuZXhwb3J0IHsgUGFydGljaXBhbnRzTGlzdFBheWxvYWRSZXNwb25zZSwgUGFydGljaXBhbnRQYXlsb2FkUmVzcG9uc2UgfSBmcm9tIFwiLi9QYXJ0aWNpcGFudFJlc3BvbnNlUGF5bG9hZFwiO1xuZXhwb3J0IHsgU3BlZWNoUmVzcG9uc2VQYXlsb2FkLCBUZXh0UmVzcG9uc2VQYXlsb2FkIH0gZnJvbSBcIi4vVHJhbnNsYXRpb25SZXNwb25zZVBheWxvYWRcIjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXhwb3J0cy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuY29uc3QgcGFyc2VMaXN0UmVzcG9uc2UgPSAoanNvbikgPT4gSlNPTi5wYXJzZShqc29uKTtcbmNvbnN0IHBhcnNlUGFydGljaXBhbnRSZXNwb25zZSA9IChqc29uKSA9PiBKU09OLnBhcnNlKGpzb24pO1xuZXhwb3J0IGNsYXNzIFBhcnRpY2lwYW50c0xpc3RQYXlsb2FkUmVzcG9uc2Uge1xuICAgIGNvbnN0cnVjdG9yKGpzb24pIHtcbiAgICAgICAgdGhpcy5wcml2UGFydGljaXBhbnRzUGF5bG9hZFJlc3BvbnNlID0gcGFyc2VMaXN0UmVzcG9uc2UoanNvbik7XG4gICAgfVxuICAgIGdldCByb29taWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJ0aWNpcGFudHNQYXlsb2FkUmVzcG9uc2Uucm9vbWlkO1xuICAgIH1cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJ0aWNpcGFudHNQYXlsb2FkUmVzcG9uc2UuaWQ7XG4gICAgfVxuICAgIGdldCBjb21tYW5kKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFydGljaXBhbnRzUGF5bG9hZFJlc3BvbnNlLmNvbW1hbmQ7XG4gICAgfVxuICAgIGdldCBwYXJ0aWNpcGFudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJ0aWNpcGFudHNQYXlsb2FkUmVzcG9uc2UucGFydGljaXBhbnRzO1xuICAgIH1cbiAgICBnZXQgdG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJ0aWNpcGFudHNQYXlsb2FkUmVzcG9uc2UudG9rZW47XG4gICAgfVxuICAgIGdldCB0cmFuc2xhdGVUbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlBhcnRpY2lwYW50c1BheWxvYWRSZXNwb25zZS50cmFuc2xhdGVUbztcbiAgICB9XG4gICAgZ2V0IHByb2Zhbml0eUZpbHRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlBhcnRpY2lwYW50c1BheWxvYWRSZXNwb25zZS5wcm9mYW5pdHlGaWx0ZXI7XG4gICAgfVxuICAgIGdldCByb29tUHJvZmFuaXR5RmlsdGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFydGljaXBhbnRzUGF5bG9hZFJlc3BvbnNlLnJvb21Qcm9mYW5pdHlGaWx0ZXI7XG4gICAgfVxuICAgIGdldCByb29tTG9ja2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFydGljaXBhbnRzUGF5bG9hZFJlc3BvbnNlLnJvb21Mb2NrZWQ7XG4gICAgfVxuICAgIGdldCBtdXRlQWxsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFydGljaXBhbnRzUGF5bG9hZFJlc3BvbnNlLm11dGVBbGw7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFydGljaXBhbnRzUGF5bG9hZFJlc3BvbnNlLnR5cGU7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIHJldHVybiBuZXcgUGFydGljaXBhbnRzTGlzdFBheWxvYWRSZXNwb25zZShqc29uKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUGFydGljaXBhbnRQYXlsb2FkUmVzcG9uc2Uge1xuICAgIGNvbnN0cnVjdG9yKGpzb24pIHtcbiAgICAgICAgdGhpcy5wcml2UGFydGljaXBhbnRQYXlsb2FkUmVzcG9uc2UgPSBwYXJzZVBhcnRpY2lwYW50UmVzcG9uc2UoanNvbik7XG4gICAgfVxuICAgIGdldCBuaWNrbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlBhcnRpY2lwYW50UGF5bG9hZFJlc3BvbnNlLm5pY2tuYW1lO1xuICAgIH1cbiAgICBnZXQgbG9jYWxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFydGljaXBhbnRQYXlsb2FkUmVzcG9uc2UubG9jYWxlO1xuICAgIH1cbiAgICBnZXQgdXNldHRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFydGljaXBhbnRQYXlsb2FkUmVzcG9uc2UudXNldHRzO1xuICAgIH1cbiAgICBnZXQgaXNtdXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlBhcnRpY2lwYW50UGF5bG9hZFJlc3BvbnNlLmlzbXV0ZWQ7XG4gICAgfVxuICAgIGdldCBpc2hvc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJ0aWNpcGFudFBheWxvYWRSZXNwb25zZS5pc2hvc3Q7XG4gICAgfVxuICAgIGdldCBwYXJ0aWNpcGFudElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFydGljaXBhbnRQYXlsb2FkUmVzcG9uc2UucGFydGljaXBhbnRJZDtcbiAgICB9XG4gICAgZ2V0IGF2YXRhcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlBhcnRpY2lwYW50UGF5bG9hZFJlc3BvbnNlLmF2YXRhcjtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJ0aWNpcGFudFBheWxvYWRSZXNwb25zZShqc29uKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBhcnRpY2lwYW50UmVzcG9uc2VQYXlsb2FkLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5jb25zdCBwYXJzZVNwZWVjaFJlc3BvbnNlID0gKGpzb24pID0+IEpTT04ucGFyc2UoanNvbik7XG5jb25zdCBwYXJzZVRleHRSZXNwb25zZSA9IChqc29uKSA9PiBKU09OLnBhcnNlKGpzb24pO1xuZXhwb3J0IGNsYXNzIFNwZWVjaFJlc3BvbnNlUGF5bG9hZCB7XG4gICAgY29uc3RydWN0b3IoanNvbikge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hSZXNwb25zZSA9IHBhcnNlU3BlZWNoUmVzcG9uc2UoanNvbik7XG4gICAgfVxuICAgIGdldCByZWNvZ25pdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFJlc3BvbnNlLnJlY29nbml0aW9uO1xuICAgIH1cbiAgICBnZXQgdHJhbnNsYXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUmVzcG9uc2UudHJhbnNsYXRpb25zO1xuICAgIH1cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hSZXNwb25zZS5pZDtcbiAgICB9XG4gICAgZ2V0IGxhbmd1YWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUmVzcG9uc2UubGFuZ3VhZ2U7XG4gICAgfVxuICAgIGdldCBuaWNrbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFJlc3BvbnNlLm5pY2tuYW1lO1xuICAgIH1cbiAgICBnZXQgcGFydGljaXBhbnRJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFJlc3BvbnNlLnBhcnRpY2lwYW50SWQ7XG4gICAgfVxuICAgIGdldCByb29taWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hSZXNwb25zZS5yb29taWQ7XG4gICAgfVxuICAgIGdldCB0aW1lc3RhbXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hSZXNwb25zZS50aW1lc3RhbXA7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUmVzcG9uc2UudHlwZTtcbiAgICB9XG4gICAgZ2V0IGlzRmluYWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hSZXNwb25zZS50eXBlID09PSBcImZpbmFsXCI7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3BlZWNoUmVzcG9uc2VQYXlsb2FkKGpzb24pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBUZXh0UmVzcG9uc2VQYXlsb2FkIHtcbiAgICBjb25zdHJ1Y3Rvcihqc29uKSB7XG4gICAgICAgIHRoaXMucHJpdlRleHRSZXNwb25zZSA9IHBhcnNlVGV4dFJlc3BvbnNlKGpzb24pO1xuICAgIH1cbiAgICBnZXQgb3JpZ2luYWxUZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VGV4dFJlc3BvbnNlLm9yaWdpbmFsVGV4dDtcbiAgICB9XG4gICAgZ2V0IHRyYW5zbGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRleHRSZXNwb25zZS50cmFuc2xhdGlvbnM7XG4gICAgfVxuICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRleHRSZXNwb25zZS5pZDtcbiAgICB9XG4gICAgZ2V0IGxhbmd1YWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VGV4dFJlc3BvbnNlLmxhbmd1YWdlO1xuICAgIH1cbiAgICBnZXQgbmlja25hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUZXh0UmVzcG9uc2Uubmlja25hbWU7XG4gICAgfVxuICAgIGdldCBwYXJ0aWNpcGFudElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VGV4dFJlc3BvbnNlLnBhcnRpY2lwYW50SWQ7XG4gICAgfVxuICAgIGdldCByb29taWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUZXh0UmVzcG9uc2Uucm9vbWlkO1xuICAgIH1cbiAgICBnZXQgdGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VGV4dFJlc3BvbnNlLnRpbWVzdGFtcDtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUZXh0UmVzcG9uc2UudHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUZXh0UmVzcG9uc2VQYXlsb2FkKGpzb24pO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNsYXRpb25SZXNwb25zZVBheWxvYWQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyB9IGZyb20gXCIuLi8uLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4uLy4uL3Nkay9Db250cmFjdHNcIjtcbmltcG9ydCB7IFByb3BlcnR5SWQsIFJlY29nbml6ZXIsIH0gZnJvbSBcIi4uLy4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBSZWNvZ25pdGlvbk1vZGUsIFJlY29nbml6ZXJDb25maWcsIFRyYW5zY3JpYmVyQ29ubmVjdGlvbkZhY3RvcnksIFRyYW5zY3JpcHRpb25TZXJ2aWNlUmVjb2duaXplciwgfSBmcm9tIFwiLi4vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIFRyYW5zY3JpYmVyUmVjb2duaXplciBleHRlbmRzIFJlY29nbml6ZXIge1xuICAgIC8qKlxuICAgICAqIFRyYW5zY3JpYmVyUmVjb2duaXplciBjb25zdHJ1Y3Rvci5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge1NwZWVjaFRyYW5zbGF0aW9uQ29uZmlnfSBzcGVlY2hUcmFuc2xhdGlvbkNvbmZpZyAtIE5vbi1hdWRpbyBjb25maWd1cmF0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVjb2duaXplclxuICAgICAqIEBwYXJhbSB7QXVkaW9Db25maWd9IGF1ZGlvQ29uZmlnIC0gQW4gYXVkaW8gY29uZmlndXJhdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIHJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzcGVlY2hUcmFuc2xhdGlvbkNvbmZpZywgYXVkaW9Db25maWcpIHtcbiAgICAgICAgY29uc3Qgc3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsID0gc3BlZWNoVHJhbnNsYXRpb25Db25maWc7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChzcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwsIFwic3BlZWNoVHJhbnNsYXRpb25Db25maWdcIik7XG4gICAgICAgIGNvbnN0IGF1ZGlvQ29uZmlnSW1wbCA9IGF1ZGlvQ29uZmlnO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwoYXVkaW9Db25maWdJbXBsLCBcImF1ZGlvQ29uZmlnSW1wbFwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5zcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlLCBQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlXSk7XG4gICAgICAgIHN1cGVyKGF1ZGlvQ29uZmlnLCBzcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvcGVydGllcywgbmV3IFRyYW5zY3JpYmVyQ29ubmVjdGlvbkZhY3RvcnkoKSk7XG4gICAgICAgIHRoaXMucHJpdkRpc3Bvc2VkUmVjb2duaXplciA9IGZhbHNlO1xuICAgIH1cbiAgICBnZXQgc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSgpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZFJlY29nbml6ZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlKTtcbiAgICB9XG4gICAgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzO1xuICAgIH1cbiAgICBnZXQgYXV0aG9yaXphdGlvblRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4pO1xuICAgIH1cbiAgICBzZXQgYXV0aG9yaXphdGlvblRva2VuKHRva2VuKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0b2tlbiwgXCJ0b2tlblwiKTtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4sIHRva2VuKTtcbiAgICB9XG4gICAgc2V0IGNvbnZlcnNhdGlvbihjKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGMsIFwiQ29udmVyc2F0aW9uXCIpO1xuICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb24gPSBjO1xuICAgIH1cbiAgICBnZXRDb252ZXJzYXRpb25JbmZvKCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZCh0aGlzLnByaXZDb252ZXJzYXRpb24sIFwiQ29udmVyc2F0aW9uXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29udmVyc2F0aW9uLmNvbnZlcnNhdGlvbkluZm87XG4gICAgfVxuICAgIHN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmMoY2IsIGVycikge1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMuc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luY0ltcGwoUmVjb2duaXRpb25Nb2RlLkNvbnZlcnNhdGlvbiksIGNiLCBlcnIpO1xuICAgIH1cbiAgICBzdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmMoY2IsIGVycikge1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMuc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jSW1wbCgpLCBjYiwgZXJyKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJpdkRpc3Bvc2VkUmVjb2duaXplcikge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuZGlzcG9zZSh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIFB1c2ggYXN5bmMgam9pbi9sZWF2ZSBjb252ZXJzYXRpb24gbWVzc2FnZSB2aWEgc2VydmljZVJlY29nbml6ZXJcbiAgICBwdXNoQ29udmVyc2F0aW9uRXZlbnQoY29udmVyc2F0aW9uSW5mbywgY29tbWFuZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVjbyA9ICh0aGlzLnByaXZSZWNvKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHJlY28sIFwic2VydmljZVJlY29nbml6ZXJcIik7XG4gICAgICAgICAgICB5aWVsZCByZWNvLnNlbmRTcGVlY2hFdmVudEFzeW5jKGNvbnZlcnNhdGlvbkluZm8sIGNvbW1hbmQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW5mb3JjZUF1ZGlvR2F0aW5nKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgYXVkaW9Db25maWdJbXBsID0gdGhpcy5hdWRpb0NvbmZpZztcbiAgICAgICAgICAgIGNvbnN0IGZvcm1hdCA9IHlpZWxkIGF1ZGlvQ29uZmlnSW1wbC5mb3JtYXQ7XG4gICAgICAgICAgICBjb25zdCBjaGFubmVscyA9IGZvcm1hdC5jaGFubmVscztcbiAgICAgICAgICAgIGlmIChjaGFubmVscyA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoXCJmMGY1ZGViYy1mOGM5LTQ4OTItYWM0Yi05MGE3YWIzNTlmZDJcIiwgXCJmYWxzZVwiKS50b0xvd2VyQ2FzZSgpICE9PSBcInRydWVcIikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTaW5nbGUgY2hhbm5lbCBhdWRpbyBjb25maWd1cmF0aW9uIGZvciBDb252ZXJzYXRpb25UcmFuc2NyaWJlciBpcyBjdXJyZW50bHkgdW5kZXIgcHJpdmF0ZSBwcmV2aWV3LCBwbGVhc2UgY29udGFjdCBkaWFyaXphdGlvbnJlcXVlc3RAbWljcm9zb2Z0LmNvbSBmb3IgbW9yZSBkZXRhaWxzXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoYW5uZWxzICE9PSA4KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBhdWRpbyBjb25maWd1cmF0aW9uOiBEZXRlY3RlZCAke2NoYW5uZWxzfS1jaGFubmVsIGF1ZGlvYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25uZWN0Q2FsbGJhY2tzKHRyYW5zY3JpYmVyKSB7XG4gICAgICAgIHRoaXMuY2FuY2VsZWQgPSAocywgZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCEhdHJhbnNjcmliZXIuY2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgICB0cmFuc2NyaWJlci5jYW5jZWxlZCh0cmFuc2NyaWJlciwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVjb2duaXppbmcgPSAocywgZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCEhdHJhbnNjcmliZXIudHJhbnNjcmliaW5nKSB7XG4gICAgICAgICAgICAgICAgdHJhbnNjcmliZXIudHJhbnNjcmliaW5nKHRyYW5zY3JpYmVyLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZWNvZ25pemVkID0gKHMsIGUpID0+IHtcbiAgICAgICAgICAgIGlmICghIXRyYW5zY3JpYmVyLnRyYW5zY3JpYmVkKSB7XG4gICAgICAgICAgICAgICAgdHJhbnNjcmliZXIudHJhbnNjcmliZWQodHJhbnNjcmliZXIsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNlc3Npb25TdGFydGVkID0gKHMsIGUpID0+IHtcbiAgICAgICAgICAgIGlmICghIXRyYW5zY3JpYmVyLnNlc3Npb25TdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgdHJhbnNjcmliZXIuc2Vzc2lvblN0YXJ0ZWQodHJhbnNjcmliZXIsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNlc3Npb25TdG9wcGVkID0gKHMsIGUpID0+IHtcbiAgICAgICAgICAgIGlmICghIXRyYW5zY3JpYmVyLnNlc3Npb25TdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgdHJhbnNjcmliZXIuc2Vzc2lvblN0b3BwZWQodHJhbnNjcmliZXIsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBkaXNjb25uZWN0Q2FsbGJhY2tzKCkge1xuICAgICAgICB0aGlzLmNhbmNlbGVkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnJlY29nbml6aW5nID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnJlY29nbml6ZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc2Vzc2lvblN0YXJ0ZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc2Vzc2lvblN0b3BwZWQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc3Bvc2VzIGFueSByZXNvdXJjZXMgaGVsZCBieSB0aGUgb2JqZWN0LlxuICAgICAqIEBtZW1iZXIgQ29udmVyc2F0aW9uVHJhbnNjcmliZXIucHJvdG90eXBlLmRpc3Bvc2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtib29sZWFufSBkaXNwb3NpbmcgLSB0cnVlIGlmIGRpc3Bvc2luZyB0aGUgb2JqZWN0LlxuICAgICAqL1xuICAgIGRpc3Bvc2UoZGlzcG9zaW5nKSB7XG4gICAgICAgIGNvbnN0IF9zdXBlciA9IE9iamVjdC5jcmVhdGUobnVsbCwge1xuICAgICAgICAgICAgZGlzcG9zZTogeyBnZXQ6ICgpID0+IHN1cGVyLmRpc3Bvc2UgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZEaXNwb3NlZFJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGlzcG9zaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2RGlzcG9zZWRSZWNvZ25pemVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgX3N1cGVyLmRpc3Bvc2UuY2FsbCh0aGlzLCBkaXNwb3NpbmcpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY3JlYXRlUmVjb2duaXplckNvbmZpZyhzcGVlY2hDb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWNvZ25pemVyQ29uZmlnKHNwZWVjaENvbmZpZywgdGhpcy5wcm9wZXJ0aWVzKTtcbiAgICB9XG4gICAgY3JlYXRlU2VydmljZVJlY29nbml6ZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb0NvbmZpZywgcmVjb2duaXplckNvbmZpZykge1xuICAgICAgICBjb25zdCBjb25maWdJbXBsID0gYXVkaW9Db25maWc7XG4gICAgICAgIHJldHVybiBuZXcgVHJhbnNjcmlwdGlvblNlcnZpY2VSZWNvZ25pemVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgY29uZmlnSW1wbCwgcmVjb2duaXplckNvbmZpZywgdGhpcyk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2NyaWJlclJlY29nbml6ZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IENhbmNlbGxhdGlvbkVycm9yQ29kZSwgQ29udmVyc2F0aW9uVHJhbnNjcmlwdGlvbkNhbmNlbGVkRXZlbnRBcmdzLCBQcm9wZXJ0eUNvbGxlY3Rpb24sIFByb3BlcnR5SWQsIFJlc3VsdFJlYXNvbiwgU3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3MsIFNwZWVjaFJlY29nbml0aW9uUmVzdWx0LCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBDb252ZXJzYXRpb25TZXJ2aWNlUmVjb2duaXplciB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbmltcG9ydCB7IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlIH0gZnJvbSBcIi4vU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UuSW50ZXJuYWxcIjtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIFRyYW5zY3JpcHRpb25TZXJ2aWNlUmVjb2duaXplciBleHRlbmRzIENvbnZlcnNhdGlvblNlcnZpY2VSZWNvZ25pemVyIHtcbiAgICBjb25zdHJ1Y3RvcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCB0cmFuc2NyaWJlcikge1xuICAgICAgICBzdXBlcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCB0cmFuc2NyaWJlcik7XG4gICAgICAgIHRoaXMucHJpdlRyYW5zY3JpYmVyUmVjb2duaXplciA9IHRyYW5zY3JpYmVyO1xuICAgICAgICB0aGlzLnNlbmRQcmVQYXlsb2FkSlNPTk92ZXJyaWRlID0gKGNvbm5lY3Rpb24pID0+IHRoaXMuc2VuZFRyYW5zY3JpcHRpb25TdGFydEpTT04oY29ubmVjdGlvbik7XG4gICAgICAgIGlmICh0aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFdvcmRMZXZlbFRpbWVzdGFtcHMpID09PSBcInRydWVcIikge1xuICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoQ29udGV4dC5zZXRXb3JkTGV2ZWxUaW1pbmdzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VuZFNwZWVjaEV2ZW50QXN5bmMoaW5mbywgY29tbWFuZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uaXNSZWNvZ25pemluZykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuc2VuZFNwZWVjaEV2ZW50KGNvbm5lY3Rpb24sIHRoaXMuY3JlYXRlU3BlZWNoRXZlbnRQYXlsb2FkKGluZm8sIGNvbW1hbmQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHByb2Nlc3NUeXBlU3BlY2lmaWNNZXNzYWdlcyhjb25uZWN0aW9uTWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzU3BlZWNoTWVzc2FnZXMoY29ubmVjdGlvbk1lc3NhZ2UpO1xuICAgIH1cbiAgICBoYW5kbGVSZWNvZ25pemVkQ2FsbGJhY2socmVzdWx0LCBvZmZzZXQsIHNlc3Npb25JZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgU3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3MocmVzdWx0LCBvZmZzZXQsIHNlc3Npb25JZCk7XG4gICAgICAgICAgICB0aGlzLnByaXZUcmFuc2NyaWJlclJlY29nbml6ZXIucmVjb2duaXplZCh0aGlzLnByaXZUcmFuc2NyaWJlclJlY29nbml6ZXIsIGV2ZW50KTtcbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZFcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZFcnJvckNhbGxiYWNrKGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIE9ubHkgaW52b2tlIHRoZSBjYWxsIGJhY2sgb25jZS5cbiAgICAgICAgICAgICAgICAvLyBhbmQgaWYgaXQncyBzdWNjZXNzZnVsIGRvbid0IGludm9rZSB0aGVcbiAgICAgICAgICAgICAgICAvLyBlcnJvciBhZnRlciB0aGF0LlxuICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZFcnJvckNhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVSZWNvZ25pemluZ0NhbGxiYWNrKHJlc3VsdCwgZHVyYXRpb24sIHNlc3Npb25JZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZXYgPSBuZXcgU3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3MocmVzdWx0LCBkdXJhdGlvbiwgc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlRyYW5zY3JpYmVyUmVjb2duaXplci5yZWNvZ25pemluZyh0aGlzLnByaXZUcmFuc2NyaWJlclJlY29nbml6ZXIsIGV2KTtcbiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQ2FuY2VscyByZWNvZ25pdGlvbi5cbiAgICBjYW5jZWxSZWNvZ25pdGlvbihzZXNzaW9uSWQsIHJlcXVlc3RJZCwgY2FuY2VsbGF0aW9uUmVhc29uLCBlcnJvckNvZGUsIGVycm9yKSB7XG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgIHByb3BlcnRpZXMuc2V0UHJvcGVydHkoQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBDYW5jZWxsYXRpb25FcnJvckNvZGVbZXJyb3JDb2RlXSk7XG4gICAgICAgIGlmICghIXRoaXMucHJpdlRyYW5zY3JpYmVyUmVjb2duaXplci5jYW5jZWxlZCkge1xuICAgICAgICAgICAgY29uc3QgY2FuY2VsRXZlbnQgPSBuZXcgQ29udmVyc2F0aW9uVHJhbnNjcmlwdGlvbkNhbmNlbGVkRXZlbnRBcmdzKGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3IsIGVycm9yQ29kZSwgdW5kZWZpbmVkLCBzZXNzaW9uSWQpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZUcmFuc2NyaWJlclJlY29nbml6ZXIuY2FuY2VsZWQodGhpcy5wcml2VHJhbnNjcmliZXJSZWNvZ25pemVyLCBjYW5jZWxFdmVudCk7XG4gICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfYSkgeyB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQocmVxdWVzdElkLCBSZXN1bHRSZWFzb24uQ2FuY2VsZWQsIHVuZGVmaW5lZCwgLy8gVGV4dFxuICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBEdXJhdGlvblxuICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBPZmZzZXRcbiAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gTGFuZ3VhZ2VcbiAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gTGFuZ3VhZ2UgRGV0ZWN0aW9uIENvbmZpZGVuY2VcbiAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gU3BlYWtlciBJZFxuICAgICAgICAgICAgZXJyb3IsIHVuZGVmaW5lZCwgLy8gSnNvblxuICAgICAgICAgICAgcHJvcGVydGllcyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF9iKSB7IH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBFbmNhcHN1bGF0ZWQgZm9yIGRlcml2ZWQgc2VydmljZSByZWNvZ25pemVycyB0aGF0IG5lZWQgdG8gc2VuZCBhZGRpdGlvbmFsIEpTT05cbiAgICBzZW5kVHJhbnNjcmlwdGlvblN0YXJ0SlNPTihjb25uZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnNlbmRTcGVlY2hDb250ZXh0KGNvbm5lY3Rpb24sIHRydWUpO1xuICAgICAgICAgICAgY29uc3QgaW5mbyA9IHRoaXMucHJpdlRyYW5zY3JpYmVyUmVjb2duaXplci5nZXRDb252ZXJzYXRpb25JbmZvKCk7XG4gICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gdGhpcy5jcmVhdGVTcGVlY2hFdmVudFBheWxvYWQoaW5mbywgXCJzdGFydFwiKTtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMuc2VuZFNwZWVjaEV2ZW50KGNvbm5lY3Rpb24sIHBheWxvYWQpO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5zZW5kV2F2ZUhlYWRlcihjb25uZWN0aW9uKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNlbmRTcGVlY2hFdmVudChjb25uZWN0aW9uLCBwYXlsb2FkKSB7XG4gICAgICAgIGNvbnN0IHNwZWVjaEV2ZW50SnNvbiA9IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpO1xuICAgICAgICBpZiAoc3BlZWNoRXZlbnRKc29uKSB7XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBcInNwZWVjaC5ldmVudFwiLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIFwiYXBwbGljYXRpb24vanNvblwiLCBzcGVlY2hFdmVudEpzb24pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNyZWF0ZVNwZWVjaEV2ZW50UGF5bG9hZChpbmZvLCBjb21tYW5kKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50RGljdCA9IHsgaWQ6IFwibWVldGluZ1wiLCBuYW1lOiBjb21tYW5kLCBtZWV0aW5nOiBpbmZvLmNvbnZlcnNhdGlvblByb3BlcnRpZXMgfTtcbiAgICAgICAgZXZlbnREaWN0Lm1lZXRpbmcuaWQgPSBpbmZvLmlkO1xuICAgICAgICBldmVudERpY3QubWVldGluZy5hdHRlbmRlZXMgPSBpbmZvLnBhcnRpY2lwYW50cztcbiAgICAgICAgZXZlbnREaWN0Lm1lZXRpbmcucmVjb3JkID0gaW5mby5jb252ZXJzYXRpb25Qcm9wZXJ0aWVzLmF1ZGlvcmVjb3JkaW5nID09PSBcIm9uXCIgPyBcInRydWVcIiA6IFwiZmFsc2VcIjtcbiAgICAgICAgcmV0dXJuIGV2ZW50RGljdDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zY3JpcHRpb25TZXJ2aWNlUmVjb2duaXplci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUHJveHlJbmZvLCBXZWJzb2NrZXRDb25uZWN0aW9uLCB9IGZyb20gXCIuLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCI7XG5pbXBvcnQgeyBTdHJpbmdVdGlscyB9IGZyb20gXCIuLi9jb21tb24vU3RyaW5nVXRpbHNcIjtcbmltcG9ydCB7IFByb3BlcnR5SWQgfSBmcm9tIFwiLi4vc2RrL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb25GYWN0b3J5QmFzZSB9IGZyb20gXCIuL0Nvbm5lY3Rpb25GYWN0b3J5QmFzZVwiO1xuaW1wb3J0IHsgV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlciwgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBIZWFkZXJOYW1lcyB9IGZyb20gXCIuL0hlYWRlck5hbWVzXCI7XG5pbXBvcnQgeyBRdWVyeVBhcmFtZXRlck5hbWVzIH0gZnJvbSBcIi4vUXVlcnlQYXJhbWV0ZXJOYW1lc1wiO1xuZXhwb3J0IGNsYXNzIFRyYW5zbGF0aW9uQ29ubmVjdGlvbkZhY3RvcnkgZXh0ZW5kcyBDb25uZWN0aW9uRmFjdG9yeUJhc2Uge1xuICAgIGNyZWF0ZShjb25maWcsIGF1dGhJbmZvLCBjb25uZWN0aW9uSWQpIHtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSB0aGlzLmdldEVuZHBvaW50VXJsKGNvbmZpZyk7XG4gICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0ge307XG4gICAgICAgIHRoaXMuc2V0UXVlcnlQYXJhbXMocXVlcnlQYXJhbXMsIGNvbmZpZywgZW5kcG9pbnQpO1xuICAgICAgICBjb25zdCBoZWFkZXJzID0ge307XG4gICAgICAgIGlmIChhdXRoSW5mby50b2tlbiAhPT0gdW5kZWZpbmVkICYmIGF1dGhJbmZvLnRva2VuICE9PSBcIlwiKSB7XG4gICAgICAgICAgICBoZWFkZXJzW2F1dGhJbmZvLmhlYWRlck5hbWVdID0gYXV0aEluZm8udG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgaGVhZGVyc1tIZWFkZXJOYW1lcy5Db25uZWN0aW9uSWRdID0gY29ubmVjdGlvbklkO1xuICAgICAgICBjb25maWcucGFyYW1ldGVycy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1VybCwgZW5kcG9pbnQpO1xuICAgICAgICBjb25zdCBlbmFibGVDb21wcmVzc2lvbiA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFwiU1BFRUNILUVuYWJsZVdlYnNvY2tldENvbXByZXNzaW9uXCIsIFwiZmFsc2VcIikgPT09IFwidHJ1ZVwiO1xuICAgICAgICByZXR1cm4gbmV3IFdlYnNvY2tldENvbm5lY3Rpb24oZW5kcG9pbnQsIHF1ZXJ5UGFyYW1zLCBoZWFkZXJzLCBuZXcgV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlcigpLCBQcm94eUluZm8uZnJvbVJlY29nbml6ZXJDb25maWcoY29uZmlnKSwgZW5hYmxlQ29tcHJlc3Npb24sIGNvbm5lY3Rpb25JZCk7XG4gICAgfVxuICAgIGdldEVuZHBvaW50VXJsKGNvbmZpZywgcmV0dXJuUmVnaW9uUGxhY2Vob2xkZXIpIHtcbiAgICAgICAgY29uc3QgcmVnaW9uID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24pO1xuICAgICAgICBjb25zdCBob3N0U3VmZml4ID0gQ29ubmVjdGlvbkZhY3RvcnlCYXNlLmdldEhvc3RTdWZmaXgocmVnaW9uKTtcbiAgICAgICAgbGV0IGVuZHBvaW50VXJsID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCwgdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKCFlbmRwb2ludFVybCkge1xuICAgICAgICAgICAgY29uc3QgaG9zdCA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSG9zdCwgXCJ3c3M6Ly97cmVnaW9ufS5zMnMuc3BlZWNoXCIgKyBob3N0U3VmZml4KTtcbiAgICAgICAgICAgIGVuZHBvaW50VXJsID0gaG9zdCArIFwiL3NwZWVjaC90cmFuc2xhdGlvbi9jb2duaXRpdmVzZXJ2aWNlcy92MVwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXR1cm5SZWdpb25QbGFjZWhvbGRlciA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGVuZHBvaW50VXJsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5mb3JtYXRTdHJpbmcoZW5kcG9pbnRVcmwsIHsgcmVnaW9uIH0pO1xuICAgIH1cbiAgICBzZXRRdWVyeVBhcmFtcyhxdWVyeVBhcmFtcywgY29uZmlnLCBlbmRwb2ludFVybCkge1xuICAgICAgICBxdWVyeVBhcmFtcy5mcm9tID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UpO1xuICAgICAgICBxdWVyeVBhcmFtcy50byA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Ub0xhbmd1YWdlcyk7XG4gICAgICAgIHRoaXMuc2V0Q29tbW9uVXJsUGFyYW1zKGNvbmZpZywgcXVlcnlQYXJhbXMsIGVuZHBvaW50VXJsKTtcbiAgICAgICAgdGhpcy5zZXRVcmxQYXJhbWV0ZXIoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfVHJhbnNsYXRpb25SZXF1ZXN0U3RhYmxlUGFydGlhbFJlc3VsdCwgUXVlcnlQYXJhbWV0ZXJOYW1lcy5TdGFibGVUcmFuc2xhdGlvbiwgY29uZmlnLCBxdWVyeVBhcmFtcywgZW5kcG9pbnRVcmwpO1xuICAgICAgICBjb25zdCB0cmFuc2xhdGlvblZvaWNlID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblZvaWNlLCB1bmRlZmluZWQpO1xuICAgICAgICBpZiAodHJhbnNsYXRpb25Wb2ljZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBxdWVyeVBhcmFtcy52b2ljZSA9IHRyYW5zbGF0aW9uVm9pY2U7XG4gICAgICAgICAgICBxdWVyeVBhcmFtcy5mZWF0dXJlcyA9IFwidGV4dHRvc3BlZWNoXCI7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9uQ29ubmVjdGlvbkZhY3RvcnkuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgTWVzc2FnZVR5cGUsIFRyYW5zbGF0aW9uU3RhdHVzLCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBDYW5jZWxsYXRpb25SZWFzb24sIFByb3BlcnR5Q29sbGVjdGlvbiwgUHJvcGVydHlJZCwgUmVzdWx0UmVhc29uLCBUcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MsIFRyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3MsIFRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQsIFRyYW5zbGF0aW9ucywgVHJhbnNsYXRpb25TeW50aGVzaXNFdmVudEFyZ3MsIFRyYW5zbGF0aW9uU3ludGhlc2lzUmVzdWx0LCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBDb252ZXJzYXRpb25TZXJ2aWNlUmVjb2duaXplciwgRW51bVRyYW5zbGF0aW9uLCBSZWNvZ25pdGlvblN0YXR1cywgU3ludGhlc2lzU3RhdHVzLCBUcmFuc2xhdGlvbkh5cG90aGVzaXMsIFRyYW5zbGF0aW9uUGhyYXNlLCBUcmFuc2xhdGlvblN5bnRoZXNpc0VuZCwgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBUcmFuc2xhdGlvblNlcnZpY2VSZWNvZ25pemVyIGV4dGVuZHMgQ29udmVyc2F0aW9uU2VydmljZVJlY29nbml6ZXIge1xuICAgIGNvbnN0cnVjdG9yKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Tb3VyY2UsIHJlY29nbml6ZXJDb25maWcsIHRyYW5zbGF0aW9uUmVjb2duaXplcikge1xuICAgICAgICBzdXBlcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCB0cmFuc2xhdGlvblJlY29nbml6ZXIpO1xuICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIgPSB0cmFuc2xhdGlvblJlY29nbml6ZXI7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbkV2ZW50cy5hdHRhY2goKGNvbm5lY3Rpb25FdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb25FdmVudC5uYW1lID09PSBcIkNvbm5lY3Rpb25Fc3RhYmxpc2hlZEV2ZW50XCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIub25Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb25uZWN0aW9uRXZlbnQubmFtZSA9PT0gXCJDb25uZWN0aW9uQ2xvc2VkRXZlbnRcIikge1xuICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLm9uRGlzY29ubmVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcHJvY2Vzc1R5cGVTcGVjaWZpY01lc3NhZ2VzKGNvbm5lY3Rpb25NZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRQcm9wcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgIGxldCBwcm9jZXNzZWQgPSB5aWVsZCB0aGlzLnByb2Nlc3NTcGVlY2hNZXNzYWdlcyhjb25uZWN0aW9uTWVzc2FnZSk7XG4gICAgICAgICAgICBpZiAocHJvY2Vzc2VkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVUcmFuc2xhdGlvblBocmFzZSA9ICh0cmFuc2xhdGVkUGhyYXNlKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25QaHJhc2VSZWNvZ25pemVkKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQgKyB0cmFuc2xhdGVkUGhyYXNlLk9mZnNldCArIHRyYW5zbGF0ZWRQaHJhc2UuRHVyYXRpb24pO1xuICAgICAgICAgICAgICAgIGlmICh0cmFuc2xhdGVkUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzID09PSBSZWNvZ25pdGlvblN0YXR1cy5TdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9LLCB0aGUgcmVjb2duaXRpb24gd2FzIHN1Y2Nlc3NmdWwuIEhvdydkIHRoZSB0cmFuc2xhdGlvbiBkbz9cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5maXJlRXZlbnRGb3JSZXN1bHQodHJhbnNsYXRlZFBocmFzZSwgcmVzdWx0UHJvcHMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIucmVjb2duaXplZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIucmVjb2duaXplZCh0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gcmVwb3J0IHJlc3VsdCB0byBwcm9taXNlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrKHJlc3VsdC5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZFcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkVycm9yQ2FsbGJhY2soZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSBpbnZva2UgdGhlIGNhbGwgYmFjayBvbmNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGlmIGl0J3Mgc3VjY2Vzc2Z1bCBkb24ndCBpbnZva2UgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlcnJvciBhZnRlciB0aGF0LlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RXJyb3JDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVhc29uID0gRW51bVRyYW5zbGF0aW9uLmltcGxUcmFuc2xhdGVSZWNvZ25pdGlvblJlc3VsdCh0cmFuc2xhdGVkUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQodW5kZWZpbmVkLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIHJlYXNvbiwgdHJhbnNsYXRlZFBocmFzZS5UZXh0LCB0cmFuc2xhdGVkUGhyYXNlLkR1cmF0aW9uLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0ICsgdHJhbnNsYXRlZFBocmFzZS5PZmZzZXQsIHVuZGVmaW5lZCwgY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHksIHJlc3VsdFByb3BzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlYXNvbiA9PT0gUmVzdWx0UmVhc29uLkNhbmNlbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxSZWFzb24gPSBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZUNhbmNlbFJlc3VsdCh0cmFuc2xhdGVkUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbmNlbGxhdGlvbkVycm9yQ29kZSA9IEVudW1UcmFuc2xhdGlvbi5pbXBsVHJhbnNsYXRlQ2FuY2VsRXJyb3JDb2RlKHRyYW5zbGF0ZWRQaHJhc2UuUmVjb2duaXRpb25TdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5jYW5jZWxSZWNvZ25pdGlvbkxvY2FsKGNhbmNlbFJlYXNvbiwgY2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZUVycm9yRGV0YWlscyhjYW5jZWxsYXRpb25FcnJvckNvZGUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmlzU3BlZWNoRW5kZWQgJiYgcmVhc29uID09PSBSZXN1bHRSZWFzb24uTm9NYXRjaCAmJiB0cmFuc2xhdGVkUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzICE9PSBSZWNvZ25pdGlvblN0YXR1cy5Jbml0aWFsU2lsZW5jZVRpbWVvdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXYgPSBuZXcgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkV2ZW50QXJncyhyZXN1bHQsIHJlc3VsdC5vZmZzZXQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLnJlY29nbml6ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplci5yZWNvZ25pemVkKHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplciwgZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlcG9ydCByZXN1bHQgdG8gcHJvbWlzZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZFcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZFcnJvckNhbGxiYWNrKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgaW52b2tlIHRoZSBjYWxsIGJhY2sgb25jZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgaWYgaXQncyBzdWNjZXNzZnVsIGRvbid0IGludm9rZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlcnJvciBhZnRlciB0aGF0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZFcnJvckNhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY29ubmVjdGlvbk1lc3NhZ2UubWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLlRleHQpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRQcm9wcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uUmVzdWx0LCBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKGNvbm5lY3Rpb25NZXNzYWdlLnBhdGgudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2xhdGlvbi5oeXBvdGhlc2lzXCI6XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuZmlyZUV2ZW50Rm9yUmVzdWx0KFRyYW5zbGF0aW9uSHlwb3RoZXNpcy5mcm9tSlNPTihjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSksIHJlc3VsdFByb3BzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25IeXBvdGhlc2lzKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQgKyByZXN1bHQub2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLnJlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplci5yZWNvZ25pemluZyh0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInRyYW5zbGF0aW9uLnJlc3BvbnNlXCI6XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBocmFzZSA9IEpTT04ucGFyc2UoY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISFwaHJhc2UuU3BlZWNoUGhyYXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCBoYW5kbGVUcmFuc2xhdGlvblBocmFzZShUcmFuc2xhdGlvblBocmFzZS5mcm9tVHJhbnNsYXRpb25SZXNwb25zZShwaHJhc2UpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwidHJhbnNsYXRpb24ucGhyYXNlXCI6XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGhhbmRsZVRyYW5zbGF0aW9uUGhyYXNlKFRyYW5zbGF0aW9uUGhyYXNlLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2xhdGlvbi5zeW50aGVzaXNcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kU3ludGhlc2lzQXVkaW8oY29ubmVjdGlvbk1lc3NhZ2UuYmluYXJ5Qm9keSwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInRyYW5zbGF0aW9uLnN5bnRoZXNpcy5lbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ludGhFbmQgPSBUcmFuc2xhdGlvblN5bnRoZXNpc0VuZC5mcm9tSlNPTihjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoc3ludGhFbmQuU3ludGhlc2lzU3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFN5bnRoZXNpc1N0YXR1cy5FcnJvcjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIuc3ludGhlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBUcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdChSZXN1bHRSZWFzb24uQ2FuY2VsZWQsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldEV2ZW50ID0gbmV3IFRyYW5zbGF0aW9uU3ludGhlc2lzRXZlbnRBcmdzKHJlc3VsdCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplci5zeW50aGVzaXppbmcodGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLCByZXRFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplci5jYW5jZWxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBbmQgcmFpc2UgYSBjYW5jZWxlZCBldmVudCB0byBzZW5kIHRoZSByaWNoKGVyKSBlcnJvciBtZXNzYWdlIGJhY2suXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbmNlbGVkUmVzdWx0ID0gbmV3IFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncyh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQsIENhbmNlbGxhdGlvblJlYXNvbi5FcnJvciwgc3ludGhFbmQuRmFpbHVyZVJlYXNvbiwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLlNlcnZpY2VFcnJvciwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIuY2FuY2VsZWQodGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLCBjYW5jZWxlZFJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBTeW50aGVzaXNTdGF0dXMuU3VjY2VzczpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRTeW50aGVzaXNBdWRpbyh1bmRlZmluZWQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3NlZDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIENhbmNlbHMgcmVjb2duaXRpb24uXG4gICAgY2FuY2VsUmVjb2duaXRpb24oc2Vzc2lvbklkLCByZXF1ZXN0SWQsIGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3JDb2RlLCBlcnJvcikge1xuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICBwcm9wZXJ0aWVzLnNldFByb3BlcnR5KENhbmNlbGxhdGlvbkVycm9yQ29kZVByb3BlcnR5TmFtZSwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW2Vycm9yQ29kZV0pO1xuICAgICAgICBpZiAoISF0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIuY2FuY2VsZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbEV2ZW50ID0gbmV3IFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncyhzZXNzaW9uSWQsIGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3IsIGVycm9yQ29kZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLmNhbmNlbGVkKHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplciwgY2FuY2VsRXZlbnQpO1xuICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghIXRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQodW5kZWZpbmVkLCAvLyBUcmFuc2xhdGlvbnNcbiAgICAgICAgICAgIHJlcXVlc3RJZCwgUmVzdWx0UmVhc29uLkNhbmNlbGVkLCB1bmRlZmluZWQsIC8vIFRleHRcbiAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gRHJ1YXRpb25cbiAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gT2Zmc2V0XG4gICAgICAgICAgICBlcnJvciwgdW5kZWZpbmVkLCAvLyBKc29uXG4gICAgICAgICAgICBwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2IpIHsgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZVJlY29nbml6aW5nQ2FsbGJhY2socmVzdWx0LCBkdXJhdGlvbiwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBldiA9IG5ldyBUcmFuc2xhdGlvblJlY29nbml0aW9uRXZlbnRBcmdzKFRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQuZnJvbVNwZWVjaFJlY29nbml0aW9uUmVzdWx0KHJlc3VsdCksIGR1cmF0aW9uLCBzZXNzaW9uSWQpO1xuICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLnJlY29nbml6aW5nKHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplciwgZXYpO1xuICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVSZWNvZ25pemVkQ2FsbGJhY2socmVzdWx0LCBvZmZzZXQsIHNlc3Npb25JZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZXYgPSBuZXcgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkV2ZW50QXJncyhUcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0LmZyb21TcGVlY2hSZWNvZ25pdGlvblJlc3VsdChyZXN1bHQpLCBvZmZzZXQsIHNlc3Npb25JZCk7XG4gICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIucmVjb2duaXplZCh0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIsIGV2KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgfVxuICAgIH1cbiAgICBmaXJlRXZlbnRGb3JSZXN1bHQoc2VydmljZVJlc3VsdCwgcHJvcGVydGllcykge1xuICAgICAgICBsZXQgdHJhbnNsYXRpb25zO1xuICAgICAgICBpZiAodW5kZWZpbmVkICE9PSBzZXJ2aWNlUmVzdWx0LlRyYW5zbGF0aW9uLlRyYW5zbGF0aW9ucykge1xuICAgICAgICAgICAgdHJhbnNsYXRpb25zID0gbmV3IFRyYW5zbGF0aW9ucygpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0cmFuc2xhdGlvbiBvZiBzZXJ2aWNlUmVzdWx0LlRyYW5zbGF0aW9uLlRyYW5zbGF0aW9ucykge1xuICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9ucy5zZXQodHJhbnNsYXRpb24uTGFuZ3VhZ2UsIHRyYW5zbGF0aW9uLlRleHQgfHwgdHJhbnNsYXRpb24uRGlzcGxheVRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCByZXN1bHRSZWFzb247XG4gICAgICAgIGlmIChzZXJ2aWNlUmVzdWx0IGluc3RhbmNlb2YgVHJhbnNsYXRpb25QaHJhc2UpIHtcbiAgICAgICAgICAgIGlmICghIXNlcnZpY2VSZXN1bHQuVHJhbnNsYXRpb24gJiYgc2VydmljZVJlc3VsdC5UcmFuc2xhdGlvbi5UcmFuc2xhdGlvblN0YXR1cyA9PT0gVHJhbnNsYXRpb25TdGF0dXMuU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHJlc3VsdFJlYXNvbiA9IFJlc3VsdFJlYXNvbi5UcmFuc2xhdGVkU3BlZWNoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0UmVhc29uID0gUmVzdWx0UmVhc29uLlJlY29nbml6ZWRTcGVlY2g7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRSZWFzb24gPSBSZXN1bHRSZWFzb24uVHJhbnNsYXRpbmdTcGVlY2g7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gc2VydmljZVJlc3VsdC5PZmZzZXQgKyB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0O1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdCh0cmFuc2xhdGlvbnMsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgcmVzdWx0UmVhc29uLCBzZXJ2aWNlUmVzdWx0LlRleHQsIHNlcnZpY2VSZXN1bHQuRHVyYXRpb24sIG9mZnNldCwgc2VydmljZVJlc3VsdC5UcmFuc2xhdGlvbi5GYWlsdXJlUmVhc29uLCBKU09OLnN0cmluZ2lmeShzZXJ2aWNlUmVzdWx0KSwgcHJvcGVydGllcyk7XG4gICAgICAgIGNvbnN0IGV2ID0gbmV3IFRyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3MocmVzdWx0LCBvZmZzZXQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgIHJldHVybiBldjtcbiAgICB9XG4gICAgc2VuZFN5bnRoZXNpc0F1ZGlvKGF1ZGlvLCBzZXNzaW9uSWQpIHtcbiAgICAgICAgY29uc3QgcmVhc29uID0gKHVuZGVmaW5lZCA9PT0gYXVkaW8pID8gUmVzdWx0UmVhc29uLlN5bnRoZXNpemluZ0F1ZGlvQ29tcGxldGVkIDogUmVzdWx0UmVhc29uLlN5bnRoZXNpemluZ0F1ZGlvO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHQocmVhc29uLCBhdWRpbyk7XG4gICAgICAgIGNvbnN0IHJldEV2ZW50ID0gbmV3IFRyYW5zbGF0aW9uU3ludGhlc2lzRXZlbnRBcmdzKHJlc3VsdCwgc2Vzc2lvbklkKTtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLnN5bnRoZXNpemluZykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIuc3ludGhlc2l6aW5nKHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplciwgcmV0RXZlbnQpO1xuICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2xhdGlvblNlcnZpY2VSZWNvZ25pemVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgdHJhbnNsYXRpb24gc3RhdHVzLlxuICogQGNsYXNzIFRyYW5zbGF0aW9uU3RhdHVzXG4gKi9cbmV4cG9ydCB2YXIgVHJhbnNsYXRpb25TdGF0dXM7XG4oZnVuY3Rpb24gKFRyYW5zbGF0aW9uU3RhdHVzKSB7XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblN0YXR1cy5TdWNjZXNzXG4gICAgICovXG4gICAgVHJhbnNsYXRpb25TdGF0dXNbVHJhbnNsYXRpb25TdGF0dXNbXCJTdWNjZXNzXCJdID0gMF0gPSBcIlN1Y2Nlc3NcIjtcbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uU3RhdHVzLkVycm9yXG4gICAgICovXG4gICAgVHJhbnNsYXRpb25TdGF0dXNbVHJhbnNsYXRpb25TdGF0dXNbXCJFcnJvclwiXSA9IDFdID0gXCJFcnJvclwiO1xufSkoVHJhbnNsYXRpb25TdGF0dXMgfHwgKFRyYW5zbGF0aW9uU3RhdHVzID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNsYXRpb25TdGF0dXMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENvbm5lY3Rpb25NZXNzYWdlLCBEZWZlcnJlZCwgTWVzc2FnZVR5cGUsIFJhd1dlYnNvY2tldE1lc3NhZ2UsIH0gZnJvbSBcIi4uL2NvbW1vbi9FeHBvcnRzXCI7XG5jb25zdCBDUkxGID0gXCJcXHJcXG5cIjtcbmV4cG9ydCBjbGFzcyBXZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyIHtcbiAgICB0b0Nvbm5lY3Rpb25NZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5UZXh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dE1lc3NhZ2UgPSBtZXNzYWdlLnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgIGxldCBoZWFkZXJzID0ge307XG4gICAgICAgICAgICAgICAgbGV0IGJvZHkgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmICh0ZXh0TWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJCb2R5U3BsaXQgPSB0ZXh0TWVzc2FnZS5zcGxpdChcIlxcclxcblxcclxcblwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlckJvZHlTcGxpdCAmJiBoZWFkZXJCb2R5U3BsaXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IHRoaXMucGFyc2VIZWFkZXJzKGhlYWRlckJvZHlTcGxpdFswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVyQm9keVNwbGl0Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5ID0gaGVhZGVyQm9keVNwbGl0WzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlZmVycmFsLnJlc29sdmUobmV3IENvbm5lY3Rpb25NZXNzYWdlKG1lc3NhZ2UubWVzc2FnZVR5cGUsIGJvZHksIGhlYWRlcnMsIG1lc3NhZ2UuaWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1lc3NhZ2UubWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLkJpbmFyeSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJpbmFyeU1lc3NhZ2UgPSBtZXNzYWdlLmJpbmFyeUNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSB7fTtcbiAgICAgICAgICAgICAgICBsZXQgYm9keSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKCFiaW5hcnlNZXNzYWdlIHx8IGJpbmFyeU1lc3NhZ2UuYnl0ZUxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBiaW5hcnkgbWVzc2FnZSBmb3JtYXQuIEhlYWRlciBsZW5ndGggbWlzc2luZy5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGJpbmFyeU1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckxlbmd0aCA9IGRhdGFWaWV3LmdldEludDE2KDApO1xuICAgICAgICAgICAgICAgIGlmIChiaW5hcnlNZXNzYWdlLmJ5dGVMZW5ndGggPCBoZWFkZXJMZW5ndGggKyAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYmluYXJ5IG1lc3NhZ2UgZm9ybWF0LiBIZWFkZXIgY29udGVudCBtaXNzaW5nLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlcnNTdHJpbmcgPSBcIlwiO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVhZGVyTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1N0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChkYXRhVmlldykuZ2V0SW50OChpICsgMikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoZWFkZXJzID0gdGhpcy5wYXJzZUhlYWRlcnMoaGVhZGVyc1N0cmluZyk7XG4gICAgICAgICAgICAgICAgaWYgKGJpbmFyeU1lc3NhZ2UuYnl0ZUxlbmd0aCA+IGhlYWRlckxlbmd0aCArIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgYm9keSA9IGJpbmFyeU1lc3NhZ2Uuc2xpY2UoMiArIGhlYWRlckxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlZmVycmFsLnJlc29sdmUobmV3IENvbm5lY3Rpb25NZXNzYWdlKG1lc3NhZ2UubWVzc2FnZVR5cGUsIGJvZHksIGhlYWRlcnMsIG1lc3NhZ2UuaWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZGVmZXJyYWwucmVqZWN0KGBFcnJvciBmb3JtYXR0aW5nIHRoZSBtZXNzYWdlLiBFcnJvcjogJHtlfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZlcnJhbC5wcm9taXNlO1xuICAgIH1cbiAgICBmcm9tQ29ubmVjdGlvbk1lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgICBjb25zdCBkZWZlcnJhbCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLlRleHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gYCR7dGhpcy5tYWtlSGVhZGVycyhtZXNzYWdlKX0ke0NSTEZ9JHttZXNzYWdlLnRleHRCb2R5ID8gbWVzc2FnZS50ZXh0Qm9keSA6IFwiXCJ9YDtcbiAgICAgICAgICAgICAgICBkZWZlcnJhbC5yZXNvbHZlKG5ldyBSYXdXZWJzb2NrZXRNZXNzYWdlKE1lc3NhZ2VUeXBlLlRleHQsIHBheWxvYWQsIG1lc3NhZ2UuaWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1lc3NhZ2UubWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLkJpbmFyeSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnNTdHJpbmcgPSB0aGlzLm1ha2VIZWFkZXJzKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBtZXNzYWdlLmJpbmFyeUJvZHk7XG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyQnVmZmVyID0gdGhpcy5zdHJpbmdUb0FycmF5QnVmZmVyKGhlYWRlcnNTdHJpbmcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckludDhBcnJheSA9IG5ldyBJbnQ4QXJyYXkoaGVhZGVyQnVmZmVyKTtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJMZW5ndGggPSBoZWFkZXJJbnQ4QXJyYXkuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXlsb2FkSW50OEFycmF5ID0gbmV3IEludDhBcnJheSgyICsgaGVhZGVyTGVuZ3RoICsgKGNvbnRlbnQgPyBjb250ZW50LmJ5dGVMZW5ndGggOiAwKSk7XG4gICAgICAgICAgICAgICAgcGF5bG9hZEludDhBcnJheVswXSA9ICgoaGVhZGVyTGVuZ3RoID4+IDgpICYgMHhmZik7XG4gICAgICAgICAgICAgICAgcGF5bG9hZEludDhBcnJheVsxXSA9IGhlYWRlckxlbmd0aCAmIDB4ZmY7XG4gICAgICAgICAgICAgICAgcGF5bG9hZEludDhBcnJheS5zZXQoaGVhZGVySW50OEFycmF5LCAyKTtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBib2R5SW50OEFycmF5ID0gbmV3IEludDhBcnJheShjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZEludDhBcnJheS5zZXQoYm9keUludDhBcnJheSwgMiArIGhlYWRlckxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBwYXlsb2FkSW50OEFycmF5LmJ1ZmZlcjtcbiAgICAgICAgICAgICAgICBkZWZlcnJhbC5yZXNvbHZlKG5ldyBSYXdXZWJzb2NrZXRNZXNzYWdlKE1lc3NhZ2VUeXBlLkJpbmFyeSwgcGF5bG9hZCwgbWVzc2FnZS5pZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBkZWZlcnJhbC5yZWplY3QoYEVycm9yIGZvcm1hdHRpbmcgdGhlIG1lc3NhZ2UuICR7ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmZXJyYWwucHJvbWlzZTtcbiAgICB9XG4gICAgbWFrZUhlYWRlcnMobWVzc2FnZSkge1xuICAgICAgICBsZXQgaGVhZGVyc1N0cmluZyA9IFwiXCI7XG4gICAgICAgIGlmIChtZXNzYWdlLmhlYWRlcnMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaGVhZGVyIGluIG1lc3NhZ2UuaGVhZGVycykge1xuICAgICAgICAgICAgICAgIGlmIChoZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1N0cmluZyArPSBgJHtoZWFkZXJ9OiAke21lc3NhZ2UuaGVhZGVyc1toZWFkZXJdfSR7Q1JMRn1gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGVhZGVyc1N0cmluZztcbiAgICB9XG4gICAgcGFyc2VIZWFkZXJzKGhlYWRlcnNTdHJpbmcpIHtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHt9O1xuICAgICAgICBpZiAoaGVhZGVyc1N0cmluZykge1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyTWF0Y2hlcyA9IGhlYWRlcnNTdHJpbmcubWF0Y2goL1teXFxyXFxuXSsvZyk7XG4gICAgICAgICAgICBpZiAoaGVhZGVycykge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaGVhZGVyIG9mIGhlYWRlck1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VwYXJhdG9ySW5kZXggPSBoZWFkZXIuaW5kZXhPZihcIjpcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJOYW1lID0gc2VwYXJhdG9ySW5kZXggPiAwID8gaGVhZGVyLnN1YnN0cigwLCBzZXBhcmF0b3JJbmRleCkudHJpbSgpLnRvTG93ZXJDYXNlKCkgOiBoZWFkZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJWYWx1ZSA9IHNlcGFyYXRvckluZGV4ID4gMCAmJiBoZWFkZXIubGVuZ3RoID4gKHNlcGFyYXRvckluZGV4ICsgMSkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlci5zdWJzdHIoc2VwYXJhdG9ySW5kZXggKyAxKS50cmltKCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW2hlYWRlck5hbWVdID0gaGVhZGVyVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhlYWRlcnM7XG4gICAgfVxuICAgIHN0cmluZ1RvQXJyYXlCdWZmZXIoc3RyKSB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihzdHIubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmlldy5zZXRVaW50OChpLCBzdHIuY2hhckNvZGVBdChpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVdlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5pbXBvcnQgeyBFdmVudFR5cGUsIFBsYXRmb3JtRXZlbnQgfSBmcm9tIFwiLi9QbGF0Zm9ybUV2ZW50XCI7XG5leHBvcnQgY2xhc3MgQXVkaW9Tb3VyY2VFdmVudCBleHRlbmRzIFBsYXRmb3JtRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGV2ZW50TmFtZSwgYXVkaW9Tb3VyY2VJZCwgZXZlbnRUeXBlID0gRXZlbnRUeXBlLkluZm8pIHtcbiAgICAgICAgc3VwZXIoZXZlbnROYW1lLCBldmVudFR5cGUpO1xuICAgICAgICB0aGlzLnByaXZBdWRpb1NvdXJjZUlkID0gYXVkaW9Tb3VyY2VJZDtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvU291cmNlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb1NvdXJjZUlkO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBdWRpb1NvdXJjZUluaXRpYWxpemluZ0V2ZW50IGV4dGVuZHMgQXVkaW9Tb3VyY2VFdmVudCB7XG4gICAgY29uc3RydWN0b3IoYXVkaW9Tb3VyY2VJZCkge1xuICAgICAgICBzdXBlcihcIkF1ZGlvU291cmNlSW5pdGlhbGl6aW5nRXZlbnRcIiwgYXVkaW9Tb3VyY2VJZCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEF1ZGlvU291cmNlUmVhZHlFdmVudCBleHRlbmRzIEF1ZGlvU291cmNlRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvU291cmNlSWQpIHtcbiAgICAgICAgc3VwZXIoXCJBdWRpb1NvdXJjZVJlYWR5RXZlbnRcIiwgYXVkaW9Tb3VyY2VJZCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEF1ZGlvU291cmNlT2ZmRXZlbnQgZXh0ZW5kcyBBdWRpb1NvdXJjZUV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihhdWRpb1NvdXJjZUlkKSB7XG4gICAgICAgIHN1cGVyKFwiQXVkaW9Tb3VyY2VPZmZFdmVudFwiLCBhdWRpb1NvdXJjZUlkKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQXVkaW9Tb3VyY2VFcnJvckV2ZW50IGV4dGVuZHMgQXVkaW9Tb3VyY2VFdmVudCB7XG4gICAgY29uc3RydWN0b3IoYXVkaW9Tb3VyY2VJZCwgZXJyb3IpIHtcbiAgICAgICAgc3VwZXIoXCJBdWRpb1NvdXJjZUVycm9yRXZlbnRcIiwgYXVkaW9Tb3VyY2VJZCwgRXZlbnRUeXBlLkVycm9yKTtcbiAgICAgICAgdGhpcy5wcml2RXJyb3IgPSBlcnJvcjtcbiAgICB9XG4gICAgZ2V0IGVycm9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3I7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEF1ZGlvU3RyZWFtTm9kZUV2ZW50IGV4dGVuZHMgQXVkaW9Tb3VyY2VFdmVudCB7XG4gICAgY29uc3RydWN0b3IoZXZlbnROYW1lLCBhdWRpb1NvdXJjZUlkLCBhdWRpb05vZGVJZCkge1xuICAgICAgICBzdXBlcihldmVudE5hbWUsIGF1ZGlvU291cmNlSWQpO1xuICAgICAgICB0aGlzLnByaXZBdWRpb05vZGVJZCA9IGF1ZGlvTm9kZUlkO1xuICAgIH1cbiAgICBnZXQgYXVkaW9Ob2RlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb05vZGVJZDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQXVkaW9TdHJlYW1Ob2RlQXR0YWNoaW5nRXZlbnQgZXh0ZW5kcyBBdWRpb1N0cmVhbU5vZGVFdmVudCB7XG4gICAgY29uc3RydWN0b3IoYXVkaW9Tb3VyY2VJZCwgYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgc3VwZXIoXCJBdWRpb1N0cmVhbU5vZGVBdHRhY2hpbmdFdmVudFwiLCBhdWRpb1NvdXJjZUlkLCBhdWRpb05vZGVJZCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGVkRXZlbnQgZXh0ZW5kcyBBdWRpb1N0cmVhbU5vZGVFdmVudCB7XG4gICAgY29uc3RydWN0b3IoYXVkaW9Tb3VyY2VJZCwgYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgc3VwZXIoXCJBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50XCIsIGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudCBleHRlbmRzIEF1ZGlvU3RyZWFtTm9kZUV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihhdWRpb1NvdXJjZUlkLCBhdWRpb05vZGVJZCkge1xuICAgICAgICBzdXBlcihcIkF1ZGlvU3RyZWFtTm9kZURldGFjaGVkRXZlbnRcIiwgYXVkaW9Tb3VyY2VJZCwgYXVkaW9Ob2RlSWQpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBdWRpb1N0cmVhbU5vZGVFcnJvckV2ZW50IGV4dGVuZHMgQXVkaW9TdHJlYW1Ob2RlRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkLCBlcnJvcikge1xuICAgICAgICBzdXBlcihcIkF1ZGlvU3RyZWFtTm9kZUVycm9yRXZlbnRcIiwgYXVkaW9Tb3VyY2VJZCwgYXVkaW9Ob2RlSWQpO1xuICAgICAgICB0aGlzLnByaXZFcnJvciA9IGVycm9yO1xuICAgIH1cbiAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvcjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF1ZGlvU291cmNlRXZlbnRzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBFdmVudFR5cGUsIFBsYXRmb3JtRXZlbnQgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG5leHBvcnQgY2xhc3MgQmFja2dyb3VuZEV2ZW50IGV4dGVuZHMgUGxhdGZvcm1FdmVudCB7XG4gICAgY29uc3RydWN0b3IoZXJyb3IpIHtcbiAgICAgICAgc3VwZXIoXCJCYWNrZ3JvdW5kRXZlbnRcIiwgRXZlbnRUeXBlLkVycm9yKTtcbiAgICAgICAgdGhpcy5wcml2RXJyb3IgPSBlcnJvcjtcbiAgICB9XG4gICAgZ2V0IGVycm9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3I7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1CYWNrZ3JvdW5kRXJyb3IuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbmV4cG9ydCBjbGFzcyBDaHVua2VkQXJyYXlCdWZmZXJTdHJlYW0gZXh0ZW5kcyBTdHJlYW0ge1xuICAgIGNvbnN0cnVjdG9yKHRhcmdldENodW5rU2l6ZSwgc3RyZWFtSWQpIHtcbiAgICAgICAgc3VwZXIoc3RyZWFtSWQpO1xuICAgICAgICB0aGlzLnByaXZUYXJnZXRDaHVua1NpemUgPSB0YXJnZXRDaHVua1NpemU7XG4gICAgICAgIHRoaXMucHJpdk5leHRCdWZmZXJSZWFkeUJ5dGVzID0gMDtcbiAgICB9XG4gICAgd3JpdGVTdHJlYW1DaHVuayhjaHVuaykge1xuICAgICAgICAvLyBObyBwZW5kaW5nIHdyaXRlLCBhbmQgdGhlIGJ1ZmZlciBpcyB0aGUgcmlnaHQgc2l6ZSBzbyB3cml0ZSBpdC5cbiAgICAgICAgaWYgKGNodW5rLmlzRW5kIHx8XG4gICAgICAgICAgICAoMCA9PT0gdGhpcy5wcml2TmV4dEJ1ZmZlclJlYWR5Qnl0ZXMgJiYgY2h1bmsuYnVmZmVyLmJ5dGVMZW5ndGggPT09IHRoaXMucHJpdlRhcmdldENodW5rU2l6ZSkpIHtcbiAgICAgICAgICAgIHN1cGVyLndyaXRlU3RyZWFtQ2h1bmsoY2h1bmspO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBieXRlc0NvcGllZEZyb21CdWZmZXIgPSAwO1xuICAgICAgICB3aGlsZSAoYnl0ZXNDb3BpZWRGcm9tQnVmZmVyIDwgY2h1bmsuYnVmZmVyLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIEZpbGwgdGhlIG5leHQgYnVmZmVyLlxuICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5wcml2TmV4dEJ1ZmZlclRvV3JpdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZOZXh0QnVmZmVyVG9Xcml0ZSA9IG5ldyBBcnJheUJ1ZmZlcih0aGlzLnByaXZUYXJnZXRDaHVua1NpemUpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdk5leHRCdWZmZXJTdGFydFRpbWUgPSBjaHVuay50aW1lUmVjZWl2ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGaW5kIG91dCBob3cgbWFueSBieXRlcyB3ZSBjYW4gY29weSBpbnRvIHRoZSByZWFkIGJ1ZmZlci5cbiAgICAgICAgICAgIGNvbnN0IGJ5dGVzVG9Db3B5ID0gTWF0aC5taW4oY2h1bmsuYnVmZmVyLmJ5dGVMZW5ndGggLSBieXRlc0NvcGllZEZyb21CdWZmZXIsIHRoaXMucHJpdlRhcmdldENodW5rU2l6ZSAtIHRoaXMucHJpdk5leHRCdWZmZXJSZWFkeUJ5dGVzKTtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldFZpZXcgPSBuZXcgVWludDhBcnJheSh0aGlzLnByaXZOZXh0QnVmZmVyVG9Xcml0ZSk7XG4gICAgICAgICAgICBjb25zdCBzb3VyY2VWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoY2h1bmsuYnVmZmVyLnNsaWNlKGJ5dGVzQ29waWVkRnJvbUJ1ZmZlciwgYnl0ZXNUb0NvcHkgKyBieXRlc0NvcGllZEZyb21CdWZmZXIpKTtcbiAgICAgICAgICAgIHRhcmdldFZpZXcuc2V0KHNvdXJjZVZpZXcsIHRoaXMucHJpdk5leHRCdWZmZXJSZWFkeUJ5dGVzKTtcbiAgICAgICAgICAgIHRoaXMucHJpdk5leHRCdWZmZXJSZWFkeUJ5dGVzICs9IGJ5dGVzVG9Db3B5O1xuICAgICAgICAgICAgYnl0ZXNDb3BpZWRGcm9tQnVmZmVyICs9IGJ5dGVzVG9Db3B5O1xuICAgICAgICAgICAgLy8gQXJlIHdlIHJlYWR5IHRvIHdyaXRlP1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdk5leHRCdWZmZXJSZWFkeUJ5dGVzID09PSB0aGlzLnByaXZUYXJnZXRDaHVua1NpemUpIHtcbiAgICAgICAgICAgICAgICBzdXBlci53cml0ZVN0cmVhbUNodW5rKHtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyOiB0aGlzLnByaXZOZXh0QnVmZmVyVG9Xcml0ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNFbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB0aW1lUmVjZWl2ZWQ6IHRoaXMucHJpdk5leHRCdWZmZXJTdGFydFRpbWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TmV4dEJ1ZmZlclJlYWR5Qnl0ZXMgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdk5leHRCdWZmZXJUb1dyaXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICAvLyBTZW5kIHdoYXRldmVyIGlzIHBlbmRpbmcsIHRoZW4gY2xvc2UgdGhlIGJhc2UgY2xhc3MuXG4gICAgICAgIGlmICgwICE9PSB0aGlzLnByaXZOZXh0QnVmZmVyUmVhZHlCeXRlcyAmJiAhdGhpcy5pc0Nsb3NlZCkge1xuICAgICAgICAgICAgc3VwZXIud3JpdGVTdHJlYW1DaHVuayh7XG4gICAgICAgICAgICAgICAgYnVmZmVyOiB0aGlzLnByaXZOZXh0QnVmZmVyVG9Xcml0ZS5zbGljZSgwLCB0aGlzLnByaXZOZXh0QnVmZmVyUmVhZHlCeXRlcyksXG4gICAgICAgICAgICAgICAgaXNFbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRpbWVSZWNlaXZlZDogdGhpcy5wcml2TmV4dEJ1ZmZlclN0YXJ0VGltZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1DaHVua2VkQXJyYXlCdWZmZXJTdHJlYW0uanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IEV2ZW50VHlwZSwgUGxhdGZvcm1FdmVudCB9IGZyb20gXCIuL1BsYXRmb3JtRXZlbnRcIjtcbmV4cG9ydCBjbGFzcyBTZXJ2aWNlRXZlbnQgZXh0ZW5kcyBQbGF0Zm9ybUV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihldmVudE5hbWUsIGpzb25zdHJpbmcsIGV2ZW50VHlwZSA9IEV2ZW50VHlwZS5JbmZvKSB7XG4gICAgICAgIHN1cGVyKGV2ZW50TmFtZSwgZXZlbnRUeXBlKTtcbiAgICAgICAgdGhpcy5wcml2SnNvblJlc3VsdCA9IGpzb25zdHJpbmc7XG4gICAgfVxuICAgIGdldCBqc29uU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SnNvblJlc3VsdDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbkV2ZW50IGV4dGVuZHMgUGxhdGZvcm1FdmVudCB7XG4gICAgY29uc3RydWN0b3IoZXZlbnROYW1lLCBjb25uZWN0aW9uSWQsIGV2ZW50VHlwZSA9IEV2ZW50VHlwZS5JbmZvKSB7XG4gICAgICAgIHN1cGVyKGV2ZW50TmFtZSwgZXZlbnRUeXBlKTtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbklkID0gY29ubmVjdGlvbklkO1xuICAgIH1cbiAgICBnZXQgY29ubmVjdGlvbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbklkO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uU3RhcnRFdmVudCBleHRlbmRzIENvbm5lY3Rpb25FdmVudCB7XG4gICAgY29uc3RydWN0b3IoY29ubmVjdGlvbklkLCB1cmksIGhlYWRlcnMpIHtcbiAgICAgICAgc3VwZXIoXCJDb25uZWN0aW9uU3RhcnRFdmVudFwiLCBjb25uZWN0aW9uSWQpO1xuICAgICAgICB0aGlzLnByaXZVcmkgPSB1cmk7XG4gICAgICAgIHRoaXMucHJpdkhlYWRlcnMgPSBoZWFkZXJzO1xuICAgIH1cbiAgICBnZXQgdXJpKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VXJpO1xuICAgIH1cbiAgICBnZXQgaGVhZGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkhlYWRlcnM7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb25Fc3RhYmxpc2hlZEV2ZW50IGV4dGVuZHMgQ29ubmVjdGlvbkV2ZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uSWQpIHtcbiAgICAgICAgc3VwZXIoXCJDb25uZWN0aW9uRXN0YWJsaXNoZWRFdmVudFwiLCBjb25uZWN0aW9uSWQpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uQ2xvc2VkRXZlbnQgZXh0ZW5kcyBDb25uZWN0aW9uRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb25JZCwgc3RhdHVzQ29kZSwgcmVhc29uKSB7XG4gICAgICAgIHN1cGVyKFwiQ29ubmVjdGlvbkNsb3NlZEV2ZW50XCIsIGNvbm5lY3Rpb25JZCwgRXZlbnRUeXBlLkRlYnVnKTtcbiAgICAgICAgdGhpcy5wcml2UmVhc29uID0gcmVhc29uO1xuICAgICAgICB0aGlzLnByaXZTdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICB9XG4gICAgZ2V0IHJlYXNvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlYXNvbjtcbiAgICB9XG4gICAgZ2V0IHN0YXR1c0NvZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTdGF0dXNDb2RlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uRXJyb3JFdmVudCBleHRlbmRzIENvbm5lY3Rpb25FdmVudCB7XG4gICAgY29uc3RydWN0b3IoY29ubmVjdGlvbklkLCBtZXNzYWdlLCB0eXBlKSB7XG4gICAgICAgIHN1cGVyKFwiQ29ubmVjdGlvbkVycm9yRXZlbnRcIiwgY29ubmVjdGlvbklkLCBFdmVudFR5cGUuRGVidWcpO1xuICAgICAgICB0aGlzLnByaXZNZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5wcml2VHlwZSA9IHR5cGU7XG4gICAgfVxuICAgIGdldCBtZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TWVzc2FnZTtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUeXBlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uRXN0YWJsaXNoRXJyb3JFdmVudCBleHRlbmRzIENvbm5lY3Rpb25FdmVudCB7XG4gICAgY29uc3RydWN0b3IoY29ubmVjdGlvbklkLCBzdGF0dXNjb2RlLCByZWFzb24pIHtcbiAgICAgICAgc3VwZXIoXCJDb25uZWN0aW9uRXN0YWJsaXNoRXJyb3JFdmVudFwiLCBjb25uZWN0aW9uSWQsIEV2ZW50VHlwZS5FcnJvcik7XG4gICAgICAgIHRoaXMucHJpdlN0YXR1c0NvZGUgPSBzdGF0dXNjb2RlO1xuICAgICAgICB0aGlzLnByaXZSZWFzb24gPSByZWFzb247XG4gICAgfVxuICAgIGdldCByZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgfVxuICAgIGdldCBzdGF0dXNDb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3RhdHVzQ29kZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbk1lc3NhZ2VSZWNlaXZlZEV2ZW50IGV4dGVuZHMgQ29ubmVjdGlvbkV2ZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uSWQsIG5ldHdvcmtSZWNlaXZlZFRpbWVJU08sIG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIoXCJDb25uZWN0aW9uTWVzc2FnZVJlY2VpdmVkRXZlbnRcIiwgY29ubmVjdGlvbklkKTtcbiAgICAgICAgdGhpcy5wcml2TmV0d29ya1JlY2VpdmVkVGltZSA9IG5ldHdvcmtSZWNlaXZlZFRpbWVJU087XG4gICAgICAgIHRoaXMucHJpdk1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIH1cbiAgICBnZXQgbmV0d29ya1JlY2VpdmVkVGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdk5ldHdvcmtSZWNlaXZlZFRpbWU7XG4gICAgfVxuICAgIGdldCBtZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TWVzc2FnZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbk1lc3NhZ2VTZW50RXZlbnQgZXh0ZW5kcyBDb25uZWN0aW9uRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb25JZCwgbmV0d29ya1NlbnRUaW1lSVNPLCBtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKFwiQ29ubmVjdGlvbk1lc3NhZ2VTZW50RXZlbnRcIiwgY29ubmVjdGlvbklkKTtcbiAgICAgICAgdGhpcy5wcml2TmV0d29ya1NlbnRUaW1lID0gbmV0d29ya1NlbnRUaW1lSVNPO1xuICAgICAgICB0aGlzLnByaXZNZXNzYWdlID0gbWVzc2FnZTtcbiAgICB9XG4gICAgZ2V0IG5ldHdvcmtTZW50VGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdk5ldHdvcmtTZW50VGltZTtcbiAgICB9XG4gICAgZ2V0IG1lc3NhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZNZXNzYWdlO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29ubmVjdGlvbkV2ZW50cy5qcy5tYXBcbiIsIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtcmV0dXJuICovXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IEludmFsaWRPcGVyYXRpb25FcnJvciB9IGZyb20gXCIuL0Vycm9yXCI7XG5pbXBvcnQgeyBjcmVhdGVOb0Rhc2hHdWlkIH0gZnJvbSBcIi4vR3VpZFwiO1xuZXhwb3J0IHZhciBNZXNzYWdlVHlwZTtcbihmdW5jdGlvbiAoTWVzc2FnZVR5cGUpIHtcbiAgICBNZXNzYWdlVHlwZVtNZXNzYWdlVHlwZVtcIlRleHRcIl0gPSAwXSA9IFwiVGV4dFwiO1xuICAgIE1lc3NhZ2VUeXBlW01lc3NhZ2VUeXBlW1wiQmluYXJ5XCJdID0gMV0gPSBcIkJpbmFyeVwiO1xufSkoTWVzc2FnZVR5cGUgfHwgKE1lc3NhZ2VUeXBlID0ge30pKTtcbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uTWVzc2FnZSB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZVR5cGUsIGJvZHksIGhlYWRlcnMsIGlkKSB7XG4gICAgICAgIHRoaXMucHJpdkJvZHkgPSBudWxsO1xuICAgICAgICBpZiAobWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLlRleHQgJiYgYm9keSAmJiAhKHR5cGVvZiAoYm9keSkgPT09IFwic3RyaW5nXCIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiUGF5bG9hZCBtdXN0IGJlIGEgc3RyaW5nXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuQmluYXJ5ICYmIGJvZHkgJiYgIShib2R5IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiUGF5bG9hZCBtdXN0IGJlIEFycmF5QnVmZmVyXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdk1lc3NhZ2VUeXBlID0gbWVzc2FnZVR5cGU7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbiAgICAgICAgdGhpcy5wcml2Qm9keSA9IGJvZHk7XG4gICAgICAgIHRoaXMucHJpdkhlYWRlcnMgPSBoZWFkZXJzID8gaGVhZGVycyA6IHt9O1xuICAgICAgICB0aGlzLnByaXZJZCA9IGlkID8gaWQgOiBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHN3aXRjaCAodGhpcy5tZXNzYWdlVHlwZSkge1xuICAgICAgICAgICAgY2FzZSBNZXNzYWdlVHlwZS5CaW5hcnk6XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U2l6ZSA9IHRoaXMuYmluYXJ5Qm9keSAhPT0gbnVsbCA/IHRoaXMuYmluYXJ5Qm9keS5ieXRlTGVuZ3RoIDogMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTWVzc2FnZVR5cGUuVGV4dDpcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTaXplID0gdGhpcy50ZXh0Qm9keS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG1lc3NhZ2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TWVzc2FnZVR5cGU7XG4gICAgfVxuICAgIGdldCBoZWFkZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SGVhZGVycztcbiAgICB9XG4gICAgZ2V0IGJvZHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZCb2R5O1xuICAgIH1cbiAgICBnZXQgdGV4dEJvZHkoKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZNZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuQmluYXJ5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiTm90IHN1cHBvcnRlZCBmb3IgYmluYXJ5IG1lc3NhZ2VcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkJvZHk7XG4gICAgfVxuICAgIGdldCBiaW5hcnlCb2R5KCkge1xuICAgICAgICBpZiAodGhpcy5wcml2TWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLlRleHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXJyb3IoXCJOb3Qgc3VwcG9ydGVkIGZvciB0ZXh0IG1lc3NhZ2VcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkJvZHk7XG4gICAgfVxuICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklkO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29ubmVjdGlvbk1lc3NhZ2UuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uT3BlblJlc3BvbnNlIHtcbiAgICBjb25zdHJ1Y3RvcihzdGF0dXNDb2RlLCByZWFzb24pIHtcbiAgICAgICAgdGhpcy5wcml2U3RhdHVzQ29kZSA9IHN0YXR1c0NvZGU7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlYXNvbjtcbiAgICB9XG4gICAgZ2V0IHN0YXR1c0NvZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTdGF0dXNDb2RlO1xuICAgIH1cbiAgICBnZXQgcmVhc29uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVhc29uO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29ubmVjdGlvbk9wZW5SZXNwb25zZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgRXZlbnRUeXBlLCBQbGF0Zm9ybUV2ZW50IH0gZnJvbSBcIi4vUGxhdGZvcm1FdmVudFwiO1xuZXhwb3J0IGNsYXNzIERpYWxvZ0V2ZW50IGV4dGVuZHMgUGxhdGZvcm1FdmVudCB7XG4gICAgY29uc3RydWN0b3IoZXZlbnROYW1lLCBldmVudFR5cGUgPSBFdmVudFR5cGUuSW5mbykge1xuICAgICAgICBzdXBlcihldmVudE5hbWUsIGV2ZW50VHlwZSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFNlbmRpbmdBZ2VudENvbnRleHRNZXNzYWdlRXZlbnQgZXh0ZW5kcyBEaWFsb2dFdmVudCB7XG4gICAgY29uc3RydWN0b3IoYWdlbnRDb25maWcpIHtcbiAgICAgICAgc3VwZXIoXCJTZW5kaW5nQWdlbnRDb250ZXh0TWVzc2FnZUV2ZW50XCIpO1xuICAgICAgICB0aGlzLnByaXZBZ2VudENvbmZpZyA9IGFnZW50Q29uZmlnO1xuICAgIH1cbiAgICBnZXQgYWdlbnRDb25maWcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBZ2VudENvbmZpZztcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURpYWxvZ0V2ZW50cy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cbi8qKlxuICogVGhlIGVycm9yIHRoYXQgaXMgdGhyb3duIHdoZW4gYW4gYXJndW1lbnQgcGFzc2VkIGluIGlzIG51bGwuXG4gKlxuICogQGV4cG9ydFxuICogQGNsYXNzIEFyZ3VtZW50TnVsbEVycm9yXG4gKiBAZXh0ZW5kcyB7RXJyb3J9XG4gKi9cbmV4cG9ydCBjbGFzcyBBcmd1bWVudE51bGxFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEFyZ3VtZW50TnVsbEVycm9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFyZ3VtZW50TmFtZSAtIE5hbWUgb2YgdGhlIGFyZ3VtZW50IHRoYXQgaXMgbnVsbFxuICAgICAqXG4gICAgICogQG1lbWJlck9mIEFyZ3VtZW50TnVsbEVycm9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYXJndW1lbnROYW1lKSB7XG4gICAgICAgIHN1cGVyKGFyZ3VtZW50TmFtZSk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiQXJndW1lbnROdWxsXCI7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IGFyZ3VtZW50TmFtZTtcbiAgICB9XG59XG4vKipcbiAqIFRoZSBlcnJvciB0aGF0IGlzIHRocm93biB3aGVuIGFuIGludmFsaWQgb3BlcmF0aW9uIGlzIHBlcmZvcm1lZCBpbiB0aGUgY29kZS5cbiAqXG4gKiBAZXhwb3J0XG4gKiBAY2xhc3MgSW52YWxpZE9wZXJhdGlvbkVycm9yXG4gKiBAZXh0ZW5kcyB7RXJyb3J9XG4gKi9cbmV4cG9ydCBjbGFzcyBJbnZhbGlkT3BlcmF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBJbnZhbGlkT3BlcmF0aW9uRXJyb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXJyb3IgLSBUaGUgZXJyb3JcbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBJbnZhbGlkT3BlcmF0aW9uRXJyb3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlcnJvcikge1xuICAgICAgICBzdXBlcihlcnJvcik7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiSW52YWxpZE9wZXJhdGlvblwiO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlcnJvcjtcbiAgICB9XG59XG4vKipcbiAqIFRoZSBlcnJvciB0aGF0IGlzIHRocm93biB3aGVuIGFuIG9iamVjdCBpcyBkaXNwb3NlZC5cbiAqXG4gKiBAZXhwb3J0XG4gKiBAY2xhc3MgT2JqZWN0RGlzcG9zZWRFcnJvclxuICogQGV4dGVuZHMge0Vycm9yfVxuICovXG5leHBvcnQgY2xhc3MgT2JqZWN0RGlzcG9zZWRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIE9iamVjdERpc3Bvc2VkRXJyb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb2JqZWN0TmFtZSAtIFRoZSBvYmplY3QgdGhhdCBpcyBkaXNwb3NlZFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvciAtIFRoZSBlcnJvclxuICAgICAqXG4gICAgICogQG1lbWJlck9mIE9iamVjdERpc3Bvc2VkRXJyb3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihvYmplY3ROYW1lLCBlcnJvcikge1xuICAgICAgICBzdXBlcihlcnJvcik7XG4gICAgICAgIHRoaXMubmFtZSA9IG9iamVjdE5hbWUgKyBcIk9iamVjdERpc3Bvc2VkXCI7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IGVycm9yO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXJyb3IuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IE9iamVjdERpc3Bvc2VkRXJyb3IgfSBmcm9tIFwiLi9FcnJvclwiO1xuaW1wb3J0IHsgY3JlYXRlTm9EYXNoR3VpZCB9IGZyb20gXCIuL0d1aWRcIjtcbmV4cG9ydCBjbGFzcyBFdmVudFNvdXJjZSB7XG4gICAgY29uc3RydWN0b3IobWV0YWRhdGEpIHtcbiAgICAgICAgdGhpcy5wcml2RXZlbnRMaXN0ZW5lcnMgPSB7fTtcbiAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZDb25zb2xlTGlzdGVuZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucHJpdk1ldGFkYXRhID0gbWV0YWRhdGE7XG4gICAgfVxuICAgIG9uRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEaXNwb3NlZCgpKSB7XG4gICAgICAgICAgICB0aHJvdyAobmV3IE9iamVjdERpc3Bvc2VkRXJyb3IoXCJFdmVudFNvdXJjZVwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWV0YWRhdGEpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFyYW1OYW1lIGluIHRoaXMubWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1OYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5tZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFldmVudC5tZXRhZGF0YVtwYXJhbU5hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQubWV0YWRhdGFbcGFyYW1OYW1lXSA9IHRoaXMubWV0YWRhdGFbcGFyYW1OYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGV2ZW50SWQgaW4gdGhpcy5wcml2RXZlbnRMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGlmIChldmVudElkICYmIHRoaXMucHJpdkV2ZW50TGlzdGVuZXJzW2V2ZW50SWRdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2RXZlbnRMaXN0ZW5lcnNbZXZlbnRJZF0oZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGF0dGFjaChvbkV2ZW50Q2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgaWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHRoaXMucHJpdkV2ZW50TGlzdGVuZXJzW2lkXSA9IG9uRXZlbnRDYWxsYmFjaztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRldGFjaDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnByaXZFdmVudExpc3RlbmVyc1tpZF07XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXR0YWNoTGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0YWNoKChlKSA9PiBsaXN0ZW5lci5vbkV2ZW50KGUpKTtcbiAgICB9XG4gICAgYXR0YWNoQ29uc29sZUxpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgICAgIGlmICghIXRoaXMucHJpdkNvbnNvbGVMaXN0ZW5lcikge1xuICAgICAgICAgICAgdm9pZCB0aGlzLnByaXZDb25zb2xlTGlzdGVuZXIuZGV0YWNoKCk7IC8vIERldGFjaCBpbXBsZW1lbnRhdGlvbiBmb3IgZXZlbnRMaXN0ZW5lcnMgaXMgc3luY2hyb25vdXNcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZDb25zb2xlTGlzdGVuZXIgPSB0aGlzLmF0dGFjaCgoZSkgPT4gbGlzdGVuZXIub25FdmVudChlKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb25zb2xlTGlzdGVuZXI7XG4gICAgfVxuICAgIGlzRGlzcG9zZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc0Rpc3Bvc2VkO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLnByaXZFdmVudExpc3RlbmVycyA9IG51bGw7XG4gICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSB0cnVlO1xuICAgIH1cbiAgICBnZXQgbWV0YWRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZNZXRhZGF0YTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50U291cmNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBBcmd1bWVudE51bGxFcnJvciB9IGZyb20gXCIuL0Vycm9yXCI7XG5pbXBvcnQgeyBFdmVudFNvdXJjZSB9IGZyb20gXCIuL0V2ZW50U291cmNlXCI7XG5leHBvcnQgY2xhc3MgRXZlbnRzIHtcbiAgICBzdGF0aWMgc2V0RXZlbnRTb3VyY2UoZXZlbnRTb3VyY2UpIHtcbiAgICAgICAgaWYgKCFldmVudFNvdXJjZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwiZXZlbnRTb3VyY2VcIik7XG4gICAgICAgIH1cbiAgICAgICAgRXZlbnRzLnByaXZJbnN0YW5jZSA9IGV2ZW50U291cmNlO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gRXZlbnRzLnByaXZJbnN0YW5jZTtcbiAgICB9XG59XG5FdmVudHMucHJpdkluc3RhbmNlID0gbmV3IEV2ZW50U291cmNlKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50cy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuZXhwb3J0ICogZnJvbSBcIi4vQXVkaW9Tb3VyY2VFdmVudHNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0Nvbm5lY3Rpb25FdmVudHNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0Nvbm5lY3Rpb25NZXNzYWdlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9Db25uZWN0aW9uT3BlblJlc3BvbnNlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9EaWFsb2dFdmVudHNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0Vycm9yXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9FdmVudHNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0V2ZW50U291cmNlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9HdWlkXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9JQXVkaW9Tb3VyY2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0lDb25uZWN0aW9uXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9JRGV0YWNoYWJsZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSURpY3Rpb25hcnlcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0lEaXNwb3NhYmxlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9JRXZlbnRTb3VyY2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0lFcnJvck1lc3NhZ2VzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9JVGltZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0lXZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9MaXN0XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9QbGF0Zm9ybUV2ZW50XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9Qcm9taXNlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9RdWV1ZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vUmF3V2Vic29ja2V0TWVzc2FnZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vUmlmZlBjbUVuY29kZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1N0cmVhbVwiO1xuZXhwb3J0IHsgVHJhbnNsYXRpb25TdGF0dXMgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9UcmFuc2xhdGlvblN0YXR1c1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vQ2h1bmtlZEFycmF5QnVmZmVyU3RyZWFtXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9JQXVkaW9EZXN0aW5hdGlvblwiO1xuZXhwb3J0ICogZnJvbSBcIi4vVGltZW91dFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vT0NTUEV2ZW50c1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vQmFja2dyb3VuZEVycm9yXCI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV4cG9ydHMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IHY0IGFzIHV1aWQgfSBmcm9tIFwidXVpZFwiO1xuY29uc3QgY3JlYXRlR3VpZCA9ICgpID0+IHV1aWQoKTtcbmNvbnN0IGNyZWF0ZU5vRGFzaEd1aWQgPSAoKSA9PiBjcmVhdGVHdWlkKCkucmVwbGFjZShuZXcgUmVnRXhwKFwiLVwiLCBcImdcIiksIFwiXCIpLnRvVXBwZXJDYXNlKCk7XG5leHBvcnQgeyBjcmVhdGVHdWlkLCBjcmVhdGVOb0Rhc2hHdWlkIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUd1aWQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SUF1ZGlvRGVzdGluYXRpb24uanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SUF1ZGlvU291cmNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgdmFyIENvbm5lY3Rpb25TdGF0ZTtcbihmdW5jdGlvbiAoQ29ubmVjdGlvblN0YXRlKSB7XG4gICAgQ29ubmVjdGlvblN0YXRlW0Nvbm5lY3Rpb25TdGF0ZVtcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xuICAgIENvbm5lY3Rpb25TdGF0ZVtDb25uZWN0aW9uU3RhdGVbXCJDb25uZWN0ZWRcIl0gPSAxXSA9IFwiQ29ubmVjdGVkXCI7XG4gICAgQ29ubmVjdGlvblN0YXRlW0Nvbm5lY3Rpb25TdGF0ZVtcIkNvbm5lY3RpbmdcIl0gPSAyXSA9IFwiQ29ubmVjdGluZ1wiO1xuICAgIENvbm5lY3Rpb25TdGF0ZVtDb25uZWN0aW9uU3RhdGVbXCJEaXNjb25uZWN0ZWRcIl0gPSAzXSA9IFwiRGlzY29ubmVjdGVkXCI7XG59KShDb25uZWN0aW9uU3RhdGUgfHwgKENvbm5lY3Rpb25TdGF0ZSA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUlDb25uZWN0aW9uLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUlEZXRhY2hhYmxlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUlEaWN0aW9uYXJ5LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUlEaXNwb3NhYmxlLmpzLm1hcFxuIiwiXG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUlFcnJvck1lc3NhZ2VzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUlFdmVudFNvdXJjZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JVGltZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SVdlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IE9iamVjdERpc3Bvc2VkRXJyb3IgfSBmcm9tIFwiLi9FcnJvclwiO1xuZXhwb3J0IGNsYXNzIExpc3Qge1xuICAgIGNvbnN0cnVjdG9yKGxpc3QpIHtcbiAgICAgICAgdGhpcy5wcml2U3Vic2NyaXB0aW9uSWRDb3VudGVyID0gMDtcbiAgICAgICAgdGhpcy5wcml2QWRkU3Vic2NyaXB0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLnByaXZSZW1vdmVTdWJzY3JpcHRpb25zID0ge307XG4gICAgICAgIHRoaXMucHJpdkRpc3Bvc2VkU3Vic2NyaXB0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLnByaXZEaXNwb3NlUmVhc29uID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcml2TGlzdCA9IFtdO1xuICAgICAgICAvLyBjb3B5IHRoZSBsaXN0IHJhdGhlciB0aGFuIHRha2luZyBhcyBpcy5cbiAgICAgICAgaWYgKGxpc3QpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBsaXN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TGlzdC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldChpdGVtSW5kZXgpIHtcbiAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkxpc3RbaXRlbUluZGV4XTtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgwKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMubGVuZ3RoKCkgLSAxKTtcbiAgICB9XG4gICAgYWRkKGl0ZW0pIHtcbiAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgdGhpcy5pbnNlcnRBdCh0aGlzLnByaXZMaXN0Lmxlbmd0aCwgaXRlbSk7XG4gICAgfVxuICAgIGluc2VydEF0KGluZGV4LCBpdGVtKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5wcml2TGlzdC51bnNoaWZ0KGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluZGV4ID09PSB0aGlzLnByaXZMaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5wcml2TGlzdC5wdXNoKGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2TGlzdC5zcGxpY2UoaW5kZXgsIDAsIGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHJpZ2dlclN1YnNjcmlwdGlvbnModGhpcy5wcml2QWRkU3Vic2NyaXB0aW9ucyk7XG4gICAgfVxuICAgIHJlbW92ZUZpcnN0KCkge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVBdCgwKTtcbiAgICB9XG4gICAgcmVtb3ZlTGFzdCgpIHtcbiAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlQXQodGhpcy5sZW5ndGgoKSAtIDEpO1xuICAgIH1cbiAgICByZW1vdmVBdChpbmRleCkge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmUoaW5kZXgsIDEpWzBdO1xuICAgIH1cbiAgICByZW1vdmUoaW5kZXgsIGNvdW50KSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgIGNvbnN0IHJlbW92ZWRFbGVtZW50cyA9IHRoaXMucHJpdkxpc3Quc3BsaWNlKGluZGV4LCBjb3VudCk7XG4gICAgICAgIHRoaXMudHJpZ2dlclN1YnNjcmlwdGlvbnModGhpcy5wcml2UmVtb3ZlU3Vic2NyaXB0aW9ucyk7XG4gICAgICAgIHJldHVybiByZW1vdmVkRWxlbWVudHM7XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICB0aGlzLnJlbW92ZSgwLCB0aGlzLmxlbmd0aCgpKTtcbiAgICB9XG4gICAgbGVuZ3RoKCkge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TGlzdC5sZW5ndGg7XG4gICAgfVxuICAgIG9uQWRkZWQoYWRkZWRDYWxsYmFjaykge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25JZCA9IHRoaXMucHJpdlN1YnNjcmlwdGlvbklkQ291bnRlcisrO1xuICAgICAgICB0aGlzLnByaXZBZGRTdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbklkXSA9IGFkZGVkQ2FsbGJhY2s7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkZXRhY2g6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wcml2QWRkU3Vic2NyaXB0aW9uc1tzdWJzY3JpcHRpb25JZF07XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgb25SZW1vdmVkKHJlbW92ZWRDYWxsYmFjaykge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25JZCA9IHRoaXMucHJpdlN1YnNjcmlwdGlvbklkQ291bnRlcisrO1xuICAgICAgICB0aGlzLnByaXZSZW1vdmVTdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbklkXSA9IHJlbW92ZWRDYWxsYmFjaztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRldGFjaDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnByaXZSZW1vdmVTdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbklkXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBvbkRpc3Bvc2VkKGRpc3Bvc2VkQ2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uSWQgPSB0aGlzLnByaXZTdWJzY3JpcHRpb25JZENvdW50ZXIrKztcbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZWRTdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbklkXSA9IGRpc3Bvc2VkQ2FsbGJhY2s7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkZXRhY2g6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wcml2RGlzcG9zZWRTdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbklkXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBqb2luKHNlcGVyYXRvcikge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TGlzdC5qb2luKHNlcGVyYXRvcik7XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIGNvbnN0IGNsb25lQ29weSA9IEFycmF5KCk7XG4gICAgICAgIHRoaXMucHJpdkxpc3QuZm9yRWFjaCgodmFsKSA9PiB7XG4gICAgICAgICAgICBjbG9uZUNvcHkucHVzaCh2YWwpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNsb25lQ29weTtcbiAgICB9XG4gICAgYW55KGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud2hlcmUoY2FsbGJhY2spLmxlbmd0aCgpID4gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlbmd0aCgpID4gMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhbGwoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMud2hlcmUoY2FsbGJhY2spLmxlbmd0aCgpID09PSB0aGlzLmxlbmd0aCgpO1xuICAgIH1cbiAgICBmb3JFYWNoKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGgoKTsgaSsrKSB7XG4gICAgICAgICAgICBjYWxsYmFjayh0aGlzLnByaXZMaXN0W2ldLCBpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxlY3QoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgY29uc3Qgc2VsZWN0TGlzdCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucHJpdkxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHNlbGVjdExpc3QucHVzaChjYWxsYmFjayh0aGlzLnByaXZMaXN0W2ldLCBpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBMaXN0KHNlbGVjdExpc3QpO1xuICAgIH1cbiAgICB3aGVyZShjYWxsYmFjaykge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZExpc3QgPSBuZXcgTGlzdCgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucHJpdkxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjayh0aGlzLnByaXZMaXN0W2ldLCBpKSkge1xuICAgICAgICAgICAgICAgIGZpbHRlcmVkTGlzdC5hZGQodGhpcy5wcml2TGlzdFtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkTGlzdDtcbiAgICB9XG4gICAgb3JkZXJCeShjb21wYXJlRm4pIHtcbiAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgY29uc3QgY2xvbmVkQXJyYXkgPSB0aGlzLnRvQXJyYXkoKTtcbiAgICAgICAgY29uc3Qgb3JkZXJlZEFycmF5ID0gY2xvbmVkQXJyYXkuc29ydChjb21wYXJlRm4pO1xuICAgICAgICByZXR1cm4gbmV3IExpc3Qob3JkZXJlZEFycmF5KTtcbiAgICB9XG4gICAgb3JkZXJCeURlc2MoY29tcGFyZUZuKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm9yZGVyQnkoKGEsIGIpID0+IGNvbXBhcmVGbihiLCBhKSk7XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICByZXR1cm4gbmV3IExpc3QodGhpcy50b0FycmF5KCkpO1xuICAgIH1cbiAgICBjb25jYXQobGlzdCkge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICByZXR1cm4gbmV3IExpc3QodGhpcy5wcml2TGlzdC5jb25jYXQobGlzdC50b0FycmF5KCkpKTtcbiAgICB9XG4gICAgY29uY2F0QXJyYXkoYXJyYXkpIHtcbiAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBMaXN0KHRoaXMucHJpdkxpc3QuY29uY2F0KGFycmF5KSk7XG4gICAgfVxuICAgIGlzRGlzcG9zZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZMaXN0ID09IG51bGw7XG4gICAgfVxuICAgIGRpc3Bvc2UocmVhc29uKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKCkpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkRpc3Bvc2VSZWFzb24gPSByZWFzb247XG4gICAgICAgICAgICB0aGlzLnByaXZMaXN0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucHJpdkFkZFN1YnNjcmlwdGlvbnMgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5wcml2UmVtb3ZlU3Vic2NyaXB0aW9ucyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJTdWJzY3JpcHRpb25zKHRoaXMucHJpdkRpc3Bvc2VkU3Vic2NyaXB0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhyb3dJZkRpc3Bvc2VkKCkge1xuICAgICAgICBpZiAodGhpcy5pc0Rpc3Bvc2VkKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3REaXNwb3NlZEVycm9yKFwiTGlzdFwiLCB0aGlzLnByaXZEaXNwb3NlUmVhc29uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmlnZ2VyU3Vic2NyaXB0aW9ucyhzdWJzY3JpcHRpb25zKSB7XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN1YnNjcmlwdGlvbklkIGluIHN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uc1tzdWJzY3JpcHRpb25JZF0oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxpc3QuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5pbXBvcnQgeyBFdmVudFR5cGUsIFBsYXRmb3JtRXZlbnQgfSBmcm9tIFwiLi9QbGF0Zm9ybUV2ZW50XCI7XG5leHBvcnQgY2xhc3MgT0NTUEV2ZW50IGV4dGVuZHMgUGxhdGZvcm1FdmVudCB7XG4gICAgY29uc3RydWN0b3IoZXZlbnROYW1lLCBldmVudFR5cGUsIHNpZ25hdHVyZSkge1xuICAgICAgICBzdXBlcihldmVudE5hbWUsIGV2ZW50VHlwZSk7XG4gICAgICAgIHRoaXMucHJpdlNpZ25hdHVyZSA9IHNpZ25hdHVyZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgT0NTUE1lbW9yeUNhY2hlSGl0RXZlbnQgZXh0ZW5kcyBPQ1NQRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKHNpZ25hdHVyZSkge1xuICAgICAgICBzdXBlcihcIk9DU1BNZW1vcnlDYWNoZUhpdEV2ZW50XCIsIEV2ZW50VHlwZS5EZWJ1Zywgc2lnbmF0dXJlKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgT0NTUENhY2hlTWlzc0V2ZW50IGV4dGVuZHMgT0NTUEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihzaWduYXR1cmUpIHtcbiAgICAgICAgc3VwZXIoXCJPQ1NQQ2FjaGVNaXNzRXZlbnRcIiwgRXZlbnRUeXBlLkRlYnVnLCBzaWduYXR1cmUpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBPQ1NQRGlza0NhY2hlSGl0RXZlbnQgZXh0ZW5kcyBPQ1NQRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKHNpZ25hdHVyZSkge1xuICAgICAgICBzdXBlcihcIk9DU1BEaXNrQ2FjaGVIaXRFdmVudFwiLCBFdmVudFR5cGUuRGVidWcsIHNpZ25hdHVyZSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE9DU1BDYWNoZVVwZGF0ZU5lZWRlZEV2ZW50IGV4dGVuZHMgT0NTUEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihzaWduYXR1cmUpIHtcbiAgICAgICAgc3VwZXIoXCJPQ1NQQ2FjaGVVcGRhdGVOZWVkZWRFdmVudFwiLCBFdmVudFR5cGUuRGVidWcsIHNpZ25hdHVyZSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE9DU1BNZW1vcnlDYWNoZVN0b3JlRXZlbnQgZXh0ZW5kcyBPQ1NQRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKHNpZ25hdHVyZSkge1xuICAgICAgICBzdXBlcihcIk9DU1BNZW1vcnlDYWNoZVN0b3JlRXZlbnRcIiwgRXZlbnRUeXBlLkRlYnVnLCBzaWduYXR1cmUpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBPQ1NQRGlza0NhY2hlU3RvcmVFdmVudCBleHRlbmRzIE9DU1BFdmVudCB7XG4gICAgY29uc3RydWN0b3Ioc2lnbmF0dXJlKSB7XG4gICAgICAgIHN1cGVyKFwiT0NTUERpc2tDYWNoZVN0b3JlRXZlbnRcIiwgRXZlbnRUeXBlLkRlYnVnLCBzaWduYXR1cmUpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBPQ1NQQ2FjaGVVcGRhdGVDb21wbGV0ZUV2ZW50IGV4dGVuZHMgT0NTUEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihzaWduYXR1cmUpIHtcbiAgICAgICAgc3VwZXIoXCJPQ1NQQ2FjaGVVcGRhdGVDb21wbGV0ZUV2ZW50XCIsIEV2ZW50VHlwZS5EZWJ1Zywgc2lnbmF0dXJlKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgT0NTUFN0YXBsZVJlY2VpdmVkRXZlbnQgZXh0ZW5kcyBPQ1NQRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihcIk9DU1BTdGFwbGVSZWNlaXZlZEV2ZW50XCIsIEV2ZW50VHlwZS5EZWJ1ZywgXCJcIik7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE9DU1BXU1VwZ3JhZGVTdGFydGVkRXZlbnQgZXh0ZW5kcyBPQ1NQRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKHNlcmlhbE51bWJlcikge1xuICAgICAgICBzdXBlcihcIk9DU1BXU1VwZ3JhZGVTdGFydGVkRXZlbnRcIiwgRXZlbnRUeXBlLkRlYnVnLCBzZXJpYWxOdW1iZXIpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBPQ1NQQ2FjaGVFbnRyeUV4cGlyZWRFdmVudCBleHRlbmRzIE9DU1BFdmVudCB7XG4gICAgY29uc3RydWN0b3Ioc2VyaWFsTnVtYmVyLCBleHBpcmVUaW1lKSB7XG4gICAgICAgIHN1cGVyKFwiT0NTUENhY2hlRW50cnlFeHBpcmVkRXZlbnRcIiwgRXZlbnRUeXBlLkRlYnVnLCBzZXJpYWxOdW1iZXIpO1xuICAgICAgICB0aGlzLnByaXZFeHBpcmVUaW1lID0gZXhwaXJlVGltZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgT0NTUENhY2hlRW50cnlOZWVkc1JlZnJlc2hFdmVudCBleHRlbmRzIE9DU1BFdmVudCB7XG4gICAgY29uc3RydWN0b3Ioc2VyaWFsTnVtYmVyLCBzdGFydFRpbWUsIGV4cGlyZVRpbWUpIHtcbiAgICAgICAgc3VwZXIoXCJPQ1NQQ2FjaGVFbnRyeU5lZWRzUmVmcmVzaEV2ZW50XCIsIEV2ZW50VHlwZS5EZWJ1Zywgc2VyaWFsTnVtYmVyKTtcbiAgICAgICAgdGhpcy5wcml2RXhwaXJlVGltZSA9IGV4cGlyZVRpbWU7XG4gICAgICAgIHRoaXMucHJpdlN0YXJ0VGltZSA9IHN0YXJ0VGltZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgT0NTUENhY2hlSGl0RXZlbnQgZXh0ZW5kcyBPQ1NQRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKHNlcmlhbE51bWJlciwgc3RhcnRUaW1lLCBleHBpcmVUaW1lKSB7XG4gICAgICAgIHN1cGVyKFwiT0NTUENhY2hlSGl0RXZlbnRcIiwgRXZlbnRUeXBlLkRlYnVnLCBzZXJpYWxOdW1iZXIpO1xuICAgICAgICB0aGlzLnByaXZFeHBpcmVUaW1lID0gZXhwaXJlVGltZTtcbiAgICAgICAgdGhpcy5wcml2RXhwaXJlVGltZVN0cmluZyA9IG5ldyBEYXRlKGV4cGlyZVRpbWUpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICAgICAgICB0aGlzLnByaXZTdGFydFRpbWUgPSBzdGFydFRpbWU7XG4gICAgICAgIHRoaXMucHJpdlN0YXJ0VGltZVN0cmluZyA9IG5ldyBEYXRlKHN0YXJ0VGltZSkudG9Mb2NhbGVUaW1lU3RyaW5nKCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE9DU1BWZXJpZmljYXRpb25GYWlsZWRFdmVudCBleHRlbmRzIE9DU1BFdmVudCB7XG4gICAgY29uc3RydWN0b3Ioc2VyaWFsTnVtYmVyLCBlcnJvcikge1xuICAgICAgICBzdXBlcihcIk9DU1BWZXJpZmljYXRpb25GYWlsZWRFdmVudFwiLCBFdmVudFR5cGUuRGVidWcsIHNlcmlhbE51bWJlcik7XG4gICAgICAgIHRoaXMucHJpdkVycm9yID0gZXJyb3I7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE9DU1BDYWNoZUZldGNoRXJyb3JFdmVudCBleHRlbmRzIE9DU1BFdmVudCB7XG4gICAgY29uc3RydWN0b3Ioc2VyaWFsTnVtYmVyLCBlcnJvcikge1xuICAgICAgICBzdXBlcihcIk9DU1BDYWNoZUZldGNoRXJyb3JFdmVudFwiLCBFdmVudFR5cGUuRGVidWcsIHNlcmlhbE51bWJlcik7XG4gICAgICAgIHRoaXMucHJpdkVycm9yID0gZXJyb3I7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE9DU1BSZXNwb25zZVJldHJpZXZlZEV2ZW50IGV4dGVuZHMgT0NTUEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihzZXJpYWxOdW1iZXIpIHtcbiAgICAgICAgc3VwZXIoXCJPQ1NQUmVzcG9uc2VSZXRyaWV2ZWRFdmVudFwiLCBFdmVudFR5cGUuRGVidWcsIHNlcmlhbE51bWJlcik7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE9DU1BDYWNoZVVwZGF0ZUVycm9yRXZlbnQgZXh0ZW5kcyBPQ1NQRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKHNlcmlhbE51bWJlciwgZXJyb3IpIHtcbiAgICAgICAgc3VwZXIoXCJPQ1NQQ2FjaGVVcGRhdGVFcnJvckV2ZW50XCIsIEV2ZW50VHlwZS5EZWJ1Zywgc2VyaWFsTnVtYmVyKTtcbiAgICAgICAgdGhpcy5wcml2RXJyb3IgPSBlcnJvcjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9DU1BFdmVudHMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IGNyZWF0ZU5vRGFzaEd1aWQgfSBmcm9tIFwiLi9HdWlkXCI7XG5leHBvcnQgdmFyIEV2ZW50VHlwZTtcbihmdW5jdGlvbiAoRXZlbnRUeXBlKSB7XG4gICAgRXZlbnRUeXBlW0V2ZW50VHlwZVtcIkRlYnVnXCJdID0gMF0gPSBcIkRlYnVnXCI7XG4gICAgRXZlbnRUeXBlW0V2ZW50VHlwZVtcIkluZm9cIl0gPSAxXSA9IFwiSW5mb1wiO1xuICAgIEV2ZW50VHlwZVtFdmVudFR5cGVbXCJXYXJuaW5nXCJdID0gMl0gPSBcIldhcm5pbmdcIjtcbiAgICBFdmVudFR5cGVbRXZlbnRUeXBlW1wiRXJyb3JcIl0gPSAzXSA9IFwiRXJyb3JcIjtcbiAgICBFdmVudFR5cGVbRXZlbnRUeXBlW1wiTm9uZVwiXSA9IDRdID0gXCJOb25lXCI7XG59KShFdmVudFR5cGUgfHwgKEV2ZW50VHlwZSA9IHt9KSk7XG5leHBvcnQgY2xhc3MgUGxhdGZvcm1FdmVudCB7XG4gICAgY29uc3RydWN0b3IoZXZlbnROYW1lLCBldmVudFR5cGUpIHtcbiAgICAgICAgdGhpcy5wcml2TmFtZSA9IGV2ZW50TmFtZTtcbiAgICAgICAgdGhpcy5wcml2RXZlbnRJZCA9IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2RXZlbnRUaW1lID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICB0aGlzLnByaXZFdmVudFR5cGUgPSBldmVudFR5cGU7XG4gICAgICAgIHRoaXMucHJpdk1ldGFkYXRhID0ge307XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TmFtZTtcbiAgICB9XG4gICAgZ2V0IGV2ZW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFdmVudElkO1xuICAgIH1cbiAgICBnZXQgZXZlbnRUaW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXZlbnRUaW1lO1xuICAgIH1cbiAgICBnZXQgZXZlbnRUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXZlbnRUeXBlO1xuICAgIH1cbiAgICBnZXQgbWV0YWRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZNZXRhZGF0YTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBsYXRmb3JtRXZlbnQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlLCBAdHlwZXNjcmlwdC1lc2xpbnQvdHlwZWRlZiAqL1xuZXhwb3J0IHZhciBQcm9taXNlU3RhdGU7XG4oZnVuY3Rpb24gKFByb21pc2VTdGF0ZSkge1xuICAgIFByb21pc2VTdGF0ZVtQcm9taXNlU3RhdGVbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcbiAgICBQcm9taXNlU3RhdGVbUHJvbWlzZVN0YXRlW1wiUmVzb2x2ZWRcIl0gPSAxXSA9IFwiUmVzb2x2ZWRcIjtcbiAgICBQcm9taXNlU3RhdGVbUHJvbWlzZVN0YXRlW1wiUmVqZWN0ZWRcIl0gPSAyXSA9IFwiUmVqZWN0ZWRcIjtcbn0pKFByb21pc2VTdGF0ZSB8fCAoUHJvbWlzZVN0YXRlID0ge30pKTtcbmV4cG9ydCBjbGFzcyBQcm9taXNlUmVzdWx0IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9taXNlUmVzdWx0RXZlbnRTb3VyY2UpIHtcbiAgICAgICAgdGhpcy50aHJvd0lmRXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5lcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcHJvbWlzZVJlc3VsdEV2ZW50U291cmNlLm9uKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wcml2SXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZJc0NvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlc3VsdCA9IHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJpdklzQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdklzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgaXNDb21wbGV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc0NvbXBsZXRlZDtcbiAgICB9XG4gICAgZ2V0IGlzRXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc0Vycm9yO1xuICAgIH1cbiAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvcjtcbiAgICB9XG4gICAgZ2V0IHJlc3VsdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlc3VsdDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUHJvbWlzZVJlc3VsdEV2ZW50U291cmNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zZXRSZXN1bHQgPSAocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByaXZPblNldFJlc3VsdChyZXN1bHQpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldEVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByaXZPblNldEVycm9yKGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbiA9IChvblNldFJlc3VsdCwgb25TZXRFcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcml2T25TZXRSZXN1bHQgPSBvblNldFJlc3VsdDtcbiAgICAgICAgICAgIHRoaXMucHJpdk9uU2V0RXJyb3IgPSBvblNldEVycm9yO1xuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBEZWZlcnJlZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucmVzb2x2ZSA9IChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlamVjdCA9IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcml2UmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LWZ1bmN0aW9uLXJldHVybi10eXBlXG4gICAgICAgIHRoaXMucHJpdlByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlamVjdCA9IHJlamVjdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBwcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvbWlzZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgU2luayB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJpdlN0YXRlID0gUHJvbWlzZVN0YXRlLk5vbmU7XG4gICAgICAgIHRoaXMucHJpdlByb21pc2VSZXN1bHQgPSBudWxsO1xuICAgICAgICB0aGlzLnByaXZQcm9taXNlUmVzdWx0RXZlbnRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0hhbmRsZXJzID0gW107XG4gICAgICAgIHRoaXMucHJpdkVycm9ySGFuZGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5wcml2UHJvbWlzZVJlc3VsdEV2ZW50cyA9IG5ldyBQcm9taXNlUmVzdWx0RXZlbnRTb3VyY2UoKTtcbiAgICAgICAgdGhpcy5wcml2UHJvbWlzZVJlc3VsdCA9IG5ldyBQcm9taXNlUmVzdWx0KHRoaXMucHJpdlByb21pc2VSZXN1bHRFdmVudHMpO1xuICAgIH1cbiAgICBnZXQgc3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTdGF0ZTtcbiAgICB9XG4gICAgZ2V0IHJlc3VsdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb21pc2VSZXN1bHQ7XG4gICAgfVxuICAgIHJlc29sdmUocmVzdWx0KSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZTdGF0ZSAhPT0gUHJvbWlzZVN0YXRlLk5vbmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIidDYW5ub3QgcmVzb2x2ZSBhIGNvbXBsZXRlZCBwcm9taXNlJ1wiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZTdGF0ZSA9IFByb21pc2VTdGF0ZS5SZXNvbHZlZDtcbiAgICAgICAgdGhpcy5wcml2UHJvbWlzZVJlc3VsdEV2ZW50cy5zZXRSZXN1bHQocmVzdWx0KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnByaXZTdWNjZXNzSGFuZGxlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuZXhlY3V0ZVN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQsIHRoaXMucHJpdlN1Y2Nlc3NIYW5kbGVyc1tpXSwgdGhpcy5wcml2RXJyb3JIYW5kbGVyc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXRhY2hIYW5kbGVycygpO1xuICAgIH1cbiAgICByZWplY3QoZXJyb3IpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdlN0YXRlICE9PSBQcm9taXNlU3RhdGUuTm9uZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ0Nhbm5vdCByZWplY3QgYSBjb21wbGV0ZWQgcHJvbWlzZSdcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2U3RhdGUgPSBQcm9taXNlU3RhdGUuUmVqZWN0ZWQ7XG4gICAgICAgIHRoaXMucHJpdlByb21pc2VSZXN1bHRFdmVudHMuc2V0RXJyb3IoZXJyb3IpO1xuICAgICAgICBmb3IgKGNvbnN0IGVycm9ySGFuZGxlciBvZiB0aGlzLnByaXZFcnJvckhhbmRsZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGVFcnJvckNhbGxiYWNrKGVycm9yLCBlcnJvckhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGV0YWNoSGFuZGxlcnMoKTtcbiAgICB9XG4gICAgb24oc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChzdWNjZXNzQ2FsbGJhY2sgPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgICAgICAgICAgc3VjY2Vzc0NhbGxiYWNrID0gKCkgPT4geyB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByaXZTdGF0ZSA9PT0gUHJvbWlzZVN0YXRlLk5vbmUpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NIYW5kbGVycy5wdXNoKHN1Y2Nlc3NDYWxsYmFjayk7XG4gICAgICAgICAgICB0aGlzLnByaXZFcnJvckhhbmRsZXJzLnB1c2goZXJyb3JDYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2U3RhdGUgPT09IFByb21pc2VTdGF0ZS5SZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZVN1Y2Nlc3NDYWxsYmFjayh0aGlzLnByaXZQcm9taXNlUmVzdWx0LnJlc3VsdCwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucHJpdlN0YXRlID09PSBQcm9taXNlU3RhdGUuUmVqZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVFcnJvckNhbGxiYWNrKHRoaXMucHJpdlByb21pc2VSZXN1bHQuZXJyb3IsIGVycm9yQ2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kZXRhY2hIYW5kbGVycygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4ZWN1dGVTdWNjZXNzQ2FsbGJhY2socmVzdWx0LCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGVFcnJvckNhbGxiYWNrKGAnVW5oYW5kbGVkIGNhbGxiYWNrIGVycm9yOiAke2V9J2AsIGVycm9yQ2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4ZWN1dGVFcnJvckNhbGxiYWNrKGVycm9yLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGVycm9yQ2FsbGJhY2soZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCdVbmhhbmRsZWQgY2FsbGJhY2sgZXJyb3I6ICR7ZX0uIElubmVyRXJyb3I6ICR7ZXJyb3J9J2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAnVW5oYW5kbGVkIGVycm9yOiAke2Vycm9yfSdgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXRhY2hIYW5kbGVycygpIHtcbiAgICAgICAgdGhpcy5wcml2RXJyb3JIYW5kbGVycyA9IFtdO1xuICAgICAgICB0aGlzLnByaXZTdWNjZXNzSGFuZGxlcnMgPSBbXTtcbiAgICB9XG59XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWFycm93L3ByZWZlci1hcnJvdy1mdW5jdGlvbnNcbmV4cG9ydCBmdW5jdGlvbiBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHByb21pc2UsIGNiLCBlcnIpIHtcbiAgICBwcm9taXNlLnRoZW4oKHZhbCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgICAgICBjYih2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVkRXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycih0eXBlZEVycm9yLm5hbWUgKyBcIjogXCIgKyB0eXBlZEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZW1wdHlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZWRFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICBlcnIodHlwZWRFcnJvci5uYW1lICsgXCI6IFwiICsgdHlwZWRFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lbXB0eVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7IH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9taXNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IEludmFsaWRPcGVyYXRpb25FcnJvciwgT2JqZWN0RGlzcG9zZWRFcnJvciB9IGZyb20gXCIuL0Vycm9yXCI7XG5pbXBvcnQgeyBMaXN0IH0gZnJvbSBcIi4vTGlzdFwiO1xuaW1wb3J0IHsgRGVmZXJyZWQsIH0gZnJvbSBcIi4vUHJvbWlzZVwiO1xudmFyIFN1YnNjcmliZXJUeXBlO1xuKGZ1bmN0aW9uIChTdWJzY3JpYmVyVHlwZSkge1xuICAgIFN1YnNjcmliZXJUeXBlW1N1YnNjcmliZXJUeXBlW1wiRGVxdWV1ZVwiXSA9IDBdID0gXCJEZXF1ZXVlXCI7XG4gICAgU3Vic2NyaWJlclR5cGVbU3Vic2NyaWJlclR5cGVbXCJQZWVrXCJdID0gMV0gPSBcIlBlZWtcIjtcbn0pKFN1YnNjcmliZXJUeXBlIHx8IChTdWJzY3JpYmVyVHlwZSA9IHt9KSk7XG5leHBvcnQgY2xhc3MgUXVldWUge1xuICAgIGNvbnN0cnVjdG9yKGxpc3QpIHtcbiAgICAgICAgdGhpcy5wcml2UHJvbWlzZVN0b3JlID0gbmV3IExpc3QoKTtcbiAgICAgICAgdGhpcy5wcml2SXNEcmFpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZVJlYXNvbiA9IG51bGw7XG4gICAgICAgIHRoaXMucHJpdkxpc3QgPSBsaXN0ID8gbGlzdCA6IG5ldyBMaXN0KCk7XG4gICAgICAgIHRoaXMucHJpdkRldGFjaGFibGVzID0gW107XG4gICAgICAgIHRoaXMucHJpdlN1YnNjcmliZXJzID0gbmV3IExpc3QoKTtcbiAgICAgICAgdGhpcy5wcml2RGV0YWNoYWJsZXMucHVzaCh0aGlzLnByaXZMaXN0Lm9uQWRkZWQoKCkgPT4gdGhpcy5kcmFpbigpKSk7XG4gICAgfVxuICAgIGVucXVldWUoaXRlbSkge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuZW5xdWV1ZUZyb21Qcm9taXNlKG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiByZXNvbHZlKGl0ZW0pKSk7XG4gICAgfVxuICAgIGVucXVldWVGcm9tUHJvbWlzZShwcm9taXNlKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2UoKTtcbiAgICAgICAgcHJvbWlzZS50aGVuKCh2YWwpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJpdkxpc3QuYWRkKHZhbCk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWVtcHR5LWZ1bmN0aW9uXG4gICAgICAgIH0sICgpID0+IHsgfSk7XG4gICAgfVxuICAgIGRlcXVldWUoKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2UoKTtcbiAgICAgICAgY29uc3QgZGVmZXJyZWRTdWJzY3JpYmVyID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIGlmICh0aGlzLnByaXZTdWJzY3JpYmVycykge1xuICAgICAgICAgICAgdGhpcy5wcml2U3Vic2NyaWJlcnMuYWRkKHsgZGVmZXJyYWw6IGRlZmVycmVkU3Vic2NyaWJlciwgdHlwZTogU3Vic2NyaWJlclR5cGUuRGVxdWV1ZSB9KTtcbiAgICAgICAgICAgIHRoaXMuZHJhaW4oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmZXJyZWRTdWJzY3JpYmVyLnByb21pc2U7XG4gICAgfVxuICAgIHBlZWsoKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2UoKTtcbiAgICAgICAgY29uc3QgZGVmZXJyZWRTdWJzY3JpYmVyID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIGNvbnN0IHN1YnMgPSB0aGlzLnByaXZTdWJzY3JpYmVycztcbiAgICAgICAgaWYgKHN1YnMpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlN1YnNjcmliZXJzLmFkZCh7IGRlZmVycmFsOiBkZWZlcnJlZFN1YnNjcmliZXIsIHR5cGU6IFN1YnNjcmliZXJUeXBlLlBlZWsgfSk7XG4gICAgICAgICAgICB0aGlzLmRyYWluKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkU3Vic2NyaWJlci5wcm9taXNlO1xuICAgIH1cbiAgICBsZW5ndGgoKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2UoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkxpc3QubGVuZ3RoKCk7XG4gICAgfVxuICAgIGlzRGlzcG9zZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTdWJzY3JpYmVycyA9PSBudWxsO1xuICAgIH1cbiAgICBkcmFpbkFuZERpc3Bvc2UocGVuZGluZ0l0ZW1Qcm9jZXNzb3IsIHJlYXNvbikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQoKSAmJiAhdGhpcy5wcml2SXNEaXNwb3NpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZEaXNwb3NlUmVhc29uID0gcmVhc29uO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdklzRGlzcG9zaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJzID0gdGhpcy5wcml2U3Vic2NyaWJlcnM7XG4gICAgICAgICAgICAgICAgaWYgKHN1YnMpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHN1YnMubGVuZ3RoKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJzY3JpYmVyID0gc3Vicy5yZW1vdmVGaXJzdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogdGhpcyBuZWVkcyB3b3JrIChSZXNvbHZlKG51bGwpIGluc3RlYWQ/KS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuZGVmZXJyYWwucmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3Vic2NyaWJlci5kZWZlcnJhbC5yZWplY3QoXCJEaXNwb3NlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBub3RlOiB0aGlzIGJsb2NrIGFzc3VtZXMgY29vcGVyYXRpdmUgbXVsdGl0YXNraW5nLCBpLmUuLFxuICAgICAgICAgICAgICAgICAgICAvLyBiZXR3ZWVuIHRoZSBpZi1zdGF0ZW1lbnQgYW5kIHRoZSBhc3NpZ25tZW50IHRoZXJlIGFyZSBub1xuICAgICAgICAgICAgICAgICAgICAvLyB0aHJlYWQgc3dpdGNoZXMuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlYXNvbiBpcyB0aGF0IGJldHdlZW4gdGhlIGluaXRpYWwgY29uc3QgPSB0aGlzLjsgYW5kIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gcG9pbnQgdGhlcmUgaXMgdGhlIGRlcnJhbC5yZXNvbHZlKCkgb3BlcmF0aW9uIHRoYXQgbWlnaHQgaGF2ZVxuICAgICAgICAgICAgICAgICAgICAvLyBjYXVzZWQgcmVjdXJzaXZlIGNhbGxzIHRvIHRoZSBRdWV1ZSwgZXNwZWNpYWxseSwgY2FsbGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyBEaXNwb3NlKCkgb24gdGhlIHF1ZXVlIGFscmVkeSAod2hpY2ggd291bGQgcmVzZXQgdGhlIHZhclxuICAgICAgICAgICAgICAgICAgICAvLyBoZXJlIHRvIG51bGwhKS5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhhdCBzaG91bGQgZ2VuZXJhbGx5IGhvbGQgdHJ1ZSBmb3IgamF2YXNjcmlwdC4uLlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2U3Vic2NyaWJlcnMgPT09IHN1YnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1YnNjcmliZXJzID0gc3VicztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRldGFjaGFibGUgb2YgdGhpcy5wcml2RGV0YWNoYWJsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgZGV0YWNoYWJsZS5kZXRhY2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlByb21pc2VTdG9yZS5sZW5ndGgoKSA+IDAgJiYgcGVuZGluZ0l0ZW1Qcm9jZXNzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvbWlzZUFycmF5ID0gW107XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlByb21pc2VTdG9yZS50b0FycmF5KCkuZm9yRWFjaCgod3JhcHBlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZUFycmF5LnB1c2god3JhcHBlcik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZUFycmF5KS5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1YnNjcmliZXJzID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkxpc3QuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdJdGVtUHJvY2Vzc29yKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZMaXN0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfSkudGhlbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3Vic2NyaWJlcnMgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZMaXN0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkaXNwb3NlKHJlYXNvbikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgeWllbGQgdGhpcy5kcmFpbkFuZERpc3Bvc2UobnVsbCwgcmVhc29uKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRyYWluKCkge1xuICAgICAgICBpZiAoIXRoaXMucHJpdklzRHJhaW5JblByb2dyZXNzICYmICF0aGlzLnByaXZJc0Rpc3Bvc2luZykge1xuICAgICAgICAgICAgdGhpcy5wcml2SXNEcmFpbkluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3Qgc3VicyA9IHRoaXMucHJpdlN1YnNjcmliZXJzO1xuICAgICAgICAgICAgY29uc3QgbGlzdHMgPSB0aGlzLnByaXZMaXN0O1xuICAgICAgICAgICAgaWYgKHN1YnMgJiYgbGlzdHMpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAobGlzdHMubGVuZ3RoKCkgPiAwICYmIHN1YnMubGVuZ3RoKCkgPiAwICYmICF0aGlzLnByaXZJc0Rpc3Bvc2luZykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJzY3JpYmVyID0gc3Vicy5yZW1vdmVGaXJzdCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaWJlci50eXBlID09PSBTdWJzY3JpYmVyVHlwZS5QZWVrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmRlZmVycmFsLnJlc29sdmUobGlzdHMuZmlyc3QoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXF1ZXVlZEl0ZW0gPSBsaXN0cy5yZW1vdmVGaXJzdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5kZWZlcnJhbC5yZXNvbHZlKGRlcXVldWVkSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gbm90ZTogdGhpcyBibG9jayBhc3N1bWVzIGNvb3BlcmF0aXZlIG11bHRpdGFza2luZywgaS5lLixcbiAgICAgICAgICAgICAgICAvLyBiZXR3ZWVuIHRoZSBpZi1zdGF0ZW1lbnQgYW5kIHRoZSBhc3NpZ25tZW50IHRoZXJlIGFyZSBub1xuICAgICAgICAgICAgICAgIC8vIHRocmVhZCBzd2l0Y2hlcy5cbiAgICAgICAgICAgICAgICAvLyBSZWFzb24gaXMgdGhhdCBiZXR3ZWVuIHRoZSBpbml0aWFsIGNvbnN0ID0gdGhpcy47IGFuZCB0aGlzXG4gICAgICAgICAgICAgICAgLy8gcG9pbnQgdGhlcmUgaXMgdGhlIGRlcnJhbC5yZXNvbHZlKCkgb3BlcmF0aW9uIHRoYXQgbWlnaHQgaGF2ZVxuICAgICAgICAgICAgICAgIC8vIGNhdXNlZCByZWN1cnNpdmUgY2FsbHMgdG8gdGhlIFF1ZXVlLCBlc3BlY2lhbGx5LCBjYWxsaW5nXG4gICAgICAgICAgICAgICAgLy8gRGlzcG9zZSgpIG9uIHRoZSBxdWV1ZSBhbHJlZHkgKHdoaWNoIHdvdWxkIHJlc2V0IHRoZSB2YXJcbiAgICAgICAgICAgICAgICAvLyBoZXJlIHRvIG51bGwhKS5cbiAgICAgICAgICAgICAgICAvLyBUaGF0IHNob3VsZCBnZW5lcmFsbHkgaG9sZCB0cnVlIGZvciBqYXZhc2NyaXB0Li4uXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlN1YnNjcmliZXJzID09PSBzdWJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1YnNjcmliZXJzID0gc3VicztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gbm90ZTogdGhpcyBibG9jayBhc3N1bWVzIGNvb3BlcmF0aXZlIG11bHRpdGFza2luZywgaS5lLixcbiAgICAgICAgICAgICAgICAvLyBiZXR3ZWVuIHRoZSBpZi1zdGF0ZW1lbnQgYW5kIHRoZSBhc3NpZ25tZW50IHRoZXJlIGFyZSBub1xuICAgICAgICAgICAgICAgIC8vIHRocmVhZCBzd2l0Y2hlcy5cbiAgICAgICAgICAgICAgICAvLyBSZWFzb24gaXMgdGhhdCBiZXR3ZWVuIHRoZSBpbml0aWFsIGNvbnN0ID0gdGhpcy47IGFuZCB0aGlzXG4gICAgICAgICAgICAgICAgLy8gcG9pbnQgdGhlcmUgaXMgdGhlIGRlcnJhbC5yZXNvbHZlKCkgb3BlcmF0aW9uIHRoYXQgbWlnaHQgaGF2ZVxuICAgICAgICAgICAgICAgIC8vIGNhdXNlZCByZWN1cnNpdmUgY2FsbHMgdG8gdGhlIFF1ZXVlLCBlc3BlY2lhbGx5LCBjYWxsaW5nXG4gICAgICAgICAgICAgICAgLy8gRGlzcG9zZSgpIG9uIHRoZSBxdWV1ZSBhbHJlZHkgKHdoaWNoIHdvdWxkIHJlc2V0IHRoZSB2YXJcbiAgICAgICAgICAgICAgICAvLyBoZXJlIHRvIG51bGwhKS5cbiAgICAgICAgICAgICAgICAvLyBUaGF0IHNob3VsZCBnZW5lcmFsbHkgaG9sZCB0cnVlIGZvciBqYXZhc2NyaXB0Li4uXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdkxpc3QgPT09IGxpc3RzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkxpc3QgPSBsaXN0cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByaXZJc0RyYWluSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRocm93SWZEaXNwb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5pc0Rpc3Bvc2VkKCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZEaXNwb3NlUmVhc29uKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FcnJvcih0aGlzLnByaXZEaXNwb3NlUmVhc29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3REaXNwb3NlZEVycm9yKFwiUXVldWVcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5wcml2SXNEaXNwb3NpbmcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXJyb3IoXCJRdWV1ZSBkaXNwb3NpbmdcIik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVF1ZXVlLmpzLm1hcFxuIiwiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50ICovXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IE1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4vQ29ubmVjdGlvbk1lc3NhZ2VcIjtcbmltcG9ydCB7IEFyZ3VtZW50TnVsbEVycm9yLCBJbnZhbGlkT3BlcmF0aW9uRXJyb3IgfSBmcm9tIFwiLi9FcnJvclwiO1xuaW1wb3J0IHsgY3JlYXRlTm9EYXNoR3VpZCB9IGZyb20gXCIuL0d1aWRcIjtcbmV4cG9ydCBjbGFzcyBSYXdXZWJzb2NrZXRNZXNzYWdlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlVHlwZSwgcGF5bG9hZCwgaWQpIHtcbiAgICAgICAgdGhpcy5wcml2UGF5bG9hZCA9IG51bGw7XG4gICAgICAgIGlmICghcGF5bG9hZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwicGF5bG9hZFwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICAgIGlmIChtZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuQmluYXJ5ICYmIHBheWxvYWQuX19wcm90b19fLmNvbnN0cnVjdG9yLm5hbWUgIT09IFwiQXJyYXlCdWZmZXJcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FcnJvcihcIlBheWxvYWQgbXVzdCBiZSBBcnJheUJ1ZmZlclwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLlRleHQgJiYgISh0eXBlb2YgKHBheWxvYWQpID09PSBcInN0cmluZ1wiKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FcnJvcihcIlBheWxvYWQgbXVzdCBiZSBhIHN0cmluZ1wiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZNZXNzYWdlVHlwZSA9IG1lc3NhZ2VUeXBlO1xuICAgICAgICB0aGlzLnByaXZQYXlsb2FkID0gcGF5bG9hZDtcbiAgICAgICAgdGhpcy5wcml2SWQgPSBpZCA/IGlkIDogY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgIH1cbiAgICBnZXQgbWVzc2FnZVR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZNZXNzYWdlVHlwZTtcbiAgICB9XG4gICAgZ2V0IHBheWxvYWQoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLXJldHVyblxuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGF5bG9hZDtcbiAgICB9XG4gICAgZ2V0IHRleHRDb250ZW50KCkge1xuICAgICAgICBpZiAodGhpcy5wcml2TWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLkJpbmFyeSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FcnJvcihcIk5vdCBzdXBwb3J0ZWQgZm9yIGJpbmFyeSBtZXNzYWdlXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXlsb2FkO1xuICAgIH1cbiAgICBnZXQgYmluYXJ5Q29udGVudCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdk1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5UZXh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiTm90IHN1cHBvcnRlZCBmb3IgdGV4dCBtZXNzYWdlXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXlsb2FkO1xuICAgIH1cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJZDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJhd1dlYnNvY2tldE1lc3NhZ2UuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmV4cG9ydCBjbGFzcyBSaWZmUGNtRW5jb2RlciB7XG4gICAgY29uc3RydWN0b3IoYWN0dWFsU2FtcGxlUmF0ZSwgZGVzaXJlZFNhbXBsZVJhdGUpIHtcbiAgICAgICAgdGhpcy5wcml2QWN0dWFsU2FtcGxlUmF0ZSA9IGFjdHVhbFNhbXBsZVJhdGU7XG4gICAgICAgIHRoaXMucHJpdkRlc2lyZWRTYW1wbGVSYXRlID0gZGVzaXJlZFNhbXBsZVJhdGU7XG4gICAgfVxuICAgIGVuY29kZShhY3R1YWxBdWRpb0ZyYW1lKSB7XG4gICAgICAgIGNvbnN0IGF1ZGlvRnJhbWUgPSB0aGlzLmRvd25TYW1wbGVBdWRpb0ZyYW1lKGFjdHVhbEF1ZGlvRnJhbWUsIHRoaXMucHJpdkFjdHVhbFNhbXBsZVJhdGUsIHRoaXMucHJpdkRlc2lyZWRTYW1wbGVSYXRlKTtcbiAgICAgICAgaWYgKCFhdWRpb0ZyYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhdWRpb0xlbmd0aCA9IGF1ZGlvRnJhbWUubGVuZ3RoICogMjtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGF1ZGlvTGVuZ3RoKTtcbiAgICAgICAgY29uc3QgdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xuICAgICAgICB0aGlzLmZsb2F0VG8xNkJpdFBDTSh2aWV3LCAwLCBhdWRpb0ZyYW1lKTtcbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9XG4gICAgc2V0U3RyaW5nKHZpZXcsIG9mZnNldCwgc3RyKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCArIGksIHN0ci5jaGFyQ29kZUF0KGkpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmbG9hdFRvMTZCaXRQQ00odmlldywgb2Zmc2V0LCBpbnB1dCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrLCBvZmZzZXQgKz0gMikge1xuICAgICAgICAgICAgY29uc3QgcyA9IE1hdGgubWF4KC0xLCBNYXRoLm1pbigxLCBpbnB1dFtpXSkpO1xuICAgICAgICAgICAgdmlldy5zZXRJbnQxNihvZmZzZXQsIHMgPCAwID8gcyAqIDB4ODAwMCA6IHMgKiAweDdGRkYsIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRvd25TYW1wbGVBdWRpb0ZyYW1lKHNyY0ZyYW1lLCBzcmNSYXRlLCBkc3RSYXRlKSB7XG4gICAgICAgIGlmICghc3JjRnJhbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkc3RSYXRlID09PSBzcmNSYXRlIHx8IGRzdFJhdGUgPiBzcmNSYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gc3JjRnJhbWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmF0aW8gPSBzcmNSYXRlIC8gZHN0UmF0ZTtcbiAgICAgICAgY29uc3QgZHN0TGVuZ3RoID0gTWF0aC5yb3VuZChzcmNGcmFtZS5sZW5ndGggLyByYXRpbyk7XG4gICAgICAgIGNvbnN0IGRzdEZyYW1lID0gbmV3IEZsb2F0MzJBcnJheShkc3RMZW5ndGgpO1xuICAgICAgICBsZXQgc3JjT2Zmc2V0ID0gMDtcbiAgICAgICAgbGV0IGRzdE9mZnNldCA9IDA7XG4gICAgICAgIHdoaWxlIChkc3RPZmZzZXQgPCBkc3RMZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRTcmNPZmZzZXQgPSBNYXRoLnJvdW5kKChkc3RPZmZzZXQgKyAxKSAqIHJhdGlvKTtcbiAgICAgICAgICAgIGxldCBhY2N1bSA9IDA7XG4gICAgICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKHNyY09mZnNldCA8IG5leHRTcmNPZmZzZXQgJiYgc3JjT2Zmc2V0IDwgc3JjRnJhbWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgYWNjdW0gKz0gc3JjRnJhbWVbc3JjT2Zmc2V0KytdO1xuICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkc3RGcmFtZVtkc3RPZmZzZXQrK10gPSBhY2N1bSAvIGNvdW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkc3RGcmFtZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJpZmZQY21FbmNvZGVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IEludmFsaWRPcGVyYXRpb25FcnJvciB9IGZyb20gXCIuL0Vycm9yXCI7XG5pbXBvcnQgeyBjcmVhdGVOb0Rhc2hHdWlkIH0gZnJvbSBcIi4vR3VpZFwiO1xuaW1wb3J0IHsgUXVldWUgfSBmcm9tIFwiLi9RdWV1ZVwiO1xuZXhwb3J0IGNsYXNzIFN0cmVhbSB7XG4gICAgY29uc3RydWN0b3Ioc3RyZWFtSWQpIHtcbiAgICAgICAgdGhpcy5wcml2SXNXcml0ZUVuZGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdklzUmVhZEVuZGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdklkID0gc3RyZWFtSWQgPyBzdHJlYW1JZCA6IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2UmVhZGVyUXVldWUgPSBuZXcgUXVldWUoKTtcbiAgICB9XG4gICAgZ2V0IGlzQ2xvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNXcml0ZUVuZGVkO1xuICAgIH1cbiAgICBnZXQgaXNSZWFkRW5kZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc1JlYWRFbmRlZDtcbiAgICB9XG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SWQ7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAoIXRoaXMucHJpdklzV3JpdGVFbmRlZCkge1xuICAgICAgICAgICAgdGhpcy53cml0ZVN0cmVhbUNodW5rKHtcbiAgICAgICAgICAgICAgICBidWZmZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgaXNFbmQ6IHRydWUsXG4gICAgICAgICAgICAgICAgdGltZVJlY2VpdmVkOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnByaXZJc1dyaXRlRW5kZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdyaXRlU3RyZWFtQ2h1bmsoc3RyZWFtQ2h1bmspIHtcbiAgICAgICAgdGhpcy50aHJvd0lmQ2xvc2VkKCk7XG4gICAgICAgIGlmICghdGhpcy5wcml2UmVhZGVyUXVldWUuaXNEaXNwb3NlZCgpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlYWRlclF1ZXVlLmVucXVldWUoc3RyZWFtQ2h1bmspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVhZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdklzUmVhZEVuZGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiU3RyZWFtIHJlYWQgaGFzIGFscmVhZHkgZmluaXNoZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlYWRlclF1ZXVlXG4gICAgICAgICAgICAuZGVxdWV1ZSgpXG4gICAgICAgICAgICAudGhlbigoc3RyZWFtQ2h1bmspID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChzdHJlYW1DaHVuayA9PT0gdW5kZWZpbmVkIHx8IHN0cmVhbUNodW5rLmlzRW5kKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVhZGVyUXVldWUuZGlzcG9zZShcIkVuZCBvZiBzdHJlYW0gcmVhY2hlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdHJlYW1DaHVuaztcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZWFkRW5kZWQoKSB7XG4gICAgICAgIGlmICghdGhpcy5wcml2SXNSZWFkRW5kZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdklzUmVhZEVuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlYWRlclF1ZXVlID0gbmV3IFF1ZXVlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhyb3dJZkNsb3NlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdklzV3JpdGVFbmRlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FcnJvcihcIlN0cmVhbSBjbG9zZWRcIik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0cmVhbS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBTdHJpbmcgaGVscGVyIGZ1bmN0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgU3RyaW5nVXRpbHMge1xuICAgIC8qKlxuICAgICAqIEZvcm1hdHMgYSBzdHJpbmcgYnkgcmVwbGFjaW5nIHRoZSBuYW1lZCB7a2V5c30gaW4gdGhlIHN0cmluZyB3aXRoIHRoZSB2YWx1ZXMgY29udGFpbmVkIGluIHRoZSByZXBsYWNlbWVudCBkaWN0aW9uYXJ5LlxuICAgICAqIEBwYXJhbSBmb3JtYXQgVGhlIGZvcm1hdCBzdHJpbmcgdGhhdCBjb250YWlucyB0aGUgcGFydHMgdG8gcmVwbGFjZSBzdXJyb3VuZGVkIGJ5IHt9LiBGb3IgZXhhbXBsZTogXCJ3c3M6Ly97cmVnaW9ufS5jdHMuc3BlZWNoLm1pY3Jvc29mdC5jb21cIi5cbiAgICAgKiBJZiB5b3VyIHN0cmluZyBuZWVkcyB0byBjb250YWluIGEgeyBvciB9IHlvdSBjYW4gdXNlIHRoZSB7eyBhbmQgfX0gZXNjYXBlIHNlcXVlbmNlcyByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHJlcGxhY2VtZW50cyBUaGUgZGljdGlvbmFyeSBvZiByZXBsYWNlbWVudHMuIElmIGEgcmVwbGFjZW1lbnQgaXMgbm90IGZvdW5kLCBpdCBpcyByZXBsYWNlZCB3aXRoIGFuIGVtcHR5IHN0cmluZ1xuICAgICAqIEByZXR1cm5zIFRoZSBmb3JtYXR0ZWQgc3RyaW5nLiBJZiB5b3UgcGFzcyBpbiBhIG51bGwgb3IgdW5kZWZpbmVkIGZvcm1hdCBzdHJpbmcsIGFuIGVtcHR5IHN0cmluZyB3aWxsIGJlIHJldHVybmVkXG4gICAgICovXG4gICAgc3RhdGljIGZvcm1hdFN0cmluZyhmb3JtYXQsIHJlcGxhY2VtZW50cykge1xuICAgICAgICBpZiAoIWZvcm1hdCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZXBsYWNlbWVudHMpIHtcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZvcm1hdHRlZCA9IFwiXCI7XG4gICAgICAgIGxldCBrZXkgPSBcIlwiO1xuICAgICAgICBjb25zdCBhcHBlbmRUb0Zvcm1hdHRlZCA9IChzdHIpID0+IHtcbiAgICAgICAgICAgIGZvcm1hdHRlZCArPSBzdHI7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGFwcGVuZFRvS2V5ID0gKHN0cikgPT4ge1xuICAgICAgICAgICAga2V5ICs9IHN0cjtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGFwcGVuZEZ1bmMgPSBhcHBlbmRUb0Zvcm1hdHRlZDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3JtYXQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBmb3JtYXRbaV07XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gaSArIDEgPCBmb3JtYXQubGVuZ3RoID8gZm9ybWF0W2kgKyAxXSA6IFwiXCI7XG4gICAgICAgICAgICBzd2l0Y2ggKGMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwie1wiOlxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCA9PT0gXCJ7XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZEZ1bmMoXCJ7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kRnVuYyA9IGFwcGVuZFRvS2V5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ9XCI6XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0ID09PSBcIn1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kRnVuYyhcIn1cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVwbGFjZW1lbnRzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQgKz0gcmVwbGFjZW1lbnRzW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRGdW5jID0gYXBwZW5kVG9Gb3JtYXR0ZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZEZ1bmMoYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb3JtYXR0ZWQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdHJpbmdVdGlscy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuZXhwb3J0IGNsYXNzIFRpbWVvdXQge1xuICAgIHN0YXRpYyBsb2FkKCkge1xuICAgICAgICAvLyBQcmVmaWxsaW5nIHRoZSBNYXBzIHdpdGggYSBmdW5jdGlvbiBpbmRleGVkIGJ5IHplcm8gaXMgbmVjZXNzYXJ5IHRvIGJlIGNvbXBsaWFudCB3aXRoIHRoZSBzcGVjaWZpY2F0aW9uLlxuICAgICAgICBjb25zdCBzY2hlZHVsZWRUaW1lb3V0RnVuY3Rpb25zID0gbmV3IE1hcChbWzAsICgpID0+IHsgfV1dKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgICAgICAgY29uc3QgdW5oYW5kbGVkUmVxdWVzdHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICBjb25zdCB3b3JrZXJTY3JpcHQgPSBgIWZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Z1bmN0aW9uIG4ocil7aWYodFtyXSlyZXR1cm4gdFtyXS5leHBvcnRzO3ZhciBvPXRbcl09e2k6cixsOiExLGV4cG9ydHM6e319O3JldHVybiBlW3JdLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLG4pLG8ubD0hMCxvLmV4cG9ydHN9bi5tPWUsbi5jPXQsbi5kPWZ1bmN0aW9uKGUsdCxyKXtuLm8oZSx0KXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7ZW51bWVyYWJsZTohMCxnZXQ6cn0pfSxuLnI9ZnVuY3Rpb24oZSl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOlwiTW9kdWxlXCJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0sbi50PWZ1bmN0aW9uKGUsdCl7aWYoMSZ0JiYoZT1uKGUpKSw4JnQpcmV0dXJuIGU7aWYoNCZ0JiZcIm9iamVjdFwiPT10eXBlb2YgZSYmZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciByPU9iamVjdC5jcmVhdGUobnVsbCk7aWYobi5yKHIpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiZGVmYXVsdFwiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOmV9KSwyJnQmJlwic3RyaW5nXCIhPXR5cGVvZiBlKWZvcih2YXIgbyBpbiBlKW4uZChyLG8sZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19LmJpbmQobnVsbCxvKSk7cmV0dXJuIHJ9LG4ubj1mdW5jdGlvbihlKXt2YXIgdD1lJiZlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gbi5kKHQsXCJhXCIsdCksdH0sbi5vPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfSxuLnA9XCJcIixuKG4ucz0xNCl9KFtmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7bi5kKHQsXCJhXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGl9KSksbi5kKHQsXCJiXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHV9KSksbi5kKHQsXCJjXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGF9KSksbi5kKHQsXCJkXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGR9KSk7Y29uc3Qgcj1uZXcgTWFwLG89bmV3IE1hcCxpPWU9Pntjb25zdCB0PXIuZ2V0KGUpO2lmKHZvaWQgMD09PXQpdGhyb3cgbmV3IEVycm9yKCdUaGVyZSBpcyBubyBpbnRlcnZhbCBzY2hlZHVsZWQgd2l0aCB0aGUgZ2l2ZW4gaWQgXCInLmNvbmNhdChlLCdcIi4nKSk7Y2xlYXJUaW1lb3V0KHQpLHIuZGVsZXRlKGUpfSx1PWU9Pntjb25zdCB0PW8uZ2V0KGUpO2lmKHZvaWQgMD09PXQpdGhyb3cgbmV3IEVycm9yKCdUaGVyZSBpcyBubyB0aW1lb3V0IHNjaGVkdWxlZCB3aXRoIHRoZSBnaXZlbiBpZCBcIicuY29uY2F0KGUsJ1wiLicpKTtjbGVhclRpbWVvdXQodCksby5kZWxldGUoZSl9LGY9KGUsdCk9PntsZXQgbixyO2lmKFwicGVyZm9ybWFuY2VcImluIHNlbGYpe2NvbnN0IG89cGVyZm9ybWFuY2Uubm93KCk7bj1vLHI9ZS1NYXRoLm1heCgwLG8tdCl9ZWxzZSBuPURhdGUubm93KCkscj1lO3JldHVybntleHBlY3RlZDpuK3IscmVtYWluaW5nRGVsYXk6cn19LGM9KGUsdCxuLHIpPT57Y29uc3Qgbz1cInBlcmZvcm1hbmNlXCJpbiBzZWxmP3BlcmZvcm1hbmNlLm5vdygpOkRhdGUubm93KCk7bz5uP3Bvc3RNZXNzYWdlKHtpZDpudWxsLG1ldGhvZDpcImNhbGxcIixwYXJhbXM6e3RpbWVySWQ6dH19KTplLnNldCh0LHNldFRpbWVvdXQoYyxuLW8sZSx0LG4pKX0sYT0oZSx0LG4pPT57Y29uc3R7ZXhwZWN0ZWQ6byxyZW1haW5pbmdEZWxheTppfT1mKGUsbik7ci5zZXQodCxzZXRUaW1lb3V0KGMsaSxyLHQsbykpfSxkPShlLHQsbik9Pntjb25zdHtleHBlY3RlZDpyLHJlbWFpbmluZ0RlbGF5Oml9PWYoZSxuKTtvLnNldCh0LHNldFRpbWVvdXQoYyxpLG8sdCxyKSl9fSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKHQpO3ZhciByPW4oMik7Zm9yKHZhciBvIGluIHIpXCJkZWZhdWx0XCIhPT1vJiZmdW5jdGlvbihlKXtuLmQodCxlLChmdW5jdGlvbigpe3JldHVybiByW2VdfSkpfShvKTt2YXIgaT1uKDMpO2Zvcih2YXIgbyBpbiBpKVwiZGVmYXVsdFwiIT09byYmZnVuY3Rpb24oZSl7bi5kKHQsZSwoZnVuY3Rpb24oKXtyZXR1cm4gaVtlXX0pKX0obyk7dmFyIHU9big0KTtmb3IodmFyIG8gaW4gdSlcImRlZmF1bHRcIiE9PW8mJmZ1bmN0aW9uKGUpe24uZCh0LGUsKGZ1bmN0aW9uKCl7cmV0dXJuIHVbZV19KSl9KG8pO3ZhciBmPW4oNSk7Zm9yKHZhciBvIGluIGYpXCJkZWZhdWx0XCIhPT1vJiZmdW5jdGlvbihlKXtuLmQodCxlLChmdW5jdGlvbigpe3JldHVybiBmW2VdfSkpfShvKTt2YXIgYz1uKDYpO2Zvcih2YXIgbyBpbiBjKVwiZGVmYXVsdFwiIT09byYmZnVuY3Rpb24oZSl7bi5kKHQsZSwoZnVuY3Rpb24oKXtyZXR1cm4gY1tlXX0pKX0obyk7dmFyIGE9big3KTtmb3IodmFyIG8gaW4gYSlcImRlZmF1bHRcIiE9PW8mJmZ1bmN0aW9uKGUpe24uZCh0LGUsKGZ1bmN0aW9uKCl7cmV0dXJuIGFbZV19KSl9KG8pO3ZhciBkPW4oOCk7Zm9yKHZhciBvIGluIGQpXCJkZWZhdWx0XCIhPT1vJiZmdW5jdGlvbihlKXtuLmQodCxlLChmdW5jdGlvbigpe3JldHVybiBkW2VdfSkpfShvKTt2YXIgcz1uKDkpO2Zvcih2YXIgbyBpbiBzKVwiZGVmYXVsdFwiIT09byYmZnVuY3Rpb24oZSl7bi5kKHQsZSwoZnVuY3Rpb24oKXtyZXR1cm4gc1tlXX0pKX0obyl9LGZ1bmN0aW9uKGUsdCl7fSxmdW5jdGlvbihlLHQpe30sZnVuY3Rpb24oZSx0KXt9LGZ1bmN0aW9uKGUsdCl7fSxmdW5jdGlvbihlLHQpe30sZnVuY3Rpb24oZSx0KXt9LGZ1bmN0aW9uKGUsdCl7fSxmdW5jdGlvbihlLHQpe30sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO24ucih0KTt2YXIgcj1uKDExKTtmb3IodmFyIG8gaW4gcilcImRlZmF1bHRcIiE9PW8mJmZ1bmN0aW9uKGUpe24uZCh0LGUsKGZ1bmN0aW9uKCl7cmV0dXJuIHJbZV19KSl9KG8pO3ZhciBpPW4oMTIpO2Zvcih2YXIgbyBpbiBpKVwiZGVmYXVsdFwiIT09byYmZnVuY3Rpb24oZSl7bi5kKHQsZSwoZnVuY3Rpb24oKXtyZXR1cm4gaVtlXX0pKX0obyk7dmFyIHU9bigxMyk7Zm9yKHZhciBvIGluIHUpXCJkZWZhdWx0XCIhPT1vJiZmdW5jdGlvbihlKXtuLmQodCxlLChmdW5jdGlvbigpe3JldHVybiB1W2VdfSkpfShvKX0sZnVuY3Rpb24oZSx0KXt9LGZ1bmN0aW9uKGUsdCl7fSxmdW5jdGlvbihlLHQpe30sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO24ucih0KTt2YXIgcj1uKDApLG89bigxKTtmb3IodmFyIGkgaW4gbylcImRlZmF1bHRcIiE9PWkmJmZ1bmN0aW9uKGUpe24uZCh0LGUsKGZ1bmN0aW9uKCl7cmV0dXJuIG9bZV19KSl9KGkpO3ZhciB1PW4oMTApO2Zvcih2YXIgaSBpbiB1KVwiZGVmYXVsdFwiIT09aSYmZnVuY3Rpb24oZSl7bi5kKHQsZSwoZnVuY3Rpb24oKXtyZXR1cm4gdVtlXX0pKX0oaSk7YWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwoe2RhdGE6ZX0pPT57dHJ5e2lmKFwiY2xlYXJcIj09PWUubWV0aG9kKXtjb25zdHtpZDp0LHBhcmFtczp7dGltZXJJZDpufX09ZTtPYmplY3Qoci5iKShuKSxwb3N0TWVzc2FnZSh7ZXJyb3I6bnVsbCxpZDp0fSl9ZWxzZXtpZihcInNldFwiIT09ZS5tZXRob2QpdGhyb3cgbmV3IEVycm9yKCdUaGUgZ2l2ZW4gbWV0aG9kIFwiJy5jb25jYXQoZS5tZXRob2QsJ1wiIGlzIG5vdCBzdXBwb3J0ZWQnKSk7e2NvbnN0e3BhcmFtczp7ZGVsYXk6dCxub3c6bix0aW1lcklkOm99fT1lO09iamVjdChyLmQpKHQsbyxuKX19fWNhdGNoKHQpe3Bvc3RNZXNzYWdlKHtlcnJvcjp7bWVzc2FnZTp0Lm1lc3NhZ2V9LGlkOmUuaWQscmVzdWx0Om51bGx9KX19KX1dKTtgO1xuICAgICAgICBjb25zdCB3b3JrZXJVcmwgPSBcImRhdGE6dGV4dC9qYXZhc2NyaXB0O2Jhc2U2NCxcIiArIGJ0b2Eod29ya2VyU2NyaXB0KTtcbiAgICAgICAgY29uc3Qgd29ya2VyID0gbmV3IFdvcmtlcih3b3JrZXJVcmwpO1xuICAgICAgICB3b3JrZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKHsgZGF0YSB9KSA9PiB7XG4gICAgICAgICAgICBpZiAoVGltZW91dC5pc0NhbGxOb3RpZmljYXRpb24oZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHBhcmFtczogeyB0aW1lcklkIH0gfSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgY29uc3QgaWRPckZ1bmMgPSBzY2hlZHVsZWRUaW1lb3V0RnVuY3Rpb25zLmdldCh0aW1lcklkKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGlkT3JGdW5jID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVuaGFuZGxlZFRpbWVySWQgPSB1bmhhbmRsZWRSZXF1ZXN0cy5nZXQoaWRPckZ1bmMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodW5oYW5kbGVkVGltZXJJZCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmhhbmRsZWRUaW1lcklkICE9PSB0aW1lcklkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgdGltZXIgaXMgaW4gYW4gdW5kZWZpbmVkIHN0YXRlLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgaWRPckZ1bmMgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWRPckZ1bmMoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQSB0aW1lb3V0IGNhbiBiZSBzYWZlbHkgZGVsZXRlZCBiZWNhdXNlIGl0IGlzIG9ubHkgY2FsbGVkIG9uY2UuXG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlZFRpbWVvdXRGdW5jdGlvbnMuZGVsZXRlKHRpbWVySWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHRpbWVyIGlzIGluIGFuIHVuZGVmaW5lZCBzdGF0ZS5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoVGltZW91dC5pc0NsZWFyUmVzcG9uc2UoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGlkIH0gPSBkYXRhO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVuaGFuZGxlZFRpbWVySWQgPSB1bmhhbmRsZWRSZXF1ZXN0cy5nZXQoaWQpO1xuICAgICAgICAgICAgICAgIGlmICh1bmhhbmRsZWRUaW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHRpbWVyIGlzIGluIGFuIHVuZGVmaW5lZCBzdGF0ZS5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVuaGFuZGxlZFJlcXVlc3RzLmRlbGV0ZShpZCk7XG4gICAgICAgICAgICAgICAgc2NoZWR1bGVkVGltZW91dEZ1bmN0aW9ucy5kZWxldGUodW5oYW5kbGVkVGltZXJJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGVycm9yOiB7IG1lc3NhZ2UgfSB9ID0gZGF0YTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjbGVhclRpbWVvdXQgPSAodGltZXJJZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICAgICAgdW5oYW5kbGVkUmVxdWVzdHMuc2V0KGlkLCB0aW1lcklkKTtcbiAgICAgICAgICAgIHNjaGVkdWxlZFRpbWVvdXRGdW5jdGlvbnMuc2V0KHRpbWVySWQsIGlkKTtcbiAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcImNsZWFyXCIsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7IHRpbWVySWQgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHNldFRpbWVvdXQgPSAoZnVuYywgZGVsYXkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVySWQgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICAgICAgc2NoZWR1bGVkVGltZW91dEZ1bmN0aW9ucy5zZXQodGltZXJJZCwgZnVuYyk7XG4gICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIGlkOiBudWxsLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJzZXRcIixcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgZGVsYXksXG4gICAgICAgICAgICAgICAgICAgIG5vdzogcGVyZm9ybWFuY2Uubm93KCksXG4gICAgICAgICAgICAgICAgICAgIHRpbWVySWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aW1lcklkO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0LFxuICAgICAgICAgICAgc2V0VGltZW91dFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgbG9hZFdvcmtlclRpbWVycygpIHtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGlmIChUaW1lb3V0LndvcmtlclRpbWVycyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBUaW1lb3V0LndvcmtlclRpbWVycztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFRpbWVvdXQud29ya2VyVGltZXJzID0gVGltZW91dC5sb2FkKCk7XG4gICAgICAgICAgICByZXR1cm4gVGltZW91dC53b3JrZXJUaW1lcnM7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBpc0NhbGxOb3RpZmljYXRpb24obWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZS5tZXRob2QgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLm1ldGhvZCA9PT0gXCJjYWxsXCI7XG4gICAgfVxuICAgIHN0YXRpYyBpc0NsZWFyUmVzcG9uc2UobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZS5lcnJvciA9PT0gbnVsbCAmJiB0eXBlb2YgbWVzc2FnZS5pZCA9PT0gXCJudW1iZXJcIjtcbiAgICB9XG59XG5UaW1lb3V0LndvcmtlclRpbWVycyA9IG51bGw7XG5UaW1lb3V0LmNsZWFyVGltZW91dCA9ICh0aW1lcklkKSA9PiBUaW1lb3V0LnRpbWVycygpLmNsZWFyVGltZW91dCh0aW1lcklkKTtcblRpbWVvdXQuc2V0VGltZW91dCA9IChmdW5jLCBkZWxheSkgPT4gVGltZW91dC50aW1lcnMoKS5zZXRUaW1lb3V0KGZ1bmMsIGRlbGF5KTtcblRpbWVvdXQudGltZXJzID0gVGltZW91dC5sb2FkV29ya2VyVGltZXJzKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbWVvdXQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogRGVmaW5lcyBjb250ZW50cyBvZiByZWNlaXZlZCBtZXNzYWdlL2V2ZW50cy5cbiAqIEBjbGFzcyBBY3Rpdml0eVJlY2VpdmVkRXZlbnRBcmdzXG4gKi9cbmV4cG9ydCBjbGFzcyBBY3Rpdml0eVJlY2VpdmVkRXZlbnRBcmdzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7YW55fSBhY3Rpdml0eSAtIFRoZSBhY3Rpdml0eS4uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYWN0aXZpdHksIGF1ZGlvU3RyZWFtKSB7XG4gICAgICAgIHRoaXMucHJpdkFjdGl2aXR5ID0gYWN0aXZpdHk7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvU3RyZWFtID0gYXVkaW9TdHJlYW07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHJlY2VpdmVkIGFjdGl2aXR5XG4gICAgICogQG1lbWJlciBBY3Rpdml0eVJlY2VpdmVkRXZlbnRBcmdzLnByb3RvdHlwZS5hY3Rpdml0eVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7YW55fSB0aGUgcmVjZWl2ZWQgYWN0aXZpdHkuXG4gICAgICovXG4gICAgZ2V0IGFjdGl2aXR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QWN0aXZpdHk7XG4gICAgfVxuICAgIGdldCBhdWRpb1N0cmVhbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvU3RyZWFtO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QWN0aXZpdHlSZWNlaXZlZEV2ZW50QXJncy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgRmlsZUF1ZGlvU291cmNlLCBNaWNBdWRpb1NvdXJjZSwgUGNtUmVjb3JkZXIsIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi5icm93c2VyL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IEF1ZGlvSW5wdXRTdHJlYW0sIFB1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2ssIFB1bGxBdWRpb091dHB1dFN0cmVhbSwgUHVzaEF1ZGlvT3V0cHV0U3RyZWFtLCBQdXNoQXVkaW9PdXRwdXRTdHJlYW1DYWxsYmFjaywgU3BlYWtlckF1ZGlvRGVzdGluYXRpb24gfSBmcm9tIFwiLi4vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQXVkaW9GaWxlV3JpdGVyIH0gZnJvbSBcIi4vQXVkaW9GaWxlV3JpdGVyXCI7XG5pbXBvcnQgeyBQdWxsQXVkaW9JbnB1dFN0cmVhbUltcGwgfSBmcm9tIFwiLi9BdWRpb0lucHV0U3RyZWFtXCI7XG5pbXBvcnQgeyBQdXNoQXVkaW9PdXRwdXRTdHJlYW1JbXBsIH0gZnJvbSBcIi4vQXVkaW9PdXRwdXRTdHJlYW1cIjtcbi8qKlxuICogUmVwcmVzZW50cyBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9uIHVzZWQgZm9yIHNwZWNpZnlpbmcgd2hhdCB0eXBlIG9mIGlucHV0IHRvIHVzZSAobWljcm9waG9uZSwgZmlsZSwgc3RyZWFtKS5cbiAqIEBjbGFzcyBBdWRpb0NvbmZpZ1xuICogVXBkYXRlZCBpbiB2ZXJzaW9uIDEuMTEuMFxuICovXG5leHBvcnQgY2xhc3MgQXVkaW9Db25maWcge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gQXVkaW9Db25maWcgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgZGVmYXVsdCBtaWNyb3Bob25lIG9uIHRoZSBzeXN0ZW0uXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZy5mcm9tRGVmYXVsdE1pY3JvcGhvbmVJbnB1dFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7QXVkaW9Db25maWd9IFRoZSBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9uIGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21EZWZhdWx0TWljcm9waG9uZUlucHV0KCkge1xuICAgICAgICBjb25zdCBwY21SZWNvcmRlciA9IG5ldyBQY21SZWNvcmRlcih0cnVlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBBdWRpb0NvbmZpZ0ltcGwobmV3IE1pY0F1ZGlvU291cmNlKHBjbVJlY29yZGVyKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gQXVkaW9Db25maWcgb2JqZWN0IHJlcHJlc2VudGluZyBhIG1pY3JvcGhvbmUgd2l0aCB0aGUgc3BlY2lmaWVkIGRldmljZSBJRC5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnLmZyb21NaWNyb3Bob25lSW5wdXRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWR9IGRldmljZUlkIC0gU3BlY2lmaWVzIHRoZSBkZXZpY2UgSUQgb2YgdGhlIG1pY3JvcGhvbmUgdG8gYmUgdXNlZC5cbiAgICAgKiBEZWZhdWx0IG1pY3JvcGhvbmUgaXMgdXNlZCB0aGUgdmFsdWUgaXMgb21pdHRlZC5cbiAgICAgKiBAcmV0dXJucyB7QXVkaW9Db25maWd9IFRoZSBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9uIGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21NaWNyb3Bob25lSW5wdXQoZGV2aWNlSWQpIHtcbiAgICAgICAgY29uc3QgcGNtUmVjb3JkZXIgPSBuZXcgUGNtUmVjb3JkZXIodHJ1ZSk7XG4gICAgICAgIHJldHVybiBuZXcgQXVkaW9Db25maWdJbXBsKG5ldyBNaWNBdWRpb1NvdXJjZShwY21SZWNvcmRlciwgZGV2aWNlSWQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBBdWRpb0NvbmZpZyBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgZmlsZS5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnLmZyb21XYXZGaWxlSW5wdXRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtGaWxlfSBmaWxlTmFtZSAtIFNwZWNpZmllcyB0aGUgYXVkaW8gaW5wdXQgZmlsZS4gQ3VycmVudGx5LCBvbmx5IFdBViAvIFBDTSBpcyBzdXBwb3J0ZWQuXG4gICAgICogQHJldHVybnMge0F1ZGlvQ29uZmlnfSBUaGUgYXVkaW8gaW5wdXQgY29uZmlndXJhdGlvbiBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tV2F2RmlsZUlucHV0KGZpbGUsIG5hbWUgPSBcInVubmFtZWRCdWZmZXIud2F2XCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdWRpb0NvbmZpZ0ltcGwobmV3IEZpbGVBdWRpb1NvdXJjZShmaWxlLCBuYW1lKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gQXVkaW9Db25maWcgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3BlY2lmaWVkIHN0cmVhbS5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnLmZyb21TdHJlYW1JbnB1dFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0F1ZGlvSW5wdXRTdHJlYW0gfCBQdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrIHwgTWVkaWFTdHJlYW19IGF1ZGlvU3RyZWFtIC0gU3BlY2lmaWVzIHRoZSBjdXN0b20gYXVkaW8gaW5wdXRcbiAgICAgKiBzdHJlYW0uIEN1cnJlbnRseSwgb25seSBXQVYgLyBQQ00gaXMgc3VwcG9ydGVkLlxuICAgICAqIEByZXR1cm5zIHtBdWRpb0NvbmZpZ30gVGhlIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb24gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVN0cmVhbUlucHV0KGF1ZGlvU3RyZWFtKSB7XG4gICAgICAgIGlmIChhdWRpb1N0cmVhbSBpbnN0YW5jZW9mIFB1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9Db25maWdJbXBsKG5ldyBQdWxsQXVkaW9JbnB1dFN0cmVhbUltcGwoYXVkaW9TdHJlYW0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXVkaW9TdHJlYW0gaW5zdGFuY2VvZiBBdWRpb0lucHV0U3RyZWFtKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvQ29uZmlnSW1wbChhdWRpb1N0cmVhbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBNZWRpYVN0cmVhbSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBhdWRpb1N0cmVhbSBpbnN0YW5jZW9mIE1lZGlhU3RyZWFtKSB7XG4gICAgICAgICAgICBjb25zdCBwY21SZWNvcmRlciA9IG5ldyBQY21SZWNvcmRlcihmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvQ29uZmlnSW1wbChuZXcgTWljQXVkaW9Tb3VyY2UocGNtUmVjb3JkZXIsIG51bGwsIG51bGwsIGF1ZGlvU3RyZWFtKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IFN1cHBvcnRlZCBUeXBlXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIEF1ZGlvQ29uZmlnIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGRlZmF1bHQgc3BlYWtlci5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnLmZyb21EZWZhdWx0U3BlYWtlck91dHB1dFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7QXVkaW9Db25maWd9IFRoZSBhdWRpbyBvdXRwdXQgY29uZmlndXJhdGlvbiBiZWluZyBjcmVhdGVkLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xMS4wXG4gICAgICovXG4gICAgc3RhdGljIGZyb21EZWZhdWx0U3BlYWtlck91dHB1dCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dENvbmZpZ0ltcGwobmV3IFNwZWFrZXJBdWRpb0Rlc3RpbmF0aW9uKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIEF1ZGlvQ29uZmlnIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1c3RvbSBJUGxheWVyIG9iamVjdC5cbiAgICAgKiBZb3UgY2FuIHVzZSB0aGUgSVBsYXllciBvYmplY3QgdG8gY29udHJvbCBwYXVzZSwgcmVzdW1lLCBldGMuXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZy5mcm9tU3BlYWtlck91dHB1dFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0lQbGF5ZXJ9IHBsYXllciAtIHRoZSBJUGxheWVyIG9iamVjdCBmb3IgcGxheWJhY2suXG4gICAgICogQHJldHVybnMge0F1ZGlvQ29uZmlnfSBUaGUgYXVkaW8gb3V0cHV0IGNvbmZpZ3VyYXRpb24gYmVpbmcgY3JlYXRlZC5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTIuMFxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tU3BlYWtlck91dHB1dChwbGF5ZXIpIHtcbiAgICAgICAgaWYgKHBsYXllciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gQXVkaW9Db25maWcuZnJvbURlZmF1bHRTcGVha2VyT3V0cHV0KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBsYXllciBpbnN0YW5jZW9mIFNwZWFrZXJBdWRpb0Rlc3RpbmF0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Q29uZmlnSW1wbChwbGF5ZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBTdXBwb3J0ZWQgVHlwZVwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBBdWRpb0NvbmZpZyBvYmplY3QgcmVwcmVzZW50aW5nIGEgc3BlY2lmaWVkIG91dHB1dCBhdWRpbyBmaWxlXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZy5mcm9tQXVkaW9GaWxlT3V0cHV0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7UGF0aExpa2V9IGZpbGVuYW1lIC0gdGhlIGZpbGVuYW1lIG9mIHRoZSBvdXRwdXQgYXVkaW8gZmlsZVxuICAgICAqIEByZXR1cm5zIHtBdWRpb0NvbmZpZ30gVGhlIGF1ZGlvIG91dHB1dCBjb25maWd1cmF0aW9uIGJlaW5nIGNyZWF0ZWQuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjExLjBcbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUF1ZGlvRmlsZU91dHB1dChmaWxlbmFtZSkge1xuICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Q29uZmlnSW1wbChuZXcgQXVkaW9GaWxlV3JpdGVyKGZpbGVuYW1lKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gQXVkaW9Db25maWcgb2JqZWN0IHJlcHJlc2VudGluZyBhIHNwZWNpZmllZCBhdWRpbyBvdXRwdXQgc3RyZWFtXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZy5mcm9tU3RyZWFtT3V0cHV0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7QXVkaW9PdXRwdXRTdHJlYW0gfCBQdXNoQXVkaW9PdXRwdXRTdHJlYW1DYWxsYmFja30gYXVkaW9TdHJlYW0gLSBTcGVjaWZpZXMgdGhlIGN1c3RvbSBhdWRpbyBvdXRwdXRcbiAgICAgKiBzdHJlYW0uXG4gICAgICogQHJldHVybnMge0F1ZGlvQ29uZmlnfSBUaGUgYXVkaW8gb3V0cHV0IGNvbmZpZ3VyYXRpb24gYmVpbmcgY3JlYXRlZC5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTEuMFxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tU3RyZWFtT3V0cHV0KGF1ZGlvU3RyZWFtKSB7XG4gICAgICAgIGlmIChhdWRpb1N0cmVhbSBpbnN0YW5jZW9mIFB1c2hBdWRpb091dHB1dFN0cmVhbUNhbGxiYWNrKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Q29uZmlnSW1wbChuZXcgUHVzaEF1ZGlvT3V0cHV0U3RyZWFtSW1wbChhdWRpb1N0cmVhbSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdWRpb1N0cmVhbSBpbnN0YW5jZW9mIFB1c2hBdWRpb091dHB1dFN0cmVhbSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dENvbmZpZ0ltcGwoYXVkaW9TdHJlYW0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdWRpb1N0cmVhbSBpbnN0YW5jZW9mIFB1bGxBdWRpb091dHB1dFN0cmVhbSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dENvbmZpZ0ltcGwoYXVkaW9TdHJlYW0pO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBTdXBwb3J0ZWQgVHlwZVwiKTtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYXVkaW8gaW5wdXQgc3RyZWFtIHVzZWQgZm9yIGN1c3RvbSBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9ucy5cbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgQXVkaW9Db25maWdJbXBsXG4gKi9cbmV4cG9ydCBjbGFzcyBBdWRpb0NvbmZpZ0ltcGwgZXh0ZW5kcyBBdWRpb0NvbmZpZyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0lBdWRpb1NvdXJjZX0gc291cmNlIC0gQW4gYXVkaW8gc291cmNlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNvdXJjZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnByaXZTb3VyY2UgPSBzb3VyY2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcm1hdCBpbmZvcm1hdGlvbiBmb3IgdGhlIGF1ZGlvXG4gICAgICovXG4gICAgZ2V0IGZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNvdXJjZS5mb3JtYXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBtZW1iZXIgQXVkaW9Db25maWdJbXBsLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZShjYiwgZXJyKSB7XG4gICAgICAgIHRoaXMucHJpdlNvdXJjZS50dXJuT2ZmKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBpZiAoISFjYikge1xuICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBtZW1iZXIgQXVkaW9Db25maWdJbXBsLnByb3RvdHlwZS5pZFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNvdXJjZS5pZCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnSW1wbC5wcm90b3R5cGUuYmxvYlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXQgYmxvYigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNvdXJjZS5ibG9iO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnSW1wbC5wcm90b3R5cGUudHVybk9uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fSBBIHByb21pc2UuXG4gICAgICovXG4gICAgdHVybk9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U291cmNlLnR1cm5PbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnSW1wbC5wcm90b3R5cGUuYXR0YWNoXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdWRpb05vZGVJZCAtIFRoZSBhdWRpbyBub2RlIGlkLlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPElBdWRpb1N0cmVhbU5vZGU+fSBBIHByb21pc2UuXG4gICAgICovXG4gICAgYXR0YWNoKGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTb3VyY2UuYXR0YWNoKGF1ZGlvTm9kZUlkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZ0ltcGwucHJvdG90eXBlLmRldGFjaFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXVkaW9Ob2RlSWQgLSBUaGUgYXVkaW8gbm9kZSBpZC5cbiAgICAgKi9cbiAgICBkZXRhY2goYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNvdXJjZS5kZXRhY2goYXVkaW9Ob2RlSWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnSW1wbC5wcm90b3R5cGUudHVybk9mZlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn0gQSBwcm9taXNlLlxuICAgICAqL1xuICAgIHR1cm5PZmYoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTb3VyY2UudHVybk9mZigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnSW1wbC5wcm90b3R5cGUuZXZlbnRzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtFdmVudFNvdXJjZTxBdWRpb1NvdXJjZUV2ZW50Pn0gQW4gZXZlbnQgc291cmNlIGZvciBhdWRpbyBldmVudHMuXG4gICAgICovXG4gICAgZ2V0IGV2ZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNvdXJjZS5ldmVudHM7XG4gICAgfVxuICAgIHNldFByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbCh2YWx1ZSwgXCJ2YWx1ZVwiKTtcbiAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gdGhpcy5wcml2U291cmNlLnNldFByb3BlcnR5KSB7XG4gICAgICAgICAgICB0aGlzLnByaXZTb3VyY2Uuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBBdWRpb0NvbmZpZyBpbnN0YW5jZSBkb2VzIG5vdCBzdXBwb3J0IHNldHRpbmcgcHJvcGVydGllcy5cIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0UHJvcGVydHkobmFtZSwgZGVmKSB7XG4gICAgICAgIGlmICh1bmRlZmluZWQgIT09IHRoaXMucHJpdlNvdXJjZS5nZXRQcm9wZXJ0eSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNvdXJjZS5nZXRQcm9wZXJ0eShuYW1lLCBkZWYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBBdWRpb0NvbmZpZyBpbnN0YW5jZSBkb2VzIG5vdCBzdXBwb3J0IGdldHRpbmcgcHJvcGVydGllcy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZjtcbiAgICB9XG4gICAgZ2V0IGRldmljZUluZm8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTb3VyY2UuZGV2aWNlSW5mbztcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQXVkaW9PdXRwdXRDb25maWdJbXBsIGV4dGVuZHMgQXVkaW9Db25maWcge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtJQXVkaW9EZXN0aW5hdGlvbn0gZGVzdGluYXRpb24gLSBBbiBhdWRpbyBkZXN0aW5hdGlvbi5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihkZXN0aW5hdGlvbikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnByaXZEZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgIH1cbiAgICBzZXQgZm9ybWF0KGZvcm1hdCkge1xuICAgICAgICB0aGlzLnByaXZEZXN0aW5hdGlvbi5mb3JtYXQgPSBmb3JtYXQ7XG4gICAgfVxuICAgIHdyaXRlKGJ1ZmZlcikge1xuICAgICAgICB0aGlzLnByaXZEZXN0aW5hdGlvbi53cml0ZShidWZmZXIpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5wcml2RGVzdGluYXRpb24uY2xvc2UoKTtcbiAgICB9XG4gICAgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEZXN0aW5hdGlvbi5pZCgpO1xuICAgIH1cbiAgICBzZXRQcm9wZXJ0eSgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBBdWRpb0NvbmZpZyBpbnN0YW5jZSBkb2VzIG5vdCBzdXBwb3J0IHNldHRpbmcgcHJvcGVydGllcy5cIik7XG4gICAgfVxuICAgIGdldFByb3BlcnR5KCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIEF1ZGlvQ29uZmlnIGluc3RhbmNlIGRvZXMgbm90IHN1cHBvcnQgZ2V0dGluZyBwcm9wZXJ0aWVzLlwiKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF1ZGlvQ29uZmlnLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgKiBhcyBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuLi9Db250cmFjdHNcIjtcbmV4cG9ydCBjbGFzcyBBdWRpb0ZpbGVXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGZpbGVuYW1lKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGZzLm9wZW5TeW5jLCBcIlxcbkZpbGUgU3lzdGVtIGFjY2VzcyBub3QgYXZhaWxhYmxlLCBwbGVhc2UgdXNlIFB1c2ggb3IgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtXCIpO1xuICAgICAgICB0aGlzLnByaXZGZCA9IGZzLm9wZW5TeW5jKGZpbGVuYW1lLCBcIndcIik7XG4gICAgfVxuICAgIHNldCBmb3JtYXQoZm9ybWF0KSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTm90VW5kZWZpbmVkKHRoaXMucHJpdkF1ZGlvRm9ybWF0LCBcImZvcm1hdCBpcyBhbHJlYWR5IHNldFwiKTtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Gb3JtYXQgPSBmb3JtYXQ7XG4gICAgICAgIGxldCBoZWFkZXJPZmZzZXQgPSAwO1xuICAgICAgICBpZiAodGhpcy5wcml2QXVkaW9Gb3JtYXQuaGFzSGVhZGVyKSB7XG4gICAgICAgICAgICBoZWFkZXJPZmZzZXQgPSB0aGlzLnByaXZBdWRpb0Zvcm1hdC5oZWFkZXIuYnl0ZUxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcml2RmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2V3JpdGVTdHJlYW0gPSBmcy5jcmVhdGVXcml0ZVN0cmVhbShcIlwiLCB7IGZkOiB0aGlzLnByaXZGZCwgc3RhcnQ6IGhlYWRlck9mZnNldCwgYXV0b0Nsb3NlOiBmYWxzZSB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3cml0ZShidWZmZXIpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQodGhpcy5wcml2QXVkaW9Gb3JtYXQsIFwibXVzdCBzZXQgZm9ybWF0IGJlZm9yZSB3cml0aW5nLlwiKTtcbiAgICAgICAgaWYgKHRoaXMucHJpdldyaXRlU3RyZWFtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdldyaXRlU3RyZWFtLndyaXRlKG5ldyBVaW50OEFycmF5KGJ1ZmZlci5zbGljZSgwKSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5wcml2RmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2V3JpdGVTdHJlYW0ub24oXCJmaW5pc2hcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZBdWRpb0Zvcm1hdC5oYXNIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2QXVkaW9Gb3JtYXQudXBkYXRlSGVhZGVyKHRoaXMucHJpdldyaXRlU3RyZWFtLmJ5dGVzV3JpdHRlbik7XG4gICAgICAgICAgICAgICAgICAgIGZzLndyaXRlU3luYyh0aGlzLnByaXZGZCwgbmV3IEludDhBcnJheSh0aGlzLnByaXZBdWRpb0Zvcm1hdC5oZWFkZXIpLCAwLCB0aGlzLnByaXZBdWRpb0Zvcm1hdC5oZWFkZXIuYnl0ZUxlbmd0aCwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZzLmNsb3NlU3luYyh0aGlzLnByaXZGZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2RmQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMucHJpdldyaXRlU3RyZWFtLmVuZCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SWQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdWRpb0ZpbGVXcml0ZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cbmltcG9ydCB7IGNvbm5lY3Rpdml0eSwgdHlwZSwgfSBmcm9tIFwiLi4vLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBBdWRpb1NvdXJjZUluaXRpYWxpemluZ0V2ZW50LCBBdWRpb1NvdXJjZVJlYWR5RXZlbnQsIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGVkRXZlbnQsIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGluZ0V2ZW50LCBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50LCBDaHVua2VkQXJyYXlCdWZmZXJTdHJlYW0sIEV2ZW50cywgRXZlbnRTb3VyY2UsIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBjcmVhdGVOb0Rhc2hHdWlkIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9HdWlkXCI7XG5pbXBvcnQgeyBBdWRpb1N0cmVhbUZvcm1hdCB9IGZyb20gXCIuLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBBdWRpb1N0cmVhbUZvcm1hdEltcGwgfSBmcm9tIFwiLi9BdWRpb1N0cmVhbUZvcm1hdFwiO1xuLyoqXG4gKiBSZXByZXNlbnRzIGF1ZGlvIGlucHV0IHN0cmVhbSB1c2VkIGZvciBjdXN0b20gYXVkaW8gaW5wdXQgY29uZmlndXJhdGlvbnMuXG4gKiBAY2xhc3MgQXVkaW9JbnB1dFN0cmVhbVxuICovXG5leHBvcnQgY2xhc3MgQXVkaW9JbnB1dFN0cmVhbSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2UuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG1lbW9yeSBiYWNrZWQgUHVzaEF1ZGlvSW5wdXRTdHJlYW0gd2l0aCB0aGUgc3BlY2lmaWVkIGF1ZGlvIGZvcm1hdC5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvSW5wdXRTdHJlYW0uY3JlYXRlUHVzaFN0cmVhbVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0F1ZGlvU3RyZWFtRm9ybWF0fSBmb3JtYXQgLSBUaGUgYXVkaW8gZGF0YSBmb3JtYXQgaW4gd2hpY2ggYXVkaW8gd2lsbCBiZVxuICAgICAqIHdyaXR0ZW4gdG8gdGhlIHB1c2ggYXVkaW8gc3RyZWFtJ3Mgd3JpdGUoKSBtZXRob2QgKFJlcXVpcmVkIGlmIGZvcm1hdCBpcyBub3QgMTYga0h6IDE2Yml0IG1vbm8gUENNKS5cbiAgICAgKiBAcmV0dXJucyB7UHVzaEF1ZGlvSW5wdXRTdHJlYW19IFRoZSBhdWRpbyBpbnB1dCBzdHJlYW0gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlUHVzaFN0cmVhbShmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIFB1c2hBdWRpb0lucHV0U3RyZWFtLmNyZWF0ZShmb3JtYXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgUHVsbEF1ZGlvSW5wdXRTdHJlYW0gdGhhdCBkZWxlZ2F0ZXMgdG8gdGhlIHNwZWNpZmllZCBjYWxsYmFjayBpbnRlcmZhY2UgZm9yIHJlYWQoKVxuICAgICAqIGFuZCBjbG9zZSgpIG1ldGhvZHMuXG4gICAgICogQG1lbWJlciBBdWRpb0lucHV0U3RyZWFtLmNyZWF0ZVB1bGxTdHJlYW1cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtQdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrfSBjYWxsYmFjayAtIFRoZSBjdXN0b20gYXVkaW8gaW5wdXQgb2JqZWN0LCBkZXJpdmVkIGZyb21cbiAgICAgKiBQdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrXG4gICAgICogQHBhcmFtIHtBdWRpb1N0cmVhbUZvcm1hdH0gZm9ybWF0IC0gVGhlIGF1ZGlvIGRhdGEgZm9ybWF0IGluIHdoaWNoIGF1ZGlvIHdpbGwgYmUgcmV0dXJuZWQgZnJvbVxuICAgICAqIHRoZSBjYWxsYmFjaydzIHJlYWQoKSBtZXRob2QgKFJlcXVpcmVkIGlmIGZvcm1hdCBpcyBub3QgMTYga0h6IDE2Yml0IG1vbm8gUENNKS5cbiAgICAgKiBAcmV0dXJucyB7UHVsbEF1ZGlvSW5wdXRTdHJlYW19IFRoZSBhdWRpbyBpbnB1dCBzdHJlYW0gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlUHVsbFN0cmVhbShjYWxsYmFjaywgZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiBQdWxsQXVkaW9JbnB1dFN0cmVhbS5jcmVhdGUoY2FsbGJhY2ssIGZvcm1hdCk7XG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk9vcHNcIik7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIG1lbW9yeSBiYWNrZWQgcHVzaCBhdWRpbyBpbnB1dCBzdHJlYW0gdXNlZCBmb3IgY3VzdG9tIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb25zLlxuICogQGNsYXNzIFB1c2hBdWRpb0lucHV0U3RyZWFtXG4gKi9cbmV4cG9ydCBjbGFzcyBQdXNoQXVkaW9JbnB1dFN0cmVhbSBleHRlbmRzIEF1ZGlvSW5wdXRTdHJlYW0ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBtZW1vcnkgYmFja2VkIFB1c2hBdWRpb0lucHV0U3RyZWFtIHdpdGggdGhlIHNwZWNpZmllZCBhdWRpbyBmb3JtYXQuXG4gICAgICogQG1lbWJlciBQdXNoQXVkaW9JbnB1dFN0cmVhbS5jcmVhdGVcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtBdWRpb1N0cmVhbUZvcm1hdH0gZm9ybWF0IC0gVGhlIGF1ZGlvIGRhdGEgZm9ybWF0IGluIHdoaWNoIGF1ZGlvIHdpbGwgYmUgd3JpdHRlbiB0byB0aGVcbiAgICAgKiBwdXNoIGF1ZGlvIHN0cmVhbSdzIHdyaXRlKCkgbWV0aG9kIChSZXF1aXJlZCBpZiBmb3JtYXQgaXMgbm90IDE2IGtIeiAxNmJpdCBtb25vIFBDTSkuXG4gICAgICogQHJldHVybnMge1B1c2hBdWRpb0lucHV0U3RyZWFtfSBUaGUgcHVzaCBhdWRpbyBpbnB1dCBzdHJlYW0gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gbmV3IFB1c2hBdWRpb0lucHV0U3RyZWFtSW1wbChmb3JtYXQpO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBtZW1vcnkgYmFja2VkIHB1c2ggYXVkaW8gaW5wdXQgc3RyZWFtIHVzZWQgZm9yIGN1c3RvbSBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9ucy5cbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgUHVzaEF1ZGlvSW5wdXRTdHJlYW1JbXBsXG4gKi9cbmV4cG9ydCBjbGFzcyBQdXNoQXVkaW9JbnB1dFN0cmVhbUltcGwgZXh0ZW5kcyBQdXNoQXVkaW9JbnB1dFN0cmVhbSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGFsaXplcyBhbiBpbnN0YW5jZSB3aXRoIHRoZSBnaXZlbiB2YWx1ZXMuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtBdWRpb1N0cmVhbUZvcm1hdH0gZm9ybWF0IC0gVGhlIGF1ZGlvIHN0cmVhbSBmb3JtYXQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZm9ybWF0KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2Rm9ybWF0ID0gQXVkaW9TdHJlYW1Gb3JtYXRJbXBsLmdldERlZmF1bHRJbnB1dEZvcm1hdCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2Rm9ybWF0ID0gZm9ybWF0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdkV2ZW50cyA9IG5ldyBFdmVudFNvdXJjZSgpO1xuICAgICAgICB0aGlzLnByaXZJZCA9IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtID0gbmV3IENodW5rZWRBcnJheUJ1ZmZlclN0cmVhbSh0aGlzLnByaXZGb3JtYXQuYXZnQnl0ZXNQZXJTZWMgLyAxMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcm1hdCBpbmZvcm1hdGlvbiBmb3IgdGhlIGF1ZGlvXG4gICAgICovXG4gICAgZ2V0IGZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnByaXZGb3JtYXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgdGhlIGF1ZGlvIGRhdGEgc3BlY2lmaWVkIGJ5IG1ha2luZyBhbiBpbnRlcm5hbCBjb3B5IG9mIHRoZSBkYXRhLlxuICAgICAqIEBtZW1iZXIgUHVzaEF1ZGlvSW5wdXRTdHJlYW1JbXBsLnByb3RvdHlwZS53cml0ZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBkYXRhQnVmZmVyIC0gVGhlIGF1ZGlvIGJ1ZmZlciBvZiB3aGljaCB0aGlzIGZ1bmN0aW9uIHdpbGwgbWFrZSBhIGNvcHkuXG4gICAgICovXG4gICAgd3JpdGUoZGF0YUJ1ZmZlcikge1xuICAgICAgICB0aGlzLnByaXZTdHJlYW0ud3JpdGVTdHJlYW1DaHVuayh7XG4gICAgICAgICAgICBidWZmZXI6IGRhdGFCdWZmZXIsXG4gICAgICAgICAgICBpc0VuZDogZmFsc2UsXG4gICAgICAgICAgICB0aW1lUmVjZWl2ZWQ6IERhdGUubm93KClcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgc3RyZWFtLlxuICAgICAqIEBtZW1iZXIgUHVzaEF1ZGlvSW5wdXRTdHJlYW1JbXBsLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtLmNsb3NlKCk7XG4gICAgfVxuICAgIGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SWQ7XG4gICAgfVxuICAgIGdldCBibG9iKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRhY2goXCJpZFwiKS50aGVuKChhdWRpb05vZGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBbXTtcbiAgICAgICAgICAgIGxldCBidWZmZXJEYXRhID0gQnVmZmVyLmZyb20oXCJcIik7XG4gICAgICAgICAgICBjb25zdCByZWFkQ3ljbGUgPSAoKSA9PiBhdWRpb05vZGUucmVhZCgpLnRoZW4oKGF1ZGlvU3RyZWFtQ2h1bmspID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWF1ZGlvU3RyZWFtQ2h1bmsgfHwgYXVkaW9TdHJlYW1DaHVuay5pc0VuZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChYTUxIdHRwUmVxdWVzdCkgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIChCbG9iKSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKEJ1ZmZlci5mcm9tKGJ1ZmZlckRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAoQmxvYikgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChhdWRpb1N0cmVhbUNodW5rLmJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJEYXRhID0gQnVmZmVyLmNvbmNhdChbYnVmZmVyRGF0YSwgdGhpcy50b0J1ZmZlcihhdWRpb1N0cmVhbUNodW5rLmJ1ZmZlcildKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZEN5Y2xlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcmVhZEN5Y2xlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0dXJuT24oKSB7XG4gICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9Tb3VyY2VJbml0aWFsaXppbmdFdmVudCh0aGlzLnByaXZJZCkpOyAvLyBubyBzdHJlYW0gaWRcbiAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1NvdXJjZVJlYWR5RXZlbnQodGhpcy5wcml2SWQpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhdHRhY2goYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9TdHJlYW1Ob2RlQXR0YWNoaW5nRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnR1cm5PbigpO1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5wcml2U3RyZWFtO1xuICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkZXRhY2g6ICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50dXJuT2ZmKCk7XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaWQ6ICgpID0+IGF1ZGlvTm9kZUlkLFxuICAgICAgICAgICAgICAgIHJlYWQ6ICgpID0+IHN0cmVhbS5yZWFkKCksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGV0YWNoKGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudCh0aGlzLnByaXZJZCwgYXVkaW9Ob2RlSWQpKTtcbiAgICB9XG4gICAgdHVybk9mZigpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBnZXQgZXZlbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXZlbnRzO1xuICAgIH1cbiAgICBnZXQgZGV2aWNlSW5mbygpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBiaXRzcGVyc2FtcGxlOiB0aGlzLnByaXZGb3JtYXQuYml0c1BlclNhbXBsZSxcbiAgICAgICAgICAgIGNoYW5uZWxjb3VudDogdGhpcy5wcml2Rm9ybWF0LmNoYW5uZWxzLFxuICAgICAgICAgICAgY29ubmVjdGl2aXR5OiBjb25uZWN0aXZpdHkuVW5rbm93bixcbiAgICAgICAgICAgIG1hbnVmYWN0dXJlcjogXCJTcGVlY2ggU0RLXCIsXG4gICAgICAgICAgICBtb2RlbDogXCJQdXNoU3RyZWFtXCIsXG4gICAgICAgICAgICBzYW1wbGVyYXRlOiB0aGlzLnByaXZGb3JtYXQuc2FtcGxlc1BlclNlYyxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUuU3RyZWFtLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb25FdmVudChldmVudCkge1xuICAgICAgICB0aGlzLnByaXZFdmVudHMub25FdmVudChldmVudCk7XG4gICAgICAgIEV2ZW50cy5pbnN0YW5jZS5vbkV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgdG9CdWZmZXIoYXJyYXlCdWZmZXIpIHtcbiAgICAgICAgY29uc3QgYnVmID0gQnVmZmVyLmFsbG9jKGFycmF5QnVmZmVyLmJ5dGVMZW5ndGgpO1xuICAgICAgICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1Zi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgYnVmW2ldID0gdmlld1tpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnVmO1xuICAgIH1cbn1cbi8qXG4gKiBSZXByZXNlbnRzIGF1ZGlvIGlucHV0IHN0cmVhbSB1c2VkIGZvciBjdXN0b20gYXVkaW8gaW5wdXQgY29uZmlndXJhdGlvbnMuXG4gKiBAY2xhc3MgUHVsbEF1ZGlvSW5wdXRTdHJlYW1cbiAqL1xuZXhwb3J0IGNsYXNzIFB1bGxBdWRpb0lucHV0U3RyZWFtIGV4dGVuZHMgQXVkaW9JbnB1dFN0cmVhbSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW5kIGluc3RhbmNlLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgUHVsbEF1ZGlvSW5wdXRTdHJlYW0gdGhhdCBkZWxlZ2F0ZXMgdG8gdGhlIHNwZWNpZmllZCBjYWxsYmFjayBpbnRlcmZhY2UgZm9yXG4gICAgICogcmVhZCgpIGFuZCBjbG9zZSgpIG1ldGhvZHMsIHVzaW5nIHRoZSBkZWZhdWx0IGZvcm1hdCAoMTYga0h6IDE2Yml0IG1vbm8gUENNKS5cbiAgICAgKiBAbWVtYmVyIFB1bGxBdWRpb0lucHV0U3RyZWFtLmNyZWF0ZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1B1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2t9IGNhbGxiYWNrIC0gVGhlIGN1c3RvbSBhdWRpbyBpbnB1dCBvYmplY3QsXG4gICAgICogZGVyaXZlZCBmcm9tIFB1bGxBdWRpb0lucHV0U3RyZWFtQ3VzdG9tQ2FsbGJhY2tcbiAgICAgKiBAcGFyYW0ge0F1ZGlvU3RyZWFtRm9ybWF0fSBmb3JtYXQgLSBUaGUgYXVkaW8gZGF0YSBmb3JtYXQgaW4gd2hpY2ggYXVkaW8gd2lsbCBiZVxuICAgICAqIHJldHVybmVkIGZyb20gdGhlIGNhbGxiYWNrJ3MgcmVhZCgpIG1ldGhvZCAoUmVxdWlyZWQgaWYgZm9ybWF0IGlzIG5vdCAxNiBrSHogMTZiaXQgbW9ubyBQQ00pLlxuICAgICAqIEByZXR1cm5zIHtQdWxsQXVkaW9JbnB1dFN0cmVhbX0gVGhlIHB1c2ggYXVkaW8gaW5wdXQgc3RyZWFtIGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShjYWxsYmFjaywgZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUHVsbEF1ZGlvSW5wdXRTdHJlYW1JbXBsKGNhbGxiYWNrLCBmb3JtYXQpO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhdWRpbyBpbnB1dCBzdHJlYW0gdXNlZCBmb3IgY3VzdG9tIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb25zLlxuICogQHByaXZhdGVcbiAqIEBjbGFzcyBQdWxsQXVkaW9JbnB1dFN0cmVhbUltcGxcbiAqL1xuZXhwb3J0IGNsYXNzIFB1bGxBdWRpb0lucHV0U3RyZWFtSW1wbCBleHRlbmRzIFB1bGxBdWRpb0lucHV0U3RyZWFtIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgUHVsbEF1ZGlvSW5wdXRTdHJlYW0gdGhhdCBkZWxlZ2F0ZXMgdG8gdGhlIHNwZWNpZmllZCBjYWxsYmFjayBpbnRlcmZhY2UgZm9yXG4gICAgICogcmVhZCgpIGFuZCBjbG9zZSgpIG1ldGhvZHMsIHVzaW5nIHRoZSBkZWZhdWx0IGZvcm1hdCAoMTYga0h6IDE2Yml0IG1vbm8gUENNKS5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge1B1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2t9IGNhbGxiYWNrIC0gVGhlIGN1c3RvbSBhdWRpbyBpbnB1dCBvYmplY3QsXG4gICAgICogZGVyaXZlZCBmcm9tIFB1bGxBdWRpb0lucHV0U3RyZWFtQ3VzdG9tQ2FsbGJhY2tcbiAgICAgKiBAcGFyYW0ge0F1ZGlvU3RyZWFtRm9ybWF0fSBmb3JtYXQgLSBUaGUgYXVkaW8gZGF0YSBmb3JtYXQgaW4gd2hpY2ggYXVkaW8gd2lsbCBiZVxuICAgICAqIHJldHVybmVkIGZyb20gdGhlIGNhbGxiYWNrJ3MgcmVhZCgpIG1ldGhvZCAoUmVxdWlyZWQgaWYgZm9ybWF0IGlzIG5vdCAxNiBrSHogMTZiaXQgbW9ubyBQQ00pLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrLCBmb3JtYXQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZm9ybWF0KSB7XG4gICAgICAgICAgICB0aGlzLnByaXZGb3JtYXQgPSBBdWRpb1N0cmVhbUZvcm1hdC5nZXREZWZhdWx0SW5wdXRGb3JtYXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkZvcm1hdCA9IGZvcm1hdDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZFdmVudHMgPSBuZXcgRXZlbnRTb3VyY2UoKTtcbiAgICAgICAgdGhpcy5wcml2SWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHRoaXMucHJpdkNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIHRoaXMucHJpdklzQ2xvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkJ1ZmZlclNpemUgPSB0aGlzLnByaXZGb3JtYXQuYXZnQnl0ZXNQZXJTZWMgLyAxMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9ybWF0IGluZm9ybWF0aW9uIGZvciB0aGUgYXVkaW9cbiAgICAgKi9cbiAgICBnZXQgZm9ybWF0KCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMucHJpdkZvcm1hdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgc3RyZWFtLlxuICAgICAqIEBtZW1iZXIgUHVsbEF1ZGlvSW5wdXRTdHJlYW1JbXBsLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5wcml2SXNDbG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnByaXZDYWxsYmFjay5jbG9zZSgpO1xuICAgIH1cbiAgICBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklkO1xuICAgIH1cbiAgICBnZXQgYmxvYigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFwiTm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cbiAgICB0dXJuT24oKSB7XG4gICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9Tb3VyY2VJbml0aWFsaXppbmdFdmVudCh0aGlzLnByaXZJZCkpOyAvLyBubyBzdHJlYW0gaWRcbiAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1NvdXJjZVJlYWR5RXZlbnQodGhpcy5wcml2SWQpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhdHRhY2goYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9TdHJlYW1Ob2RlQXR0YWNoaW5nRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnR1cm5PbigpO1xuICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkZXRhY2g6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q2FsbGJhY2suY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50dXJuT2ZmKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpZDogKCkgPT4gYXVkaW9Ob2RlSWQsXG4gICAgICAgICAgICAgICAgcmVhZDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdG90YWxCeXRlcyA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0cmFuc21pdEJ1ZmY7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVudGlsIHdlIGhhdmUgdGhlIG1pbmltdW0gbnVtYmVyIG9mIGJ5dGVzIHRvIHNlbmQgaW4gYSB0cmFuc21pc3Npb24sIGtlZXAgYXNraW5nIGZvciBtb3JlLlxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAodG90YWxCeXRlcyA8IHRoaXMucHJpdkJ1ZmZlclNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpemluZyB0aGUgcmVhZCBidWZmZXIgdG8gdGhlIGRlbHRhIGJldHdlZW4gdGhlIHBlcmZlY3Qgc2l6ZSBhbmQgd2hhdCdzIGxlZnQgbWVhbnMgd2Ugd29uJ3QgZXZlciBnZXQgdG9vIG11Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRhdGEgYmFjay5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlYWRCdWZmID0gbmV3IEFycmF5QnVmZmVyKHRoaXMucHJpdkJ1ZmZlclNpemUgLSB0b3RhbEJ5dGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHB1bGxlZEJ5dGVzID0gdGhpcy5wcml2Q2FsbGJhY2sucmVhZChyZWFkQnVmZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyByZXR1cm4gYnVmZmVyIHlldCBkZWZpbmVkLCBzZXQgdGhlIHJldHVybiBidWZmZXIgdG8gdGhlIHRoYXQgd2FzIGp1c3QgcG9wdWxhdGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyB3YXMsIGlmIHdlIGhhdmUgZW5vdWdoIGRhdGEgdGhlcmUncyBubyBjb3B5IHBlbmFsdHksIGJ1dCBpZiB3ZSBkb24ndCB3ZSBoYXZlIGEgYnVmZmVyIHRoYXQncyB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZWZlcnJlZCBzaXplIGFsbG9jYXRlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IHRyYW5zbWl0QnVmZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbWl0QnVmZiA9IHJlYWRCdWZmO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IHRoZSBmaXJzdCBiaXRlIGF0IHRoZSBhcHBsZSwgc28gZmlsbCB0aGUgcmV0dXJuIGJ1ZmZlciB3aXRoIHRoZSBkYXRhIHdlIGdvdCBiYWNrLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGludFZpZXcgPSBuZXcgSW50OEFycmF5KHRyYW5zbWl0QnVmZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50Vmlldy5zZXQobmV3IEludDhBcnJheShyZWFkQnVmZiksIHRvdGFsQnl0ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIG5vIGJ5dGVzIHRvIHJlYWQsIGp1c3QgYnJlYWsgb3V0IGFuZCBiZSBkb25lLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IHB1bGxlZEJ5dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEJ5dGVzICs9IHB1bGxlZEJ5dGVzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyOiB0cmFuc21pdEJ1ZmYuc2xpY2UoMCwgdG90YWxCeXRlcyksXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0VuZDogdGhpcy5wcml2SXNDbG9zZWQgfHwgdG90YWxCeXRlcyA9PT0gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVSZWNlaXZlZDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZXRhY2goYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgIH1cbiAgICB0dXJuT2ZmKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGdldCBldmVudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFdmVudHM7XG4gICAgfVxuICAgIGdldCBkZXZpY2VJbmZvKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIGJpdHNwZXJzYW1wbGU6IHRoaXMucHJpdkZvcm1hdC5iaXRzUGVyU2FtcGxlLFxuICAgICAgICAgICAgY2hhbm5lbGNvdW50OiB0aGlzLnByaXZGb3JtYXQuY2hhbm5lbHMsXG4gICAgICAgICAgICBjb25uZWN0aXZpdHk6IGNvbm5lY3Rpdml0eS5Vbmtub3duLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyOiBcIlNwZWVjaCBTREtcIixcbiAgICAgICAgICAgIG1vZGVsOiBcIlB1bGxTdHJlYW1cIixcbiAgICAgICAgICAgIHNhbXBsZXJhdGU6IHRoaXMucHJpdkZvcm1hdC5zYW1wbGVzUGVyU2VjLFxuICAgICAgICAgICAgdHlwZTogdHlwZS5TdHJlYW0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvbkV2ZW50KGV2ZW50KSB7XG4gICAgICAgIHRoaXMucHJpdkV2ZW50cy5vbkV2ZW50KGV2ZW50KTtcbiAgICAgICAgRXZlbnRzLmluc3RhbmNlLm9uRXZlbnQoZXZlbnQpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXVkaW9JbnB1dFN0cmVhbS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0IH0gZnJvbSBcIi4uL1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFwiO1xuaW1wb3J0IHsgQXVkaW9Gb3JtYXRUYWcsIEF1ZGlvU3RyZWFtRm9ybWF0SW1wbCB9IGZyb20gXCIuL0F1ZGlvU3RyZWFtRm9ybWF0XCI7XG4vKipcbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgQXVkaW9PdXRwdXRGb3JtYXRJbXBsXG4gKiBVcGRhdGVkIGluIHZlcnNpb24gMS4xNy4wXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbCBleHRlbmRzIEF1ZGlvU3RyZWFtRm9ybWF0SW1wbCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSB3aXRoIHRoZSBnaXZlbiB2YWx1ZXMuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIGZvcm1hdFRhZ1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjaGFubmVscyAtIE51bWJlciBvZiBjaGFubmVscy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2FtcGxlc1BlclNlYyAtIFNhbXBsZXMgcGVyIHNlY29uZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYXZnQnl0ZXNQZXJTZWMgLSBBdmVyYWdlIGJ5dGVzIHBlciBzZWNvbmQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGJsb2NrQWxpZ24gLSBCbG9jayBhbGlnbm1lbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGJpdHNQZXJTYW1wbGUgLSBCaXRzIHBlciBzYW1wbGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGF1ZGlvRm9ybWF0U3RyaW5nIC0gQXVkaW8gZm9ybWF0IHN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0QXVkaW9Gb3JtYXRTdHJpbmcgLSBBdWRpbyBmb3JtYXQgc3RyaW5nIHNlbnQgdG8gc2VydmljZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGhhc0hlYWRlciAtIElmIHRoZSBmb3JtYXQgaGFzIGhlYWRlciBvciBub3QuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZm9ybWF0VGFnLCBjaGFubmVscywgc2FtcGxlc1BlclNlYywgYXZnQnl0ZXNQZXJTZWMsIGJsb2NrQWxpZ24sIGJpdHNQZXJTYW1wbGUsIGF1ZGlvRm9ybWF0U3RyaW5nLCByZXF1ZXN0QXVkaW9Gb3JtYXRTdHJpbmcsIGhhc0hlYWRlcikge1xuICAgICAgICBzdXBlcihzYW1wbGVzUGVyU2VjLCBiaXRzUGVyU2FtcGxlLCBjaGFubmVscywgZm9ybWF0VGFnKTtcbiAgICAgICAgdGhpcy5mb3JtYXRUYWcgPSBmb3JtYXRUYWc7XG4gICAgICAgIHRoaXMuYXZnQnl0ZXNQZXJTZWMgPSBhdmdCeXRlc1BlclNlYztcbiAgICAgICAgdGhpcy5ibG9ja0FsaWduID0gYmxvY2tBbGlnbjtcbiAgICAgICAgdGhpcy5wcmlBdWRpb0Zvcm1hdFN0cmluZyA9IGF1ZGlvRm9ybWF0U3RyaW5nO1xuICAgICAgICB0aGlzLnByaVJlcXVlc3RBdWRpb0Zvcm1hdFN0cmluZyA9IHJlcXVlc3RBdWRpb0Zvcm1hdFN0cmluZztcbiAgICAgICAgdGhpcy5wcmlIYXNIZWFkZXIgPSBoYXNIZWFkZXI7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0KHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdCkge1xuICAgICAgICBpZiAoc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBBdWRpb091dHB1dEZvcm1hdEltcGwuZ2V0RGVmYXVsdE91dHB1dEZvcm1hdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBdWRpb091dHB1dEZvcm1hdEltcGwuZnJvbVNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZyhBdWRpb091dHB1dEZvcm1hdEltcGwuU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0VG9TdHJpbmdbc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0XSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nKHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZykge1xuICAgICAgICBzd2l0Y2ggKHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZykge1xuICAgICAgICAgICAgY2FzZSBcInJhdy04a2h6LThiaXQtbW9uby1tdWxhd1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLk11TGF3LCAxLCA4MDAwLCA4MDAwLCAxLCA4LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcInJpZmYtMTZraHotMTZrYnBzLW1vbm8tc2lyZW5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5TaXJlbiwgMSwgMTYwMDAsIDIwMDAsIDQwLCAwLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIFwiYXVkaW8tMTZraHotMTZrYnBzLW1vbm8tc2lyZW5cIiwgdHJ1ZSk7XG4gICAgICAgICAgICBjYXNlIFwiYXVkaW8tMTZraHotMTZrYnBzLW1vbm8tc2lyZW5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5TaXJlbiwgMSwgMTYwMDAsIDIwMDAsIDQwLCAwLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcImF1ZGlvLTE2a2h6LTMya2JpdHJhdGUtbW9uby1tcDNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5NUDMsIDEsIDE2MDAwLCAzMiA8PCA3LCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJhdWRpby0xNmtoei0xMjhrYml0cmF0ZS1tb25vLW1wM1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLk1QMywgMSwgMTYwMDAsIDEyOCA8PCA3LCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJhdWRpby0xNmtoei02NGtiaXRyYXRlLW1vbm8tbXAzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuTVAzLCAxLCAxNjAwMCwgNjQgPDwgNywgMiwgMTYsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwiYXVkaW8tMjRraHotNDhrYml0cmF0ZS1tb25vLW1wM1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLk1QMywgMSwgMjQwMDAsIDQ4IDw8IDcsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcImF1ZGlvLTI0a2h6LTk2a2JpdHJhdGUtbW9uby1tcDNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5NUDMsIDEsIDI0MDAwLCA5NiA8PCA3LCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJhdWRpby0yNGtoei0xNjBrYml0cmF0ZS1tb25vLW1wM1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLk1QMywgMSwgMjQwMDAsIDE2MCA8PCA3LCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJyYXctMTZraHotMTZiaXQtbW9uby10cnVlc2lsa1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLlNJTEtTa3lwZSwgMSwgMTYwMDAsIDMyMDAwLCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJyaWZmLThraHotMTZiaXQtbW9uby1wY21cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5QQ00sIDEsIDgwMDAsIDE2MDAwLCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBcInJhdy04a2h6LTE2Yml0LW1vbm8tcGNtXCIsIHRydWUpO1xuICAgICAgICAgICAgY2FzZSBcInJpZmYtMjRraHotMTZiaXQtbW9uby1wY21cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5QQ00sIDEsIDI0MDAwLCA0ODAwMCwgMiwgMTYsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgXCJyYXctMjRraHotMTZiaXQtbW9uby1wY21cIiwgdHJ1ZSk7XG4gICAgICAgICAgICBjYXNlIFwicmlmZi04a2h6LThiaXQtbW9uby1tdWxhd1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLk11TGF3LCAxLCA4MDAwLCA4MDAwLCAxLCA4LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIFwicmF3LThraHotOGJpdC1tb25vLW11bGF3XCIsIHRydWUpO1xuICAgICAgICAgICAgY2FzZSBcInJhdy0xNmtoei0xNmJpdC1tb25vLXBjbVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLlBDTSwgMSwgMTYwMDAsIDMyMDAwLCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBcInJhdy0xNmtoei0xNmJpdC1tb25vLXBjbVwiLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwicmF3LTI0a2h6LTE2Yml0LW1vbm8tcGNtXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuUENNLCAxLCAyNDAwMCwgNDgwMDAsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIFwicmF3LTI0a2h6LTE2Yml0LW1vbm8tcGNtXCIsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJyYXctOGtoei0xNmJpdC1tb25vLXBjbVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLlBDTSwgMSwgODAwMCwgMTYwMDAsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIFwicmF3LThraHotMTZiaXQtbW9uby1wY21cIiwgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcIm9nZy0xNmtoei0xNmJpdC1tb25vLW9wdXNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5PR0dfT1BVUywgMSwgMTYwMDAsIDgxOTIsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcIm9nZy0yNGtoei0xNmJpdC1tb25vLW9wdXNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5PR0dfT1BVUywgMSwgMjQwMDAsIDgxOTIsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcInJhdy00OGtoei0xNmJpdC1tb25vLXBjbVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLlBDTSwgMSwgNDgwMDAsIDk2MDAwLCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBcInJhdy00OGtoei0xNmJpdC1tb25vLXBjbVwiLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwicmlmZi00OGtoei0xNmJpdC1tb25vLXBjbVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLlBDTSwgMSwgNDgwMDAsIDk2MDAwLCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBcInJhdy00OGtoei0xNmJpdC1tb25vLXBjbVwiLCB0cnVlKTtcbiAgICAgICAgICAgIGNhc2UgXCJhdWRpby00OGtoei05NmtiaXRyYXRlLW1vbm8tbXAzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuTVAzLCAxLCA0ODAwMCwgOTYgPDwgNywgMiwgMTYsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwiYXVkaW8tNDhraHotMTkya2JpdHJhdGUtbW9uby1tcDNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5NUDMsIDEsIDQ4MDAwLCAxOTIgPDwgNywgMiwgMTYsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwib2dnLTQ4a2h6LTE2Yml0LW1vbm8tb3B1c1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLk9HR19PUFVTLCAxLCA0ODAwMCwgMTIwMDAsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcIndlYm0tMTZraHotMTZiaXQtbW9uby1vcHVzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuV0VCTV9PUFVTLCAxLCAxNjAwMCwgNDAwMCwgMiwgMTYsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwid2VibS0yNGtoei0xNmJpdC1tb25vLW9wdXNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5XRUJNX09QVVMsIDEsIDI0MDAwLCA2MDAwLCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJ3ZWJtLTI0a2h6LTE2Yml0LTI0a2Jwcy1tb25vLW9wdXNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5XRUJNX09QVVMsIDEsIDI0MDAwLCAzMDAwLCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJhdWRpby0xNmtoei0xNmJpdC0zMmticHMtbW9uby1vcHVzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuT1BVUywgMSwgMTYwMDAsIDQwMDAsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcImF1ZGlvLTI0a2h6LTE2Yml0LTQ4a2Jwcy1tb25vLW9wdXNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5PUFVTLCAxLCAyNDAwMCwgNjAwMCwgMiwgMTYsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwiYXVkaW8tMjRraHotMTZiaXQtMjRrYnBzLW1vbm8tb3B1c1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLk9QVVMsIDEsIDI0MDAwLCAzMDAwLCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJhdWRpby0yNGtoei0xNmJpdC1tb25vLWZsYWNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5GTEFDLCAxLCAyNDAwMCwgMjQwMDAsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcImF1ZGlvLTQ4a2h6LTE2Yml0LW1vbm8tZmxhY1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLkZMQUMsIDEsIDQ4MDAwLCAzMDAwMCwgMiwgMTYsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwicmF3LTI0a2h6LTE2Yml0LW1vbm8tdHJ1ZXNpbGtcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5TSUxLU2t5cGUsIDEsIDI0MDAwLCA0ODAwMCwgMiwgMTYsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwicmF3LThraHotOGJpdC1tb25vLWFsYXdcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5BTGF3LCAxLCA4MDAwLCA4MDAwLCAxLCA4LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcInJpZmYtOGtoei04Yml0LW1vbm8tYWxhd1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLkFMYXcsIDEsIDgwMDAsIDgwMDAsIDEsIDgsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgXCJyYXctOGtoei04Yml0LW1vbm8tYWxhd1wiLCB0cnVlKTtcbiAgICAgICAgICAgIGNhc2UgXCJyYXctMjIwNTBoei0xNmJpdC1tb25vLXBjbVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLlBDTSwgMSwgMjIwNTAsIDQ0MTAwLCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJyaWZmLTIyMDUwaHotMTZiaXQtbW9uby1wY21cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5QQ00sIDEsIDIyMDUwLCA0NDEwMCwgMiwgMTYsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgXCJyYXctMjIwNTBoei0xNmJpdC1tb25vLXBjbVwiLCB0cnVlKTtcbiAgICAgICAgICAgIGNhc2UgXCJyYXctNDQxMDBoei0xNmJpdC1tb25vLXBjbVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLlBDTSwgMSwgNDQxMDAsIDg4MjAwLCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJyaWZmLTQ0MTAwaHotMTZiaXQtbW9uby1wY21cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5QQ00sIDEsIDQ0MTAwLCA4ODIwMCwgMiwgMTYsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgXCJyYXctNDQxMDBoei0xNmJpdC1tb25vLXBjbVwiLCB0cnVlKTtcbiAgICAgICAgICAgIGNhc2UgXCJyaWZmLTE2a2h6LTE2Yml0LW1vbm8tcGNtXCI6XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLlBDTSwgMSwgMTYwMDAsIDMyMDAwLCAyLCAxNiwgXCJyaWZmLTE2a2h6LTE2Yml0LW1vbm8tcGNtXCIsIFwicmF3LTE2a2h6LTE2Yml0LW1vbm8tcGNtXCIsIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBnZXREZWZhdWx0T3V0cHV0Rm9ybWF0KCkge1xuICAgICAgICByZXR1cm4gQXVkaW9PdXRwdXRGb3JtYXRJbXBsLmZyb21TcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcoKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpID8gXCJhdWRpby0yNGtoei00OGtiaXRyYXRlLW1vbm8tbXAzXCIgOiBcInJpZmYtMTZraHotMTZiaXQtbW9uby1wY21cIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyBpZiB0aGlzIGF1ZGlvIG91dHB1dCBmb3JtYXQgaGFzIGEgaGVhZGVyXG4gICAgICogQGJvb2xlYW4gQXVkaW9PdXRwdXRGb3JtYXRJbXBsLnByb3RvdHlwZS5oYXNIZWFkZXJcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0IGhhc0hlYWRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpSGFzSGVhZGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIGhlYWRlciBvZiB0aGlzIGZvcm1hdFxuICAgICAqIEBBcnJheUJ1ZmZlciBBdWRpb091dHB1dEZvcm1hdEltcGwucHJvdG90eXBlLmhlYWRlclxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXQgaGVhZGVyKCkge1xuICAgICAgICBpZiAodGhpcy5oYXNIZWFkZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZIZWFkZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgaGVhZGVyIGJhc2VkIG9uIHRoZSBhdWRpbyBsZW5ndGhcbiAgICAgKiBAbWVtYmVyIEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbC51cGRhdGVIZWFkZXJcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGF1ZGlvTGVuZ3RoIC0gdGhlIGF1ZGlvIGxlbmd0aFxuICAgICAqL1xuICAgIHVwZGF0ZUhlYWRlcihhdWRpb0xlbmd0aCkge1xuICAgICAgICBpZiAodGhpcy5wcmlIYXNIZWFkZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSBuZXcgRGF0YVZpZXcodGhpcy5wcml2SGVhZGVyKTtcbiAgICAgICAgICAgIHZpZXcuc2V0VWludDMyKDQsIGF1ZGlvTGVuZ3RoICsgdGhpcy5wcml2SGVhZGVyLmJ5dGVMZW5ndGggLSA4LCB0cnVlKTtcbiAgICAgICAgICAgIHZpZXcuc2V0VWludDMyKDQwLCBhdWRpb0xlbmd0aCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSBhdWRpbyBmb3JtYXQgc3RyaW5nIHRvIGJlIHNlbnQgdG8gdGhlIHNlcnZpY2VcbiAgICAgKiBAc3RyaW5nIEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbC5wcm90b3R5cGUucmVxdWVzdEF1ZGlvRm9ybWF0U3RyaW5nXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldCByZXF1ZXN0QXVkaW9Gb3JtYXRTdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaVJlcXVlc3RBdWRpb0Zvcm1hdFN0cmluZztcbiAgICB9XG59XG5BdWRpb091dHB1dEZvcm1hdEltcGwuU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0VG9TdHJpbmcgPSB7XG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SYXc4S2h6OEJpdE1vbm9NVUxhd106IFwicmF3LThraHotOGJpdC1tb25vLW11bGF3XCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SaWZmMTZLaHoxNkticHNNb25vU2lyZW5dOiBcInJpZmYtMTZraHotMTZrYnBzLW1vbm8tc2lyZW5cIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvMTZLaHoxNkticHNNb25vU2lyZW5dOiBcImF1ZGlvLTE2a2h6LTE2a2Jwcy1tb25vLXNpcmVuXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5BdWRpbzE2S2h6MzJLQml0UmF0ZU1vbm9NcDNdOiBcImF1ZGlvLTE2a2h6LTMya2JpdHJhdGUtbW9uby1tcDNcIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvMTZLaHoxMjhLQml0UmF0ZU1vbm9NcDNdOiBcImF1ZGlvLTE2a2h6LTEyOGtiaXRyYXRlLW1vbm8tbXAzXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5BdWRpbzE2S2h6NjRLQml0UmF0ZU1vbm9NcDNdOiBcImF1ZGlvLTE2a2h6LTY0a2JpdHJhdGUtbW9uby1tcDNcIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvMjRLaHo0OEtCaXRSYXRlTW9ub01wM106IFwiYXVkaW8tMjRraHotNDhrYml0cmF0ZS1tb25vLW1wM1wiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuQXVkaW8yNEtoejk2S0JpdFJhdGVNb25vTXAzXTogXCJhdWRpby0yNGtoei05NmtiaXRyYXRlLW1vbm8tbXAzXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5BdWRpbzI0S2h6MTYwS0JpdFJhdGVNb25vTXAzXTogXCJhdWRpby0yNGtoei0xNjBrYml0cmF0ZS1tb25vLW1wM1wiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmF3MTZLaHoxNkJpdE1vbm9UcnVlU2lsa106IFwicmF3LTE2a2h6LTE2Yml0LW1vbm8tdHJ1ZXNpbGtcIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJpZmYxNktoejE2Qml0TW9ub1BjbV06IFwicmlmZi0xNmtoei0xNmJpdC1tb25vLXBjbVwiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmlmZjhLaHoxNkJpdE1vbm9QY21dOiBcInJpZmYtOGtoei0xNmJpdC1tb25vLXBjbVwiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmlmZjI0S2h6MTZCaXRNb25vUGNtXTogXCJyaWZmLTI0a2h6LTE2Yml0LW1vbm8tcGNtXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SaWZmOEtoejhCaXRNb25vTVVMYXddOiBcInJpZmYtOGtoei04Yml0LW1vbm8tbXVsYXdcIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJhdzE2S2h6MTZCaXRNb25vUGNtXTogXCJyYXctMTZraHotMTZiaXQtbW9uby1wY21cIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJhdzI0S2h6MTZCaXRNb25vUGNtXTogXCJyYXctMjRraHotMTZiaXQtbW9uby1wY21cIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJhdzhLaHoxNkJpdE1vbm9QY21dOiBcInJhdy04a2h6LTE2Yml0LW1vbm8tcGNtXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5PZ2cxNktoejE2Qml0TW9ub09wdXNdOiBcIm9nZy0xNmtoei0xNmJpdC1tb25vLW9wdXNcIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0Lk9nZzI0S2h6MTZCaXRNb25vT3B1c106IFwib2dnLTI0a2h6LTE2Yml0LW1vbm8tb3B1c1wiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmF3NDhLaHoxNkJpdE1vbm9QY21dOiBcInJhdy00OGtoei0xNmJpdC1tb25vLXBjbVwiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmlmZjQ4S2h6MTZCaXRNb25vUGNtXTogXCJyaWZmLTQ4a2h6LTE2Yml0LW1vbm8tcGNtXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5BdWRpbzQ4S2h6OTZLQml0UmF0ZU1vbm9NcDNdOiBcImF1ZGlvLTQ4a2h6LTk2a2JpdHJhdGUtbW9uby1tcDNcIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvNDhLaHoxOTJLQml0UmF0ZU1vbm9NcDNdOiBcImF1ZGlvLTQ4a2h6LTE5MmtiaXRyYXRlLW1vbm8tbXAzXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5PZ2c0OEtoejE2Qml0TW9ub09wdXNdOiBcIm9nZy00OGtoei0xNmJpdC1tb25vLW9wdXNcIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LldlYm0xNktoejE2Qml0TW9ub09wdXNdOiBcIndlYm0tMTZraHotMTZiaXQtbW9uby1vcHVzXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5XZWJtMjRLaHoxNkJpdE1vbm9PcHVzXTogXCJ3ZWJtLTI0a2h6LTE2Yml0LW1vbm8tb3B1c1wiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuV2VibTI0S2h6MTZCaXQyNEticHNNb25vT3B1c106IFwid2VibS0yNGtoei0xNmJpdC0yNGticHMtbW9uby1vcHVzXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SYXcyNEtoejE2Qml0TW9ub1RydWVTaWxrXTogXCJyYXctMjRraHotMTZiaXQtbW9uby10cnVlc2lsa1wiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmF3OEtoejhCaXRNb25vQUxhd106IFwicmF3LThraHotOGJpdC1tb25vLWFsYXdcIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJpZmY4S2h6OEJpdE1vbm9BTGF3XTogXCJyaWZmLThraHotOGJpdC1tb25vLWFsYXdcIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvMTZLaHoxNkJpdDMyS2Jwc01vbm9PcHVzXTogXCJhdWRpby0xNmtoei0xNmJpdC0zMmticHMtbW9uby1vcHVzXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5BdWRpbzI0S2h6MTZCaXQ0OEticHNNb25vT3B1c106IFwiYXVkaW8tMjRraHotMTZiaXQtNDhrYnBzLW1vbm8tb3B1c1wiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuQXVkaW8yNEtoejE2Qml0MjRLYnBzTW9ub09wdXNdOiBcImF1ZGlvLTI0a2h6LTE2Yml0LTI0a2Jwcy1tb25vLW9wdXNcIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJhdzIyMDUwSHoxNkJpdE1vbm9QY21dOiBcInJhdy0yMjA1MGh6LTE2Yml0LW1vbm8tcGNtXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SaWZmMjIwNTBIejE2Qml0TW9ub1BjbV06IFwicmlmZi0yMjA1MGh6LTE2Yml0LW1vbm8tcGNtXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SYXc0NDEwMEh6MTZCaXRNb25vUGNtXTogXCJyYXctNDQxMDBoei0xNmJpdC1tb25vLXBjbVwiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmlmZjQ0MTAwSHoxNkJpdE1vbm9QY21dOiBcInJpZmYtNDQxMDBoei0xNmJpdC1tb25vLXBjbVwiLFxufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXVkaW9PdXRwdXRGb3JtYXQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cbmltcG9ydCB7IGNyZWF0ZU5vRGFzaEd1aWQsIFN0cmVhbSwgfSBmcm9tIFwiLi4vLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbCB9IGZyb20gXCIuL0F1ZGlvT3V0cHV0Rm9ybWF0XCI7XG4vKipcbiAqIFJlcHJlc2VudHMgYXVkaW8gb3V0cHV0IHN0cmVhbSB1c2VkIGZvciBjdXN0b20gYXVkaW8gb3V0cHV0IGNvbmZpZ3VyYXRpb25zLlxuICogQGNsYXNzIEF1ZGlvT3V0cHV0U3RyZWFtXG4gKi9cbmV4cG9ydCBjbGFzcyBBdWRpb091dHB1dFN0cmVhbSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2UuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG1lbW9yeSBiYWNrZWQgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtIHdpdGggdGhlIHNwZWNpZmllZCBhdWRpbyBmb3JtYXQuXG4gICAgICogQG1lbWJlciBBdWRpb091dHB1dFN0cmVhbS5jcmVhdGVQdWxsU3RyZWFtXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQdWxsQXVkaW9PdXRwdXRTdHJlYW19IFRoZSBhdWRpbyBvdXRwdXQgc3RyZWFtIGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZVB1bGxTdHJlYW0oKSB7XG4gICAgICAgIHJldHVybiBQdWxsQXVkaW9PdXRwdXRTdHJlYW0uY3JlYXRlKCk7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIG1lbW9yeSBiYWNrZWQgcHVzaCBhdWRpbyBvdXRwdXQgc3RyZWFtIHVzZWQgZm9yIGN1c3RvbSBhdWRpbyBvdXRwdXQgY29uZmlndXJhdGlvbnMuXG4gKiBAY2xhc3MgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtXG4gKi9cbmV4cG9ydCBjbGFzcyBQdWxsQXVkaW9PdXRwdXRTdHJlYW0gZXh0ZW5kcyBBdWRpb091dHB1dFN0cmVhbSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG1lbW9yeSBiYWNrZWQgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtIHdpdGggdGhlIHNwZWNpZmllZCBhdWRpbyBmb3JtYXQuXG4gICAgICogQG1lbWJlciBQdWxsQXVkaW9PdXRwdXRTdHJlYW0uY3JlYXRlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQdWxsQXVkaW9PdXRwdXRTdHJlYW19IFRoZSBwdXNoIGF1ZGlvIG91dHB1dCBzdHJlYW0gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFB1bGxBdWRpb091dHB1dFN0cmVhbUltcGwoKTtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgbWVtb3J5IGJhY2tlZCBwdXNoIGF1ZGlvIG91dHB1dCBzdHJlYW0gdXNlZCBmb3IgY3VzdG9tIGF1ZGlvIG91dHB1dCBjb25maWd1cmF0aW9ucy5cbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtSW1wbFxuICovXG5leHBvcnQgY2xhc3MgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtSW1wbCBleHRlbmRzIFB1bGxBdWRpb091dHB1dFN0cmVhbSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnByaXZJZCA9IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtID0gbmV3IFN0cmVhbSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24gdG8gdGhlIHN0cmVhbS4gRm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAgICAqIEBwYXJhbSB7QXVkaW9TdHJlYW1Gb3JtYXR9IGZvcm1hdCAtIHRoZSBmb3JtYXQgdG8gYmUgc2V0LlxuICAgICAqL1xuICAgIHNldCBmb3JtYXQoZm9ybWF0KSB7XG4gICAgICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCB8fCBmb3JtYXQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkZvcm1hdCA9IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbC5nZXREZWZhdWx0T3V0cHV0Rm9ybWF0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2Rm9ybWF0ID0gZm9ybWF0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3JtYXQgaW5mb3JtYXRpb24gZm9yIHRoZSBhdWRpb1xuICAgICAqL1xuICAgIGdldCBmb3JtYXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZGb3JtYXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgc3RyZWFtIGlzIGNsb3NlZFxuICAgICAqIEBtZW1iZXIgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtSW1wbC5wcm90b3R5cGUuaXNDbG9zZWRcbiAgICAgKiBAcHJvcGVydHlcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0IGlzQ2xvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3RyZWFtLmlzQ2xvc2VkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBpZCBvZiB0aGUgc3RyZWFtXG4gICAgICogQG1lbWJlciBQdWxsQXVkaW9PdXRwdXRTdHJlYW1JbXBsLnByb3RvdHlwZS5pZFxuICAgICAqIEBwcm9wZXJ0eVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBhdWRpbyBkYXRhIGZyb20gdGhlIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKiBAbWVtYmVyIFB1bGxBdWRpb091dHB1dFN0cmVhbUltcGwucHJvdG90eXBlLnJlYWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gZGF0YUJ1ZmZlciAtIEFuIEFycmF5QnVmZmVyIHRvIHN0b3JlIHRoZSByZWFkIGRhdGEuXG4gICAgICogQHJldHVybnMge1Byb21pc2U8bnVtYmVyPn0gLSBBdWRpbyBidWZmZXIgbGVuZ3RoIGhhcyBiZWVuIHJlYWQuXG4gICAgICovXG4gICAgcmVhZChkYXRhQnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBpbnRWaWV3ID0gbmV3IEludDhBcnJheShkYXRhQnVmZmVyKTtcbiAgICAgICAgICAgIGxldCB0b3RhbEJ5dGVzID0gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZMYXN0Q2h1bmtWaWV3ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2TGFzdENodW5rVmlldy5sZW5ndGggPiBkYXRhQnVmZmVyLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaW50Vmlldy5zZXQodGhpcy5wcml2TGFzdENodW5rVmlldy5zbGljZSgwLCBkYXRhQnVmZmVyLmJ5dGVMZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TGFzdENodW5rVmlldyA9IHRoaXMucHJpdkxhc3RDaHVua1ZpZXcuc2xpY2UoZGF0YUJ1ZmZlci5ieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkYXRhQnVmZmVyLmJ5dGVMZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbnRWaWV3LnNldCh0aGlzLnByaXZMYXN0Q2h1bmtWaWV3KTtcbiAgICAgICAgICAgICAgICB0b3RhbEJ5dGVzID0gdGhpcy5wcml2TGFzdENodW5rVmlldy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TGFzdENodW5rVmlldyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFVudGlsIHdlIGhhdmUgdGhlIG1pbmltdW0gbnVtYmVyIG9mIGJ5dGVzIHRvIHNlbmQgaW4gYSB0cmFuc21pc3Npb24sIGtlZXAgYXNraW5nIGZvciBtb3JlLlxuICAgICAgICAgICAgd2hpbGUgKHRvdGFsQnl0ZXMgPCBkYXRhQnVmZmVyLmJ5dGVMZW5ndGggJiYgIXRoaXMucHJpdlN0cmVhbS5pc1JlYWRFbmRlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rID0geWllbGQgdGhpcy5wcml2U3RyZWFtLnJlYWQoKTtcbiAgICAgICAgICAgICAgICBpZiAoY2h1bmsgIT09IHVuZGVmaW5lZCAmJiAhY2h1bmsuaXNFbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRtcEJ1ZmZlcjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rLmJ1ZmZlci5ieXRlTGVuZ3RoID4gZGF0YUJ1ZmZlci5ieXRlTGVuZ3RoIC0gdG90YWxCeXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG1wQnVmZmVyID0gY2h1bmsuYnVmZmVyLnNsaWNlKDAsIGRhdGFCdWZmZXIuYnl0ZUxlbmd0aCAtIHRvdGFsQnl0ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TGFzdENodW5rVmlldyA9IG5ldyBJbnQ4QXJyYXkoY2h1bmsuYnVmZmVyLnNsaWNlKGRhdGFCdWZmZXIuYnl0ZUxlbmd0aCAtIHRvdGFsQnl0ZXMpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcEJ1ZmZlciA9IGNodW5rLmJ1ZmZlcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbnRWaWV3LnNldChuZXcgSW50OEFycmF5KHRtcEJ1ZmZlciksIHRvdGFsQnl0ZXMpO1xuICAgICAgICAgICAgICAgICAgICB0b3RhbEJ5dGVzICs9IHRtcEJ1ZmZlci5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3RyZWFtLnJlYWRFbmRlZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0b3RhbEJ5dGVzO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIHRoZSBhdWRpbyBkYXRhIHNwZWNpZmllZCBieSBtYWtpbmcgYW4gaW50ZXJuYWwgY29weSBvZiB0aGUgZGF0YS5cbiAgICAgKiBAbWVtYmVyIFB1bGxBdWRpb091dHB1dFN0cmVhbUltcGwucHJvdG90eXBlLndyaXRlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGRhdGFCdWZmZXIgLSBUaGUgYXVkaW8gYnVmZmVyIG9mIHdoaWNoIHRoaXMgZnVuY3Rpb24gd2lsbCBtYWtlIGEgY29weS5cbiAgICAgKi9cbiAgICB3cml0ZShkYXRhQnVmZmVyKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpdlN0cmVhbSwgXCJtdXN0IHNldCBmb3JtYXQgYmVmb3JlIHdyaXRpbmdcIik7XG4gICAgICAgIHRoaXMucHJpdlN0cmVhbS53cml0ZVN0cmVhbUNodW5rKHtcbiAgICAgICAgICAgIGJ1ZmZlcjogZGF0YUJ1ZmZlcixcbiAgICAgICAgICAgIGlzRW5kOiBmYWxzZSxcbiAgICAgICAgICAgIHRpbWVSZWNlaXZlZDogRGF0ZS5ub3coKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBzdHJlYW0uXG4gICAgICogQG1lbWJlciBQdWxsQXVkaW9PdXRwdXRTdHJlYW1JbXBsLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtLmNsb3NlKCk7XG4gICAgfVxufVxuLypcbiAqIFJlcHJlc2VudHMgYXVkaW8gb3V0cHV0IHN0cmVhbSB1c2VkIGZvciBjdXN0b20gYXVkaW8gb3V0cHV0IGNvbmZpZ3VyYXRpb25zLlxuICogQGNsYXNzIFB1c2hBdWRpb091dHB1dFN0cmVhbVxuICovXG5leHBvcnQgY2xhc3MgUHVzaEF1ZGlvT3V0cHV0U3RyZWFtIGV4dGVuZHMgQXVkaW9PdXRwdXRTdHJlYW0ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuZCBpbnN0YW5jZS5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFB1c2hBdWRpb091dHB1dFN0cmVhbSB0aGF0IGRlbGVnYXRlcyB0byB0aGUgc3BlY2lmaWVkIGNhbGxiYWNrIGludGVyZmFjZSBmb3JcbiAgICAgKiB3cml0ZSgpIGFuZCBjbG9zZSgpIG1ldGhvZHMuXG4gICAgICogQG1lbWJlciBQdXNoQXVkaW9PdXRwdXRTdHJlYW0uY3JlYXRlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7UHVzaEF1ZGlvT3V0cHV0U3RyZWFtQ2FsbGJhY2t9IGNhbGxiYWNrIC0gVGhlIGN1c3RvbSBhdWRpbyBvdXRwdXQgb2JqZWN0LFxuICAgICAqIGRlcml2ZWQgZnJvbSBQdXNoQXVkaW9PdXRwdXRTdHJlYW1DYWxsYmFja1xuICAgICAqIEByZXR1cm5zIHtQdXNoQXVkaW9PdXRwdXRTdHJlYW19IFRoZSBwdXNoIGF1ZGlvIG91dHB1dCBzdHJlYW0gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHVzaEF1ZGlvT3V0cHV0U3RyZWFtSW1wbChjYWxsYmFjayk7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGF1ZGlvIG91dHB1dCBzdHJlYW0gdXNlZCBmb3IgY3VzdG9tIGF1ZGlvIG91dHB1dCBjb25maWd1cmF0aW9ucy5cbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgUHVzaEF1ZGlvT3V0cHV0U3RyZWFtSW1wbFxuICovXG5leHBvcnQgY2xhc3MgUHVzaEF1ZGlvT3V0cHV0U3RyZWFtSW1wbCBleHRlbmRzIFB1c2hBdWRpb091dHB1dFN0cmVhbSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFB1c2hBdWRpb091dHB1dFN0cmVhbSB0aGF0IGRlbGVnYXRlcyB0byB0aGUgc3BlY2lmaWVkIGNhbGxiYWNrIGludGVyZmFjZSBmb3JcbiAgICAgKiByZWFkKCkgYW5kIGNsb3NlKCkgbWV0aG9kcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge1B1c2hBdWRpb091dHB1dFN0cmVhbUNhbGxiYWNrfSBjYWxsYmFjayAtIFRoZSBjdXN0b20gYXVkaW8gb3V0cHV0IG9iamVjdCxcbiAgICAgKiBkZXJpdmVkIGZyb20gUHVzaEF1ZGlvT3V0cHV0U3RyZWFtQ2FsbGJhY2tcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihjYWxsYmFjaykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnByaXZJZCA9IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2Q2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgIHNldCBmb3JtYXQoZm9ybWF0KSB7IH1cbiAgICB3cml0ZShidWZmZXIpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2Q2FsbGJhY2sud3JpdGUpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkNhbGxiYWNrLndyaXRlKGJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICghIXRoaXMucHJpdkNhbGxiYWNrLmNsb3NlKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZDYWxsYmFjay5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SWQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdWRpb091dHB1dFN0cmVhbS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgdmFyIEF1ZGlvRm9ybWF0VGFnO1xuKGZ1bmN0aW9uIChBdWRpb0Zvcm1hdFRhZykge1xuICAgIEF1ZGlvRm9ybWF0VGFnW0F1ZGlvRm9ybWF0VGFnW1wiUENNXCJdID0gMV0gPSBcIlBDTVwiO1xuICAgIEF1ZGlvRm9ybWF0VGFnW0F1ZGlvRm9ybWF0VGFnW1wiTXVMYXdcIl0gPSAyXSA9IFwiTXVMYXdcIjtcbiAgICBBdWRpb0Zvcm1hdFRhZ1tBdWRpb0Zvcm1hdFRhZ1tcIlNpcmVuXCJdID0gM10gPSBcIlNpcmVuXCI7XG4gICAgQXVkaW9Gb3JtYXRUYWdbQXVkaW9Gb3JtYXRUYWdbXCJNUDNcIl0gPSA0XSA9IFwiTVAzXCI7XG4gICAgQXVkaW9Gb3JtYXRUYWdbQXVkaW9Gb3JtYXRUYWdbXCJTSUxLU2t5cGVcIl0gPSA1XSA9IFwiU0lMS1NreXBlXCI7XG4gICAgQXVkaW9Gb3JtYXRUYWdbQXVkaW9Gb3JtYXRUYWdbXCJPR0dfT1BVU1wiXSA9IDZdID0gXCJPR0dfT1BVU1wiO1xuICAgIEF1ZGlvRm9ybWF0VGFnW0F1ZGlvRm9ybWF0VGFnW1wiV0VCTV9PUFVTXCJdID0gN10gPSBcIldFQk1fT1BVU1wiO1xuICAgIEF1ZGlvRm9ybWF0VGFnW0F1ZGlvRm9ybWF0VGFnW1wiQUxhd1wiXSA9IDhdID0gXCJBTGF3XCI7XG4gICAgQXVkaW9Gb3JtYXRUYWdbQXVkaW9Gb3JtYXRUYWdbXCJGTEFDXCJdID0gOV0gPSBcIkZMQUNcIjtcbiAgICBBdWRpb0Zvcm1hdFRhZ1tBdWRpb0Zvcm1hdFRhZ1tcIk9QVVNcIl0gPSAxMF0gPSBcIk9QVVNcIjtcbn0pKEF1ZGlvRm9ybWF0VGFnIHx8IChBdWRpb0Zvcm1hdFRhZyA9IHt9KSk7XG4vKipcbiAqIFJlcHJlc2VudHMgYXVkaW8gc3RyZWFtIGZvcm1hdCB1c2VkIGZvciBjdXN0b20gYXVkaW8gaW5wdXQgY29uZmlndXJhdGlvbnMuXG4gKiBAY2xhc3MgQXVkaW9TdHJlYW1Gb3JtYXRcbiAqL1xuZXhwb3J0IGNsYXNzIEF1ZGlvU3RyZWFtRm9ybWF0IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGF1ZGlvIHN0cmVhbSBmb3JtYXQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgZGVmYXVsdCBhdWRpbyBzdHJlYW1cbiAgICAgKiBmb3JtYXQgKDE2S0h6IDE2Yml0IG1vbm8gUENNKS5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvU3RyZWFtRm9ybWF0LmdldERlZmF1bHRJbnB1dEZvcm1hdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7QXVkaW9TdHJlYW1Gb3JtYXR9IFRoZSBhdWRpbyBzdHJlYW0gZm9ybWF0IGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGdldERlZmF1bHRJbnB1dEZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIEF1ZGlvU3RyZWFtRm9ybWF0SW1wbC5nZXREZWZhdWx0SW5wdXRGb3JtYXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhdWRpbyBzdHJlYW0gZm9ybWF0IG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQgZm9ybWF0IGNoYXJhY3RlcmlzdGljcy5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvU3RyZWFtRm9ybWF0LmdldFdhdmVGb3JtYXRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNhbXBsZXNQZXJTZWNvbmQgLSBTYW1wbGUgcmF0ZSwgaW4gc2FtcGxlcyBwZXIgc2Vjb25kIChIZXJ0eikuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGJpdHNQZXJTYW1wbGUgLSBCaXRzIHBlciBzYW1wbGUsIHR5cGljYWxseSAxNi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY2hhbm5lbHMgLSBOdW1iZXIgb2YgY2hhbm5lbHMgaW4gdGhlIHdhdmVmb3JtLWF1ZGlvIGRhdGEuIE1vbmF1cmFsIGRhdGFcbiAgICAgKiB1c2VzIG9uZSBjaGFubmVsIGFuZCBzdGVyZW8gZGF0YSB1c2VzIHR3byBjaGFubmVscy5cbiAgICAgKiBAcGFyYW0ge0F1ZGlvRm9ybWF0VGFnfSBmb3JtYXQgLSBBdWRpbyBmb3JtYXQgKFBDTSwgYWxhdyBvciBtdWxhdykuXG4gICAgICogQHJldHVybnMge0F1ZGlvU3RyZWFtRm9ybWF0fSBUaGUgYXVkaW8gc3RyZWFtIGZvcm1hdCBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRXYXZlRm9ybWF0KHNhbXBsZXNQZXJTZWNvbmQsIGJpdHNQZXJTYW1wbGUsIGNoYW5uZWxzLCBmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdWRpb1N0cmVhbUZvcm1hdEltcGwoc2FtcGxlc1BlclNlY29uZCwgYml0c1BlclNhbXBsZSwgY2hhbm5lbHMsIGZvcm1hdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXVkaW8gc3RyZWFtIGZvcm1hdCBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIHBjbSB3YXZlZm9ybWF0IGNoYXJhY3RlcmlzdGljcy5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvU3RyZWFtRm9ybWF0LmdldFdhdmVGb3JtYXRQQ01cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNhbXBsZXNQZXJTZWNvbmQgLSBTYW1wbGUgcmF0ZSwgaW4gc2FtcGxlcyBwZXIgc2Vjb25kIChIZXJ0eikuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGJpdHNQZXJTYW1wbGUgLSBCaXRzIHBlciBzYW1wbGUsIHR5cGljYWxseSAxNi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY2hhbm5lbHMgLSBOdW1iZXIgb2YgY2hhbm5lbHMgaW4gdGhlIHdhdmVmb3JtLWF1ZGlvIGRhdGEuIE1vbmF1cmFsIGRhdGFcbiAgICAgKiB1c2VzIG9uZSBjaGFubmVsIGFuZCBzdGVyZW8gZGF0YSB1c2VzIHR3byBjaGFubmVscy5cbiAgICAgKiBAcmV0dXJucyB7QXVkaW9TdHJlYW1Gb3JtYXR9IFRoZSBhdWRpbyBzdHJlYW0gZm9ybWF0IGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGdldFdhdmVGb3JtYXRQQ00oc2FtcGxlc1BlclNlY29uZCwgYml0c1BlclNhbXBsZSwgY2hhbm5lbHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdWRpb1N0cmVhbUZvcm1hdEltcGwoc2FtcGxlc1BlclNlY29uZCwgYml0c1BlclNhbXBsZSwgY2hhbm5lbHMpO1xuICAgIH1cbn1cbi8qKlxuICogQHByaXZhdGVcbiAqIEBjbGFzcyBBdWRpb1N0cmVhbUZvcm1hdEltcGxcbiAqL1xuZXhwb3J0IGNsYXNzIEF1ZGlvU3RyZWFtRm9ybWF0SW1wbCBleHRlbmRzIEF1ZGlvU3RyZWFtRm9ybWF0IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIHdpdGggdGhlIGdpdmVuIHZhbHVlcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2FtcGxlc1BlclNlYyAtIFNhbXBsZXMgcGVyIHNlY29uZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYml0c1BlclNhbXBsZSAtIEJpdHMgcGVyIHNhbXBsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY2hhbm5lbHMgLSBOdW1iZXIgb2YgY2hhbm5lbHMuXG4gICAgICogQHBhcmFtIHtBdWRpb0Zvcm1hdFRhZ30gZm9ybWF0IC0gQXVkaW8gZm9ybWF0IChQQ00sIGFsYXcgb3IgbXVsYXcpLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNhbXBsZXNQZXJTZWMgPSAxNjAwMCwgYml0c1BlclNhbXBsZSA9IDE2LCBjaGFubmVscyA9IDEsIGZvcm1hdCA9IEF1ZGlvRm9ybWF0VGFnLlBDTSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBsZXQgaXNXYXZGb3JtYXQgPSB0cnVlO1xuICAgICAgICAvKiAxIGZvciBQQ007IDYgZm9yIGFsYXc7IDcgZm9yIG11bGF3ICovXG4gICAgICAgIHN3aXRjaCAoZm9ybWF0KSB7XG4gICAgICAgICAgICBjYXNlIEF1ZGlvRm9ybWF0VGFnLlBDTTpcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdFRhZyA9IDE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEF1ZGlvRm9ybWF0VGFnLkFMYXc6XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtYXRUYWcgPSA2O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBBdWRpb0Zvcm1hdFRhZy5NdUxhdzpcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdFRhZyA9IDc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlzV2F2Rm9ybWF0ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iaXRzUGVyU2FtcGxlID0gYml0c1BlclNhbXBsZTtcbiAgICAgICAgdGhpcy5zYW1wbGVzUGVyU2VjID0gc2FtcGxlc1BlclNlYztcbiAgICAgICAgdGhpcy5jaGFubmVscyA9IGNoYW5uZWxzO1xuICAgICAgICB0aGlzLmF2Z0J5dGVzUGVyU2VjID0gdGhpcy5zYW1wbGVzUGVyU2VjICogdGhpcy5jaGFubmVscyAqICh0aGlzLmJpdHNQZXJTYW1wbGUgLyA4KTtcbiAgICAgICAgdGhpcy5ibG9ja0FsaWduID0gdGhpcy5jaGFubmVscyAqIE1hdGgubWF4KHRoaXMuYml0c1BlclNhbXBsZSwgOCk7XG4gICAgICAgIGlmIChpc1dhdkZvcm1hdCkge1xuICAgICAgICAgICAgdGhpcy5wcml2SGVhZGVyID0gbmV3IEFycmF5QnVmZmVyKDQ0KTtcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGFWaWV3XG4gICAgICAgICAgICBjb25zdCB2aWV3ID0gbmV3IERhdGFWaWV3KHRoaXMucHJpdkhlYWRlcik7XG4gICAgICAgICAgICAvKiBSSUZGIGlkZW50aWZpZXIgKi9cbiAgICAgICAgICAgIHRoaXMuc2V0U3RyaW5nKHZpZXcsIDAsIFwiUklGRlwiKTtcbiAgICAgICAgICAgIC8qIGZpbGUgbGVuZ3RoICovXG4gICAgICAgICAgICB2aWV3LnNldFVpbnQzMig0LCAwLCB0cnVlKTtcbiAgICAgICAgICAgIC8qIFJJRkYgdHlwZSAmIEZvcm1hdCAqL1xuICAgICAgICAgICAgdGhpcy5zZXRTdHJpbmcodmlldywgOCwgXCJXQVZFZm10IFwiKTtcbiAgICAgICAgICAgIC8qIGZvcm1hdCBjaHVuayBsZW5ndGggKi9cbiAgICAgICAgICAgIHZpZXcuc2V0VWludDMyKDE2LCAxNiwgdHJ1ZSk7XG4gICAgICAgICAgICAvKiBhdWRpbyBmb3JtYXQgKi9cbiAgICAgICAgICAgIHZpZXcuc2V0VWludDE2KDIwLCB0aGlzLmZvcm1hdFRhZywgdHJ1ZSk7XG4gICAgICAgICAgICAvKiBjaGFubmVsIGNvdW50ICovXG4gICAgICAgICAgICB2aWV3LnNldFVpbnQxNigyMiwgdGhpcy5jaGFubmVscywgdHJ1ZSk7XG4gICAgICAgICAgICAvKiBzYW1wbGUgcmF0ZSAqL1xuICAgICAgICAgICAgdmlldy5zZXRVaW50MzIoMjQsIHRoaXMuc2FtcGxlc1BlclNlYywgdHJ1ZSk7XG4gICAgICAgICAgICAvKiBieXRlIHJhdGUgKHNhbXBsZSByYXRlICogYmxvY2sgYWxpZ24pICovXG4gICAgICAgICAgICB2aWV3LnNldFVpbnQzMigyOCwgdGhpcy5hdmdCeXRlc1BlclNlYywgdHJ1ZSk7XG4gICAgICAgICAgICAvKiBibG9jayBhbGlnbiAoY2hhbm5lbCBjb3VudCAqIGJ5dGVzIHBlciBzYW1wbGUpICovXG4gICAgICAgICAgICB2aWV3LnNldFVpbnQxNigzMiwgdGhpcy5jaGFubmVscyAqICh0aGlzLmJpdHNQZXJTYW1wbGUgLyA4KSwgdHJ1ZSk7XG4gICAgICAgICAgICAvKiBiaXRzIHBlciBzYW1wbGUgKi9cbiAgICAgICAgICAgIHZpZXcuc2V0VWludDE2KDM0LCB0aGlzLmJpdHNQZXJTYW1wbGUsIHRydWUpO1xuICAgICAgICAgICAgLyogZGF0YSBjaHVuayBpZGVudGlmaWVyICovXG4gICAgICAgICAgICB0aGlzLnNldFN0cmluZyh2aWV3LCAzNiwgXCJkYXRhXCIpO1xuICAgICAgICAgICAgLyogZGF0YSBjaHVuayBsZW5ndGggKi9cbiAgICAgICAgICAgIHZpZXcuc2V0VWludDMyKDQwLCAwLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGRlZmF1bHQgaW5wdXQgZm9ybWF0LlxuICAgICAqIEBtZW1iZXIgQXVkaW9TdHJlYW1Gb3JtYXRJbXBsLmdldERlZmF1bHRJbnB1dEZvcm1hdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7QXVkaW9TdHJlYW1Gb3JtYXRJbXBsfSBUaGUgZGVmYXVsdCBpbnB1dCBmb3JtYXQuXG4gICAgICovXG4gICAgc3RhdGljIGdldERlZmF1bHRJbnB1dEZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdWRpb1N0cmVhbUZvcm1hdEltcGwoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhdWRpbyBjb250ZXh0IGFwcHJvcHJpYXRlIHRvIGN1cnJlbnQgYnJvd3NlclxuICAgICAqIEBtZW1iZXIgQXVkaW9TdHJlYW1Gb3JtYXRJbXBsLmdldEF1ZGlvQ29udGV4dFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7QXVkaW9Db250ZXh0fSBBbiBhdWRpbyBjb250ZXh0IGluc3RhbmNlXG4gICAgICovXG4gICAgLyogZXNsaW50LWRpc2FibGUgKi9cbiAgICBzdGF0aWMgZ2V0QXVkaW9Db250ZXh0KHNhbXBsZVJhdGUpIHtcbiAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgU3BlZWNoIFNESyBidWcgaW4gU2FmYXJpLlxuICAgICAgICBjb25zdCBBdWRpb0NvbnRleHQgPSB3aW5kb3cuQXVkaW9Db250ZXh0IC8vIG91ciBwcmVmZXJyZWQgaW1wbFxuICAgICAgICAgICAgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCAvLyBmYWxsYmFjaywgbW9zdGx5IHdoZW4gb24gU2FmYXJpXG4gICAgICAgICAgICB8fCBmYWxzZTsgLy8gY291bGQgbm90IGZpbmQuXG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9BdWRpb0NvbnRleHRcbiAgICAgICAgaWYgKCEhQXVkaW9Db250ZXh0KSB7XG4gICAgICAgICAgICBpZiAoc2FtcGxlUmF0ZSAhPT0gdW5kZWZpbmVkICYmIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMoKS5zYW1wbGVSYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb0NvbnRleHQoeyBzYW1wbGVSYXRlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb0NvbnRleHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBXZWIgQXVkaW8gQVBJIChBdWRpb0NvbnRleHQgaXMgbm90IGF2YWlsYWJsZSkuXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qIGVzbGludC1lbmFibGUgKi9cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgdGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0LlxuICAgICAqIEBtZW1iZXIgQXVkaW9TdHJlYW1Gb3JtYXRJbXBsLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBnZXQgaGVhZGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SGVhZGVyO1xuICAgIH1cbiAgICBzZXRTdHJpbmcodmlldywgb2Zmc2V0LCBzdHIpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZpZXcuc2V0VWludDgob2Zmc2V0ICsgaSwgc3RyLmNoYXJDb2RlQXQoaSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdWRpb1N0cmVhbUZvcm1hdC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBJbnZhbGlkT3BlcmF0aW9uRXJyb3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL0Vycm9yXCI7XG5pbXBvcnQgeyBBdWRpb1N0cmVhbUZvcm1hdCB9IGZyb20gXCIuLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBBdWRpb1N0cmVhbUZvcm1hdEltcGwgfSBmcm9tIFwiLi9BdWRpb1N0cmVhbUZvcm1hdFwiO1xuLyoqXG4gKiBCYXNlIGF1ZGlvIHBsYXllciBjbGFzc1xuICogVE9ETzogUGxheXMgb25seSBQQ00gZm9yIG5vdy5cbiAqIEBjbGFzc1xuICovXG5leHBvcnQgY2xhc3MgQmFzZUF1ZGlvUGxheWVyIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7QXVkaW9TdHJlYW1Gb3JtYXR9IGF1ZGlvRm9ybWF0IGF1ZGlvIHN0cmVhbSBmb3JtYXQgcmVjb2duaXplZCBieSB0aGUgcGxheWVyLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvRm9ybWF0KSB7XG4gICAgICAgIHRoaXMuYXVkaW9Db250ZXh0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5nYWluTm9kZSA9IG51bGw7XG4gICAgICAgIHRoaXMuYXV0b1VwZGF0ZUJ1ZmZlclRpbWVyID0gMDtcbiAgICAgICAgaWYgKGF1ZGlvRm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGF1ZGlvRm9ybWF0ID0gQXVkaW9TdHJlYW1Gb3JtYXQuZ2V0RGVmYXVsdElucHV0Rm9ybWF0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbml0KGF1ZGlvRm9ybWF0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogcGxheSBBdWRpbyBzYW1wbGVcbiAgICAgKiBAcGFyYW0gbmV3QXVkaW9EYXRhIGF1ZGlvIGRhdGEgdG8gYmUgcGxheWVkLlxuICAgICAqL1xuICAgIHBsYXlBdWRpb1NhbXBsZShuZXdBdWRpb0RhdGEsIGNiLCBlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuZW5zdXJlSW5pdGlhbGl6ZWRDb250ZXh0KCk7XG4gICAgICAgICAgICBjb25zdCBhdWRpb0RhdGEgPSB0aGlzLmZvcm1hdEF1ZGlvRGF0YShuZXdBdWRpb0RhdGEpO1xuICAgICAgICAgICAgY29uc3QgbmV3U2FtcGxlc0RhdGEgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuc2FtcGxlcy5sZW5ndGggKyBhdWRpb0RhdGEubGVuZ3RoKTtcbiAgICAgICAgICAgIG5ld1NhbXBsZXNEYXRhLnNldCh0aGlzLnNhbXBsZXMsIDApO1xuICAgICAgICAgICAgbmV3U2FtcGxlc0RhdGEuc2V0KGF1ZGlvRGF0YSwgdGhpcy5zYW1wbGVzLmxlbmd0aCk7XG4gICAgICAgICAgICB0aGlzLnNhbXBsZXMgPSBuZXdTYW1wbGVzRGF0YTtcbiAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgZXJyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHN0b3BzIGF1ZGlvIGFuZCBjbGVhcnMgdGhlIGJ1ZmZlcnNcbiAgICAgKi9cbiAgICBzdG9wQXVkaW8oY2IsIGVycikge1xuICAgICAgICBpZiAodGhpcy5hdWRpb0NvbnRleHQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuc2FtcGxlcyA9IG5ldyBGbG9hdDMyQXJyYXkoKTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuYXV0b1VwZGF0ZUJ1ZmZlclRpbWVyKTtcbiAgICAgICAgICAgIHRoaXMuYXVkaW9Db250ZXh0LmNsb3NlKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuYXVkaW9Db250ZXh0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbml0KGF1ZGlvRm9ybWF0KSB7XG4gICAgICAgIHRoaXMuYXVkaW9Gb3JtYXQgPSBhdWRpb0Zvcm1hdDtcbiAgICAgICAgdGhpcy5zYW1wbGVzID0gbmV3IEZsb2F0MzJBcnJheSgpO1xuICAgIH1cbiAgICBlbnN1cmVJbml0aWFsaXplZENvbnRleHQoKSB7XG4gICAgICAgIGlmICh0aGlzLmF1ZGlvQ29udGV4dCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVBdWRpb0NvbnRleHQoKTtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVyUGVyaW9kID0gMjAwO1xuICAgICAgICAgICAgdGhpcy5hdXRvVXBkYXRlQnVmZmVyVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBdWRpb0J1ZmZlcigpO1xuICAgICAgICAgICAgfSwgdGltZXJQZXJpb2QpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNyZWF0ZUF1ZGlvQ29udGV4dCgpIHtcbiAgICAgICAgLy8gbmV3ICgod2luZG93IGFzIGFueSkuQXVkaW9Db250ZXh0IHx8ICh3aW5kb3cgYXMgYW55KS53ZWJraXRBdWRpb0NvbnRleHQpKCk7XG4gICAgICAgIHRoaXMuYXVkaW9Db250ZXh0ID0gQXVkaW9TdHJlYW1Gb3JtYXRJbXBsLmdldEF1ZGlvQ29udGV4dCgpO1xuICAgICAgICAvLyBUT0RPOiBWYXJpb3VzIGV4YW1wbGVzIHNob3dzIHRoaXMgZ2FpbiBub2RlLCBpdCBkb2VzIG5vdCBzZWVtIHRvIGJlIG5lZWRlZCB1bmxlc3Mgd2UgcGxhblxuICAgICAgICAvLyB0byBjb250cm9sIHRoZSB2b2x1bWUsIG5vdCBsaWtlbHlcbiAgICAgICAgdGhpcy5nYWluTm9kZSA9IHRoaXMuYXVkaW9Db250ZXh0LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgdGhpcy5nYWluTm9kZS5nYWluLnZhbHVlID0gMTtcbiAgICAgICAgdGhpcy5nYWluTm9kZS5jb25uZWN0KHRoaXMuYXVkaW9Db250ZXh0LmRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSB0aGlzLmF1ZGlvQ29udGV4dC5jdXJyZW50VGltZTtcbiAgICB9XG4gICAgZm9ybWF0QXVkaW9EYXRhKGF1ZGlvRGF0YSkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuYXVkaW9Gb3JtYXQuYml0c1BlclNhbXBsZSkge1xuICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdEFycmF5QnVmZmVyKG5ldyBJbnQ4QXJyYXkoYXVkaW9EYXRhKSwgMTI4KTtcbiAgICAgICAgICAgIGNhc2UgMTY6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0QXJyYXlCdWZmZXIobmV3IEludDE2QXJyYXkoYXVkaW9EYXRhKSwgMzI3NjgpO1xuICAgICAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRBcnJheUJ1ZmZlcihuZXcgSW50MzJBcnJheShhdWRpb0RhdGEpLCAyMTQ3NDgzNjQ4KTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FcnJvcihcIk9ubHkgV0FWRV9GT1JNQVRfUENNICg4LzE2LzMyIGJwcykgZm9ybWF0IHN1cHBvcnRlZCBhdCB0aGlzIHRpbWVcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9ybWF0QXJyYXlCdWZmZXIoYXVkaW9EYXRhLCBtYXhWYWx1ZSkge1xuICAgICAgICBjb25zdCBmbG9hdDMyRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoYXVkaW9EYXRhLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXVkaW9EYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmbG9hdDMyRGF0YVtpXSA9IGF1ZGlvRGF0YVtpXSAvIG1heFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbG9hdDMyRGF0YTtcbiAgICB9XG4gICAgdXBkYXRlQXVkaW9CdWZmZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnNhbXBsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2hhbm5lbENvdW50ID0gdGhpcy5hdWRpb0Zvcm1hdC5jaGFubmVscztcbiAgICAgICAgY29uc3QgYnVmZmVyU291cmNlID0gdGhpcy5hdWRpb0NvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gICAgICAgIGNvbnN0IGZyYW1lQ291bnQgPSB0aGlzLnNhbXBsZXMubGVuZ3RoIC8gY2hhbm5lbENvdW50O1xuICAgICAgICBjb25zdCBhdWRpb0J1ZmZlciA9IHRoaXMuYXVkaW9Db250ZXh0LmNyZWF0ZUJ1ZmZlcihjaGFubmVsQ291bnQsIGZyYW1lQ291bnQsIHRoaXMuYXVkaW9Gb3JtYXQuc2FtcGxlc1BlclNlYyk7XG4gICAgICAgIC8vIFRPRE86IFNob3VsZCB3ZSBkbyB0aGUgY29udmVyc2lvbiBpbiB0aGUgcHVzaEF1ZGlvU2FtcGxlIGluc3RlYWQ/XG4gICAgICAgIGZvciAobGV0IGNoYW5uZWwgPSAwOyBjaGFubmVsIDwgY2hhbm5lbENvdW50OyBjaGFubmVsKyspIHtcbiAgICAgICAgICAgIC8vIEZpbGwgaW4gaW5kaXZpZHVhbCBjaGFubmVsIGRhdGFcbiAgICAgICAgICAgIGxldCBjaGFubmVsT2Zmc2V0ID0gY2hhbm5lbDtcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvRGF0YSA9IGF1ZGlvQnVmZmVyLmdldENoYW5uZWxEYXRhKGNoYW5uZWwpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNhbXBsZXMubGVuZ3RoOyBpKyssIGNoYW5uZWxPZmZzZXQgKz0gY2hhbm5lbENvdW50KSB7XG4gICAgICAgICAgICAgICAgYXVkaW9EYXRhW2ldID0gdGhpcy5zYW1wbGVzW2NoYW5uZWxPZmZzZXRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0VGltZSA8IHRoaXMuYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHRoaXMuYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lO1xuICAgICAgICB9XG4gICAgICAgIGJ1ZmZlclNvdXJjZS5idWZmZXIgPSBhdWRpb0J1ZmZlcjtcbiAgICAgICAgYnVmZmVyU291cmNlLmNvbm5lY3QodGhpcy5nYWluTm9kZSk7XG4gICAgICAgIGJ1ZmZlclNvdXJjZS5zdGFydCh0aGlzLnN0YXJ0VGltZSk7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBwbGF5IHRoZSBuZXh0IHNhbXBsZSBhZnRlciB0aGUgY3VycmVudCBvbmUuXG4gICAgICAgIHRoaXMuc3RhcnRUaW1lICs9IGF1ZGlvQnVmZmVyLmR1cmF0aW9uO1xuICAgICAgICAvLyBDbGVhciB0aGUgc2FtcGxlcyBmb3IgdGhlIG5leHQgcHVzaGVkIGRhdGEuXG4gICAgICAgIHRoaXMuc2FtcGxlcyA9IG5ldyBGbG9hdDMyQXJyYXkoKTtcbiAgICB9XG4gICAgcGxheUF1ZGlvKGF1ZGlvRGF0YSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXVkaW9Db250ZXh0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVBdWRpb0NvbnRleHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuYXVkaW9Db250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAgICAgICAgICAgY29uc3QgZGVzdGluYXRpb24gPSB0aGlzLmF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbjtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMuYXVkaW9Db250ZXh0LmRlY29kZUF1ZGlvRGF0YShhdWRpb0RhdGEsIChuZXdCdWZmZXIpID0+IHtcbiAgICAgICAgICAgICAgICBzb3VyY2UuYnVmZmVyID0gbmV3QnVmZmVyO1xuICAgICAgICAgICAgICAgIHNvdXJjZS5jb25uZWN0KGRlc3RpbmF0aW9uKTtcbiAgICAgICAgICAgICAgICBzb3VyY2Uuc3RhcnQoMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1CYXNlQXVkaW9QbGF5ZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogQW4gYWJzdHJhY3QgYmFzZSBjbGFzcyB0aGF0IGRlZmluZXMgY2FsbGJhY2sgbWV0aG9kcyAocmVhZCgpIGFuZCBjbG9zZSgpKSBmb3JcbiAqIGN1c3RvbSBhdWRpbyBpbnB1dCBzdHJlYW1zKS5cbiAqIEBjbGFzcyBQdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrXG4gKi9cbmV4cG9ydCBjbGFzcyBQdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrIHtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHVsbEF1ZGlvSW5wdXRTdHJlYW1DYWxsYmFjay5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBBbiBhYnN0cmFjdCBiYXNlIGNsYXNzIHRoYXQgZGVmaW5lcyBjYWxsYmFjayBtZXRob2RzICh3cml0ZSgpIGFuZCBjbG9zZSgpKSBmb3JcbiAqIGN1c3RvbSBhdWRpbyBvdXRwdXQgc3RyZWFtcykuXG4gKiBAY2xhc3MgUHVzaEF1ZGlvT3V0cHV0U3RyZWFtQ2FsbGJhY2tcbiAqL1xuZXhwb3J0IGNsYXNzIFB1c2hBdWRpb091dHB1dFN0cmVhbUNhbGxiYWNrIHtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHVzaEF1ZGlvT3V0cHV0U3RyZWFtQ2FsbGJhY2suanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgU3ludGhlc2lzQWRhcHRlckJhc2UgfSBmcm9tIFwiLi4vLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBCYWNrZ3JvdW5kRXZlbnQsIGNyZWF0ZU5vRGFzaEd1aWQsIEV2ZW50cyB9IGZyb20gXCIuLi8uLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtSW1wbCB9IGZyb20gXCIuL0F1ZGlvT3V0cHV0U3RyZWFtXCI7XG5pbXBvcnQgeyBBdWRpb0Zvcm1hdFRhZyB9IGZyb20gXCIuL0F1ZGlvU3RyZWFtRm9ybWF0XCI7XG5jb25zdCBNZWRpYUR1cmF0aW9uUGxhY2Vob2xkZXJTZWNvbmRzID0gNjAgKiAzMDtcbmNvbnN0IEF1ZGlvRm9ybWF0VG9NaW1lVHlwZSA9IHtcbiAgICBbQXVkaW9Gb3JtYXRUYWcuUENNXTogXCJhdWRpby93YXZcIixcbiAgICBbQXVkaW9Gb3JtYXRUYWcuTXVMYXddOiBcImF1ZGlvL3gtd2F2XCIsXG4gICAgW0F1ZGlvRm9ybWF0VGFnLk1QM106IFwiYXVkaW8vbXBlZ1wiLFxuICAgIFtBdWRpb0Zvcm1hdFRhZy5PR0dfT1BVU106IFwiYXVkaW8vb2dnXCIsXG4gICAgW0F1ZGlvRm9ybWF0VGFnLldFQk1fT1BVU106IFwiYXVkaW8vd2VibTsgY29kZWNzPW9wdXNcIixcbiAgICBbQXVkaW9Gb3JtYXRUYWcuQUxhd106IFwiYXVkaW8veC13YXZcIixcbiAgICBbQXVkaW9Gb3JtYXRUYWcuRkxBQ106IFwiYXVkaW8vZmxhY1wiLFxufTtcbi8qKlxuICogUmVwcmVzZW50cyB0aGUgc3BlYWtlciBwbGF5YmFjayBhdWRpbyBkZXN0aW5hdGlvbiwgd2hpY2ggb25seSB3b3JrcyBpbiBicm93c2VyLlxuICogTm90ZTogdGhlIFNESyB3aWxsIHRyeSB0byB1c2UgPGEgaHJlZj1cImh0dHBzOi8vd3d3LnczLm9yZy9UUi9tZWRpYS1zb3VyY2UvXCI+TWVkaWEgU291cmNlIEV4dGVuc2lvbnM8L2E+IHRvIHBsYXkgYXVkaW8uXG4gKiBNcDMgZm9ybWF0IGhhcyBiZXR0ZXIgc3VwcG9ydHMgb24gTWljcm9zb2Z0IEVkZ2UsIENocm9tZSBhbmQgU2FmYXJpIChkZXNrdG9wKSwgc28sIGl0J3MgYmV0dGVyIHRvIHNwZWNpZnkgbXAzIGZvcm1hdCBmb3IgcGxheWJhY2suXG4gKiBAY2xhc3MgU3BlYWtlckF1ZGlvRGVzdGluYXRpb25cbiAqIFVwZGF0ZWQgaW4gdmVyc2lvbiAxLjE3LjBcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWFrZXJBdWRpb0Rlc3RpbmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihhdWRpb0Rlc3RpbmF0aW9uSWQpIHtcbiAgICAgICAgdGhpcy5wcml2UGxheWJhY2tTdGFydGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkFwcGVuZGluZ1RvQnVmZmVyID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdk1lZGlhU291cmNlT3BlbmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkJ5dGVzUmVjZWl2ZWQgPSAwO1xuICAgICAgICB0aGlzLnByaXZJZCA9IGF1ZGlvRGVzdGluYXRpb25JZCA/IGF1ZGlvRGVzdGluYXRpb25JZCA6IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2SXNQYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2SXNDbG9zZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJZDtcbiAgICB9XG4gICAgd3JpdGUoYnVmZmVyLCBjYiwgZXJyKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZBdWRpb0J1ZmZlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZBdWRpb0J1ZmZlci5wdXNoKGJ1ZmZlcik7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNvdXJjZUJ1ZmZlcigpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5wcml2QXVkaW9PdXRwdXRTdHJlYW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2QXVkaW9PdXRwdXRTdHJlYW0ud3JpdGUoYnVmZmVyKTtcbiAgICAgICAgICAgIHRoaXMucHJpdkJ5dGVzUmVjZWl2ZWQgKz0gYnVmZmVyLmJ5dGVMZW5ndGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvc2UoY2IsIGVycikge1xuICAgICAgICB0aGlzLnByaXZJc0Nsb3NlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLnByaXZTb3VyY2VCdWZmZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVTb3VyY2VCdWZmZXJVcGRhdGVFbmQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoISFjYikge1xuICAgICAgICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgICAgICBlcnIoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMucHJpdkF1ZGlvT3V0cHV0U3RyZWFtICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgaWYgKCh0aGlzLnByaXZGb3JtYXQuZm9ybWF0VGFnID09PSBBdWRpb0Zvcm1hdFRhZy5QQ00gfHwgdGhpcy5wcml2Rm9ybWF0LmZvcm1hdFRhZyA9PT0gQXVkaW9Gb3JtYXRUYWcuTXVMYXdcbiAgICAgICAgICAgICAgICB8fCB0aGlzLnByaXZGb3JtYXQuZm9ybWF0VGFnID09PSBBdWRpb0Zvcm1hdFRhZy5BTGF3KSAmJiB0aGlzLnByaXZGb3JtYXQuaGFzSGVhZGVyID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiUGxheSBiYWNrIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHJhdyBQQ00sIG11bGF3IG9yIGFsYXcgZm9ybWF0IHdpdGhvdXQgaGVhZGVyLlwiKTtcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLm9uQXVkaW9FbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkF1ZGlvRW5kKHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCByZWNlaXZlZEF1ZGlvID0gbmV3IEFycmF5QnVmZmVyKHRoaXMucHJpdkJ5dGVzUmVjZWl2ZWQpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkF1ZGlvT3V0cHV0U3RyZWFtLnJlYWQocmVjZWl2ZWRBdWRpbykudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlY2VpdmVkQXVkaW8gPSBTeW50aGVzaXNBZGFwdGVyQmFzZS5hZGRIZWFkZXIocmVjZWl2ZWRBdWRpbywgdGhpcy5wcml2Rm9ybWF0KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXVkaW9CbG9iID0gbmV3IEJsb2IoW3JlY2VpdmVkQXVkaW9dLCB7IHR5cGU6IEF1ZGlvRm9ybWF0VG9NaW1lVHlwZVt0aGlzLnByaXZGb3JtYXQuZm9ybWF0VGFnXSB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2QXVkaW8uc3JjID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYXVkaW9CbG9iKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlQbGF5YmFjaygpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHVuc3VwcG9ydGVkIGZvcm1hdCwgY2FsbCBvbkF1ZGlvRW5kIGRpcmVjdGx5LlxuICAgICAgICAgICAgaWYgKCEhdGhpcy5vbkF1ZGlvRW5kKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkF1ZGlvRW5kKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNldCBmb3JtYXQoZm9ybWF0KSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgaWYgKHR5cGVvZiAoQXVkaW9Db250ZXh0KSAhPT0gXCJ1bmRlZmluZWRcIiB8fCAodHlwZW9mICh3aW5kb3cpICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiAod2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkgIT09IFwidW5kZWZpbmVkXCIpKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZGb3JtYXQgPSBmb3JtYXQ7XG4gICAgICAgICAgICBjb25zdCBtaW1lVHlwZSA9IEF1ZGlvRm9ybWF0VG9NaW1lVHlwZVt0aGlzLnByaXZGb3JtYXQuZm9ybWF0VGFnXTtcbiAgICAgICAgICAgIGlmIChtaW1lVHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVua25vd24gbWltZVR5cGUgZm9yIGZvcm1hdCAke0F1ZGlvRm9ybWF0VGFnW3RoaXMucHJpdkZvcm1hdC5mb3JtYXRUYWddfTsgcGxheWJhY2sgaXMgbm90IHN1cHBvcnRlZC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiAoTWVkaWFTb3VyY2UpICE9PSBcInVuZGVmaW5lZFwiICYmIE1lZGlhU291cmNlLmlzVHlwZVN1cHBvcnRlZChtaW1lVHlwZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZBdWRpbyA9IG5ldyBBdWRpbygpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkF1ZGlvQnVmZmVyID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TWVkaWFTb3VyY2UgPSBuZXcgTWVkaWFTb3VyY2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZBdWRpby5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHRoaXMucHJpdk1lZGlhU291cmNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZBdWRpby5sb2FkKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TWVkaWFTb3VyY2Uub25zb3VyY2VvcGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZNZWRpYVNvdXJjZU9wZW5lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdk1lZGlhU291cmNlLmR1cmF0aW9uID0gTWVkaWFEdXJhdGlvblBsYWNlaG9sZGVyU2Vjb25kcztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U291cmNlQnVmZmVyID0gdGhpcy5wcml2TWVkaWFTb3VyY2UuYWRkU291cmNlQnVmZmVyKG1pbWVUeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U291cmNlQnVmZmVyLm9udXBkYXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTb3VyY2VCdWZmZXIoKS5jYXRjaCgocmVhc29uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRzLmluc3RhbmNlLm9uRXZlbnQobmV3IEJhY2tncm91bmRFdmVudChyZWFzb24pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTb3VyY2VCdWZmZXIub251cGRhdGVlbmQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVNvdXJjZUJ1ZmZlclVwZGF0ZUVuZCgpLmNhdGNoKChyZWFzb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudHMuaW5zdGFuY2Uub25FdmVudChuZXcgQmFja2dyb3VuZEV2ZW50KHJlYXNvbikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlNvdXJjZUJ1ZmZlci5vbnVwZGF0ZXN0YXJ0ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2QXBwZW5kaW5nVG9CdWZmZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU291cmNlQnVmZmVyKCkuY2F0Y2goKHJlYXNvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBFdmVudHMuaW5zdGFuY2Uub25FdmVudChuZXcgQmFja2dyb3VuZEV2ZW50KHJlYXNvbikpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYEZvcm1hdCAke0F1ZGlvRm9ybWF0VGFnW3RoaXMucHJpdkZvcm1hdC5mb3JtYXRUYWddfSBjb3VsZCBub3QgYmUgcGxheWVkIGJ5IE1TRSwgc3RyZWFtaW5nIHBsYXliYWNrIGlzIG5vdCBlbmFibGVkLmApO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkF1ZGlvT3V0cHV0U3RyZWFtID0gbmV3IFB1bGxBdWRpb091dHB1dFN0cmVhbUltcGwoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZBdWRpb091dHB1dFN0cmVhbS5mb3JtYXQgPSB0aGlzLnByaXZGb3JtYXQ7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2QXVkaW8gPSBuZXcgQXVkaW8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgdm9sdW1lKCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICByZXR1cm4gKF9iID0gKF9hID0gdGhpcy5wcml2QXVkaW8pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS52b2x1bWUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IC0xO1xuICAgIH1cbiAgICBzZXQgdm9sdW1lKHZvbHVtZSkge1xuICAgICAgICBpZiAoISF0aGlzLnByaXZBdWRpbykge1xuICAgICAgICAgICAgdGhpcy5wcml2QXVkaW8udm9sdW1lID0gdm9sdW1lO1xuICAgICAgICB9XG4gICAgfVxuICAgIG11dGUoKSB7XG4gICAgICAgIGlmICghIXRoaXMucHJpdkF1ZGlvKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZBdWRpby5tdXRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5tdXRlKCkge1xuICAgICAgICBpZiAoISF0aGlzLnByaXZBdWRpbykge1xuICAgICAgICAgICAgdGhpcy5wcml2QXVkaW8ubXV0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXNDbG9zZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc0Nsb3NlZDtcbiAgICB9XG4gICAgZ2V0IGN1cnJlbnRUaW1lKCkge1xuICAgICAgICBpZiAodGhpcy5wcml2QXVkaW8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvLmN1cnJlbnRUaW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgcGF1c2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5wcml2SXNQYXVzZWQgJiYgdGhpcy5wcml2QXVkaW8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2QXVkaW8ucGF1c2UoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdklzUGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXN1bWUoY2IsIGVycikge1xuICAgICAgICBpZiAodGhpcy5wcml2SXNQYXVzZWQgJiYgdGhpcy5wcml2QXVkaW8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2QXVkaW8ucGxheSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnByaXZJc1BhdXNlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBpbnRlcm5hbEF1ZGlvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW87XG4gICAgfVxuICAgIHVwZGF0ZVNvdXJjZUJ1ZmZlcigpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZBdWRpb0J1ZmZlciAhPT0gdW5kZWZpbmVkICYmICh0aGlzLnByaXZBdWRpb0J1ZmZlci5sZW5ndGggPiAwKSAmJiB0aGlzLnNvdXJjZUJ1ZmZlckF2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2QXBwZW5kaW5nVG9CdWZmZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJpbmFyeSA9IHRoaXMucHJpdkF1ZGlvQnVmZmVyLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U291cmNlQnVmZmVyLmFwcGVuZEJ1ZmZlcihiaW5hcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2QXVkaW9CdWZmZXIudW5zaGlmdChiaW5hcnkpO1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImJ1ZmZlciBmaWxsZWQsIHBhdXNpbmcgYWRkaXRpb24gb2YgYmluYXJpZXMgdW50aWwgc3BhY2UgaXMgbWFkZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLm5vdGlmeVBsYXliYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNhbkVuZFN0cmVhbSgpKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5oYW5kbGVTb3VyY2VCdWZmZXJVcGRhdGVFbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGhhbmRsZVNvdXJjZUJ1ZmZlclVwZGF0ZUVuZCgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNhbkVuZFN0cmVhbSgpICYmIHRoaXMuc291cmNlQnVmZmVyQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZNZWRpYVNvdXJjZS5lbmRPZlN0cmVhbSgpO1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMubm90aWZ5UGxheWJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5vdGlmeVBsYXliYWNrKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZQbGF5YmFja1N0YXJ0ZWQgJiYgdGhpcy5wcml2QXVkaW8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlBsYXliYWNrU3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5vbkF1ZGlvU3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkF1ZGlvU3RhcnQodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucHJpdkF1ZGlvLm9uZW5kZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMub25BdWRpb0VuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkF1ZGlvRW5kKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJpdklzUGF1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdkF1ZGlvLnBsYXkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYW5FbmRTdHJlYW0oKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5pc0Nsb3NlZCAmJiB0aGlzLnByaXZTb3VyY2VCdWZmZXIgIT09IHVuZGVmaW5lZCAmJiAodGhpcy5wcml2QXVkaW9CdWZmZXIubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgJiYgdGhpcy5wcml2TWVkaWFTb3VyY2VPcGVuZWQgJiYgIXRoaXMucHJpdkFwcGVuZGluZ1RvQnVmZmVyICYmIHRoaXMucHJpdk1lZGlhU291cmNlLnJlYWR5U3RhdGUgPT09IFwib3BlblwiKTtcbiAgICB9XG4gICAgc291cmNlQnVmZmVyQXZhaWxhYmxlKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMucHJpdlNvdXJjZUJ1ZmZlciAhPT0gdW5kZWZpbmVkICYmICF0aGlzLnByaXZTb3VyY2VCdWZmZXIudXBkYXRpbmcpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlYWtlckF1ZGlvRGVzdGluYXRpb24uanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZXNPcGVuUmFuZ2VPcHRpb25OYW1lIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUNvbGxlY3Rpb24sIFByb3BlcnR5SWQsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuaW1wb3J0IHsgTGFuZ3VhZ2VJZE1vZGUgfSBmcm9tIFwiLi9MYW5ndWFnZUlkTW9kZVwiO1xuLyoqXG4gKiBMYW5ndWFnZSBhdXRvIGRldGVjdCBjb25maWd1cmF0aW9uLlxuICogQGNsYXNzIEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZ1xuICogQWRkZWQgaW4gdmVyc2lvbiAxLjEzLjAuXG4gKi9cbmV4cG9ydCBjbGFzcyBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWcge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fTGFuZ3VhZ2VJZE1vZGUsIFwiQXRTdGFydFwiKTtcbiAgICAgICAgdGhpcy5wcml2TGFuZ3VhZ2VJZE1vZGUgPSBMYW5ndWFnZUlkTW9kZS5BdFN0YXJ0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZy5mcm9tT3BlblJhbmdlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIE9ubHkgW1tTcGVlY2hTeW50aGVzaXplcl1dIHN1cHBvcnRzIHNvdXJjZSBsYW5ndWFnZSBhdXRvIGRldGVjdGlvbiBmcm9tIG9wZW4gcmFuZ2UsXG4gICAgICogZm9yIFtbUmVjb2duaXplcl1dLCBwbGVhc2UgdXNlIEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZyB3aXRoIHNwZWNpZmljIHNvdXJjZSBsYW5ndWFnZXMuXG4gICAgICogQHJldHVybiB7QXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnfSBJbnN0YW5jZSBvZiBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWdcbiAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWcgd2l0aCBvcGVuIHJhbmdlLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tT3BlblJhbmdlKCkge1xuICAgICAgICBjb25zdCBjb25maWcgPSBuZXcgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnKCk7XG4gICAgICAgIGNvbmZpZy5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlcywgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlc09wZW5SYW5nZU9wdGlvbk5hbWUpO1xuICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZy5mcm9tTGFuZ3VhZ2VzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IGxhbmd1YWdlcyBDb21tYS1zZXBhcmF0ZWQgc3RyaW5nIG9mIGxhbmd1YWdlcyAoZWcuIFwiZW4tVVMsZnItRlJcIikgdG8gcG9wdWxhdGUgcHJvcGVydGllcyBvZiBjb25maWcuXG4gICAgICogQHJldHVybiB7QXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnfSBJbnN0YW5jZSBvZiBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWdcbiAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWcgd2l0aCBnaXZlbiBsYW5ndWFnZXMuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21MYW5ndWFnZXMobGFuZ3VhZ2VzKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmQXJyYXlFbXB0eU9yV2hpdGVzcGFjZShsYW5ndWFnZXMsIFwibGFuZ3VhZ2VzXCIpO1xuICAgICAgICBjb25zdCBjb25maWcgPSBuZXcgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnKCk7XG4gICAgICAgIGNvbmZpZy5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlcywgbGFuZ3VhZ2VzLmpvaW4oKSk7XG4gICAgICAgIHJldHVybiBjb25maWc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBtZW1iZXIgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnLmZyb21Tb3VyY2VMYW5ndWFnZUNvbmZpZ3NcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtTb3VyY2VMYW5ndWFnZUNvbmZpZ1tdfSBjb25maWdzIFNvdXJjZUxhbmd1YWdlQ29uZmlncyB0byBwb3B1bGF0ZSBwcm9wZXJ0aWVzIG9mIGNvbmZpZy5cbiAgICAgKiBAcmV0dXJuIHtBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWd9IEluc3RhbmNlIG9mIEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZ1xuICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZyB3aXRoIGdpdmVuIFNvdXJjZUxhbmd1YWdlQ29uZmlncy5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVNvdXJjZUxhbmd1YWdlQ29uZmlncyhjb25maWdzKSB7XG4gICAgICAgIGlmIChjb25maWdzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIG5vbi1lbXB0eSBTb3VyY2VMYW5ndWFnZUNvbmZpZyBhcnJheS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXV0b0NvbmZpZyA9IG5ldyBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWcoKTtcbiAgICAgICAgY29uc3QgbGFuZ3MgPSBbXTtcbiAgICAgICAgY29uZmlncy5mb3JFYWNoKChjb25maWcpID0+IHtcbiAgICAgICAgICAgIGxhbmdzLnB1c2goY29uZmlnLmxhbmd1YWdlKTtcbiAgICAgICAgICAgIGlmIChjb25maWcuZW5kcG9pbnRJZCAhPT0gdW5kZWZpbmVkICYmIGNvbmZpZy5lbmRwb2ludElkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VzdG9tUHJvcGVydHkgPSBjb25maWcubGFuZ3VhZ2UgKyBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50SWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBhdXRvQ29uZmlnLnByb3BlcnRpZXMuc2V0UHJvcGVydHkoY3VzdG9tUHJvcGVydHksIGNvbmZpZy5lbmRwb2ludElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGF1dG9Db25maWcucHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0F1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZXMsIGxhbmdzLmpvaW4oKSk7XG4gICAgICAgIHJldHVybiBhdXRvQ29uZmlnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZy5wcm90b3R5cGUucHJvcGVydGllc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJuIHtQcm9wZXJ0eUNvbGxlY3Rpb259IFByb3BlcnRpZXMgb2YgdGhlIGNvbmZpZy5cbiAgICAgKiBAc3VtbWFyeSBHZXRzIGFuIGF1dG8gZGV0ZWN0ZWQgbGFuZ3VhZ2UgY29uZmlnIHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBtZW1iZXIgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnLnByb3RvdHlwZS5tb2RlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7TGFuZ3VhZ2VJZE1vZGV9IG1vZGUgTElEIG1vZGUgZGVzaXJlZC5cbiAgICAgKiBAc3VtbWFyeSBTZXRzIExJRCBvcGVyYXRpb24gdG8gZGVzaXJlZCBtb2RlXG4gICAgICovXG4gICAgc2V0IG1vZGUobW9kZSkge1xuICAgICAgICBpZiAobW9kZSA9PT0gTGFuZ3VhZ2VJZE1vZGUuQ29udGludW91cykge1xuICAgICAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29nbml0aW9uRW5kcG9pbnRWZXJzaW9uLCBcIjJcIik7XG4gICAgICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fTGFuZ3VhZ2VJZE1vZGUsIFwiQ29udGludW91c1wiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHsgLy8gTGFuZ3VhZ2VJZE1vZGUuQXRTdGFydFxuICAgICAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29nbml0aW9uRW5kcG9pbnRWZXJzaW9uLCBcIjFcIik7XG4gICAgICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fTGFuZ3VhZ2VJZE1vZGUsIFwiQXRTdGFydFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZMYW5ndWFnZUlkTW9kZSA9IG1vZGU7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWcuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuL0NvbnRyYWN0c1wiO1xuLyoqXG4gKiBPdXRwdXQgZm9ybWF0XG4gKiBAY2xhc3MgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlUmVzdWx0XG4gKi9cbmV4cG9ydCBjbGFzcyBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VSZXN1bHQge1xuICAgIGNvbnN0cnVjdG9yKGxhbmd1YWdlLCBsYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2UpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQobGFuZ3VhZ2UsIFwibGFuZ3VhZ2VcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSwgXCJsYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2VcIik7XG4gICAgICAgIHRoaXMucHJpdkxhbmd1YWdlID0gbGFuZ3VhZ2U7XG4gICAgICAgIHRoaXMucHJpdkxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSA9IGxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VSZXN1bHQgb2JqZWN0IGZyb20gYSBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdCBpbnN0YW5jZS5cbiAgICAgKiBAbWVtYmVyIEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZVJlc3VsdC5mcm9tUmVzdWx0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7U3BlZWNoUmVjb2duaXRpb25SZXN1bHR9IHJlc3VsdCAtIFRoZSByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICogQHJldHVybnMge0F1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZVJlc3VsdH0gQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlUmVzdWx0IG9iamVjdCBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tUmVzdWx0KHJlc3VsdCkge1xuICAgICAgICByZXR1cm4gbmV3IEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZVJlc3VsdChyZXN1bHQubGFuZ3VhZ2UsIHJlc3VsdC5sYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2UpO1xuICAgIH1cbiAgICBnZXQgbGFuZ3VhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZMYW5ndWFnZTtcbiAgICB9XG4gICAgZ2V0IGxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZVJlc3VsdC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBEaWFsb2dTZXJ2aWNlQ29uZmlnLCBEaWFsb2dTZXJ2aWNlQ29uZmlnSW1wbCB9IGZyb20gXCIuL0RpYWxvZ1NlcnZpY2VDb25maWdcIjtcbmltcG9ydCB7IFByb3BlcnR5SWQgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIENsYXNzIHRoYXQgZGVmaW5lcyBjb25maWd1cmF0aW9ucyBmb3IgdGhlIGRpYWxvZyBzZXJ2aWNlIGNvbm5lY3RvciBvYmplY3QgZm9yIHVzaW5nIGEgQm90IEZyYW1ld29yayBiYWNrZW5kLlxuICogQGNsYXNzIEJvdEZyYW1ld29ya0NvbmZpZ1xuICovXG5leHBvcnQgY2xhc3MgQm90RnJhbWV3b3JrQ29uZmlnIGV4dGVuZHMgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgQm90RnJhbWV3b3JrQ29uZmlnLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYm90IGZyYW1ld29yayBjb25maWd1cmF0aW9uIGluc3RhbmNlIHdpdGggdGhlIHByb3ZpZGVkIHN1YnNjcmlwdGlvbiBpbmZvcm1hdGlvbi5cbiAgICAgKiBAbWVtYmVyIEJvdEZyYW1ld29ya0NvbmZpZy5mcm9tU3Vic2NyaXB0aW9uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBzdWJzY3JpcHRpb24gU3Vic2NyaXB0aW9uIGtleSBhc3NvY2lhdGVkIHdpdGggdGhlIGJvdFxuICAgICAqIEBwYXJhbSByZWdpb24gVGhlIHJlZ2lvbiBuYW1lIChzZWUgdGhlIDxhIGhyZWY9XCJodHRwczovL2FrYS5tcy9jc3NwZWVjaC9yZWdpb25cIj5yZWdpb24gcGFnZTwvYT4pLlxuICAgICAqIEBwYXJhbSBib3RJZCBPcHRpb25hbC4gSWRlbnRpZmllciBmb3IgdXNpbmcgYSBzcGVjaWZpYyBib3Qgd2l0aGluIGFuIEF6dXJlIHJlc291cmNlIGdyb3VwLiBFcXVpdmFsZW50IHRvIHRoZVxuICAgICAqIHJlc291cmNlIG5hbWUuXG4gICAgICogQHJldHVybnMge0JvdEZyYW1ld29ya0NvbmZpZ30gQSBuZXcgYm90IGZyYW1ld29yayBjb25maWd1cmF0aW9uIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbiwgcmVnaW9uLCBib3RJZCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2Uoc3Vic2NyaXB0aW9uLCBcInN1YnNjcmlwdGlvblwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHJlZ2lvbiwgXCJyZWdpb25cIik7XG4gICAgICAgIGNvbnN0IGJvdEZyYW1ld29ya0NvbmZpZyA9IG5ldyBEaWFsb2dTZXJ2aWNlQ29uZmlnSW1wbCgpO1xuICAgICAgICBib3RGcmFtZXdvcmtDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25fRGlhbG9nVHlwZSwgRGlhbG9nU2VydmljZUNvbmZpZy5EaWFsb2dUeXBlcy5Cb3RGcmFtZXdvcmspO1xuICAgICAgICBib3RGcmFtZXdvcmtDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXksIHN1YnNjcmlwdGlvbik7XG4gICAgICAgIGJvdEZyYW1ld29ya0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbiwgcmVnaW9uKTtcbiAgICAgICAgaWYgKGJvdElkKSB7XG4gICAgICAgICAgICBib3RGcmFtZXdvcmtDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25fQXBwbGljYXRpb25JZCwgYm90SWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBib3RGcmFtZXdvcmtDb25maWc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBib3QgZnJhbWV3b3JrIGNvbmZpZ3VyYXRpb24gaW5zdGFuY2UgZm9yIHRoZSBzcGVjaWZpZWQgYXV0aG9yaXphdGlvbiB0b2tlbiBhbmQgcmVnaW9uLlxuICAgICAqIE5vdGU6IFRoZSBjYWxsZXIgbXVzdCBlbnN1cmUgdGhhdCBhbiBhdXRob3JpemF0aW9uIHRva2VuIGlzIHZhbGlkLiBCZWZvcmUgYW4gYXV0aG9yaXphdGlvbiB0b2tlbiBleHBpcmVzLCB0aGVcbiAgICAgKiBjYWxsZXIgbXVzdCByZWZyZXNoIGl0IGJ5IHNldHRpbmcgdGhlIGF1dGhvcml6YXRpb25Ub2tlbiBwcm9wZXJ0eSBvbiB0aGUgY29ycmVzcG9uZGluZ1xuICAgICAqIERpYWxvZ1NlcnZpY2VDb25uZWN0b3IgaW5zdGFuY2UgY3JlYXRlZCB3aXRoIHRoaXMgY29uZmlnLiBUaGUgY29udGVudHMgb2YgY29uZmlndXJhdGlvbiBvYmplY3RzIGFyZSBjb3BpZWRcbiAgICAgKiB3aGVuIGNvbm5lY3RvcnMgYXJlIGNyZWF0ZWQsIHNvIHNldHRpbmcgYXV0aG9yaXphdGlvblRva2VuIG9uIGEgRGlhbG9nU2VydmljZUNvbm5lY3RvciB3aWxsIG5vdCB1cGRhdGUgdGhlXG4gICAgICogb3JpZ2luYWwgY29uZmlndXJhdGlvbidzIGF1dGhvcml6YXRpb24gdG9rZW4uIENyZWF0ZSBhIG5ldyBjb25maWd1cmF0aW9uIGluc3RhbmNlIG9yIHNldCB0aGVcbiAgICAgKiBTcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiBwcm9wZXJ0eSB0byB1cGRhdGUgYW4gZXhpc3RpbmcgaW5zdGFuY2UgaWYgaXQgd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZVxuICAgICAqIGZ1cnRoZXIgRGlhbG9nU2VydmljZUNvbm5lY3RvcnMuXG4gICAgICogQG1lbWJlciBCb3RGcmFtZXdvcmtDb25maWcuZnJvbUF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gYXV0aG9yaXphdGlvblRva2VuIFRoZSBhdXRob3JpemF0aW9uIHRva2VuIGFzc29jaWF0ZWQgd2l0aCB0aGUgYm90XG4gICAgICogQHBhcmFtIHJlZ2lvbiBUaGUgcmVnaW9uIG5hbWUgKHNlZSB0aGUgPGEgaHJlZj1cImh0dHBzOi8vYWthLm1zL2Nzc3BlZWNoL3JlZ2lvblwiPnJlZ2lvbiBwYWdlPC9hPikuXG4gICAgICogQHBhcmFtIGJvdElkIE9wdGlvbmFsLiBJZGVudGlmaWVyIGZvciB1c2luZyBhIHNwZWNpZmljIGJvdCB3aXRoaW4gYW4gQXp1cmUgcmVzb3VyY2UgZ3JvdXAuIEVxdWl2YWxlbnQgdG8gdGhlXG4gICAgICogcmVzb3VyY2UgbmFtZS5cbiAgICAgKiBAcmV0dXJucyB7Qm90RnJhbWV3b3JrQ29uZmlnfSBBIG5ldyBib3QgZnJhbWV3b3JrIGNvbmZpZ3VyYXRpb24gaW5zdGFuY2UuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21BdXRob3JpemF0aW9uVG9rZW4oYXV0aG9yaXphdGlvblRva2VuLCByZWdpb24sIGJvdElkKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShhdXRob3JpemF0aW9uVG9rZW4sIFwiYXV0aG9yaXphdGlvblRva2VuXCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocmVnaW9uLCBcInJlZ2lvblwiKTtcbiAgICAgICAgY29uc3QgYm90RnJhbWV3b3JrQ29uZmlnID0gbmV3IERpYWxvZ1NlcnZpY2VDb25maWdJbXBsKCk7XG4gICAgICAgIGJvdEZyYW1ld29ya0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9EaWFsb2dUeXBlLCBEaWFsb2dTZXJ2aWNlQ29uZmlnLkRpYWxvZ1R5cGVzLkJvdEZyYW1ld29yayk7XG4gICAgICAgIGJvdEZyYW1ld29ya0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCBhdXRob3JpemF0aW9uVG9rZW4pO1xuICAgICAgICBib3RGcmFtZXdvcmtDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24sIHJlZ2lvbik7XG4gICAgICAgIGlmIChib3RJZCkge1xuICAgICAgICAgICAgYm90RnJhbWV3b3JrQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0FwcGxpY2F0aW9uSWQsIGJvdElkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYm90RnJhbWV3b3JrQ29uZmlnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGEgQm90RnJhbWV3b3JrQ29uZmlnLlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGludGVuZGVkIG9ubHkgZm9yIHVzZXJzIHdobyB1c2UgYSBub24tZGVmYXVsdCBzZXJ2aWNlIGhvc3QuIFRoZSBzdGFuZGFyZCByZXNvdXJjZSBwYXRoIHdpbGwgYmVcbiAgICAgKiBhc3N1bWVkLiBGb3Igc2VydmljZXMgd2l0aCBhIG5vbi1zdGFuZGFyZCByZXNvdXJjZSBwYXRoIG9yIG5vIHBhdGggYXQgYWxsLCB1c2UgZnJvbUVuZHBvaW50IGluc3RlYWQuXG4gICAgICogTm90ZTogUXVlcnkgcGFyYW1ldGVycyBhcmUgbm90IGFsbG93ZWQgaW4gdGhlIGhvc3QgVVJJIGFuZCBtdXN0IGJlIHNldCBieSBvdGhlciBBUElzLlxuICAgICAqIE5vdGU6IFRvIHVzZSBhbiBhdXRob3JpemF0aW9uIHRva2VuIHdpdGggZnJvbUhvc3QsIHVzZSBmcm9tSG9zdChVUkwpIGFuZCB0aGVuIHNldCB0aGUgQXV0aG9yaXphdGlvblRva2VuXG4gICAgICogcHJvcGVydHkgb24gdGhlIGNyZWF0ZWQgQm90RnJhbWV3b3JrQ29uZmlnIGluc3RhbmNlLlxuICAgICAqIE5vdGU6IEFkZGVkIGluIHZlcnNpb24gMS4xNS4wLlxuICAgICAqIEBtZW1iZXIgQm90RnJhbWV3b3JrQ29uZmlnLmZyb21Ib3N0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7VVJMIHwgc3RyaW5nfSBob3N0IC0gSWYgYSBVUkwgaXMgcHJvdmlkZWQsIHRoZSBmdWxseS1xdWFsaWZpZWQgaG9zdCB3aXRoIHByb3RvY29sIChlLmcuXG4gICAgICogd3NzOi8veW91ci5ob3N0LmNvbToxMjM0KSB3aWxsIGJlIHVzZWQuIElmIGEgc3RyaW5nIGlzIHByb3ZpZGVkLCBpdCB3aWxsIGJlIGVtYmVkZGVkIGluXG4gICAgICogd3NzOi8ve2hvc3R9LmNvbnZhaS5zcGVlY2guYXp1cmUudXMuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN1YnNjcmlwdGlvbktleSAtIFRoZSBzdWJzY3JpcHRpb24ga2V5LiBJZiBhIHN1YnNjcmlwdGlvbiBrZXkgaXMgbm90IHNwZWNpZmllZCwgYW4gYXV0aG9yaXphdGlvblxuICAgICAqIHRva2VuIG11c3QgYmUgc2V0LlxuICAgICAqIEBwYXJhbSBib3RJZCBPcHRpb25hbC4gSWRlbnRpZmllciBmb3IgdXNpbmcgYSBzcGVjaWZpYyBib3Qgd2l0aGluIGFuIEF6dXJlIHJlc291cmNlIGdyb3VwLiBFcXVpdmFsZW50IHRvIHRoZVxuICAgICAqIHJlc291cmNlIG5hbWUuXG4gICAgICogQHJldHVybnMge0JvdEZyYW1ld29ya0NvbmZpZ30gQSBuZXcgYm90IGZyYW1ld29yayBjb25maWd1cmF0aW9uIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tSG9zdChob3N0LCBzdWJzY3JpcHRpb25LZXksIGJvdElkKSB7XG4gICAgICAgIHZvaWQgYm90SWQ7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGhvc3QsIFwiaG9zdFwiKTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWRIb3N0ID0gaG9zdCBpbnN0YW5jZW9mIFVSTCA/IGhvc3QgOiBuZXcgVVJMKGB3c3M6Ly8ke2hvc3R9LmNvbnZhaS5zcGVlY2guYXp1cmUudXNgKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQocmVzb2x2ZWRIb3N0LCBcInJlc29sdmVkSG9zdFwiKTtcbiAgICAgICAgY29uc3QgYm90RnJhbWV3b3JrQ29uZmlnID0gbmV3IERpYWxvZ1NlcnZpY2VDb25maWdJbXBsKCk7XG4gICAgICAgIGJvdEZyYW1ld29ya0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9EaWFsb2dUeXBlLCBEaWFsb2dTZXJ2aWNlQ29uZmlnLkRpYWxvZ1R5cGVzLkJvdEZyYW1ld29yayk7XG4gICAgICAgIGJvdEZyYW1ld29ya0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0hvc3QsIHJlc29sdmVkSG9zdC50b1N0cmluZygpKTtcbiAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gc3Vic2NyaXB0aW9uS2V5KSB7XG4gICAgICAgICAgICBib3RGcmFtZXdvcmtDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXksIHN1YnNjcmlwdGlvbktleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJvdEZyYW1ld29ya0NvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBhIEJvdEZyYW1ld29ya0NvbmZpZy5cbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBvbmx5IGZvciB1c2VycyB3aG8gdXNlIGEgbm9uLXN0YW5kYXJkIHNlcnZpY2UgZW5kcG9pbnQgb3IgcGFyYW1ldGVycy5cbiAgICAgKiBOb3RlOiBUaGUgcXVlcnkgcGFyYW1ldGVycyBzcGVjaWZpZWQgaW4gdGhlIGVuZHBvaW50IFVSTCBhcmUgbm90IGNoYW5nZWQsIGV2ZW4gaWYgdGhleSBhcmUgc2V0IGJ5IGFueSBvdGhlciBBUElzLlxuICAgICAqIE5vdGU6IFRvIHVzZSBhdXRob3JpemF0aW9uIHRva2VuIHdpdGggZnJvbUVuZHBvaW50LCBwYXNzIGFuIGVtcHR5IHN0cmluZyB0byB0aGUgc3Vic2NyaXB0aW9uS2V5IGluIHRoZVxuICAgICAqIGZyb21FbmRwb2ludCBtZXRob2QsIGFuZCB0aGVuIHNldCBhdXRob3JpemF0aW9uVG9rZW49XCJ0b2tlblwiIG9uIHRoZSBjcmVhdGVkIEJvdEZyYW1ld29ya0NvbmZpZyBpbnN0YW5jZSB0b1xuICAgICAqIHVzZSB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKiBOb3RlOiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTUuMC5cbiAgICAgKiBAbWVtYmVyIEJvdEZyYW1ld29ya0NvbmZpZy5mcm9tRW5kcG9pbnRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtVUkx9IGVuZHBvaW50IC0gVGhlIHNlcnZpY2UgZW5kcG9pbnQgdG8gY29ubmVjdCB0by5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3Vic2NyaXB0aW9uS2V5IC0gVGhlIHN1YnNjcmlwdGlvbiBrZXkuIElmIGEgc3Vic2NyaXB0aW9uIGtleSBpcyBub3Qgc3BlY2lmaWVkLCBhbiBhdXRob3JpemF0aW9uXG4gICAgICogdG9rZW4gbXVzdCBiZSBzZXQuXG4gICAgICogQHJldHVybnMge0JvdEZyYW1ld29ya0NvbmZpZ30gLSBBIG5ldyBib3QgZnJhbWV3b3JrIGNvbmZpZ3VyYXRpb24gaW5zdGFuY2UgdXNpbmcgdGhlIHByb3ZpZGVkIGVuZHBvaW50LlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tRW5kcG9pbnQoZW5kcG9pbnQsIHN1YnNjcmlwdGlvbktleSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwoZW5kcG9pbnQsIFwiZW5kcG9pbnRcIik7XG4gICAgICAgIGNvbnN0IGJvdEZyYW1ld29ya0NvbmZpZyA9IG5ldyBEaWFsb2dTZXJ2aWNlQ29uZmlnSW1wbCgpO1xuICAgICAgICBib3RGcmFtZXdvcmtDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25fRGlhbG9nVHlwZSwgRGlhbG9nU2VydmljZUNvbmZpZy5EaWFsb2dUeXBlcy5Cb3RGcmFtZXdvcmspO1xuICAgICAgICBib3RGcmFtZXdvcmtDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCwgZW5kcG9pbnQudG9TdHJpbmcoKSk7XG4gICAgICAgIGlmICh1bmRlZmluZWQgIT09IHN1YnNjcmlwdGlvbktleSkge1xuICAgICAgICAgICAgYm90RnJhbWV3b3JrQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5LCBzdWJzY3JpcHRpb25LZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBib3RGcmFtZXdvcmtDb25maWc7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Cb3RGcmFtZXdvcmtDb25maWcuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENhbmNlbGxhdGlvbkVycm9yQ29kZVByb3BlcnR5TmFtZSwgRW51bVRyYW5zbGF0aW9uLCBTaW1wbGVTcGVlY2hQaHJhc2UgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25EZXRhaWxzQmFzZSB9IGZyb20gXCIuL0NhbmNlbGxhdGlvbkRldGFpbHNCYXNlXCI7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25FcnJvckNvZGUsIENhbmNlbGxhdGlvblJlYXNvbiwgUmVjb2duaXRpb25SZXN1bHQgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIENvbnRhaW5zIGRldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IHdoeSBhIHJlc3VsdCB3YXMgY2FuY2VsZWQuXG4gKiBAY2xhc3MgQ2FuY2VsbGF0aW9uRGV0YWlsc1xuICovXG5leHBvcnQgY2xhc3MgQ2FuY2VsbGF0aW9uRGV0YWlscyBleHRlbmRzIENhbmNlbGxhdGlvbkRldGFpbHNCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihyZWFzb24sIGVycm9yRGV0YWlscywgZXJyb3JDb2RlKSB7XG4gICAgICAgIHN1cGVyKHJlYXNvbiwgZXJyb3JEZXRhaWxzLCBlcnJvckNvZGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIENhbmNlbGxhdGlvbkRldGFpbHMgb2JqZWN0IGZvciB0aGUgY2FuY2VsZWQgUmVjb2duaXRpb25SZXN1bHQuXG4gICAgICogQG1lbWJlciBDYW5jZWxsYXRpb25EZXRhaWxzLmZyb21SZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtSZWNvZ25pdGlvblJlc3VsdCB8IFNwZWVjaFN5bnRoZXNpc1Jlc3VsdH0gcmVzdWx0IC0gVGhlIHJlc3VsdCB0aGF0IHdhcyBjYW5jZWxlZC5cbiAgICAgKiBAcmV0dXJucyB7Q2FuY2VsbGF0aW9uRGV0YWlsc30gVGhlIGNhbmNlbGxhdGlvbiBkZXRhaWxzIG9iamVjdCBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tUmVzdWx0KHJlc3VsdCkge1xuICAgICAgICBsZXQgcmVhc29uID0gQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yO1xuICAgICAgICBsZXQgZXJyb3JDb2RlID0gQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLk5vRXJyb3I7XG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBSZWNvZ25pdGlvblJlc3VsdCAmJiAhIXJlc3VsdC5qc29uKSB7XG4gICAgICAgICAgICBjb25zdCBzaW1wbGVTcGVlY2ggPSBTaW1wbGVTcGVlY2hQaHJhc2UuZnJvbUpTT04ocmVzdWx0Lmpzb24pO1xuICAgICAgICAgICAgcmVhc29uID0gRW51bVRyYW5zbGF0aW9uLmltcGxUcmFuc2xhdGVDYW5jZWxSZXN1bHQoc2ltcGxlU3BlZWNoLlJlY29nbml0aW9uU3RhdHVzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISFyZXN1bHQucHJvcGVydGllcykge1xuICAgICAgICAgICAgZXJyb3JDb2RlID0gQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW3Jlc3VsdC5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KENhbmNlbGxhdGlvbkVycm9yQ29kZVByb3BlcnR5TmFtZSwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZS5Ob0Vycm9yXSldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQ2FuY2VsbGF0aW9uRGV0YWlscyhyZWFzb24sIHJlc3VsdC5lcnJvckRldGFpbHMgfHwgRW51bVRyYW5zbGF0aW9uLmltcGxUcmFuc2xhdGVFcnJvckRldGFpbHMoZXJyb3JDb2RlKSwgZXJyb3JDb2RlKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNhbmNlbGxhdGlvbkRldGFpbHMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogQ29udGFpbnMgZGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgd2h5IGEgcmVzdWx0IHdhcyBjYW5jZWxlZC5cbiAqIEBjbGFzcyBDYW5jZWxsYXRpb25EZXRhaWxzQmFzZVxuICovXG5leHBvcnQgY2xhc3MgQ2FuY2VsbGF0aW9uRGV0YWlsc0Jhc2Uge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtDYW5jZWxsYXRpb25SZWFzb259IHJlYXNvbiAtIFRoZSBjYW5jZWxsYXRpb24gcmVhc29uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvckRldGFpbHMgLSBUaGUgZXJyb3IgZGV0YWlscywgaWYgcHJvdmlkZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVhc29uLCBlcnJvckRldGFpbHMsIGVycm9yQ29kZSkge1xuICAgICAgICB0aGlzLnByaXZSZWFzb24gPSByZWFzb247XG4gICAgICAgIHRoaXMucHJpdkVycm9yRGV0YWlscyA9IGVycm9yRGV0YWlscztcbiAgICAgICAgdGhpcy5wcml2RXJyb3JDb2RlID0gZXJyb3JDb2RlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcmVhc29uIHRoZSByZWNvZ25pdGlvbiB3YXMgY2FuY2VsZWQuXG4gICAgICogQG1lbWJlciBDYW5jZWxsYXRpb25EZXRhaWxzQmFzZS5wcm90b3R5cGUucmVhc29uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtDYW5jZWxsYXRpb25SZWFzb259IFNwZWNpZmllcyB0aGUgcmVhc29uIGNhbmNlbGVkLlxuICAgICAqL1xuICAgIGdldCByZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluIGNhc2Ugb2YgYW4gdW5zdWNjZXNzZnVsIHJlY29nbml0aW9uLCBwcm92aWRlcyBkZXRhaWxzIG9mIHRoZSBvY2N1cnJlZCBlcnJvci5cbiAgICAgKiBAbWVtYmVyIENhbmNlbGxhdGlvbkRldGFpbHNCYXNlLnByb3RvdHlwZS5lcnJvckRldGFpbHNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBlcnJvciBkZXRhaWxzLlxuICAgICAqL1xuICAgIGdldCBlcnJvckRldGFpbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckRldGFpbHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBlcnJvciBjb2RlIGluIGNhc2Ugb2YgYW4gdW5zdWNjZXNzZnVsIHJlY29nbml0aW9uLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xLjAuXG4gICAgICogQHJldHVybiBBbiBlcnJvciBjb2RlIHRoYXQgcmVwcmVzZW50cyB0aGUgZXJyb3IgcmVhc29uLlxuICAgICAqL1xuICAgIGdldCBFcnJvckNvZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckNvZGU7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1DYW5jZWxsYXRpb25EZXRhaWxzQmFzZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBEZWZpbmVzIGVycm9yIGNvZGUgaW4gY2FzZSB0aGF0IENhbmNlbGxhdGlvblJlYXNvbiBpcyBFcnJvci5cbiAqIEFkZGVkIGluIHZlcnNpb24gMS4xLjAuXG4gKi9cbmV4cG9ydCB2YXIgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlO1xuKGZ1bmN0aW9uIChDYW5jZWxsYXRpb25FcnJvckNvZGUpIHtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCBubyBlcnJvciBvY2N1cnJlZCBkdXJpbmcgc3BlZWNoIHJlY29nbml0aW9uLlxuICAgICAqL1xuICAgIENhbmNlbGxhdGlvbkVycm9yQ29kZVtDYW5jZWxsYXRpb25FcnJvckNvZGVbXCJOb0Vycm9yXCJdID0gMF0gPSBcIk5vRXJyb3JcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgYW4gYXV0aGVudGljYXRpb24gZXJyb3IuXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZVtcIkF1dGhlbnRpY2F0aW9uRmFpbHVyZVwiXSA9IDFdID0gXCJBdXRoZW50aWNhdGlvbkZhaWx1cmVcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCBvbmUgb3IgbW9yZSByZWNvZ25pdGlvbiBwYXJhbWV0ZXJzIGFyZSBpbnZhbGlkLlxuICAgICAqL1xuICAgIENhbmNlbGxhdGlvbkVycm9yQ29kZVtDYW5jZWxsYXRpb25FcnJvckNvZGVbXCJCYWRSZXF1ZXN0UGFyYW1ldGVyc1wiXSA9IDJdID0gXCJCYWRSZXF1ZXN0UGFyYW1ldGVyc1wiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBudW1iZXIgb2YgcGFyYWxsZWwgcmVxdWVzdHMgZXhjZWVkZWQgdGhlIG51bWJlciBvZiBhbGxvd2VkXG4gICAgICogY29uY3VycmVudCB0cmFuc2NyaXB0aW9ucyBmb3IgdGhlIHN1YnNjcmlwdGlvbi5cbiAgICAgKi9cbiAgICBDYW5jZWxsYXRpb25FcnJvckNvZGVbQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW1wiVG9vTWFueVJlcXVlc3RzXCJdID0gM10gPSBcIlRvb01hbnlSZXF1ZXN0c1wiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyBhIGNvbm5lY3Rpb24gZXJyb3IuXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZVtcIkNvbm5lY3Rpb25GYWlsdXJlXCJdID0gNF0gPSBcIkNvbm5lY3Rpb25GYWlsdXJlXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGEgdGltZS1vdXQgZXJyb3Igd2hlbiB3YWl0aW5nIGZvciByZXNwb25zZSBmcm9tIHNlcnZpY2UuXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZVtcIlNlcnZpY2VUaW1lb3V0XCJdID0gNV0gPSBcIlNlcnZpY2VUaW1lb3V0XCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoYXQgYW4gZXJyb3IgaXMgcmV0dXJuZWQgYnkgdGhlIHNlcnZpY2UuXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZVtcIlNlcnZpY2VFcnJvclwiXSA9IDZdID0gXCJTZXJ2aWNlRXJyb3JcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgYW4gdW5leHBlY3RlZCBydW50aW1lIGVycm9yLlxuICAgICAqL1xuICAgIENhbmNlbGxhdGlvbkVycm9yQ29kZVtDYW5jZWxsYXRpb25FcnJvckNvZGVbXCJSdW50aW1lRXJyb3JcIl0gPSA3XSA9IFwiUnVudGltZUVycm9yXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGFuIHF1b3RhIG92ZXJydW4gb24gZXhpc3Rpbmcga2V5LlxuICAgICAqL1xuICAgIENhbmNlbGxhdGlvbkVycm9yQ29kZVtDYW5jZWxsYXRpb25FcnJvckNvZGVbXCJGb3JiaWRkZW5cIl0gPSA4XSA9IFwiRm9yYmlkZGVuXCI7XG59KShDYW5jZWxsYXRpb25FcnJvckNvZGUgfHwgKENhbmNlbGxhdGlvbkVycm9yQ29kZSA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNhbmNlbGxhdGlvbkVycm9yQ29kZXMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFJlY29nbml0aW9uRXZlbnRBcmdzIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBEZWZpbmVzIGNvbnRlbnQgb2YgYSBDYW5jZWxsYXRpb25FdmVudC5cbiAqIEBjbGFzcyBDYW5jZWxsYXRpb25FdmVudEFyZ3NCYXNlXG4gKi9cbmV4cG9ydCBjbGFzcyBDYW5jZWxsYXRpb25FdmVudEFyZ3NCYXNlIGV4dGVuZHMgUmVjb2duaXRpb25FdmVudEFyZ3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtDYW5jZWxsYXRpb25SZWFzb259IHJlYXNvbiAtIFRoZSBjYW5jZWxsYXRpb24gcmVhc29uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvckRldGFpbHMgLSBFcnJvciBkZXRhaWxzLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2Vzc2lvbklkIC0gVGhlIHNlc3Npb24gaWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVhc29uLCBlcnJvckRldGFpbHMsIGVycm9yQ29kZSwgb2Zmc2V0LCBzZXNzaW9uSWQpIHtcbiAgICAgICAgc3VwZXIob2Zmc2V0LCBzZXNzaW9uSWQpO1xuICAgICAgICB0aGlzLnByaXZSZWFzb24gPSByZWFzb247XG4gICAgICAgIHRoaXMucHJpdkVycm9yRGV0YWlscyA9IGVycm9yRGV0YWlscztcbiAgICAgICAgdGhpcy5wcml2RXJyb3JDb2RlID0gZXJyb3JDb2RlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcmVhc29uIHRoZSByZWNvZ25pdGlvbiB3YXMgY2FuY2VsZWQuXG4gICAgICogQG1lbWJlciBDYW5jZWxsYXRpb25FdmVudEFyZ3NCYXNlLnByb3RvdHlwZS5yZWFzb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge0NhbmNlbGxhdGlvblJlYXNvbn0gU3BlY2lmaWVzIHRoZSByZWFzb24gY2FuY2VsZWQuXG4gICAgICovXG4gICAgZ2V0IHJlYXNvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlYXNvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGVycm9yIGNvZGUgaW4gY2FzZSBvZiBhbiB1bnN1Y2Nlc3NmdWwgb3BlcmF0aW9uLlxuICAgICAqIEByZXR1cm4gQW4gZXJyb3IgY29kZSB0aGF0IHJlcHJlc2VudHMgdGhlIGVycm9yIHJlYXNvbi5cbiAgICAgKi9cbiAgICBnZXQgZXJyb3JDb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3JDb2RlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbiBjYXNlIG9mIGFuIHVuc3VjY2Vzc2Z1bCBvcGVyYXRpb24sIHByb3ZpZGVzIGRldGFpbHMgb2YgdGhlIG9jY3VycmVkIGVycm9yLlxuICAgICAqIEBtZW1iZXIgQ2FuY2VsbGF0aW9uRXZlbnRBcmdzQmFzZS5wcm90b3R5cGUuZXJyb3JEZXRhaWxzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEEgU3RyaW5nIHRoYXQgcmVwcmVzZW50cyB0aGUgZXJyb3IgZGV0YWlscy5cbiAgICAgKi9cbiAgICBnZXQgZXJyb3JEZXRhaWxzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3JEZXRhaWxzO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2FuY2VsbGF0aW9uRXZlbnRBcmdzQmFzZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBEZWZpbmVzIHRoZSBwb3NzaWJsZSByZWFzb25zIGEgcmVjb2duaXRpb24gcmVzdWx0IG1pZ2h0IGJlIGNhbmNlbGVkLlxuICogQGNsYXNzIENhbmNlbGxhdGlvblJlYXNvblxuICovXG5leHBvcnQgdmFyIENhbmNlbGxhdGlvblJlYXNvbjtcbihmdW5jdGlvbiAoQ2FuY2VsbGF0aW9uUmVhc29uKSB7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoYXQgYW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHNwZWVjaCByZWNvZ25pdGlvbi5cbiAgICAgKiBAbWVtYmVyIENhbmNlbGxhdGlvblJlYXNvbi5FcnJvclxuICAgICAqL1xuICAgIENhbmNlbGxhdGlvblJlYXNvbltDYW5jZWxsYXRpb25SZWFzb25bXCJFcnJvclwiXSA9IDBdID0gXCJFcnJvclwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBlbmQgb2YgdGhlIGF1ZGlvIHN0cmVhbSB3YXMgcmVhY2hlZC5cbiAgICAgKiBAbWVtYmVyIENhbmNlbGxhdGlvblJlYXNvbi5FbmRPZlN0cmVhbVxuICAgICAqL1xuICAgIENhbmNlbGxhdGlvblJlYXNvbltDYW5jZWxsYXRpb25SZWFzb25bXCJFbmRPZlN0cmVhbVwiXSA9IDFdID0gXCJFbmRPZlN0cmVhbVwiO1xufSkoQ2FuY2VsbGF0aW9uUmVhc29uIHx8IChDYW5jZWxsYXRpb25SZWFzb24gPSB7fSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1DYW5jZWxsYXRpb25SZWFzb24uanMubWFwXG4iLCIvL1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuIFNlZSBMSUNFTlNFLm1kIGZpbGUgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgZnVsbCBsaWNlbnNlIGluZm9ybWF0aW9uLlxuLy9cbmltcG9ydCB7IFNlcnZpY2VSZWNvZ25pemVyQmFzZSwgU3ludGhlc2lzQWRhcHRlckJhc2UsIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcywgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb25NZXNzYWdlSW1wbCB9IGZyb20gXCIuL0Nvbm5lY3Rpb25NZXNzYWdlXCI7XG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb25FdmVudEFyZ3MsIENvbm5lY3Rpb25NZXNzYWdlRXZlbnRBcmdzLCBTZXJ2aWNlRXZlbnRBcmdzLCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogQ29ubmVjdGlvbiBpcyBhIHByb3h5IGNsYXNzIGZvciBtYW5hZ2luZyBjb25uZWN0aW9uIHRvIHRoZSBzcGVlY2ggc2VydmljZSBvZiB0aGUgc3BlY2lmaWVkIFJlY29nbml6ZXIuXG4gKiBCeSBkZWZhdWx0LCBhIFJlY29nbml6ZXIgYXV0b25vbW91c2x5IG1hbmFnZXMgY29ubmVjdGlvbiB0byBzZXJ2aWNlIHdoZW4gbmVlZGVkLlxuICogVGhlIENvbm5lY3Rpb24gY2xhc3MgcHJvdmlkZXMgYWRkaXRpb25hbCBtZXRob2RzIGZvciB1c2VycyB0byBleHBsaWNpdGx5IG9wZW4gb3IgY2xvc2UgYSBjb25uZWN0aW9uIGFuZFxuICogdG8gc3Vic2NyaWJlIHRvIGNvbm5lY3Rpb24gc3RhdHVzIGNoYW5nZXMuXG4gKiBUaGUgdXNlIG9mIENvbm5lY3Rpb24gaXMgb3B0aW9uYWwsIGFuZCBtYWlubHkgZm9yIHNjZW5hcmlvcyB3aGVyZSBmaW5lIHR1bmluZyBvZiBhcHBsaWNhdGlvblxuICogYmVoYXZpb3IgYmFzZWQgb24gY29ubmVjdGlvbiBzdGF0dXMgaXMgbmVlZGVkLiBVc2VycyBjYW4gb3B0aW9uYWxseSBjYWxsIE9wZW4oKSB0byBtYW51YWxseSBzZXQgdXAgYSBjb25uZWN0aW9uXG4gKiBpbiBhZHZhbmNlIGJlZm9yZSBzdGFydGluZyByZWNvZ25pdGlvbiBvbiB0aGUgUmVjb2duaXplciBhc3NvY2lhdGVkIHdpdGggdGhpcyBDb25uZWN0aW9uLlxuICogSWYgdGhlIFJlY29nbml6ZXIgbmVlZHMgdG8gY29ubmVjdCBvciBkaXNjb25uZWN0IHRvIHNlcnZpY2UsIGl0IHdpbGxcbiAqIHNldHVwIG9yIHNodXRkb3duIHRoZSBjb25uZWN0aW9uIGluZGVwZW5kZW50bHkuIEluIHRoaXMgY2FzZSB0aGUgQ29ubmVjdGlvbiB3aWxsIGJlIG5vdGlmaWVkIGJ5IGNoYW5nZSBvZiBjb25uZWN0aW9uXG4gKiBzdGF0dXMgdmlhIENvbm5lY3RlZC9EaXNjb25uZWN0ZWQgZXZlbnRzLlxuICogQWRkZWQgaW4gdmVyc2lvbiAxLjIuMS5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb24ge1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIENvbm5lY3Rpb24gaW5zdGFuY2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHJlY29nbml6ZXIgVGhlIHJlY29nbml6ZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBjb25uZWN0aW9uLlxuICAgICAqIEByZXR1cm4gVGhlIENvbm5lY3Rpb24gaW5zdGFuY2Ugb2YgdGhlIHJlY29nbml6ZXIuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21SZWNvZ25pemVyKHJlY29nbml6ZXIpIHtcbiAgICAgICAgY29uc3QgcmVjb0Jhc2UgPSByZWNvZ25pemVyLmludGVybmFsRGF0YTtcbiAgICAgICAgY29uc3QgcmV0ID0gbmV3IENvbm5lY3Rpb24oKTtcbiAgICAgICAgcmV0LnByaXZJbnRlcm5hbERhdGEgPSByZWNvQmFzZTtcbiAgICAgICAgcmV0LnNldHVwRXZlbnRzKCk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIENvbm5lY3Rpb24gaW5zdGFuY2UgZnJvbSB0aGUgc3BlY2lmaWVkIHN5bnRoZXNpemVyLlxuICAgICAqIEBwYXJhbSBzeW50aGVzaXplciBUaGUgc3ludGhlc2l6ZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBjb25uZWN0aW9uLlxuICAgICAqIEByZXR1cm4gVGhlIENvbm5lY3Rpb24gaW5zdGFuY2Ugb2YgdGhlIHN5bnRoZXNpemVyLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tU3ludGhlc2l6ZXIoc3ludGhlc2l6ZXIpIHtcbiAgICAgICAgY29uc3Qgc3ludGhCYXNlID0gc3ludGhlc2l6ZXIuaW50ZXJuYWxEYXRhO1xuICAgICAgICBjb25zdCByZXQgPSBuZXcgQ29ubmVjdGlvbigpO1xuICAgICAgICByZXQucHJpdkludGVybmFsRGF0YSA9IHN5bnRoQmFzZTtcbiAgICAgICAgcmV0LnNldHVwRXZlbnRzKCk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0byBzZXQgdXAgY29ubmVjdGlvbiB0byB0aGUgc2VydmljZS5cbiAgICAgKiBVc2VycyBjYW4gb3B0aW9uYWxseSBjYWxsIG9wZW5Db25uZWN0aW9uKCkgdG8gbWFudWFsbHkgc2V0IHVwIGEgY29ubmVjdGlvbiBpbiBhZHZhbmNlIGJlZm9yZSBzdGFydGluZyByZWNvZ25pdGlvbiBvbiB0aGVcbiAgICAgKiBSZWNvZ25pemVyIGFzc29jaWF0ZWQgd2l0aCB0aGlzIENvbm5lY3Rpb24uIEFmdGVyIHN0YXJ0aW5nIHJlY29nbml0aW9uLCBjYWxsaW5nIE9wZW4oKSB3aWxsIGhhdmUgbm8gZWZmZWN0XG4gICAgICpcbiAgICAgKiBOb3RlOiBPbiByZXR1cm4sIHRoZSBjb25uZWN0aW9uIG1pZ2h0IG5vdCBiZSByZWFkeSB5ZXQuIFBsZWFzZSBzdWJzY3JpYmUgdG8gdGhlIENvbm5lY3RlZCBldmVudCB0b1xuICAgICAqIGJlIG5vdGlmaWVkIHdoZW4gdGhlIGNvbm5lY3Rpb24gaXMgZXN0YWJsaXNoZWQuXG4gICAgICovXG4gICAgb3BlbkNvbm5lY3Rpb24oY2IsIGVycikge1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMucHJpdkludGVybmFsRGF0YS5jb25uZWN0KCksIGNiLCBlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgdGhlIGNvbm5lY3Rpb24gdGhlIHNlcnZpY2UuXG4gICAgICogVXNlcnMgY2FuIG9wdGlvbmFsbHkgY2FsbCBjbG9zZUNvbm5lY3Rpb24oKSB0byBtYW51YWxseSBzaHV0ZG93biB0aGUgY29ubmVjdGlvbiBvZiB0aGUgYXNzb2NpYXRlZCBSZWNvZ25pemVyLlxuICAgICAqXG4gICAgICogSWYgY2xvc2VDb25uZWN0aW9uKCkgaXMgY2FsbGVkIGR1cmluZyByZWNvZ25pdGlvbiwgcmVjb2duaXRpb24gd2lsbCBmYWlsIGFuZCBjYW5jZWwgd2l0aCBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBjbG9zZUNvbm5lY3Rpb24oY2IsIGVycikge1xuICAgICAgICBpZiAodGhpcy5wcml2SW50ZXJuYWxEYXRhIGluc3RhbmNlb2YgU3ludGhlc2lzQWRhcHRlckJhc2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRpc2Nvbm5lY3RpbmcgYSBzeW50aGVzaXplcidzIGNvbm5lY3Rpb24gaXMgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMucHJpdkludGVybmFsRGF0YS5kaXNjb25uZWN0KCksIGNiLCBlcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGVuZHMgYSBwYXJhbWV0ZXIgaW4gYSBtZXNzYWdlIHRvIHNlcnZpY2UuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjEyLjEuXG4gICAgICogQHBhcmFtIHBhdGggVGhlIHBhdGggb2YgdGhlIG5ldHdvcmsgbWVzc2FnZS5cbiAgICAgKiBAcGFyYW0gcHJvcGVydHlOYW1lIE5hbWUgb2YgdGhlIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHByb3BlcnR5VmFsdWUgVmFsdWUgb2YgdGhlIHByb3BlcnR5LiBUaGlzIGlzIGEganNvbiBzdHJpbmcuXG4gICAgICovXG4gICAgc2V0TWVzc2FnZVByb3BlcnR5KHBhdGgsIHByb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocHJvcGVydHlOYW1lLCBcInByb3BlcnR5TmFtZVwiKTtcbiAgICAgICAgaWYgKHRoaXMucHJpdkludGVybmFsRGF0YSBpbnN0YW5jZW9mIFNlcnZpY2VSZWNvZ25pemVyQmFzZSkge1xuICAgICAgICAgICAgaWYgKHBhdGgudG9Mb3dlckNhc2UoKSAhPT0gXCJzcGVlY2guY29udGV4dFwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT25seSBzcGVlY2guY29udGV4dCBtZXNzYWdlIHByb3BlcnR5IHNldHMgYXJlIGN1cnJlbnRseSBzdXBwb3J0ZWQgZm9yIHJlY29nbml6ZXJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZJbnRlcm5hbERhdGEuc3BlZWNoQ29udGV4dC5zZXRTZWN0aW9uKHByb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5wcml2SW50ZXJuYWxEYXRhIGluc3RhbmNlb2YgU3ludGhlc2lzQWRhcHRlckJhc2UpIHtcbiAgICAgICAgICAgIGlmIChwYXRoLnRvTG93ZXJDYXNlKCkgIT09IFwic3ludGhlc2lzLmNvbnRleHRcIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9ubHkgc3ludGhlc2lzLmNvbnRleHQgbWVzc2FnZSBwcm9wZXJ0eSBzZXRzIGFyZSBjdXJyZW50bHkgc3VwcG9ydGVkIGZvciBzeW50aGVzaXplclwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkludGVybmFsRGF0YS5zeW50aGVzaXNDb250ZXh0LnNldFNlY3Rpb24ocHJvcGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBhIG1lc3NhZ2UgdG8gdGhlIHNwZWVjaCBzZXJ2aWNlLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xMy4wLlxuICAgICAqIEBwYXJhbSBwYXRoIFRoZSBXZWJTb2NrZXQgcGF0aCBvZiB0aGUgbWVzc2FnZVxuICAgICAqIEBwYXJhbSBwYXlsb2FkIFRoZSBwYXlsb2FkIG9mIHRoZSBtZXNzYWdlLiBUaGlzIGlzIGEganNvbiBzdHJpbmcgb3IgYSBBcnJheUJ1ZmZlci5cbiAgICAgKiBAcGFyYW0gc3VjY2VzcyBBIGNhbGxiYWNrIHRvIGluZGljYXRlIHN1Y2Nlc3MuXG4gICAgICogQHBhcmFtIGVycm9yIEEgY2FsbGJhY2sgdG8gaW5kaWNhdGUgYW4gZXJyb3IuXG4gICAgICovXG4gICAgc2VuZE1lc3NhZ2VBc3luYyhwYXRoLCBwYXlsb2FkLCBzdWNjZXNzLCBlcnJvcikge1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMucHJpdkludGVybmFsRGF0YS5zZW5kTmV0d29ya01lc3NhZ2UocGF0aCwgcGF5bG9hZCksIHN1Y2Nlc3MsIGVycm9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcG9zZSBvZiBhc3NvY2lhdGVkIHJlc291cmNlcy5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICB9XG4gICAgc2V0dXBFdmVudHMoKSB7XG4gICAgICAgIHRoaXMucHJpdkV2ZW50TGlzdGVuZXIgPSB0aGlzLnByaXZJbnRlcm5hbERhdGEuY29ubmVjdGlvbkV2ZW50cy5hdHRhY2goKGNvbm5lY3Rpb25FdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb25FdmVudC5uYW1lID09PSBcIkNvbm5lY3Rpb25Fc3RhYmxpc2hlZEV2ZW50XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3RlZChuZXcgQ29ubmVjdGlvbkV2ZW50QXJncyhjb25uZWN0aW9uRXZlbnQuY29ubmVjdGlvbklkKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29ubmVjdGlvbkV2ZW50Lm5hbWUgPT09IFwiQ29ubmVjdGlvbkNsb3NlZEV2ZW50XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLmRpc2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3RlZChuZXcgQ29ubmVjdGlvbkV2ZW50QXJncyhjb25uZWN0aW9uRXZlbnQuY29ubmVjdGlvbklkKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29ubmVjdGlvbkV2ZW50Lm5hbWUgPT09IFwiQ29ubmVjdGlvbk1lc3NhZ2VTZW50RXZlbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghIXRoaXMubWVzc2FnZVNlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlU2VudChuZXcgQ29ubmVjdGlvbk1lc3NhZ2VFdmVudEFyZ3MobmV3IENvbm5lY3Rpb25NZXNzYWdlSW1wbChjb25uZWN0aW9uRXZlbnQubWVzc2FnZSkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb25uZWN0aW9uRXZlbnQubmFtZSA9PT0gXCJDb25uZWN0aW9uTWVzc2FnZVJlY2VpdmVkRXZlbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghIXRoaXMubWVzc2FnZVJlY2VpdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZVJlY2VpdmVkKG5ldyBDb25uZWN0aW9uTWVzc2FnZUV2ZW50QXJncyhuZXcgQ29ubmVjdGlvbk1lc3NhZ2VJbXBsKGNvbm5lY3Rpb25FdmVudC5tZXNzYWdlKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHJpdlNlcnZpY2VFdmVudExpc3RlbmVyID0gdGhpcy5wcml2SW50ZXJuYWxEYXRhLnNlcnZpY2VFdmVudHMuYXR0YWNoKChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoISF0aGlzLnJlY2VpdmVkU2VydmljZU1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlY2VpdmVkU2VydmljZU1lc3NhZ2UobmV3IFNlcnZpY2VFdmVudEFyZ3MoZS5qc29uU3RyaW5nLCBlLm5hbWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db25uZWN0aW9uLmpzLm1hcFxuIiwiLy9cbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0LiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLiBTZWUgTElDRU5TRS5tZCBmaWxlIGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGZ1bGwgbGljZW5zZSBpbmZvcm1hdGlvbi5cbi8vXG5pbXBvcnQgeyBTZXNzaW9uRXZlbnRBcmdzIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBEZWZpbmVzIHBheWxvYWQgZm9yIGNvbm5lY3Rpb24gZXZlbnRzIGxpa2UgQ29ubmVjdGVkL0Rpc2Nvbm5lY3RlZC5cbiAqIEFkZGVkIGluIHZlcnNpb24gMS4yLjBcbiAqL1xuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb25FdmVudEFyZ3MgZXh0ZW5kcyBTZXNzaW9uRXZlbnRBcmdzIHtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29ubmVjdGlvbkV2ZW50QXJncy5qcy5tYXBcbiIsIi8vXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdC4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4gU2VlIExJQ0VOU0UubWQgZmlsZSBpbiB0aGUgcHJvamVjdCByb290IGZvciBmdWxsIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4vL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1jbGFzc2VzLXBlci1maWxlXG5pbXBvcnQgeyBIZWFkZXJOYW1lcyB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0hlYWRlck5hbWVzXCI7XG5pbXBvcnQgeyBNZXNzYWdlVHlwZSB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgUHJvcGVydHlDb2xsZWN0aW9uIH0gZnJvbSBcIi4vUHJvcGVydHlDb2xsZWN0aW9uXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUlkIH0gZnJvbSBcIi4vUHJvcGVydHlJZFwiO1xuLyoqXG4gKiBDb25uZWN0aW9uTWVzc2FnZSByZXByZXNlbnRzIGltcGxlbWVudGF0aW9uIHNwZWNpZmljIG1lc3NhZ2VzIHNlbnQgdG8gYW5kIHJlY2VpdmVkIGZyb21cbiAqIHRoZSBzcGVlY2ggc2VydmljZS4gVGhlc2UgbWVzc2FnZXMgYXJlIHByb3ZpZGVkIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMgYW5kIHNob3VsZCBub3RcbiAqIGJlIHVzZWQgZm9yIHByb2R1Y3Rpb24gdXNlIGNhc2VzIHdpdGggdGhlIEF6dXJlIENvZ25pdGl2ZSBTZXJ2aWNlcyBTcGVlY2ggU2VydmljZS5cbiAqIE1lc3NhZ2VzIHNlbnQgdG8gYW5kIHJlY2VpdmVkIGZyb20gdGhlIFNwZWVjaCBTZXJ2aWNlIGFyZSBzdWJqZWN0IHRvIGNoYW5nZSB3aXRob3V0XG4gKiBub3RpY2UuIFRoaXMgaW5jbHVkZXMgbWVzc2FnZSBjb250ZW50cywgaGVhZGVycywgcGF5bG9hZHMsIG9yZGVyaW5nLCBldGMuXG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTEuMC5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb25NZXNzYWdlIHtcbn1cbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uTWVzc2FnZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICBpZiAoISF0aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZS5oZWFkZXJzW0hlYWRlck5hbWVzLkNvbm5lY3Rpb25JZF0pIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hfU2Vzc2lvbklkLCB0aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZS5oZWFkZXJzW0hlYWRlck5hbWVzLkNvbm5lY3Rpb25JZF0pO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlLmhlYWRlcnMpLmZvckVhY2goKGhlYWRlcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShoZWFkZXIsIHRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlLmhlYWRlcnNbaGVhZGVyXSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbWVzc2FnZSBwYXRoLlxuICAgICAqL1xuICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2UuaGVhZGVyc1tPYmplY3Qua2V5cyh0aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZS5oZWFkZXJzKS5maW5kKChrZXkpID0+IGtleS50b0xvd2VyQ2FzZSgpID09PSBcInBhdGhcIi50b0xvd2VyQ2FzZSgpKV07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0byBzZWUgaWYgdGhlIENvbm5lY3Rpb25NZXNzYWdlIGlzIGEgdGV4dCBtZXNzYWdlLlxuICAgICAqIFNlZSBhbHNvIElzQmluYXJ5TWVzc2FnZSgpLlxuICAgICAqL1xuICAgIGdldCBpc1RleHRNZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2UubWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLlRleHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0byBzZWUgaWYgdGhlIENvbm5lY3Rpb25NZXNzYWdlIGlzIGEgYmluYXJ5IG1lc3NhZ2UuXG4gICAgICogU2VlIGFsc28gR2V0QmluYXJ5TWVzc2FnZSgpLlxuICAgICAqL1xuICAgIGdldCBpc0JpbmFyeU1lc3NhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZS5tZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuQmluYXJ5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB0ZXh0IG1lc3NhZ2UgcGF5bG9hZC4gVHlwaWNhbGx5IHRoZSB0ZXh0IG1lc3NhZ2UgY29udGVudC10eXBlIGlzXG4gICAgICogYXBwbGljYXRpb24vanNvbi4gVG8gZGV0ZXJtaW5lIG90aGVyIGNvbnRlbnQtdHlwZXMgdXNlXG4gICAgICogUHJvcGVydGllcy5HZXRQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiKS5cbiAgICAgKi9cbiAgICBnZXQgVGV4dE1lc3NhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgYmluYXJ5IG1lc3NhZ2UgcGF5bG9hZC5cbiAgICAgKi9cbiAgICBnZXQgYmluYXJ5TWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlLmJpbmFyeUJvZHk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMgZGVmaW5lZCBmb3IgdGhpcyA8c2VlIGNyZWY9XCJDb25uZWN0aW9uTWVzc2FnZVwiLz4uXG4gICAgICogTWVzc2FnZSBoZWFkZXJzIGNhbiBiZSBhY2Nlc3NlZCB2aWEgdGhpcyBjb2xsZWN0aW9uIChlLmcuIFwiQ29udGVudC1UeXBlXCIpLlxuICAgICAqL1xuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIGNvbm5lY3Rpb24gbWVzc2FnZS5cbiAgICAgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db25uZWN0aW9uTWVzc2FnZS5qcy5tYXBcbiIsIi8vXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdC4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4gU2VlIExJQ0VOU0UubWQgZmlsZSBpbiB0aGUgcHJvamVjdCByb290IGZvciBmdWxsIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4vL1xuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb25NZXNzYWdlRXZlbnRBcmdzIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlID0gbWVzc2FnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgPHNlZSBjcmVmPVwiQ29ubmVjdGlvbk1lc3NhZ2VcIi8+IGFzc29jaWF0ZWQgd2l0aCB0aGlzIDxzZWUgY3JlZj1cIkNvbm5lY3Rpb25NZXNzYWdlRXZlbnRBcmdzXCIvPi5cbiAgICAgKi9cbiAgICBnZXQgbWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHRoYXQgcmVwcmVzZW50cyB0aGUgY29ubmVjdGlvbiBtZXNzYWdlIGV2ZW50LlxuICAgICAqL1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJNZXNzYWdlOiBcIiArIHRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlLnRvU3RyaW5nKCk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db25uZWN0aW9uTWVzc2FnZUV2ZW50QXJncy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBAY2xhc3MgQ29udHJhY3RzXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY2xhc3MgQ29udHJhY3RzIHtcbiAgICBzdGF0aWMgdGhyb3dJZk51bGxPclVuZGVmaW5lZChwYXJhbSwgbmFtZSkge1xuICAgICAgICBpZiAocGFyYW0gPT09IHVuZGVmaW5lZCB8fCBwYXJhbSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGhyb3dJZk51bGxPclVuZGVmaW5lZDpcIiArIG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyB0aHJvd0lmTnVsbChwYXJhbSwgbmFtZSkge1xuICAgICAgICBpZiAocGFyYW0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRocm93SWZOdWxsOlwiICsgbmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHBhcmFtLCBuYW1lKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHBhcmFtLCBuYW1lKTtcbiAgICAgICAgaWYgKChcIlwiICsgcGFyYW0pLnRyaW0oKS5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0aHJvd0lmTnVsbE9yV2hpdGVzcGFjZTpcIiArIG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyB0aHJvd0lmRGlzcG9zZWQoaXNEaXNwb3NlZCkge1xuICAgICAgICBpZiAoaXNEaXNwb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGhlIG9iamVjdCBpcyBhbHJlYWR5IGRpc3Bvc2VkXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyB0aHJvd0lmQXJyYXlFbXB0eU9yV2hpdGVzcGFjZShhcnJheSwgbmFtZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChhcnJheSwgbmFtZSk7XG4gICAgICAgIGlmIChhcnJheS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRocm93SWZBcnJheUVtcHR5T3JXaGl0ZXNwYWNlOlwiICsgbmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFycmF5KSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UoaXRlbSwgbmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHRocm93SWZGaWxlRG9lc05vdEV4aXN0KHBhcmFtLCBuYW1lKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShwYXJhbSwgbmFtZSk7XG4gICAgICAgIC8vIFRPRE8gY2hlY2sgZm9yIGZpbGUgZXhpc3RlbmNlLlxuICAgIH1cbiAgICBzdGF0aWMgdGhyb3dJZk5vdFVuZGVmaW5lZChwYXJhbSwgbmFtZSkge1xuICAgICAgICBpZiAocGFyYW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGhyb3dJZk5vdFVuZGVmaW5lZDpcIiArIG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db250cmFjdHMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENhbmNlbGxhdGlvbkV2ZW50QXJnc0Jhc2UsIH0gZnJvbSBcIi4vQ2FuY2VsbGF0aW9uRXZlbnRBcmdzQmFzZVwiO1xuLyoqXG4gKiBEZWZpbmVzIGNvbnRlbnQgb2YgYSBSZWNvZ25pdGlvbkVycm9yRXZlbnQuXG4gKiBAY2xhc3MgQ29udmVyc2F0aW9uVHJhbnNjcmlwdGlvbkNhbmNlbGVkRXZlbnRBcmdzXG4gKi9cbmV4cG9ydCBjbGFzcyBDb252ZXJzYXRpb25UcmFuc2NyaXB0aW9uQ2FuY2VsZWRFdmVudEFyZ3MgZXh0ZW5kcyBDYW5jZWxsYXRpb25FdmVudEFyZ3NCYXNlIHtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29udmVyc2F0aW9uVHJhbnNjcmlwdGlvbkNhbmNlbGVkRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IERpYWxvZ1NlcnZpY2VDb25maWcsIERpYWxvZ1NlcnZpY2VDb25maWdJbXBsIH0gZnJvbSBcIi4vRGlhbG9nU2VydmljZUNvbmZpZ1wiO1xuaW1wb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogQ2xhc3MgdGhhdCBkZWZpbmVzIGNvbmZpZ3VyYXRpb25zIGZvciB0aGUgZGlhbG9nIHNlcnZpY2UgY29ubmVjdG9yIG9iamVjdCBmb3IgdXNpbmcgYSBDdXN0b21Db21tYW5kcyBiYWNrZW5kLlxuICogQGNsYXNzIEN1c3RvbUNvbW1hbmRzQ29uZmlnXG4gKi9cbmV4cG9ydCBjbGFzcyBDdXN0b21Db21tYW5kc0NvbmZpZyBleHRlbmRzIERpYWxvZ1NlcnZpY2VDb25maWdJbXBsIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEN1c3RvbUNvbW1hbmRzQ29uZmlnLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBib3QgZnJhbWV3b3JrIGNvbmZpZyB3aXRoIHRoZSBzcGVjaWZpZWQgc3Vic2NyaXB0aW9uIGFuZCByZWdpb24uXG4gICAgICogQG1lbWJlciBDdXN0b21Db21tYW5kc0NvbmZpZy5mcm9tU3Vic2NyaXB0aW9uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBhcHBsaWNhdGlvbklkIFNwZWVjaCBDb21tYW5kcyBhcHBsaWNhdGlvbiBpZC5cbiAgICAgKiBAcGFyYW0gc3Vic2NyaXB0aW9uIFN1YnNjcmlwdGlvbiBrZXkgYXNzb2NpYXRlZCB3aXRoIHRoZSBib3RcbiAgICAgKiBAcGFyYW0gcmVnaW9uIFRoZSByZWdpb24gbmFtZSAoc2VlIHRoZSA8YSBocmVmPVwiaHR0cHM6Ly9ha2EubXMvY3NzcGVlY2gvcmVnaW9uXCI+cmVnaW9uIHBhZ2U8L2E+KS5cbiAgICAgKiBAcmV0dXJucyB7Q3VzdG9tQ29tbWFuZHNDb25maWd9IEEgbmV3IGJvdCBmcmFtZXdvcmsgY29uZmlnLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tU3Vic2NyaXB0aW9uKGFwcGxpY2F0aW9uSWQsIHN1YnNjcmlwdGlvbiwgcmVnaW9uKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShhcHBsaWNhdGlvbklkLCBcImFwcGxpY2F0aW9uSWRcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShzdWJzY3JpcHRpb24sIFwic3Vic2NyaXB0aW9uXCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocmVnaW9uLCBcInJlZ2lvblwiKTtcbiAgICAgICAgY29uc3QgY3VzdG9tQ29tbWFuZHNDb25maWcgPSBuZXcgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwoKTtcbiAgICAgICAgY3VzdG9tQ29tbWFuZHNDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25fRGlhbG9nVHlwZSwgRGlhbG9nU2VydmljZUNvbmZpZy5EaWFsb2dUeXBlcy5DdXN0b21Db21tYW5kcyk7XG4gICAgICAgIGN1c3RvbUNvbW1hbmRzQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0FwcGxpY2F0aW9uSWQsIGFwcGxpY2F0aW9uSWQpO1xuICAgICAgICBjdXN0b21Db21tYW5kc0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleSwgc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgY3VzdG9tQ29tbWFuZHNDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24sIHJlZ2lvbik7XG4gICAgICAgIHJldHVybiBjdXN0b21Db21tYW5kc0NvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgYm90IGZyYW1ld29yayBjb25maWcgd2l0aCB0aGUgc3BlY2lmaWVkIFNwZWVjaCBDb21tYW5kcyBhcHBsaWNhdGlvbiBpZCwgYXV0aG9yaXphdGlvbiB0b2tlbiBhbmQgcmVnaW9uLlxuICAgICAqIE5vdGU6IFRoZSBjYWxsZXIgbmVlZHMgdG8gZW5zdXJlIHRoYXQgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gaXMgdmFsaWQuIEJlZm9yZSB0aGUgYXV0aG9yaXphdGlvbiB0b2tlblxuICAgICAqIGV4cGlyZXMsIHRoZSBjYWxsZXIgbmVlZHMgdG8gcmVmcmVzaCBpdCBieSBjYWxsaW5nIHRoaXMgc2V0dGVyIHdpdGggYSBuZXcgdmFsaWQgdG9rZW4uXG4gICAgICogQXMgY29uZmlndXJhdGlvbiB2YWx1ZXMgYXJlIGNvcGllZCB3aGVuIGNyZWF0aW5nIGEgbmV3IHJlY29nbml6ZXIsIHRoZSBuZXcgdG9rZW4gdmFsdWUgd2lsbCBub3QgYXBwbHkgdG8gcmVjb2duaXplcnMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiBjcmVhdGVkLlxuICAgICAqIEZvciByZWNvZ25pemVycyB0aGF0IGhhdmUgYmVlbiBjcmVhdGVkIGJlZm9yZSwgeW91IG5lZWQgdG8gc2V0IGF1dGhvcml6YXRpb24gdG9rZW4gb2YgdGhlIGNvcnJlc3BvbmRpbmcgcmVjb2duaXplclxuICAgICAqIHRvIHJlZnJlc2ggdGhlIHRva2VuLiBPdGhlcndpc2UsIHRoZSByZWNvZ25pemVycyB3aWxsIGVuY291bnRlciBlcnJvcnMgZHVyaW5nIHJlY29nbml0aW9uLlxuICAgICAqIEBtZW1iZXIgQ3VzdG9tQ29tbWFuZHNDb25maWcuZnJvbUF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gYXBwbGljYXRpb25JZCBTcGVlY2ggQ29tbWFuZHMgYXBwbGljYXRpb24gaWQuXG4gICAgICogQHBhcmFtIGF1dGhvcml6YXRpb25Ub2tlbiBUaGUgYXV0aG9yaXphdGlvbiB0b2tlbiBhc3NvY2lhdGVkIHdpdGggdGhlIGFwcGxpY2F0aW9uLlxuICAgICAqIEBwYXJhbSByZWdpb24gVGhlIHJlZ2lvbiBuYW1lIChzZWUgdGhlIDxhIGhyZWY9XCJodHRwczovL2FrYS5tcy9jc3NwZWVjaC9yZWdpb25cIj5yZWdpb24gcGFnZTwvYT4pLlxuICAgICAqIEByZXR1cm5zIHtDdXN0b21Db21tYW5kc0NvbmZpZ30gQSBuZXcgc3BlZWNoIGNvbW1hbmRzIGNvbmZpZy5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUF1dGhvcml6YXRpb25Ub2tlbihhcHBsaWNhdGlvbklkLCBhdXRob3JpemF0aW9uVG9rZW4sIHJlZ2lvbikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UoYXBwbGljYXRpb25JZCwgXCJhcHBsaWNhdGlvbklkXCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UoYXV0aG9yaXphdGlvblRva2VuLCBcImF1dGhvcml6YXRpb25Ub2tlblwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHJlZ2lvbiwgXCJyZWdpb25cIik7XG4gICAgICAgIGNvbnN0IGN1c3RvbUNvbW1hbmRzQ29uZmlnID0gbmV3IERpYWxvZ1NlcnZpY2VDb25maWdJbXBsKCk7XG4gICAgICAgIGN1c3RvbUNvbW1hbmRzQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0RpYWxvZ1R5cGUsIERpYWxvZ1NlcnZpY2VDb25maWcuRGlhbG9nVHlwZXMuQ3VzdG9tQ29tbWFuZHMpO1xuICAgICAgICBjdXN0b21Db21tYW5kc0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9BcHBsaWNhdGlvbklkLCBhcHBsaWNhdGlvbklkKTtcbiAgICAgICAgY3VzdG9tQ29tbWFuZHNDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgYXV0aG9yaXphdGlvblRva2VuKTtcbiAgICAgICAgY3VzdG9tQ29tbWFuZHNDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24sIHJlZ2lvbik7XG4gICAgICAgIHJldHVybiBjdXN0b21Db21tYW5kc0NvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgY29ycmVzcG9uZGluZyBiYWNrZW5kIGFwcGxpY2F0aW9uIGlkZW50aWZpZXIuXG4gICAgICogQG1lbWJlciBDdXN0b21Db21tYW5kc0NvbmZpZy5wcm90b3R5cGUuQ29udmVyc2F0aW9uX0FwcGxpY2F0aW9uSWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIGFwcGxpY2F0aW9uIGlkZW50aWZpZXIgdG8gc2V0LlxuICAgICAqL1xuICAgIHNldCBhcHBsaWNhdGlvbklkKHZhbHVlKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh2YWx1ZSwgXCJ2YWx1ZVwiKTtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9BcHBsaWNhdGlvbklkLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGNvcnJlc3BvbmRpbmcgYmFja2VuZCBhcHBsaWNhdGlvbiBpZGVudGlmaWVyLlxuICAgICAqIEBtZW1iZXIgQ3VzdG9tQ29tbWFuZHNDb25maWcucHJvdG90eXBlLkNvbnZlcnNhdGlvbl9BcHBsaWNhdGlvbklkXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFRoZSBhcHBsaWNhdGlvbiBpZGVudGlmaWVyIHRvIGdldC5cbiAgICAgKi9cbiAgICBnZXQgYXBwbGljYXRpb25JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25fQXBwbGljYXRpb25JZCk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1DdXN0b21Db21tYW5kc0NvbmZpZy5qcy5tYXBcbiIsIi8vXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdC4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4gU2VlIExJQ0VOU0UubWQgZmlsZSBpbiB0aGUgcHJvamVjdCByb290IGZvciBmdWxsIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4vL1xuaW1wb3J0IHsgQ29uc29sZUxvZ2dpbmdMaXN0ZW5lciB9IGZyb20gXCIuLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCI7XG5pbXBvcnQgeyBFdmVudHMgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbi8qKlxuICogRGVmaW5lcyBkaWFnbm9zdGljcyBBUEkgZm9yIG1hbmFnaW5nIGNvbnNvbGUgb3V0cHV0XG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMjEuMFxuICovXG5leHBvcnQgY2xhc3MgRGlhZ25vc3RpY3Mge1xuICAgIHN0YXRpYyBTZXRMb2dnaW5nTGV2ZWwobG9nTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5wcml2TGlzdGVuZXIgPSBuZXcgQ29uc29sZUxvZ2dpbmdMaXN0ZW5lcihsb2dMZXZlbCk7XG4gICAgICAgIEV2ZW50cy5pbnN0YW5jZS5hdHRhY2hDb25zb2xlTGlzdGVuZXIodGhpcy5wcml2TGlzdGVuZXIpO1xuICAgIH1cbiAgICBzdGF0aWMgU2V0TG9nT3V0cHV0UGF0aChwYXRoKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZMaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkxpc3RlbmVyLmxvZ1BhdGggPSBwYXRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmlsZSBzeXN0ZW0gbG9nZ2luZyBub3QgYXZhaWxhYmxlIGluIGJyb3dzZXIuXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuRGlhZ25vc3RpY3MucHJpdkxpc3RlbmVyID0gdW5kZWZpbmVkO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EaWFnbm9zdGljcy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgUHJvcGVydHlJZCwgU3BlZWNoQ29uZmlnSW1wbCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogQ2xhc3MgdGhhdCBkZWZpbmVzIGJhc2UgY29uZmlndXJhdGlvbnMgZm9yIGRpYWxvZyBzZXJ2aWNlIGNvbm5lY3RvclxuICogQGNsYXNzIERpYWxvZ1NlcnZpY2VDb25maWdcbiAqL1xuZXhwb3J0IGNsYXNzIERpYWxvZ1NlcnZpY2VDb25maWcge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgRGlhbG9nU2VydmljZSBjb25maWcuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgY29ycmVzcG9uZGluZyBiYWNrZW5kIGFwcGxpY2F0aW9uIGlkZW50aWZpZXIuXG4gICAgICogQG1lbWJlciBEaWFsb2dTZXJ2aWNlQ29uZmlnLnByb3RvdHlwZS5Db252ZXJzYXRpb25fQXBwbGljYXRpb25JZFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgYXBwbGljYXRpb24gaWRlbnRpZmllciB0byBzZXQuXG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgIHNldCBhcHBsaWNhdGlvbklkKHZhbHVlKSB7IH1cbiAgICBzdGF0aWMgZ2V0IERpYWxvZ1R5cGVzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgQm90RnJhbWV3b3JrOiBcImJvdF9mcmFtZXdvcmtcIixcbiAgICAgICAgICAgIEN1c3RvbUNvbW1hbmRzOiBcImN1c3RvbV9jb21tYW5kc1wiXG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBEaWFsb2cgU2VydmljZSBjb25maWd1cmF0aW9uLlxuICogQGNsYXNzIERpYWxvZ1NlcnZpY2VDb25maWdJbXBsXG4gKi9cbmV4cG9ydCBjbGFzcyBEaWFsb2dTZXJ2aWNlQ29uZmlnSW1wbCBleHRlbmRzIERpYWxvZ1NlcnZpY2VDb25maWcge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgZGlhbG9nU2VydmljZSBjb25maWcuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaENvbmZpZyA9IG5ldyBTcGVlY2hDb25maWdJbXBsKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb3ZpZGVzIGFjY2VzcyB0byBjdXN0b20gcHJvcGVydGllcy5cbiAgICAgKiBAbWVtYmVyIERpYWxvZ1NlcnZpY2VDb25maWdJbXBsLnByb3RvdHlwZS5wcm9wZXJ0aWVzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IFRoZSBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoQ29uZmlnLnByb3BlcnRpZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHNwZWVjaCByZWNvZ25pdGlvbiBsYW5ndWFnZS5cbiAgICAgKiBAbWVtYmVyIERpYWxvZ1NlcnZpY2VDb25maWdJbXBsLnByb3RvdHlwZS5zcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldCBzcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoQ29uZmlnLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHNwZWVjaCByZWNvZ25pdGlvbiBsYW5ndWFnZS5cbiAgICAgKiBAbWVtYmVyIERpYWxvZ1NlcnZpY2VDb25maWdJbXBsLnByb3RvdHlwZS5zcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFRoZSBsYW5ndWFnZSB0byBzZXQuXG4gICAgICovXG4gICAgc2V0IHNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UodmFsdWUpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHZhbHVlLCBcInZhbHVlXCIpO1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hDb25maWcuc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSA9IHZhbHVlO1xuICAgIH1cbiAgICBnZXQgb3V0cHV0Rm9ybWF0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoQ29uZmlnLm91dHB1dEZvcm1hdDtcbiAgICB9XG4gICAgc2V0IG91dHB1dEZvcm1hdCh2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hDb25maWcub3V0cHV0Rm9ybWF0ID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgYSBuYW1lZCBwcm9wZXJ0eSBhcyB2YWx1ZVxuICAgICAqIEBtZW1iZXIgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwucHJvdG90eXBlLnNldFByb3BlcnR5XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7UHJvcGVydHlJZCB8IHN0cmluZ30gbmFtZSAtIFRoZSBwcm9wZXJ0eSB0byBzZXQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIHZhbHVlLlxuICAgICAqL1xuICAgIHNldFByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaENvbmZpZy5zZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgYSBuYW1lZCBwcm9wZXJ0eSBhcyB2YWx1ZVxuICAgICAqIEBtZW1iZXIgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwucHJvdG90eXBlLmdldFByb3BlcnR5XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7UHJvcGVydHlJZCB8IHN0cmluZ30gbmFtZSAtIFRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRlZiAtIFRoZSBkZWZhdWx0IHZhbHVlIHRvIHJldHVybiBpbiBjYXNlIHRoZSBwcm9wZXJ0eSBpcyBub3Qga25vd24uXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGN1cnJlbnQgdmFsdWUsIG9yIHByb3ZpZGVkIGRlZmF1bHQsIG9mIHRoZSBnaXZlbiBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBnZXRQcm9wZXJ0eShuYW1lLCBkZWYpIHtcbiAgICAgICAgdm9pZCBkZWY7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hDb25maWcuZ2V0UHJvcGVydHkobmFtZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHByb3h5IGNvbmZpZ3VyYXRpb24uXG4gICAgICogT25seSByZWxldmFudCBpbiBOb2RlLmpzIGVudmlyb25tZW50cy5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNC4wLlxuICAgICAqIEBwYXJhbSBwcm94eUhvc3ROYW1lIFRoZSBob3N0IG5hbWUgb2YgdGhlIHByb3h5IHNlcnZlciwgd2l0aG91dCB0aGUgcHJvdG9jb2wgc2NoZW1lIChodHRwOi8vKVxuICAgICAqIEBwYXJhbSBwcm94eVBvcnQgVGhlIHBvcnQgbnVtYmVyIG9mIHRoZSBwcm94eSBzZXJ2ZXIuXG4gICAgICogQHBhcmFtIHByb3h5VXNlck5hbWUgVGhlIHVzZXIgbmFtZSBvZiB0aGUgcHJveHkgc2VydmVyLlxuICAgICAqIEBwYXJhbSBwcm94eVBhc3N3b3JkIFRoZSBwYXNzd29yZCBvZiB0aGUgcHJveHkgc2VydmVyLlxuICAgICAqL1xuICAgIHNldFByb3h5KHByb3h5SG9zdE5hbWUsIHByb3h5UG9ydCwgcHJveHlVc2VyTmFtZSwgcHJveHlQYXNzd29yZCkge1xuICAgICAgICB0aGlzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlIb3N0TmFtZSwgcHJveHlIb3N0TmFtZSk7XG4gICAgICAgIHRoaXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVBvcnQsIGAke3Byb3h5UG9ydH1gKTtcbiAgICAgICAgaWYgKHByb3h5VXNlck5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVVzZXJOYW1lLCBwcm94eVVzZXJOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJveHlQYXNzd29yZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5UGFzc3dvcmQsIHByb3h5UGFzc3dvcmQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldFNlcnZpY2VQcm9wZXJ0eShuYW1lLCB2YWx1ZSwgY2hhbm5lbCkge1xuICAgICAgICB2b2lkIGNoYW5uZWw7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaENvbmZpZy5zZXRTZXJ2aWNlUHJvcGVydHkobmFtZSwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIG9mIGFzc29jaWF0ZWQgcmVzb3VyY2VzLlxuICAgICAqIEBtZW1iZXIgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EaWFsb2dTZXJ2aWNlQ29uZmlnLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IERpYWxvZ0Nvbm5lY3Rpb25GYWN0b3J5IH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvRGlhbG9nQ29ubmVjdG9yRmFjdG9yeVwiO1xuaW1wb3J0IHsgRGlhbG9nU2VydmljZUFkYXB0ZXIsIFJlY29nbml0aW9uTW9kZSwgUmVjb2duaXplckNvbmZpZywgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBEZWZlcnJlZCwgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBSZWNvZ25pemVyIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuaW1wb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuL1Byb3BlcnR5SWRcIjtcbi8qKlxuICogRGlhbG9nIFNlcnZpY2UgQ29ubmVjdG9yXG4gKiBAY2xhc3MgRGlhbG9nU2VydmljZUNvbm5lY3RvclxuICovXG5leHBvcnQgY2xhc3MgRGlhbG9nU2VydmljZUNvbm5lY3RvciBleHRlbmRzIFJlY29nbml6ZXIge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoZSBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7RGlhbG9nU2VydmljZUNvbmZpZ30gZGlhbG9nQ29uZmlnIC0gU2V0IG9mIHByb3BlcnRpZXMgdG8gY29uZmlndXJlIHRoaXMgcmVjb2duaXplci5cbiAgICAgKiBAcGFyYW0ge0F1ZGlvQ29uZmlnfSBhdWRpb0NvbmZpZyAtIEFuIG9wdGlvbmFsIGF1ZGlvIGNvbmZpZyBhc3NvY2lhdGVkIHdpdGggdGhlIHJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihkaWFsb2dDb25maWcsIGF1ZGlvQ29uZmlnKSB7XG4gICAgICAgIGNvbnN0IGRpYWxvZ1NlcnZpY2VDb25maWdJbXBsID0gZGlhbG9nQ29uZmlnO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwoZGlhbG9nQ29uZmlnLCBcImRpYWxvZ0NvbmZpZ1wiKTtcbiAgICAgICAgc3VwZXIoYXVkaW9Db25maWcsIGRpYWxvZ1NlcnZpY2VDb25maWdJbXBsLnByb3BlcnRpZXMsIG5ldyBEaWFsb2dDb25uZWN0aW9uRmFjdG9yeSgpKTtcbiAgICAgICAgdGhpcy5pc1R1cm5Db21wbGV0ZSA9IHRydWU7XG4gICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IGRpYWxvZ1NlcnZpY2VDb25maWdJbXBsLnByb3BlcnRpZXMuY2xvbmUoKTtcbiAgICAgICAgY29uc3QgYWdlbnRDb25maWcgPSB0aGlzLmJ1aWxkQWdlbnRDb25maWcoKTtcbiAgICAgICAgdGhpcy5wcml2UmVjby5hZ2VudENvbmZpZy5zZXQoYWdlbnRDb25maWcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgYSBjb25uZWN0aW9uIHRvIHRoZSBzZXJ2aWNlLlxuICAgICAqIFVzZXJzIGNhbiBvcHRpb25hbGx5IGNhbGwgY29ubmVjdCgpIHRvIG1hbnVhbGx5IHNldCB1cCBhIGNvbm5lY3Rpb24gaW4gYWR2YW5jZSwgYmVmb3JlIHN0YXJ0aW5nIGludGVyYWN0aW9ucy5cbiAgICAgKlxuICAgICAqIE5vdGU6IE9uIHJldHVybiwgdGhlIGNvbm5lY3Rpb24gbWlnaHQgbm90IGJlIHJlYWR5IHlldC4gUGxlYXNlIHN1YnNjcmliZSB0byB0aGUgQ29ubmVjdGVkIGV2ZW50IHRvXG4gICAgICogYmUgbm90aWZpZWQgd2hlbiB0aGUgY29ubmVjdGlvbiBpcyBlc3RhYmxpc2hlZC5cbiAgICAgKiBAbWVtYmVyIERpYWxvZ1NlcnZpY2VDb25uZWN0b3IucHJvdG90eXBlLmNvbm5lY3RcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29ubmVjdChjYiwgZXJyKSB7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5wcml2UmVjby5jb25uZWN0KCksIGNiLCBlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgdGhlIGNvbm5lY3Rpb24gdGhlIHNlcnZpY2UuXG4gICAgICogVXNlcnMgY2FuIG9wdGlvbmFsbHkgY2FsbCBkaXNjb25uZWN0KCkgdG8gbWFudWFsbHkgc2h1dGRvd24gdGhlIGNvbm5lY3Rpb24gb2YgdGhlIGFzc29jaWF0ZWQgRGlhbG9nU2VydmljZUNvbm5lY3Rvci5cbiAgICAgKlxuICAgICAqIElmIGRpc2Nvbm5lY3QoKSBpcyBjYWxsZWQgZHVyaW5nIGEgcmVjb2duaXRpb24sIHJlY29nbml0aW9uIHdpbGwgZmFpbCBhbmQgY2FuY2VsIHdpdGggYW4gZXJyb3IuXG4gICAgICovXG4gICAgZGlzY29ubmVjdChjYiwgZXJyKSB7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5wcml2UmVjby5kaXNjb25uZWN0KCksIGNiLCBlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBhdXRob3JpemF0aW9uIHRva2VuIHVzZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgc2VydmljZS5cbiAgICAgKiBAbWVtYmVyIERpYWxvZ1NlcnZpY2VDb25uZWN0b3IucHJvdG90eXBlLmF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqL1xuICAgIGdldCBhdXRob3JpemF0aW9uVG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBzZXJ2aWNlLlxuICAgICAqIEBtZW1iZXIgRGlhbG9nU2VydmljZUNvbm5lY3Rvci5wcm90b3R5cGUuYXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIEF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICovXG4gICAgc2V0IGF1dGhvcml6YXRpb25Ub2tlbih0b2tlbikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodG9rZW4sIFwidG9rZW5cIik7XG4gICAgICAgIHRoaXMucHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCB0b2tlbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIERpYWxvZ1NlcnZpY2VDb25uZWN0b3IuXG4gICAgICogQG1lbWJlciBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnByb3RvdHlwZS5wcm9wZXJ0aWVzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIERpYWxvZ1NlcnZpY2VDb25uZWN0b3IuXG4gICAgICovXG4gICAgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzO1xuICAgIH1cbiAgICAvKiogR2V0cyB0aGUgdGVtcGxhdGUgZm9yIHRoZSBhY3Rpdml0eSBnZW5lcmF0ZWQgYnkgc2VydmljZSBmcm9tIHNwZWVjaC5cbiAgICAgKiBQcm9wZXJ0aWVzIGZyb20gdGhlIHRlbXBsYXRlIHdpbGwgYmUgc3RhbXBlZCBvbiB0aGUgZ2VuZXJhdGVkIGFjdGl2aXR5LlxuICAgICAqIEl0IGNhbiBiZSBlbXB0eVxuICAgICAqL1xuICAgIGdldCBzcGVlY2hBY3Rpdml0eVRlbXBsYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX1NwZWVjaF9BY3Rpdml0eV9UZW1wbGF0ZSk7XG4gICAgfVxuICAgIC8qKiBTZXRzIHRoZSB0ZW1wbGF0ZSBmb3IgdGhlIGFjdGl2aXR5IGdlbmVyYXRlZCBieSBzZXJ2aWNlIGZyb20gc3BlZWNoLlxuICAgICAqIFByb3BlcnRpZXMgZnJvbSB0aGUgdGVtcGxhdGUgd2lsbCBiZSBzdGFtcGVkIG9uIHRoZSBnZW5lcmF0ZWQgYWN0aXZpdHkuXG4gICAgICogSXQgY2FuIGJlIG51bGwgb3IgZW1wdHkuXG4gICAgICogTm90ZTogaXQgaGFzIHRvIGJlIGEgdmFsaWQgSnNvbiBvYmplY3QuXG4gICAgICovXG4gICAgc2V0IHNwZWVjaEFjdGl2aXR5VGVtcGxhdGUoc3BlZWNoQWN0aXZpdHlUZW1wbGF0ZSkge1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25fU3BlZWNoX0FjdGl2aXR5X1RlbXBsYXRlLCBzcGVlY2hBY3Rpdml0eVRlbXBsYXRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHJlY29nbml0aW9uIGFuZCBzdG9wcyBhZnRlciB0aGUgZmlyc3QgdXR0ZXJhbmNlIGlzIHJlY29nbml6ZWQuXG4gICAgICogQG1lbWJlciBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnByb3RvdHlwZS5saXN0ZW5PbmNlQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgdGhhdCByZWNlaXZlZCB0aGUgcmVzdWx0IHdoZW4gdGhlIHJlY28gaGFzIGNvbXBsZXRlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIGxpc3Rlbk9uY2VBc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVHVybkNvbXBsZXRlKSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdklzRGlzcG9zZWQpO1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tIb2xkZXIgPSAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVjby5jb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVHVybkNvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgcmV0ID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVjby5yZWNvZ25pemUoUmVjb2duaXRpb25Nb2RlLkNvbnZlcnNhdGlvbiwgcmV0LnJlc29sdmUsIHJldC5yZWplY3QpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB5aWVsZCByZXQucHJvbWlzZTtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCByZXRQcm9taXNlID0gY2FsbGJhY2tIb2xkZXIoKTtcbiAgICAgICAgICAgIHJldFByb21pc2UuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIERlc3Ryb3kgdGhlIHJlY29nbml6ZXIuXG4gICAgICAgICAgICAgICAgLy8gV2UndmUgZG9uZSBhbGwgd2UgY2FuIGhlcmUuXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSh0cnVlKS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHJldFByb21pc2UuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1R1cm5Db21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICB9KSwgY2IsIGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VuZEFjdGl2aXR5QXN5bmMoYWN0aXZpdHksIGNiLCBlcnJDYikge1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMucHJpdlJlY28uc2VuZE1lc3NhZ2UoYWN0aXZpdHkpLCBjYiwgZXJyQ2IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBjbG9zZXMgYWxsIGV4dGVybmFsIHJlc291cmNlcyBoZWxkIGJ5IGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQG1lbWJlciBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZShjYiwgZXJyKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2SXNEaXNwb3NlZCk7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5kaXNwb3NlKHRydWUpLCBjYiwgZXJyKTtcbiAgICB9XG4gICAgZGlzcG9zZShkaXNwb3NpbmcpIHtcbiAgICAgICAgY29uc3QgX3N1cGVyID0gT2JqZWN0LmNyZWF0ZShudWxsLCB7XG4gICAgICAgICAgICBkaXNwb3NlOiB7IGdldDogKCkgPT4gc3VwZXIuZGlzcG9zZSB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdklzRGlzcG9zZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGlzcG9zaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgICAgICB5aWVsZCBfc3VwZXIuZGlzcG9zZS5jYWxsKHRoaXMsIGRpc3Bvc2luZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjcmVhdGVSZWNvZ25pemVyQ29uZmlnKHNwZWVjaENvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IFJlY29nbml6ZXJDb25maWcoc3BlZWNoQ29uZmlnLCB0aGlzLnByaXZQcm9wZXJ0aWVzKTtcbiAgICB9XG4gICAgY3JlYXRlU2VydmljZVJlY29nbml6ZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb0NvbmZpZywgcmVjb2duaXplckNvbmZpZykge1xuICAgICAgICBjb25zdCBhdWRpb1NvdXJjZSA9IGF1ZGlvQ29uZmlnO1xuICAgICAgICByZXR1cm4gbmV3IERpYWxvZ1NlcnZpY2VBZGFwdGVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Tb3VyY2UsIHJlY29nbml6ZXJDb25maWcsIHRoaXMpO1xuICAgIH1cbiAgICBidWlsZEFnZW50Q29uZmlnKCkge1xuICAgICAgICBjb25zdCBjb21tdW5pY2F0aW9uVHlwZSA9IHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShcIkNvbnZlcnNhdGlvbl9Db21tdW5pY2F0aW9uX1R5cGVcIiwgXCJEZWZhdWx0XCIpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYm90SW5mbzoge1xuICAgICAgICAgICAgICAgIGNvbW1UeXBlOiBjb21tdW5pY2F0aW9uVHlwZSxcbiAgICAgICAgICAgICAgICBjb21tYW5kc0N1bHR1cmU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uSWQ6IHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9BZ2VudF9Db25uZWN0aW9uX0lkKSxcbiAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZDogdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0NvbnZlcnNhdGlvbl9JZCwgdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICBmcm9tSWQ6IHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9Gcm9tX0lkLCB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgIHR0c0F1ZGlvRm9ybWF0OiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aE91dHB1dEZvcm1hdCwgdW5kZWZpbmVkKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZlcnNpb246IDAuMlxuICAgICAgICB9O1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGlhbG9nU2VydmljZUNvbm5lY3Rvci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuZXhwb3J0IHsgQXVkaW9Db25maWcgfSBmcm9tIFwiLi9BdWRpby9BdWRpb0NvbmZpZ1wiO1xuZXhwb3J0IHsgQXVkaW9TdHJlYW1Gb3JtYXQsIEF1ZGlvRm9ybWF0VGFnIH0gZnJvbSBcIi4vQXVkaW8vQXVkaW9TdHJlYW1Gb3JtYXRcIjtcbmV4cG9ydCB7IEF1ZGlvSW5wdXRTdHJlYW0sIFB1bGxBdWRpb0lucHV0U3RyZWFtLCBQdXNoQXVkaW9JbnB1dFN0cmVhbSB9IGZyb20gXCIuL0F1ZGlvL0F1ZGlvSW5wdXRTdHJlYW1cIjtcbmV4cG9ydCB7IEF1ZGlvT3V0cHV0U3RyZWFtLCBQdWxsQXVkaW9PdXRwdXRTdHJlYW0sIFB1c2hBdWRpb091dHB1dFN0cmVhbSB9IGZyb20gXCIuL0F1ZGlvL0F1ZGlvT3V0cHV0U3RyZWFtXCI7XG5leHBvcnQgeyBDYW5jZWxsYXRpb25SZWFzb24gfSBmcm9tIFwiLi9DYW5jZWxsYXRpb25SZWFzb25cIjtcbmV4cG9ydCB7IFB1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2sgfSBmcm9tIFwiLi9BdWRpby9QdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrXCI7XG5leHBvcnQgeyBQdXNoQXVkaW9PdXRwdXRTdHJlYW1DYWxsYmFjayB9IGZyb20gXCIuL0F1ZGlvL1B1c2hBdWRpb091dHB1dFN0cmVhbUNhbGxiYWNrXCI7XG5leHBvcnQgeyBLZXl3b3JkUmVjb2duaXRpb25Nb2RlbCB9IGZyb20gXCIuL0tleXdvcmRSZWNvZ25pdGlvbk1vZGVsXCI7XG5leHBvcnQgeyBTZXNzaW9uRXZlbnRBcmdzIH0gZnJvbSBcIi4vU2Vzc2lvbkV2ZW50QXJnc1wiO1xuZXhwb3J0IHsgUmVjb2duaXRpb25FdmVudEFyZ3MgfSBmcm9tIFwiLi9SZWNvZ25pdGlvbkV2ZW50QXJnc1wiO1xuZXhwb3J0IHsgT3V0cHV0Rm9ybWF0IH0gZnJvbSBcIi4vT3V0cHV0Rm9ybWF0XCI7XG5leHBvcnQgeyBJbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncyB9IGZyb20gXCIuL0ludGVudFJlY29nbml0aW9uRXZlbnRBcmdzXCI7XG5leHBvcnQgeyBSZWNvZ25pdGlvblJlc3VsdCB9IGZyb20gXCIuL1JlY29nbml0aW9uUmVzdWx0XCI7XG5leHBvcnQgeyBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdCB9IGZyb20gXCIuL1NwZWVjaFJlY29nbml0aW9uUmVzdWx0XCI7XG5leHBvcnQgeyBJbnRlbnRSZWNvZ25pdGlvblJlc3VsdCB9IGZyb20gXCIuL0ludGVudFJlY29nbml0aW9uUmVzdWx0XCI7XG5leHBvcnQgeyBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbCB9IGZyb20gXCIuL0xhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsXCI7XG5leHBvcnQgeyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncywgQ29udmVyc2F0aW9uVHJhbnNjcmlwdGlvbkV2ZW50QXJncyB9IGZyb20gXCIuL1NwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzXCI7XG5leHBvcnQgeyBTcGVlY2hSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzIH0gZnJvbSBcIi4vU3BlZWNoUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJnc1wiO1xuZXhwb3J0IHsgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkV2ZW50QXJncyB9IGZyb20gXCIuL1RyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3NcIjtcbmV4cG9ydCB7IFRyYW5zbGF0aW9uU3ludGhlc2lzRXZlbnRBcmdzIH0gZnJvbSBcIi4vVHJhbnNsYXRpb25TeW50aGVzaXNFdmVudEFyZ3NcIjtcbmV4cG9ydCB7IFRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQgfSBmcm9tIFwiLi9UcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0XCI7XG5leHBvcnQgeyBUcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdCB9IGZyb20gXCIuL1RyYW5zbGF0aW9uU3ludGhlc2lzUmVzdWx0XCI7XG5leHBvcnQgeyBSZXN1bHRSZWFzb24gfSBmcm9tIFwiLi9SZXN1bHRSZWFzb25cIjtcbmV4cG9ydCB7IFNwZWVjaENvbmZpZywgU3BlZWNoQ29uZmlnSW1wbCB9IGZyb20gXCIuL1NwZWVjaENvbmZpZ1wiO1xuZXhwb3J0IHsgU3BlZWNoVHJhbnNsYXRpb25Db25maWcsIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbCB9IGZyb20gXCIuL1NwZWVjaFRyYW5zbGF0aW9uQ29uZmlnXCI7XG5leHBvcnQgeyBQcm9wZXJ0eUNvbGxlY3Rpb24gfSBmcm9tIFwiLi9Qcm9wZXJ0eUNvbGxlY3Rpb25cIjtcbmV4cG9ydCB7IFByb3BlcnR5SWQgfSBmcm9tIFwiLi9Qcm9wZXJ0eUlkXCI7XG5leHBvcnQgeyBSZWNvZ25pemVyIH0gZnJvbSBcIi4vUmVjb2duaXplclwiO1xuZXhwb3J0IHsgU3BlZWNoUmVjb2duaXplciB9IGZyb20gXCIuL1NwZWVjaFJlY29nbml6ZXJcIjtcbmV4cG9ydCB7IEludGVudFJlY29nbml6ZXIgfSBmcm9tIFwiLi9JbnRlbnRSZWNvZ25pemVyXCI7XG5leHBvcnQgeyBWb2ljZVByb2ZpbGVUeXBlIH0gZnJvbSBcIi4vVm9pY2VQcm9maWxlVHlwZVwiO1xuZXhwb3J0IHsgVHJhbnNsYXRpb25SZWNvZ25pemVyIH0gZnJvbSBcIi4vVHJhbnNsYXRpb25SZWNvZ25pemVyXCI7XG5leHBvcnQgeyBUcmFuc2xhdGlvbnMgfSBmcm9tIFwiLi9UcmFuc2xhdGlvbnNcIjtcbmV4cG9ydCB7IE5vTWF0Y2hSZWFzb24gfSBmcm9tIFwiLi9Ob01hdGNoUmVhc29uXCI7XG5leHBvcnQgeyBOb01hdGNoRGV0YWlscyB9IGZyb20gXCIuL05vTWF0Y2hEZXRhaWxzXCI7XG5leHBvcnQgeyBUcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MgfSBmcm9tIFwiLi9UcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3NcIjtcbmV4cG9ydCB7IEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MgfSBmcm9tIFwiLi9JbnRlbnRSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzXCI7XG5leHBvcnQgeyBDYW5jZWxsYXRpb25EZXRhaWxzQmFzZSB9IGZyb20gXCIuL0NhbmNlbGxhdGlvbkRldGFpbHNCYXNlXCI7XG5leHBvcnQgeyBDYW5jZWxsYXRpb25EZXRhaWxzIH0gZnJvbSBcIi4vQ2FuY2VsbGF0aW9uRGV0YWlsc1wiO1xuZXhwb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlIH0gZnJvbSBcIi4vQ2FuY2VsbGF0aW9uRXJyb3JDb2Rlc1wiO1xuZXhwb3J0IHsgQ29ubmVjdGlvbkV2ZW50QXJncyB9IGZyb20gXCIuL0Nvbm5lY3Rpb25FdmVudEFyZ3NcIjtcbmV4cG9ydCB7IFNlcnZpY2VFdmVudEFyZ3MgfSBmcm9tIFwiLi9TZXJ2aWNlRXZlbnRBcmdzXCI7XG5leHBvcnQgeyBDb25uZWN0aW9uIH0gZnJvbSBcIi4vQ29ubmVjdGlvblwiO1xuZXhwb3J0IHsgUGhyYXNlTGlzdEdyYW1tYXIgfSBmcm9tIFwiLi9QaHJhc2VMaXN0R3JhbW1hclwiO1xuZXhwb3J0IHsgRGlhbG9nU2VydmljZUNvbmZpZyB9IGZyb20gXCIuL0RpYWxvZ1NlcnZpY2VDb25maWdcIjtcbmV4cG9ydCB7IEJvdEZyYW1ld29ya0NvbmZpZyB9IGZyb20gXCIuL0JvdEZyYW1ld29ya0NvbmZpZ1wiO1xuZXhwb3J0IHsgQ3VzdG9tQ29tbWFuZHNDb25maWcgfSBmcm9tIFwiLi9DdXN0b21Db21tYW5kc0NvbmZpZ1wiO1xuZXhwb3J0IHsgRGlhbG9nU2VydmljZUNvbm5lY3RvciB9IGZyb20gXCIuL0RpYWxvZ1NlcnZpY2VDb25uZWN0b3JcIjtcbmV4cG9ydCB7IEFjdGl2aXR5UmVjZWl2ZWRFdmVudEFyZ3MgfSBmcm9tIFwiLi9BY3Rpdml0eVJlY2VpdmVkRXZlbnRBcmdzXCI7XG5leHBvcnQgeyBUdXJuU3RhdHVzUmVjZWl2ZWRFdmVudEFyZ3MgfSBmcm9tIFwiLi9UdXJuU3RhdHVzUmVjZWl2ZWRFdmVudEFyZ3NcIjtcbmV4cG9ydCB7IFNlcnZpY2VQcm9wZXJ0eUNoYW5uZWwgfSBmcm9tIFwiLi9TZXJ2aWNlUHJvcGVydHlDaGFubmVsXCI7XG5leHBvcnQgeyBQcm9mYW5pdHlPcHRpb24gfSBmcm9tIFwiLi9Qcm9mYW5pdHlPcHRpb25cIjtcbmV4cG9ydCB7IEJhc2VBdWRpb1BsYXllciB9IGZyb20gXCIuL0F1ZGlvL0Jhc2VBdWRpb1BsYXllclwiO1xuZXhwb3J0IHsgQ29ubmVjdGlvbk1lc3NhZ2VFdmVudEFyZ3MgfSBmcm9tIFwiLi9Db25uZWN0aW9uTWVzc2FnZUV2ZW50QXJnc1wiO1xuZXhwb3J0IHsgQ29ubmVjdGlvbk1lc3NhZ2UgfSBmcm9tIFwiLi9Db25uZWN0aW9uTWVzc2FnZVwiO1xuZXhwb3J0IHsgVm9pY2VQcm9maWxlIH0gZnJvbSBcIi4vVm9pY2VQcm9maWxlXCI7XG5leHBvcnQgeyBWb2ljZVByb2ZpbGVFbnJvbGxtZW50UmVzdWx0LCBWb2ljZVByb2ZpbGVFbnJvbGxtZW50Q2FuY2VsbGF0aW9uRGV0YWlscyB9IGZyb20gXCIuL1ZvaWNlUHJvZmlsZUVucm9sbG1lbnRSZXN1bHRcIjtcbmV4cG9ydCB7IFZvaWNlUHJvZmlsZVJlc3VsdCwgVm9pY2VQcm9maWxlQ2FuY2VsbGF0aW9uRGV0YWlscyB9IGZyb20gXCIuL1ZvaWNlUHJvZmlsZVJlc3VsdFwiO1xuZXhwb3J0IHsgVm9pY2VQcm9maWxlUGhyYXNlUmVzdWx0IH0gZnJvbSBcIi4vVm9pY2VQcm9maWxlUGhyYXNlUmVzdWx0XCI7XG5leHBvcnQgeyBWb2ljZVByb2ZpbGVDbGllbnQgfSBmcm9tIFwiLi9Wb2ljZVByb2ZpbGVDbGllbnRcIjtcbmV4cG9ydCB7IFNwZWFrZXJSZWNvZ25pemVyIH0gZnJvbSBcIi4vU3BlYWtlclJlY29nbml6ZXJcIjtcbmV4cG9ydCB7IFNwZWFrZXJJZGVudGlmaWNhdGlvbk1vZGVsIH0gZnJvbSBcIi4vU3BlYWtlcklkZW50aWZpY2F0aW9uTW9kZWxcIjtcbmV4cG9ydCB7IFNwZWFrZXJWZXJpZmljYXRpb25Nb2RlbCB9IGZyb20gXCIuL1NwZWFrZXJWZXJpZmljYXRpb25Nb2RlbFwiO1xuZXhwb3J0IHsgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnIH0gZnJvbSBcIi4vQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnXCI7XG5leHBvcnQgeyBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VSZXN1bHQgfSBmcm9tIFwiLi9BdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VSZXN1bHRcIjtcbmV4cG9ydCB7IFNvdXJjZUxhbmd1YWdlQ29uZmlnIH0gZnJvbSBcIi4vU291cmNlTGFuZ3VhZ2VDb25maWdcIjtcbmV4cG9ydCB7IFNwZWFrZXJSZWNvZ25pdGlvblJlc3VsdCwgU3BlYWtlclJlY29nbml0aW9uUmVzdWx0VHlwZSwgU3BlYWtlclJlY29nbml0aW9uQ2FuY2VsbGF0aW9uRGV0YWlscyB9IGZyb20gXCIuL1NwZWFrZXJSZWNvZ25pdGlvblJlc3VsdFwiO1xuZXhwb3J0IHsgQ29udmVyc2F0aW9uLCBDb252ZXJzYXRpb25FeHBpcmF0aW9uRXZlbnRBcmdzLCBDb252ZXJzYXRpb25QYXJ0aWNpcGFudHNDaGFuZ2VkRXZlbnRBcmdzLCBDb252ZXJzYXRpb25UcmFuc2xhdGlvbkNhbmNlbGVkRXZlbnRBcmdzLCBDb252ZXJzYXRpb25UcmFuc2xhdGlvbkV2ZW50QXJncywgQ29udmVyc2F0aW9uVHJhbnNsYXRpb25SZXN1bHQsIENvbnZlcnNhdGlvblRyYW5zbGF0b3IsIENvbnZlcnNhdGlvblRyYW5zY3JpYmVyLCBQYXJ0aWNpcGFudCwgUGFydGljaXBhbnRDaGFuZ2VkUmVhc29uLCBVc2VyIH0gZnJvbSBcIi4vVHJhbnNjcmlwdGlvbi9FeHBvcnRzXCI7XG5leHBvcnQgeyBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQgfSBmcm9tIFwiLi9TcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRcIjtcbmV4cG9ydCB7IFNwZWVjaFN5bnRoZXNpemVyIH0gZnJvbSBcIi4vU3BlZWNoU3ludGhlc2l6ZXJcIjtcbmV4cG9ydCB7IFN5bnRoZXNpc1Jlc3VsdCB9IGZyb20gXCIuL1N5bnRoZXNpc1Jlc3VsdFwiO1xuZXhwb3J0IHsgU3BlZWNoU3ludGhlc2lzUmVzdWx0IH0gZnJvbSBcIi4vU3BlZWNoU3ludGhlc2lzUmVzdWx0XCI7XG5leHBvcnQgeyBTcGVlY2hTeW50aGVzaXNFdmVudEFyZ3MgfSBmcm9tIFwiLi9TcGVlY2hTeW50aGVzaXNFdmVudEFyZ3NcIjtcbmV4cG9ydCB7IFNwZWVjaFN5bnRoZXNpc1dvcmRCb3VuZGFyeUV2ZW50QXJncyB9IGZyb20gXCIuL1NwZWVjaFN5bnRoZXNpc1dvcmRCb3VuZGFyeUV2ZW50QXJnc1wiO1xuZXhwb3J0IHsgU3BlZWNoU3ludGhlc2lzQm9va21hcmtFdmVudEFyZ3MgfSBmcm9tIFwiLi9TcGVlY2hTeW50aGVzaXNCb29rbWFya0V2ZW50QXJnc1wiO1xuZXhwb3J0IHsgU3BlZWNoU3ludGhlc2lzVmlzZW1lRXZlbnRBcmdzIH0gZnJvbSBcIi4vU3BlZWNoU3ludGhlc2lzVmlzZW1lRXZlbnRBcmdzXCI7XG5leHBvcnQgeyBTcGVlY2hTeW50aGVzaXNCb3VuZGFyeVR5cGUgfSBmcm9tIFwiLi9TcGVlY2hTeW50aGVzaXNCb3VuZGFyeVR5cGVcIjtcbmV4cG9ydCB7IFN5bnRoZXNpc1ZvaWNlc1Jlc3VsdCB9IGZyb20gXCIuL1N5bnRoZXNpc1ZvaWNlc1Jlc3VsdFwiO1xuZXhwb3J0IHsgVm9pY2VJbmZvIH0gZnJvbSBcIi4vVm9pY2VJbmZvXCI7XG5leHBvcnQgeyBTcGVha2VyQXVkaW9EZXN0aW5hdGlvbiB9IGZyb20gXCIuL0F1ZGlvL1NwZWFrZXJBdWRpb0Rlc3RpbmF0aW9uXCI7XG5leHBvcnQgeyBDb252ZXJzYXRpb25UcmFuc2NyaXB0aW9uQ2FuY2VsZWRFdmVudEFyZ3MgfSBmcm9tIFwiLi9Db252ZXJzYXRpb25UcmFuc2NyaXB0aW9uQ2FuY2VsZWRFdmVudEFyZ3NcIjtcbmV4cG9ydCB7IFByb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhZGluZ1N5c3RlbSB9IGZyb20gXCIuL1Byb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhZGluZ1N5c3RlbVwiO1xuZXhwb3J0IHsgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFudWxhcml0eSB9IGZyb20gXCIuL1Byb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhbnVsYXJpdHlcIjtcbmV4cG9ydCB7IFByb251bmNpYXRpb25Bc3Nlc3NtZW50Q29uZmlnIH0gZnJvbSBcIi4vUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRDb25maWdcIjtcbmV4cG9ydCB7IFByb251bmNpYXRpb25Bc3Nlc3NtZW50UmVzdWx0IH0gZnJvbSBcIi4vUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRSZXN1bHRcIjtcbmV4cG9ydCB7IExhbmd1YWdlSWRNb2RlIH0gZnJvbSBcIi4vTGFuZ3VhZ2VJZE1vZGVcIjtcbmV4cG9ydCB7IERpYWdub3N0aWNzIH0gZnJvbSBcIi4vRGlhZ25vc3RpY3NcIjtcbmV4cG9ydCB7IExvZ0xldmVsIH0gZnJvbSBcIi4vTG9nTGV2ZWxcIjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXhwb3J0cy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgSW50ZW50UmVjb2duaXRpb25FdmVudEFyZ3MgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIERlZmluZSBwYXlsb2FkIG9mIGludGVudCByZWNvZ25pdGlvbiBjYW5jZWxlZCByZXN1bHQgZXZlbnRzLlxuICogQGNsYXNzIEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3NcbiAqL1xuZXhwb3J0IGNsYXNzIEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MgZXh0ZW5kcyBJbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0NhbmNlbGxhdGlvblJlYXNvbn0gcmVzdWx0IC0gVGhlIHJlc3VsdCBvZiB0aGUgaW50ZW50IHJlY29nbml0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvZmZzZXQgLSBUaGUgb2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7SW50ZW50UmVjb2duaXRpb25SZXN1bHR9IHNlc3Npb25JZCAtIFRoZSBzZXNzaW9uIGlkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlYXNvbiwgZXJyb3JEZXRhaWxzLCBlcnJvckNvZGUsIHJlc3VsdCwgb2Zmc2V0LCBzZXNzaW9uSWQpIHtcbiAgICAgICAgc3VwZXIocmVzdWx0LCBvZmZzZXQsIHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5wcml2RXJyb3JEZXRhaWxzID0gZXJyb3JEZXRhaWxzO1xuICAgICAgICB0aGlzLnByaXZFcnJvckNvZGUgPSBlcnJvckNvZGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSByZWFzb24gdGhlIHJlY29nbml0aW9uIHdhcyBjYW5jZWxlZC5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MucHJvdG90eXBlLnJlYXNvblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7Q2FuY2VsbGF0aW9uUmVhc29ufSBTcGVjaWZpZXMgdGhlIHJlYXNvbiBjYW5jZWxlZC5cbiAgICAgKi9cbiAgICBnZXQgcmVhc29uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVhc29uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZXJyb3IgY29kZSBpbiBjYXNlIG9mIGFuIHVuc3VjY2Vzc2Z1bCByZWNvZ25pdGlvbi5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMS4wLlxuICAgICAqIEByZXR1cm4gQW4gZXJyb3IgY29kZSB0aGF0IHJlcHJlc2VudHMgdGhlIGVycm9yIHJlYXNvbi5cbiAgICAgKi9cbiAgICBnZXQgZXJyb3JDb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3JDb2RlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbiBjYXNlIG9mIGFuIHVuc3VjY2Vzc2Z1bCByZWNvZ25pdGlvbiwgcHJvdmlkZXMgZGV0YWlscyBvZiB0aGUgb2NjdXJyZWQgZXJyb3IuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLnByb3RvdHlwZS5lcnJvckRldGFpbHNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBlcnJvciBkZXRhaWxzLlxuICAgICAqL1xuICAgIGdldCBlcnJvckRldGFpbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckRldGFpbHM7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlbnRSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBSZWNvZ25pdGlvbkV2ZW50QXJncyB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogSW50ZW50IHJlY29nbml0aW9uIHJlc3VsdCBldmVudCBhcmd1bWVudHMuXG4gKiBAY2xhc3NcbiAqL1xuZXhwb3J0IGNsYXNzIEludGVudFJlY29nbml0aW9uRXZlbnRBcmdzIGV4dGVuZHMgUmVjb2duaXRpb25FdmVudEFyZ3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHJlc3VsdCAtIFRoZSByZXN1bHQgb2YgdGhlIGludGVudCByZWNvZ25pdGlvbi5cbiAgICAgKiBAcGFyYW0gb2Zmc2V0IC0gVGhlIG9mZnNldC5cbiAgICAgKiBAcGFyYW0gc2Vzc2lvbklkIC0gVGhlIHNlc3Npb24gaWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVzdWx0LCBvZmZzZXQsIHNlc3Npb25JZCkge1xuICAgICAgICBzdXBlcihvZmZzZXQsIHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdlJlc3VsdCA9IHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50cyB0aGUgaW50ZW50IHJlY29nbml0aW9uIHJlc3VsdC5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml0aW9uRXZlbnRBcmdzLnByb3RvdHlwZS5yZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge0ludGVudFJlY29nbml0aW9uUmVzdWx0fSBSZXByZXNlbnRzIHRoZSBpbnRlbnQgcmVjb2duaXRpb24gcmVzdWx0LlxuICAgICAqL1xuICAgIGdldCByZXN1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN1bHQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIEludGVudCByZWNvZ25pdGlvbiByZXN1bHQuXG4gKiBAY2xhc3NcbiAqL1xuZXhwb3J0IGNsYXNzIEludGVudFJlY29nbml0aW9uUmVzdWx0IGV4dGVuZHMgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIGludGVudElkIC0gVGhlIGludGVudCBpZC5cbiAgICAgKiBAcGFyYW0gcmVzdWx0SWQgLSBUaGUgcmVzdWx0IGlkLlxuICAgICAqIEBwYXJhbSByZWFzb24gLSBUaGUgcmVhc29uLlxuICAgICAqIEBwYXJhbSB0ZXh0IC0gVGhlIHJlY29nbml6ZWQgdGV4dC5cbiAgICAgKiBAcGFyYW0gZHVyYXRpb24gLSBUaGUgZHVyYXRpb24uXG4gICAgICogQHBhcmFtIG9mZnNldCAtIFRoZSBvZmZzZXQgaW50byB0aGUgc3RyZWFtLlxuICAgICAqIEBwYXJhbSBsYW5ndWFnZSAtIFByaW1hcnkgTGFuZ3VhZ2UgZGV0ZWN0ZWQsIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSBsYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2UgLSBQcmltYXJ5IExhbmd1YWdlIGNvbmZpZGVuY2UgKFwiVW5rbm93bixcIiBcIkxvdyxcIiBcIk1lZGl1bSxcIiBcIkhpZ2hcIi4uLiksIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSBlcnJvckRldGFpbHMgLSBFcnJvciBkZXRhaWxzLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ganNvbiAtIEFkZGl0aW9uYWwgSnNvbiwgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHByb3BlcnRpZXMgLSBBZGRpdGlvbmFsIHByb3BlcnRpZXMsIGlmIHByb3ZpZGVkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGludGVudElkLCByZXN1bHRJZCwgcmVhc29uLCB0ZXh0LCBkdXJhdGlvbiwgb2Zmc2V0LCBsYW5ndWFnZSwgbGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlLCBlcnJvckRldGFpbHMsIGpzb24sIHByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIocmVzdWx0SWQsIHJlYXNvbiwgdGV4dCwgZHVyYXRpb24sIG9mZnNldCwgbGFuZ3VhZ2UsIGxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSwgdW5kZWZpbmVkLCBlcnJvckRldGFpbHMsIGpzb24sIHByb3BlcnRpZXMpO1xuICAgICAgICB0aGlzLnByaXZJbnRlbnRJZCA9IGludGVudElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIFN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIGludGVudCBpZGVudGlmaWVyIGJlaW5nIHJlY29nbml6ZWQuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUuaW50ZW50SWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBpbnRlbnQgaWRlbnRpZmllciBiZWluZyByZWNvZ25pemVkLlxuICAgICAqL1xuICAgIGdldCBpbnRlbnRJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkludGVudElkO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW50ZW50UmVjb2duaXRpb25SZXN1bHQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgQWRkZWRMbUludGVudCwgSW50ZW50Q29ubmVjdGlvbkZhY3RvcnksIEludGVudFNlcnZpY2VSZWNvZ25pemVyLCBSZWNvZ25pdGlvbk1vZGUsIFJlY29nbml6ZXJDb25maWcsIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUlkLCBSZWNvZ25pemVyLCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogSW50ZW50IHJlY29nbml6ZXIuXG4gKiBAY2xhc3NcbiAqL1xuZXhwb3J0IGNsYXNzIEludGVudFJlY29nbml6ZXIgZXh0ZW5kcyBSZWNvZ25pemVyIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGUgSW50ZW50UmVjb2duaXplci5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge1NwZWVjaENvbmZpZ30gc3BlZWNoQ29uZmlnIC0gVGhlIHNldCBvZiBjb25maWd1cmF0aW9uIHByb3BlcnRpZXMuXG4gICAgICogQHBhcmFtIHtBdWRpb0NvbmZpZ30gYXVkaW9Db25maWcgLSBBbiBvcHRpb25hbCBhdWRpbyBpbnB1dCBjb25maWcgYXNzb2NpYXRlZCB3aXRoIHRoZSByZWNvZ25pemVyXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc3BlZWNoQ29uZmlnLCBhdWRpb0NvbmZpZykge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChzcGVlY2hDb25maWcsIFwic3BlZWNoQ29uZmlnXCIpO1xuICAgICAgICBjb25zdCBjb25maWdJbXBsID0gc3BlZWNoQ29uZmlnO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChjb25maWdJbXBsLCBcInNwZWVjaENvbmZpZ1wiKTtcbiAgICAgICAgc3VwZXIoYXVkaW9Db25maWcsIGNvbmZpZ0ltcGwucHJvcGVydGllcywgbmV3IEludGVudENvbm5lY3Rpb25GYWN0b3J5KCkpO1xuICAgICAgICB0aGlzLnByaXZBZGRlZEludGVudHMgPSBbXTtcbiAgICAgICAgdGhpcy5wcml2QWRkZWRMbUludGVudHMgPSB7fTtcbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZWRJbnRlbnRSZWNvZ25pemVyID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMgPSBjb25maWdJbXBsLnByb3BlcnRpZXM7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UpLCBQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHNwb2tlbiBsYW5ndWFnZSBvZiByZWNvZ25pdGlvbi5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gdGhlIHNwb2tlbiBsYW5ndWFnZSBvZiByZWNvZ25pdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSgpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiB1c2VkIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIHNlcnZpY2UuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5hdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBnZXQgYXV0aG9yaXphdGlvblRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzL1NldHMgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBzZXJ2aWNlLlxuICAgICAqIE5vdGU6IFBsZWFzZSB1c2UgYSB0b2tlbiBkZXJpdmVkIGZyb20geW91ciBMYW5ndWFnZVVuZGVyc3RhbmRpbmcgc3Vic2NyaXB0aW9uIGtleSBmb3IgdGhlIEludGVudCByZWNvZ25pemVyLlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuYXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIEF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICovXG4gICAgc2V0IGF1dGhvcml6YXRpb25Ub2tlbih2YWx1ZSkge1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMgZGVmaW5lZCBmb3IgdGhpcyBJbnRlbnRSZWNvZ25pemVyLlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUucHJvcGVydGllc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7UHJvcGVydHlDb2xsZWN0aW9ufSBUaGUgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpclxuICAgICAqIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIEludGVudFJlY29nbml6ZXIuXG4gICAgICovXG4gICAgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgaW50ZW50IHJlY29nbml0aW9uLCBhbmQgc3RvcHMgYWZ0ZXIgdGhlIGZpcnN0IHV0dGVyYW5jZSBpcyByZWNvZ25pemVkLlxuICAgICAqIFRoZSB0YXNrIHJldHVybnMgdGhlIHJlY29nbml0aW9uIHRleHQgYW5kIGludGVudCBhcyByZXN1bHQuXG4gICAgICogTm90ZTogUmVjb2duaXplT25jZUFzeW5jKCkgcmV0dXJucyB3aGVuIHRoZSBmaXJzdCB1dHRlcmFuY2UgaGFzIGJlZW4gcmVjb2duaXplZCxcbiAgICAgKiBzbyBpdCBpcyBzdWl0YWJsZSBvbmx5IGZvciBzaW5nbGUgc2hvdCByZWNvZ25pdGlvbiBsaWtlIGNvbW1hbmQgb3IgcXVlcnkuXG4gICAgICogRm9yIGxvbmctcnVubmluZyByZWNvZ25pdGlvbiwgdXNlIFN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmMoKSBpbnN0ZWFkLlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUucmVjb2duaXplT25jZUFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBjYiAtIENhbGxiYWNrIHRoYXQgcmVjZWl2ZWQgdGhlIHJlY29nbml0aW9uIGhhcyBmaW5pc2hlZCB3aXRoIGFuIEludGVudFJlY29nbml0aW9uUmVzdWx0LlxuICAgICAqIEBwYXJhbSBlcnIgLSBDYWxsYmFjayBpbnZva2VkIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICovXG4gICAgcmVjb2duaXplT25jZUFzeW5jKGNiLCBlcnIpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIpO1xuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5wcml2QWRkZWRMbUludGVudHMpLmxlbmd0aCAhPT0gMCB8fCB1bmRlZmluZWQgIT09IHRoaXMucHJpdlVtYnJlbGxhSW50ZW50KSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5idWlsZFNwZWVjaENvbnRleHQoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlY28uc3BlZWNoQ29udGV4dC5zZXRTZWN0aW9uKFwiaW50ZW50XCIsIGNvbnRleHQuSW50ZW50KTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlY28uZHluYW1pY0dyYW1tYXIuYWRkUmVmZXJlbmNlR3JhbW1hcihjb250ZXh0LlJlZmVyZW5jZUdyYW1tYXJzKTtcbiAgICAgICAgICAgIGNvbnN0IGludGVudFJlY28gPSB0aGlzLnByaXZSZWNvO1xuICAgICAgICAgICAgaW50ZW50UmVjby5zZXRJbnRlbnRzKHRoaXMucHJpdkFkZGVkTG1JbnRlbnRzLCB0aGlzLnByaXZVbWJyZWxsYUludGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyh0aGlzLnJlY29nbml6ZU9uY2VBc3luY0ltcGwoUmVjb2duaXRpb25Nb2RlLkludGVyYWN0aXZlKSwgY2IsIGVycik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBzcGVlY2ggcmVjb2duaXRpb24sIHVudGlsIHN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luYygpIGlzIGNhbGxlZC5cbiAgICAgKiBVc2VyIG11c3Qgc3Vic2NyaWJlIHRvIGV2ZW50cyB0byByZWNlaXZlIHJlY29nbml0aW9uIHJlc3VsdHMuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5zdGFydENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBjYiAtIENhbGxiYWNrIGludm9rZWQgb25jZSB0aGUgcmVjb2duaXRpb24gaGFzIHN0YXJ0ZWQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBzdGFydENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKGNiLCBlcnIpIHtcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMucHJpdkFkZGVkTG1JbnRlbnRzKS5sZW5ndGggIT09IDAgfHwgdW5kZWZpbmVkICE9PSB0aGlzLnByaXZVbWJyZWxsYUludGVudCkge1xuICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuYnVpbGRTcGVlY2hDb250ZXh0KCk7XG4gICAgICAgICAgICB0aGlzLnByaXZSZWNvLnNwZWVjaENvbnRleHQuc2V0U2VjdGlvbihcImludGVudFwiLCBjb250ZXh0LkludGVudCk7XG4gICAgICAgICAgICB0aGlzLnByaXZSZWNvLmR5bmFtaWNHcmFtbWFyLmFkZFJlZmVyZW5jZUdyYW1tYXIoY29udGV4dC5SZWZlcmVuY2VHcmFtbWFycyk7XG4gICAgICAgICAgICBjb25zdCBpbnRlbnRSZWNvID0gdGhpcy5wcml2UmVjbztcbiAgICAgICAgICAgIGludGVudFJlY28uc2V0SW50ZW50cyh0aGlzLnByaXZBZGRlZExtSW50ZW50cywgdGhpcy5wcml2VW1icmVsbGFJbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5zdGFydENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jSW1wbChSZWNvZ25pdGlvbk1vZGUuQ29udmVyc2F0aW9uKSwgY2IsIGVycik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIGNvbnRpbnVvdXMgaW50ZW50IHJlY29nbml0aW9uLlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBjYiAtIENhbGxiYWNrIGludm9rZWQgb25jZSB0aGUgcmVjb2duaXRpb24gaGFzIHN0b3BwZWQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBzdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmMoY2IsIGVycikge1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMuc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jSW1wbCgpLCBjYiwgZXJyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHNwZWVjaCByZWNvZ25pdGlvbiB3aXRoIGtleXdvcmQgc3BvdHRpbmcsIHVudGlsIHN0b3BLZXl3b3JkUmVjb2duaXRpb25Bc3luYygpIGlzIGNhbGxlZC5cbiAgICAgKiBVc2VyIG11c3Qgc3Vic2NyaWJlIHRvIGV2ZW50cyB0byByZWNlaXZlIHJlY29nbml0aW9uIHJlc3VsdHMuXG4gICAgICogTm90ZTogS2V5IHdvcmQgc3BvdHRpbmcgZnVuY3Rpb25hbGl0eSBpcyBvbmx5IGF2YWlsYWJsZSBvbiB0aGUgU3BlZWNoIERldmljZXMgU0RLLlxuICAgICAqIFRoaXMgZnVuY3Rpb25hbGl0eSBpcyBjdXJyZW50bHkgbm90IGluY2x1ZGVkIGluIHRoZSBTREsgaXRzZWxmLlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuc3RhcnRLZXl3b3JkUmVjb2duaXRpb25Bc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0tleXdvcmRSZWNvZ25pdGlvbk1vZGVsfSBtb2RlbCAtIFRoZSBrZXl3b3JkIHJlY29nbml0aW9uIG1vZGVsIHRoYXQgc3BlY2lmaWVzIHRoZSBrZXl3b3JkIHRvIGJlIHJlY29nbml6ZWQuXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgaW52b2tlZCBvbmNlIHRoZSByZWNvZ25pdGlvbiBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIHN0YXJ0S2V5d29yZFJlY29nbml0aW9uQXN5bmMobW9kZWwsIGNiLCBlcnIpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKG1vZGVsLCBcIm1vZGVsXCIpO1xuICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgIGVycihcIk5vdCB5ZXQgaW1wbGVtZW50ZWQuXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIGNvbnRpbnVvdXMgc3BlZWNoIHJlY29nbml0aW9uLlxuICAgICAqIE5vdGU6IEtleSB3b3JkIHNwb3R0aW5nIGZ1bmN0aW9uYWxpdHkgaXMgb25seSBhdmFpbGFibGUgb24gdGhlIFNwZWVjaCBEZXZpY2VzIFNESy5cbiAgICAgKiBUaGlzIGZ1bmN0aW9uYWxpdHkgaXMgY3VycmVudGx5IG5vdCBpbmNsdWRlZCBpbiB0aGUgU0RLIGl0c2VsZi5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLnN0b3BLZXl3b3JkUmVjb2duaXRpb25Bc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayBpbnZva2VkIG9uY2UgdGhlIHJlY29nbml0aW9uIGhhcyBzdG9wcGVkLlxuICAgICAqIEBwYXJhbSBlcnIgLSBDYWxsYmFjayBpbnZva2VkIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICovXG4gICAgc3RvcEtleXdvcmRSZWNvZ25pdGlvbkFzeW5jKGNiLCBlcnIpIHtcbiAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIHBocmFzZSB0aGF0IHNob3VsZCBiZSByZWNvZ25pemVkIGFzIGludGVudC5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLmFkZEludGVudFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaW50ZW50SWQgLSBBIFN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIGlkZW50aWZpZXIgb2YgdGhlIGludGVudCB0byBiZSByZWNvZ25pemVkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwaHJhc2UgLSBBIFN0cmluZyB0aGF0IHNwZWNpZmllcyB0aGUgcGhyYXNlIHJlcHJlc2VudGluZyB0aGUgaW50ZW50LlxuICAgICAqL1xuICAgIGFkZEludGVudChzaW1wbGVQaHJhc2UsIGludGVudElkKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWRJbnRlbnRSZWNvZ25pemVyKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKGludGVudElkLCBcImludGVudElkXCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2Uoc2ltcGxlUGhyYXNlLCBcInNpbXBsZVBocmFzZVwiKTtcbiAgICAgICAgdGhpcy5wcml2QWRkZWRJbnRlbnRzLnB1c2goW2ludGVudElkLCBzaW1wbGVQaHJhc2VdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhbiBpbnRlbnQgZnJvbSBMYW5ndWFnZSBVbmRlcnN0YW5kaW5nIHNlcnZpY2UgZm9yIHJlY29nbml0aW9uLlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuYWRkSW50ZW50V2l0aExhbmd1YWdlTW9kZWxcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGludGVudElkIC0gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBpZGVudGlmaWVyIG9mIHRoZSBpbnRlbnRcbiAgICAgKiB0byBiZSByZWNvZ25pemVkLiBJZ25vcmVkIGlmIGludGVudE5hbWUgaXMgZW1wdHkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVsIC0gVGhlIGludGVudCBtb2RlbCBmcm9tIExhbmd1YWdlIFVuZGVyc3RhbmRpbmcgc2VydmljZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaW50ZW50TmFtZSAtIFRoZSBpbnRlbnQgbmFtZSBkZWZpbmVkIGluIHRoZSBpbnRlbnQgbW9kZWwuIElmIGl0XG4gICAgICogaXMgZW1wdHksIGFsbCBpbnRlbnQgbmFtZXMgZGVmaW5lZCBpbiB0aGUgbW9kZWwgd2lsbCBiZSBhZGRlZC5cbiAgICAgKi9cbiAgICBhZGRJbnRlbnRXaXRoTGFuZ3VhZ2VNb2RlbChpbnRlbnRJZCwgbW9kZWwsIGludGVudE5hbWUpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UoaW50ZW50SWQsIFwiaW50ZW50SWRcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChtb2RlbCwgXCJtb2RlbFwiKTtcbiAgICAgICAgY29uc3QgbW9kZWxJbXBsID0gbW9kZWw7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShtb2RlbEltcGwuYXBwSWQsIFwibW9kZWwuYXBwSWRcIik7XG4gICAgICAgIHRoaXMucHJpdkFkZGVkTG1JbnRlbnRzW2ludGVudElkXSA9IG5ldyBBZGRlZExtSW50ZW50KG1vZGVsSW1wbCwgaW50ZW50TmFtZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBzdW1tYXJ5IEFkZHMgYWxsIGludGVudHMgZnJvbSB0aGUgc3BlY2lmaWVkIExhbmd1YWdlIFVuZGVyc3RhbmRpbmcgTW9kZWwuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5hZGRBbGxJbnRlbnRzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0xhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsfSBtb2RlbCAtIFRoZSBsYW5ndWFnZSB1bmRlcnN0YW5kaW5nIG1vZGVsIGNvbnRhaW5pbmcgdGhlIGludGVudHMuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGludGVudElkIC0gQSBjdXN0b20gaWQgU3RyaW5nIHRvIGJlIHJldHVybmVkIGluIHRoZSBJbnRlbnRSZWNvZ25pdGlvblJlc3VsdCdzIGdldEludGVudElkKCkgbWV0aG9kLlxuICAgICAqL1xuICAgIGFkZEFsbEludGVudHMobW9kZWwsIGludGVudElkKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChtb2RlbCwgXCJtb2RlbFwiKTtcbiAgICAgICAgY29uc3QgbW9kZWxJbXBsID0gbW9kZWw7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShtb2RlbEltcGwuYXBwSWQsIFwibW9kZWwuYXBwSWRcIik7XG4gICAgICAgIHRoaXMucHJpdlVtYnJlbGxhSW50ZW50ID0gbmV3IEFkZGVkTG1JbnRlbnQobW9kZWxJbXBsLCBpbnRlbnRJZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGNsb3NlcyBhbGwgZXh0ZXJuYWwgcmVzb3VyY2VzIGhlbGQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKGNiLCBlcnJvckNiKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWRJbnRlbnRSZWNvZ25pemVyKTtcbiAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyh0aGlzLmRpc3Bvc2UodHJ1ZSksIGNiLCBlcnJvckNiKTtcbiAgICB9XG4gICAgY3JlYXRlUmVjb2duaXplckNvbmZpZyhzcGVlY2hDb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWNvZ25pemVyQ29uZmlnKHNwZWVjaENvbmZpZywgdGhpcy5wcm9wZXJ0aWVzKTtcbiAgICB9XG4gICAgY3JlYXRlU2VydmljZVJlY29nbml6ZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb0NvbmZpZywgcmVjb2duaXplckNvbmZpZykge1xuICAgICAgICBjb25zdCBhdWRpb0ltcGwgPSBhdWRpb0NvbmZpZztcbiAgICAgICAgcmV0dXJuIG5ldyBJbnRlbnRTZXJ2aWNlUmVjb2duaXplcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvSW1wbCwgcmVjb2duaXplckNvbmZpZywgdGhpcyk7XG4gICAgfVxuICAgIGRpc3Bvc2UoZGlzcG9zaW5nKSB7XG4gICAgICAgIGNvbnN0IF9zdXBlciA9IE9iamVjdC5jcmVhdGUobnVsbCwge1xuICAgICAgICAgICAgZGlzcG9zZTogeyBnZXQ6ICgpID0+IHN1cGVyLmRpc3Bvc2UgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGlzcG9zaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2RGlzcG9zZWRJbnRlbnRSZWNvZ25pemVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB5aWVsZCBfc3VwZXIuZGlzcG9zZS5jYWxsKHRoaXMsIGRpc3Bvc2luZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBidWlsZFNwZWVjaENvbnRleHQoKSB7XG4gICAgICAgIGxldCBhcHBJZDtcbiAgICAgICAgbGV0IHJlZ2lvbjtcbiAgICAgICAgbGV0IHN1YnNjcmlwdGlvbktleTtcbiAgICAgICAgY29uc3QgcmVmR3JhbW1lcnMgPSBbXTtcbiAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gdGhpcy5wcml2VW1icmVsbGFJbnRlbnQpIHtcbiAgICAgICAgICAgIGFwcElkID0gdGhpcy5wcml2VW1icmVsbGFJbnRlbnQubW9kZWxJbXBsLmFwcElkO1xuICAgICAgICAgICAgcmVnaW9uID0gdGhpcy5wcml2VW1icmVsbGFJbnRlbnQubW9kZWxJbXBsLnJlZ2lvbjtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbktleSA9IHRoaXMucHJpdlVtYnJlbGxhSW50ZW50Lm1vZGVsSW1wbC5zdWJzY3JpcHRpb25LZXk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQnVpbGQgdGhlIHJlZmVyZW5jZSBncmFtbWVyIGFycmF5LlxuICAgICAgICBmb3IgKGNvbnN0IGludGVudElkIG9mIE9iamVjdC5rZXlzKHRoaXMucHJpdkFkZGVkTG1JbnRlbnRzKSkge1xuICAgICAgICAgICAgY29uc3QgYWRkZWRMbUludGVudCA9IHRoaXMucHJpdkFkZGVkTG1JbnRlbnRzW2ludGVudElkXTtcbiAgICAgICAgICAgIC8vIHZhbGlkYXRlIGFsbCB0aGUgc2FtZSBtb2RlbCwgcmVnaW9uLCBhbmQga2V5Li4uXG4gICAgICAgICAgICBpZiAoYXBwSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGFwcElkID0gYWRkZWRMbUludGVudC5tb2RlbEltcGwuYXBwSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoYXBwSWQgIT09IGFkZGVkTG1JbnRlbnQubW9kZWxJbXBsLmFwcElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludGVudHMgbXVzdCBhbGwgYmUgZnJvbSB0aGUgc2FtZSBMVUlTIG1vZGVsXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZWdpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJlZ2lvbiA9IGFkZGVkTG1JbnRlbnQubW9kZWxJbXBsLnJlZ2lvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChyZWdpb24gIT09IGFkZGVkTG1JbnRlbnQubW9kZWxJbXBsLnJlZ2lvbikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnRlbnRzIG11c3QgYWxsIGJlIGZyb20gdGhlIHNhbWUgTFVJUyBtb2RlbCBpbiBhIHNpbmdsZSByZWdpb25cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbktleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uS2V5ID0gYWRkZWRMbUludGVudC5tb2RlbEltcGwuc3Vic2NyaXB0aW9uS2V5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbktleSAhPT0gYWRkZWRMbUludGVudC5tb2RlbEltcGwuc3Vic2NyaXB0aW9uS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludGVudHMgbXVzdCBhbGwgdXNlIHRoZSBzYW1lIHN1YnNjcmlwdGlvbiBrZXlcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZ3JhbW1lciA9IFwibHVpcy9cIiArIGFwcElkICsgXCItUFJPRFVDVElPTiNcIiArIGludGVudElkO1xuICAgICAgICAgICAgcmVmR3JhbW1lcnMucHVzaChncmFtbWVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgSW50ZW50OiB7XG4gICAgICAgICAgICAgICAgaWQ6IGFwcElkLFxuICAgICAgICAgICAgICAgIGtleTogKHN1YnNjcmlwdGlvbktleSA9PT0gdW5kZWZpbmVkKSA/IHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleV0pIDogc3Vic2NyaXB0aW9uS2V5LFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyOiBcIkxVSVNcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBSZWZlcmVuY2VHcmFtbWFyczogKHVuZGVmaW5lZCA9PT0gdGhpcy5wcml2VW1icmVsbGFJbnRlbnQpID8gcmVmR3JhbW1lcnMgOiBbXCJsdWlzL1wiICsgYXBwSWQgKyBcIi1QUk9EVUNUSU9OXCJdLFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW50ZW50UmVjb2duaXplci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG4vKipcbiAqIFJlcHJlc2VudHMgYSBrZXl3b3JkIHJlY29nbml0aW9uIG1vZGVsIGZvciByZWNvZ25pemluZyB3aGVuXG4gKiB0aGUgdXNlciBzYXlzIGEga2V5d29yZCB0byBpbml0aWF0ZSBmdXJ0aGVyIHNwZWVjaCByZWNvZ25pdGlvbi5cbiAqIEBjbGFzcyBLZXl3b3JkUmVjb2duaXRpb25Nb2RlbFxuICovXG5leHBvcnQgY2xhc3MgS2V5d29yZFJlY29nbml0aW9uTW9kZWwge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbmQgaW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2UuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJpdkRpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGtleXdvcmQgcmVjb2duaXRpb24gbW9kZWwgdXNpbmcgdGhlIHNwZWNpZmllZCBmaWxlbmFtZS5cbiAgICAgKiBAbWVtYmVyIEtleXdvcmRSZWNvZ25pdGlvbk1vZGVsLmZyb21GaWxlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlTmFtZSAtIEEgc3RyaW5nIHRoYXQgcmVwcmVzZW50cyBmaWxlIG5hbWUgZm9yIHRoZSBrZXl3b3JkIHJlY29nbml0aW9uIG1vZGVsLlxuICAgICAqIE5vdGUsIHRoZSBmaWxlIGNhbiBwb2ludCB0byBhIHppcCBmaWxlIGluIHdoaWNoIGNhc2UgdGhlIG1vZGVsXG4gICAgICogd2lsbCBiZSBleHRyYWN0ZWQgZnJvbSB0aGUgemlwLlxuICAgICAqIEByZXR1cm5zIHtLZXl3b3JkUmVjb2duaXRpb25Nb2RlbH0gVGhlIGtleXdvcmQgcmVjb2duaXRpb24gbW9kZWwgYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUZpbGUoZmlsZU5hbWUpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZGaWxlRG9lc05vdEV4aXN0KGZpbGVOYW1lLCBcImZpbGVOYW1lXCIpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgeWV0IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGtleXdvcmQgcmVjb2duaXRpb24gbW9kZWwgdXNpbmcgdGhlIHNwZWNpZmllZCBmaWxlbmFtZS5cbiAgICAgKiBAbWVtYmVyIEtleXdvcmRSZWNvZ25pdGlvbk1vZGVsLmZyb21TdHJlYW1cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGUgLSBBIEZpbGUgdGhhdCByZXByZXNlbnRzIGZpbGUgZm9yIHRoZSBrZXl3b3JkIHJlY29nbml0aW9uIG1vZGVsLlxuICAgICAqIE5vdGUsIHRoZSBmaWxlIGNhbiBwb2ludCB0byBhIHppcCBmaWxlIGluIHdoaWNoIGNhc2UgdGhlIG1vZGVsIHdpbGwgYmUgZXh0cmFjdGVkIGZyb20gdGhlIHppcC5cbiAgICAgKiBAcmV0dXJucyB7S2V5d29yZFJlY29nbml0aW9uTW9kZWx9IFRoZSBrZXl3b3JkIHJlY29nbml0aW9uIG1vZGVsIGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21TdHJlYW0oZmlsZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwoZmlsZSwgXCJmaWxlXCIpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgeWV0IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcG9zZSBvZiBhc3NvY2lhdGVkIHJlc291cmNlcy5cbiAgICAgKiBAbWVtYmVyIEtleXdvcmRSZWNvZ25pdGlvbk1vZGVsLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdkRpc3Bvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZWQgPSB0cnVlO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2V5d29yZFJlY29nbml0aW9uTW9kZWwuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogTGFuZ3VhZ2UgSWRlbnRpZmljYXRpb24gbW9kZVxuICogQGNsYXNzIExhbmd1YWdlSWRNb2RlXG4gKi9cbmV4cG9ydCB2YXIgTGFuZ3VhZ2VJZE1vZGU7XG4oZnVuY3Rpb24gKExhbmd1YWdlSWRNb2RlKSB7XG4gICAgLyoqXG4gICAgICogRGV0ZWN0IGxhbmd1YWdlIGF0IGF1ZGlvIHN0YXJ0XG4gICAgICogQG1lbWJlciBMYW5ndWFnZUlkTW9kZS5BdFN0YXJ0XG4gICAgICovXG4gICAgTGFuZ3VhZ2VJZE1vZGVbTGFuZ3VhZ2VJZE1vZGVbXCJBdFN0YXJ0XCJdID0gMF0gPSBcIkF0U3RhcnRcIjtcbiAgICAvKipcbiAgICAgKiBDb250aW51b3VzbHkgZGV0ZWN0IGxhbmd1YWdlXG4gICAgICogQG1lbWJlciBMYW5ndWFnZUlkTW9kZS5Db250aW51b3VzXG4gICAgICovXG4gICAgTGFuZ3VhZ2VJZE1vZGVbTGFuZ3VhZ2VJZE1vZGVbXCJDb250aW51b3VzXCJdID0gMV0gPSBcIkNvbnRpbnVvdXNcIjtcbn0pKExhbmd1YWdlSWRNb2RlIHx8IChMYW5ndWFnZUlkTW9kZSA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxhbmd1YWdlSWRNb2RlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWNsYXNzZXMtcGVyLWZpbGVcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuL0NvbnRyYWN0c1wiO1xuLyoqXG4gKiBMYW5ndWFnZSB1bmRlcnN0YW5kaW5nIG1vZGVsXG4gKiBAY2xhc3MgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWxcbiAqL1xuZXhwb3J0IGNsYXNzIExhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gbGFuZ3VhZ2UgdW5kZXJzdGFuZGluZyBtb2RlbCB1c2luZyB0aGUgc3BlY2lmaWVkIGVuZHBvaW50LlxuICAgICAqIEBtZW1iZXIgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWwuZnJvbUVuZHBvaW50XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7VVJMfSB1cmkgLSBBIFN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIGVuZHBvaW50IG9mIHRoZSBsYW5ndWFnZSB1bmRlcnN0YW5kaW5nIG1vZGVsLlxuICAgICAqIEByZXR1cm5zIHtMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbH0gVGhlIGxhbmd1YWdlIHVuZGVyc3RhbmRpbmcgbW9kZWwgYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUVuZHBvaW50KHVyaSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwodXJpLCBcInVyaVwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHVyaS5ob3N0bmFtZSwgXCJ1cmlcIik7XG4gICAgICAgIGNvbnN0IGxhbmdNb2RlbEltcCA9IG5ldyBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbEltcGwoKTtcbiAgICAgICAgLy8gTmVlZCB0byBleHRyYWN0IHRoZSBhcHAgSUQgZnJvbSB0aGUgVVJMLlxuICAgICAgICAvLyBVUkwgaXMgaW4gdGhlIGZvcm1hdDogaHR0cHM6Ly88cmVnaW9uPi5hcGkuY29nbml0aXZlLm1pY3Jvc29mdC5jb20vbHVpcy92Mi4wL2FwcHMvPEd1aWQ+P3N1YnNjcmlwdGlvbi1rZXk9PGtleT4mdGltZXpvbmVPZmZzZXQ9LTM2MFxuICAgICAgICAvLyBTdGFydCB0ZWFyaW5nIHRoZSBzdHJpbmcgYXBhcnQuXG4gICAgICAgIC8vIHJlZ2lvbiBjYW4gYmUgZXh0cmFjdGVkIGZyb20gdGhlIGhvc3QgbmFtZS5cbiAgICAgICAgY29uc3QgZmlyc3REb3QgPSB1cmkuaG9zdC5pbmRleE9mKFwiLlwiKTtcbiAgICAgICAgaWYgKC0xID09PSBmaXJzdERvdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGRldGVybWluZSByZWdpb24gZnJvbSBlbmRwb2ludFwiKTtcbiAgICAgICAgfVxuICAgICAgICBsYW5nTW9kZWxJbXAucmVnaW9uID0gdXJpLmhvc3Quc3Vic3RyKDAsIGZpcnN0RG90KTtcbiAgICAgICAgLy8gTm93IHRoZSBhcHAgSUQuXG4gICAgICAgIGNvbnN0IGxhc3RTZWdtZW50ID0gdXJpLnBhdGhuYW1lLmxhc3RJbmRleE9mKFwiL1wiKSArIDE7XG4gICAgICAgIGlmICgtMSA9PT0gbGFzdFNlZ21lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBkZXRlcm1pbmUgYXBwSWQgZnJvbSBlbmRwb2ludFwiKTtcbiAgICAgICAgfVxuICAgICAgICBsYW5nTW9kZWxJbXAuYXBwSWQgPSB1cmkucGF0aG5hbWUuc3Vic3RyKGxhc3RTZWdtZW50KTtcbiAgICAgICAgLy8gQW5kIGZpbmFsbHkgdGhlIGtleS5cbiAgICAgICAgbGFuZ01vZGVsSW1wLnN1YnNjcmlwdGlvbktleSA9IHVyaS5zZWFyY2hQYXJhbXMuZ2V0KFwic3Vic2NyaXB0aW9uLWtleVwiKTtcbiAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbGFuZ01vZGVsSW1wLnN1YnNjcmlwdGlvbktleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGRldGVybWluZSBzdWJzY3JpcHRpb24ga2V5IGZyb20gZW5kcG9pbnRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxhbmdNb2RlbEltcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBsYW5ndWFnZSB1bmRlcnN0YW5kaW5nIG1vZGVsIHVzaW5nIHRoZSBhcHBsaWNhdGlvbiBpZCBvZiBMYW5ndWFnZSBVbmRlcnN0YW5kaW5nIHNlcnZpY2UuXG4gICAgICogQG1lbWJlciBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbC5mcm9tQXBwSWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFwcElkIC0gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBhcHBsaWNhdGlvbiBpZCBvZiBMYW5ndWFnZSBVbmRlcnN0YW5kaW5nIHNlcnZpY2UuXG4gICAgICogQHJldHVybnMge0xhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsfSBUaGUgbGFuZ3VhZ2UgdW5kZXJzdGFuZGluZyBtb2RlbCBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tQXBwSWQoYXBwSWQpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKGFwcElkLCBcImFwcElkXCIpO1xuICAgICAgICBjb25zdCBsYW5nTW9kZWxJbXAgPSBuZXcgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWxJbXBsKCk7XG4gICAgICAgIGxhbmdNb2RlbEltcC5hcHBJZCA9IGFwcElkO1xuICAgICAgICByZXR1cm4gbGFuZ01vZGVsSW1wO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbGFuZ3VhZ2UgdW5kZXJzdGFuZGluZyBtb2RlbCB1c2luZyBob3N0bmFtZSwgc3Vic2NyaXB0aW9uIGtleSBhbmQgYXBwbGljYXRpb25cbiAgICAgKiBpZCBvZiBMYW5ndWFnZSBVbmRlcnN0YW5kaW5nIHNlcnZpY2UuXG4gICAgICogQG1lbWJlciBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbC5mcm9tU3Vic2NyaXB0aW9uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdWJzY3JpcHRpb25LZXkgLSBBIFN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIHN1YnNjcmlwdGlvbiBrZXkgb2ZcbiAgICAgKiBMYW5ndWFnZSBVbmRlcnN0YW5kaW5nIHNlcnZpY2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFwcElkIC0gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBhcHBsaWNhdGlvbiBpZCBvZiBMYW5ndWFnZVxuICAgICAqIFVuZGVyc3RhbmRpbmcgc2VydmljZS5cbiAgICAgKiBAcGFyYW0ge0xhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsfSByZWdpb24gLSBBIFN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIHJlZ2lvblxuICAgICAqIG9mIHRoZSBMYW5ndWFnZSBVbmRlcnN0YW5kaW5nIHNlcnZpY2UgKHNlZSB0aGUgPGEgaHJlZj1cImh0dHBzOi8vYWthLm1zL2Nzc3BlZWNoL3JlZ2lvblwiPnJlZ2lvbiBwYWdlPC9hPikuXG4gICAgICogQHJldHVybnMge0xhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsfSBUaGUgbGFuZ3VhZ2UgdW5kZXJzdGFuZGluZyBtb2RlbCBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbktleSwgYXBwSWQsIHJlZ2lvbikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2Uoc3Vic2NyaXB0aW9uS2V5LCBcInN1YnNjcmlwdGlvbktleVwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKGFwcElkLCBcImFwcElkXCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocmVnaW9uLCBcInJlZ2lvblwiKTtcbiAgICAgICAgY29uc3QgbGFuZ01vZGVsSW1wID0gbmV3IExhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsSW1wbCgpO1xuICAgICAgICBsYW5nTW9kZWxJbXAuYXBwSWQgPSBhcHBJZDtcbiAgICAgICAgbGFuZ01vZGVsSW1wLnJlZ2lvbiA9IHJlZ2lvbjtcbiAgICAgICAgbGFuZ01vZGVsSW1wLnN1YnNjcmlwdGlvbktleSA9IHN1YnNjcmlwdGlvbktleTtcbiAgICAgICAgcmV0dXJuIGxhbmdNb2RlbEltcDtcbiAgICB9XG59XG4vKipcbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWxJbXBsXG4gKi9cbmV4cG9ydCBjbGFzcyBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbEltcGwgZXh0ZW5kcyBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbCB7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBFdmVudFR5cGUgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbi8qKlxuICogRGVmaW5lIGV2ZW50IHNldmVyaXR5IHR5cGVzIGZvciBzZXR0aW5nIGxvZ2dpbmcgb3V0cHV0LlxuICogQGNsYXNzIExvZ0xldmVsXG4gKi9cbmV4cG9ydCB7IEV2ZW50VHlwZSBhcyBMb2dMZXZlbCB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Mb2dMZXZlbC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUmVjb2duaXRpb25TdGF0dXMsIFNpbXBsZVNwZWVjaFBocmFzZSB9IGZyb20gXCIuLi8uLi9zcmMvY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBOb01hdGNoUmVhc29uIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBDb250YWlucyBkZXRhaWxlZCBpbmZvcm1hdGlvbiBmb3IgTm9NYXRjaCByZWNvZ25pdGlvbiByZXN1bHRzLlxuICogQGNsYXNzIE5vTWF0Y2hEZXRhaWxzXG4gKi9cbmV4cG9ydCBjbGFzcyBOb01hdGNoRGV0YWlscyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge05vTWF0Y2hSZWFzb259IHJlYXNvbiAtIFRoZSBuby1tYXRjaCByZWFzb24uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVhc29uKSB7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlYXNvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBOb01hdGNoRGV0YWlscyBvYmplY3QgZm9yIHRoZSBOb01hdGNoIFNwZWVjaFJlY29nbml0aW9uUmVzdWx0cy5cbiAgICAgKiBAbWVtYmVyIE5vTWF0Y2hEZXRhaWxzLmZyb21SZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtTcGVlY2hSZWNvZ25pdGlvblJlc3VsdCB8IEludGVudFJlY29nbml0aW9uUmVzdWx0IHwgVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdH1cbiAgICAgKiByZXN1bHQgLSBUaGUgcmVjb2duaXRpb24gcmVzdWx0IHRoYXQgd2FzIG5vdCByZWNvZ25pemVkLlxuICAgICAqIEByZXR1cm5zIHtOb01hdGNoRGV0YWlsc30gVGhlIG5vIG1hdGNoIGRldGFpbHMgb2JqZWN0IGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21SZXN1bHQocmVzdWx0KSB7XG4gICAgICAgIGNvbnN0IHNpbXBsZVNwZWVjaCA9IFNpbXBsZVNwZWVjaFBocmFzZS5mcm9tSlNPTihyZXN1bHQuanNvbik7XG4gICAgICAgIGxldCByZWFzb24gPSBOb01hdGNoUmVhc29uLk5vdFJlY29nbml6ZWQ7XG4gICAgICAgIHN3aXRjaCAoc2ltcGxlU3BlZWNoLlJlY29nbml0aW9uU3RhdHVzKSB7XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLkJhYmJsZVRpbWVvdXQ6XG4gICAgICAgICAgICAgICAgcmVhc29uID0gTm9NYXRjaFJlYXNvbi5Jbml0aWFsQmFiYmxlVGltZW91dDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25TdGF0dXMuSW5pdGlhbFNpbGVuY2VUaW1lb3V0OlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IE5vTWF0Y2hSZWFzb24uSW5pdGlhbFNpbGVuY2VUaW1lb3V0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFzb24gPSBOb01hdGNoUmVhc29uLk5vdFJlY29nbml6ZWQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBOb01hdGNoRGV0YWlscyhyZWFzb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcmVhc29uIHRoZSByZWNvZ25pdGlvbiB3YXMgY2FuY2VsZWQuXG4gICAgICogQG1lbWJlciBOb01hdGNoRGV0YWlscy5wcm90b3R5cGUucmVhc29uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtOb01hdGNoUmVhc29ufSBTcGVjaWZpZXMgdGhlIHJlYXNvbiBjYW5jZWxlZC5cbiAgICAgKi9cbiAgICBnZXQgcmVhc29uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVhc29uO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Tm9NYXRjaERldGFpbHMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogRGVmaW5lcyB0aGUgcG9zc2libGUgcmVhc29ucyBhIHJlY29nbml0aW9uIHJlc3VsdCBtaWdodCBub3QgYmUgcmVjb2duaXplZC5cbiAqIEBjbGFzcyBOb01hdGNoUmVhc29uXG4gKi9cbmV4cG9ydCB2YXIgTm9NYXRjaFJlYXNvbjtcbihmdW5jdGlvbiAoTm9NYXRjaFJlYXNvbikge1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHNwZWVjaCB3YXMgZGV0ZWN0ZWQsIGJ1dCBub3QgcmVjb2duaXplZC5cbiAgICAgKiBAbWVtYmVyIE5vTWF0Y2hSZWFzb24uTm90UmVjb2duaXplZFxuICAgICAqL1xuICAgIE5vTWF0Y2hSZWFzb25bTm9NYXRjaFJlYXNvbltcIk5vdFJlY29nbml6ZWRcIl0gPSAwXSA9IFwiTm90UmVjb2duaXplZFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBzdGFydCBvZiB0aGUgYXVkaW8gc3RyZWFtIGNvbnRhaW5lZCBvbmx5IHNpbGVuY2UsXG4gICAgICogYW5kIHRoZSBzZXJ2aWNlIHRpbWVkIG91dCB3YWl0aW5nIGZvciBzcGVlY2guXG4gICAgICogQG1lbWJlciBOb01hdGNoUmVhc29uLkluaXRpYWxTaWxlbmNlVGltZW91dFxuICAgICAqL1xuICAgIE5vTWF0Y2hSZWFzb25bTm9NYXRjaFJlYXNvbltcIkluaXRpYWxTaWxlbmNlVGltZW91dFwiXSA9IDFdID0gXCJJbml0aWFsU2lsZW5jZVRpbWVvdXRcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCB0aGUgc3RhcnQgb2YgdGhlIGF1ZGlvIHN0cmVhbSBjb250YWluZWQgb25seSBub2lzZSxcbiAgICAgKiBhbmQgdGhlIHNlcnZpY2UgdGltZWQgb3V0IHdhaXRpbmcgZm9yIHNwZWVjaC5cbiAgICAgKiBAbWVtYmVyIE5vTWF0Y2hSZWFzb24uSW5pdGlhbEJhYmJsZVRpbWVvdXRcbiAgICAgKi9cbiAgICBOb01hdGNoUmVhc29uW05vTWF0Y2hSZWFzb25bXCJJbml0aWFsQmFiYmxlVGltZW91dFwiXSA9IDJdID0gXCJJbml0aWFsQmFiYmxlVGltZW91dFwiO1xufSkoTm9NYXRjaFJlYXNvbiB8fCAoTm9NYXRjaFJlYXNvbiA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU5vTWF0Y2hSZWFzb24uanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogRGVmaW5lIFNwZWVjaCBSZWNvZ25pemVyIG91dHB1dCBmb3JtYXRzLlxuICogQGNsYXNzIE91dHB1dEZvcm1hdFxuICovXG5leHBvcnQgdmFyIE91dHB1dEZvcm1hdDtcbihmdW5jdGlvbiAoT3V0cHV0Rm9ybWF0KSB7XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBPdXRwdXRGb3JtYXQuU2ltcGxlXG4gICAgICovXG4gICAgT3V0cHV0Rm9ybWF0W091dHB1dEZvcm1hdFtcIlNpbXBsZVwiXSA9IDBdID0gXCJTaW1wbGVcIjtcbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIE91dHB1dEZvcm1hdC5EZXRhaWxlZFxuICAgICAqL1xuICAgIE91dHB1dEZvcm1hdFtPdXRwdXRGb3JtYXRbXCJEZXRhaWxlZFwiXSA9IDFdID0gXCJEZXRhaWxlZFwiO1xufSkoT3V0cHV0Rm9ybWF0IHx8IChPdXRwdXRGb3JtYXQgPSB7fSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1PdXRwdXRGb3JtYXQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogQWxsb3dzIGFkZGl0aW9ucyBvZiBuZXcgcGhyYXNlcyB0byBpbXByb3ZlIHNwZWVjaCByZWNvZ25pdGlvbi5cbiAqXG4gKiBQaHJhc2VzIGFkZGVkIHRvIHRoZSByZWNvZ25pemVyIGFyZSBlZmZlY3RpdmUgYXQgdGhlIHN0YXJ0IG9mIHRoZSBuZXh0IHJlY29nbml0aW9uLCBvciB0aGUgbmV4dCB0aW1lIHRoZSBTcGVlY2hTREsgbXVzdCByZWNvbm5lY3RcbiAqIHRvIHRoZSBzcGVlY2ggc2VydmljZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFBocmFzZUxpc3RHcmFtbWFyIHtcbiAgICBjb25zdHJ1Y3RvcihyZWNvZ0Jhc2UpIHtcbiAgICAgICAgdGhpcy5wcml2R3JhbW1lckJ1aWxkZXIgPSByZWNvZ0Jhc2UuZHluYW1pY0dyYW1tYXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBQaHJhc2VMaXN0R3JhbW1hciBmcm9tIGEgZ2l2ZW4gc3BlZWNoIHJlY29nbml6ZXIuIFdpbGwgYWNjZXB0IGFueSByZWNvZ25pemVyIHRoYXQgZGVyaXZlcyBmcm9tIEBjbGFzcyBSZWNvZ25pemVyLlxuICAgICAqIEBwYXJhbSByZWNvZ25pemVyIFRoZSByZWNvZ25pemVyIHRvIGFkZCBwaHJhc2UgbGlzdHMgdG8uXG4gICAgICovXG4gICAgc3RhdGljIGZyb21SZWNvZ25pemVyKHJlY29nbml6ZXIpIHtcbiAgICAgICAgY29uc3QgcmVjb0Jhc2UgPSByZWNvZ25pemVyLmludGVybmFsRGF0YTtcbiAgICAgICAgcmV0dXJuIG5ldyBQaHJhc2VMaXN0R3JhbW1hcihyZWNvQmFzZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBzaW5nbGUgcGhyYXNlIHRvIHRoZSBjdXJyZW50IHJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHBocmFzZSBQaHJhc2UgdG8gYWRkLlxuICAgICAqL1xuICAgIGFkZFBocmFzZShwaHJhc2UpIHtcbiAgICAgICAgdGhpcy5wcml2R3JhbW1lckJ1aWxkZXIuYWRkUGhyYXNlKHBocmFzZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgbXVsdGlwbGUgcGhyYXNlcyB0byB0aGUgY3VycmVudCByZWNvZ25pemVyLlxuICAgICAqIEBwYXJhbSBwaHJhc2VzIEFycmF5IG9mIHBocmFzZXMgdG8gYWRkLlxuICAgICAqL1xuICAgIGFkZFBocmFzZXMocGhyYXNlcykge1xuICAgICAgICB0aGlzLnByaXZHcmFtbWVyQnVpbGRlci5hZGRQaHJhc2UocGhyYXNlcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyBhbGwgcGhyYXNlcyBhZGRlZCB0byB0aGUgY3VycmVudCByZWNvZ25pemVyLlxuICAgICAqL1xuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLnByaXZHcmFtbWVyQnVpbGRlci5jbGVhclBocmFzZXMoKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBocmFzZUxpc3RHcmFtbWFyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIFByb2Zhbml0eSBvcHRpb24uXG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNy4wLlxuICovXG5leHBvcnQgdmFyIFByb2Zhbml0eU9wdGlvbjtcbihmdW5jdGlvbiAoUHJvZmFuaXR5T3B0aW9uKSB7XG4gICAgUHJvZmFuaXR5T3B0aW9uW1Byb2Zhbml0eU9wdGlvbltcIk1hc2tlZFwiXSA9IDBdID0gXCJNYXNrZWRcIjtcbiAgICBQcm9mYW5pdHlPcHRpb25bUHJvZmFuaXR5T3B0aW9uW1wiUmVtb3ZlZFwiXSA9IDFdID0gXCJSZW1vdmVkXCI7XG4gICAgUHJvZmFuaXR5T3B0aW9uW1Byb2Zhbml0eU9wdGlvbltcIlJhd1wiXSA9IDJdID0gXCJSYXdcIjtcbn0pKFByb2Zhbml0eU9wdGlvbiB8fCAoUHJvZmFuaXR5T3B0aW9uID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJvZmFuaXR5T3B0aW9uLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IFByb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhZGluZ1N5c3RlbSwgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFudWxhcml0eSwgUHJvcGVydHlDb2xsZWN0aW9uLCBQcm9wZXJ0eUlkIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBQcm9udW5jaWF0aW9uIGFzc2Vzc21lbnQgY29uZmlndXJhdGlvbi5cbiAqIEBjbGFzcyBQcm9udW5jaWF0aW9uQXNzZXNzbWVudENvbmZpZ1xuICogQWRkZWQgaW4gdmVyc2lvbiAxLjE1LjAuXG4gKi9cbmV4cG9ydCBjbGFzcyBQcm9udW5jaWF0aW9uQXNzZXNzbWVudENvbmZpZyB7XG4gICAgLyoqXG4gICAgICogUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRDb25maWcgY29uc3RydWN0b3IuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlZmVyZW5jZVRleHRcbiAgICAgKiBAcGFyYW0gZ3JhZGluZ1N5c3RlbVxuICAgICAqIEBwYXJhbSBncmFudWxhcml0eVxuICAgICAqIEBwYXJhbSBlbmFibGVNaXNjdWVcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZWZlcmVuY2VUZXh0LCBncmFkaW5nU3lzdGVtID0gUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFkaW5nU3lzdGVtLkZpdmVQb2ludCwgZ3JhbnVsYXJpdHkgPSBQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYW51bGFyaXR5LlBob25lbWUsIGVuYWJsZU1pc2N1ZSA9IGZhbHNlKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHJlZmVyZW5jZVRleHQsIFwicmVmZXJlbmNlVGV4dFwiKTtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlByb251bmNpYXRpb25Bc3Nlc3NtZW50X1JlZmVyZW5jZVRleHQsIHJlZmVyZW5jZVRleHQpO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfR3JhZGluZ1N5c3RlbSwgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFkaW5nU3lzdGVtW2dyYWRpbmdTeXN0ZW1dKTtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlByb251bmNpYXRpb25Bc3Nlc3NtZW50X0dyYW51bGFyaXR5LCBQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYW51bGFyaXR5W2dyYW51bGFyaXR5XSk7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Qcm9udW5jaWF0aW9uQXNzZXNzbWVudF9FbmFibGVNaXNjdWUsIFN0cmluZyhlbmFibGVNaXNjdWUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBQcm9udW5jaWF0aW9uQXNzZXNzbWVudENvbmZpZy5mcm9tSlNPTlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ganNvbiBUaGUganNvbiBzdHJpbmcgY29udGFpbmluZyB0aGUgcHJvbnVuY2lhdGlvbiBhc3Nlc3NtZW50IHBhcmFtZXRlcnMuXG4gICAgICogQHJldHVybiB7UHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRDb25maWd9IEluc3RhbmNlIG9mIFByb251bmNpYXRpb25Bc3Nlc3NtZW50Q29uZmlnXG4gICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRDb25maWcgZnJvbSBqc29uLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGpzb24sIFwianNvblwiKTtcbiAgICAgICAgY29uc3QgY29uZmlnID0gbmV3IFByb251bmNpYXRpb25Bc3Nlc3NtZW50Q29uZmlnKFwiXCIpO1xuICAgICAgICBjb25maWcucHJpdlByb3BlcnRpZXMgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgIGNvbmZpZy5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfSnNvbiwganNvbik7XG4gICAgICAgIHJldHVybiBjb25maWc7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgdGhpcy51cGRhdGVKc29uKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfUGFyYW1zKTtcbiAgICB9XG4gICAgYXBwbHlUbyhyZWNvZ25pemVyKSB7XG4gICAgICAgIHRoaXMudXBkYXRlSnNvbigpO1xuICAgICAgICBjb25zdCByZWNvQmFzZSA9IHJlY29nbml6ZXIuaW50ZXJuYWxEYXRhO1xuICAgICAgICByZWNvQmFzZS5zcGVlY2hDb250ZXh0LnNldFByb251bmNpYXRpb25Bc3Nlc3NtZW50UGFyYW1zKHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlByb251bmNpYXRpb25Bc3Nlc3NtZW50X1BhcmFtcykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSByZWZlcmVuY2UgdGV4dC5cbiAgICAgKiBAbWVtYmVyIFByb251bmNpYXRpb25Bc3Nlc3NtZW50Q29uZmlnLnByb3RvdHlwZS5yZWZlcmVuY2VUZXh0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJlZmVyZW5jZSB0ZXh0LlxuICAgICAqL1xuICAgIGdldCByZWZlcmVuY2VUZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfUmVmZXJlbmNlVGV4dCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMvU2V0cyB0aGUgcmVmZXJlbmNlIHRleHQuXG4gICAgICogQG1lbWJlciBQcm9udW5jaWF0aW9uQXNzZXNzbWVudENvbmZpZy5wcm90b3R5cGUucmVmZXJlbmNlVGV4dFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVmZXJlbmNlVGV4dCAtIFJlZmVyZW5jZSB0ZXh0LlxuICAgICAqL1xuICAgIHNldCByZWZlcmVuY2VUZXh0KHJlZmVyZW5jZVRleHQpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHJlZmVyZW5jZVRleHQsIFwicmVmZXJlbmNlVGV4dFwiKTtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfUmVmZXJlbmNlVGV4dCwgcmVmZXJlbmNlVGV4dCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHBob25lbWUgYWxwaGFiZXQuXG4gICAgICogVGhlIHZhbGlkIHZhbHVlcyBhcmUgXCJTQVBJXCIgKGRlZmF1bHQpIGFuZCBcIklQQVwiLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4yMC4wXG4gICAgICogQG1lbWJlciBQcm9udW5jaWF0aW9uQXNzZXNzbWVudENvbmZpZy5wcm90b3R5cGUucGhvbmVtZUFscGhhYmV0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwaG9uZW1lQWxwaGFiZXQgLSBQaG9uZW1lIGFscGhhYmV0LlxuICAgICAqL1xuICAgIHNldCBwaG9uZW1lQWxwaGFiZXQocGhvbmVtZUFscGhhYmV0KSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShwaG9uZW1lQWxwaGFiZXQsIFwicGhvbmVtZUFscGhhYmV0XCIpO1xuICAgICAgICB0aGlzLnByaXZQaG9uZW1lQWxwaGFiZXQgPSBwaG9uZW1lQWxwaGFiZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIG5iZXN0IHBob25lbWUgY291bnRcbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMjAuMFxuICAgICAqIEBtZW1iZXIgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRDb25maWcucHJvdG90eXBlLm5iZXN0UGhvbmVtZUNvdW50XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuYmVzdFBob25lbWVDb3VudCAtIE5CZXN0IHBob25lbWUgY291bnQuXG4gICAgICovXG4gICAgc2V0IG5iZXN0UGhvbmVtZUNvdW50KG5iZXN0UGhvbmVtZUNvdW50KSB7XG4gICAgICAgIHRoaXMucHJpdk5CZXN0UGhvbmVtZUNvdW50ID0gbmJlc3RQaG9uZW1lQ291bnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBtZW1iZXIgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRDb25maWcucHJvdG90eXBlLnByb3BlcnRpZXNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybiB7UHJvcGVydHlDb2xsZWN0aW9ufSBQcm9wZXJ0aWVzIG9mIHRoZSBjb25maWcuXG4gICAgICogQHN1bW1hcnkgR2V0cyBhIHByb251bmNpYXRpb24gYXNzZXNzbWVudCBjb25maWcgcHJvcGVydGllc1xuICAgICAqL1xuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcztcbiAgICB9XG4gICAgdXBkYXRlSnNvbigpIHtcbiAgICAgICAgY29uc3QganNvblN0cmluZyA9IHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Qcm9udW5jaWF0aW9uQXNzZXNzbWVudF9Kc29uLCBcInt9XCIpO1xuICAgICAgICBjb25zdCBwYXJhbXNKc29uID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcbiAgICAgICAgY29uc3QgcmVmZXJlbmNlVGV4dCA9IHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Qcm9udW5jaWF0aW9uQXNzZXNzbWVudF9SZWZlcmVuY2VUZXh0KTtcbiAgICAgICAgaWYgKHJlZmVyZW5jZVRleHQpIHtcbiAgICAgICAgICAgIHBhcmFtc0pzb24ucmVmZXJlbmNlVGV4dCA9IHJlZmVyZW5jZVRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ3JhZGluZ1N5c3RlbSA9IHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Qcm9udW5jaWF0aW9uQXNzZXNzbWVudF9HcmFkaW5nU3lzdGVtKTtcbiAgICAgICAgaWYgKGdyYWRpbmdTeXN0ZW0pIHtcbiAgICAgICAgICAgIHBhcmFtc0pzb24uZ3JhZGluZ1N5c3RlbSA9IGdyYWRpbmdTeXN0ZW07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ3JhbnVsYXJpdHkgPSB0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfR3JhbnVsYXJpdHkpO1xuICAgICAgICBpZiAoZ3JhbnVsYXJpdHkpIHtcbiAgICAgICAgICAgIHBhcmFtc0pzb24uZ3JhbnVsYXJpdHkgPSBncmFudWxhcml0eTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcml2UGhvbmVtZUFscGhhYmV0KSB7XG4gICAgICAgICAgICBwYXJhbXNKc29uLnBob25lbWVBbHBoYWJldCA9IHRoaXMucHJpdlBob25lbWVBbHBoYWJldDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcml2TkJlc3RQaG9uZW1lQ291bnQpIHtcbiAgICAgICAgICAgIHBhcmFtc0pzb24ubmJlc3RQaG9uZW1lQ291bnQgPSB0aGlzLnByaXZOQmVzdFBob25lbWVDb3VudDtcbiAgICAgICAgfVxuICAgICAgICAvLyBhbHdheXMgc2V0IGRpbWVuc2lvbiB0byBDb21wcmVoZW5zaXZlXG4gICAgICAgIHBhcmFtc0pzb24uZGltZW5zaW9uID0gXCJDb21wcmVoZW5zaXZlXCI7XG4gICAgICAgIGNvbnN0IGVuYWJsZU1pc2N1ZVN0cmluZyA9IHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Qcm9udW5jaWF0aW9uQXNzZXNzbWVudF9FbmFibGVNaXNjdWUpO1xuICAgICAgICBpZiAoZW5hYmxlTWlzY3VlU3RyaW5nID09PSBcInRydWVcIikge1xuICAgICAgICAgICAgcGFyYW1zSnNvbi5lbmFibGVNaXNjdWUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGVuYWJsZU1pc2N1ZVN0cmluZyA9PT0gXCJmYWxzZVwiKSB7XG4gICAgICAgICAgICBwYXJhbXNKc29uLmVuYWJsZU1pc2N1ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Qcm9udW5jaWF0aW9uQXNzZXNzbWVudF9QYXJhbXMsIEpTT04uc3RyaW5naWZ5KHBhcmFtc0pzb24pKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb251bmNpYXRpb25Bc3Nlc3NtZW50Q29uZmlnLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgdGhlIHBvaW50IHN5c3RlbSBmb3IgcHJvbnVuY2lhdGlvbiBzY29yZSBjYWxpYnJhdGlvbjsgZGVmYXVsdCB2YWx1ZSBpcyBGaXZlUG9pbnQuXG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTUuMFxuICogQGNsYXNzIFByb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhZGluZ1N5c3RlbVxuICovXG5leHBvcnQgdmFyIFByb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhZGluZ1N5c3RlbTtcbihmdW5jdGlvbiAoUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFkaW5nU3lzdGVtKSB7XG4gICAgLyoqXG4gICAgICogRml2ZSBwb2ludCBjYWxpYnJhdGlvblxuICAgICAqIEBtZW1iZXIgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFkaW5nU3lzdGVtLkZpdmVQb2ludFxuICAgICAqL1xuICAgIFByb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhZGluZ1N5c3RlbVtQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYWRpbmdTeXN0ZW1bXCJGaXZlUG9pbnRcIl0gPSAxXSA9IFwiRml2ZVBvaW50XCI7XG4gICAgLyoqXG4gICAgICogSHVuZHJlZCBtYXJrXG4gICAgICogQG1lbWJlciBQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYWRpbmdTeXN0ZW0uSHVuZHJlZE1hcmtcbiAgICAgKi9cbiAgICBQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYWRpbmdTeXN0ZW1bUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFkaW5nU3lzdGVtW1wiSHVuZHJlZE1hcmtcIl0gPSAyXSA9IFwiSHVuZHJlZE1hcmtcIjtcbn0pKFByb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhZGluZ1N5c3RlbSB8fCAoUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFkaW5nU3lzdGVtID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFkaW5nU3lzdGVtLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgdGhlIHByb251bmNpYXRpb24gZXZhbHVhdGlvbiBncmFudWxhcml0eTsgZGVmYXVsdCB2YWx1ZSBpcyBQaG9uZW1lLlxuICogQWRkZWQgaW4gdmVyc2lvbiAxLjE1LjBcbiAqIEBjbGFzcyBQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYW51bGFyaXR5XG4gKi9cbmV4cG9ydCB2YXIgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFudWxhcml0eTtcbihmdW5jdGlvbiAoUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFudWxhcml0eSkge1xuICAgIC8qKlxuICAgICAqIFNob3dzIHRoZSBzY29yZSBvbiB0aGUgZnVsbCB0ZXh0LCB3b3JkIGFuZCBwaG9uZW1lIGxldmVsXG4gICAgICogQG1lbWJlciBQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYW51bGFyaXR5LlBob25lbWVcbiAgICAgKi9cbiAgICBQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYW51bGFyaXR5W1Byb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhbnVsYXJpdHlbXCJQaG9uZW1lXCJdID0gMV0gPSBcIlBob25lbWVcIjtcbiAgICAvKipcbiAgICAgKiBTaG93cyB0aGUgc2NvcmUgb24gdGhlIGZ1bGwgdGV4dCBhbmQgd29yZCBsZXZlbFxuICAgICAqIEBtZW1iZXIgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFudWxhcml0eS5Xb3JkXG4gICAgICovXG4gICAgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFudWxhcml0eVtQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYW51bGFyaXR5W1wiV29yZFwiXSA9IDJdID0gXCJXb3JkXCI7XG4gICAgLyoqXG4gICAgICogU2hvd3MgdGhlIHNjb3JlIG9uIHRoZSBmdWxsIHRleHQgbGV2ZWwgb25seVxuICAgICAqIEBtZW1iZXIgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFudWxhcml0eS5GdWxsVGV4dFxuICAgICAqL1xuICAgIFByb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhbnVsYXJpdHlbUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFudWxhcml0eVtcIkZ1bGxUZXh0XCJdID0gM10gPSBcIkZ1bGxUZXh0XCI7XG59KShQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYW51bGFyaXR5IHx8IChQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYW51bGFyaXR5ID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFudWxhcml0eS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUlkIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBQcm9udW5jaWF0aW9uIGFzc2Vzc21lbnQgcmVzdWx0cy5cbiAqIEBjbGFzcyBQcm9udW5jaWF0aW9uQXNzZXNzbWVudFJlc3VsdFxuICogQWRkZWQgaW4gdmVyc2lvbiAxLjE1LjAuXG4gKi9cbmV4cG9ydCBjbGFzcyBQcm9udW5jaWF0aW9uQXNzZXNzbWVudFJlc3VsdCB7XG4gICAgY29uc3RydWN0b3IoanNvblN0cmluZykge1xuICAgICAgICBjb25zdCBqID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoai5OQmVzdFswXSwgXCJOQmVzdFwiKTtcbiAgICAgICAgdGhpcy5wcml2UHJvbkpzb24gPSBqLk5CZXN0WzBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIFByb251bmNpYXRpb25Bc3Nlc3NtZW50UmVzdWx0LmZyb21SZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtSZWNvZ25pdGlvblJlc3VsdH0gcmVzdWx0IFRoZSByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICogQHJldHVybiB7UHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRDb25maWd9IEluc3RhbmNlIG9mIFByb251bmNpYXRpb25Bc3Nlc3NtZW50Q29uZmlnXG4gICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRSZXN1bHQgZnJvbSByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21SZXN1bHQocmVzdWx0KSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHJlc3VsdCwgXCJyZXN1bHRcIik7XG4gICAgICAgIGNvbnN0IGpzb24gPSByZXN1bHQucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uUmVzdWx0KTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoanNvbiwgXCJqc29uXCIpO1xuICAgICAgICByZXR1cm4gbmV3IFByb251bmNpYXRpb25Bc3Nlc3NtZW50UmVzdWx0KGpzb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBkZXRhaWwgcmVzdWx0IG9mIHByb251bmNpYXRpb24gYXNzZXNzbWVudC5cbiAgICAgKiBAbWVtYmVyIFByb251bmNpYXRpb25Bc3Nlc3NtZW50Q29uZmlnLnByb3RvdHlwZS5kZXRhaWxSZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge0RldGFpbFJlc3VsdH0gZGV0YWlsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBnZXQgZGV0YWlsUmVzdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvbkpzb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBzY29yZSBpbmRpY2F0aW5nIHRoZSBwcm9udW5jaWF0aW9uIGFjY3VyYWN5IG9mIHRoZSBnaXZlbiBzcGVlY2gsIHdoaWNoIGluZGljYXRlc1xuICAgICAqIGhvdyBjbG9zZWx5IHRoZSBwaG9uZW1lcyBtYXRjaCBhIG5hdGl2ZSBzcGVha2VyJ3MgcHJvbnVuY2lhdGlvbi5cbiAgICAgKiBAbWVtYmVyIFByb251bmNpYXRpb25Bc3Nlc3NtZW50UmVzdWx0LnByb3RvdHlwZS5hY2N1cmFjeVNjb3JlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IEFjY3VyYWN5IHNjb3JlLlxuICAgICAqL1xuICAgIGdldCBhY2N1cmFjeVNjb3JlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZXRhaWxSZXN1bHQuUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnQuQWNjdXJhY3lTY29yZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIG92ZXJhbGwgc2NvcmUgaW5kaWNhdGluZyB0aGUgcHJvbnVuY2lhdGlvbiBxdWFsaXR5IG9mIHRoZSBnaXZlbiBzcGVlY2guXG4gICAgICogVGhpcyBpcyBjYWxjdWxhdGVkIGZyb20gQWNjdXJhY3lTY29yZSwgRmx1ZW5jeVNjb3JlIGFuZCBDb21wbGV0ZW5lc3NTY29yZSB3aXRoIHdlaWdodC5cbiAgICAgKiBAbWVtYmVyIFByb251bmNpYXRpb25Bc3Nlc3NtZW50UmVzdWx0LnByb3RvdHlwZS5wcm9udW5jaWF0aW9uU2NvcmVcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge251bWJlcn0gUHJvbnVuY2lhdGlvbiBzY29yZS5cbiAgICAgKi9cbiAgICBnZXQgcHJvbnVuY2lhdGlvblNjb3JlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZXRhaWxSZXN1bHQuUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnQuUHJvblNjb3JlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgaW5kaWNhdGluZyB0aGUgY29tcGxldGVuZXNzIG9mIHRoZSBnaXZlbiBzcGVlY2ggYnkgY2FsY3VsYXRpbmcgdGhlIHJhdGlvIG9mIHByb25vdW5jZWQgd29yZHMgdG93YXJkcyBlbnRpcmUgaW5wdXQuXG4gICAgICogQG1lbWJlciBQcm9udW5jaWF0aW9uQXNzZXNzbWVudFJlc3VsdC5wcm90b3R5cGUuY29tcGxldGVuZXNzU2NvcmVcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge251bWJlcn0gQ29tcGxldGVuZXNzIHNjb3JlLlxuICAgICAqL1xuICAgIGdldCBjb21wbGV0ZW5lc3NTY29yZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGV0YWlsUmVzdWx0LlByb251bmNpYXRpb25Bc3Nlc3NtZW50LkNvbXBsZXRlbmVzc1Njb3JlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgaW5kaWNhdGluZyB0aGUgZmx1ZW5jeSBvZiB0aGUgZ2l2ZW4gc3BlZWNoLlxuICAgICAqIEBtZW1iZXIgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRSZXN1bHQucHJvdG90eXBlLmZsdWVuY3lTY29yZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBGbHVlbmN5IHNjb3JlLlxuICAgICAqL1xuICAgIGdldCBmbHVlbmN5U2NvcmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRldGFpbFJlc3VsdC5Qcm9udW5jaWF0aW9uQXNzZXNzbWVudC5GbHVlbmN5U2NvcmU7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9udW5jaWF0aW9uQXNzZXNzbWVudFJlc3VsdC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogUmVwcmVzZW50cyBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcy5cbiAqIEBjbGFzcyBQcm9wZXJ0eUNvbGxlY3Rpb25cbiAqL1xuZXhwb3J0IGNsYXNzIFByb3BlcnR5Q29sbGVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJpdktleXMgPSBbXTtcbiAgICAgICAgdGhpcy5wcml2VmFsdWVzID0gW107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIGluIHR5cGUgU3RyaW5nLlxuICAgICAqIEN1cnJlbnRseSBvbmx5IFN0cmluZywgaW50IGFuZCBib29sIGFyZSBhbGxvd2VkLlxuICAgICAqIElmIHRoZSBuYW1lIGlzIG5vdCBhdmFpbGFibGUsIHRoZSBzcGVjaWZpZWQgZGVmYXVsdFZhbHVlIGlzIHJldHVybmVkLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXRQcm9wZXJ0eVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVGhlIHBhcmFtZXRlciBuYW1lLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbn0gZGVmIC0gVGhlIGRlZmF1bHQgdmFsdWUgd2hpY2ggaXMgcmV0dXJuZWQgaWYgdGhlIHBhcmFtZXRlclxuICAgICAqIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQHJldHVybnMge3N0cmluZ30gdmFsdWUgb2YgdGhlIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRQcm9wZXJ0eShrZXksIGRlZikge1xuICAgICAgICBsZXQga2V5VG9Vc2U7XG4gICAgICAgIGlmICh0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBrZXlUb1VzZSA9IGtleTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGtleVRvVXNlID0gUHJvcGVydHlJZFtrZXldO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdGhpcy5wcml2S2V5cy5sZW5ndGg7IG4rKykge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdktleXNbbl0gPT09IGtleVRvVXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlZhbHVlc1tuXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFN0cmluZyhkZWYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBTdHJpbmcgdmFsdWUgb2YgdGhlIHBhcmFtZXRlciBzcGVjaWZpZWQgYnkgbmFtZS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5Q29sbGVjdGlvbi5wcm90b3R5cGUuc2V0UHJvcGVydHlcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIFRoZSBwYXJhbWV0ZXIgbmFtZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgdmFsdWUgb2YgdGhlIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBzZXRQcm9wZXJ0eShrZXksIHZhbHVlKSB7XG4gICAgICAgIGxldCBrZXlUb1VzZTtcbiAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGtleVRvVXNlID0ga2V5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAga2V5VG9Vc2UgPSBQcm9wZXJ0eUlkW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0aGlzLnByaXZLZXlzLmxlbmd0aDsgbisrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2S2V5c1tuXSA9PT0ga2V5VG9Vc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZWYWx1ZXNbbl0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2S2V5cy5wdXNoKGtleVRvVXNlKTtcbiAgICAgICAgdGhpcy5wcml2VmFsdWVzLnB1c2godmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9uZXMgdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUNvbGxlY3Rpb24ucHJvdG90eXBlLmNsb25lXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IEEgY29weSBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKi9cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3QgY2xvbmVkTWFwID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHRoaXMucHJpdktleXMubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgICAgIGNsb25lZE1hcC5wcml2S2V5cy5wdXNoKHRoaXMucHJpdktleXNbbl0pO1xuICAgICAgICAgICAgY2xvbmVkTWFwLnByaXZWYWx1ZXMucHVzaCh0aGlzLnByaXZWYWx1ZXNbbl0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjbG9uZWRNYXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1lcmdlcyB0aGlzIHNldCBvZiBwcm9wZXJ0aWVzIGludG8gYW5vdGhlciwgbm8gb3ZlcndyaXRlcy5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5Q29sbGVjdGlvbi5wcm90b3R5cGUubWVyZ2VUb1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1Byb3BlcnR5Q29sbGVjdGlvbn0gIGRlc3RpbmF0aW9uQ29sbGVjdGlvbiAtIFRoZSBjb2xsZWN0aW9uIHRvIG1lcmdlIGludG8uXG4gICAgICovXG4gICAgbWVyZ2VUbyhkZXN0aW5hdGlvbkNvbGxlY3Rpb24pIHtcbiAgICAgICAgdGhpcy5wcml2S2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGlmIChkZXN0aW5hdGlvbkNvbGxlY3Rpb24uZ2V0UHJvcGVydHkoa2V5LCB1bmRlZmluZWQpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0UHJvcGVydHkoa2V5KTtcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbkNvbGxlY3Rpb24uc2V0UHJvcGVydHkoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGtleXMgaW4gUHJvcGVydHkgQ29sbGVjdGlvbi5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5Q29sbGVjdGlvbi5wcm90b3R5cGUua2V5c1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nIFtdfSBLZXlzIGluIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBrZXlzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2S2V5cztcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb3BlcnR5Q29sbGVjdGlvbi5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBEZWZpbmVzIHNwZWVjaCBwcm9wZXJ0eSBpZHMuXG4gKiBAY2xhc3MgUHJvcGVydHlJZFxuICovXG5leHBvcnQgdmFyIFByb3BlcnR5SWQ7XG4oZnVuY3Rpb24gKFByb3BlcnR5SWQpIHtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIHN1YnNjcmlwdGlvbiBLZXkuIElmIHlvdSBhcmUgdXNpbmcgYW4gaW50ZW50IHJlY29nbml6ZXIsIHlvdSBuZWVkIHRvXG4gICAgICogc3BlY2lmeSB0aGUgTFVJUyBlbmRwb2ludCBrZXkgZm9yIHlvdXIgcGFydGljdWxhciBMVUlTIGFwcC4gVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIHlvdSBzaG91bGRuJ3RcbiAgICAgKiBoYXZlIHRvIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEluc3RlYWQsIHVzZSBbW1NwZWVjaENvbmZpZy5mcm9tU3Vic2NyaXB0aW9uXV0uXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleVxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleVwiXSA9IDBdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXlcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIGVuZHBvaW50ICh1cmwpLiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgeW91IHNob3VsZG4ndFxuICAgICAqIGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCwgdXNlIFtbU3BlZWNoQ29uZmlnLmZyb21FbmRwb2ludF1dLlxuICAgICAqIE5PVEU6IFRoaXMgZW5kcG9pbnQgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSBlbmRwb2ludCB1c2VkIHRvIG9idGFpbiBhbiBhY2Nlc3MgdG9rZW4uXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50XG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnRcIl0gPSAxXSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIHJlZ2lvbi4gVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIHlvdSBzaG91bGRuJ3QgaGF2ZSB0b1xuICAgICAqIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEluc3RlYWQsIHVzZSBbW1NwZWVjaENvbmZpZy5mcm9tU3Vic2NyaXB0aW9uXV0sIFtbU3BlZWNoQ29uZmlnLmZyb21FbmRwb2ludF1dLCBbW1NwZWVjaENvbmZpZy5mcm9tQXV0aG9yaXphdGlvblRva2VuXV0uXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvblxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvblwiXSA9IDJdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb25cIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIGF1dGhvcml6YXRpb24gdG9rZW4gKGFrYSBhY2Nlc3MgdG9rZW4pLiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcyxcbiAgICAgKiB5b3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCwgdXNlIFtbU3BlZWNoQ29uZmlnLmZyb21BdXRob3JpemF0aW9uVG9rZW5dXSwgW1tTcGVlY2hSZWNvZ25pemVyLmF1dGhvcml6YXRpb25Ub2tlbl1dLFxuICAgICAqIFtbSW50ZW50UmVjb2duaXplci5hdXRob3JpemF0aW9uVG9rZW5dXSwgW1tUcmFuc2xhdGlvblJlY29nbml6ZXIuYXV0aG9yaXphdGlvblRva2VuXV0sIFtbU3BlYWtlclJlY29nbml6ZXIuYXV0aG9yaXphdGlvblRva2VuXV0uXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW5cIl0gPSAzXSA9IFwiU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW5cIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIGF1dGhvcml6YXRpb24gdHlwZS4gQ3VycmVudGx5IHVudXNlZC5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVHlwZVxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1R5cGVcIl0gPSA0XSA9IFwiU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVHlwZVwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UgZW5kcG9pbnQgaWQuIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0XG4gICAgICogaGF2ZSB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkLCB1c2UgW1tTcGVlY2hDb25maWcuZW5kcG9pbnRJZF1dLlxuICAgICAqIE5PVEU6IFRoZSBlbmRwb2ludCBpZCBpcyBhdmFpbGFibGUgaW4gdGhlIFNwZWVjaCBQb3J0YWwsIGxpc3RlZCB1bmRlciBFbmRwb2ludCBEZXRhaWxzLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludElkXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnRJZFwiXSA9IDVdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludElkXCI7XG4gICAgLyoqXG4gICAgICogVGhlIGxpc3Qgb2YgY29tbWEgc2VwYXJhdGVkIGxhbmd1YWdlcyAoQkNQLTQ3IGZvcm1hdCkgdXNlZCBhcyB0YXJnZXQgdHJhbnNsYXRpb24gbGFuZ3VhZ2VzLiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcyxcbiAgICAgKiB5b3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCB1c2UgW1tTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5hZGRUYXJnZXRMYW5ndWFnZV1dLFxuICAgICAqIFtbU3BlZWNoVHJhbnNsYXRpb25Db25maWcudGFyZ2V0TGFuZ3VhZ2VzXV0sIFtbVHJhbnNsYXRpb25SZWNvZ25pemVyLnRhcmdldExhbmd1YWdlc11dLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Ub0xhbmd1YWdlc1wiXSA9IDZdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzXCI7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIENvZ25pdGl2ZSBTZXJ2aWNlIFRleHQgdG8gU3BlZWNoIFNlcnZpY2UgVm9pY2UuIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXNcbiAgICAgKiBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkLCB1c2UgW1tTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy52b2ljZU5hbWVdXS5cbiAgICAgKiBOT1RFOiBWYWxpZCB2b2ljZSBuYW1lcyBjYW4gYmUgZm91bmQgPGEgaHJlZj1cImh0dHBzOi8vYWthLm1zL2Nzc3BlZWNoL3ZvaWNlbmFtZXNcIj5oZXJlPC9hPi5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Wb2ljZVxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVm9pY2VcIl0gPSA3XSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Wb2ljZVwiO1xuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0aW9uIGZlYXR1cmVzLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvbkZlYXR1cmVzXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25GZWF0dXJlc1wiXSA9IDhdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvbkZlYXR1cmVzXCI7XG4gICAgLyoqXG4gICAgICogVGhlIExhbmd1YWdlIFVuZGVyc3RhbmRpbmcgU2VydmljZSBSZWdpb24uIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCwgdXNlIFtbTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWxdXS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSW50ZW50UmVnaW9uXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSW50ZW50UmVnaW9uXCJdID0gOV0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0ludGVudFJlZ2lvblwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBob3N0IG5hbWUgb2YgdGhlIHByb3h5IHNlcnZlciB1c2VkIHRvIGNvbm5lY3QgdG8gdGhlIENvZ25pdGl2ZSBTZXJ2aWNlcyBTcGVlY2ggU2VydmljZS4gT25seSByZWxldmFudCBpbiBOb2RlLmpzIGVudmlyb25tZW50cy5cbiAgICAgKiBZb3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCB1c2UgPHNlZSBjcmVmPVwiU3BlZWNoQ29uZmlnLlNldFByb3h5KHN0cmluZyxpbnQsc3RyaW5nLHN0cmluZylcIi8+LlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS40LjAuXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlIb3N0TmFtZVwiXSA9IDEwXSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlIb3N0TmFtZVwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBwb3J0IG9mIHRoZSBwcm94eSBzZXJ2ZXIgdXNlZCB0byBjb25uZWN0IHRvIHRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UuIE9ubHkgcmVsZXZhbnQgaW4gTm9kZS5qcyBlbnZpcm9ubWVudHMuXG4gICAgICogWW91IHNob3VsZG4ndCBoYXZlIHRvIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEluc3RlYWQgdXNlIDxzZWUgY3JlZj1cIlNwZWVjaENvbmZpZy5TZXRQcm94eShzdHJpbmcsaW50LHN0cmluZyxzdHJpbmcpXCIvPi5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNC4wLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5UG9ydFwiXSA9IDExXSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlQb3J0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIHVzZXIgbmFtZSBvZiB0aGUgcHJveHkgc2VydmVyIHVzZWQgdG8gY29ubmVjdCB0byB0aGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlLiBPbmx5IHJlbGV2YW50IGluIE5vZGUuanMgZW52aXJvbm1lbnRzLlxuICAgICAqIFlvdSBzaG91bGRuJ3QgaGF2ZSB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkIHVzZSA8c2VlIGNyZWY9XCJTcGVlY2hDb25maWcuU2V0UHJveHkoc3RyaW5nLGludCxzdHJpbmcsc3RyaW5nKVwiLz4uXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjQuMC5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVVzZXJOYW1lXCJdID0gMTJdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVVzZXJOYW1lXCI7XG4gICAgLyoqXG4gICAgICogVGhlIHBhc3N3b3JkIG9mIHRoZSBwcm94eSBzZXJ2ZXIgdXNlZCB0byBjb25uZWN0IHRvIHRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UuIE9ubHkgcmVsZXZhbnQgaW4gTm9kZS5qcyBlbnZpcm9ubWVudHMuXG4gICAgICogWW91IHNob3VsZG4ndCBoYXZlIHRvIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEluc3RlYWQgdXNlIDxzZWUgY3JlZj1cIlNwZWVjaENvbmZpZy5TZXRQcm94eShzdHJpbmcsaW50LHN0cmluZyxzdHJpbmcpXCIvPi5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNC4wLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5UGFzc3dvcmRcIl0gPSAxM10gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5UGFzc3dvcmRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIHJlY29nbml0aW9uIE1vZGUuIENhbiBiZSBcIklOVEVSQUNUSVZFXCIsIFwiQ09OVkVSU0FUSU9OXCIsIFwiRElDVEFUSU9OXCIuXG4gICAgICogVGhpcyBwcm9wZXJ0eSBpcyBpbnRlbmRlZCB0byBiZSByZWFkLW9ubHkuIFRoZSBTREsgaXMgdXNpbmcgaXQgaW50ZXJuYWxseS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb01vZGVcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTW9kZVwiXSA9IDE0XSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb01vZGVcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgc3Bva2VuIGxhbmd1YWdlIHRvIGJlIHJlY29nbml6ZWQgKGluIEJDUC00NyBmb3JtYXQpLiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgeW91IHNob3VsZG4ndCBoYXZlIHRvIHVzZSB0aGlzIHByb3BlcnR5XG4gICAgICogZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCwgdXNlIFtbU3BlZWNoQ29uZmlnLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VdXS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlXCJdID0gMTVdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2VcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgc2Vzc2lvbiBpZC4gVGhpcyBpZCBpcyBhIHVuaXZlcnNhbGx5IHVuaXF1ZSBpZGVudGlmaWVyIChha2EgVVVJRCkgcmVwcmVzZW50aW5nIGEgc3BlY2lmaWMgYmluZGluZyBvZiBhbiBhdWRpbyBpbnB1dCBzdHJlYW1cbiAgICAgKiBhbmQgdGhlIHVuZGVybHlpbmcgc3BlZWNoIHJlY29nbml0aW9uIGluc3RhbmNlIHRvIHdoaWNoIGl0IGlzIGJvdW5kLiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgeW91IHNob3VsZG4ndCBoYXZlIHRvIHVzZSB0aGlzXG4gICAgICogcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCB1c2UgW1tTZXNzaW9uRXZlbnRBcmdzLnNlc3Npb25JZF1dLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hfU2Vzc2lvbklkXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoX1Nlc3Npb25JZFwiXSA9IDE2XSA9IFwiU3BlZWNoX1Nlc3Npb25JZFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBzcG9rZW4gbGFuZ3VhZ2UgdG8gYmUgc3ludGhlc2l6ZWQgKGUuZy4gZW4tVVMpXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoTGFuZ3VhZ2VcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aExhbmd1YWdlXCJdID0gMTddID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aExhbmd1YWdlXCI7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIFRUUyB2b2ljZSB0byBiZSB1c2VkIGZvciBzcGVlY2ggc3ludGhlc2lzXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoVm9pY2VcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aFZvaWNlXCJdID0gMThdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aFZvaWNlXCI7XG4gICAgLyoqXG4gICAgICogVGhlIHN0cmluZyB0byBzcGVjaWZ5IFRUUyBvdXRwdXQgYXVkaW8gZm9ybWF0XG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoT3V0cHV0Rm9ybWF0XG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fU3ludGhPdXRwdXRGb3JtYXRcIl0gPSAxOV0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoT3V0cHV0Rm9ybWF0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIGxpc3Qgb2YgY29tbWEgc2VwYXJhdGVkIGxhbmd1YWdlcyB1c2VkIGFzIHBvc3NpYmxlIHNvdXJjZSBsYW5ndWFnZXNcbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTMuMFxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9BdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VzXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlc1wiXSA9IDIwXSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlc1wiO1xuICAgIC8qKlxuICAgICAqIFRoZSByZXF1ZXN0ZWQgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIHJlc3BvbnNlIG91dHB1dCBmb3JtYXQgKHNpbXBsZSBvciBkZXRhaWxlZCkuIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0IGhhdmVcbiAgICAgKiB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkIHVzZSBbW1NwZWVjaENvbmZpZy5vdXRwdXRGb3JtYXRdXS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3REZXRhaWxlZFJlc3VsdFRydWVGYWxzZVxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0RGV0YWlsZWRSZXN1bHRUcnVlRmFsc2VcIl0gPSAyMV0gPSBcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0RGV0YWlsZWRSZXN1bHRUcnVlRmFsc2VcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVxdWVzdGVkIENvZ25pdGl2ZSBTZXJ2aWNlcyBTcGVlY2ggU2VydmljZSByZXNwb25zZSBvdXRwdXQgcHJvZmFuaXR5IGxldmVsLiBDdXJyZW50bHkgdW51c2VkLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFByb2Zhbml0eUZpbHRlclRydWVGYWxzZVxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0UHJvZmFuaXR5RmlsdGVyVHJ1ZUZhbHNlXCJdID0gMjJdID0gXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFByb2Zhbml0eUZpbHRlclRydWVGYWxzZVwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UgcmVzcG9uc2Ugb3V0cHV0IChpbiBKU09OIGZvcm1hdCkuIFRoaXMgcHJvcGVydHkgaXMgYXZhaWxhYmxlIG9uIHJlY29nbml0aW9uIHJlc3VsdCBvYmplY3RzIG9ubHkuXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uUmVzdWx0XG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHRcIl0gPSAyM10gPSBcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uUmVzdWx0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIENvZ25pdGl2ZSBTZXJ2aWNlcyBTcGVlY2ggU2VydmljZSBlcnJvciBkZXRhaWxzIChpbiBKU09OIGZvcm1hdCkuIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0IGhhdmUgdG9cbiAgICAgKiB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS4gSW5zdGVhZCB1c2UgW1tDYW5jZWxsYXRpb25EZXRhaWxzLmVycm9yRGV0YWlsc11dLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfSnNvbkVycm9yRGV0YWlsc1xuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uRXJyb3JEZXRhaWxzXCJdID0gMjRdID0gXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfSnNvbkVycm9yRGV0YWlsc1wiO1xuICAgIC8qKlxuICAgICAqIFRoZSBjYW5jZWxsYXRpb24gcmVhc29uLiBDdXJyZW50bHkgdW51c2VkLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5DYW5jZWxsYXRpb25EZXRhaWxzX1JlYXNvblxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIkNhbmNlbGxhdGlvbkRldGFpbHNfUmVhc29uXCJdID0gMjVdID0gXCJDYW5jZWxsYXRpb25EZXRhaWxzX1JlYXNvblwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBjYW5jZWxsYXRpb24gdGV4dC4gQ3VycmVudGx5IHVudXNlZC5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuQ2FuY2VsbGF0aW9uRGV0YWlsc19SZWFzb25UZXh0XG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiQ2FuY2VsbGF0aW9uRGV0YWlsc19SZWFzb25UZXh0XCJdID0gMjZdID0gXCJDYW5jZWxsYXRpb25EZXRhaWxzX1JlYXNvblRleHRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ2FuY2VsbGF0aW9uIGRldGFpbGVkIHRleHQuIEN1cnJlbnRseSB1bnVzZWQuXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLkNhbmNlbGxhdGlvbkRldGFpbHNfUmVhc29uRGV0YWlsZWRUZXh0XG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiQ2FuY2VsbGF0aW9uRGV0YWlsc19SZWFzb25EZXRhaWxlZFRleHRcIl0gPSAyN10gPSBcIkNhbmNlbGxhdGlvbkRldGFpbHNfUmVhc29uRGV0YWlsZWRUZXh0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIExhbmd1YWdlIFVuZGVyc3RhbmRpbmcgU2VydmljZSByZXNwb25zZSBvdXRwdXQgKGluIEpTT04gZm9ybWF0KS4gQXZhaWxhYmxlIHZpYSBbW0ludGVudFJlY29nbml0aW9uUmVzdWx0XV1cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHRcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJMYW5ndWFnZVVuZGVyc3RhbmRpbmdTZXJ2aWNlUmVzcG9uc2VfSnNvblJlc3VsdFwiXSA9IDI4XSA9IFwiTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgVVJMIHN0cmluZyBidWlsdCBmcm9tIHNwZWVjaCBjb25maWd1cmF0aW9uLlxuICAgICAqIFRoaXMgcHJvcGVydHkgaXMgaW50ZW5kZWQgdG8gYmUgcmVhZC1vbmx5LiBUaGUgU0RLIGlzIHVzaW5nIGl0IGludGVybmFsbHkuXG4gICAgICogTk9URTogQWRkZWQgaW4gdmVyc2lvbiAxLjcuMC5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9VcmxcIl0gPSAyOV0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1VybFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBpbml0aWFsIHNpbGVuY2UgdGltZW91dCB2YWx1ZSAoaW4gbWlsbGlzZWNvbmRzKSB1c2VkIGJ5IHRoZSBzZXJ2aWNlLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS43LjBcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Jbml0aWFsU2lsZW5jZVRpbWVvdXRNc1wiXSA9IDMwXSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSW5pdGlhbFNpbGVuY2VUaW1lb3V0TXNcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgZW5kIHNpbGVuY2UgdGltZW91dCB2YWx1ZSAoaW4gbWlsbGlzZWNvbmRzKSB1c2VkIGJ5IHRoZSBzZXJ2aWNlLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS43LjBcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRTaWxlbmNlVGltZW91dE1zXCJdID0gMzFdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRTaWxlbmNlVGltZW91dE1zXCI7XG4gICAgLyoqXG4gICAgICogQSBkdXJhdGlvbiBvZiBkZXRlY3RlZCBzaWxlbmNlLCBtZWFzdXJlZCBpbiBtaWxsaXNlY29uZHMsIGFmdGVyIHdoaWNoIHNwZWVjaC10by10ZXh0IHdpbGwgZGV0ZXJtaW5lIGEgc3Bva2VuXG4gICAgICogcGhyYXNlIGhhcyBlbmRlZCBhbmQgZ2VuZXJhdGUgYSBmaW5hbCBSZWNvZ25pemVkIHJlc3VsdC4gQ29uZmlndXJpbmcgdGhpcyB0aW1lb3V0IG1heSBiZSBoZWxwZnVsIGluIHNpdHVhdGlvbnNcbiAgICAgKiB3aGVyZSBzcG9rZW4gaW5wdXQgaXMgc2lnbmlmaWNhbnRseSBmYXN0ZXIgb3Igc2xvd2VyIHRoYW4gdXN1YWwgYW5kIGRlZmF1bHQgc2VnbWVudGF0aW9uIGJlaGF2aW9yIGNvbnNpc3RlbnRseVxuICAgICAqIHlpZWxkcyByZXN1bHRzIHRoYXQgYXJlIHRvbyBsb25nIG9yIHRvbyBzaG9ydC4gU2VnbWVudGF0aW9uIHRpbWVvdXQgdmFsdWVzIHRoYXQgYXJlIGluYXBwcm9wcmlhdGVseSBoaWdoIG9yIGxvd1xuICAgICAqIGNhbiBuZWdhdGl2ZWx5IGFmZmVjdCBzcGVlY2gtdG8tdGV4dCBhY2N1cmFjeTsgdGhpcyBwcm9wZXJ0eSBzaG91bGQgYmUgY2FyZWZ1bGx5IGNvbmZpZ3VyZWQgYW5kIHRoZSByZXN1bHRpbmdcbiAgICAgKiBiZWhhdmlvciBzaG91bGQgYmUgdGhvcm91Z2hseSB2YWxpZGF0ZWQgYXMgaW50ZW5kZWQuXG4gICAgICpcbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aW1lb3V0IGNvbmZpZ3VyYXRpb24gdGhhdCBpbmNsdWRlcyBkaXNjdXNzaW9uIG9mIGRlZmF1bHQgYmVoYXZpb3JzLCBwbGVhc2UgdmlzaXRcbiAgICAgKiBodHRwczovL2FrYS5tcy9jc3NwZWVjaC90aW1lb3V0cy5cbiAgICAgKlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4yMS4wLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaF9TZWdtZW50YXRpb25TaWxlbmNlVGltZW91dE1zXCJdID0gMzJdID0gXCJTcGVlY2hfU2VnbWVudGF0aW9uU2lsZW5jZVRpbWVvdXRNc1wiO1xuICAgIC8qKlxuICAgICAqIEEgYm9vbGVhbiB2YWx1ZSBzcGVjaWZ5aW5nIHdoZXRoZXIgYXVkaW8gbG9nZ2luZyBpcyBlbmFibGVkIGluIHRoZSBzZXJ2aWNlIG9yIG5vdC5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNy4wXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5hYmxlQXVkaW9Mb2dnaW5nXCJdID0gMzNdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmFibGVBdWRpb0xvZ2dpbmdcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgc3BlZWNoIHNlcnZpY2UgY29ubmVjdGlvbiBsYW5ndWFnZSBpZGVudGlmaWVyIG1vZGUuXG4gICAgICogQ2FuIGJlIFwiQXRTdGFydFwiICh0aGUgZGVmYXVsdCksIG9yIFwiQ29udGludW91c1wiLiBTZWUgTGFuZ3VhZ2VcbiAgICAgKiBJZGVudGlmaWNhdGlvbiBkb2N1bWVudCBodHRwczovL2FrYS5tcy9zcGVlY2gvbGlkP3Bpdm90cz1wcm9ncmFtbWluZy1sYW5ndWFnZS1qYXZhc2NyaXB0XG4gICAgICogZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKiBBZGRlZCBpbiAxLjI1LjBcbiAgICAgKiovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fTGFuZ3VhZ2VJZE1vZGVcIl0gPSAzNF0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0xhbmd1YWdlSWRNb2RlXCI7XG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgdmFsdWUgcmVwcmVzZW50aW5nIHRoZSBkZXNpcmVkIGVuZHBvaW50IHZlcnNpb24gdG8gdGFyZ2V0IGZvciBTcGVlY2ggUmVjb2duaXRpb24uXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjIxLjBcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvZ25pdGlvbkVuZHBvaW50VmVyc2lvblwiXSA9IDM1XSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb2duaXRpb25FbmRwb2ludFZlcnNpb25cIjtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVxdWVzdGVkIENvZ25pdGl2ZSBTZXJ2aWNlcyBTcGVlY2ggU2VydmljZSByZXNwb25zZSBvdXRwdXQgcHJvZmFuaXR5IHNldHRpbmcuXG4gICAgICogQWxsb3dlZCB2YWx1ZXMgYXJlIFwibWFza2VkXCIsIFwicmVtb3ZlZFwiLCBhbmQgXCJyYXdcIi5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNy4wLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Qcm9mYW5pdHlPcHRpb25cIl0gPSAzNl0gPSBcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Qcm9mYW5pdHlPcHRpb25cIjtcbiAgICAvKipcbiAgICAgKiBBIHN0cmluZyB2YWx1ZSBzcGVjaWZ5aW5nIHdoaWNoIHBvc3QgcHJvY2Vzc2luZyBvcHRpb24gc2hvdWxkIGJlIHVzZWQgYnkgc2VydmljZS5cbiAgICAgKiBBbGxvd2VkIHZhbHVlcyBhcmUgXCJUcnVlVGV4dFwiLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS43LjBcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUG9zdFByb2Nlc3NpbmdPcHRpb25cIl0gPSAzN10gPSBcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Qb3N0UHJvY2Vzc2luZ09wdGlvblwiO1xuICAgIC8qKlxuICAgICAqIEEgYm9vbGVhbiB2YWx1ZSBzcGVjaWZ5aW5nIHdoZXRoZXIgdG8gaW5jbHVkZSB3b3JkLWxldmVsIHRpbWVzdGFtcHMgaW4gdGhlIHJlc3BvbnNlIHJlc3VsdC5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNy4wXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RXb3JkTGV2ZWxUaW1lc3RhbXBzXCJdID0gMzhdID0gXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFdvcmRMZXZlbFRpbWVzdGFtcHNcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHRpbWVzIGEgd29yZCBoYXMgdG8gYmUgaW4gcGFydGlhbCByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS43LjBcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfU3RhYmxlUGFydGlhbFJlc3VsdFRocmVzaG9sZFwiXSA9IDM5XSA9IFwiU3BlZWNoU2VydmljZVJlc3BvbnNlX1N0YWJsZVBhcnRpYWxSZXN1bHRUaHJlc2hvbGRcIjtcbiAgICAvKipcbiAgICAgKiBBIHN0cmluZyB2YWx1ZSBzcGVjaWZ5aW5nIHRoZSBvdXRwdXQgZm9ybWF0IG9wdGlvbiBpbiB0aGUgcmVzcG9uc2UgcmVzdWx0LiBJbnRlcm5hbCB1c2Ugb25seS5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNy4wLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9PdXRwdXRGb3JtYXRPcHRpb25cIl0gPSA0MF0gPSBcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9PdXRwdXRGb3JtYXRPcHRpb25cIjtcbiAgICAvKipcbiAgICAgKiBBIGJvb2xlYW4gdmFsdWUgdG8gcmVxdWVzdCBmb3Igc3RhYmlsaXppbmcgdHJhbnNsYXRpb24gcGFydGlhbCByZXN1bHRzIGJ5IG9taXR0aW5nIHdvcmRzIGluIHRoZSBlbmQuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjcuMC5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfVHJhbnNsYXRpb25SZXF1ZXN0U3RhYmxlUGFydGlhbFJlc3VsdFwiXSA9IDQxXSA9IFwiU3BlZWNoU2VydmljZVJlc3BvbnNlX1RyYW5zbGF0aW9uUmVxdWVzdFN0YWJsZVBhcnRpYWxSZXN1bHRcIjtcbiAgICAvKipcbiAgICAgKiBBIGJvb2xlYW4gdmFsdWUgc3BlY2lmeWluZyB3aGV0aGVyIHRvIHJlcXVlc3QgV29yZEJvdW5kYXJ5IGV2ZW50cy5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RXb3JkQm91bmRhcnlcbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMjEuMC5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFdvcmRCb3VuZGFyeVwiXSA9IDQyXSA9IFwiU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RXb3JkQm91bmRhcnlcIjtcbiAgICAvKipcbiAgICAgKiBBIGJvb2xlYW4gdmFsdWUgc3BlY2lmeWluZyB3aGV0aGVyIHRvIHJlcXVlc3QgcHVuY3R1YXRpb24gYm91bmRhcnkgaW4gV29yZEJvdW5kYXJ5IEV2ZW50cy4gRGVmYXVsdCBpcyB0cnVlLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFB1bmN0dWF0aW9uQm91bmRhcnlcbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMjEuMC5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFB1bmN0dWF0aW9uQm91bmRhcnlcIl0gPSA0M10gPSBcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0UHVuY3R1YXRpb25Cb3VuZGFyeVwiO1xuICAgIC8qKlxuICAgICAqIEEgYm9vbGVhbiB2YWx1ZSBzcGVjaWZ5aW5nIHdoZXRoZXIgdG8gcmVxdWVzdCBzZW50ZW5jZSBib3VuZGFyeSBpbiBXb3JkQm91bmRhcnkgRXZlbnRzLiBEZWZhdWx0IGlzIGZhbHNlLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFNlbnRlbmNlQm91bmRhcnlcbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMjEuMC5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFNlbnRlbmNlQm91bmRhcnlcIl0gPSA0NF0gPSBcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0U2VudGVuY2VCb3VuZGFyeVwiO1xuICAgIC8qKlxuICAgICAqIElkZW50aWZpZXIgdXNlZCB0byBjb25uZWN0IHRvIHRoZSBiYWNrZW5kIHNlcnZpY2UuXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9BcHBsaWNhdGlvbklkXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiQ29udmVyc2F0aW9uX0FwcGxpY2F0aW9uSWRcIl0gPSA0NV0gPSBcIkNvbnZlcnNhdGlvbl9BcHBsaWNhdGlvbklkXCI7XG4gICAgLyoqXG4gICAgICogVHlwZSBvZiBkaWFsb2cgYmFja2VuZCB0byBjb25uZWN0IHRvLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5Db252ZXJzYXRpb25fRGlhbG9nVHlwZVxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIkNvbnZlcnNhdGlvbl9EaWFsb2dUeXBlXCJdID0gNDZdID0gXCJDb252ZXJzYXRpb25fRGlhbG9nVHlwZVwiO1xuICAgIC8qKlxuICAgICAqIFNpbGVuY2UgdGltZW91dCBmb3IgbGlzdGVuaW5nXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9Jbml0aWFsX1NpbGVuY2VfVGltZW91dFxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIkNvbnZlcnNhdGlvbl9Jbml0aWFsX1NpbGVuY2VfVGltZW91dFwiXSA9IDQ3XSA9IFwiQ29udmVyc2F0aW9uX0luaXRpYWxfU2lsZW5jZV9UaW1lb3V0XCI7XG4gICAgLyoqXG4gICAgICogRnJvbSBJZCB0byBhZGQgdG8gc3BlZWNoIHJlY29nbml0aW9uIGFjdGl2aXRpZXMuXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9Gcm9tX0lkXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiQ29udmVyc2F0aW9uX0Zyb21fSWRcIl0gPSA0OF0gPSBcIkNvbnZlcnNhdGlvbl9Gcm9tX0lkXCI7XG4gICAgLyoqXG4gICAgICogQ29udmVyc2F0aW9uSWQgZm9yIHRoZSBzZXNzaW9uLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5Db252ZXJzYXRpb25fQ29udmVyc2F0aW9uX0lkXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiQ29udmVyc2F0aW9uX0NvbnZlcnNhdGlvbl9JZFwiXSA9IDQ5XSA9IFwiQ29udmVyc2F0aW9uX0NvbnZlcnNhdGlvbl9JZFwiO1xuICAgIC8qKlxuICAgICAqIENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIGN1c3RvbSB2b2ljZSBkZXBsb3ltZW50IGlkcy5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0N1c3RvbV9Wb2ljZV9EZXBsb3ltZW50X0lkc1xuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIkNvbnZlcnNhdGlvbl9DdXN0b21fVm9pY2VfRGVwbG95bWVudF9JZHNcIl0gPSA1MF0gPSBcIkNvbnZlcnNhdGlvbl9DdXN0b21fVm9pY2VfRGVwbG95bWVudF9JZHNcIjtcbiAgICAvKipcbiAgICAgKiBTcGVlY2ggYWN0aXZpdHkgdGVtcGxhdGUsIHN0YW1wIHByb3BlcnRpZXMgZnJvbSB0aGUgdGVtcGxhdGUgb24gdGhlIGFjdGl2aXR5IGdlbmVyYXRlZCBieSB0aGUgc2VydmljZSBmb3Igc3BlZWNoLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5Db252ZXJzYXRpb25fU3BlZWNoX0FjdGl2aXR5X1RlbXBsYXRlXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjEwLjAuXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiQ29udmVyc2F0aW9uX1NwZWVjaF9BY3Rpdml0eV9UZW1wbGF0ZVwiXSA9IDUxXSA9IFwiQ29udmVyc2F0aW9uX1NwZWVjaF9BY3Rpdml0eV9UZW1wbGF0ZVwiO1xuICAgIC8qKlxuICAgICAqIEVuYWJsZXMgb3IgZGlzYWJsZXMgdGhlIHJlY2VpcHQgb2YgdHVybiBzdGF0dXMgbWVzc2FnZXMgYXMgb2J0YWluZWQgb24gdGhlIHR1cm5TdGF0dXNSZWNlaXZlZCBldmVudC5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX1JlcXVlc3RfQm90X1N0YXR1c19NZXNzYWdlc1xuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xNS4wLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIkNvbnZlcnNhdGlvbl9SZXF1ZXN0X0JvdF9TdGF0dXNfTWVzc2FnZXNcIl0gPSA1Ml0gPSBcIkNvbnZlcnNhdGlvbl9SZXF1ZXN0X0JvdF9TdGF0dXNfTWVzc2FnZXNcIjtcbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIGNvbm5lY3Rpb24gSUQgdG8gYmUgcHJvdmlkZWQgaW4gdGhlIEFnZW50IGNvbmZpZ3VyYXRpb24gbWVzc2FnZSwgZS5nLiBhIERpcmVjdCBMaW5lIHRva2VuIGZvclxuICAgICAqIGNoYW5uZWwgYXV0aGVudGljYXRpb24uXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjE1LjEuXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiQ29udmVyc2F0aW9uX0FnZW50X0Nvbm5lY3Rpb25fSWRcIl0gPSA1M10gPSBcIkNvbnZlcnNhdGlvbl9BZ2VudF9Db25uZWN0aW9uX0lkXCI7XG4gICAgLyoqXG4gICAgICogVGhlIENvZ25pdGl2ZSBTZXJ2aWNlcyBTcGVlY2ggU2VydmljZSBob3N0ICh1cmwpLiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgeW91IHNob3VsZG4ndCBoYXZlIHRvIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEluc3RlYWQsIHVzZSBbW1NwZWVjaENvbmZpZy5mcm9tSG9zdF1dLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0hvc3RcIl0gPSA1NF0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0hvc3RcIjtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGhvc3QgZm9yIHNlcnZpY2UgY2FsbHMgdG8gdGhlIENvbnZlcnNhdGlvbiBUcmFuc2xhdG9yIFJFU1QgbWFuYWdlbWVudCBhbmQgd2Vic29ja2V0IGNhbGxzLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfSG9zdFwiXSA9IDU1XSA9IFwiQ29udmVyc2F0aW9uVHJhbnNsYXRvcl9Ib3N0XCI7XG4gICAgLyoqXG4gICAgICogT3B0aW9uYWxseSBzZXQgdGhlIHRoZSBob3N0J3MgZGlzcGxheSBuYW1lLlxuICAgICAqIFVzZWQgd2hlbiBqb2luaW5nIGEgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfTmFtZVwiXSA9IDU2XSA9IFwiQ29udmVyc2F0aW9uVHJhbnNsYXRvcl9OYW1lXCI7XG4gICAgLyoqXG4gICAgICogT3B0aW9uYWxseSBzZXQgYSB2YWx1ZSBmb3IgdGhlIFgtQ29ycmVsYXRpb25JZCByZXF1ZXN0IGhlYWRlci5cbiAgICAgKiBVc2VkIGZvciB0cm91Ymxlc2hvb3RpbmcgZXJyb3JzIGluIHRoZSBzZXJ2ZXIgbG9ncy4gSXQgc2hvdWxkIGJlIGEgdmFsaWQgZ3VpZC5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJDb252ZXJzYXRpb25UcmFuc2xhdG9yX0NvcnJlbGF0aW9uSWRcIl0gPSA1N10gPSBcIkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfQ29ycmVsYXRpb25JZFwiO1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29udmVyc2F0aW9uIHRva2VuIHRvIGJlIHNlbnQgdG8gdGhlIHNwZWVjaCBzZXJ2aWNlLiBUaGlzIGVuYWJsZXMgdGhlXG4gICAgICogc2VydmljZSB0byBzZXJ2aWNlIGNhbGwgZnJvbSB0aGUgc3BlZWNoIHNlcnZpY2UgdG8gdGhlIENvbnZlcnNhdGlvbiBUcmFuc2xhdG9yIHNlcnZpY2UgZm9yIHJlbGF5aW5nXG4gICAgICogcmVjb2duaXRpb25zLiBGb3IgaW50ZXJuYWwgdXNlLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfVG9rZW5cIl0gPSA1OF0gPSBcIkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfVG9rZW5cIjtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVmZXJlbmNlIHRleHQgb2YgdGhlIGF1ZGlvIGZvciBwcm9udW5jaWF0aW9uIGV2YWx1YXRpb24uXG4gICAgICogRm9yIHRoaXMgYW5kIHRoZSBmb2xsb3dpbmcgcHJvbnVuY2lhdGlvbiBhc3Nlc3NtZW50IHBhcmFtZXRlcnMsIHNlZVxuICAgICAqIGh0dHBzOi8vZG9jcy5taWNyb3NvZnQuY29tL2F6dXJlL2NvZ25pdGl2ZS1zZXJ2aWNlcy9zcGVlY2gtc2VydmljZS9yZXN0LXNwZWVjaC10by10ZXh0I3Byb251bmNpYXRpb24tYXNzZXNzbWVudC1wYXJhbWV0ZXJzIGZvciBkZXRhaWxzLlxuICAgICAqIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjE1LjBcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJQcm9udW5jaWF0aW9uQXNzZXNzbWVudF9SZWZlcmVuY2VUZXh0XCJdID0gNTldID0gXCJQcm9udW5jaWF0aW9uQXNzZXNzbWVudF9SZWZlcmVuY2VUZXh0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIHBvaW50IHN5c3RlbSBmb3IgcHJvbnVuY2lhdGlvbiBzY29yZSBjYWxpYnJhdGlvbiAoRml2ZVBvaW50IG9yIEh1bmRyZWRNYXJrKS5cbiAgICAgKiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgeW91IHNob3VsZG4ndCBoYXZlIHRvIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xNS4wXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfR3JhZGluZ1N5c3RlbVwiXSA9IDYwXSA9IFwiUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfR3JhZGluZ1N5c3RlbVwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBwcm9udW5jaWF0aW9uIGV2YWx1YXRpb24gZ3JhbnVsYXJpdHkgKFBob25lbWUsIFdvcmQsIG9yIEZ1bGxUZXh0KS5cbiAgICAgKiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgeW91IHNob3VsZG4ndCBoYXZlIHRvIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xNS4wXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfR3JhbnVsYXJpdHlcIl0gPSA2MV0gPSBcIlByb251bmNpYXRpb25Bc3Nlc3NtZW50X0dyYW51bGFyaXR5XCI7XG4gICAgLyoqXG4gICAgICogRGVmaW5lcyBpZiBlbmFibGUgbWlzY3VlIGNhbGN1bGF0aW9uLlxuICAgICAqIFdpdGggdGhpcyBlbmFibGVkLCB0aGUgcHJvbm91bmNlZCB3b3JkcyB3aWxsIGJlIGNvbXBhcmVkIHRvIHRoZSByZWZlcmVuY2UgdGV4dCxcbiAgICAgKiBhbmQgd2lsbCBiZSBtYXJrZWQgd2l0aCBvbWlzc2lvbi9pbnNlcnRpb24gYmFzZWQgb24gdGhlIGNvbXBhcmlzb24uIFRoZSBkZWZhdWx0IHNldHRpbmcgaXMgRmFsc2UuXG4gICAgICogVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIHlvdSBzaG91bGRuJ3QgaGF2ZSB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTUuMFxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlByb251bmNpYXRpb25Bc3Nlc3NtZW50X0VuYWJsZU1pc2N1ZVwiXSA9IDYyXSA9IFwiUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfRW5hYmxlTWlzY3VlXCI7XG4gICAgLyoqXG4gICAgICogVGhlIGpzb24gc3RyaW5nIG9mIHByb251bmNpYXRpb24gYXNzZXNzbWVudCBwYXJhbWV0ZXJzXG4gICAgICogVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIHlvdSBzaG91bGRuJ3QgaGF2ZSB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTUuMFxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlByb251bmNpYXRpb25Bc3Nlc3NtZW50X0pzb25cIl0gPSA2M10gPSBcIlByb251bmNpYXRpb25Bc3Nlc3NtZW50X0pzb25cIjtcbiAgICAvKipcbiAgICAgKiBQcm9udW5jaWF0aW9uIGFzc2Vzc21lbnQgcGFyYW1ldGVycy5cbiAgICAgKiBUaGlzIHByb3BlcnR5IGlzIGludGVuZGVkIHRvIGJlIHJlYWQtb25seS4gVGhlIFNESyBpcyB1c2luZyBpdCBpbnRlcm5hbGx5LlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xNS4wXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfUGFyYW1zXCJdID0gNjRdID0gXCJQcm9udW5jaWF0aW9uQXNzZXNzbWVudF9QYXJhbXNcIjtcbiAgICAvKipcbiAgICAgKiBWZXJzaW9uIG9mIFNwZWFrZXIgUmVjb2duaXRpb24gQVBJIHRvIHVzZS5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTguMFxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWFrZXJSZWNvZ25pdGlvbl9BcGlfVmVyc2lvblwiXSA9IDY1XSA9IFwiU3BlYWtlclJlY29nbml0aW9uX0FwaV9WZXJzaW9uXCI7XG59KShQcm9wZXJ0eUlkIHx8IChQcm9wZXJ0eUlkID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJvcGVydHlJZC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgU2Vzc2lvbkV2ZW50QXJncyB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogRGVmaW5lcyBwYXlsb2FkIGZvciBzZXNzaW9uIGV2ZW50cyBsaWtlIFNwZWVjaCBTdGFydC9FbmQgRGV0ZWN0ZWRcbiAqIEBjbGFzc1xuICovXG5leHBvcnQgY2xhc3MgUmVjb2duaXRpb25FdmVudEFyZ3MgZXh0ZW5kcyBTZXNzaW9uRXZlbnRBcmdzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgLSBUaGUgb2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzZXNzaW9uSWQgLSBUaGUgc2Vzc2lvbiBpZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihvZmZzZXQsIHNlc3Npb25JZCkge1xuICAgICAgICBzdXBlcihzZXNzaW9uSWQpO1xuICAgICAgICB0aGlzLnByaXZPZmZzZXQgPSBvZmZzZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcHJlc2VudHMgdGhlIG1lc3NhZ2Ugb2Zmc2V0XG4gICAgICogQG1lbWJlciBSZWNvZ25pdGlvbkV2ZW50QXJncy5wcm90b3R5cGUub2Zmc2V0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldCBvZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZPZmZzZXQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWNvZ25pdGlvbkV2ZW50QXJncy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBEZWZpbmVzIHJlc3VsdCBvZiBzcGVlY2ggcmVjb2duaXRpb24uXG4gKiBAY2xhc3MgUmVjb2duaXRpb25SZXN1bHRcbiAqL1xuZXhwb3J0IGNsYXNzIFJlY29nbml0aW9uUmVzdWx0IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXN1bHRJZCAtIFRoZSByZXN1bHQgaWQuXG4gICAgICogQHBhcmFtIHtSZXN1bHRSZWFzb259IHJlYXNvbiAtIFRoZSByZWFzb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgcmVjb2duaXplZCB0ZXh0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBkdXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldCBpbnRvIHRoZSBzdHJlYW0uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlIC0gUHJpbWFyeSBMYW5ndWFnZSBkZXRlY3RlZCwgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSAtIFByaW1hcnkgTGFuZ3VhZ2UgY29uZmlkZW5jZSAoXCJVbmtub3duLFwiIFwiTG93LFwiIFwiTWVkaXVtLFwiIFwiSGlnaFwiLi4uKSwgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yRGV0YWlscyAtIEVycm9yIGRldGFpbHMsIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBqc29uIC0gQWRkaXRpb25hbCBKc29uLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge1Byb3BlcnR5Q29sbGVjdGlvbn0gcHJvcGVydGllcyAtIEFkZGl0aW9uYWwgcHJvcGVydGllcywgaWYgcHJvdmlkZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVzdWx0SWQsIHJlYXNvbiwgdGV4dCwgZHVyYXRpb24sIG9mZnNldCwgbGFuZ3VhZ2UsIGxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSwgZXJyb3JEZXRhaWxzLCBqc29uLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHRoaXMucHJpdlJlc3VsdElkID0gcmVzdWx0SWQ7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5wcml2VGV4dCA9IHRleHQ7XG4gICAgICAgIHRoaXMucHJpdkR1cmF0aW9uID0gZHVyYXRpb247XG4gICAgICAgIHRoaXMucHJpdk9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgdGhpcy5wcml2TGFuZ3VhZ2UgPSBsYW5ndWFnZTtcbiAgICAgICAgdGhpcy5wcml2TGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlID0gbGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlO1xuICAgICAgICB0aGlzLnByaXZFcnJvckRldGFpbHMgPSBlcnJvckRldGFpbHM7XG4gICAgICAgIHRoaXMucHJpdkpzb24gPSBqc29uO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gcHJvcGVydGllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSByZXN1bHQgaWRlbnRpZmllci5cbiAgICAgKiBAbWVtYmVyIFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZS5yZXN1bHRJZFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBTcGVjaWZpZXMgdGhlIHJlc3VsdCBpZGVudGlmaWVyLlxuICAgICAqL1xuICAgIGdldCByZXN1bHRJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlc3VsdElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgc3RhdHVzIG9mIHRoZSByZXN1bHQuXG4gICAgICogQG1lbWJlciBSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUucmVhc29uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtSZXN1bHRSZWFzb259IFNwZWNpZmllcyBzdGF0dXMgb2YgdGhlIHJlc3VsdC5cbiAgICAgKi9cbiAgICBnZXQgcmVhc29uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVhc29uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcmVzZW50cyB0aGUgcmVjb2duaXplZCB0ZXh0IGluIHRoZSByZXN1bHQuXG4gICAgICogQG1lbWJlciBSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUudGV4dFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBQcmVzZW50cyB0aGUgcmVjb2duaXplZCB0ZXh0IGluIHRoZSByZXN1bHQuXG4gICAgICovXG4gICAgZ2V0IHRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUZXh0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEdXJhdGlvbiBvZiByZWNvZ25pemVkIHNwZWVjaCBpbiAxMDAgbmFubyBzZWNvbmQgaW5jcmVtZW50cy5cbiAgICAgKiBAbWVtYmVyIFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZS5kdXJhdGlvblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBEdXJhdGlvbiBvZiByZWNvZ25pemVkIHNwZWVjaCBpbiAxMDAgbmFubyBzZWNvbmQgaW5jcmVtZW50cy5cbiAgICAgKi9cbiAgICBnZXQgZHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEdXJhdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT2Zmc2V0IG9mIHJlY29nbml6ZWQgc3BlZWNoIGluIDEwMCBuYW5vIHNlY29uZCBpbmNyZW1lbnRzLlxuICAgICAqIEBtZW1iZXIgUmVjb2duaXRpb25SZXN1bHQucHJvdG90eXBlLm9mZnNldFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBPZmZzZXQgb2YgcmVjb2duaXplZCBzcGVlY2ggaW4gMTAwIG5hbm8gc2Vjb25kIGluY3JlbWVudHMuXG4gICAgICovXG4gICAgZ2V0IG9mZnNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdk9mZnNldDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJpbWFyeSBMYW5ndWFnZSBkZXRlY3RlZC5cbiAgICAgKiBAbWVtYmVyIFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZS5sYW5ndWFnZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBsYW5ndWFnZSBkZXRlY3RlZC5cbiAgICAgKi9cbiAgICBnZXQgbGFuZ3VhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZMYW5ndWFnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJpbWFyeSBMYW5ndWFnZSBkZXRlY3Rpb24gY29uZmlkZW5jZSAoVW5rbm93biwgTG93LCBNZWRpdW0sIEhpZ2gpLlxuICAgICAqIEBtZW1iZXIgUmVjb2duaXRpb25SZXN1bHQucHJvdG90eXBlLmxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBkZXRlY3Rpb24gY29uZmlkZW5jZSBzdHJlbmd0aC5cbiAgICAgKi9cbiAgICBnZXQgbGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbiBjYXNlIG9mIGFuIHVuc3VjY2Vzc2Z1bCByZWNvZ25pdGlvbiwgcHJvdmlkZXMgZGV0YWlscyBvZiB0aGUgb2NjdXJyZWQgZXJyb3IuXG4gICAgICogQG1lbWJlciBSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUuZXJyb3JEZXRhaWxzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGEgYnJpZWYgZGVzY3JpcHRpb24gb2YgYW4gZXJyb3IuXG4gICAgICovXG4gICAgZ2V0IGVycm9yRGV0YWlscygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkVycm9yRGV0YWlscztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgY29udGFpbmluZyBKc29uIHNlcmlhbGl6ZWQgcmVjb2duaXRpb24gcmVzdWx0IGFzIGl0IHdhcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2aWNlLlxuICAgICAqIEBtZW1iZXIgUmVjb2duaXRpb25SZXN1bHQucHJvdG90eXBlLmpzb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEpzb24gc2VyaWFsaXplZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgcmVzdWx0LlxuICAgICAqL1xuICAgIGdldCBqc29uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SnNvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBwcm9wZXJ0aWVzIGV4cG9zZWQgaW4gdGhlIHJlc3VsdC5cbiAgICAgKiBAbWVtYmVyIFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZS5wcm9wZXJ0aWVzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IFRoZSBzZXQgb2YgcHJvcGVydGllcyBleHBvc2VkIGluIHRoZSByZXN1bHQuXG4gICAgICovXG4gICAgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVjb2duaXRpb25SZXN1bHQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgQ29nbml0aXZlU3Vic2NyaXB0aW9uS2V5QXV0aGVudGljYXRpb24sIENvZ25pdGl2ZVRva2VuQXV0aGVudGljYXRpb24sIENvbnRleHQsIE9TLCBTZXJ2aWNlUmVjb2duaXplckJhc2UsIFNwZWVjaFNlcnZpY2VDb25maWcsIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgRGVmZXJyZWQsIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3MgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgQXVkaW9Db25maWcsIFByb3BlcnR5SWQsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBEZWZpbmVzIHRoZSBiYXNlIGNsYXNzIFJlY29nbml6ZXIgd2hpY2ggbWFpbmx5IGNvbnRhaW5zIGNvbW1vbiBldmVudCBoYW5kbGVycy5cbiAqIEBjbGFzcyBSZWNvZ25pemVyXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWNvZ25pemVyIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiBhIFJlY29nbml6ZXJcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0F1ZGlvQ29uZmlnfSBhdWRpb0lucHV0IC0gQW4gb3B0aW9uYWwgYXVkaW8gaW5wdXQgc3RyZWFtIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVjb2duaXplclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvQ29uZmlnLCBwcm9wZXJ0aWVzLCBjb25uZWN0aW9uRmFjdG9yeSkge1xuICAgICAgICB0aGlzLmF1ZGlvQ29uZmlnID0gKGF1ZGlvQ29uZmlnICE9PSB1bmRlZmluZWQpID8gYXVkaW9Db25maWcgOiBBdWRpb0NvbmZpZy5mcm9tRGVmYXVsdE1pY3JvcGhvbmVJbnB1dCgpO1xuICAgICAgICB0aGlzLnByaXZEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gcHJvcGVydGllcy5jbG9uZSgpO1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRmFjdG9yeSA9IGNvbm5lY3Rpb25GYWN0b3J5O1xuICAgICAgICB0aGlzLmltcGxDb21tb25SZWNvZ25pemVyU2V0dXAoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcG9zZSBvZiBhc3NvY2lhdGVkIHJlc291cmNlcy5cbiAgICAgKiBAbWVtYmVyIFJlY29nbml6ZXIucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKGNiLCBlcnJvckNiKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWQpO1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMuZGlzcG9zZSh0cnVlKSwgY2IsIGVycm9yQ2IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBASW50ZXJuYWxcbiAgICAgKiBJbnRlcm5hbCBkYXRhIG1lbWJlciB0byBzdXBwb3J0IGZyb21SZWNvZ25pemVyKiBwYXR0ZXJuIG1ldGhvZHMgb24gb3RoZXIgY2xhc3Nlcy5cbiAgICAgKiBEbyBub3QgdXNlIGV4dGVybmFsbHksIG9iamVjdCByZXR1cm5lZCB3aWxsIGNoYW5nZSB3aXRob3V0IHdhcm5pbmcgb3Igbm90aWNlLlxuICAgICAqL1xuICAgIGdldCBpbnRlcm5hbERhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWNvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBwZXJmb3JtcyBjbGVhbnVwIG9mIHJlc291cmNlcy5cbiAgICAgKiBUaGUgQm9vbGVhbiBwYXJhbWV0ZXIgZGlzcG9zaW5nIGluZGljYXRlcyB3aGV0aGVyIHRoZSBtZXRob2QgaXMgY2FsbGVkXG4gICAgICogZnJvbSBEaXNwb3NlIChpZiBkaXNwb3NpbmcgaXMgdHJ1ZSkgb3IgZnJvbSB0aGUgZmluYWxpemVyIChpZiBkaXNwb3NpbmcgaXMgZmFsc2UpLlxuICAgICAqIERlcml2ZWQgY2xhc3NlcyBzaG91bGQgb3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gZGlzcG9zZSByZXNvdXJjZSBpZiBuZWVkZWQuXG4gICAgICogQG1lbWJlciBSZWNvZ25pemVyLnByb3RvdHlwZS5kaXNwb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGlzcG9zaW5nIC0gRmxhZyB0byByZXF1ZXN0IGRpc3Bvc2FsLlxuICAgICAqL1xuICAgIGRpc3Bvc2UoZGlzcG9zaW5nKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2RGlzcG9zZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByaXZEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoZGlzcG9zaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlJlY28pIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVjby5hdWRpb1NvdXJjZS50dXJuT2ZmKCk7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdlJlY28uZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHRlbGVtZXRyeSBzZXR0aW5nLlxuICAgICAqIEBtZW1iZXIgUmVjb2duaXplci5wcm90b3R5cGUudGVsZW1ldHJ5RW5hYmxlZFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSB0ZWxlbWV0cnkgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgdGVsZW1ldHJ5RW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIFNlcnZpY2VSZWNvZ25pemVyQmFzZS50ZWxlbWV0cnlEYXRhRW5hYmxlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgZ2xvYmFsbHkgZW5hYmxlcyBvciBkaXNhYmxlcyB0ZWxlbWV0cnkuXG4gICAgICogQG1lbWJlciBSZWNvZ25pemVyLnByb3RvdHlwZS5lbmFibGVUZWxlbWV0cnlcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGVuYWJsZWQgLSBHbG9iYWwgc2V0dGluZyBmb3IgdGVsZW1ldHJ5IGNvbGxlY3Rpb24uXG4gICAgICogSWYgc2V0IHRvIHRydWUsIHRlbGVtZXRyeSBpbmZvcm1hdGlvbiBsaWtlIG1pY3JvcGhvbmUgZXJyb3JzLFxuICAgICAqIHJlY29nbml0aW9uIGVycm9ycyBhcmUgY29sbGVjdGVkIGFuZCBzZW50IHRvIE1pY3Jvc29mdC5cbiAgICAgKiBJZiBzZXQgdG8gZmFsc2UsIG5vIHRlbGVtZXRyeSBpcyBzZW50IHRvIE1pY3Jvc29mdC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZW5hYmxlVGVsZW1ldHJ5KGVuYWJsZWQpIHtcbiAgICAgICAgU2VydmljZVJlY29nbml6ZXJCYXNlLnRlbGVtZXRyeURhdGFFbmFibGVkID0gZW5hYmxlZDtcbiAgICB9XG4gICAgLy8gRG9lcyB0aGUgZ2VuZXJpYyByZWNvZ25pemVyIHNldHVwIHRoYXQgaXMgY29tbW9uIGFjcm9zcyBhbGwgcmVjb2duaXplciB0eXBlcy5cbiAgICBpbXBsQ29tbW9uUmVjb2duaXplclNldHVwKCkge1xuICAgICAgICBsZXQgb3NQbGF0Zm9ybSA9ICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSA/IFwiQnJvd3NlclwiIDogXCJOb2RlXCI7XG4gICAgICAgIGxldCBvc05hbWUgPSBcInVua25vd25cIjtcbiAgICAgICAgbGV0IG9zVmVyc2lvbiA9IFwidW5rbm93blwiO1xuICAgICAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgb3NQbGF0Zm9ybSA9IG9zUGxhdGZvcm0gKyBcIi9cIiArIG5hdmlnYXRvci5wbGF0Zm9ybTtcbiAgICAgICAgICAgIG9zTmFtZSA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG4gICAgICAgICAgICBvc1ZlcnNpb24gPSBuYXZpZ2F0b3IuYXBwVmVyc2lvbjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZWNvZ25pemVyQ29uZmlnID0gdGhpcy5jcmVhdGVSZWNvZ25pemVyQ29uZmlnKG5ldyBTcGVlY2hTZXJ2aWNlQ29uZmlnKG5ldyBDb250ZXh0KG5ldyBPUyhvc1BsYXRmb3JtLCBvc05hbWUsIG9zVmVyc2lvbikpKSk7XG4gICAgICAgIHRoaXMucHJpdlJlY28gPSB0aGlzLmNyZWF0ZVNlcnZpY2VSZWNvZ25pemVyKFJlY29nbml6ZXIuZ2V0QXV0aEZyb21Qcm9wZXJ0aWVzKHRoaXMucHJpdlByb3BlcnRpZXMpLCB0aGlzLnByaXZDb25uZWN0aW9uRmFjdG9yeSwgdGhpcy5hdWRpb0NvbmZpZywgcmVjb2duaXplckNvbmZpZyk7XG4gICAgfVxuICAgIHJlY29nbml6ZU9uY2VBc3luY0ltcGwocmVjb2duaXRpb25Nb2RlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkKTtcbiAgICAgICAgICAgIGNvbnN0IHJldCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdlJlY28ucmVjb2duaXplKHJlY29nbml0aW9uTW9kZSwgcmV0LnJlc29sdmUsIHJldC5yZWplY3QpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geWllbGQgcmV0LnByb21pc2U7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmNJbXBsKHJlY29nbml0aW9uTW9kZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZCk7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVjby5yZWNvZ25pemUocmVjb2duaXRpb25Nb2RlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmNJbXBsKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZCk7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW1wbFJlY29nbml6ZXJTdG9wKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdlJlY28pIHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZSZWNvLnN0b3BSZWNvZ25pemluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGdldEF1dGhGcm9tUHJvcGVydGllcyhwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbktleSA9IHByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXksIHVuZGVmaW5lZCk7XG4gICAgICAgIGNvbnN0IGF1dGhlbnRpY2F0aW9uID0gKHN1YnNjcmlwdGlvbktleSAmJiBzdWJzY3JpcHRpb25LZXkgIT09IFwiXCIpID9cbiAgICAgICAgICAgIG5ldyBDb2duaXRpdmVTdWJzY3JpcHRpb25LZXlBdXRoZW50aWNhdGlvbihzdWJzY3JpcHRpb25LZXkpIDpcbiAgICAgICAgICAgIG5ldyBDb2duaXRpdmVUb2tlbkF1dGhlbnRpY2F0aW9uKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdXRob3JpemF0aW9uVG9rZW4gPSBwcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4sIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShhdXRob3JpemF0aW9uVG9rZW4pO1xuICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1dGhvcml6YXRpb25Ub2tlbiA9IHByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGF1dGhvcml6YXRpb25Ub2tlbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGF1dGhlbnRpY2F0aW9uO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVjb2duaXplci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBEZWZpbmVzIHRoZSBwb3NzaWJsZSByZWFzb25zIGEgcmVjb2duaXRpb24gcmVzdWx0IG1pZ2h0IGJlIGdlbmVyYXRlZC5cbiAqIEBjbGFzcyBSZXN1bHRSZWFzb25cbiAqL1xuZXhwb3J0IHZhciBSZXN1bHRSZWFzb247XG4oZnVuY3Rpb24gKFJlc3VsdFJlYXNvbikge1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyBzcGVlY2ggY291bGQgbm90IGJlIHJlY29nbml6ZWQuIE1vcmUgZGV0YWlsc1xuICAgICAqIGNhbiBiZSBmb3VuZCBpbiB0aGUgTm9NYXRjaERldGFpbHMgb2JqZWN0LlxuICAgICAqIEBtZW1iZXIgUmVzdWx0UmVhc29uLk5vTWF0Y2hcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiTm9NYXRjaFwiXSA9IDBdID0gXCJOb01hdGNoXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoYXQgdGhlIHJlY29nbml0aW9uIHdhcyBjYW5jZWxlZC4gTW9yZSBkZXRhaWxzXG4gICAgICogY2FuIGJlIGZvdW5kIHVzaW5nIHRoZSBDYW5jZWxsYXRpb25EZXRhaWxzIG9iamVjdC5cbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5DYW5jZWxlZFxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJDYW5jZWxlZFwiXSA9IDFdID0gXCJDYW5jZWxlZFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgc3BlZWNoIHJlc3VsdCBjb250YWlucyBoeXBvdGhlc2lzIHRleHQuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uUmVjb2duaXplZFNwZWVjaFxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJSZWNvZ25pemluZ1NwZWVjaFwiXSA9IDJdID0gXCJSZWNvZ25pemluZ1NwZWVjaFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgc3BlZWNoIHJlc3VsdCBjb250YWlucyBmaW5hbCB0ZXh0IHRoYXQgaGFzIGJlZW4gcmVjb2duaXplZC5cbiAgICAgKiBTcGVlY2ggUmVjb2duaXRpb24gaXMgbm93IGNvbXBsZXRlIGZvciB0aGlzIHBocmFzZS5cbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5SZWNvZ25pemVkU3BlZWNoXG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIlJlY29nbml6ZWRTcGVlY2hcIl0gPSAzXSA9IFwiUmVjb2duaXplZFNwZWVjaFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgc3BlZWNoIHJlc3VsdCBjb250YWlucyBhIGZpbmFsaXplZCBhY2NlcHRhbmNlIG9mIGEgcHJvdmlkZWQga2V5d29yZC5cbiAgICAgKiBTcGVlY2ggcmVjb2duaXRpb24gd2lsbCBjb250aW51ZSB1bmxlc3Mgb3RoZXJ3aXNlIGNvbmZpZ3VyZWQuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uUmVjb2duaXplZEtleXdvcmRcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiUmVjb2duaXplZEtleXdvcmRcIl0gPSA0XSA9IFwiUmVjb2duaXplZEtleXdvcmRcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIGludGVudCByZXN1bHQgY29udGFpbnMgaHlwb3RoZXNpcyB0ZXh0IGFuZCBpbnRlbnQuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uUmVjb2duaXppbmdJbnRlbnRcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiUmVjb2duaXppbmdJbnRlbnRcIl0gPSA1XSA9IFwiUmVjb2duaXppbmdJbnRlbnRcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIGludGVudCByZXN1bHQgY29udGFpbnMgZmluYWwgdGV4dCBhbmQgaW50ZW50LlxuICAgICAqIFNwZWVjaCBSZWNvZ25pdGlvbiBhbmQgSW50ZW50IGRldGVybWluYXRpb24gYXJlIG5vdyBjb21wbGV0ZSBmb3IgdGhpcyBwaHJhc2UuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uUmVjb2duaXplZEludGVudFxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJSZWNvZ25pemVkSW50ZW50XCJdID0gNl0gPSBcIlJlY29nbml6ZWRJbnRlbnRcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIHRyYW5zbGF0aW9uIHJlc3VsdCBjb250YWlucyBoeXBvdGhlc2lzIHRleHQgYW5kIGl0cyB0cmFuc2xhdGlvbihzKS5cbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5UcmFuc2xhdGluZ1NwZWVjaFxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJUcmFuc2xhdGluZ1NwZWVjaFwiXSA9IDddID0gXCJUcmFuc2xhdGluZ1NwZWVjaFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgdHJhbnNsYXRpb24gcmVzdWx0IGNvbnRhaW5zIGZpbmFsIHRleHQgYW5kIGNvcnJlc3BvbmRpbmcgdHJhbnNsYXRpb24ocykuXG4gICAgICogU3BlZWNoIFJlY29nbml0aW9uIGFuZCBUcmFuc2xhdGlvbiBhcmUgbm93IGNvbXBsZXRlIGZvciB0aGlzIHBocmFzZS5cbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5UcmFuc2xhdGVkU3BlZWNoXG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIlRyYW5zbGF0ZWRTcGVlY2hcIl0gPSA4XSA9IFwiVHJhbnNsYXRlZFNwZWVjaFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgc3ludGhlc2l6ZWQgYXVkaW8gcmVzdWx0IGNvbnRhaW5zIGEgbm9uLXplcm8gYW1vdW50IG9mIGF1ZGlvIGRhdGFcbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5TeW50aGVzaXppbmdBdWRpb1xuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJTeW50aGVzaXppbmdBdWRpb1wiXSA9IDldID0gXCJTeW50aGVzaXppbmdBdWRpb1wiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgc3ludGhlc2l6ZWQgYXVkaW8gaXMgbm93IGNvbXBsZXRlIGZvciB0aGlzIHBocmFzZS5cbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5TeW50aGVzaXppbmdBdWRpb0NvbXBsZXRlZFxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJTeW50aGVzaXppbmdBdWRpb0NvbXBsZXRlZFwiXSA9IDEwXSA9IFwiU3ludGhlc2l6aW5nQXVkaW9Db21wbGV0ZWRcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIHNwZWVjaCBzeW50aGVzaXMgaXMgbm93IHN0YXJ0ZWRcbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5TeW50aGVzaXppbmdBdWRpb1N0YXJ0ZWRcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiU3ludGhlc2l6aW5nQXVkaW9TdGFydGVkXCJdID0gMTFdID0gXCJTeW50aGVzaXppbmdBdWRpb1N0YXJ0ZWRcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIHZvaWNlIHByb2ZpbGUgaXMgYmVpbmcgZW5yb2xsZWQgYW5kIGN1c3RvbWVycyBuZWVkIHRvIHNlbmQgbW9yZSBhdWRpbyB0byBjcmVhdGUgYSB2b2ljZSBwcm9maWxlLlxuICAgICAqIEBtZW1iZXIgUmVzdWx0UmVhc29uLkVucm9sbGluZ1ZvaWNlUHJvZmlsZVxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJFbnJvbGxpbmdWb2ljZVByb2ZpbGVcIl0gPSAxMl0gPSBcIkVucm9sbGluZ1ZvaWNlUHJvZmlsZVwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgdm9pY2UgcHJvZmlsZSBoYXMgYmVlbiBlbnJvbGxlZC5cbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5FbnJvbGxlZFZvaWNlUHJvZmlsZVxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJFbnJvbGxlZFZvaWNlUHJvZmlsZVwiXSA9IDEzXSA9IFwiRW5yb2xsZWRWb2ljZVByb2ZpbGVcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgc3VjY2Vzc2Z1bCBpZGVudGlmaWNhdGlvbiBvZiBzb21lIHNwZWFrZXJzLlxuICAgICAqIEBtZW1iZXIgUmVzdWx0UmVhc29uLlJlY29nbml6ZWRTcGVha2Vyc1xuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJSZWNvZ25pemVkU3BlYWtlcnNcIl0gPSAxNF0gPSBcIlJlY29nbml6ZWRTcGVha2Vyc1wiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyBzdWNjZXNzZnVsbHkgdmVyaWZpZWQgb25lIHNwZWFrZXIuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uUmVjb2duaXplZFNwZWFrZXJcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiUmVjb2duaXplZFNwZWFrZXJcIl0gPSAxNV0gPSBcIlJlY29nbml6ZWRTcGVha2VyXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGEgdm9pY2UgcHJvZmlsZSBoYXMgYmVlbiByZXNldCBzdWNjZXNzZnVsbHkuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uUmVzZXRWb2ljZVByb2ZpbGVcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiUmVzZXRWb2ljZVByb2ZpbGVcIl0gPSAxNl0gPSBcIlJlc2V0Vm9pY2VQcm9maWxlXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGEgdm9pY2UgcHJvZmlsZSBoYXMgYmVlbiBkZWxldGVkIHN1Y2Nlc3NmdWxseS5cbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5EZWxldGVkVm9pY2VQcm9maWxlXG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIkRlbGV0ZWRWb2ljZVByb2ZpbGVcIl0gPSAxN10gPSBcIkRlbGV0ZWRWb2ljZVByb2ZpbGVcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgc3ludGhlc2lzIHZvaWNlcyBsaXN0IGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSByZXRyaWV2ZWQuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uVm9pY2VzTGlzdFJldHJpZXZlZFxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJWb2ljZXNMaXN0UmV0cmlldmVkXCJdID0gMThdID0gXCJWb2ljZXNMaXN0UmV0cmlldmVkXCI7XG59KShSZXN1bHRSZWFzb24gfHwgKFJlc3VsdFJlYXNvbiA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlc3VsdFJlYXNvbi5qcy5tYXBcbiIsIi8vXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdC4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4gU2VlIExJQ0VOU0UubWQgZmlsZSBpbiB0aGUgcHJvamVjdCByb290IGZvciBmdWxsIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4vL1xuaW1wb3J0IHsgU2Vzc2lvbkV2ZW50QXJncyB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogRGVmaW5lcyBwYXlsb2FkIGZvciBhbnkgU2VydmljZSBtZXNzYWdlIGV2ZW50XG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuOS4wXG4gKi9cbmV4cG9ydCBjbGFzcyBTZXJ2aWNlRXZlbnRBcmdzIGV4dGVuZHMgU2Vzc2lvbkV2ZW50QXJncyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ganNvbiAtIGpzb24gcGF5bG9hZCBvZiB0aGUgVVNQIG1lc3NhZ2UuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoanNvbiwgbmFtZSwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHN1cGVyKHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdkpzb25SZXN1bHQgPSBqc29uO1xuICAgICAgICB0aGlzLnByaXZFdmVudE5hbWUgPSBuYW1lO1xuICAgIH1cbiAgICBnZXQganNvblN0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkpzb25SZXN1bHQ7XG4gICAgfVxuICAgIGdldCBldmVudE5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFdmVudE5hbWU7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TZXJ2aWNlRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgY2hhbm5lbHMgdXNlZCB0byBwYXNzIHByb3BlcnR5IHNldHRpbmdzIHRvIHNlcnZpY2UuXG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNy4wLlxuICovXG5leHBvcnQgdmFyIFNlcnZpY2VQcm9wZXJ0eUNoYW5uZWw7XG4oZnVuY3Rpb24gKFNlcnZpY2VQcm9wZXJ0eUNoYW5uZWwpIHtcbiAgICAvKipcbiAgICAgKiBVc2VzIFVSSSBxdWVyeSBwYXJhbWV0ZXIgdG8gcGFzcyBwcm9wZXJ0eSBzZXR0aW5ncyB0byBzZXJ2aWNlLlxuICAgICAqL1xuICAgIFNlcnZpY2VQcm9wZXJ0eUNoYW5uZWxbU2VydmljZVByb3BlcnR5Q2hhbm5lbFtcIlVyaVF1ZXJ5UGFyYW1ldGVyXCJdID0gMF0gPSBcIlVyaVF1ZXJ5UGFyYW1ldGVyXCI7XG59KShTZXJ2aWNlUHJvcGVydHlDaGFubmVsIHx8IChTZXJ2aWNlUHJvcGVydHlDaGFubmVsID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U2VydmljZVByb3BlcnR5Q2hhbm5lbC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBEZWZpbmVzIGNvbnRlbnQgZm9yIHNlc3Npb24gZXZlbnRzIGxpa2UgU2Vzc2lvblN0YXJ0ZWQvU3RvcHBlZCwgU291bmRTdGFydGVkL1N0b3BwZWQuXG4gKiBAY2xhc3MgU2Vzc2lvbkV2ZW50QXJnc1xuICovXG5leHBvcnQgY2xhc3MgU2Vzc2lvbkV2ZW50QXJncyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2Vzc2lvbklkIC0gVGhlIHNlc3Npb24gaWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc2Vzc2lvbklkKSB7XG4gICAgICAgIHRoaXMucHJpdlNlc3Npb25JZCA9IHNlc3Npb25JZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50cyB0aGUgc2Vzc2lvbiBpZGVudGlmaWVyLlxuICAgICAqIEBtZW1iZXIgU2Vzc2lvbkV2ZW50QXJncy5wcm90b3R5cGUuc2Vzc2lvbklkXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJlcHJlc2VudHMgdGhlIHNlc3Npb24gaWRlbnRpZmllci5cbiAgICAgKi9cbiAgICBnZXQgc2Vzc2lvbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U2Vzc2lvbklkO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U2Vzc2lvbkV2ZW50QXJncy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG4vKipcbiAqIFNvdXJjZSBMYW5ndWFnZSBjb25maWd1cmF0aW9uLlxuICogQGNsYXNzIFNvdXJjZUxhbmd1YWdlQ29uZmlnXG4gKi9cbmV4cG9ydCBjbGFzcyBTb3VyY2VMYW5ndWFnZUNvbmZpZyB7XG4gICAgY29uc3RydWN0b3IobGFuZ3VhZ2UsIGVuZHBvaW50SWQpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQobGFuZ3VhZ2UsIFwibGFuZ3VhZ2VcIik7XG4gICAgICAgIHRoaXMucHJpdkxhbmd1YWdlID0gbGFuZ3VhZ2U7XG4gICAgICAgIHRoaXMucHJpdkVuZHBvaW50SWQgPSBlbmRwb2ludElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIFNvdXJjZUxhbmd1YWdlQ29uZmlnLmZyb21MYW5ndWFnZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZ3VhZ2UgbGFuZ3VhZ2UgKGVnLiBcImVuLVVTXCIpIHZhbHVlIG9mIGNvbmZpZy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZz99IGVuZHBvaW50SWQgZW5kcG9pbnRJZCBvZiBtb2RlbCBib3VuZCB0byBnaXZlbiBsYW5ndWFnZSBvZiBjb25maWcuXG4gICAgICogQHJldHVybiB7U291cmNlTGFuZ3VhZ2VDb25maWd9IEluc3RhbmNlIG9mIFNvdXJjZUxhbmd1YWdlQ29uZmlnXG4gICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgU291cmNlTGFuZ3VhZ2VDb25maWcgd2l0aCB0aGUgZ2l2ZW4gbGFuZ3VhZ2UgYW5kIG9wdGlvbmFsIGVuZHBvaW50SWQuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjEzLjAuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21MYW5ndWFnZShsYW5ndWFnZSwgZW5kcG9pbnRJZCkge1xuICAgICAgICByZXR1cm4gbmV3IFNvdXJjZUxhbmd1YWdlQ29uZmlnKGxhbmd1YWdlLCBlbmRwb2ludElkKTtcbiAgICB9XG4gICAgZ2V0IGxhbmd1YWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TGFuZ3VhZ2U7XG4gICAgfVxuICAgIGdldCBlbmRwb2ludElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RW5kcG9pbnRJZDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNvdXJjZUxhbmd1YWdlQ29uZmlnLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IFZvaWNlUHJvZmlsZVR5cGUsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBEZWZpbmVzIFNwZWFrZXJJZGVudGlmaWNhdGlvbk1vZGVsIGNsYXNzIGZvciBTcGVha2VyIFJlY29nbml0aW9uXG4gKiBNb2RlbCBjb250YWlucyBhIHNldCBvZiBwcm9maWxlcyBhZ2FpbnN0IHdoaWNoIHRvIGlkZW50aWZ5IHNwZWFrZXIocylcbiAqIEBjbGFzcyBTcGVha2VySWRlbnRpZmljYXRpb25Nb2RlbFxuICovXG5leHBvcnQgY2xhc3MgU3BlYWtlcklkZW50aWZpY2F0aW9uTW9kZWwge1xuICAgIGNvbnN0cnVjdG9yKHByb2ZpbGVzKSB7XG4gICAgICAgIHRoaXMucHJpdlZvaWNlUHJvZmlsZXMgPSBbXTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQocHJvZmlsZXMsIFwiVm9pY2VQcm9maWxlc1wiKTtcbiAgICAgICAgaWYgKHByb2ZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRW1wdHkgVm9pY2UgUHJvZmlsZXMgYXJyYXlcIik7XG4gICAgICAgIH1cbiAgICAgICAgcHJvZmlsZXMuZm9yRWFjaCgocHJvZmlsZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHByb2ZpbGUucHJvZmlsZVR5cGUgIT09IFZvaWNlUHJvZmlsZVR5cGUuVGV4dEluZGVwZW5kZW50SWRlbnRpZmljYXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJZGVudGlmaWNhdGlvbiBtb2RlbCBjYW4gb25seSBiZSBjcmVhdGVkIGZyb20gSWRlbnRpZmljYXRpb24gcHJvZmlsZTogXCIgKyBwcm9maWxlLnByb2ZpbGVJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByaXZWb2ljZVByb2ZpbGVzLnB1c2gocHJvZmlsZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVByb2ZpbGVzKHByb2ZpbGVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3BlYWtlcklkZW50aWZpY2F0aW9uTW9kZWwocHJvZmlsZXMpO1xuICAgIH1cbiAgICBnZXQgdm9pY2VQcm9maWxlSWRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Vm9pY2VQcm9maWxlcy5tYXAoKHByb2ZpbGUpID0+IHByb2ZpbGUucHJvZmlsZUlkKS5qb2luKFwiLFwiKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWFrZXJJZGVudGlmaWNhdGlvbk1vZGVsLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtY2xhc3Nlcy1wZXItZmlsZSAqL1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25EZXRhaWxzQmFzZSwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBDYW5jZWxsYXRpb25SZWFzb24sIFByb3BlcnR5Q29sbGVjdGlvbiwgUHJvcGVydHlJZCwgUmVzdWx0UmVhc29uLCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbmV4cG9ydCB2YXIgU3BlYWtlclJlY29nbml0aW9uUmVzdWx0VHlwZTtcbihmdW5jdGlvbiAoU3BlYWtlclJlY29nbml0aW9uUmVzdWx0VHlwZSkge1xuICAgIFNwZWFrZXJSZWNvZ25pdGlvblJlc3VsdFR5cGVbU3BlYWtlclJlY29nbml0aW9uUmVzdWx0VHlwZVtcIlZlcmlmeVwiXSA9IDBdID0gXCJWZXJpZnlcIjtcbiAgICBTcGVha2VyUmVjb2duaXRpb25SZXN1bHRUeXBlW1NwZWFrZXJSZWNvZ25pdGlvblJlc3VsdFR5cGVbXCJJZGVudGlmeVwiXSA9IDFdID0gXCJJZGVudGlmeVwiO1xufSkoU3BlYWtlclJlY29nbml0aW9uUmVzdWx0VHlwZSB8fCAoU3BlYWtlclJlY29nbml0aW9uUmVzdWx0VHlwZSA9IHt9KSk7XG4vKipcbiAqIE91dHB1dCBmb3JtYXRcbiAqIEBjbGFzcyBTcGVha2VyUmVjb2duaXRpb25SZXN1bHRcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWFrZXJSZWNvZ25pdGlvblJlc3VsdCB7XG4gICAgY29uc3RydWN0b3IocmVzdWx0VHlwZSwgZGF0YSwgcHJvZmlsZUlkLCByZXN1bHRSZWFzb24gPSBSZXN1bHRSZWFzb24uUmVjb2duaXplZFNwZWFrZXIpIHtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgdGhpcy5wcml2UmVhc29uID0gcmVzdWx0UmVhc29uO1xuICAgICAgICBpZiAodGhpcy5wcml2UmVhc29uICE9PSBSZXN1bHRSZWFzb24uQ2FuY2VsZWQpIHtcbiAgICAgICAgICAgIGlmIChyZXN1bHRUeXBlID09PSBTcGVha2VyUmVjb2duaXRpb25SZXN1bHRUeXBlLklkZW50aWZ5KSB7XG4gICAgICAgICAgICAgICAgY29uc3QganNvbiA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoanNvbiwgXCJKU09OXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlByb2ZpbGVJZCA9IGpzb24uaWRlbnRpZmllZFByb2ZpbGUucHJvZmlsZUlkO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlNjb3JlID0ganNvbi5pZGVudGlmaWVkUHJvZmlsZS5zY29yZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGpzb24sIFwiSlNPTlwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTY29yZSA9IGpzb24uc2NvcmU7XG4gICAgICAgICAgICAgICAgaWYgKGpzb24ucmVjb2duaXRpb25SZXN1bHQudG9Mb3dlckNhc2UoKSAhPT0gXCJhY2NlcHRcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWFzb24gPSBSZXN1bHRSZWFzb24uTm9NYXRjaDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHByb2ZpbGVJZCAhPT0gdW5kZWZpbmVkICYmIHByb2ZpbGVJZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZQcm9maWxlSWQgPSBwcm9maWxlSWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QganNvbiA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChqc29uLCBcIkpTT05cIik7XG4gICAgICAgICAgICB0aGlzLnByaXZFcnJvckRldGFpbHMgPSBqc29uLnN0YXR1c1RleHQ7XG4gICAgICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KENhbmNlbGxhdGlvbkVycm9yQ29kZVByb3BlcnR5TmFtZSwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZS5TZXJ2aWNlRXJyb3JdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHQsIGRhdGEpO1xuICAgIH1cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxuICAgIGdldCByZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgfVxuICAgIGdldCBwcm9maWxlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9maWxlSWQ7XG4gICAgfVxuICAgIGdldCBlcnJvckRldGFpbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckRldGFpbHM7XG4gICAgfVxuICAgIGdldCBzY29yZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNjb3JlO1xuICAgIH1cbn1cbi8qKlxuICogQGNsYXNzIFNwZWFrZXJSZWNvZ25pdGlvbkNhbmNlbGxhdGlvbkRldGFpbHNcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWFrZXJSZWNvZ25pdGlvbkNhbmNlbGxhdGlvbkRldGFpbHMgZXh0ZW5kcyBDYW5jZWxsYXRpb25EZXRhaWxzQmFzZSB7XG4gICAgY29uc3RydWN0b3IocmVhc29uLCBlcnJvckRldGFpbHMsIGVycm9yQ29kZSkge1xuICAgICAgICBzdXBlcihyZWFzb24sIGVycm9yRGV0YWlscywgZXJyb3JDb2RlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBTcGVha2VyUmVjb2duaXRpb25DYW5jZWxsYXRpb25EZXRhaWxzIG9iamVjdCBmb3IgdGhlIGNhbmNlbGVkIFNwZWFrZXJSZWNvZ25pdGlvblJlc3VsdFxuICAgICAqIEBtZW1iZXIgU3BlYWtlclJlY29nbml0aW9uQ2FuY2VsbGF0aW9uRGV0YWlscy5mcm9tUmVzdWx0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7U3BlYWtlclJlY29nbml0aW9uUmVzdWx0fSByZXN1bHQgLSBUaGUgcmVzdWx0IHRoYXQgd2FzIGNhbmNlbGVkLlxuICAgICAqIEByZXR1cm5zIHtTcGVha2VyUmVjb2duaXRpb25DYW5jZWxsYXRpb25EZXRhaWxzfSBUaGUgY2FuY2VsbGF0aW9uIGRldGFpbHMgb2JqZWN0IGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21SZXN1bHQocmVzdWx0KSB7XG4gICAgICAgIGNvbnN0IHJlYXNvbiA9IENhbmNlbGxhdGlvblJlYXNvbi5FcnJvcjtcbiAgICAgICAgbGV0IGVycm9yQ29kZSA9IENhbmNlbGxhdGlvbkVycm9yQ29kZS5Ob0Vycm9yO1xuICAgICAgICBpZiAoISFyZXN1bHQucHJvcGVydGllcykge1xuICAgICAgICAgICAgZXJyb3JDb2RlID0gQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW3Jlc3VsdC5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KENhbmNlbGxhdGlvbkVycm9yQ29kZVByb3BlcnR5TmFtZSwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZS5Ob0Vycm9yXSldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgU3BlYWtlclJlY29nbml0aW9uQ2FuY2VsbGF0aW9uRGV0YWlscyhyZWFzb24sIHJlc3VsdC5lcnJvckRldGFpbHMsIGVycm9yQ29kZSk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVha2VyUmVjb2duaXRpb25SZXN1bHQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgQ29udGV4dCwgT1MsIFNwZWFrZXJJZE1lc3NhZ2VBZGFwdGVyLCBTcGVha2VyUmVjb2duaXRpb25Db25maWcsIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUlkLCBSZXN1bHRSZWFzb24sIFNwZWFrZXJJZGVudGlmaWNhdGlvbk1vZGVsLCBTcGVha2VyUmVjb2duaXRpb25SZXN1bHQsIFNwZWFrZXJSZWNvZ25pdGlvblJlc3VsdFR5cGUsIFNwZWFrZXJWZXJpZmljYXRpb25Nb2RlbCwgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIERlZmluZXMgU3BlYWtlclJlY29nbml6ZXIgY2xhc3MgZm9yIFNwZWFrZXIgUmVjb2duaXRpb25cbiAqIEhhbmRsZXMgb3BlcmF0aW9ucyBmcm9tIHVzZXIgZm9yIFZvaWNlIFByb2ZpbGUgb3BlcmF0aW9ucyAoZS5nLiBjcmVhdGVQcm9maWxlLCBkZWxldGVQcm9maWxlKVxuICogQGNsYXNzIFNwZWFrZXJSZWNvZ25pemVyXG4gKi9cbmV4cG9ydCBjbGFzcyBTcGVha2VyUmVjb2duaXplciB7XG4gICAgLyoqXG4gICAgICogU3BlYWtlclJlY29nbml6ZXIgY29uc3RydWN0b3IuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtTcGVlY2hDb25maWd9IHNwZWVjaENvbmZpZyAtIEFuIHNldCBvZiBpbml0aWFsIHByb3BlcnRpZXMgZm9yIHRoaXMgcmVjb2duaXplciAoYXV0aGVudGljYXRpb24ga2V5LCByZWdpb24sICZjKVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNwZWVjaENvbmZpZywgYXVkaW9Db25maWcpIHtcbiAgICAgICAgY29uc3Qgc3BlZWNoQ29uZmlnSW1wbCA9IHNwZWVjaENvbmZpZztcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKHNwZWVjaENvbmZpZ0ltcGwsIFwic3BlZWNoQ29uZmlnXCIpO1xuICAgICAgICB0aGlzLnByaXZBdWRpb0NvbmZpZ0ltcGwgPSBhdWRpb0NvbmZpZztcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKHRoaXMucHJpdkF1ZGlvQ29uZmlnSW1wbCwgXCJhdWRpb0NvbmZpZ1wiKTtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IHNwZWVjaENvbmZpZ0ltcGwucHJvcGVydGllcy5jbG9uZSgpO1xuICAgICAgICB0aGlzLmltcGxTUlNldHVwKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBzZXJ2aWNlLlxuICAgICAqIEBtZW1iZXIgU3BlYWtlclJlY29nbml6ZXIucHJvdG90eXBlLmF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqL1xuICAgIGdldCBhdXRob3JpemF0aW9uVG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMvU2V0cyB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiB1c2VkIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIHNlcnZpY2UuXG4gICAgICogQG1lbWJlciBTcGVha2VyUmVjb2duaXplci5wcm90b3R5cGUuYXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIEF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICovXG4gICAgc2V0IGF1dGhvcml6YXRpb25Ub2tlbih0b2tlbikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodG9rZW4sIFwidG9rZW5cIik7XG4gICAgICAgIHRoaXMucHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCB0b2tlbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIFNwZWFrZXJSZWNvZ25pemVyLlxuICAgICAqIEBtZW1iZXIgU3BlYWtlclJlY29nbml6ZXIucHJvdG90eXBlLnByb3BlcnRpZXNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1Byb3BlcnR5Q29sbGVjdGlvbn0gVGhlIGNvbGxlY3Rpb24gb2YgcHJvcGVydGllcyBhbmQgdGhlaXIgdmFsdWVzIGRlZmluZWQgZm9yIHRoaXMgU3BlYWtlclJlY29nbml6ZXIuXG4gICAgICovXG4gICAgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgcmVjb2duaXRpb24gcmVzdWx0IGZvciBtb2RlbCB1c2luZyBnaXZlbiBhdWRpb1xuICAgICAqIEBtZW1iZXIgU3BlYWtlclJlY29nbml6ZXIucHJvdG90eXBlLnJlY29nbml6ZU9uY2VBc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAYXN5bmNcbiAgICAgKiBAcGFyYW0ge1NwZWFrZXJJZGVudGlmaWNhdGlvbk1vZGVsfSBtb2RlbCBNb2RlbCBjb250YWluaW5nIFZvaWNlIFByb2ZpbGVzIHRvIGJlIGlkZW50aWZpZWRcbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayBpbnZva2VkIG9uY2UgcmVzdWx0IGlzIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSBlcnIgLSBDYWxsYmFjayBpbnZva2VkIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICovXG4gICAgcmVjb2duaXplT25jZUFzeW5jKG1vZGVsKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAobW9kZWwgaW5zdGFuY2VvZiBTcGVha2VySWRlbnRpZmljYXRpb25Nb2RlbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlUHJvbWlzZSA9IHRoaXMucHJpdkFkYXB0ZXIuaWRlbnRpZnlTcGVha2VyKG1vZGVsLCB0aGlzLnByaXZBdWRpb0NvbmZpZ0ltcGwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFJlc3VsdChyZXNwb25zZVByb21pc2UsIFNwZWFrZXJSZWNvZ25pdGlvblJlc3VsdFR5cGUuSWRlbnRpZnksIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtb2RlbCBpbnN0YW5jZW9mIFNwZWFrZXJWZXJpZmljYXRpb25Nb2RlbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlUHJvbWlzZSA9IHRoaXMucHJpdkFkYXB0ZXIudmVyaWZ5U3BlYWtlcihtb2RlbCwgdGhpcy5wcml2QXVkaW9Db25maWdJbXBsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXN1bHQocmVzcG9uc2VQcm9taXNlLCBTcGVha2VyUmVjb2duaXRpb25SZXN1bHRUeXBlLlZlcmlmeSwgbW9kZWwudm9pY2VQcm9maWxlLnByb2ZpbGVJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTcGVha2VyUmVjb2duaXplci5yZWNvZ25pemVPbmNlOiBVbmV4cGVjdGVkIG1vZGVsIHR5cGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmNsdWRlZCBmb3IgY29tcGF0aWJpbGl0eVxuICAgICAqIEBtZW1iZXIgU3BlYWtlclJlY29nbml6ZXIucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIERvZXMgY2xhc3Mgc2V0dXAsIHN3aXBlZCBmcm9tIFJlY29nbml6ZXIuXG4gICAgaW1wbFNSU2V0dXAoKSB7XG4gICAgICAgIGxldCBvc1BsYXRmb3JtID0gKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpID8gXCJCcm93c2VyXCIgOiBcIk5vZGVcIjtcbiAgICAgICAgbGV0IG9zTmFtZSA9IFwidW5rbm93blwiO1xuICAgICAgICBsZXQgb3NWZXJzaW9uID0gXCJ1bmtub3duXCI7XG4gICAgICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBvc1BsYXRmb3JtID0gb3NQbGF0Zm9ybSArIFwiL1wiICsgbmF2aWdhdG9yLnBsYXRmb3JtO1xuICAgICAgICAgICAgb3NOYW1lID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgICAgICAgICAgIG9zVmVyc2lvbiA9IG5hdmlnYXRvci5hcHBWZXJzaW9uO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlY29nbml6ZXJDb25maWcgPSBuZXcgU3BlYWtlclJlY29nbml0aW9uQ29uZmlnKG5ldyBDb250ZXh0KG5ldyBPUyhvc1BsYXRmb3JtLCBvc05hbWUsIG9zVmVyc2lvbikpLCB0aGlzLnByaXZQcm9wZXJ0aWVzKTtcbiAgICAgICAgdGhpcy5wcml2QWRhcHRlciA9IG5ldyBTcGVha2VySWRNZXNzYWdlQWRhcHRlcihyZWNvZ25pemVyQ29uZmlnKTtcbiAgICB9XG4gICAgZ2V0UmVzdWx0KHJlc3BvbnNlUHJvbWlzZSwgcmVzdWx0VHlwZSwgcHJvZmlsZUlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHJlc3BvbnNlUHJvbWlzZTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3BlYWtlclJlY29nbml0aW9uUmVzdWx0KHJlc3VsdFR5cGUsIHJlc3BvbnNlLmRhdGEsIHByb2ZpbGVJZCwgcmVzcG9uc2Uub2sgPyBSZXN1bHRSZWFzb24uUmVjb2duaXplZFNwZWFrZXIgOiBSZXN1bHRSZWFzb24uQ2FuY2VsZWQpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWFrZXJSZWNvZ25pemVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IFZvaWNlUHJvZmlsZVR5cGUsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBEZWZpbmVzIFNwZWFrZXJWZXJpZmljYXRpb25Nb2RlbCBjbGFzcyBmb3IgU3BlYWtlciBSZWNvZ25pdGlvblxuICogTW9kZWwgY29udGFpbnMgYSBwcm9maWxlIGFnYWluc3Qgd2hpY2ggdG8gdmVyaWZ5IGEgc3BlYWtlclxuICogQGNsYXNzIFNwZWFrZXJWZXJpZmljYXRpb25Nb2RlbFxuICovXG5leHBvcnQgY2xhc3MgU3BlYWtlclZlcmlmaWNhdGlvbk1vZGVsIHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9maWxlKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHByb2ZpbGUsIFwiVm9pY2VQcm9maWxlXCIpO1xuICAgICAgICBpZiAocHJvZmlsZS5wcm9maWxlVHlwZSA9PT0gVm9pY2VQcm9maWxlVHlwZS5UZXh0SW5kZXBlbmRlbnRJZGVudGlmaWNhdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmVyaWZpY2F0aW9uIG1vZGVsIGNhbm5vdCBiZSBjcmVhdGVkIGZyb20gSWRlbnRpZmljYXRpb24gcHJvZmlsZVwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZWb2ljZVByb2ZpbGUgPSBwcm9maWxlO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVByb2ZpbGUocHJvZmlsZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNwZWFrZXJWZXJpZmljYXRpb25Nb2RlbChwcm9maWxlKTtcbiAgICB9XG4gICAgZ2V0IHZvaWNlUHJvZmlsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlZvaWNlUHJvZmlsZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWFrZXJWZXJpZmljYXRpb25Nb2RlbC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cbmltcG9ydCB7IEZvcmNlRGljdGF0aW9uUHJvcGVydHlOYW1lLCBPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUsIFNlcnZpY2VQcm9wZXJ0aWVzUHJvcGVydHlOYW1lIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBPdXRwdXRGb3JtYXQsIFByb2Zhbml0eU9wdGlvbiwgUHJvcGVydHlDb2xsZWN0aW9uLCBQcm9wZXJ0eUlkLCBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBTcGVlY2ggY29uZmlndXJhdGlvbi5cbiAqIEBjbGFzcyBTcGVlY2hDb25maWdcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWVjaENvbmZpZyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2UuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhdGljIGluc3RhbmNlIG9mIFNwZWVjaENvbmZpZyByZXR1cm5lZCBieSBwYXNzaW5nIHN1YnNjcmlwdGlvbktleSBhbmQgc2VydmljZSByZWdpb24uXG4gICAgICogTm90ZTogUGxlYXNlIHVzZSB5b3VyIExhbmd1YWdlVW5kZXJzdGFuZGluZyBzdWJzY3JpcHRpb24ga2V5IGluIGNhc2UgeW91IHdhbnQgdG8gdXNlIHRoZSBJbnRlbnQgcmVjb2duaXplci5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaENvbmZpZy5mcm9tU3Vic2NyaXB0aW9uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdWJzY3JpcHRpb25LZXkgLSBUaGUgc3Vic2NyaXB0aW9uIGtleS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVnaW9uIC0gVGhlIHJlZ2lvbiBuYW1lIChzZWUgdGhlIDxhIGhyZWY9XCJodHRwczovL2FrYS5tcy9jc3NwZWVjaC9yZWdpb25cIj5yZWdpb24gcGFnZTwvYT4pLlxuICAgICAqIEByZXR1cm5zIHtTcGVlY2hDb25maWd9IFRoZSBzcGVlY2ggZmFjdG9yeVxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbktleSwgcmVnaW9uKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShzdWJzY3JpcHRpb25LZXksIFwic3Vic2NyaXB0aW9uS2V5XCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocmVnaW9uLCBcInJlZ2lvblwiKTtcbiAgICAgICAgY29uc3Qgc3BlZWNoSW1wbCA9IG5ldyBTcGVlY2hDb25maWdJbXBsKCk7XG4gICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24sIHJlZ2lvbik7XG4gICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9JbnRlbnRSZWdpb24sIHJlZ2lvbik7XG4gICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXksIHN1YnNjcmlwdGlvbktleSk7XG4gICAgICAgIHJldHVybiBzcGVlY2hJbXBsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBzcGVlY2ggY29uZmlnIHdpdGggc3BlY2lmaWVkIGVuZHBvaW50IGFuZCBzdWJzY3JpcHRpb24ga2V5LlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGludGVuZGVkIG9ubHkgZm9yIHVzZXJzIHdobyB1c2UgYSBub24tc3RhbmRhcmQgc2VydmljZSBlbmRwb2ludCBvciBwYXJhbWV0ZXJzLlxuICAgICAqIE5vdGU6IFBsZWFzZSB1c2UgeW91ciBMYW5ndWFnZVVuZGVyc3RhbmRpbmcgc3Vic2NyaXB0aW9uIGtleSBpbiBjYXNlIHlvdSB3YW50IHRvIHVzZSB0aGUgSW50ZW50IHJlY29nbml6ZXIuXG4gICAgICogTm90ZTogVGhlIHF1ZXJ5IHBhcmFtZXRlcnMgc3BlY2lmaWVkIGluIHRoZSBlbmRwb2ludCBVUkwgYXJlIG5vdCBjaGFuZ2VkLCBldmVuIGlmIHRoZXkgYXJlIHNldCBieSBhbnkgb3RoZXIgQVBJcy5cbiAgICAgKiBGb3IgZXhhbXBsZSwgaWYgbGFuZ3VhZ2UgaXMgZGVmaW5lZCBpbiB0aGUgdXJpIGFzIHF1ZXJ5IHBhcmFtZXRlciBcImxhbmd1YWdlPWRlLURFXCIsIGFuZCBhbHNvIHNldCBieVxuICAgICAqIFNwZWVjaENvbmZpZy5zcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlID0gXCJlbi1VU1wiLCB0aGUgbGFuZ3VhZ2Ugc2V0dGluZyBpbiB1cmkgdGFrZXMgcHJlY2VkZW5jZSxcbiAgICAgKiBhbmQgdGhlIGVmZmVjdGl2ZSBsYW5ndWFnZSBpcyBcImRlLURFXCIuIE9ubHkgdGhlIHBhcmFtZXRlcnMgdGhhdCBhcmUgbm90IHNwZWNpZmllZCBpbiB0aGVcbiAgICAgKiBlbmRwb2ludCBVUkwgY2FuIGJlIHNldCBieSBvdGhlciBBUElzLlxuICAgICAqIE5vdGU6IFRvIHVzZSBhdXRob3JpemF0aW9uIHRva2VuIHdpdGggZnJvbUVuZHBvaW50LCBwYXNzIGFuIGVtcHR5IHN0cmluZyB0byB0aGUgc3Vic2NyaXB0aW9uS2V5IGluIHRoZVxuICAgICAqIGZyb21FbmRwb2ludCBtZXRob2QsIGFuZCB0aGVuIHNldCBhdXRob3JpemF0aW9uVG9rZW49XCJ0b2tlblwiIG9uIHRoZSBjcmVhdGVkIFNwZWVjaENvbmZpZyBpbnN0YW5jZSB0b1xuICAgICAqIHVzZSB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaENvbmZpZy5mcm9tRW5kcG9pbnRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtVUkx9IGVuZHBvaW50IC0gVGhlIHNlcnZpY2UgZW5kcG9pbnQgdG8gY29ubmVjdCB0by5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3Vic2NyaXB0aW9uS2V5IC0gVGhlIHN1YnNjcmlwdGlvbiBrZXkuIElmIGEgc3Vic2NyaXB0aW9uIGtleSBpcyBub3Qgc3BlY2lmaWVkLCBhbiBhdXRob3JpemF0aW9uIHRva2VuIG11c3QgYmUgc2V0LlxuICAgICAqIEByZXR1cm5zIHtTcGVlY2hDb25maWd9IEEgc3BlZWNoIGZhY3RvcnkgaW5zdGFuY2UuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21FbmRwb2ludChlbmRwb2ludCwgc3Vic2NyaXB0aW9uS2V5KSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChlbmRwb2ludCwgXCJlbmRwb2ludFwiKTtcbiAgICAgICAgY29uc3Qgc3BlZWNoSW1wbCA9IG5ldyBTcGVlY2hDb25maWdJbXBsKCk7XG4gICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCwgZW5kcG9pbnQuaHJlZik7XG4gICAgICAgIGlmICh1bmRlZmluZWQgIT09IHN1YnNjcmlwdGlvbktleSkge1xuICAgICAgICAgICAgc3BlZWNoSW1wbC5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleSwgc3Vic2NyaXB0aW9uS2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3BlZWNoSW1wbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgc3BlZWNoIGNvbmZpZyB3aXRoIHNwZWNpZmllZCBob3N0IGFuZCBzdWJzY3JpcHRpb24ga2V5LlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGludGVuZGVkIG9ubHkgZm9yIHVzZXJzIHdobyB1c2UgYSBub24tZGVmYXVsdCBzZXJ2aWNlIGhvc3QuIFN0YW5kYXJkIHJlc291cmNlIHBhdGggd2lsbCBiZSBhc3N1bWVkLlxuICAgICAqIEZvciBzZXJ2aWNlcyB3aXRoIGEgbm9uLXN0YW5kYXJkIHJlc291cmNlIHBhdGggb3Igbm8gcGF0aCBhdCBhbGwsIHVzZSBmcm9tRW5kcG9pbnQgaW5zdGVhZC5cbiAgICAgKiBOb3RlOiBRdWVyeSBwYXJhbWV0ZXJzIGFyZSBub3QgYWxsb3dlZCBpbiB0aGUgaG9zdCBVUkkgYW5kIG11c3QgYmUgc2V0IGJ5IG90aGVyIEFQSXMuXG4gICAgICogTm90ZTogVG8gdXNlIGFuIGF1dGhvcml6YXRpb24gdG9rZW4gd2l0aCBmcm9tSG9zdCwgdXNlIGZyb21Ib3N0KFVSTCksXG4gICAgICogYW5kIHRoZW4gc2V0IHRoZSBBdXRob3JpemF0aW9uVG9rZW4gcHJvcGVydHkgb24gdGhlIGNyZWF0ZWQgU3BlZWNoQ29uZmlnIGluc3RhbmNlLlxuICAgICAqIE5vdGU6IEFkZGVkIGluIHZlcnNpb24gMS45LjAuXG4gICAgICogQG1lbWJlciBTcGVlY2hDb25maWcuZnJvbUhvc3RcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtVUkx9IGhvc3QgLSBUaGUgc2VydmljZSBlbmRwb2ludCB0byBjb25uZWN0IHRvLiBGb3JtYXQgaXMgXCJwcm90b2NvbDovL2hvc3Q6cG9ydFwiIHdoZXJlIFwiOnBvcnRcIiBpcyBvcHRpb25hbC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3Vic2NyaXB0aW9uS2V5IC0gVGhlIHN1YnNjcmlwdGlvbiBrZXkuIElmIGEgc3Vic2NyaXB0aW9uIGtleSBpcyBub3Qgc3BlY2lmaWVkLCBhbiBhdXRob3JpemF0aW9uIHRva2VuIG11c3QgYmUgc2V0LlxuICAgICAqIEByZXR1cm5zIHtTcGVlY2hDb25maWd9IEEgc3BlZWNoIGZhY3RvcnkgaW5zdGFuY2UuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21Ib3N0KGhvc3ROYW1lLCBzdWJzY3JpcHRpb25LZXkpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKGhvc3ROYW1lLCBcImhvc3ROYW1lXCIpO1xuICAgICAgICBjb25zdCBzcGVlY2hJbXBsID0gbmV3IFNwZWVjaENvbmZpZ0ltcGwoKTtcbiAgICAgICAgc3BlZWNoSW1wbC5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0hvc3QsIGhvc3ROYW1lLnByb3RvY29sICsgXCIvL1wiICsgaG9zdE5hbWUuaG9zdG5hbWUgKyAoaG9zdE5hbWUucG9ydCA9PT0gXCJcIiA/IFwiXCIgOiBcIjpcIiArIGhvc3ROYW1lLnBvcnQpKTtcbiAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gc3Vic2NyaXB0aW9uS2V5KSB7XG4gICAgICAgICAgICBzcGVlY2hJbXBsLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5LCBzdWJzY3JpcHRpb25LZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzcGVlY2hJbXBsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBzcGVlY2ggZmFjdG9yeSB3aXRoIHNwZWNpZmllZCBpbml0aWFsIGF1dGhvcml6YXRpb24gdG9rZW4gYW5kIHJlZ2lvbi5cbiAgICAgKiBOb3RlOiBUaGUgY2FsbGVyIG5lZWRzIHRvIGVuc3VyZSB0aGF0IHRoZSBhdXRob3JpemF0aW9uIHRva2VuIGlzIHZhbGlkLiBCZWZvcmUgdGhlIGF1dGhvcml6YXRpb24gdG9rZW5cbiAgICAgKiBleHBpcmVzLCB0aGUgY2FsbGVyIG5lZWRzIHRvIHJlZnJlc2ggaXQgYnkgY2FsbGluZyB0aGlzIHNldHRlciB3aXRoIGEgbmV3IHZhbGlkIHRva2VuLlxuICAgICAqIE5vdGU6IFBsZWFzZSB1c2UgYSB0b2tlbiBkZXJpdmVkIGZyb20geW91ciBMYW5ndWFnZVVuZGVyc3RhbmRpbmcgc3Vic2NyaXB0aW9uIGtleSBpbiBjYXNlIHlvdSB3YW50XG4gICAgICogdG8gdXNlIHRoZSBJbnRlbnQgcmVjb2duaXplci4gQXMgY29uZmlndXJhdGlvbiB2YWx1ZXMgYXJlIGNvcGllZCB3aGVuIGNyZWF0aW5nIGEgbmV3IHJlY29nbml6ZXIsXG4gICAgICogdGhlIG5ldyB0b2tlbiB2YWx1ZSB3aWxsIG5vdCBhcHBseSB0byByZWNvZ25pemVycyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIGNyZWF0ZWQuIEZvciByZWNvZ25pemVyc1xuICAgICAqIHRoYXQgaGF2ZSBiZWVuIGNyZWF0ZWQgYmVmb3JlLCB5b3UgbmVlZCB0byBzZXQgYXV0aG9yaXphdGlvbiB0b2tlbiBvZiB0aGUgY29ycmVzcG9uZGluZyByZWNvZ25pemVyXG4gICAgICogdG8gcmVmcmVzaCB0aGUgdG9rZW4uIE90aGVyd2lzZSwgdGhlIHJlY29nbml6ZXJzIHdpbGwgZW5jb3VudGVyIGVycm9ycyBkdXJpbmcgcmVjb2duaXRpb24uXG4gICAgICogQG1lbWJlciBTcGVlY2hDb25maWcuZnJvbUF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXV0aG9yaXphdGlvblRva2VuIC0gVGhlIGluaXRpYWwgYXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVnaW9uIC0gVGhlIHJlZ2lvbiBuYW1lIChzZWUgdGhlIDxhIGhyZWY9XCJodHRwczovL2FrYS5tcy9jc3NwZWVjaC9yZWdpb25cIj5yZWdpb24gcGFnZTwvYT4pLlxuICAgICAqIEByZXR1cm5zIHtTcGVlY2hDb25maWd9IEEgc3BlZWNoIGZhY3RvcnkgaW5zdGFuY2UuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21BdXRob3JpemF0aW9uVG9rZW4oYXV0aG9yaXphdGlvblRva2VuLCByZWdpb24pIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKGF1dGhvcml6YXRpb25Ub2tlbiwgXCJhdXRob3JpemF0aW9uVG9rZW5cIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShyZWdpb24sIFwicmVnaW9uXCIpO1xuICAgICAgICBjb25zdCBzcGVlY2hJbXBsID0gbmV3IFNwZWVjaENvbmZpZ0ltcGwoKTtcbiAgICAgICAgc3BlZWNoSW1wbC5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbiwgcmVnaW9uKTtcbiAgICAgICAgc3BlZWNoSW1wbC5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0ludGVudFJlZ2lvbiwgcmVnaW9uKTtcbiAgICAgICAgc3BlZWNoSW1wbC5hdXRob3JpemF0aW9uVG9rZW4gPSBhdXRob3JpemF0aW9uVG9rZW47XG4gICAgICAgIHJldHVybiBzcGVlY2hJbXBsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgdGhlIGNvbmZpZ3VyYXRpb24uXG4gICAgICogQG1lbWJlciBTcGVlY2hDb25maWcucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgICBjbG9zZSgpIHsgfVxufVxuLyoqXG4gKiBAcHVibGljXG4gKiBAY2xhc3MgU3BlZWNoQ29uZmlnSW1wbFxuICovXG5leHBvcnQgY2xhc3MgU3BlZWNoQ29uZmlnSW1wbCBleHRlbmRzIFNwZWVjaENvbmZpZyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgIHRoaXMuc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSA9IFwiZW4tVVNcIjsgLy8gU2hvdWxkIHdlIGhhdmUgYSBkZWZhdWx0P1xuICAgICAgICB0aGlzLm91dHB1dEZvcm1hdCA9IE91dHB1dEZvcm1hdC5TaW1wbGU7XG4gICAgfVxuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcztcbiAgICB9XG4gICAgZ2V0IGVuZFBvaW50KCkge1xuICAgICAgICByZXR1cm4gbmV3IFVSTCh0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnQpKTtcbiAgICB9XG4gICAgZ2V0IHN1YnNjcmlwdGlvbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXkpO1xuICAgIH1cbiAgICBnZXQgcmVnaW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbik7XG4gICAgfVxuICAgIGdldCBhdXRob3JpemF0aW9uVG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4pO1xuICAgIH1cbiAgICBzZXQgYXV0aG9yaXphdGlvblRva2VuKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgdmFsdWUpO1xuICAgIH1cbiAgICBnZXQgc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UpO1xuICAgIH1cbiAgICBzZXQgc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlLCB2YWx1ZSk7XG4gICAgfVxuICAgIGdldCBhdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0F1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZXMpO1xuICAgIH1cbiAgICBzZXQgYXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlcyh2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlcywgdmFsdWUpO1xuICAgIH1cbiAgICBnZXQgb3V0cHV0Rm9ybWF0KCkge1xuICAgICAgICByZXR1cm4gT3V0cHV0Rm9ybWF0W3RoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCB1bmRlZmluZWQpXTtcbiAgICB9XG4gICAgc2V0IG91dHB1dEZvcm1hdCh2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KE91dHB1dEZvcm1hdFByb3BlcnR5TmFtZSwgT3V0cHV0Rm9ybWF0W3ZhbHVlXSk7XG4gICAgfVxuICAgIGdldCBlbmRwb2ludElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50SWQpO1xuICAgIH1cbiAgICBzZXQgZW5kcG9pbnRJZCh2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnRJZCwgdmFsdWUpO1xuICAgIH1cbiAgICBzZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwodmFsdWUsIFwidmFsdWVcIik7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUpO1xuICAgIH1cbiAgICBnZXRQcm9wZXJ0eShuYW1lLCBkZWYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkobmFtZSwgZGVmKTtcbiAgICB9XG4gICAgc2V0UHJveHkocHJveHlIb3N0TmFtZSwgcHJveHlQb3J0LCBwcm94eVVzZXJOYW1lLCBwcm94eVBhc3N3b3JkKSB7XG4gICAgICAgIHRoaXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5SG9zdE5hbWVdLCBwcm94eUhvc3ROYW1lKTtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlQb3J0XSwgcHJveHlQb3J0KTtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlVc2VyTmFtZV0sIHByb3h5VXNlck5hbWUpO1xuICAgICAgICB0aGlzLnNldFByb3BlcnR5KFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVBhc3N3b3JkXSwgcHJveHlQYXNzd29yZCk7XG4gICAgfVxuICAgIHNldFNlcnZpY2VQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgICBjb25zdCBjdXJyZW50UHJvcGVydGllcyA9IEpTT04ucGFyc2UodGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShTZXJ2aWNlUHJvcGVydGllc1Byb3BlcnR5TmFtZSwgXCJ7fVwiKSk7XG4gICAgICAgIGN1cnJlbnRQcm9wZXJ0aWVzW25hbWVdID0gdmFsdWU7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoU2VydmljZVByb3BlcnRpZXNQcm9wZXJ0eU5hbWUsIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRQcm9wZXJ0aWVzKSk7XG4gICAgfVxuICAgIHNldFByb2Zhbml0eShwcm9mYW5pdHkpIHtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Qcm9mYW5pdHlPcHRpb24sIFByb2Zhbml0eU9wdGlvbltwcm9mYW5pdHldKTtcbiAgICB9XG4gICAgZW5hYmxlQXVkaW9Mb2dnaW5nKCkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5hYmxlQXVkaW9Mb2dnaW5nLCBcInRydWVcIik7XG4gICAgfVxuICAgIHJlcXVlc3RXb3JkTGV2ZWxUaW1lc3RhbXBzKCkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RXb3JkTGV2ZWxUaW1lc3RhbXBzLCBcInRydWVcIik7XG4gICAgfVxuICAgIGVuYWJsZURpY3RhdGlvbigpIHtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShGb3JjZURpY3RhdGlvblByb3BlcnR5TmFtZSwgXCJ0cnVlXCIpO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3QgcmV0ID0gbmV3IFNwZWVjaENvbmZpZ0ltcGwoKTtcbiAgICAgICAgcmV0LnByaXZQcm9wZXJ0aWVzID0gdGhpcy5wcml2UHJvcGVydGllcy5jbG9uZSgpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICBnZXQgc3BlZWNoU3ludGhlc2lzTGFuZ3VhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fU3ludGhMYW5ndWFnZSk7XG4gICAgfVxuICAgIHNldCBzcGVlY2hTeW50aGVzaXNMYW5ndWFnZShsYW5ndWFnZSkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fU3ludGhMYW5ndWFnZSwgbGFuZ3VhZ2UpO1xuICAgIH1cbiAgICBnZXQgc3BlZWNoU3ludGhlc2lzVm9pY2VOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoVm9pY2UpO1xuICAgIH1cbiAgICBzZXQgc3BlZWNoU3ludGhlc2lzVm9pY2VOYW1lKHZvaWNlKSB7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aFZvaWNlLCB2b2ljZSk7XG4gICAgfVxuICAgIGdldCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQoKSB7XG4gICAgICAgIHJldHVybiBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbdGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoT3V0cHV0Rm9ybWF0LCB1bmRlZmluZWQpXTtcbiAgICB9XG4gICAgc2V0IHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdChmb3JtYXQpIHtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoT3V0cHV0Rm9ybWF0LCBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbZm9ybWF0XSk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hDb25maWcuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENhbmNlbGxhdGlvbkV2ZW50QXJnc0Jhc2UsIH0gZnJvbSBcIi4vQ2FuY2VsbGF0aW9uRXZlbnRBcmdzQmFzZVwiO1xuZXhwb3J0IGNsYXNzIFNwZWVjaFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MgZXh0ZW5kcyBDYW5jZWxsYXRpb25FdmVudEFyZ3NCYXNlIHtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cbmltcG9ydCB7IFJlY29nbml0aW9uRXZlbnRBcmdzIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBEZWZpbmVzIGNvbnRlbnRzIG9mIHNwZWVjaCByZWNvZ25pemluZy9yZWNvZ25pemVkIGV2ZW50LlxuICogQGNsYXNzIFNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzXG4gKi9cbmV4cG9ydCBjbGFzcyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncyBleHRlbmRzIFJlY29nbml0aW9uRXZlbnRBcmdzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7U3BlZWNoUmVjb2duaXRpb25SZXN1bHR9IHJlc3VsdCAtIFRoZSBzcGVlY2ggcmVjb2duaXRpb24gcmVzdWx0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgLSBUaGUgb2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzZXNzaW9uSWQgLSBUaGUgc2Vzc2lvbiBpZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZXN1bHQsIG9mZnNldCwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHN1cGVyKG9mZnNldCwgc2Vzc2lvbklkKTtcbiAgICAgICAgdGhpcy5wcml2UmVzdWx0ID0gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIHJlY29nbml0aW9uIHJlc3VsdC5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzLnByb3RvdHlwZS5yZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1NwZWVjaFJlY29nbml0aW9uUmVzdWx0fSB0aGUgcmVjb2duaXRpb24gcmVzdWx0LlxuICAgICAqL1xuICAgIGdldCByZXN1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN1bHQ7XG4gICAgfVxufVxuLyoqXG4gKiBEZWZpbmVzIGNvbnRlbnRzIG9mIGNvbnZlcnNhdGlvbiB0cmFuc2NyaWJlZC90cmFuc2NyaWJpbmcgZXZlbnQuXG4gKiBAY2xhc3MgQ29udmVyc2F0aW9uVHJhbnNjcmlwdGlvbkV2ZW50QXJnc1xuICovXG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uVHJhbnNjcmlwdGlvbkV2ZW50QXJncyBleHRlbmRzIFNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzIHtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFJlY29nbml0aW9uUmVzdWx0IH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBEZWZpbmVzIHJlc3VsdCBvZiBzcGVlY2ggcmVjb2duaXRpb24uXG4gKiBAY2xhc3MgU3BlZWNoUmVjb2duaXRpb25SZXN1bHRcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWVjaFJlY29nbml0aW9uUmVzdWx0IGV4dGVuZHMgUmVjb2duaXRpb25SZXN1bHQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXN1bHRJZCAtIFRoZSByZXN1bHQgaWQuXG4gICAgICogQHBhcmFtIHtSZXN1bHRSZWFzb259IHJlYXNvbiAtIFRoZSByZWFzb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgcmVjb2duaXplZCB0ZXh0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBkdXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldCBpbnRvIHRoZSBzdHJlYW0uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlIC0gUHJpbWFyeSBMYW5ndWFnZSBkZXRlY3RlZCwgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSAtIFByaW1hcnkgTGFuZ3VhZ2UgY29uZmlkZW5jZSAoXCJVbmtub3duLFwiIFwiTG93LFwiIFwiTWVkaXVtLFwiIFwiSGlnaFwiLi4uKSwgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNwZWFrZXJJZCAtIHNwZWFrZXIgaWQgZm9yIGNvbnZlcnNhdGlvbiB0cmFuc2NyaXB0aW9uLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXJyb3JEZXRhaWxzIC0gRXJyb3IgZGV0YWlscywgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGpzb24gLSBBZGRpdGlvbmFsIEpzb24sIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7UHJvcGVydHlDb2xsZWN0aW9ufSBwcm9wZXJ0aWVzIC0gQWRkaXRpb25hbCBwcm9wZXJ0aWVzLCBpZiBwcm92aWRlZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZXN1bHRJZCwgcmVhc29uLCB0ZXh0LCBkdXJhdGlvbiwgb2Zmc2V0LCBsYW5ndWFnZSwgbGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlLCBzcGVha2VySWQsIGVycm9yRGV0YWlscywganNvbiwgcHJvcGVydGllcykge1xuICAgICAgICBzdXBlcihyZXN1bHRJZCwgcmVhc29uLCB0ZXh0LCBkdXJhdGlvbiwgb2Zmc2V0LCBsYW5ndWFnZSwgbGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlLCBlcnJvckRldGFpbHMsIGpzb24sIHByb3BlcnRpZXMpO1xuICAgICAgICB0aGlzLnByaXZTcGVha2VySWQgPSBzcGVha2VySWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHNwZWFrZXIgaWQgZnJvbSBjb252ZXJzYXRpb24gdHJhbnNjcmlwdGlvbi9pZCBzY2VuYXJpb3NcbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZS5zcGVha2VySWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gaWQgb2Ygc3BlYWtlciBpbiBnaXZlbiByZXN1bHRcbiAgICAgKi9cbiAgICBnZXQgc3BlYWtlcklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlYWtlcklkO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoUmVjb2duaXRpb25SZXN1bHQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCBSZWNvZ25pdGlvbk1vZGUsIFJlY29nbml6ZXJDb25maWcsIFNwZWVjaENvbm5lY3Rpb25GYWN0b3J5LCBTcGVlY2hTZXJ2aWNlUmVjb2duaXplciwgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzIH0gZnJvbSBcIi4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IE91dHB1dEZvcm1hdCwgUHJvcGVydHlJZCwgUmVjb2duaXplciwgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIFBlcmZvcm1zIHNwZWVjaCByZWNvZ25pdGlvbiBmcm9tIG1pY3JvcGhvbmUsIGZpbGUsIG9yIG90aGVyIGF1ZGlvIGlucHV0IHN0cmVhbXMsIGFuZCBnZXRzIHRyYW5zY3JpYmVkIHRleHQgYXMgcmVzdWx0LlxuICogQGNsYXNzIFNwZWVjaFJlY29nbml6ZXJcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWVjaFJlY29nbml6ZXIgZXh0ZW5kcyBSZWNvZ25pemVyIHtcbiAgICAvKipcbiAgICAgKiBTcGVlY2hSZWNvZ25pemVyIGNvbnN0cnVjdG9yLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7U3BlZWNoQ29uZmlnfSBzcGVlY2hDb25maWcgLSBhbiBzZXQgb2YgaW5pdGlhbCBwcm9wZXJ0aWVzIGZvciB0aGlzIHJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0ge0F1ZGlvQ29uZmlnfSBhdWRpb0NvbmZpZyAtIEFuIG9wdGlvbmFsIGF1ZGlvIGNvbmZpZ3VyYXRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSByZWNvZ25pemVyXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc3BlZWNoQ29uZmlnLCBhdWRpb0NvbmZpZykge1xuICAgICAgICBjb25zdCBzcGVlY2hDb25maWdJbXBsID0gc3BlZWNoQ29uZmlnO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwoc3BlZWNoQ29uZmlnSW1wbCwgXCJzcGVlY2hDb25maWdcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShzcGVlY2hDb25maWdJbXBsLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UpLCBQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlXSk7XG4gICAgICAgIHN1cGVyKGF1ZGlvQ29uZmlnLCBzcGVlY2hDb25maWdJbXBsLnByb3BlcnRpZXMsIG5ldyBTcGVlY2hDb25uZWN0aW9uRmFjdG9yeSgpKTtcbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZWRSZWNvZ25pemVyID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWVjaFJlY29nbml6ZXIgY29uc3RydWN0b3IuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtTcGVlY2hDb25maWd9IHNwZWVjaENvbmZpZyAtIGFuIHNldCBvZiBpbml0aWFsIHByb3BlcnRpZXMgZm9yIHRoaXMgcmVjb2duaXplclxuICAgICAqIEBwYXJhbSB7QXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnfSBhdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWcgLSBBbiBzb3VyY2UgbGFuZ3VhZ2UgZGV0ZWN0aW9uIGNvbmZpZ3VyYXRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSByZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtBdWRpb0NvbmZpZ30gYXVkaW9Db25maWcgLSBBbiBvcHRpb25hbCBhdWRpbyBjb25maWd1cmF0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVjb2duaXplclxuICAgICAqL1xuICAgIHN0YXRpYyBGcm9tQ29uZmlnKHNwZWVjaENvbmZpZywgYXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnLCBhdWRpb0NvbmZpZykge1xuICAgICAgICBjb25zdCBzcGVlY2hDb25maWdJbXBsID0gc3BlZWNoQ29uZmlnO1xuICAgICAgICBhdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWcucHJvcGVydGllcy5tZXJnZVRvKHNwZWVjaENvbmZpZ0ltcGwucHJvcGVydGllcyk7XG4gICAgICAgIGNvbnN0IHJlY29nbml6ZXIgPSBuZXcgU3BlZWNoUmVjb2duaXplcihzcGVlY2hDb25maWcsIGF1ZGlvQ29uZmlnKTtcbiAgICAgICAgcmV0dXJuIHJlY29nbml6ZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGVuZHBvaW50IGlkIG9mIGEgY3VzdG9taXplZCBzcGVlY2ggbW9kZWwgdGhhdCBpcyB1c2VkIGZvciBzcGVlY2ggcmVjb2duaXRpb24uXG4gICAgICogQG1lbWJlciBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5lbmRwb2ludElkXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBlbmRwb2ludCBpZCBvZiBhIGN1c3RvbWl6ZWQgc3BlZWNoIG1vZGVsIHRoYXQgaXMgdXNlZCBmb3Igc3BlZWNoIHJlY29nbml0aW9uLlxuICAgICAqL1xuICAgIGdldCBlbmRwb2ludElkKCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkUmVjb2duaXplcik7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludElkLCBcIjAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMFwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiB1c2VkIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIHNlcnZpY2UuXG4gICAgICogQG1lbWJlciBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5hdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBnZXQgYXV0aG9yaXphdGlvblRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzL1NldHMgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBzZXJ2aWNlLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUuYXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIEF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICovXG4gICAgc2V0IGF1dGhvcml6YXRpb25Ub2tlbih0b2tlbikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodG9rZW4sIFwidG9rZW5cIik7XG4gICAgICAgIHRoaXMucHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCB0b2tlbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHNwb2tlbiBsYW5ndWFnZSBvZiByZWNvZ25pdGlvbi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIHNwb2tlbiBsYW5ndWFnZSBvZiByZWNvZ25pdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSgpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZFJlY29nbml6ZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgb3V0cHV0IGZvcm1hdCBvZiByZWNvZ25pdGlvbi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLm91dHB1dEZvcm1hdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7T3V0cHV0Rm9ybWF0fSBUaGUgb3V0cHV0IGZvcm1hdCBvZiByZWNvZ25pdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgb3V0cHV0Rm9ybWF0KCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkUmVjb2duaXplcik7XG4gICAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCBPdXRwdXRGb3JtYXRbT3V0cHV0Rm9ybWF0LlNpbXBsZV0pID09PSBPdXRwdXRGb3JtYXRbT3V0cHV0Rm9ybWF0LlNpbXBsZV0pIHtcbiAgICAgICAgICAgIHJldHVybiBPdXRwdXRGb3JtYXQuU2ltcGxlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIE91dHB1dEZvcm1hdC5EZXRhaWxlZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMgZGVmaW5lZCBmb3IgdGhpcyBTcGVlY2hSZWNvZ25pemVyLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUucHJvcGVydGllc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7UHJvcGVydHlDb2xsZWN0aW9ufSBUaGUgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMgZGVmaW5lZCBmb3IgdGhpcyBTcGVlY2hSZWNvZ25pemVyLlxuICAgICAqL1xuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHNwZWVjaCByZWNvZ25pdGlvbiwgYW5kIHN0b3BzIGFmdGVyIHRoZSBmaXJzdCB1dHRlcmFuY2UgaXMgcmVjb2duaXplZC5cbiAgICAgKiBUaGUgdGFzayByZXR1cm5zIHRoZSByZWNvZ25pdGlvbiB0ZXh0IGFzIHJlc3VsdC5cbiAgICAgKiBOb3RlOiBSZWNvZ25pemVPbmNlQXN5bmMoKSByZXR1cm5zIHdoZW4gdGhlIGZpcnN0IHV0dGVyYW5jZSBoYXMgYmVlbiByZWNvZ25pemVkLFxuICAgICAqIHNvIGl0IGlzIHN1aXRhYmxlIG9ubHkgZm9yIHNpbmdsZSBzaG90IHJlY29nbml0aW9uXG4gICAgICogbGlrZSBjb21tYW5kIG9yIHF1ZXJ5LiBGb3IgbG9uZy1ydW5uaW5nIHJlY29nbml0aW9uLCB1c2UgU3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYygpIGluc3RlYWQuXG4gICAgICogQG1lbWJlciBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5yZWNvZ25pemVPbmNlQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgdGhhdCByZWNlaXZlZCB0aGUgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICByZWNvZ25pemVPbmNlQXN5bmMoY2IsIGVycikge1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMucmVjb2duaXplT25jZUFzeW5jSW1wbChSZWNvZ25pdGlvbk1vZGUuSW50ZXJhY3RpdmUpLCBjYiwgZXJyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHNwZWVjaCByZWNvZ25pdGlvbiwgdW50aWwgc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKCkgaXMgY2FsbGVkLlxuICAgICAqIFVzZXIgbXVzdCBzdWJzY3JpYmUgdG8gZXZlbnRzIHRvIHJlY2VpdmUgcmVjb2duaXRpb24gcmVzdWx0cy5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLnN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgaW52b2tlZCBvbmNlIHRoZSByZWNvZ25pdGlvbiBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIHN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmMoY2IsIGVycikge1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMuc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luY0ltcGwoUmVjb2duaXRpb25Nb2RlLkNvbnZlcnNhdGlvbiksIGNiLCBlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wcyBjb250aW51b3VzIHNwZWVjaCByZWNvZ25pdGlvbi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLnN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayBpbnZva2VkIG9uY2UgdGhlIHJlY29nbml0aW9uIGhhcyBzdG9wcGVkLlxuICAgICAqIEBwYXJhbSBlcnIgLSBDYWxsYmFjayBpbnZva2VkIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICovXG4gICAgc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKGNiLCBlcnIpIHtcbiAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyh0aGlzLnN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luY0ltcGwoKSwgY2IsIGVycik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBzcGVlY2ggcmVjb2duaXRpb24gd2l0aCBrZXl3b3JkIHNwb3R0aW5nLCB1bnRpbFxuICAgICAqIHN0b3BLZXl3b3JkUmVjb2duaXRpb25Bc3luYygpIGlzIGNhbGxlZC5cbiAgICAgKiBVc2VyIG11c3Qgc3Vic2NyaWJlIHRvIGV2ZW50cyB0byByZWNlaXZlIHJlY29nbml0aW9uIHJlc3VsdHMuXG4gICAgICogTm90ZTogS2V5IHdvcmQgc3BvdHRpbmcgZnVuY3Rpb25hbGl0eSBpcyBvbmx5IGF2YWlsYWJsZSBvbiB0aGVcbiAgICAgKiBTcGVlY2ggRGV2aWNlcyBTREsuIFRoaXMgZnVuY3Rpb25hbGl0eSBpcyBjdXJyZW50bHkgbm90IGluY2x1ZGVkIGluIHRoZSBTREsgaXRzZWxmLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUuc3RhcnRLZXl3b3JkUmVjb2duaXRpb25Bc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0tleXdvcmRSZWNvZ25pdGlvbk1vZGVsfSBtb2RlbCBUaGUga2V5d29yZCByZWNvZ25pdGlvbiBtb2RlbCB0aGF0XG4gICAgICogc3BlY2lmaWVzIHRoZSBrZXl3b3JkIHRvIGJlIHJlY29nbml6ZWQuXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgaW52b2tlZCBvbmNlIHRoZSByZWNvZ25pdGlvbiBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIHN0YXJ0S2V5d29yZFJlY29nbml0aW9uQXN5bmMobW9kZWwsIGNiLCBlcnIpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKG1vZGVsLCBcIm1vZGVsXCIpO1xuICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgIGVycihcIk5vdCB5ZXQgaW1wbGVtZW50ZWQuXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIGNvbnRpbnVvdXMgc3BlZWNoIHJlY29nbml0aW9uLlxuICAgICAqIE5vdGU6IEtleSB3b3JkIHNwb3R0aW5nIGZ1bmN0aW9uYWxpdHkgaXMgb25seSBhdmFpbGFibGUgb24gdGhlXG4gICAgICogU3BlZWNoIERldmljZXMgU0RLLiBUaGlzIGZ1bmN0aW9uYWxpdHkgaXMgY3VycmVudGx5IG5vdCBpbmNsdWRlZCBpbiB0aGUgU0RLIGl0c2VsZi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLnN0b3BLZXl3b3JkUmVjb2duaXRpb25Bc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayBpbnZva2VkIG9uY2UgdGhlIHJlY29nbml0aW9uIGhhcyBzdG9wcGVkLlxuICAgICAqIEBwYXJhbSBlcnIgLSBDYWxsYmFjayBpbnZva2VkIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICovXG4gICAgc3RvcEtleXdvcmRSZWNvZ25pdGlvbkFzeW5jKGNiKSB7XG4gICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICBjYigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGNsb3NlcyBhbGwgZXh0ZXJuYWwgcmVzb3VyY2VzIGhlbGQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKGNiLCBlcnJvckNiKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWRSZWNvZ25pemVyKTtcbiAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyh0aGlzLmRpc3Bvc2UodHJ1ZSksIGNiLCBlcnJvckNiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcG9zZXMgYW55IHJlc291cmNlcyBoZWxkIGJ5IHRoZSBvYmplY3QuXG4gICAgICogQG1lbWJlciBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5kaXNwb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGlzcG9zaW5nIC0gdHJ1ZSBpZiBkaXNwb3NpbmcgdGhlIG9iamVjdC5cbiAgICAgKi9cbiAgICBkaXNwb3NlKGRpc3Bvc2luZykge1xuICAgICAgICBjb25zdCBfc3VwZXIgPSBPYmplY3QuY3JlYXRlKG51bGwsIHtcbiAgICAgICAgICAgIGRpc3Bvc2U6IHsgZ2V0OiAoKSA9PiBzdXBlci5kaXNwb3NlIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2RGlzcG9zZWRSZWNvZ25pemVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpc3Bvc2luZykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkRpc3Bvc2VkUmVjb2duaXplciA9IHRydWU7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHlpZWxkIF9zdXBlci5kaXNwb3NlLmNhbGwodGhpcywgZGlzcG9zaW5nKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNyZWF0ZVJlY29nbml6ZXJDb25maWcoc3BlZWNoQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVjb2duaXplckNvbmZpZyhzcGVlY2hDb25maWcsIHRoaXMucHJvcGVydGllcyk7XG4gICAgfVxuICAgIGNyZWF0ZVNlcnZpY2VSZWNvZ25pemVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Db25maWcsIHJlY29nbml6ZXJDb25maWcpIHtcbiAgICAgICAgY29uc3QgY29uZmlnSW1wbCA9IGF1ZGlvQ29uZmlnO1xuICAgICAgICByZXR1cm4gbmV3IFNwZWVjaFNlcnZpY2VSZWNvZ25pemVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgY29uZmlnSW1wbCwgcmVjb2duaXplckNvbmZpZywgdGhpcyk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hSZWNvZ25pemVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgY29udGVudHMgb2Ygc3BlZWNoIHN5bnRoZXNpcyBib29rbWFyayBldmVudC5cbiAqIEBjbGFzcyBTcGVlY2hTeW50aGVzaXNCb29rbWFya0V2ZW50QXJnc1xuICogQWRkZWQgaW4gdmVyc2lvbiAxLjE2LjBcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWVjaFN5bnRoZXNpc0Jvb2ttYXJrRXZlbnRBcmdzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhdWRpb09mZnNldCAtIFRoZSBhdWRpbyBvZmZzZXQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgYm9va21hcmsgdGV4dC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhdWRpb09mZnNldCwgdGV4dCkge1xuICAgICAgICB0aGlzLnByaXZBdWRpb09mZnNldCA9IGF1ZGlvT2Zmc2V0O1xuICAgICAgICB0aGlzLnByaXZUZXh0ID0gdGV4dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSBhdWRpbyBvZmZzZXQuXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNCb29rbWFya0V2ZW50QXJncy5wcm90b3R5cGUuYXVkaW9PZmZzZXRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge251bWJlcn0gdGhlIGF1ZGlvIG9mZnNldC5cbiAgICAgKi9cbiAgICBnZXQgYXVkaW9PZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb09mZnNldDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSBib29rbWFyay5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc0Jvb2ttYXJrRXZlbnRBcmdzLnByb3RvdHlwZS50ZXh0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBib29rbWFyayB0ZXh0LlxuICAgICAqL1xuICAgIGdldCB0ZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VGV4dDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaFN5bnRoZXNpc0Jvb2ttYXJrRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgdGhlIGJvdW5kYXJ5IHR5cGUgb2Ygc3BlZWNoIHN5bnRoZXNpcyBib3VuZGFyeSBldmVudC5cbiAqIEBjbGFzcyBTcGVlY2hTeW50aGVzaXNCb3VuZGFyeVR5cGVcbiAqIEFkZGVkIGluIHZlcnNpb24gMS4yMS4wXG4gKi9cbmV4cG9ydCB2YXIgU3BlZWNoU3ludGhlc2lzQm91bmRhcnlUeXBlO1xuKGZ1bmN0aW9uIChTcGVlY2hTeW50aGVzaXNCb3VuZGFyeVR5cGUpIHtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIGJvdW5kYXJ5IHRleHQgaXMgYSB3b3JkLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzQm91bmRhcnlUeXBlLldvcmRcbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNCb3VuZGFyeVR5cGVbXCJXb3JkXCJdID0gXCJXb3JkQm91bmRhcnlcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIGJvdW5kYXJ5IHRleHQgaXMgYSBwdW5jdHVhdGlvbi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc0JvdW5kYXJ5VHlwZS5QdW5jdHVhdGlvblxuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc0JvdW5kYXJ5VHlwZVtcIlB1bmN0dWF0aW9uXCJdID0gXCJQdW5jdHVhdGlvbkJvdW5kYXJ5XCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoZSBib3VuZGFyeSB0ZXh0IGlzIGEgc2VudGVuY2UuXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNCb3VuZGFyeVR5cGUuU2VudGVuY2VcbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNCb3VuZGFyeVR5cGVbXCJTZW50ZW5jZVwiXSA9IFwiU2VudGVuY2VCb3VuZGFyeVwiO1xufSkoU3BlZWNoU3ludGhlc2lzQm91bmRhcnlUeXBlIHx8IChTcGVlY2hTeW50aGVzaXNCb3VuZGFyeVR5cGUgPSB7fSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hTeW50aGVzaXNCb3VuZGFyeVR5cGUuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogRGVmaW5lcyBjb250ZW50cyBvZiBzcGVlY2ggc3ludGhlc2lzIGV2ZW50cy5cbiAqIEBjbGFzcyBTcGVlY2hTeW50aGVzaXNFdmVudEFyZ3NcbiAqIEFkZGVkIGluIHZlcnNpb24gMS4xMS4wXG4gKi9cbmV4cG9ydCBjbGFzcyBTcGVlY2hTeW50aGVzaXNFdmVudEFyZ3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtTcGVlY2hTeW50aGVzaXNSZXN1bHR9IHJlc3VsdCAtIFRoZSBzcGVlY2ggc3ludGhlc2lzIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZXN1bHQpIHtcbiAgICAgICAgdGhpcy5wcml2UmVzdWx0ID0gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIHN5bnRoZXNpcyByZXN1bHQuXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNFdmVudEFyZ3MucHJvdG90eXBlLnJlc3VsdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7U3BlZWNoU3ludGhlc2lzUmVzdWx0fSB0aGUgc3ludGhlc2lzIHJlc3VsdC5cbiAgICAgKi9cbiAgICBnZXQgcmVzdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVzdWx0O1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoU3ludGhlc2lzRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZSBzcGVlY2ggc3ludGhlc2lzIGF1ZGlvIG91dHB1dCBmb3JtYXRzLlxuICogQGVudW0gU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0XG4gKiBVcGRhdGVkIGluIHZlcnNpb24gMS4xNy4wXG4gKi9cbmV4cG9ydCB2YXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0O1xuKGZ1bmN0aW9uIChTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQpIHtcbiAgICAvKipcbiAgICAgKiByYXctOGtoei04Yml0LW1vbm8tbXVsYXdcbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SYXc4S2h6OEJpdE1vbm9NVUxhdyxcbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiUmF3OEtoejhCaXRNb25vTVVMYXdcIl0gPSAwXSA9IFwiUmF3OEtoejhCaXRNb25vTVVMYXdcIjtcbiAgICAvKipcbiAgICAgKiByaWZmLTE2a2h6LTE2a2Jwcy1tb25vLXNpcmVuXG4gICAgICogQG5vdGUgVW5zdXBwb3J0ZWQgYnkgdGhlIHNlcnZpY2UuIERvIG5vdCB1c2UgdGhpcyB2YWx1ZS5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SaWZmMTZLaHoxNkticHNNb25vU2lyZW5cbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiUmlmZjE2S2h6MTZLYnBzTW9ub1NpcmVuXCJdID0gMV0gPSBcIlJpZmYxNktoejE2S2Jwc01vbm9TaXJlblwiO1xuICAgIC8qKlxuICAgICAqIGF1ZGlvLTE2a2h6LTE2a2Jwcy1tb25vLXNpcmVuXG4gICAgICogQG5vdGUgVW5zdXBwb3J0ZWQgYnkgdGhlIHNlcnZpY2UuIERvIG5vdCB1c2UgdGhpcyB2YWx1ZS5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5BdWRpbzE2S2h6MTZLYnBzTW9ub1NpcmVuXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIkF1ZGlvMTZLaHoxNkticHNNb25vU2lyZW5cIl0gPSAyXSA9IFwiQXVkaW8xNktoejE2S2Jwc01vbm9TaXJlblwiO1xuICAgIC8qKlxuICAgICAqIGF1ZGlvLTE2a2h6LTMya2JpdHJhdGUtbW9uby1tcDNcbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5BdWRpbzE2S2h6MzJLQml0UmF0ZU1vbm9NcDNcbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiQXVkaW8xNktoejMyS0JpdFJhdGVNb25vTXAzXCJdID0gM10gPSBcIkF1ZGlvMTZLaHozMktCaXRSYXRlTW9ub01wM1wiO1xuICAgIC8qKlxuICAgICAqIGF1ZGlvLTE2a2h6LTEyOGtiaXRyYXRlLW1vbm8tbXAzXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuQXVkaW8xNktoejEyOEtCaXRSYXRlTW9ub01wM1xuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJBdWRpbzE2S2h6MTI4S0JpdFJhdGVNb25vTXAzXCJdID0gNF0gPSBcIkF1ZGlvMTZLaHoxMjhLQml0UmF0ZU1vbm9NcDNcIjtcbiAgICAvKipcbiAgICAgKiBhdWRpby0xNmtoei02NGtiaXRyYXRlLW1vbm8tbXAzXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuQXVkaW8xNktoejY0S0JpdFJhdGVNb25vTXAzXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIkF1ZGlvMTZLaHo2NEtCaXRSYXRlTW9ub01wM1wiXSA9IDVdID0gXCJBdWRpbzE2S2h6NjRLQml0UmF0ZU1vbm9NcDNcIjtcbiAgICAvKipcbiAgICAgKiBhdWRpby0yNGtoei00OGtiaXRyYXRlLW1vbm8tbXAzXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuQXVkaW8yNEtoejQ4S0JpdFJhdGVNb25vTXAzXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIkF1ZGlvMjRLaHo0OEtCaXRSYXRlTW9ub01wM1wiXSA9IDZdID0gXCJBdWRpbzI0S2h6NDhLQml0UmF0ZU1vbm9NcDNcIjtcbiAgICAvKipcbiAgICAgKiBhdWRpby0yNGtoei05NmtiaXRyYXRlLW1vbm8tbXAzXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuQXVkaW8yNEtoejk2S0JpdFJhdGVNb25vTXAzXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIkF1ZGlvMjRLaHo5NktCaXRSYXRlTW9ub01wM1wiXSA9IDddID0gXCJBdWRpbzI0S2h6OTZLQml0UmF0ZU1vbm9NcDNcIjtcbiAgICAvKipcbiAgICAgKiBhdWRpby0yNGtoei0xNjBrYml0cmF0ZS1tb25vLW1wM1xuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvMjRLaHoxNjBLQml0UmF0ZU1vbm9NcDNcbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiQXVkaW8yNEtoejE2MEtCaXRSYXRlTW9ub01wM1wiXSA9IDhdID0gXCJBdWRpbzI0S2h6MTYwS0JpdFJhdGVNb25vTXAzXCI7XG4gICAgLyoqXG4gICAgICogcmF3LTE2a2h6LTE2Yml0LW1vbm8tdHJ1ZXNpbGtcbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SYXcxNktoejE2Qml0TW9ub1RydWVTaWxrXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIlJhdzE2S2h6MTZCaXRNb25vVHJ1ZVNpbGtcIl0gPSA5XSA9IFwiUmF3MTZLaHoxNkJpdE1vbm9UcnVlU2lsa1wiO1xuICAgIC8qKlxuICAgICAqIHJpZmYtMTZraHotMTZiaXQtbW9uby1wY21cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SaWZmMTZLaHoxNkJpdE1vbm9QY21cbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiUmlmZjE2S2h6MTZCaXRNb25vUGNtXCJdID0gMTBdID0gXCJSaWZmMTZLaHoxNkJpdE1vbm9QY21cIjtcbiAgICAvKipcbiAgICAgKiByaWZmLThraHotMTZiaXQtbW9uby1wY21cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SaWZmOEtoejE2Qml0TW9ub1BjbVxuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJSaWZmOEtoejE2Qml0TW9ub1BjbVwiXSA9IDExXSA9IFwiUmlmZjhLaHoxNkJpdE1vbm9QY21cIjtcbiAgICAvKipcbiAgICAgKiByaWZmLTI0a2h6LTE2Yml0LW1vbm8tcGNtXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmlmZjI0S2h6MTZCaXRNb25vUGNtXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIlJpZmYyNEtoejE2Qml0TW9ub1BjbVwiXSA9IDEyXSA9IFwiUmlmZjI0S2h6MTZCaXRNb25vUGNtXCI7XG4gICAgLyoqXG4gICAgICogcmlmZi04a2h6LThiaXQtbW9uby1tdWxhd1xuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJpZmY4S2h6OEJpdE1vbm9NVUxhd1xuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJSaWZmOEtoejhCaXRNb25vTVVMYXdcIl0gPSAxM10gPSBcIlJpZmY4S2h6OEJpdE1vbm9NVUxhd1wiO1xuICAgIC8qKlxuICAgICAqIHJhdy0xNmtoei0xNmJpdC1tb25vLXBjbVxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJhdzE2S2h6MTZCaXRNb25vUGNtXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIlJhdzE2S2h6MTZCaXRNb25vUGNtXCJdID0gMTRdID0gXCJSYXcxNktoejE2Qml0TW9ub1BjbVwiO1xuICAgIC8qKlxuICAgICAqIHJhdy0yNGtoei0xNmJpdC1tb25vLXBjbVxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJhdzI0S2h6MTZCaXRNb25vUGNtXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIlJhdzI0S2h6MTZCaXRNb25vUGNtXCJdID0gMTVdID0gXCJSYXcyNEtoejE2Qml0TW9ub1BjbVwiO1xuICAgIC8qKlxuICAgICAqIHJhdy04a2h6LTE2Yml0LW1vbm8tcGNtXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmF3OEtoejE2Qml0TW9ub1BjbVxuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJSYXc4S2h6MTZCaXRNb25vUGNtXCJdID0gMTZdID0gXCJSYXc4S2h6MTZCaXRNb25vUGNtXCI7XG4gICAgLyoqXG4gICAgICogb2dnLTE2a2h6LTE2Yml0LW1vbm8tb3B1c1xuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0Lk9nZzE2S2h6MTZCaXRNb25vT3B1c1xuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJPZ2cxNktoejE2Qml0TW9ub09wdXNcIl0gPSAxN10gPSBcIk9nZzE2S2h6MTZCaXRNb25vT3B1c1wiO1xuICAgIC8qKlxuICAgICAqIG9nZy0yNGtoei0xNmJpdC1tb25vLW9wdXNcbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5PZ2cyNEtoejE2Qml0TW9ub09wdXNcbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiT2dnMjRLaHoxNkJpdE1vbm9PcHVzXCJdID0gMThdID0gXCJPZ2cyNEtoejE2Qml0TW9ub09wdXNcIjtcbiAgICAvKipcbiAgICAgKiByYXctNDhraHotMTZiaXQtbW9uby1wY21cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SYXc0OEtoejE2Qml0TW9ub1BjbVxuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJSYXc0OEtoejE2Qml0TW9ub1BjbVwiXSA9IDE5XSA9IFwiUmF3NDhLaHoxNkJpdE1vbm9QY21cIjtcbiAgICAvKipcbiAgICAgKiByaWZmLTQ4a2h6LTE2Yml0LW1vbm8tcGNtXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmlmZjQ4S2h6MTZCaXRNb25vUGNtXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIlJpZmY0OEtoejE2Qml0TW9ub1BjbVwiXSA9IDIwXSA9IFwiUmlmZjQ4S2h6MTZCaXRNb25vUGNtXCI7XG4gICAgLyoqXG4gICAgICogYXVkaW8tNDhraHotOTZrYml0cmF0ZS1tb25vLW1wM1xuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvNDhLaHo5NktCaXRSYXRlTW9ub01wM1xuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJBdWRpbzQ4S2h6OTZLQml0UmF0ZU1vbm9NcDNcIl0gPSAyMV0gPSBcIkF1ZGlvNDhLaHo5NktCaXRSYXRlTW9ub01wM1wiO1xuICAgIC8qKlxuICAgICAqIGF1ZGlvLTQ4a2h6LTE5MmtiaXRyYXRlLW1vbm8tbXAzXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuQXVkaW80OEtoejE5MktCaXRSYXRlTW9ub01wM1xuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJBdWRpbzQ4S2h6MTkyS0JpdFJhdGVNb25vTXAzXCJdID0gMjJdID0gXCJBdWRpbzQ4S2h6MTkyS0JpdFJhdGVNb25vTXAzXCI7XG4gICAgLyoqXG4gICAgICogb2dnLTQ4a2h6LTE2Yml0LW1vbm8tb3B1c1xuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xNi4wXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuT2dnNDhLaHoxNkJpdE1vbm9PcHVzXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIk9nZzQ4S2h6MTZCaXRNb25vT3B1c1wiXSA9IDIzXSA9IFwiT2dnNDhLaHoxNkJpdE1vbm9PcHVzXCI7XG4gICAgLyoqXG4gICAgICogd2VibS0xNmtoei0xNmJpdC1tb25vLW9wdXNcbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTYuMFxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LldlYm0xNktoejE2Qml0TW9ub09wdXNcbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiV2VibTE2S2h6MTZCaXRNb25vT3B1c1wiXSA9IDI0XSA9IFwiV2VibTE2S2h6MTZCaXRNb25vT3B1c1wiO1xuICAgIC8qKlxuICAgICAqIHdlYm0tMjRraHotMTZiaXQtbW9uby1vcHVzXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjE2LjBcbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5XZWJtMjRLaHoxNkJpdE1vbm9PcHVzXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIldlYm0yNEtoejE2Qml0TW9ub09wdXNcIl0gPSAyNV0gPSBcIldlYm0yNEtoejE2Qml0TW9ub09wdXNcIjtcbiAgICAvKipcbiAgICAgKiByYXctMjRraHotMTZiaXQtbW9uby10cnVlc2lsa1xuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xNy4wXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmF3MjRLaHoxNkJpdE1vbm9UcnVlU2lsa1xuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJSYXcyNEtoejE2Qml0TW9ub1RydWVTaWxrXCJdID0gMjZdID0gXCJSYXcyNEtoejE2Qml0TW9ub1RydWVTaWxrXCI7XG4gICAgLyoqXG4gICAgICogcmF3LThraHotOGJpdC1tb25vLWFsYXdcbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTcuMFxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJhdzhLaHo4Qml0TW9ub0FMYXdcbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiUmF3OEtoejhCaXRNb25vQUxhd1wiXSA9IDI3XSA9IFwiUmF3OEtoejhCaXRNb25vQUxhd1wiO1xuICAgIC8qKlxuICAgICAqIHJpZmYtOGtoei04Yml0LW1vbm8tYWxhd1xuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xNy4wXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmlmZjhLaHo4Qml0TW9ub0FMYXdcbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiUmlmZjhLaHo4Qml0TW9ub0FMYXdcIl0gPSAyOF0gPSBcIlJpZmY4S2h6OEJpdE1vbm9BTGF3XCI7XG4gICAgLyoqXG4gICAgICogd2VibS0yNGtoei0xNmJpdC0yNGticHMtbW9uby1vcHVzXG4gICAgICogQXVkaW8gY29tcHJlc3NlZCBieSBPUFVTIGNvZGVjIGluIGEgd2VibSBjb250YWluZXIsIHdpdGggYml0cmF0ZSBvZiAyNGticHMsIG9wdGltaXplZCBmb3IgSW9UIHNjZW5hcmlvLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xOS4wXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuV2VibTI0S2h6MTZCaXQyNEticHNNb25vT3B1c1xuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJXZWJtMjRLaHoxNkJpdDI0S2Jwc01vbm9PcHVzXCJdID0gMjldID0gXCJXZWJtMjRLaHoxNkJpdDI0S2Jwc01vbm9PcHVzXCI7XG4gICAgLyoqXG4gICAgICogYXVkaW8tMTZraHotMTZiaXQtMzJrYnBzLW1vbm8tb3B1c1xuICAgICAqIEF1ZGlvIGNvbXByZXNzZWQgYnkgT1BVUyBjb2RlYyB3aXRob3V0IGNvbnRhaW5lciwgd2l0aCBiaXRyYXRlIG9mIDMya2Jwcy5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMjAuMFxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvMTZLaHoxNkJpdDMyS2Jwc01vbm9PcHVzXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIkF1ZGlvMTZLaHoxNkJpdDMyS2Jwc01vbm9PcHVzXCJdID0gMzBdID0gXCJBdWRpbzE2S2h6MTZCaXQzMkticHNNb25vT3B1c1wiO1xuICAgIC8qKlxuICAgICAqIGF1ZGlvLTI0a2h6LTE2Yml0LTQ4a2Jwcy1tb25vLW9wdXNcbiAgICAgKiBBdWRpbyBjb21wcmVzc2VkIGJ5IE9QVVMgY29kZWMgd2l0aG91dCBjb250YWluZXIsIHdpdGggYml0cmF0ZSBvZiA0OGticHMuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjIwLjBcbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5BdWRpbzI0S2h6MTZCaXQ0OEticHNNb25vT3B1c1xuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJBdWRpbzI0S2h6MTZCaXQ0OEticHNNb25vT3B1c1wiXSA9IDMxXSA9IFwiQXVkaW8yNEtoejE2Qml0NDhLYnBzTW9ub09wdXNcIjtcbiAgICAvKipcbiAgICAgKiBhdWRpby0yNGtoei0xNmJpdC0yNGticHMtbW9uby1vcHVzXG4gICAgICogQXVkaW8gY29tcHJlc3NlZCBieSBPUFVTIGNvZGVjIHdpdGhvdXQgY29udGFpbmVyLCB3aXRoIGJpdHJhdGUgb2YgMjRrYnBzLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4yMC4wXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuQXVkaW8yNEtoejE2Qml0MjRLYnBzTW9ub09wdXNcbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiQXVkaW8yNEtoejE2Qml0MjRLYnBzTW9ub09wdXNcIl0gPSAzMl0gPSBcIkF1ZGlvMjRLaHoxNkJpdDI0S2Jwc01vbm9PcHVzXCI7XG4gICAgLyoqXG4gICAgICogcmF3LTIyMDUwaHotMTZiaXQtbW9uby1wY21cbiAgICAgKiBSYXcgUENNIGF1ZGlvIGF0IDIyMDUwSHogc2FtcGxpbmcgcmF0ZSBhbmQgMTYtYml0IGRlcHRoLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4yMi4wXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmF3MjIwNTBIejE2Qml0TW9ub1BjbVxuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJSYXcyMjA1MEh6MTZCaXRNb25vUGNtXCJdID0gMzNdID0gXCJSYXcyMjA1MEh6MTZCaXRNb25vUGNtXCI7XG4gICAgLyoqXG4gICAgICogcmlmZi0yMjA1MGh6LTE2Yml0LW1vbm8tcGNtXG4gICAgICogUENNIGF1ZGlvIGF0IDIyMDUwSHogc2FtcGxpbmcgcmF0ZSBhbmQgMTYtYml0IGRlcHRoLCB3aXRoIFJJRkYgaGVhZGVyLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4yMi4wXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmlmZjIyMDUwSHoxNkJpdE1vbm9QY21cbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiUmlmZjIyMDUwSHoxNkJpdE1vbm9QY21cIl0gPSAzNF0gPSBcIlJpZmYyMjA1MEh6MTZCaXRNb25vUGNtXCI7XG4gICAgLyoqXG4gICAgICogcmF3LTQ0MTAwaHotMTZiaXQtbW9uby1wY21cbiAgICAgKiBSYXcgUENNIGF1ZGlvIGF0IDQ0MTAwSHogc2FtcGxpbmcgcmF0ZSBhbmQgMTYtYml0IGRlcHRoLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4yMi4wXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmF3NDQxMDBIejE2Qml0TW9ub1BjbVxuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJSYXc0NDEwMEh6MTZCaXRNb25vUGNtXCJdID0gMzVdID0gXCJSYXc0NDEwMEh6MTZCaXRNb25vUGNtXCI7XG4gICAgLyoqXG4gICAgICogcmlmZi00NDEwMGh6LTE2Yml0LW1vbm8tcGNtXG4gICAgICogUENNIGF1ZGlvIGF0IDQ0MTAwSHogc2FtcGxpbmcgcmF0ZSBhbmQgMTYtYml0IGRlcHRoLCB3aXRoIFJJRkYgaGVhZGVyLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4yMi4wXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmlmZjQ0MTAwSHoxNkJpdE1vbm9QY21cbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiUmlmZjQ0MTAwSHoxNkJpdE1vbm9QY21cIl0gPSAzNl0gPSBcIlJpZmY0NDEwMEh6MTZCaXRNb25vUGNtXCI7XG59KShTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQgfHwgKFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdCA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgU3ludGhlc2lzUmVzdWx0IH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBEZWZpbmVzIHJlc3VsdCBvZiBzcGVlY2ggc3ludGhlc2lzLlxuICogQGNsYXNzIFNwZWVjaFN5bnRoZXNpc1Jlc3VsdFxuICogQWRkZWQgaW4gdmVyc2lvbiAxLjExLjBcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWVjaFN5bnRoZXNpc1Jlc3VsdCBleHRlbmRzIFN5bnRoZXNpc1Jlc3VsdCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVzdWx0SWQgLSBUaGUgcmVzdWx0IGlkLlxuICAgICAqIEBwYXJhbSB7UmVzdWx0UmVhc29ufSByZWFzb24gLSBUaGUgcmVhc29uLlxuICAgICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGF1ZGlvRGF0YSAtIFRoZSBzeW50aGVzaXplZCBhdWRpbyBiaW5hcnkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yRGV0YWlscyAtIEVycm9yIGRldGFpbHMsIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7UHJvcGVydHlDb2xsZWN0aW9ufSBwcm9wZXJ0aWVzIC0gQWRkaXRpb25hbCBwcm9wZXJ0aWVzLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYXVkaW9EdXJhdGlvbiAtIFRoZSBhdWRpbyBkdXJhdGlvbi5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZXN1bHRJZCwgcmVhc29uLCBhdWRpb0RhdGEsIGVycm9yRGV0YWlscywgcHJvcGVydGllcywgYXVkaW9EdXJhdGlvbikge1xuICAgICAgICBzdXBlcihyZXN1bHRJZCwgcmVhc29uLCBlcnJvckRldGFpbHMsIHByb3BlcnRpZXMpO1xuICAgICAgICB0aGlzLnByaXZBdWRpb0RhdGEgPSBhdWRpb0RhdGE7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvRHVyYXRpb24gPSBhdWRpb0R1cmF0aW9uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgc3ludGhlc2l6ZWQgYXVkaW8gZGF0YVxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzUmVzdWx0LnByb3RvdHlwZS5hdWRpb0RhdGFcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge0FycmF5QnVmZmVyfSBUaGUgc3ludGhlc2l6ZWQgYXVkaW8gZGF0YS5cbiAgICAgKi9cbiAgICBnZXQgYXVkaW9EYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9EYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgdGltZSBkdXJhdGlvbiBvZiBzeW50aGVzaXplZCBhdWRpbywgaW4gdGlja3MgKDEwMCBuYW5vc2Vjb25kcykuXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNSZXN1bHQucHJvdG90eXBlLmF1ZGlvRHVyYXRpb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge251bWJlcn0gVGhlIHRpbWUgZHVyYXRpb24gb2Ygc3ludGhlc2l6ZWQgYXVkaW8uXG4gICAgICovXG4gICAgZ2V0IGF1ZGlvRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb0R1cmF0aW9uO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoU3ludGhlc2lzUmVzdWx0LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgY29udGVudHMgb2Ygc3BlZWNoIHN5bnRoZXNpcyB2aXNlbWUgZXZlbnQuXG4gKiBAY2xhc3MgU3BlZWNoU3ludGhlc2lzVmlzZW1lRXZlbnRBcmdzXG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTYuMFxuICovXG5leHBvcnQgY2xhc3MgU3BlZWNoU3ludGhlc2lzVmlzZW1lRXZlbnRBcmdzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhdWRpb09mZnNldCAtIFRoZSBhdWRpbyBvZmZzZXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZpc2VtZUlkIC0gVGhlIHZpc2VtZSBJRC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYW5pbWF0aW9uIC0gVGhlIGFuaW1hdGlvbiwgY291bGQgYmUgaW4gc3ZnIG9yIG90aGVyIGZvcm1hdC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhdWRpb09mZnNldCwgdmlzZW1lSWQsIGFuaW1hdGlvbikge1xuICAgICAgICB0aGlzLnByaXZBdWRpb09mZnNldCA9IGF1ZGlvT2Zmc2V0O1xuICAgICAgICB0aGlzLnByaXZWaXNlbWVJZCA9IHZpc2VtZUlkO1xuICAgICAgICB0aGlzLnByaXZBbmltYXRpb24gPSBhbmltYXRpb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgYXVkaW8gb2Zmc2V0LlxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzVmlzZW1lRXZlbnRBcmdzLnByb3RvdHlwZS5hdWRpb09mZnNldFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgYXVkaW8gb2Zmc2V0LlxuICAgICAqL1xuICAgIGdldCBhdWRpb09mZnNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvT2Zmc2V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIHZpc2VtZSBJRC5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc1Zpc2VtZUV2ZW50QXJncy5wcm90b3R5cGUudmlzZW1lSWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge251bWJlcn0gdGhlIHZpc2VtZSBJRC5cbiAgICAgKi9cbiAgICBnZXQgdmlzZW1lSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZWaXNlbWVJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSBhbmltYXRpb24uXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNWaXNlbWVFdmVudEFyZ3MucHJvdG90eXBlLmFuaW1hdGlvblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgYW5pbWF0aW9uLCBjb3VsZCBiZSBpbiBzdmcgb3Igb3RoZXIgZm9ybWF0LlxuICAgICAqL1xuICAgIGdldCBhbmltYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBbmltYXRpb247XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hTeW50aGVzaXNWaXNlbWVFdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogRGVmaW5lcyBjb250ZW50cyBvZiBzcGVlY2ggc3ludGhlc2lzIHdvcmQgYm91bmRhcnkgZXZlbnQuXG4gKiBAY2xhc3MgU3BlZWNoU3ludGhlc2lzV29yZEJvdW5kYXJ5RXZlbnRBcmdzXG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTEuMFxuICovXG5leHBvcnQgY2xhc3MgU3BlZWNoU3ludGhlc2lzV29yZEJvdW5kYXJ5RXZlbnRBcmdzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhdWRpb09mZnNldCAtIFRoZSBhdWRpbyBvZmZzZXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGF1ZGlvIGR1cmF0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gVGhlIHRleHQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdvcmRMZW5ndGggLSBUaGUgbGVuZ3RoIG9mIHRoZSB3b3JkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0ZXh0T2Zmc2V0IC0gVGhlIHRleHQgb2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7U3BlZWNoU3ludGhlc2lzQm91bmRhcnlUeXBlfSBib3VuZGFyeVR5cGUgLSBUaGUgYm91bmRhcnkgdHlwZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvT2Zmc2V0LCBkdXJhdGlvbiwgdGV4dCwgd29yZExlbmd0aCwgdGV4dE9mZnNldCwgYm91bmRhcnlUeXBlKSB7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvT2Zmc2V0ID0gYXVkaW9PZmZzZXQ7XG4gICAgICAgIHRoaXMucHJpdkR1cmF0aW9uID0gZHVyYXRpb247XG4gICAgICAgIHRoaXMucHJpdlRleHQgPSB0ZXh0O1xuICAgICAgICB0aGlzLnByaXZXb3JkTGVuZ3RoID0gd29yZExlbmd0aDtcbiAgICAgICAgdGhpcy5wcml2VGV4dE9mZnNldCA9IHRleHRPZmZzZXQ7XG4gICAgICAgIHRoaXMucHJpdkJvdW5kYXJ5VHlwZSA9IGJvdW5kYXJ5VHlwZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSBhdWRpbyBvZmZzZXQuXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNXb3JkQm91bmRhcnlFdmVudEFyZ3MucHJvdG90eXBlLmF1ZGlvT2Zmc2V0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IHRoZSBhdWRpbyBvZmZzZXQuXG4gICAgICovXG4gICAgZ2V0IGF1ZGlvT2Zmc2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9PZmZzZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgZHVyYXRpb24sIGluIHRpY2tzICgxMDAgbmFub3NlY29uZHMpLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzV29yZEJvdW5kYXJ5RXZlbnRBcmdzLnByb3RvdHlwZS5kdXJhdGlvblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBEdXJhdGlvbiBpbiAxMDAgbmFub3NlY29uZCBpbmNyZW1lbnRzLlxuICAgICAqL1xuICAgIGdldCBkdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkR1cmF0aW9uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIHRleHQgb2YgdGhlIHdvcmQgYm91bmRhcnkgZXZlbnQuXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNXb3JkQm91bmRhcnlFdmVudEFyZ3MucHJvdG90eXBlLnRleHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gdGhlIHRleHQuXG4gICAgICovXG4gICAgZ2V0IHRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUZXh0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIHdvcmQgbGVuZ3RoXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNXb3JkQm91bmRhcnlFdmVudEFyZ3MucHJvdG90eXBlLndvcmRMZW5ndGhcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge251bWJlcn0gdGhlIHdvcmQgbGVuZ3RoXG4gICAgICovXG4gICAgZ2V0IHdvcmRMZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZXb3JkTGVuZ3RoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIHRleHQgb2Zmc2V0LlxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzV29yZEJvdW5kYXJ5RXZlbnRBcmdzLnByb3RvdHlwZS50ZXh0T2Zmc2V0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IHRoZSB0ZXh0IG9mZnNldC5cbiAgICAgKi9cbiAgICBnZXQgdGV4dE9mZnNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRleHRPZmZzZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgYm91bmRhcnkgdHlwZS5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc1dvcmRCb3VuZGFyeUV2ZW50QXJncy5wcm90b3R5cGUuYm91bmRhcnlUeXBlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtTcGVlY2hTeW50aGVzaXNCb3VuZGFyeVR5cGV9IHRoZSBib3VuZGFyeSB0eXBlLlxuICAgICAqL1xuICAgIGdldCBib3VuZGFyeVR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZCb3VuZGFyeVR5cGU7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hTeW50aGVzaXNXb3JkQm91bmRhcnlFdmVudEFyZ3MuanMubWFwXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb24gKi9cbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VzT3BlblJhbmdlT3B0aW9uTmFtZSwgQ29nbml0aXZlU3Vic2NyaXB0aW9uS2V5QXV0aGVudGljYXRpb24sIENvZ25pdGl2ZVRva2VuQXV0aGVudGljYXRpb24sIENvbnRleHQsIE9TLCBTcGVlY2hTZXJ2aWNlQ29uZmlnLCBTcGVlY2hTeW50aGVzaXNDb25uZWN0aW9uRmFjdG9yeSwgU3ludGhlc2lzQWRhcHRlckJhc2UsIFN5bnRoZXNpc1Jlc3RBZGFwdGVyLCBTeW50aGVzaXplckNvbmZpZywgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBjcmVhdGVOb0Rhc2hHdWlkLCBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzLCBRdWV1ZSB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQXVkaW9GaWxlV3JpdGVyIH0gZnJvbSBcIi4vQXVkaW8vQXVkaW9GaWxlV3JpdGVyXCI7XG5pbXBvcnQgeyBBdWRpb091dHB1dEZvcm1hdEltcGwgfSBmcm9tIFwiLi9BdWRpby9BdWRpb091dHB1dEZvcm1hdFwiO1xuaW1wb3J0IHsgUHVzaEF1ZGlvT3V0cHV0U3RyZWFtSW1wbCB9IGZyb20gXCIuL0F1ZGlvL0F1ZGlvT3V0cHV0U3RyZWFtXCI7XG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IEF1ZGlvQ29uZmlnLCBQcm9wZXJ0eUlkLCBQdWxsQXVkaW9PdXRwdXRTdHJlYW0sIFB1c2hBdWRpb091dHB1dFN0cmVhbUNhbGxiYWNrLCBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQsIFN5bnRoZXNpc1ZvaWNlc1Jlc3VsdCwgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIERlZmluZXMgdGhlIGNsYXNzIFNwZWVjaFN5bnRoZXNpemVyIGZvciB0ZXh0IHRvIHNwZWVjaC5cbiAqIFVwZGF0ZWQgaW4gdmVyc2lvbiAxLjE2LjBcbiAqIEBjbGFzcyBTcGVlY2hTeW50aGVzaXplclxuICovXG5leHBvcnQgY2xhc3MgU3BlZWNoU3ludGhlc2l6ZXIge1xuICAgIC8qKlxuICAgICAqIFNwZWVjaFN5bnRoZXNpemVyIGNvbnN0cnVjdG9yLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7U3BlZWNoQ29uZmlnfSBzcGVlY2hDb25maWcgLSBBbiBzZXQgb2YgaW5pdGlhbCBwcm9wZXJ0aWVzIGZvciB0aGlzIHN5bnRoZXNpemVyLlxuICAgICAqIEBwYXJhbSB7QXVkaW9Db25maWd9IGF1ZGlvQ29uZmlnIC0gQW4gb3B0aW9uYWwgYXVkaW8gY29uZmlndXJhdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIHN5bnRoZXNpemVyLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNwZWVjaENvbmZpZywgYXVkaW9Db25maWcpIHtcbiAgICAgICAgY29uc3Qgc3BlZWNoQ29uZmlnSW1wbCA9IHNwZWVjaENvbmZpZztcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKHNwZWVjaENvbmZpZ0ltcGwsIFwic3BlZWNoQ29uZmlnXCIpO1xuICAgICAgICBpZiAoYXVkaW9Db25maWcgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChhdWRpb0NvbmZpZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb0NvbmZpZyA9ICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSA/IHVuZGVmaW5lZCA6IEF1ZGlvQ29uZmlnLmZyb21EZWZhdWx0U3BlYWtlck91dHB1dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb0NvbmZpZyA9IGF1ZGlvQ29uZmlnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMgPSBzcGVlY2hDb25maWdJbXBsLnByb3BlcnRpZXMuY2xvbmUoKTtcbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2U3ludGhlc2l6aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25GYWN0b3J5ID0gbmV3IFNwZWVjaFN5bnRoZXNpc0Nvbm5lY3Rpb25GYWN0b3J5KCk7XG4gICAgICAgIHRoaXMuc3ludGhlc2lzUmVxdWVzdFF1ZXVlID0gbmV3IFF1ZXVlKCk7XG4gICAgICAgIHRoaXMuaW1wbENvbW1vblN5bnRoZXNpemVTZXR1cCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBhdXRob3JpemF0aW9uIHRva2VuIHVzZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgc2VydmljZS5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpemVyLnByb3RvdHlwZS5hdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBnZXQgYXV0aG9yaXphdGlvblRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzL1NldHMgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBzZXJ2aWNlLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2l6ZXIucHJvdG90eXBlLmF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdG9rZW4gLSBBdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqL1xuICAgIHNldCBhdXRob3JpemF0aW9uVG9rZW4odG9rZW4pIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRva2VuLCBcInRva2VuXCIpO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgdG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMgZGVmaW5lZCBmb3IgdGhpcyBTcGVlY2hTeW50aGVzaXplci5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpemVyLnByb3RvdHlwZS5wcm9wZXJ0aWVzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIFNwZWVjaFN5bnRoZXNpemVyLlxuICAgICAqL1xuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGlmIGF1dG8gZGV0ZWN0IHNvdXJjZSBsYW5ndWFnZSBpcyBlbmFibGVkXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXplci5wcm90b3R5cGUucHJvcGVydGllc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gaWYgYXV0byBkZXRlY3Qgc291cmNlIGxhbmd1YWdlIGlzIGVuYWJsZWRcbiAgICAgKi9cbiAgICBnZXQgYXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlcykgPT09IEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZXNPcGVuUmFuZ2VPcHRpb25OYW1lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVlY2hTeW50aGVzaXplciBjb25zdHJ1Y3Rvci5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge1NwZWVjaENvbmZpZ30gc3BlZWNoQ29uZmlnIC0gYW4gc2V0IG9mIGluaXRpYWwgcHJvcGVydGllcyBmb3IgdGhpcyBzeW50aGVzaXplclxuICAgICAqIEBwYXJhbSB7QXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnfSBhdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWcgLSBBbiBzb3VyY2UgbGFuZ3VhZ2UgZGV0ZWN0aW9uIGNvbmZpZ3VyYXRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBzeW50aGVzaXplclxuICAgICAqIEBwYXJhbSB7QXVkaW9Db25maWd9IGF1ZGlvQ29uZmlnIC0gQW4gb3B0aW9uYWwgYXVkaW8gY29uZmlndXJhdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIHN5bnRoZXNpemVyXG4gICAgICovXG4gICAgc3RhdGljIEZyb21Db25maWcoc3BlZWNoQ29uZmlnLCBhdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWcsIGF1ZGlvQ29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHNwZWVjaENvbmZpZ0ltcGwgPSBzcGVlY2hDb25maWc7XG4gICAgICAgIGF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZy5wcm9wZXJ0aWVzLm1lcmdlVG8oc3BlZWNoQ29uZmlnSW1wbC5wcm9wZXJ0aWVzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBTcGVlY2hTeW50aGVzaXplcihzcGVlY2hDb25maWcsIGF1ZGlvQ29uZmlnKTtcbiAgICB9XG4gICAgYnVpbGRTc21sKHRleHQpIHtcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2VUb0RlZmF1bHRWb2ljZSA9IHtcbiAgICAgICAgICAgIFtcImFmLVpBXCJdOiBcImFmLVpBLUFkcmlOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImFtLUVUXCJdOiBcImFtLUVULUFtZWhhTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJhci1BRVwiXTogXCJhci1BRS1GYXRpbWFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImFyLUJIXCJdOiBcImFyLUJILUFsaU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiYXItRFpcIl06IFwiYXItRFotQW1pbmFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImFyLUVHXCJdOiBcImFyLUVHLVNhbG1hTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJhci1JUVwiXTogXCJhci1JUS1CYXNzZWxOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImFyLUpPXCJdOiBcImFyLUpPLVNhbmFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImFyLUtXXCJdOiBcImFyLUtXLUZhaGVkTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJhci1MWVwiXTogXCJhci1MWS1JbWFuTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJhci1NQVwiXTogXCJhci1NQS1KYW1hbE5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiYXItUUFcIl06IFwiYXItUUEtQW1hbE5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiYXItU0FcIl06IFwiYXItU0EtSGFtZWROZXVyYWxcIixcbiAgICAgICAgICAgIFtcImFyLVNZXCJdOiBcImFyLVNZLUFtYW55TmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJhci1UTlwiXTogXCJhci1UTi1IZWRpTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJhci1ZRVwiXTogXCJhci1ZRS1NYXJ5YW1OZXVyYWxcIixcbiAgICAgICAgICAgIFtcImJnLUJHXCJdOiBcImJnLUJHLUJvcmlzbGF2TmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJibi1CRFwiXTogXCJibi1CRC1OYWJhbml0YU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiYm4tSU5cIl06IFwiYm4tSU4tQmFzaGthck5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiY2EtRVNcIl06IFwiY2EtRVMtSm9hbmFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImNzLUNaXCJdOiBcImNzLUNaLUFudG9uaW5OZXVyYWxcIixcbiAgICAgICAgICAgIFtcImN5LUdCXCJdOiBcImN5LUdCLUFsZWROZXVyYWxcIixcbiAgICAgICAgICAgIFtcImRhLURLXCJdOiBcImRhLURLLUNocmlzdGVsTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJkZS1BVFwiXTogXCJkZS1BVC1JbmdyaWROZXVyYWxcIixcbiAgICAgICAgICAgIFtcImRlLUNIXCJdOiBcImRlLUNILUphbk5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZGUtREVcIl06IFwiZGUtREUtS2F0amFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVsLUdSXCJdOiBcImVsLUdSLUF0aGluYU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZW4tQVVcIl06IFwiZW4tQVUtTmF0YXNoYU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZW4tQ0FcIl06IFwiZW4tQ0EtQ2xhcmFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVuLUdCXCJdOiBcImVuLUdCLUxpYmJ5TmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlbi1IS1wiXTogXCJlbi1ISy1TYW1OZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVuLUlFXCJdOiBcImVuLUlFLUNvbm5vck5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZW4tSU5cIl06IFwiZW4tSU4tTmVlcmphTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlbi1LRVwiXTogXCJlbi1LRS1Bc2lsaWFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVuLU5HXCJdOiBcImVuLU5HLUFiZW9OZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVuLU5aXCJdOiBcImVuLU5aLU1pdGNoZWxsTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlbi1QSFwiXTogXCJlbi1QSC1KYW1lc05ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZW4tU0dcIl06IFwiZW4tU0ctTHVuYU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZW4tVFpcIl06IFwiZW4tVFotRWxpbXVOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVuLVVTXCJdOiBcImVuLVVTLUplbm55TmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlbi1aQVwiXTogXCJlbi1aQS1MZWFoTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlcy1BUlwiXTogXCJlcy1BUi1FbGVuYU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZXMtQk9cIl06IFwiZXMtQk8tTWFyY2Vsb05ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZXMtQ0xcIl06IFwiZXMtQ0wtQ2F0YWxpbmFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVzLUNPXCJdOiBcImVzLUNPLUdvbnphbG9OZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVzLUNSXCJdOiBcImVzLUNSLUp1YW5OZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVzLUNVXCJdOiBcImVzLUNVLUJlbGt5c05ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZXMtRE9cIl06IFwiZXMtRE8tRW1pbGlvTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlcy1FQ1wiXTogXCJlcy1FQy1BbmRyZWFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVzLUVTXCJdOiBcImVzLUVTLUFsdmFyb05ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZXMtR1FcIl06IFwiZXMtR1EtSmF2aWVyTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlcy1HVFwiXTogXCJlcy1HVC1BbmRyZXNOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVzLUhOXCJdOiBcImVzLUhOLUNhcmxvc05ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZXMtTVhcIl06IFwiZXMtTVgtRGFsaWFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVzLU5JXCJdOiBcImVzLU5JLUZlZGVyaWNvTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlcy1QQVwiXTogXCJlcy1QQS1NYXJnYXJpdGFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVzLVBFXCJdOiBcImVzLVBFLUFsZXhOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVzLVBSXCJdOiBcImVzLVBSLUthcmluYU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZXMtUFlcIl06IFwiZXMtUFktTWFyaW9OZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVzLVNWXCJdOiBcImVzLVNWLUxvcmVuYU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZXMtVVNcIl06IFwiZXMtVVMtQWxvbnNvTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlcy1VWVwiXTogXCJlcy1VWS1NYXRlb05ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZXMtVkVcIl06IFwiZXMtVkUtUGFvbGFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImV0LUVFXCJdOiBcImV0LUVFLUFudU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZmEtSVJcIl06IFwiZmEtSVItRGlsYXJhTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJmaS1GSVwiXTogXCJmaS1GSS1TZWxtYU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZmlsLVBIXCJdOiBcImZpbC1QSC1BbmdlbG9OZXVyYWxcIixcbiAgICAgICAgICAgIFtcImZyLUJFXCJdOiBcImZyLUJFLUNoYXJsaW5lTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJmci1DQVwiXTogXCJmci1DQS1TeWx2aWVOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImZyLUNIXCJdOiBcImZyLUNILUFyaWFuZU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZnItRlJcIl06IFwiZnItRlItRGVuaXNlTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJnYS1JRVwiXTogXCJnYS1JRS1Db2xtTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJnbC1FU1wiXTogXCJnbC1FUy1Sb2lOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImd1LUlOXCJdOiBcImd1LUlOLURod2FuaU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiaGUtSUxcIl06IFwiaGUtSUwtQXZyaU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiaGktSU5cIl06IFwiaGktSU4tTWFkaHVyTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJoci1IUlwiXTogXCJoci1IUi1HYWJyaWplbGFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImh1LUhVXCJdOiBcImh1LUhVLU5vZW1pTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJpZC1JRFwiXTogXCJpZC1JRC1BcmRpTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJpcy1JU1wiXTogXCJpcy1JUy1HdWRydW5OZXVyYWxcIixcbiAgICAgICAgICAgIFtcIml0LUlUXCJdOiBcIml0LUlULUlzYWJlbGxhTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJqYS1KUFwiXTogXCJqYS1KUC1OYW5hbWlOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImp2LUlEXCJdOiBcImp2LUlELURpbWFzTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJray1LWlwiXTogXCJray1LWi1BaWd1bE5ldXJhbFwiLFxuICAgICAgICAgICAgW1wia20tS0hcIl06IFwia20tS0gtUGlzZXRoTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJrbi1JTlwiXTogXCJrbi1JTi1HYWdhbk5ldXJhbFwiLFxuICAgICAgICAgICAgW1wia28tS1JcIl06IFwia28tS1ItU3VuSGlOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImxvLUxBXCJdOiBcImxvLUxBLUNoYW50aGF2b25nTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJsdC1MVFwiXTogXCJsdC1MVC1MZW9uYXNOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImx2LUxWXCJdOiBcImx2LUxWLUV2ZXJpdGFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcIm1rLU1LXCJdOiBcIm1rLU1LLUFsZWtzYW5kYXJOZXVyYWxcIixcbiAgICAgICAgICAgIFtcIm1sLUlOXCJdOiBcIm1sLUlOLU1pZGh1bk5ldXJhbFwiLFxuICAgICAgICAgICAgW1wibXItSU5cIl06IFwibXItSU4tQWFyb2hpTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJtcy1NWVwiXTogXCJtcy1NWS1Pc21hbk5ldXJhbFwiLFxuICAgICAgICAgICAgW1wibXQtTVRcIl06IFwibXQtTVQtR3JhY2VOZXVyYWxcIixcbiAgICAgICAgICAgIFtcIm15LU1NXCJdOiBcIm15LU1NLU5pbGFyTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJuYi1OT1wiXTogXCJuYi1OTy1QZXJuaWxsZU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wibmwtQkVcIl06IFwibmwtQkUtQXJuYXVkTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJubC1OTFwiXTogXCJubC1OTC1Db2xldHRlTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJwbC1QTFwiXTogXCJwbC1QTC1BZ25pZXN6a2FOZXVyYWxcIixcbiAgICAgICAgICAgIFtcInBzLUFGXCJdOiBcInBzLUFGLUd1bE5hd2F6TmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJwdC1CUlwiXTogXCJwdC1CUi1GcmFuY2lzY2FOZXVyYWxcIixcbiAgICAgICAgICAgIFtcInB0LVBUXCJdOiBcInB0LVBULUR1YXJ0ZU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wicm8tUk9cIl06IFwicm8tUk8tQWxpbmFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcInJ1LVJVXCJdOiBcInJ1LVJVLVN2ZXRsYW5hTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJzaS1MS1wiXTogXCJzaS1MSy1TYW1lZXJhTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJzay1TS1wiXTogXCJzay1TSy1MdWthc05ldXJhbFwiLFxuICAgICAgICAgICAgW1wic2wtU0lcIl06IFwic2wtU0ktUGV0cmFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcInNvLVNPXCJdOiBcInNvLVNPLU11dXNlTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJzci1SU1wiXTogXCJzci1SUy1OaWNob2xhc05ldXJhbFwiLFxuICAgICAgICAgICAgW1wic3UtSURcIl06IFwic3UtSUQtSmFqYW5nTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJzdi1TRVwiXTogXCJzdi1TRS1Tb2ZpZU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wic3ctS0VcIl06IFwic3ctS0UtUmFmaWtpTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJzdy1UWlwiXTogXCJzdy1UWi1EYXVkaU5ldXJhbFwiLFxuICAgICAgICAgICAgW1widGEtSU5cIl06IFwidGEtSU4tUGFsbGF2aU5ldXJhbFwiLFxuICAgICAgICAgICAgW1widGEtTEtcIl06IFwidGEtTEstS3VtYXJOZXVyYWxcIixcbiAgICAgICAgICAgIFtcInRhLVNHXCJdOiBcInRhLVNHLUFuYnVOZXVyYWxcIixcbiAgICAgICAgICAgIFtcInRlLUlOXCJdOiBcInRlLUlOLU1vaGFuTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJ0aC1USFwiXTogXCJ0aC1USC1QcmVtd2FkZWVOZXVyYWxcIixcbiAgICAgICAgICAgIFtcInRyLVRSXCJdOiBcInRyLVRSLUFobWV0TmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJ1ay1VQVwiXTogXCJ1ay1VQS1Pc3RhcE5ldXJhbFwiLFxuICAgICAgICAgICAgW1widXItSU5cIl06IFwidXItSU4tR3VsTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJ1ci1QS1wiXTogXCJ1ci1QSy1Bc2FkTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJ1ei1VWlwiXTogXCJ1ei1VWi1NYWRpbmFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcInZpLVZOXCJdOiBcInZpLVZOLUhvYWlNeU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiemgtQ05cIl06IFwiemgtQ04tWGlhb3hpYW9OZXVyYWxcIixcbiAgICAgICAgICAgIFtcInpoLUhLXCJdOiBcInpoLUhLLUhpdU1hYW5OZXVyYWxcIixcbiAgICAgICAgICAgIFtcInpoLVRXXCJdOiBcInpoLVRXLUhzaWFvQ2hlbk5ldXJhbFwiLFxuICAgICAgICAgICAgW1wienUtWkFcIl06IFwienUtWkEtVGhhbmRvTmV1cmFsXCIsXG4gICAgICAgIH07XG4gICAgICAgIGxldCBsYW5ndWFnZSA9IHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoTGFuZ3VhZ2UsIFwiZW4tVVNcIik7XG4gICAgICAgIGxldCB2b2ljZSA9IHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoVm9pY2UsIFwiXCIpO1xuICAgICAgICBsZXQgc3NtbCA9IFNwZWVjaFN5bnRoZXNpemVyLlhNTEVuY29kZSh0ZXh0KTtcbiAgICAgICAgaWYgKHRoaXMuYXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlKSB7XG4gICAgICAgICAgICBsYW5ndWFnZSA9IFwiZW4tVVNcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZvaWNlID0gdm9pY2UgfHwgbGFuZ3VhZ2VUb0RlZmF1bHRWb2ljZVtsYW5ndWFnZV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZvaWNlKSB7XG4gICAgICAgICAgICBzc21sID0gYDx2b2ljZSBuYW1lPScke3ZvaWNlfSc+JHtzc21sfTwvdm9pY2U+YDtcbiAgICAgICAgfVxuICAgICAgICBzc21sID0gYDxzcGVhayB2ZXJzaW9uPScxLjAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAxLzEwL3N5bnRoZXNpcycgeG1sbnM6bXN0dHM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDEvbXN0dHMnIHhtbG5zOmVtbz0naHR0cDovL3d3dy53My5vcmcvMjAwOS8xMC9lbW90aW9ubWwnIHhtbDpsYW5nPScke2xhbmd1YWdlfSc+JHtzc21sfTwvc3BlYWs+YDtcbiAgICAgICAgcmV0dXJuIHNzbWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIHNwZWVjaCBzeW50aGVzaXMgb24gcGxhaW4gdGV4dC5cbiAgICAgKiBUaGUgdGFzayByZXR1cm5zIHRoZSBzeW50aGVzaXMgcmVzdWx0LlxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2l6ZXIucHJvdG90eXBlLnNwZWFrVGV4dEFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB0ZXh0IC0gVGV4dCB0byBiZSBzeW50aGVzaXplZC5cbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayB0aGF0IHJlY2VpdmVkIHRoZSBTcGVlY2hTeW50aGVzaXNSZXN1bHQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKiBAcGFyYW0gc3RyZWFtIC0gQXVkaW9PdXRwdXRTdHJlYW0gdG8gcmVjZWl2ZSB0aGUgc3ludGhlc2l6ZWQgYXVkaW8uXG4gICAgICovXG4gICAgc3BlYWtUZXh0QXN5bmModGV4dCwgY2IsIGVyciwgc3RyZWFtKSB7XG4gICAgICAgIHRoaXMuc3BlYWtJbXBsKHRleHQsIGZhbHNlLCBjYiwgZXJyLCBzdHJlYW0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyBzcGVlY2ggc3ludGhlc2lzIG9uIFNTTUwuXG4gICAgICogVGhlIHRhc2sgcmV0dXJucyB0aGUgc3ludGhlc2lzIHJlc3VsdC5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpemVyLnByb3RvdHlwZS5zcGVha1NzbWxBc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gc3NtbCAtIFNTTUwgdG8gYmUgc3ludGhlc2l6ZWQuXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgdGhhdCByZWNlaXZlZCB0aGUgU3BlZWNoU3ludGhlc2lzUmVzdWx0LlxuICAgICAqIEBwYXJhbSBlcnIgLSBDYWxsYmFjayBpbnZva2VkIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICogQHBhcmFtIHN0cmVhbSAtIEF1ZGlvT3V0cHV0U3RyZWFtIHRvIHJlY2VpdmUgdGhlIHN5bnRoZXNpemVkIGF1ZGlvLlxuICAgICAqL1xuICAgIHNwZWFrU3NtbEFzeW5jKHNzbWwsIGNiLCBlcnIsIHN0cmVhbSkge1xuICAgICAgICB0aGlzLnNwZWFrSW1wbChzc21sLCB0cnVlLCBjYiwgZXJyLCBzdHJlYW0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgbGlzdCBvZiBzeW50aGVzaXMgdm9pY2VzIGF2YWlsYWJsZS5cbiAgICAgKiBUaGUgdGFzayByZXR1cm5zIHRoZSBzeW50aGVzaXMgdm9pY2UgcmVzdWx0LlxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2l6ZXIucHJvdG90eXBlLmdldFZvaWNlc0FzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQGFzeW5jXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBsb2NhbGUgLSBMb2NhbGUgb2Ygdm9pY2VzIGluIEJDUC00NyBmb3JtYXQ7IGlmIGxlZnQgZW1wdHksIGdldCBhbGwgYXZhaWxhYmxlIHZvaWNlcy5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFN5bnRoZXNpc1ZvaWNlc1Jlc3VsdD59IC0gUHJvbWlzZSBvZiBhIFN5bnRoZXNpc1ZvaWNlc1Jlc3VsdC5cbiAgICAgKi9cbiAgICBnZXRWb2ljZXNBc3luYyhsb2NhbGUgPSBcIlwiKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRWb2ljZXMobG9jYWxlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc3Bvc2Ugb2YgYXNzb2NpYXRlZCByZXNvdXJjZXMuXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXplci5wcm90b3R5cGUuY2xvc2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY2xvc2UoY2IsIGVycikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkKTtcbiAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyh0aGlzLmRpc3Bvc2UodHJ1ZSksIGNiLCBlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBASW50ZXJuYWxcbiAgICAgKiBEbyBub3QgdXNlIGV4dGVybmFsbHksIG9iamVjdCByZXR1cm5lZCB3aWxsIGNoYW5nZSB3aXRob3V0IHdhcm5pbmcgb3Igbm90aWNlLlxuICAgICAqL1xuICAgIGdldCBpbnRlcm5hbERhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBZGFwdGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBwZXJmb3JtcyBjbGVhbnVwIG9mIHJlc291cmNlcy5cbiAgICAgKiBUaGUgQm9vbGVhbiBwYXJhbWV0ZXIgZGlzcG9zaW5nIGluZGljYXRlcyB3aGV0aGVyIHRoZSBtZXRob2QgaXMgY2FsbGVkXG4gICAgICogZnJvbSBEaXNwb3NlIChpZiBkaXNwb3NpbmcgaXMgdHJ1ZSkgb3IgZnJvbSB0aGUgZmluYWxpemVyIChpZiBkaXNwb3NpbmcgaXMgZmFsc2UpLlxuICAgICAqIERlcml2ZWQgY2xhc3NlcyBzaG91bGQgb3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gZGlzcG9zZSByZXNvdXJjZSBpZiBuZWVkZWQuXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXplci5wcm90b3R5cGUuZGlzcG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGRpc3Bvc2luZyAtIEZsYWcgdG8gcmVxdWVzdCBkaXNwb3NhbC5cbiAgICAgKi9cbiAgICBkaXNwb3NlKGRpc3Bvc2luZykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkRpc3Bvc2VkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpc3Bvc2luZykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZBZGFwdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdkFkYXB0ZXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJpdkRpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vXG4gICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuICAgIC8vIElNUExFTUVOVEFUSU9OLlxuICAgIC8vIE1vdmUgdG8gaW5kZXBlbmRlbnQgY2xhc3NcbiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gICAgLy9cbiAgICBjcmVhdGVTeW50aGVzaXplckNvbmZpZyhzcGVlY2hDb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTeW50aGVzaXplckNvbmZpZyhzcGVlY2hDb25maWcsIHRoaXMucHJpdlByb3BlcnRpZXMpO1xuICAgIH1cbiAgICAvLyBDcmVhdGVzIHRoZSBzeW50aGVzaXMgYWRhcHRlclxuICAgIGNyZWF0ZVN5bnRoZXNpc0FkYXB0ZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb0NvbmZpZywgc3ludGhlc2l6ZXJDb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTeW50aGVzaXNBZGFwdGVyQmFzZShhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIHN5bnRoZXNpemVyQ29uZmlnLCB0aGlzLCB0aGlzLmF1ZGlvQ29uZmlnKTtcbiAgICB9XG4gICAgaW1wbENvbW1vblN5bnRoZXNpemVTZXR1cCgpIHtcbiAgICAgICAgbGV0IG9zUGxhdGZvcm0gPSAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikgPyBcIkJyb3dzZXJcIiA6IFwiTm9kZVwiO1xuICAgICAgICBsZXQgb3NOYW1lID0gXCJ1bmtub3duXCI7XG4gICAgICAgIGxldCBvc1ZlcnNpb24gPSBcInVua25vd25cIjtcbiAgICAgICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIG9zUGxhdGZvcm0gPSBvc1BsYXRmb3JtICsgXCIvXCIgKyBuYXZpZ2F0b3IucGxhdGZvcm07XG4gICAgICAgICAgICBvc05hbWUgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICAgICAgICAgICAgb3NWZXJzaW9uID0gbmF2aWdhdG9yLmFwcFZlcnNpb247XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3ludGhlc2l6ZXJDb25maWcgPSB0aGlzLmNyZWF0ZVN5bnRoZXNpemVyQ29uZmlnKG5ldyBTcGVlY2hTZXJ2aWNlQ29uZmlnKG5ldyBDb250ZXh0KG5ldyBPUyhvc1BsYXRmb3JtLCBvc05hbWUsIG9zVmVyc2lvbikpKSk7XG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbktleSA9IHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXksIHVuZGVmaW5lZCk7XG4gICAgICAgIGNvbnN0IGF1dGhlbnRpY2F0aW9uID0gKHN1YnNjcmlwdGlvbktleSAmJiBzdWJzY3JpcHRpb25LZXkgIT09IFwiXCIpID9cbiAgICAgICAgICAgIG5ldyBDb2duaXRpdmVTdWJzY3JpcHRpb25LZXlBdXRoZW50aWNhdGlvbihzdWJzY3JpcHRpb25LZXkpIDpcbiAgICAgICAgICAgIG5ldyBDb2duaXRpdmVUb2tlbkF1dGhlbnRpY2F0aW9uKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdXRob3JpemF0aW9uVG9rZW4gPSB0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4sIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShhdXRob3JpemF0aW9uVG9rZW4pO1xuICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1dGhvcml6YXRpb25Ub2tlbiA9IHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGF1dGhvcml6YXRpb25Ub2tlbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wcml2QWRhcHRlciA9IHRoaXMuY3JlYXRlU3ludGhlc2lzQWRhcHRlcihhdXRoZW50aWNhdGlvbiwgdGhpcy5wcml2Q29ubmVjdGlvbkZhY3RvcnksIHRoaXMuYXVkaW9Db25maWcsIHN5bnRoZXNpemVyQ29uZmlnKTtcbiAgICAgICAgdGhpcy5wcml2QWRhcHRlci5hdWRpb091dHB1dEZvcm1hdCA9IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbC5mcm9tU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0KFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFt0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aE91dHB1dEZvcm1hdCwgdW5kZWZpbmVkKV0pO1xuICAgICAgICB0aGlzLnByaXZSZXN0QWRhcHRlciA9IG5ldyBTeW50aGVzaXNSZXN0QWRhcHRlcihzeW50aGVzaXplckNvbmZpZywgYXV0aGVudGljYXRpb24pO1xuICAgIH1cbiAgICBzcGVha0ltcGwodGV4dCwgSXNTc21sLCBjYiwgZXJyLCBkYXRhU3RyZWFtKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkKTtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RJZCA9IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgICAgIGxldCBhdWRpb0Rlc3RpbmF0aW9uO1xuICAgICAgICAgICAgaWYgKGRhdGFTdHJlYW0gaW5zdGFuY2VvZiBQdXNoQXVkaW9PdXRwdXRTdHJlYW1DYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGF1ZGlvRGVzdGluYXRpb24gPSBuZXcgUHVzaEF1ZGlvT3V0cHV0U3RyZWFtSW1wbChkYXRhU3RyZWFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGFTdHJlYW0gaW5zdGFuY2VvZiBQdWxsQXVkaW9PdXRwdXRTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICBhdWRpb0Rlc3RpbmF0aW9uID0gZGF0YVN0cmVhbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGFTdHJlYW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGF1ZGlvRGVzdGluYXRpb24gPSBuZXcgQXVkaW9GaWxlV3JpdGVyKGRhdGFTdHJlYW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXVkaW9EZXN0aW5hdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3ludGhlc2lzUmVxdWVzdFF1ZXVlLmVucXVldWUobmV3IFN5bnRoZXNpc1JlcXVlc3QocmVxdWVzdElkLCB0ZXh0LCBJc1NzbWwsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3ludGhlc2l6aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiKGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICB0aGlzLmFkYXB0ZXJTcGVhaygpLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgICAgICAgICB9LCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgICAgICBlcnIoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgYXVkaW9EZXN0aW5hdGlvbikpO1xuICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHktZnVuY3Rpb24gKi9cbiAgICAgICAgICAgIHRoaXMuYWRhcHRlclNwZWFrKCkuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVkRXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgZXJyKHR5cGVkRXJyb3IubmFtZSArIFwiOiBcIiArIHR5cGVkRXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlcnIoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERlc3Ryb3kgdGhlIHN5bnRoZXNpemVyLlxuICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSh0cnVlKS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFZvaWNlcyhsb2NhbGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RJZCA9IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5wcml2UmVzdEFkYXB0ZXIuZ2V0Vm9pY2VzTGlzdChyZXF1ZXN0SWQpO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rICYmIEFycmF5LmlzQXJyYXkocmVzcG9uc2UuanNvbikpIHtcbiAgICAgICAgICAgICAgICBsZXQganNvbiA9IHJlc3BvbnNlLmpzb247XG4gICAgICAgICAgICAgICAgaWYgKCEhbG9jYWxlICYmIGxvY2FsZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGpzb24gPSBqc29uLmZpbHRlcigoaXRlbSkgPT4gISFpdGVtLkxvY2FsZSAmJiBpdGVtLkxvY2FsZS50b0xvd2VyQ2FzZSgpID09PSBsb2NhbGUudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU3ludGhlc2lzVm9pY2VzUmVzdWx0KHJlcXVlc3RJZCwganNvbiwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU3ludGhlc2lzVm9pY2VzUmVzdWx0KHJlcXVlc3RJZCwgdW5kZWZpbmVkLCBgRXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWRhcHRlclNwZWFrKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZEaXNwb3NlZCAmJiAhdGhpcy5wcml2U3ludGhlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3ludGhlc2l6aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0geWllbGQgdGhpcy5zeW50aGVzaXNSZXF1ZXN0UXVldWUuZGVxdWV1ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZBZGFwdGVyLlNwZWFrKHJlcXVlc3QudGV4dCwgcmVxdWVzdC5pc1NTTUwsIHJlcXVlc3QucmVxdWVzdElkLCByZXF1ZXN0LmNiLCByZXF1ZXN0LmVyciwgcmVxdWVzdC5kYXRhU3RyZWFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBYTUxFbmNvZGUodGV4dCkge1xuICAgICAgICByZXR1cm4gdGV4dC5yZXBsYWNlKC8mL2csIFwiJmFtcDtcIilcbiAgICAgICAgICAgIC5yZXBsYWNlKC88L2csIFwiJmx0O1wiKVxuICAgICAgICAgICAgLnJlcGxhY2UoLz4vZywgXCImZ3Q7XCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvXCIvZywgXCImcXVvdDtcIilcbiAgICAgICAgICAgIC5yZXBsYWNlKC8nL2csIFwiJmFwb3M7XCIpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBTeW50aGVzaXNSZXF1ZXN0IHtcbiAgICBjb25zdHJ1Y3RvcihyZXF1ZXN0SWQsIHRleHQsIGlzU1NNTCwgY2IsIGVyciwgZGF0YVN0cmVhbSkge1xuICAgICAgICB0aGlzLnJlcXVlc3RJZCA9IHJlcXVlc3RJZDtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgdGhpcy5pc1NTTUwgPSBpc1NTTUw7XG4gICAgICAgIHRoaXMuY2IgPSBjYjtcbiAgICAgICAgdGhpcy5lcnIgPSBlcnI7XG4gICAgICAgIHRoaXMuZGF0YVN0cmVhbSA9IGRhdGFTdHJlYW07XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hTeW50aGVzaXplci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cbmltcG9ydCB7IEZvcmNlRGljdGF0aW9uUHJvcGVydHlOYW1lLCBPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUsIFNlcnZpY2VQcm9wZXJ0aWVzUHJvcGVydHlOYW1lIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBPdXRwdXRGb3JtYXQsIFByb2Zhbml0eU9wdGlvbiwgUHJvcGVydHlDb2xsZWN0aW9uLCBQcm9wZXJ0eUlkLCBTcGVlY2hDb25maWcsIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdCwgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIFNwZWVjaCB0cmFuc2xhdGlvbiBjb25maWd1cmF0aW9uLlxuICogQGNsYXNzIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnXG4gKi9cbmV4cG9ydCBjbGFzcyBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZyBleHRlbmRzIFNwZWVjaENvbmZpZyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiByZWNvZ25pemVyIGNvbmZpZy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhdGljIGluc3RhbmNlIG9mIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnIHJldHVybmVkIGJ5IHBhc3NpbmcgYSBzdWJzY3JpcHRpb24ga2V5IGFuZCBzZXJ2aWNlIHJlZ2lvbi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnLmZyb21TdWJzY3JpcHRpb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN1YnNjcmlwdGlvbktleSAtIFRoZSBzdWJzY3JpcHRpb24ga2V5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZWdpb24gLSBUaGUgcmVnaW9uIG5hbWUgKHNlZSB0aGUgPGEgaHJlZj1cImh0dHBzOi8vYWthLm1zL2Nzc3BlZWNoL3JlZ2lvblwiPnJlZ2lvbiBwYWdlPC9hPikuXG4gICAgICogQHJldHVybnMge1NwZWVjaFRyYW5zbGF0aW9uQ29uZmlnfSBUaGUgc3BlZWNoIHRyYW5zbGF0aW9uIGNvbmZpZy5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb25LZXksIHJlZ2lvbikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2Uoc3Vic2NyaXB0aW9uS2V5LCBcInN1YnNjcmlwdGlvbktleVwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHJlZ2lvbiwgXCJyZWdpb25cIik7XG4gICAgICAgIGNvbnN0IHJldCA9IG5ldyBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwoKTtcbiAgICAgICAgcmV0LnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXksIHN1YnNjcmlwdGlvbktleSk7XG4gICAgICAgIHJldC5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVnaW9uLCByZWdpb24pO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGF0aWMgaW5zdGFuY2Ugb2YgU3BlZWNoVHJhbnNsYXRpb25Db25maWcgcmV0dXJuZWQgYnkgcGFzc2luZyBhdXRob3JpemF0aW9uIHRva2VuIGFuZCBzZXJ2aWNlIHJlZ2lvbi5cbiAgICAgKiBOb3RlOiBUaGUgY2FsbGVyIG5lZWRzIHRvIGVuc3VyZSB0aGF0IHRoZSBhdXRob3JpemF0aW9uIHRva2VuIGlzIHZhbGlkLiBCZWZvcmUgdGhlIGF1dGhvcml6YXRpb24gdG9rZW5cbiAgICAgKiBleHBpcmVzLCB0aGUgY2FsbGVyIG5lZWRzIHRvIHJlZnJlc2ggaXQgYnkgc2V0dGluZyB0aGUgcHJvcGVydHkgYXV0aG9yaXphdGlvblRva2VuIHdpdGggYSBuZXdcbiAgICAgKiB2YWxpZCB0b2tlbi4gT3RoZXJ3aXNlLCBhbGwgdGhlIHJlY29nbml6ZXJzIGNyZWF0ZWQgYnkgdGhpcyBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZyBpbnN0YW5jZVxuICAgICAqIHdpbGwgZW5jb3VudGVyIGVycm9ycyBkdXJpbmcgcmVjb2duaXRpb24uXG4gICAgICogQXMgY29uZmlndXJhdGlvbiB2YWx1ZXMgYXJlIGNvcGllZCB3aGVuIGNyZWF0aW5nIGEgbmV3IHJlY29nbml6ZXIsIHRoZSBuZXcgdG9rZW4gdmFsdWUgd2lsbCBub3QgYXBwbHlcbiAgICAgKiB0byByZWNvZ25pemVycyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIGNyZWF0ZWQuXG4gICAgICogRm9yIHJlY29nbml6ZXJzIHRoYXQgaGF2ZSBiZWVuIGNyZWF0ZWQgYmVmb3JlLCB5b3UgbmVlZCB0byBzZXQgYXV0aG9yaXphdGlvbiB0b2tlbiBvZiB0aGUgY29ycmVzcG9uZGluZyByZWNvZ25pemVyXG4gICAgICogdG8gcmVmcmVzaCB0aGUgdG9rZW4uIE90aGVyd2lzZSwgdGhlIHJlY29nbml6ZXJzIHdpbGwgZW5jb3VudGVyIGVycm9ycyBkdXJpbmcgcmVjb2duaXRpb24uXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5mcm9tQXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdXRob3JpemF0aW9uVG9rZW4gLSBUaGUgYXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVnaW9uIC0gVGhlIHJlZ2lvbiBuYW1lIChzZWUgdGhlIDxhIGhyZWY9XCJodHRwczovL2FrYS5tcy9jc3NwZWVjaC9yZWdpb25cIj5yZWdpb24gcGFnZTwvYT4pLlxuICAgICAqIEByZXR1cm5zIHtTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ30gVGhlIHNwZWVjaCB0cmFuc2xhdGlvbiBjb25maWcuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21BdXRob3JpemF0aW9uVG9rZW4oYXV0aG9yaXphdGlvblRva2VuLCByZWdpb24pIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKGF1dGhvcml6YXRpb25Ub2tlbiwgXCJhdXRob3JpemF0aW9uVG9rZW5cIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShyZWdpb24sIFwicmVnaW9uXCIpO1xuICAgICAgICBjb25zdCByZXQgPSBuZXcgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsKCk7XG4gICAgICAgIHJldC5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4sIGF1dGhvcml6YXRpb25Ub2tlbik7XG4gICAgICAgIHJldC5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVnaW9uLCByZWdpb24pO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBzcGVlY2ggY29uZmlnIHdpdGggc3BlY2lmaWVkIGhvc3QgYW5kIHN1YnNjcmlwdGlvbiBrZXkuXG4gICAgICogVGhpcyBtZXRob2QgaXMgaW50ZW5kZWQgb25seSBmb3IgdXNlcnMgd2hvIHVzZSBhIG5vbi1kZWZhdWx0IHNlcnZpY2UgaG9zdC4gU3RhbmRhcmQgcmVzb3VyY2UgcGF0aCB3aWxsIGJlIGFzc3VtZWQuXG4gICAgICogRm9yIHNlcnZpY2VzIHdpdGggYSBub24tc3RhbmRhcmQgcmVzb3VyY2UgcGF0aCBvciBubyBwYXRoIGF0IGFsbCwgdXNlIGZyb21FbmRwb2ludCBpbnN0ZWFkLlxuICAgICAqIE5vdGU6IFF1ZXJ5IHBhcmFtZXRlcnMgYXJlIG5vdCBhbGxvd2VkIGluIHRoZSBob3N0IFVSSSBhbmQgbXVzdCBiZSBzZXQgYnkgb3RoZXIgQVBJcy5cbiAgICAgKiBOb3RlOiBUbyB1c2UgYW4gYXV0aG9yaXphdGlvbiB0b2tlbiB3aXRoIGZyb21Ib3N0LCB1c2UgZnJvbUhvc3QoVVJMKSxcbiAgICAgKiBhbmQgdGhlbiBzZXQgdGhlIEF1dGhvcml6YXRpb25Ub2tlbiBwcm9wZXJ0eSBvbiB0aGUgY3JlYXRlZCBTcGVlY2hDb25maWcgaW5zdGFuY2UuXG4gICAgICogTm90ZTogQWRkZWQgaW4gdmVyc2lvbiAxLjkuMC5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaENvbmZpZy5mcm9tSG9zdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1VSTH0gaG9zdCAtIFRoZSBzZXJ2aWNlIGVuZHBvaW50IHRvIGNvbm5lY3QgdG8uIEZvcm1hdCBpcyBcInByb3RvY29sOi8vaG9zdDpwb3J0XCIgd2hlcmUgXCI6cG9ydFwiIGlzIG9wdGlvbmFsLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdWJzY3JpcHRpb25LZXkgLSBUaGUgc3Vic2NyaXB0aW9uIGtleS4gSWYgYSBzdWJzY3JpcHRpb24ga2V5IGlzIG5vdCBzcGVjaWZpZWQsIGFuIGF1dGhvcml6YXRpb24gdG9rZW4gbXVzdCBiZSBzZXQuXG4gICAgICogQHJldHVybnMge1NwZWVjaENvbmZpZ30gQSBzcGVlY2ggZmFjdG9yeSBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUhvc3QoaG9zdE5hbWUsIHN1YnNjcmlwdGlvbktleSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwoaG9zdE5hbWUsIFwiaG9zdE5hbWVcIik7XG4gICAgICAgIGNvbnN0IHNwZWVjaEltcGwgPSBuZXcgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsKCk7XG4gICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Ib3N0LCBob3N0TmFtZS5wcm90b2NvbCArIFwiLy9cIiArIGhvc3ROYW1lLmhvc3RuYW1lICsgKGhvc3ROYW1lLnBvcnQgPT09IFwiXCIgPyBcIlwiIDogXCI6XCIgKyBob3N0TmFtZS5wb3J0KSk7XG4gICAgICAgIGlmICh1bmRlZmluZWQgIT09IHN1YnNjcmlwdGlvbktleSkge1xuICAgICAgICAgICAgc3BlZWNoSW1wbC5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleSwgc3Vic2NyaXB0aW9uS2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3BlZWNoSW1wbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgc3BlZWNoIHRyYW5zbGF0aW9uIGNvbmZpZyB3aXRoIHNwZWNpZmllZCBlbmRwb2ludCBhbmQgc3Vic2NyaXB0aW9uIGtleS5cbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBvbmx5IGZvciB1c2VycyB3aG8gdXNlIGEgbm9uLXN0YW5kYXJkIHNlcnZpY2UgZW5kcG9pbnQgb3IgcGFyYW10ZXJzLlxuICAgICAqIE5vdGU6IFRoZSBxdWVyeSBwcm9wZXJ0aWVzIHNwZWNpZmllZCBpbiB0aGUgZW5kcG9pbnQgVVJMIGFyZSBub3QgY2hhbmdlZCwgZXZlbiBpZiB0aGV5IGFyZVxuICAgICAqIHNldCBieSBhbnkgb3RoZXIgQVBJcy4gRm9yIGV4YW1wbGUsIGlmIGxhbmd1YWdlIGlzIGRlZmluZWQgaW4gdGhlIHVyaSBhcyBxdWVyeSBwYXJhbWV0ZXJcbiAgICAgKiBcImxhbmd1YWdlPWRlLURFXCIsIGFuZCBhbHNvIHNldCBieSB0aGUgc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSBwcm9wZXJ0eSwgdGhlIGxhbmd1YWdlXG4gICAgICogc2V0dGluZyBpbiB1cmkgdGFrZXMgcHJlY2VkZW5jZSwgYW5kIHRoZSBlZmZlY3RpdmUgbGFuZ3VhZ2UgaXMgXCJkZS1ERVwiLlxuICAgICAqIE9ubHkgdGhlIHByb3BlcnRpZXMgdGhhdCBhcmUgbm90IHNwZWNpZmllZCBpbiB0aGUgZW5kcG9pbnQgVVJMIGNhbiBiZSBzZXQgYnkgb3RoZXIgQVBJcy5cbiAgICAgKiBOb3RlOiBUbyB1c2UgYXV0aG9yaXphdGlvbiB0b2tlbiB3aXRoIGZyb21FbmRwb2ludCwgcGFzcyBhbiBlbXB0eSBzdHJpbmcgdG8gdGhlIHN1YnNjcmlwdGlvbktleSBpbiB0aGVcbiAgICAgKiBmcm9tRW5kcG9pbnQgbWV0aG9kLCBhbmQgdGhlbiBzZXQgYXV0aG9yaXphdGlvblRva2VuPVwidG9rZW5cIiBvbiB0aGUgY3JlYXRlZCBTcGVlY2hDb25maWcgaW5zdGFuY2UgdG9cbiAgICAgKiB1c2UgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5mcm9tRW5kcG9pbnRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtVUkx9IGVuZHBvaW50IC0gVGhlIHNlcnZpY2UgZW5kcG9pbnQgdG8gY29ubmVjdCB0by5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3Vic2NyaXB0aW9uS2V5IC0gVGhlIHN1YnNjcmlwdGlvbiBrZXkuXG4gICAgICogQHJldHVybnMge1NwZWVjaFRyYW5zbGF0aW9uQ29uZmlnfSBBIHNwZWVjaCBjb25maWcgaW5zdGFuY2UuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21FbmRwb2ludChlbmRwb2ludCwgc3Vic2NyaXB0aW9uS2V5KSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChlbmRwb2ludCwgXCJlbmRwb2ludFwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKHN1YnNjcmlwdGlvbktleSwgXCJzdWJzY3JpcHRpb25LZXlcIik7XG4gICAgICAgIGNvbnN0IHJldCA9IG5ldyBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwoKTtcbiAgICAgICAgcmV0LnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCwgZW5kcG9pbnQuaHJlZik7XG4gICAgICAgIHJldC5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5LCBzdWJzY3JpcHRpb25LZXkpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbn1cbi8qKlxuICogQHByaXZhdGVcbiAqIEBjbGFzcyBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGxcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbCBleHRlbmRzIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgdGhpcy5vdXRwdXRGb3JtYXQgPSBPdXRwdXRGb3JtYXQuU2ltcGxlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzL1NldHMgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICogSWYgdGhpcyBpcyBzZXQsIHN1YnNjcmlwdGlvbiBrZXkgaXMgaWdub3JlZC5cbiAgICAgKiBVc2VyIG5lZWRzIHRvIG1ha2Ugc3VyZSB0aGUgcHJvdmlkZWQgYXV0aG9yaXphdGlvbiB0b2tlbiBpcyB2YWxpZCBhbmQgbm90IGV4cGlyZWQuXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLmF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgYXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBzZXQgYXV0aG9yaXphdGlvblRva2VuKHZhbHVlKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh2YWx1ZSwgXCJ2YWx1ZVwiKTtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHNwZWVjaCByZWNvZ25pdGlvbiBsYW5ndWFnZS5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUuc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgYXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBzZXQgc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSh2YWx1ZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodmFsdWUsIFwidmFsdWVcIik7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UsIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc3BlZWNoIHJlY29nbml0aW9uIGxhbmd1YWdlLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5zcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UuXG4gICAgICovXG4gICAgZ2V0IHNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2VdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLnN1YnNjcmlwdGlvbktleVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXQgc3Vic2NyaXB0aW9uS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5XSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG91dHB1dCBmb3JtYXRcbiAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUub3V0cHV0Rm9ybWF0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldCBvdXRwdXRGb3JtYXQoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICByZXR1cm4gT3V0cHV0Rm9ybWF0W3RoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuZ2V0UHJvcGVydHkoT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCB1bmRlZmluZWQpXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cy9TZXRzIHRoZSBvdXRwdXQgZm9ybWF0XG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLm91dHB1dEZvcm1hdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBzZXQgb3V0cHV0Rm9ybWF0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuc2V0UHJvcGVydHkoT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCBPdXRwdXRGb3JtYXRbdmFsdWVdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZW5kcG9pbnQgaWQuXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLmVuZHBvaW50SWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0IGVuZHBvaW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnRJZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMvU2V0cyB0aGUgZW5kcG9pbnQgaWQuXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLmVuZHBvaW50SWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc2V0IGVuZHBvaW50SWQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50SWQsIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgKHRleHQpIHRhcmdldCBsYW5ndWFnZSB0byB0cmFuc2xhdGUgaW50by5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUuYWRkVGFyZ2V0TGFuZ3VhZ2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIGxhbmd1YWdlIHN1Y2ggYXMgZGUtREVcbiAgICAgKi9cbiAgICBhZGRUYXJnZXRMYW5ndWFnZSh2YWx1ZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodmFsdWUsIFwidmFsdWVcIik7XG4gICAgICAgIGNvbnN0IGxhbmd1YWdlcyA9IHRoaXMudGFyZ2V0TGFuZ3VhZ2VzO1xuICAgICAgICBsYW5ndWFnZXMucHVzaCh2YWx1ZSk7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzLCBsYW5ndWFnZXMuam9pbihcIixcIikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSAodGV4dCkgdGFyZ2V0IGxhbmd1YWdlIHRvIHRyYW5zbGF0ZSBpbnRvLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS50YXJnZXRMYW5ndWFnZXNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIGxhbmd1YWdlIHN1Y2ggYXMgZGUtREVcbiAgICAgKi9cbiAgICBnZXQgdGFyZ2V0TGFuZ3VhZ2VzKCkge1xuICAgICAgICBpZiAodGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVG9MYW5ndWFnZXMsIHVuZGVmaW5lZCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzKS5zcGxpdChcIixcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgdm9pY2UgbmFtZS5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUudm9pY2VOYW1lXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldCB2b2ljZU5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFByb3BlcnR5KFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblZvaWNlXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMvU2V0cyB0aGUgdm9pY2Ugb2YgdGhlIHRyYW5zbGF0ZWQgbGFuZ3VhZ2UsIGVuYWJsZSB2b2ljZSBzeW50aGVzaXMgb3V0cHV0LlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS52b2ljZU5hbWVcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIG5hbWUgb2YgdGhlIHZvaWNlLlxuICAgICAqL1xuICAgIHNldCB2b2ljZU5hbWUodmFsdWUpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHZhbHVlLCBcInZhbHVlXCIpO1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Wb2ljZSwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm92aWRlcyB0aGUgcmVnaW9uLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5yZWdpb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIHJlZ2lvbi5cbiAgICAgKi9cbiAgICBnZXQgcmVnaW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbik7XG4gICAgfVxuICAgIHNldFByb3h5KHByb3h5SG9zdE5hbWUsIHByb3h5UG9ydCwgcHJveHlVc2VyTmFtZSwgcHJveHlQYXNzd29yZCkge1xuICAgICAgICB0aGlzLnNldFByb3BlcnR5KFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eUhvc3ROYW1lXSwgcHJveHlIb3N0TmFtZSk7XG4gICAgICAgIHRoaXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5UG9ydF0sIHByb3h5UG9ydCk7XG4gICAgICAgIHRoaXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5VXNlck5hbWVdLCBwcm94eVVzZXJOYW1lKTtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlQYXNzd29yZF0sIHByb3h5UGFzc3dvcmQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGFuIGFyYml0cmFyeSBwcm9wZXJ0eSB2YWx1ZS5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUuZ2V0UHJvcGVydHlcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRlZiAtIFRoZSBkZWZhdWx0IHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSBpbiBjYXNlIGl0IGlzIG5vdCBzZXQuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBnZXRQcm9wZXJ0eShuYW1lLCBkZWYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuZ2V0UHJvcGVydHkobmFtZSwgZGVmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cy9TZXRzIGFuIGFyYml0cmFyeSBwcm9wZXJ0eSB2YWx1ZS5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUuc2V0UHJvcGVydHlcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBzZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLnNldFByb3BlcnR5KG5hbWUsIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvdmlkZXMgYWNjZXNzIHRvIGN1c3RvbSBwcm9wZXJ0aWVzLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5wcm9wZXJ0aWVzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IFRoZSBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcG9zZSBvZiBhc3NvY2lhdGVkIHJlc291cmNlcy5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUuY2xvc2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0U2VydmljZVByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRQcm9wZXJ0aWVzID0gSlNPTi5wYXJzZSh0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFNlcnZpY2VQcm9wZXJ0aWVzUHJvcGVydHlOYW1lLCBcInt9XCIpKTtcbiAgICAgICAgY3VycmVudFByb3BlcnRpZXNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5zZXRQcm9wZXJ0eShTZXJ2aWNlUHJvcGVydGllc1Byb3BlcnR5TmFtZSwgSlNPTi5zdHJpbmdpZnkoY3VycmVudFByb3BlcnRpZXMpKTtcbiAgICB9XG4gICAgc2V0UHJvZmFuaXR5KHByb2Zhbml0eSkge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1Byb2Zhbml0eU9wdGlvbiwgUHJvZmFuaXR5T3B0aW9uW3Byb2Zhbml0eV0pO1xuICAgIH1cbiAgICBlbmFibGVBdWRpb0xvZ2dpbmcoKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmFibGVBdWRpb0xvZ2dpbmcsIFwidHJ1ZVwiKTtcbiAgICB9XG4gICAgcmVxdWVzdFdvcmRMZXZlbFRpbWVzdGFtcHMoKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFdvcmRMZXZlbFRpbWVzdGFtcHMsIFwidHJ1ZVwiKTtcbiAgICB9XG4gICAgZW5hYmxlRGljdGF0aW9uKCkge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLnNldFByb3BlcnR5KEZvcmNlRGljdGF0aW9uUHJvcGVydHlOYW1lLCBcInRydWVcIik7XG4gICAgfVxuICAgIGdldCBzcGVlY2hTeW50aGVzaXNMYW5ndWFnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aExhbmd1YWdlKTtcbiAgICB9XG4gICAgc2V0IHNwZWVjaFN5bnRoZXNpc0xhbmd1YWdlKGxhbmd1YWdlKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aExhbmd1YWdlLCBsYW5ndWFnZSk7XG4gICAgfVxuICAgIGdldCBzcGVlY2hTeW50aGVzaXNWb2ljZU5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fU3ludGhWb2ljZSk7XG4gICAgfVxuICAgIHNldCBzcGVlY2hTeW50aGVzaXNWb2ljZU5hbWUodm9pY2UpIHtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoVm9pY2UsIHZvaWNlKTtcbiAgICB9XG4gICAgZ2V0IHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdCgpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIHJldHVybiBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoT3V0cHV0Rm9ybWF0LCB1bmRlZmluZWQpXTtcbiAgICB9XG4gICAgc2V0IHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdChmb3JtYXQpIHtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoT3V0cHV0Rm9ybWF0LCBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbZm9ybWF0XSk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBzeW50aGVzaXMgcmVzdWx0c1xuICogQGNsYXNzIFN5bnRoZXNpc1Jlc3VsdFxuICogQWRkZWQgaW4gdmVyc2lvbiAxLjIwLjBcbiAqL1xuZXhwb3J0IGNsYXNzIFN5bnRoZXNpc1Jlc3VsdCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVzdWx0SWQgLSBUaGUgcmVzdWx0IGlkLlxuICAgICAqIEBwYXJhbSB7UmVzdWx0UmVhc29ufSByZWFzb24gLSBUaGUgcmVhc29uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvckRldGFpbHMgLSBFcnJvciBkZXRhaWxzLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge1Byb3BlcnR5Q29sbGVjdGlvbn0gcHJvcGVydGllcyAtIEFkZGl0aW9uYWwgcHJvcGVydGllcywgaWYgcHJvdmlkZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVzdWx0SWQsIHJlYXNvbiwgZXJyb3JEZXRhaWxzLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHRoaXMucHJpdlJlc3VsdElkID0gcmVzdWx0SWQ7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5wcml2RXJyb3JEZXRhaWxzID0gZXJyb3JEZXRhaWxzO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gcHJvcGVydGllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSByZXN1bHQgaWRlbnRpZmllci5cbiAgICAgKiBAbWVtYmVyIFN5bnRoZXNpc1Jlc3VsdC5wcm90b3R5cGUucmVzdWx0SWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gU3BlY2lmaWVzIHRoZSByZXN1bHQgaWRlbnRpZmllci5cbiAgICAgKi9cbiAgICBnZXQgcmVzdWx0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN1bHRJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHN0YXR1cyBvZiB0aGUgcmVzdWx0LlxuICAgICAqIEBtZW1iZXIgU3ludGhlc2lzUmVzdWx0LnByb3RvdHlwZS5yZWFzb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1Jlc3VsdFJlYXNvbn0gU3BlY2lmaWVzIHN0YXR1cyBvZiB0aGUgcmVzdWx0LlxuICAgICAqL1xuICAgIGdldCByZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluIGNhc2Ugb2YgYW4gdW5zdWNjZXNzZnVsIHN5bnRoZXNpcywgcHJvdmlkZXMgZGV0YWlscyBvZiB0aGUgb2NjdXJyZWQgZXJyb3IuXG4gICAgICogQG1lbWJlciBTeW50aGVzaXNSZXN1bHQucHJvdG90eXBlLmVycm9yRGV0YWlsc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBhIGJyaWVmIGRlc2NyaXB0aW9uIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIGdldCBlcnJvckRldGFpbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckRldGFpbHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgcHJvcGVydGllcyBleHBvc2VkIGluIHRoZSByZXN1bHQuXG4gICAgICogQG1lbWJlciBTeW50aGVzaXNSZXN1bHQucHJvdG90eXBlLnByb3BlcnRpZXNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1Byb3BlcnR5Q29sbGVjdGlvbn0gVGhlIHNldCBvZiBwcm9wZXJ0aWVzIGV4cG9zZWQgaW4gdGhlIHJlc3VsdC5cbiAgICAgKi9cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TeW50aGVzaXNSZXN1bHQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFByb3BlcnR5Q29sbGVjdGlvbiwgUmVzdWx0UmVhc29uLCBTeW50aGVzaXNSZXN1bHQsIFZvaWNlSW5mbyB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogRGVmaW5lcyByZXN1bHQgb2Ygc3BlZWNoIHN5bnRoZXNpcy5cbiAqIEBjbGFzcyBTeW50aGVzaXNWb2ljZXNSZXN1bHRcbiAqIEFkZGVkIGluIHZlcnNpb24gMS4yMC4wXG4gKi9cbmV4cG9ydCBjbGFzcyBTeW50aGVzaXNWb2ljZXNSZXN1bHQgZXh0ZW5kcyBTeW50aGVzaXNSZXN1bHQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHJlcXVlc3RJZCAtIHJlc3VsdCBpZCBmb3IgcmVxdWVzdC5cbiAgICAgKiBAcGFyYW0ganNvbiAtIGpzb24gcGF5bG9hZCBmcm9tIGVuZHBvaW50LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlcXVlc3RJZCwganNvbiwgZXJyb3JEZXRhaWxzKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGpzb24pKSB7XG4gICAgICAgICAgICBzdXBlcihyZXF1ZXN0SWQsIFJlc3VsdFJlYXNvbi5Wb2ljZXNMaXN0UmV0cmlldmVkLCB1bmRlZmluZWQsIG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKSk7XG4gICAgICAgICAgICB0aGlzLnByaXZWb2ljZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBqc29uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Vm9pY2VzLnB1c2gobmV3IFZvaWNlSW5mbyhpdGVtKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdXBlcihyZXF1ZXN0SWQsIFJlc3VsdFJlYXNvbi5DYW5jZWxlZCwgZXJyb3JEZXRhaWxzID8gZXJyb3JEZXRhaWxzIDogXCJFcnJvciBpbmZvcm1hdGlvbiB1bmF2YWlsYWJsZVwiLCBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsaXN0IG9mIHZvaWNlc1xuICAgICAqIEBtZW1iZXIgU3ludGhlc2lzVm9pY2VzUmVzdWx0LnByb3RvdHlwZS52b2ljZXNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1ZvaWNlSW5mb1tdfSBMaXN0IG9mIHN5bnRoZXNpemVkIHZvaWNlcy5cbiAgICAgKi9cbiAgICBnZXQgdm9pY2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Vm9pY2VzO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ludGhlc2lzVm9pY2VzUmVzdWx0LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vLyBNdWx0aS1kZXZpY2UgQ29udmVyc2F0aW9uIGlzIGEgUHJldmlldyBmZWF0dXJlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtY2xhc3Nlcy1wZXItZmlsZSAqL1xuaW1wb3J0IHsgQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZywgQ29udmVyc2F0aW9uTWFuYWdlciwgQ29udmVyc2F0aW9uUmVjb2duaXplckZhY3RvcnksIENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMsIENvbnZlcnNhdGlvblRyYW5zbGF0b3JNZXNzYWdlVHlwZXMsIEludGVybmFsUGFydGljaXBhbnRzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyB9IGZyb20gXCIuLi8uLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4uL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgQ29udmVyc2F0aW9uUGFydGljaXBhbnRzQ2hhbmdlZEV2ZW50QXJncywgQ29udmVyc2F0aW9uVHJhbnNsYXRpb25FdmVudEFyZ3MsIFBhcnRpY2lwYW50LCBQYXJ0aWNpcGFudENoYW5nZWRSZWFzb24sIFByb2Zhbml0eU9wdGlvbiwgUHJvcGVydHlDb2xsZWN0aW9uLCBQcm9wZXJ0eUlkLCB9IGZyb20gXCIuLi9FeHBvcnRzXCI7XG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBjb252ZXJzYXRpb25cbiAgICAgKiBAcGFyYW0gc3BlZWNoQ29uZmlnXG4gICAgICogQHBhcmFtIGNiXG4gICAgICogQHBhcmFtIGVyclxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVDb252ZXJzYXRpb25Bc3luYyhzcGVlY2hDb25maWcsIGFyZzIsIGFyZzMsIGFyZzQpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoc3BlZWNoQ29uZmlnLCBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLnJlc3RFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIFwiY29uZmlnXCIpKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoc3BlZWNoQ29uZmlnLnJlZ2lvbiwgQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5yZXN0RXJyb3JzLmludmFsaWRBcmdzLnJlcGxhY2UoXCJ7YXJnfVwiLCBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvblwiKSk7XG4gICAgICAgIGlmICghc3BlZWNoQ29uZmlnLnN1YnNjcmlwdGlvbktleSAmJiAhc3BlZWNoQ29uZmlnLmdldFByb3BlcnR5KFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbl0pKSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChzcGVlY2hDb25maWcuc3Vic2NyaXB0aW9uS2V5LCBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLnJlc3RFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5XCIpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY29udmVyc2F0aW9uSW1wbDtcbiAgICAgICAgbGV0IGNiO1xuICAgICAgICBsZXQgZXJyO1xuICAgICAgICBpZiAodHlwZW9mIGFyZzIgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvbkltcGwgPSBuZXcgQ29udmVyc2F0aW9uSW1wbChzcGVlY2hDb25maWcsIGFyZzIpO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgICAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcygoKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgeyB9KSkoKSwgYXJnMywgYXJnNCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb252ZXJzYXRpb25JbXBsID0gbmV3IENvbnZlcnNhdGlvbkltcGwoc3BlZWNoQ29uZmlnKTtcbiAgICAgICAgICAgIGNiID0gYXJnMjtcbiAgICAgICAgICAgIGVyciA9IGFyZzM7XG4gICAgICAgICAgICBjb252ZXJzYXRpb25JbXBsLmNyZWF0ZUNvbnZlcnNhdGlvbkFzeW5jKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnZlcnNhdGlvbkltcGw7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvbkltcGwgZXh0ZW5kcyBDb252ZXJzYXRpb24ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGNvbnZlcnNhdGlvbiBpbXBsXG4gICAgICogQHBhcmFtIHNwZWVjaENvbmZpZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIG9wdGlvbmFsIGNvbnZlcnNhdGlvbklkXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc3BlZWNoQ29uZmlnLCBpZCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnByaXZFcnJvcnMgPSBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLnJlc3RFcnJvcnM7XG4gICAgICAgIC8qKiB3ZWJzb2NrZXQgY2FsbGJhY2tzICovXG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC90eXBlZGVmICovXG4gICAgICAgIHRoaXMub25Db25uZWN0ZWQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgdGhpcy5wcml2SXNDb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoISEoKF9hID0gdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNlc3Npb25TdGFydGVkKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLnNlc3Npb25TdGFydGVkKHRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3IsIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RlZCA9IChlKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICghISgoX2EgPSB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2Vzc2lvblN0b3BwZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3Iuc2Vzc2lvblN0b3BwZWQodGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvciwgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdm9pZCB0aGlzLmNsb3NlKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkNhbmNlbGVkID0gKHIsIGUpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhKChfYSA9IHRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYW5jZWxlZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvci5jYW5jZWxlZCh0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25QYXJ0aWNpcGFudFVwZGF0ZUNvbW1hbmRSZWNlaXZlZCA9IChyLCBlKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRQYXJ0aWNpcGFudCA9IHRoaXMucHJpdlBhcnRpY2lwYW50cy5nZXRQYXJ0aWNpcGFudChlLmlkKTtcbiAgICAgICAgICAgICAgICBpZiAodXBkYXRlZFBhcnRpY2lwYW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDb252ZXJzYXRpb25UcmFuc2xhdG9yQ29tbWFuZFR5cGVzLmNoYW5nZU5pY2tuYW1lOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRQYXJ0aWNpcGFudC5kaXNwbGF5TmFtZSA9IGUudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMuc2V0VXNlVFRTOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRQYXJ0aWNpcGFudC5pc1VzaW5nVHRzID0gZS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ29udmVyc2F0aW9uVHJhbnNsYXRvckNvbW1hbmRUeXBlcy5zZXRQcm9mYW5pdHlGaWx0ZXJpbmc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFBhcnRpY2lwYW50LnByb2Zhbml0eSA9IGUudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMuc2V0TXV0ZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkUGFydGljaXBhbnQuaXNNdXRlZCA9IGUudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMuc2V0VHJhbnNsYXRlVG9MYW5ndWFnZXM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFBhcnRpY2lwYW50LnRyYW5zbGF0ZVRvTGFuZ3VhZ2VzID0gZS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZQYXJ0aWNpcGFudHMuYWRkT3JVcGRhdGVQYXJ0aWNpcGFudCh1cGRhdGVkUGFydGljaXBhbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLnBhcnRpY2lwYW50c0NoYW5nZWQodGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvciwgbmV3IENvbnZlcnNhdGlvblBhcnRpY2lwYW50c0NoYW5nZWRFdmVudEFyZ3MoUGFydGljaXBhbnRDaGFuZ2VkUmVhc29uLlVwZGF0ZWQsIFt0aGlzLnRvUGFydGljaXBhbnQodXBkYXRlZFBhcnRpY2lwYW50KV0sIGUuc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25Mb2NrUm9vbUNvbW1hbmRSZWNlaXZlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE9cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbk11dGVBbGxDb21tYW5kUmVjZWl2ZWQgPSAociwgZSkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZQYXJ0aWNpcGFudHMucGFydGljaXBhbnRzLmZvckVhY2goKHApID0+IHAuaXNNdXRlZCA9IChwLmlzSG9zdCA/IGZhbHNlIDogZS5pc011dGVkKSk7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLnBhcnRpY2lwYW50c0NoYW5nZWQodGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvciwgbmV3IENvbnZlcnNhdGlvblBhcnRpY2lwYW50c0NoYW5nZWRFdmVudEFyZ3MoUGFydGljaXBhbnRDaGFuZ2VkUmVhc29uLlVwZGF0ZWQsIHRoaXMudG9QYXJ0aWNpcGFudHMoZmFsc2UpLCBlLnNlc3Npb25JZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblBhcnRpY2lwYW50Sm9pbkNvbW1hbmRSZWNlaXZlZCA9IChyLCBlKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BhcnRpY2lwYW50ID0gdGhpcy5wcml2UGFydGljaXBhbnRzLmFkZE9yVXBkYXRlUGFydGljaXBhbnQoZS5wYXJ0aWNpcGFudCk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1BhcnRpY2lwYW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvci5wYXJ0aWNpcGFudHNDaGFuZ2VkKHRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3IsIG5ldyBDb252ZXJzYXRpb25QYXJ0aWNpcGFudHNDaGFuZ2VkRXZlbnRBcmdzKFBhcnRpY2lwYW50Q2hhbmdlZFJlYXNvbi5Kb2luZWRDb252ZXJzYXRpb24sIFt0aGlzLnRvUGFydGljaXBhbnQobmV3UGFydGljaXBhbnQpXSwgZS5zZXNzaW9uSWQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblBhcnRpY2lwYW50TGVhdmVDb21tYW5kUmVjZWl2ZWQgPSAociwgZSkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlamVjdGVkUGFydGljaXBhbnQgPSB0aGlzLnByaXZQYXJ0aWNpcGFudHMuZ2V0UGFydGljaXBhbnQoZS5wYXJ0aWNpcGFudC5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKGVqZWN0ZWRQYXJ0aWNpcGFudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgcGFydGljaXBhbnQgZnJvbSB0aGUgaW50ZXJuYWwgcGFydGljaXBhbnRzIGxpc3RcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UGFydGljaXBhbnRzLmRlbGV0ZVBhcnRpY2lwYW50KGUucGFydGljaXBhbnQuaWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub3RpZnkgc3Vic2NyaWJlcnMgdGhhdCB0aGUgcGFydGljaXBhbnQgaGFzIGxlZnQgdGhlIGNvbnZlcnNhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvci5wYXJ0aWNpcGFudHNDaGFuZ2VkKHRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3IsIG5ldyBDb252ZXJzYXRpb25QYXJ0aWNpcGFudHNDaGFuZ2VkRXZlbnRBcmdzKFBhcnRpY2lwYW50Q2hhbmdlZFJlYXNvbi5MZWZ0Q29udmVyc2F0aW9uLCBbdGhpcy50b1BhcnRpY2lwYW50KGVqZWN0ZWRQYXJ0aWNpcGFudCldLCBlLnNlc3Npb25JZCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uVHJhbnNsYXRpb25SZWNlaXZlZCA9IChyLCBlKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZS5jb21tYW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgQ29udmVyc2F0aW9uVHJhbnNsYXRvck1lc3NhZ2VUeXBlcy5maW5hbDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLnRyYW5zY3JpYmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3IsIG5ldyBDb252ZXJzYXRpb25UcmFuc2xhdGlvbkV2ZW50QXJncyhlLnBheWxvYWQsIHVuZGVmaW5lZCwgZS5zZXNzaW9uSWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIENvbnZlcnNhdGlvblRyYW5zbGF0b3JNZXNzYWdlVHlwZXMucGFydGlhbDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLnRyYW5zY3JpYmluZyh0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLCBuZXcgQ29udmVyc2F0aW9uVHJhbnNsYXRpb25FdmVudEFyZ3MoZS5wYXlsb2FkLCB1bmRlZmluZWQsIGUuc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBDb252ZXJzYXRpb25UcmFuc2xhdG9yTWVzc2FnZVR5cGVzLmluc3RhbnRNZXNzYWdlOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3IudGV4dE1lc3NhZ2VSZWNlaXZlZCh0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLCBuZXcgQ29udmVyc2F0aW9uVHJhbnNsYXRpb25FdmVudEFyZ3MoZS5wYXlsb2FkLCB1bmRlZmluZWQsIGUuc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25QYXJ0aWNpcGFudHNMaXN0UmVjZWl2ZWQgPSAociwgZSkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgc2Vzc2lvbiB0b2tlbiBuZWVkcyB0byBiZSB1cGRhdGVkXG4gICAgICAgICAgICAgICAgaWYgKGUuc2Vzc2lvblRva2VuICE9PSB1bmRlZmluZWQgJiYgZS5zZXNzaW9uVG9rZW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Um9vbS50b2tlbiA9IGUuc2Vzc2lvblRva2VuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBzYXZlIHRoZSBwYXJ0aWNpcGFudHNcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZQYXJ0aWNpcGFudHMucGFydGljaXBhbnRzID0gWy4uLmUucGFydGljaXBhbnRzXTtcbiAgICAgICAgICAgICAgICAvLyBlbmFibGUgdGhlIGNvbnZlcnNhdGlvblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZQYXJ0aWNpcGFudHMubWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZJc1JlYWR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLnBhcnRpY2lwYW50c0NoYW5nZWQodGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvciwgbmV3IENvbnZlcnNhdGlvblBhcnRpY2lwYW50c0NoYW5nZWRFdmVudEFyZ3MoUGFydGljaXBhbnRDaGFuZ2VkUmVhc29uLkpvaW5lZENvbnZlcnNhdGlvbiwgdGhpcy50b1BhcnRpY2lwYW50cyh0cnVlKSwgZS5zZXNzaW9uSWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyB0aGUgaG9zdCwgdXBkYXRlIHRoZSBuaWNrbmFtZSBpZiBuZWVkZWRcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tZS5pc0hvc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbmlja25hbWUgPSAoX2EgPSB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuaWNrbmFtZSAhPT0gdW5kZWZpbmVkICYmIG5pY2tuYW1lLmxlbmd0aCA+IDAgJiYgbmlja25hbWUgIT09IHRoaXMubWUuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzc3VlIGEgY2hhbmdlIG5pY2tuYW1lIHJlcXVlc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlTmlja25hbWVBc3luYyhuaWNrbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25Db252ZXJzYXRpb25FeHBpcmF0aW9uID0gKHIsIGUpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLmNvbnZlcnNhdGlvbkV4cGlyYXRpb24odGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvciwgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByaXZJc0Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbklkID0gXCJcIjtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgdGhpcy5wcml2TWFuYWdlciA9IG5ldyBDb252ZXJzYXRpb25NYW5hZ2VyKCk7XG4gICAgICAgIC8vIGNoZWNrIHRoZSBzcGVlY2ggbGFuZ3VhZ2VcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2UgPSBzcGVlY2hDb25maWcuZ2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZV0pO1xuICAgICAgICBpZiAoIWxhbmd1YWdlKSB7XG4gICAgICAgICAgICBzcGVlY2hDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZV0sIENvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcuZGVmYXVsdExhbmd1YWdlQ29kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2TGFuZ3VhZ2UgPSBzcGVlY2hDb25maWcuZ2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZV0pO1xuICAgICAgICBpZiAoIWlkKSB7XG4gICAgICAgICAgICAvLyBjaGVjayB0aGUgdGFyZ2V0IGxhbmd1YWdlKHMpXG4gICAgICAgICAgICBpZiAoc3BlZWNoQ29uZmlnLnRhcmdldExhbmd1YWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBzcGVlY2hDb25maWcuYWRkVGFyZ2V0TGFuZ3VhZ2UodGhpcy5wcml2TGFuZ3VhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2hlY2sgdGhlIHByb2Zhbml0eSBzZXR0aW5nOiBzcGVlY2ggYW5kIGNvbnZlcnNhdGlvblRyYW5zbGF0b3Igc2hvdWxkIGJlIGluIHN5bmNcbiAgICAgICAgICAgIGNvbnN0IHByb2Zhbml0eSA9IHNwZWVjaENvbmZpZy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1Byb2Zhbml0eU9wdGlvbl0pO1xuICAgICAgICAgICAgaWYgKCFwcm9mYW5pdHkpIHtcbiAgICAgICAgICAgICAgICBzcGVlY2hDb25maWcuc2V0UHJvZmFuaXR5KFByb2Zhbml0eU9wdGlvbi5NYXNrZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2hlY2sgdGhlIG5pY2tuYW1lOiBpdCBzaG91bGQgcGFzcyB0aGlzIHJlZ2V4OiBeXFx3KyhbXFxzLV1bXFx3XFwoXFwpXSspKiRcIlxuICAgICAgICAgICAgLy8gVE9ETzogc3BlY2lmeSB0aGUgcmVnZXggcmVxdWlyZWQuIE5pY2tuYW1lcyBtdXN0IGJlIHVuaXF1ZSBvciBnZXQgdGhlIGR1cGxpY2F0ZSBuaWNrbmFtZSBlcnJvclxuICAgICAgICAgICAgLy8gVE9ETzogY2hlY2sgd2hhdCB0aGUgbWF4IGxlbmd0aCBpcyBhbmQgaWYgYSB0cnVuY2F0aW9uIGlzIHJlcXVpcmVkIG9yIGlmIHRoZSBzZXJ2aWNlIGhhbmRsZXMgaXQgd2l0aG91dCBhbiBlcnJvclxuICAgICAgICAgICAgbGV0IGhvc3ROaWNrbmFtZSA9IHNwZWVjaENvbmZpZy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuQ29udmVyc2F0aW9uVHJhbnNsYXRvcl9OYW1lXSk7XG4gICAgICAgICAgICBpZiAoaG9zdE5pY2tuYW1lID09PSB1bmRlZmluZWQgfHwgaG9zdE5pY2tuYW1lID09PSBudWxsIHx8IGhvc3ROaWNrbmFtZS5sZW5ndGggPD0gMSB8fCBob3N0Tmlja25hbWUubGVuZ3RoID4gNTApIHtcbiAgICAgICAgICAgICAgICBob3N0Tmlja25hbWUgPSBcIkhvc3RcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNwZWVjaENvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuQ29udmVyc2F0aW9uVHJhbnNsYXRvcl9OYW1lXSwgaG9zdE5pY2tuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbklkID0gaWQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2F2ZSB0aGUgc3BlZWNoIGNvbmZpZyBmb3IgZnV0dXJlIHVzYWdlXG4gICAgICAgIHRoaXMucHJpdkNvbmZpZyA9IHNwZWVjaENvbmZpZztcbiAgICAgICAgLy8gc2F2ZSB0aGUgY29uZmlnIHByb3BlcnRpZXNcbiAgICAgICAgY29uc3QgY29uZmlnSW1wbCA9IHNwZWVjaENvbmZpZztcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKGNvbmZpZ0ltcGwsIFwic3BlZWNoQ29uZmlnXCIpO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gY29uZmlnSW1wbC5wcm9wZXJ0aWVzLmNsb25lKCk7XG4gICAgICAgIHRoaXMucHJpdklzQ29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdlBhcnRpY2lwYW50cyA9IG5ldyBJbnRlcm5hbFBhcnRpY2lwYW50cygpO1xuICAgICAgICB0aGlzLnByaXZJc1JlYWR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdlRleHRNZXNzYWdlTWF4TGVuZ3RoID0gMTAwMDtcbiAgICB9XG4gICAgLy8gZ2V0IHRoZSBpbnRlcm5hbCBkYXRhIGFib3V0IGEgY29udmVyc2F0aW9uXG4gICAgZ2V0IHJvb20oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSb29tO1xuICAgIH1cbiAgICAvLyBnZXQgdGhlIHdyYXBwZXIgZm9yIGNvbm5lY3RpbmcgdG8gdGhlIHdlYnNvY2tldHNcbiAgICBnZXQgY29ubmVjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXI7IC8vIHRoaXMucHJpdkNvbm5lY3Rpb247XG4gICAgfVxuICAgIC8vIGdldCB0aGUgY29uZmlnXG4gICAgZ2V0IGNvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbmZpZztcbiAgICB9XG4gICAgLy8gZ2V0IHRoZSBjb252ZXJzYXRpb24gSWRcbiAgICBnZXQgY29udmVyc2F0aW9uSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSb29tID8gdGhpcy5wcml2Um9vbS5yb29tSWQgOiB0aGlzLnByaXZDb252ZXJzYXRpb25JZDtcbiAgICB9XG4gICAgLy8gZ2V0IHRoZSBwcm9wZXJ0aWVzXG4gICAgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzO1xuICAgIH1cbiAgICAvLyBnZXQgdGhlIHNwZWVjaCBsYW5ndWFnZVxuICAgIGdldCBzcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TGFuZ3VhZ2U7XG4gICAgfVxuICAgIGdldCBpc011dGVkQnlIb3N0KCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICByZXR1cm4gKChfYSA9IHRoaXMucHJpdlBhcnRpY2lwYW50cy5tZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlzSG9zdCkgPyBmYWxzZSA6IChfYiA9IHRoaXMucHJpdlBhcnRpY2lwYW50cy5tZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmlzTXV0ZWQ7XG4gICAgfVxuICAgIGdldCBpc0Nvbm5lY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklzQ29ubmVjdGVkICYmIHRoaXMucHJpdklzUmVhZHk7XG4gICAgfVxuICAgIGdldCBwYXJ0aWNpcGFudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvUGFydGljaXBhbnRzKHRydWUpO1xuICAgIH1cbiAgICBnZXQgbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvUGFydGljaXBhbnQodGhpcy5wcml2UGFydGljaXBhbnRzLm1lKTtcbiAgICB9XG4gICAgZ2V0IGhvc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvUGFydGljaXBhbnQodGhpcy5wcml2UGFydGljaXBhbnRzLmhvc3QpO1xuICAgIH1cbiAgICBnZXQgdHJhbnNjcmliZXJSZWNvZ25pemVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VHJhbnNjcmliZXJSZWNvZ25pemVyO1xuICAgIH1cbiAgICBnZXQgY29udmVyc2F0aW9uSW5mbygpIHtcbiAgICAgICAgY29uc3QgY29udklkID0gdGhpcy5jb252ZXJzYXRpb25JZDtcbiAgICAgICAgY29uc3QgcCA9IHRoaXMucGFydGljaXBhbnRzLm1hcCgocGFydCkgPT4gKHtcbiAgICAgICAgICAgIGlkOiBwYXJ0LmlkLFxuICAgICAgICAgICAgcHJlZmVycmVkTGFuZ3VhZ2U6IHBhcnQucHJlZmVycmVkTGFuZ3VhZ2UsXG4gICAgICAgICAgICB2b2ljZTogcGFydC52b2ljZVxuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IHByb3BzID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIENvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcudHJhbnNjcmlwdGlvbkV2ZW50S2V5cykge1xuICAgICAgICAgICAgY29uc3QgdmFsID0gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KGtleSwgXCJcIik7XG4gICAgICAgICAgICBpZiAodmFsICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgcHJvcHNba2V5XSA9IHZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmZvID0geyBpZDogY29udklkLCBwYXJ0aWNpcGFudHM6IHAsIGNvbnZlcnNhdGlvblByb3BlcnRpZXM6IHByb3BzIH07XG4gICAgICAgIHJldHVybiBpbmZvO1xuICAgIH1cbiAgICBnZXQgY2FuU2VuZCgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNDb25uZWN0ZWQgJiYgISgoX2EgPSB0aGlzLnByaXZQYXJ0aWNpcGFudHMubWUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc011dGVkKTtcbiAgICB9XG4gICAgZ2V0IGNhblNlbmRBc0hvc3QoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklzQ29ubmVjdGVkICYmICgoX2EgPSB0aGlzLnByaXZQYXJ0aWNpcGFudHMubWUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc0hvc3QpO1xuICAgIH1cbiAgICAvLyBnZXQgLyBzZXQgdGhlIHNwZWVjaCBhdXRoIHRva2VuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9tZW1iZXItb3JkZXJpbmdcbiAgICBnZXQgYXV0aG9yaXphdGlvblRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VG9rZW47XG4gICAgfVxuICAgIHNldCBhdXRob3JpemF0aW9uVG9rZW4odmFsdWUpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHZhbHVlLCBcImF1dGhvcml6YXRpb25Ub2tlblwiKTtcbiAgICAgICAgdGhpcy5wcml2VG9rZW4gPSB2YWx1ZTtcbiAgICB9XG4gICAgc2V0IGNvbnZlcnNhdGlvblRyYW5zbGF0b3IoY29udmVyc2F0aW9uVHJhbnNsYXRvcikge1xuICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yID0gY29udmVyc2F0aW9uVHJhbnNsYXRvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGNvbnZlcnNhdGlvbiBhcyBIb3N0XG4gICAgICogQHBhcmFtIGNiXG4gICAgICogQHBhcmFtIGVyclxuICAgICAqL1xuICAgIGNyZWF0ZUNvbnZlcnNhdGlvbkFzeW5jKGNiLCBlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKG5ldyBFcnJvcih0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZFN0YXJ0KSwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJpdk1hbmFnZXIuY3JlYXRlT3JKb2luKHRoaXMucHJpdlByb3BlcnRpZXMsIHVuZGVmaW5lZCwgKChyb29tKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFyb29tKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkQ29ubmVjdCksIGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJvb20gPSByb29tO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2FsbGJhY2soY2IsIGVycik7XG4gICAgICAgICAgICB9KSwgKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBlcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBhIG5ldyBjb252ZXJzYXRpb24gYXMgaG9zdC5cbiAgICAgKiBAcGFyYW0gY2JcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICovXG4gICAgc3RhcnRDb252ZXJzYXRpb25Bc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBjaGVjayBpZiB0aGVyZSBpcyBhbHJlYWR5IGEgcmVjb2duaXplclxuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplcikge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkU3RhcnQpLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlcmUgaXMgY29udmVyc2F0aW9uIGRhdGEgYXZhaWxhYmxlXG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZCh0aGlzLnByaXZSb29tLCB0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZENvbm5lY3QpO1xuICAgICAgICAgICAgLy8gY29ubmVjdCB0byB0aGUgY29udmVyc2F0aW9uIHdlYnNvY2tldFxuICAgICAgICAgICAgdGhpcy5wcml2UGFydGljaXBhbnRzLm1lSWQgPSB0aGlzLnByaXZSb29tLnBhcnRpY2lwYW50SWQ7XG4gICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyID0gQ29udmVyc2F0aW9uUmVjb2duaXplckZhY3RvcnkuZnJvbUNvbmZpZyh0aGlzLCB0aGlzLnByaXZDb25maWcpO1xuICAgICAgICAgICAgLy8gQmVjYXVzZSBDb252ZXJzYXRpb25UcmFuc2xhdG9yIG1hbnVhbGx5IHNldHMgdXAgYW5kIG1hbmFnZXMgdGhlIGNvbm5lY3Rpb24sIENvbnZlcnNhdGlvblxuICAgICAgICAgICAgLy8gaGFzIHRvIGZvcndhcmQgc2VydmljZVJlY29nbml6ZXIgY29ubmVjdGlvbiBldmVudHMgdGhhdCB1c3VhbGx5IGdldCBwYXNzZWQgYXV0b21hdGljYWxseVxuICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5jb25uZWN0ZWQgPSB0aGlzLm9uQ29ubmVjdGVkO1xuICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5kaXNjb25uZWN0ZWQgPSB0aGlzLm9uRGlzY29ubmVjdGVkO1xuICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5jYW5jZWxlZCA9IHRoaXMub25DYW5jZWxlZDtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIucGFydGljaXBhbnRVcGRhdGVDb21tYW5kUmVjZWl2ZWQgPSB0aGlzLm9uUGFydGljaXBhbnRVcGRhdGVDb21tYW5kUmVjZWl2ZWQ7XG4gICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLmxvY2tSb29tQ29tbWFuZFJlY2VpdmVkID0gdGhpcy5vbkxvY2tSb29tQ29tbWFuZFJlY2VpdmVkO1xuICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5tdXRlQWxsQ29tbWFuZFJlY2VpdmVkID0gdGhpcy5vbk11dGVBbGxDb21tYW5kUmVjZWl2ZWQ7XG4gICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLnBhcnRpY2lwYW50Sm9pbkNvbW1hbmRSZWNlaXZlZCA9IHRoaXMub25QYXJ0aWNpcGFudEpvaW5Db21tYW5kUmVjZWl2ZWQ7XG4gICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLnBhcnRpY2lwYW50TGVhdmVDb21tYW5kUmVjZWl2ZWQgPSB0aGlzLm9uUGFydGljaXBhbnRMZWF2ZUNvbW1hbmRSZWNlaXZlZDtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIudHJhbnNsYXRpb25SZWNlaXZlZCA9IHRoaXMub25UcmFuc2xhdGlvblJlY2VpdmVkO1xuICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5wYXJ0aWNpcGFudHNMaXN0UmVjZWl2ZWQgPSB0aGlzLm9uUGFydGljaXBhbnRzTGlzdFJlY2VpdmVkO1xuICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5jb252ZXJzYXRpb25FeHBpcmF0aW9uID0gdGhpcy5vbkNvbnZlcnNhdGlvbkV4cGlyYXRpb247XG4gICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLmNvbm5lY3QodGhpcy5wcml2Um9vbS50b2tlbiwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNhbGxiYWNrKGNiLCBlcnIpO1xuICAgICAgICAgICAgfSksICgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBlcnIpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBKb2luIGEgY29udmVyc2F0aW9uIGFzIGEgcGFydGljaXBhbnQuXG4gICAgICogQHBhcmFtIHsgSVBhcnRpY2lwYW50IH0gcGFydGljaXBhbnQgLSBwYXJ0aWNpcGFudCB0byBhZGRcbiAgICAgKiBAcGFyYW0gY2JcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICovXG4gICAgYWRkUGFydGljaXBhbnRBc3luYyhwYXJ0aWNpcGFudCwgY2IsIGVycikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChwYXJ0aWNpcGFudCwgXCJQYXJ0aWNpcGFudFwiKTtcbiAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyh0aGlzLmFkZFBhcnRpY2lwYW50SW1wbEFzeW5jKHBhcnRpY2lwYW50KSwgY2IsIGVycik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEpvaW4gYSBjb252ZXJzYXRpb24gYXMgYSBwYXJ0aWNpcGFudC5cbiAgICAgKiBAcGFyYW0gY29udmVyc2F0aW9uXG4gICAgICogQHBhcmFtIG5pY2tuYW1lXG4gICAgICogQHBhcmFtIGxhbmdcbiAgICAgKiBAcGFyYW0gY2JcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICovXG4gICAgam9pbkNvbnZlcnNhdGlvbkFzeW5jKGNvbnZlcnNhdGlvbklkLCBuaWNrbmFtZSwgbGFuZywgY2IsIGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVE9ET1xuICAgICAgICAgICAgLy8gaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplcikge1xuICAgICAgICAgICAgLy8gICAgIHRocm93IG5ldyBFcnJvcih0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZFN0YXJ0KTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShjb252ZXJzYXRpb25JZCwgdGhpcy5wcml2RXJyb3JzLmludmFsaWRBcmdzLnJlcGxhY2UoXCJ7YXJnfVwiLCBcImNvbnZlcnNhdGlvbklkXCIpKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShuaWNrbmFtZSwgdGhpcy5wcml2RXJyb3JzLmludmFsaWRBcmdzLnJlcGxhY2UoXCJ7YXJnfVwiLCBcIm5pY2tuYW1lXCIpKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShsYW5nLCB0aGlzLnByaXZFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIFwibGFuZ3VhZ2VcIikpO1xuICAgICAgICAgICAgLy8gam9pbiB0aGUgY29udmVyc2F0aW9uXG4gICAgICAgICAgICB0aGlzLnByaXZNYW5hZ2VyLmNyZWF0ZU9ySm9pbih0aGlzLnByaXZQcm9wZXJ0aWVzLCBjb252ZXJzYXRpb25JZCwgKChyb29tKSA9PiB7XG4gICAgICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQocm9vbSwgdGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRDb25uZWN0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSb29tID0gcm9vbTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25maWcuYXV0aG9yaXphdGlvblRva2VuID0gcm9vbS5jb2duaXRpdmVTcGVlY2hBdXRoVG9rZW47XG4gICAgICAgICAgICAgICAgLy8gam9pbiBjYWxsYmFja1xuICAgICAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKHJvb20uY29nbml0aXZlU3BlZWNoQXV0aFRva2VuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSwgKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBlcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgYSBjb252ZXJzYXRpb25cbiAgICAgKiBAcGFyYW0gY2JcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICovXG4gICAgZGVsZXRlQ29udmVyc2F0aW9uQXN5bmMoY2IsIGVycikge1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMuZGVsZXRlQ29udmVyc2F0aW9uSW1wbEFzeW5jKCksIGNiLCBlcnIpO1xuICAgIH1cbiAgICBkZWxldGVDb252ZXJzYXRpb25JbXBsQXN5bmMoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZCh0aGlzLnByaXZQcm9wZXJ0aWVzLCB0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZENvbm5lY3QpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRoaXMucHJpdlJvb20udG9rZW4sIHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkQ29ubmVjdCk7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZNYW5hZ2VyLmxlYXZlKHRoaXMucHJpdlByb3BlcnRpZXMsIHRoaXMucHJpdlJvb20udG9rZW4pO1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJc3N1ZXMgYSByZXF1ZXN0IHRvIGNsb3NlIHRoZSBjbGllbnQgd2Vic29ja2V0c1xuICAgICAqIEBwYXJhbSBjYlxuICAgICAqIEBwYXJhbSBlcnJcbiAgICAgKi9cbiAgICBlbmRDb252ZXJzYXRpb25Bc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5lbmRDb252ZXJzYXRpb25JbXBsQXN5bmMoKSwgY2IsIGVycik7XG4gICAgfVxuICAgIGVuZENvbnZlcnNhdGlvbkltcGxBc3luYygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvc2UodHJ1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElzc3VlcyBhIHJlcXVlc3QgdG8gbG9jayB0aGUgY29udmVyc2F0aW9uXG4gICAgICogQHBhcmFtIGNiXG4gICAgICogQHBhcmFtIGVyclxuICAgICAqL1xuICAgIGxvY2tDb252ZXJzYXRpb25Bc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdklzRGlzcG9zZWQpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLmlzRGlzcG9zZWQoKSk7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZCh0aGlzLnByaXZSb29tLCB0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZFNlbmQpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNhblNlbmRBc0hvc3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKG5ldyBFcnJvcih0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZENvbnZlcnNhdGlvbi5yZXBsYWNlKFwie2NvbW1hbmR9XCIsIFwibG9ja1wiKSksIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5zZW5kUmVxdWVzdCh0aGlzLmdldExvY2tDb21tYW5kKHRydWUpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNhbGxiYWNrKGNiLCBlcnIpO1xuICAgICAgICAgICAgICAgIH0pLCAoKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJc3N1ZXMgYSByZXF1ZXN0IHRvIG11dGUgdGhlIGNvbnZlcnNhdGlvblxuICAgICAqIEBwYXJhbSBjYlxuICAgICAqIEBwYXJhbSBlcnJcbiAgICAgKi9cbiAgICBtdXRlQWxsUGFydGljaXBhbnRzQXN5bmMoY2IsIGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZJc0Rpc3Bvc2VkKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5pc0Rpc3Bvc2VkKCkpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQodGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplciwgdGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRTZW5kKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpdlJvb20sIHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkU2VuZCk7XG4gICAgICAgICAgICAvLyBjaGVjayB0aGUgdXNlcidzIHBlcm1pc3Npb25zXG4gICAgICAgICAgICBpZiAoIXRoaXMuY2FuU2VuZEFzSG9zdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkQ29udmVyc2F0aW9uLnJlcGxhY2UoXCJ7Y29tbWFuZH1cIiwgXCJtdXRlXCIpKSwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLnNlbmRSZXF1ZXN0KHRoaXMuZ2V0TXV0ZUFsbENvbW1hbmQodHJ1ZSksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2FsbGJhY2soY2IsIGVycik7XG4gICAgICAgICAgICAgICAgfSksICgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgZXJyKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBlcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElzc3VlcyBhIHJlcXVlc3QgdG8gbXV0ZSBhIHBhcnRpY2lwYW50IGluIHRoZSBjb252ZXJzYXRpb25cbiAgICAgKiBAcGFyYW0gdXNlcklkXG4gICAgICogQHBhcmFtIGNiXG4gICAgICogQHBhcmFtIGVyclxuICAgICAqL1xuICAgIG11dGVQYXJ0aWNpcGFudEFzeW5jKHVzZXJJZCwgY2IsIGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZJc0Rpc3Bvc2VkKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5pc0Rpc3Bvc2VkKCkpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHVzZXJJZCwgdGhpcy5wcml2RXJyb3JzLmludmFsaWRBcmdzLnJlcGxhY2UoXCJ7YXJnfVwiLCBcInVzZXJJZFwiKSk7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZCh0aGlzLnByaXZSb29tLCB0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZFNlbmQpO1xuICAgICAgICAgICAgLy8gY2hlY2sgdGhlIGNvbm5lY3Rpb24gaXMgb3BlbiAoaG9zdCArIHBhcnRpY2lwYW50IGNhbiBwZXJmb3JtIHRoZSBtdXRlIGNvbW1hbmQpXG4gICAgICAgICAgICBpZiAoIXRoaXMuY2FuU2VuZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkU2VuZCksIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpZiBub3QgaG9zdCwgY2hlY2sgdGhlIHBhcnRpY2lwYW50IGlzIG5vdCBtdXRpbmcgYW5vdGhlciBwYXJ0aWNpcGFudFxuICAgICAgICAgICAgaWYgKCF0aGlzLm1lLmlzSG9zdCAmJiB0aGlzLm1lLmlkICE9PSB1c2VySWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKG5ldyBFcnJvcih0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZFBhcnRpY2lwYW50LnJlcGxhY2UoXCJ7Y29tbWFuZH1cIiwgXCJtdXRlXCIpKSwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNoZWNrIHRoZSB1c2VyIGV4aXN0c1xuICAgICAgICAgICAgY29uc3QgZXhpc3RzID0gdGhpcy5wcml2UGFydGljaXBhbnRzLmdldFBhcnRpY2lwYW50SW5kZXgodXNlcklkKTtcbiAgICAgICAgICAgIGlmIChleGlzdHMgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgRXJyb3IodGhpcy5wcml2RXJyb3JzLmludmFsaWRQYXJ0aWNpcGFudFJlcXVlc3QpLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplcikge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIuc2VuZFJlcXVlc3QodGhpcy5nZXRNdXRlQ29tbWFuZCh1c2VySWQsIHRydWUpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNhbGxiYWNrKGNiLCBlcnIpO1xuICAgICAgICAgICAgICAgIH0pLCAoKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJc3N1ZXMgYSByZXF1ZXN0IHRvIHJlbW92ZSBhIHBhcnRpY2lwYW50IGZyb20gdGhlIGNvbnZlcnNhdGlvblxuICAgICAqIEBwYXJhbSB1c2VySWRcbiAgICAgKiBAcGFyYW0gY2JcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICovXG4gICAgcmVtb3ZlUGFydGljaXBhbnRBc3luYyh1c2VySWQsIGNiLCBlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2SXNEaXNwb3NlZCk7XG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZUcmFuc2NyaWJlclJlY29nbml6ZXIgJiYgdXNlcklkLmhhc093blByb3BlcnR5KFwiaWRcIikpIHtcbiAgICAgICAgICAgICAgICAvLyBBc3N1bWUgdGhpcyBpcyBhIHRyYW5zY3JpcHRpb24gcGFydGljaXBhbnRcbiAgICAgICAgICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMucmVtb3ZlUGFydGljaXBhbnRJbXBsQXN5bmModXNlcklkKSwgY2IsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIuaXNEaXNwb3NlZCgpKTtcbiAgICAgICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZCh0aGlzLnByaXZSb29tLCB0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZFNlbmQpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jYW5TZW5kQXNIb3N0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkUGFydGljaXBhbnQucmVwbGFjZShcIntjb21tYW5kfVwiLCBcInJlbW92ZVwiKSksIGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBwYXJ0aWNpcGFudElkID0gXCJcIjtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHVzZXJJZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudElkID0gdXNlcklkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh1c2VySWQuaGFzT3duUHJvcGVydHkoXCJpZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHVzZXJJZDtcbiAgICAgICAgICAgICAgICAgICAgcGFydGljaXBhbnRJZCA9IHBhcnRpY2lwYW50LmlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh1c2VySWQuaGFzT3duUHJvcGVydHkoXCJ1c2VySWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IHVzZXJJZDtcbiAgICAgICAgICAgICAgICAgICAgcGFydGljaXBhbnRJZCA9IHVzZXIudXNlcklkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocGFydGljaXBhbnRJZCwgdGhpcy5wcml2RXJyb3JzLmludmFsaWRBcmdzLnJlcGxhY2UoXCJ7YXJnfVwiLCBcInVzZXJJZFwiKSk7XG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgdGhlIHBhcnRpY2lwYW50IGV4aXN0c1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5wYXJ0aWNpcGFudHMuZmluZEluZGV4KChwKSA9PiBwLmlkID09PSBwYXJ0aWNpcGFudElkKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5pbnZhbGlkUGFydGljaXBhbnRSZXF1ZXN0KSwgZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLnNlbmRSZXF1ZXN0KHRoaXMuZ2V0RWplY3RDb21tYW5kKHBhcnRpY2lwYW50SWQpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDYWxsYmFjayhjYiwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSksICgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBlcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElzc3VlcyBhIHJlcXVlc3QgdG8gdW5sb2NrIHRoZSBjb252ZXJzYXRpb25cbiAgICAgKiBAcGFyYW0gY2JcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICovXG4gICAgdW5sb2NrQ29udmVyc2F0aW9uQXN5bmMoY2IsIGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZJc0Rpc3Bvc2VkKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5pc0Rpc3Bvc2VkKCkpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQodGhpcy5wcml2Um9vbSwgdGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRTZW5kKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jYW5TZW5kQXNIb3N0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgRXJyb3IodGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRDb252ZXJzYXRpb24ucmVwbGFjZShcIntjb21tYW5kfVwiLCBcInVubG9ja1wiKSksIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5zZW5kUmVxdWVzdCh0aGlzLmdldExvY2tDb21tYW5kKGZhbHNlKSwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDYWxsYmFjayhjYiwgZXJyKTtcbiAgICAgICAgICAgICAgICB9KSwgKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBlcnIpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSXNzdWVzIGEgcmVxdWVzdCB0byB1bm11dGUgYWxsIHBhcnRpY2lwYW50cyBpbiB0aGUgY29udmVyc2F0aW9uXG4gICAgICogQHBhcmFtIGNiXG4gICAgICogQHBhcmFtIGVyclxuICAgICAqL1xuICAgIHVubXV0ZUFsbFBhcnRpY2lwYW50c0FzeW5jKGNiLCBlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2SXNEaXNwb3NlZCk7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIuaXNEaXNwb3NlZCgpKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpdlJvb20sIHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkU2VuZCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2FuU2VuZEFzSG9zdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkQ29udmVyc2F0aW9uLnJlcGxhY2UoXCJ7Y29tbWFuZH1cIiwgXCJ1bm11dGUgYWxsXCIpKSwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLnNlbmRSZXF1ZXN0KHRoaXMuZ2V0TXV0ZUFsbENvbW1hbmQoZmFsc2UpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNhbGxiYWNrKGNiLCBlcnIpO1xuICAgICAgICAgICAgICAgIH0pLCAoKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJc3N1ZXMgYSByZXF1ZXN0IHRvIHVubXV0ZSBhIHBhcnRpY2lwYW50IGluIHRoZSBjb252ZXJzYXRpb25cbiAgICAgKiBAcGFyYW0gdXNlcklkXG4gICAgICogQHBhcmFtIGNiXG4gICAgICogQHBhcmFtIGVyclxuICAgICAqL1xuICAgIHVubXV0ZVBhcnRpY2lwYW50QXN5bmModXNlcklkLCBjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdklzRGlzcG9zZWQpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLmlzRGlzcG9zZWQoKSk7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodXNlcklkLCB0aGlzLnByaXZFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIFwidXNlcklkXCIpKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpdlJvb20sIHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkU2VuZCk7XG4gICAgICAgICAgICAvLyBjaGVjayB0aGUgY29ubmVjdGlvbiBpcyBvcGVuIChob3N0ICsgcGFydGljaXBhbnQgY2FuIHBlcmZvcm0gdGhlIG11dGUgY29tbWFuZClcbiAgICAgICAgICAgIGlmICghdGhpcy5jYW5TZW5kKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgRXJyb3IodGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRTZW5kKSwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmIG5vdCBob3N0LCBjaGVjayB0aGUgcGFydGljaXBhbnQgaXMgbm90IG11dGluZyBhbm90aGVyIHBhcnRpY2lwYW50XG4gICAgICAgICAgICBpZiAoIXRoaXMubWUuaXNIb3N0ICYmIHRoaXMubWUuaWQgIT09IHVzZXJJZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkUGFydGljaXBhbnQucmVwbGFjZShcIntjb21tYW5kfVwiLCBcIm11dGVcIikpLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2hlY2sgdGhlIHVzZXIgZXhpc3RzXG4gICAgICAgICAgICBjb25zdCBleGlzdHMgPSB0aGlzLnByaXZQYXJ0aWNpcGFudHMuZ2V0UGFydGljaXBhbnRJbmRleCh1c2VySWQpO1xuICAgICAgICAgICAgaWYgKGV4aXN0cyA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKG5ldyBFcnJvcih0aGlzLnByaXZFcnJvcnMuaW52YWxpZFBhcnRpY2lwYW50UmVxdWVzdCksIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5zZW5kUmVxdWVzdCh0aGlzLmdldE11dGVDb21tYW5kKHVzZXJJZCwgZmFsc2UpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNhbGxiYWNrKGNiLCBlcnIpO1xuICAgICAgICAgICAgICAgIH0pLCAoKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgdGV4dCBtZXNzYWdlXG4gICAgICogQHBhcmFtIG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0gY2JcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICovXG4gICAgc2VuZFRleHRNZXNzYWdlQXN5bmMobWVzc2FnZSwgY2IsIGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZJc0Rpc3Bvc2VkKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5pc0Rpc3Bvc2VkKCkpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKG1lc3NhZ2UsIHRoaXMucHJpdkVycm9ycy5pbnZhbGlkQXJncy5yZXBsYWNlKFwie2FyZ31cIiwgXCJtZXNzYWdlXCIpKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpdlJvb20sIHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkU2VuZCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2FuU2VuZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkU2VuZCksIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUT0RPOiBpcyBhIG1heCBsZW5ndGggY2hlY2sgcmVxdWlyZWQ/XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5sZW5ndGggPiB0aGlzLnByaXZUZXh0TWVzc2FnZU1heExlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5pbnZhbGlkQXJncy5yZXBsYWNlKFwie2FyZ31cIiwgXCJtZXNzYWdlIGxlbmd0aFwiKSksIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5zZW5kUmVxdWVzdCh0aGlzLmdldE1lc3NhZ2VDb21tYW5kKG1lc3NhZ2UpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNhbGxiYWNrKGNiLCBlcnIpO1xuICAgICAgICAgICAgICAgIH0pLCAoKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdHJhbnNsYXRlZCB0byBsYW5ndWFnZXNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBsYW5ndWFnZXMgLSBsYW5ndWFnZXMgdG8gdHJhbnNsYXRlIHRvXG4gICAgICogQHBhcmFtIGNiXG4gICAgICogQHBhcmFtIGVyclxuICAgICAqL1xuICAgIHNldFRyYW5zbGF0ZWRMYW5ndWFnZXNBc3luYyhsYW5ndWFnZXMsIGNiLCBlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2SXNEaXNwb3NlZCk7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIuaXNEaXNwb3NlZCgpKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmQXJyYXlFbXB0eU9yV2hpdGVzcGFjZShsYW5ndWFnZXMsIHRoaXMucHJpdkVycm9ycy5pbnZhbGlkQXJncy5yZXBsYWNlKFwie2FyZ31cIiwgXCJsYW5ndWFnZXNcIikpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQodGhpcy5wcml2Um9vbSwgdGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRTZW5kKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jYW5TZW5kKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgRXJyb3IodGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRTZW5kKSwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLnNlbmRSZXF1ZXN0KHRoaXMuZ2V0U2V0VHJhbnNsYXRlVG9MYW5ndWFnZXNDb21tYW5kKGxhbmd1YWdlcyksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2FsbGJhY2soY2IsIGVycik7XG4gICAgICAgICAgICAgICAgfSksICgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgZXJyKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBlcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZSBuaWNrbmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuaWNrbmFtZSAtIG5ldyBuaWNrbmFtZSBmb3IgdGhlIHJvb21cbiAgICAgKiBAcGFyYW0gY2JcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICovXG4gICAgY2hhbmdlTmlja25hbWVBc3luYyhuaWNrbmFtZSwgY2IsIGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZJc0Rpc3Bvc2VkKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5pc0Rpc3Bvc2VkKCkpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKG5pY2tuYW1lLCB0aGlzLnByaXZFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIFwibmlja25hbWVcIikpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQodGhpcy5wcml2Um9vbSwgdGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRTZW5kKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jYW5TZW5kKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgRXJyb3IodGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRTZW5kKSwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLnNlbmRSZXF1ZXN0KHRoaXMuZ2V0Q2hhbmdlTmlja25hbWVDb21tYW5kKG5pY2tuYW1lKSwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDYWxsYmFjayhjYiwgZXJyKTtcbiAgICAgICAgICAgICAgICB9KSwgKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBlcnIpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNEaXNwb3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklzRGlzcG9zZWQ7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgaWYgKCEhdGhpcy5jb25maWcpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2Q29uZmlnID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByaXZMYW5ndWFnZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wcml2Um9vbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wcml2VG9rZW4gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucHJpdk1hbmFnZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucHJpdklzQ29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdklzUmVhZHkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2UGFydGljaXBhbnRzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25uZWN0VHJhbnNjcmliZXJSZWNvZ25pemVyKHJlY29nbml6ZXIpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlRyYW5zY3JpYmVyUmVjb2duaXplcikge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdlRyYW5zY3JpYmVyUmVjb2duaXplci5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgcmVjb2duaXplci5lbmZvcmNlQXVkaW9HYXRpbmcoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlRyYW5zY3JpYmVyUmVjb2duaXplciA9IHJlY29nbml6ZXI7XG4gICAgICAgICAgICB0aGlzLnByaXZUcmFuc2NyaWJlclJlY29nbml6ZXIuY29udmVyc2F0aW9uID0gdGhpcztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldEtlZXBBbGl2ZSgpIHtcbiAgICAgICAgY29uc3Qgbmlja25hbWUgPSAoISF0aGlzLm1lKSA/IHRoaXMubWUuZGlzcGxheU5hbWUgOiBcImRlZmF1bHRfbmlja25hbWVcIjtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGlkOiBcIjBcIixcbiAgICAgICAgICAgIG5pY2tuYW1lLFxuICAgICAgICAgICAgcGFydGljaXBhbnRJZDogdGhpcy5wcml2Um9vbS5wYXJ0aWNpcGFudElkLFxuICAgICAgICAgICAgcm9vbUlkOiB0aGlzLnByaXZSb29tLnJvb21JZCxcbiAgICAgICAgICAgIHR5cGU6IENvbnZlcnNhdGlvblRyYW5zbGF0b3JNZXNzYWdlVHlwZXMua2VlcEFsaXZlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC90eXBlZGVmICovXG4gICAgYWRkUGFydGljaXBhbnRJbXBsQXN5bmMocGFydGljaXBhbnQpIHtcbiAgICAgICAgY29uc3QgbmV3UGFydGljaXBhbnQgPSB0aGlzLnByaXZQYXJ0aWNpcGFudHMuYWRkT3JVcGRhdGVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudCk7XG4gICAgICAgIGlmIChuZXdQYXJ0aWNpcGFudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZUcmFuc2NyaWJlclJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb252ZXJzYXRpb25JbmZvID0gdGhpcy5jb252ZXJzYXRpb25JbmZvO1xuICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbkluZm8ucGFydGljaXBhbnRzID0gW3BhcnRpY2lwYW50XTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2VHJhbnNjcmliZXJSZWNvZ25pemVyLnB1c2hDb252ZXJzYXRpb25FdmVudChjb252ZXJzYXRpb25JbmZvLCBcImpvaW5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlUGFydGljaXBhbnRJbXBsQXN5bmMocGFydGljaXBhbnQpIHtcbiAgICAgICAgdGhpcy5wcml2UGFydGljaXBhbnRzLmRlbGV0ZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50LmlkKTtcbiAgICAgICAgY29uc3QgY29udmVyc2F0aW9uSW5mbyA9IHRoaXMuY29udmVyc2F0aW9uSW5mbztcbiAgICAgICAgY29udmVyc2F0aW9uSW5mby5wYXJ0aWNpcGFudHMgPSBbcGFydGljaXBhbnRdO1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VHJhbnNjcmliZXJSZWNvZ25pemVyLnB1c2hDb252ZXJzYXRpb25FdmVudChjb252ZXJzYXRpb25JbmZvLCBcImxlYXZlXCIpO1xuICAgIH1cbiAgICBjbG9zZShkaXNwb3NlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB5aWVsZCAoKF9hID0gdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNsb3NlKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvclxuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGlzcG9zZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqIEhlbHBlcnMgKi9cbiAgICBoYW5kbGVDYWxsYmFjayhjYiwgZXJyKSB7XG4gICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgICAgICBlcnIoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2IgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlRXJyb3IoZXJyb3IsIGVycikge1xuICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZWRFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgIGVycih0eXBlZEVycm9yLm5hbWUgKyBcIjogXCIgKyB0eXBlZEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogUGFydGljaXBhbnQgSGVscGVycyAqL1xuICAgIHRvUGFydGljaXBhbnRzKGluY2x1ZGVIb3N0KSB7XG4gICAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMucHJpdlBhcnRpY2lwYW50cy5wYXJ0aWNpcGFudHMubWFwKChwKSA9PiAodGhpcy50b1BhcnRpY2lwYW50KHApKSk7XG4gICAgICAgIGlmICghaW5jbHVkZUhvc3QpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJ0aWNpcGFudHMuZmlsdGVyKChwKSA9PiBwLmlzSG9zdCA9PT0gZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnRpY2lwYW50cztcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1BhcnRpY2lwYW50KHApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJ0aWNpcGFudChwLmlkLCBwLmF2YXRhciwgcC5kaXNwbGF5TmFtZSwgcC5pc0hvc3QsIHAuaXNNdXRlZCwgcC5pc1VzaW5nVHRzLCBwLnByZWZlcnJlZExhbmd1YWdlLCBwLnZvaWNlKTtcbiAgICB9XG4gICAgZ2V0TXV0ZUFsbENvbW1hbmQoaXNNdXRlZCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodGhpcy5wcml2Um9vbS5yb29tSWQsIFwiY29udmVyc2F0aW9uSWRcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0aGlzLnByaXZSb29tLnBhcnRpY2lwYW50SWQsIFwicGFydGljaXBhbnRJZFwiKTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGNvbW1hbmQ6IENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMuc2V0TXV0ZUFsbCxcbiAgICAgICAgICAgIHBhcnRpY2lwYW50SWQ6IHRoaXMucHJpdlJvb20ucGFydGljaXBhbnRJZCxcbiAgICAgICAgICAgIHJvb21pZDogdGhpcy5wcml2Um9vbS5yb29tSWQsXG4gICAgICAgICAgICB0eXBlOiBDb252ZXJzYXRpb25UcmFuc2xhdG9yTWVzc2FnZVR5cGVzLnBhcnRpY2lwYW50Q29tbWFuZCxcbiAgICAgICAgICAgIHZhbHVlOiBpc011dGVkXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRNdXRlQ29tbWFuZChwYXJ0aWNpcGFudElkLCBpc011dGVkKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0aGlzLnByaXZSb29tLnJvb21JZCwgXCJjb252ZXJzYXRpb25JZFwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHBhcnRpY2lwYW50SWQsIFwicGFydGljaXBhbnRJZFwiKTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGNvbW1hbmQ6IENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMuc2V0TXV0ZSxcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYmplY3Qtc2hvcnRoYW5kXG4gICAgICAgICAgICBwYXJ0aWNpcGFudElkOiBwYXJ0aWNpcGFudElkLFxuICAgICAgICAgICAgcm9vbWlkOiB0aGlzLnByaXZSb29tLnJvb21JZCxcbiAgICAgICAgICAgIHR5cGU6IENvbnZlcnNhdGlvblRyYW5zbGF0b3JNZXNzYWdlVHlwZXMucGFydGljaXBhbnRDb21tYW5kLFxuICAgICAgICAgICAgdmFsdWU6IGlzTXV0ZWRcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldExvY2tDb21tYW5kKGlzTG9ja2VkKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0aGlzLnByaXZSb29tLnJvb21JZCwgXCJjb252ZXJzYXRpb25JZFwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRoaXMucHJpdlJvb20ucGFydGljaXBhbnRJZCwgXCJwYXJ0aWNpcGFudElkXCIpO1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgY29tbWFuZDogQ29udmVyc2F0aW9uVHJhbnNsYXRvckNvbW1hbmRUeXBlcy5zZXRMb2NrU3RhdGUsXG4gICAgICAgICAgICBwYXJ0aWNpcGFudElkOiB0aGlzLnByaXZSb29tLnBhcnRpY2lwYW50SWQsXG4gICAgICAgICAgICByb29taWQ6IHRoaXMucHJpdlJvb20ucm9vbUlkLFxuICAgICAgICAgICAgdHlwZTogQ29udmVyc2F0aW9uVHJhbnNsYXRvck1lc3NhZ2VUeXBlcy5wYXJ0aWNpcGFudENvbW1hbmQsXG4gICAgICAgICAgICB2YWx1ZTogaXNMb2NrZWRcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldEVqZWN0Q29tbWFuZChwYXJ0aWNpcGFudElkKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0aGlzLnByaXZSb29tLnJvb21JZCwgXCJjb252ZXJzYXRpb25JZFwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHBhcnRpY2lwYW50SWQsIFwicGFydGljaXBhbnRJZFwiKTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGNvbW1hbmQ6IENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMuZWplY3RQYXJ0aWNpcGFudCxcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYmplY3Qtc2hvcnRoYW5kXG4gICAgICAgICAgICBwYXJ0aWNpcGFudElkOiBwYXJ0aWNpcGFudElkLFxuICAgICAgICAgICAgcm9vbWlkOiB0aGlzLnByaXZSb29tLnJvb21JZCxcbiAgICAgICAgICAgIHR5cGU6IENvbnZlcnNhdGlvblRyYW5zbGF0b3JNZXNzYWdlVHlwZXMucGFydGljaXBhbnRDb21tYW5kLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0U2V0VHJhbnNsYXRlVG9MYW5ndWFnZXNDb21tYW5kKGxhbmd1YWdlcykge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodGhpcy5wcml2Um9vbS5yb29tSWQsIFwiY29udmVyc2F0aW9uSWRcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0aGlzLnByaXZSb29tLnBhcnRpY2lwYW50SWQsIFwicGFydGljaXBhbnRJZFwiKTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGNvbW1hbmQ6IENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMuc2V0VHJhbnNsYXRlVG9MYW5ndWFnZXMsXG4gICAgICAgICAgICBwYXJ0aWNpcGFudElkOiB0aGlzLnByaXZSb29tLnBhcnRpY2lwYW50SWQsXG4gICAgICAgICAgICByb29taWQ6IHRoaXMucHJpdlJvb20ucm9vbUlkLFxuICAgICAgICAgICAgdHlwZTogQ29udmVyc2F0aW9uVHJhbnNsYXRvck1lc3NhZ2VUeXBlcy5wYXJ0aWNpcGFudENvbW1hbmQsXG4gICAgICAgICAgICB2YWx1ZTogbGFuZ3VhZ2VzXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRDaGFuZ2VOaWNrbmFtZUNvbW1hbmQobmlja25hbWUpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRoaXMucHJpdlJvb20ucm9vbUlkLCBcImNvbnZlcnNhdGlvbklkXCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2Uobmlja25hbWUsIFwibmlja25hbWVcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0aGlzLnByaXZSb29tLnBhcnRpY2lwYW50SWQsIFwicGFydGljaXBhbnRJZFwiKTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGNvbW1hbmQ6IENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMuY2hhbmdlTmlja25hbWUsXG4gICAgICAgICAgICBuaWNrbmFtZSxcbiAgICAgICAgICAgIHBhcnRpY2lwYW50SWQ6IHRoaXMucHJpdlJvb20ucGFydGljaXBhbnRJZCxcbiAgICAgICAgICAgIHJvb21pZDogdGhpcy5wcml2Um9vbS5yb29tSWQsXG4gICAgICAgICAgICB0eXBlOiBDb252ZXJzYXRpb25UcmFuc2xhdG9yTWVzc2FnZVR5cGVzLnBhcnRpY2lwYW50Q29tbWFuZCxcbiAgICAgICAgICAgIHZhbHVlOiBuaWNrbmFtZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0TWVzc2FnZUNvbW1hbmQobWVzc2FnZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodGhpcy5wcml2Um9vbS5yb29tSWQsIFwiY29udmVyc2F0aW9uSWRcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0aGlzLnByaXZSb29tLnBhcnRpY2lwYW50SWQsIFwicGFydGljaXBhbnRJZFwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKG1lc3NhZ2UsIFwibWVzc2FnZVwiKTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHBhcnRpY2lwYW50SWQ6IHRoaXMucHJpdlJvb20ucGFydGljaXBhbnRJZCxcbiAgICAgICAgICAgIHJvb21JZDogdGhpcy5wcml2Um9vbS5yb29tSWQsXG4gICAgICAgICAgICB0ZXh0OiBtZXNzYWdlLFxuICAgICAgICAgICAgdHlwZTogQ29udmVyc2F0aW9uVHJhbnNsYXRvck1lc3NhZ2VUeXBlcy5pbnN0YW50TWVzc2FnZVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvbi5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvbkNvbW1vbiB7XG4gICAgY29uc3RydWN0b3IoYXVkaW9Db25maWcpIHtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Db25maWcgPSBhdWRpb0NvbmZpZztcbiAgICB9XG4gICAgaGFuZGxlQ2FsbGJhY2soY2IsIGVycikge1xuICAgICAgICBpZiAoISFjYikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNiID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUVycm9yKGVycm9yLCBlcnIpIHtcbiAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVkRXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICBlcnIodHlwZWRFcnJvci5uYW1lICsgXCI6IFwiICsgdHlwZWRFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvbkNvbW1vbi5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLy8gTXVsdGktZGV2aWNlIENvbnZlcnNhdGlvbiBpcyBhIFByZXZpZXcgZmVhdHVyZS5cbmltcG9ydCB7IFNlc3Npb25FdmVudEFyZ3MgfSBmcm9tIFwiLi4vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvbkV4cGlyYXRpb25FdmVudEFyZ3MgZXh0ZW5kcyBTZXNzaW9uRXZlbnRBcmdzIHtcbiAgICBjb25zdHJ1Y3RvcihleHBpcmF0aW9uVGltZSwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHN1cGVyKHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdkV4cGlyYXRpb25UaW1lID0gZXhwaXJhdGlvblRpbWU7XG4gICAgfVxuICAgIC8qKiBIb3cgbXVjaCBsb25nZXIgdW50aWwgdGhlIGNvbnZlcnNhdGlvbiBleHBpcmVzIChpbiBtaW51dGVzKS4gKi9cbiAgICBnZXQgZXhwaXJhdGlvblRpbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFeHBpcmF0aW9uVGltZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvbkV4cGlyYXRpb25FdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8vIE11bHRpLWRldmljZSBDb252ZXJzYXRpb24gaXMgYSBQcmV2aWV3IGZlYXR1cmUuXG5pbXBvcnQgeyBTZXNzaW9uRXZlbnRBcmdzIH0gZnJvbSBcIi4uL0V4cG9ydHNcIjtcbmV4cG9ydCBjbGFzcyBDb252ZXJzYXRpb25QYXJ0aWNpcGFudHNDaGFuZ2VkRXZlbnRBcmdzIGV4dGVuZHMgU2Vzc2lvbkV2ZW50QXJncyB7XG4gICAgY29uc3RydWN0b3IocmVhc29uLCBwYXJ0aWNpcGFudHMsIHNlc3Npb25JZCkge1xuICAgICAgICBzdXBlcihzZXNzaW9uSWQpO1xuICAgICAgICB0aGlzLnByaXZSZWFzb24gPSByZWFzb247XG4gICAgICAgIHRoaXMucHJpdlBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzO1xuICAgIH1cbiAgICBnZXQgcmVhc29uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVhc29uO1xuICAgIH1cbiAgICBnZXQgcGFydGljaXBhbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFydGljaXBhbnQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db252ZXJzYXRpb25QYXJ0aWNpcGFudHNDaGFuZ2VkRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IFRyYW5zY3JpYmVyUmVjb2duaXplciB9IGZyb20gXCIuLi8uLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3MgfSBmcm9tIFwiLi4vLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb24sIFByb3BlcnR5Q29sbGVjdGlvbiwgUHJvcGVydHlJZCB9IGZyb20gXCIuLi9FeHBvcnRzXCI7XG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uVHJhbnNjcmliZXIge1xuICAgIC8qKlxuICAgICAqIENvbnZlcnNhdGlvblRyYW5zY3JpYmVyIGNvbnN0cnVjdG9yLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7QXVkaW9Db25maWd9IGF1ZGlvQ29uZmlnIC0gQW4gb3B0aW9uYWwgYXVkaW8gY29uZmlndXJhdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIHJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhdWRpb0NvbmZpZykge1xuICAgICAgICB0aGlzLnByaXZBdWRpb0NvbmZpZyA9IGF1ZGlvQ29uZmlnO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByaXZEaXNwb3NlZFJlY29nbml6ZXIgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc3Bva2VuIGxhbmd1YWdlIG9mIHJlY29nbml0aW9uLlxuICAgICAqIEBtZW1iZXIgQ29udmVyc2F0aW9uVHJhbnNjcmliZXIucHJvdG90eXBlLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIHNwb2tlbiBsYW5ndWFnZSBvZiByZWNvZ25pdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSgpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZFJlY29nbml6ZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbGxlY3Rpb24gb2YgcHJvcGVydGllcyBhbmQgdGhlaXIgdmFsdWVzIGRlZmluZWQgZm9yIHRoaXMgQ29udmVyc2F0aW9uVHJhbnNjcmliZXIuXG4gICAgICogQG1lbWJlciBDb252ZXJzYXRpb25UcmFuc2NyaWJlci5wcm90b3R5cGUucHJvcGVydGllc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7UHJvcGVydHlDb2xsZWN0aW9ufSBUaGUgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMgZGVmaW5lZCBmb3IgdGhpcyBDb252ZXJzYXRpb25UcmFuc2NyaWJlci5cbiAgICAgKi9cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBJbnRlcm5hbFxuICAgICAqIEludGVybmFsIGRhdGEgbWVtYmVyIHRvIHN1cHBvcnQgZnJvbVJlY29nbml6ZXIqIHBhdHRlcm4gbWV0aG9kcyBvbiBvdGhlciBjbGFzc2VzLlxuICAgICAqIERvIG5vdCB1c2UgZXh0ZXJuYWxseSwgb2JqZWN0IHJldHVybmVkIHdpbGwgY2hhbmdlIHdpdGhvdXQgd2FybmluZyBvciBub3RpY2UuXG4gICAgICovXG4gICAgZ2V0IGludGVybmFsRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlY29nbml6ZXIuaW50ZXJuYWxEYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBARGVwcmVjYXRlZFxuICAgICAqIEBPYnNvbGV0ZVxuICAgICAqIFBsZWFzZSB1c2UgdGhlIENvbm5lY3Rpb24uZnJvbVJlY29nbml6ZXIgcGF0dGVybiB0byBvYnRhaW4gYSBjb25uZWN0aW9uIG9iamVjdFxuICAgICAqL1xuICAgIGdldCBjb25uZWN0aW9uKCkge1xuICAgICAgICByZXR1cm4gQ29ubmVjdGlvbi5mcm9tUmVjb2duaXplcih0aGlzLnByaXZSZWNvZ25pemVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiB1c2VkIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIHNlcnZpY2UuXG4gICAgICogQG1lbWJlciBDb252ZXJzYXRpb25UcmFuc2NyaWJlci5wcm90b3R5cGUuYXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICovXG4gICAgZ2V0IGF1dGhvcml6YXRpb25Ub2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cy9TZXRzIHRoZSBhdXRob3JpemF0aW9uIHRva2VuIHVzZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgc2VydmljZS5cbiAgICAgKiBAbWVtYmVyIENvbnZlcnNhdGlvblRyYW5zY3JpYmVyLnByb3RvdHlwZS5hdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gQXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBzZXQgYXV0aG9yaXphdGlvblRva2VuKHRva2VuKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0b2tlbiwgXCJ0b2tlblwiKTtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4sIHRva2VuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDb252ZXJzYXRpb259IGNvbnZlcnNhdGlvbiAtIGNvbnZlcnNhdGlvbiB0byBiZSByZWNvZ25pemVkXG4gICAgICovXG4gICAgam9pbkNvbnZlcnNhdGlvbkFzeW5jKGNvbnZlcnNhdGlvbiwgY2IsIGVycikge1xuICAgICAgICBjb25zdCBjb252ZXJzYXRpb25JbXBsID0gY29udmVyc2F0aW9uO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChjb252ZXJzYXRpb25JbXBsLCBcIkNvbnZlcnNhdGlvblwiKTtcbiAgICAgICAgLy8gcmVmIHRoZSBjb252ZXJzYXRpb24gb2JqZWN0XG4gICAgICAgIC8vIGNyZWF0ZSByZWNvZ25pemVyIGFuZCBzdWJzY3JpYmUgdG8gcmVjb2duaXplciBldmVudHNcbiAgICAgICAgdGhpcy5wcml2UmVjb2duaXplciA9IG5ldyBUcmFuc2NyaWJlclJlY29nbml6ZXIoY29udmVyc2F0aW9uLmNvbmZpZywgdGhpcy5wcml2QXVkaW9Db25maWcpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZCh0aGlzLnByaXZSZWNvZ25pemVyLCBcIlJlY29nbml6ZXJcIik7XG4gICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXIuY29ubmVjdENhbGxiYWNrcyh0aGlzKTtcbiAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyhjb252ZXJzYXRpb25JbXBsLmNvbm5lY3RUcmFuc2NyaWJlclJlY29nbml6ZXIodGhpcy5wcml2UmVjb2duaXplciksIGNiLCBlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgY29udmVyc2F0aW9uIHRyYW5zY3JpcHRpb24sIHVudGlsIHN0b3BUcmFuc2NyaWJpbmdBc3luYygpIGlzIGNhbGxlZC5cbiAgICAgKiBVc2VyIG11c3Qgc3Vic2NyaWJlIHRvIGV2ZW50cyB0byByZWNlaXZlIHRyYW5zY3JpcHRpb24gcmVzdWx0cy5cbiAgICAgKiBAbWVtYmVyIENvbnZlcnNhdGlvblRyYW5zY3JpYmVyLnByb3RvdHlwZS5zdGFydFRyYW5zY3JpYmluZ0FzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBjYiAtIENhbGxiYWNrIGludm9rZWQgb25jZSB0aGUgdHJhbnNjcmlwdGlvbiBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIHN0YXJ0VHJhbnNjcmliaW5nQXN5bmMoY2IsIGVycikge1xuICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyLnN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmMoY2IsIGVycik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBjb252ZXJzYXRpb24gdHJhbnNjcmlwdGlvbiwgdW50aWwgc3RvcFRyYW5zY3JpYmluZ0FzeW5jKCkgaXMgY2FsbGVkLlxuICAgICAqIFVzZXIgbXVzdCBzdWJzY3JpYmUgdG8gZXZlbnRzIHRvIHJlY2VpdmUgdHJhbnNjcmlwdGlvbiByZXN1bHRzLlxuICAgICAqIEBtZW1iZXIgQ29udmVyc2F0aW9uVHJhbnNjcmliZXIucHJvdG90eXBlLnN0b3BUcmFuc2NyaWJpbmdBc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayBpbnZva2VkIG9uY2UgdGhlIHRyYW5zY3JpcHRpb24gaGFzIHN0YXJ0ZWQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBzdG9wVHJhbnNjcmliaW5nQXN5bmMoY2IsIGVycikge1xuICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyLnN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyhjYiwgZXJyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGVhdmUgdGhlIGN1cnJlbnQgY29udmVyc2F0aW9uLiBBZnRlciB0aGlzIGlzIGNhbGxlZCwgeW91IHdpbGwgbm8gbG9uZ2VyIHJlY2VpdmUgYW55IGV2ZW50cy5cbiAgICAgKi9cbiAgICBsZWF2ZUNvbnZlcnNhdGlvbkFzeW5jKGNiLCBlcnIpIHtcbiAgICAgICAgdGhpcy5wcml2UmVjb2duaXplci5kaXNjb25uZWN0Q2FsbGJhY2tzKCk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKCgoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7IHJldHVybjsgfSkpKCksIGNiLCBlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBjbG9zZXMgYWxsIGV4dGVybmFsIHJlc291cmNlcyBoZWxkIGJ5IGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQG1lbWJlciBDb252ZXJzYXRpb25UcmFuc2NyaWJlci5wcm90b3R5cGUuY2xvc2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY2xvc2UoY2IsIGVycm9yQ2IpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZFJlY29nbml6ZXIpO1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMuZGlzcG9zZSh0cnVlKSwgY2IsIGVycm9yQ2IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlcyBhbnkgcmVzb3VyY2VzIGhlbGQgYnkgdGhlIG9iamVjdC5cbiAgICAgKiBAbWVtYmVyIENvbnZlcnNhdGlvblRyYW5zY3JpYmVyLnByb3RvdHlwZS5kaXNwb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGlzcG9zaW5nIC0gdHJ1ZSBpZiBkaXNwb3NpbmcgdGhlIG9iamVjdC5cbiAgICAgKi9cbiAgICBkaXNwb3NlKGRpc3Bvc2luZykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkRpc3Bvc2VkUmVjb2duaXplcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZSZWNvZ25pemVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjb2duaXplciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaXNwb3NpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZEaXNwb3NlZFJlY29nbml6ZXIgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvblRyYW5zY3JpYmVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vLyBNdWx0aS1kZXZpY2UgQ29udmVyc2F0aW9uIGlzIGEgUHJldmlldyBmZWF0dXJlLlxuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXZlbnRBcmdzQmFzZSB9IGZyb20gXCIuLi9DYW5jZWxsYXRpb25FdmVudEFyZ3NCYXNlXCI7XG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uVHJhbnNsYXRpb25DYW5jZWxlZEV2ZW50QXJncyBleHRlbmRzIENhbmNlbGxhdGlvbkV2ZW50QXJnc0Jhc2Uge1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db252ZXJzYXRpb25UcmFuc2xhdGlvbkNhbmNlbGVkRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vLyBNdWx0aS1kZXZpY2UgQ29udmVyc2F0aW9uIGlzIGEgUHJldmlldyBmZWF0dXJlLlxuaW1wb3J0IHsgUmVjb2duaXRpb25FdmVudEFyZ3MgfSBmcm9tIFwiLi4vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvblRyYW5zbGF0aW9uRXZlbnRBcmdzIGV4dGVuZHMgUmVjb2duaXRpb25FdmVudEFyZ3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtDb252ZXJzYXRpb25UcmFuc2xhdGlvblJlc3VsdH0gcmVzdWx0IC0gVGhlIHRyYW5zbGF0aW9uIHJlY29nbml0aW9uIHJlc3VsdC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2Vzc2lvbklkIC0gVGhlIHNlc3Npb24gaWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVzdWx0LCBvZmZzZXQsIHNlc3Npb25JZCkge1xuICAgICAgICBzdXBlcihvZmZzZXQsIHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdlJlc3VsdCA9IHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICogQHJldHVybnMge0NvbnZlcnNhdGlvblRyYW5zbGF0aW9uUmVzdWx0fSB0aGUgcmVjb2duaXRpb24gcmVzdWx0LlxuICAgICAqL1xuICAgIGdldCByZXN1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN1bHQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db252ZXJzYXRpb25UcmFuc2xhdGlvbkV2ZW50QXJncy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLy8gTXVsdGktZGV2aWNlIENvbnZlcnNhdGlvbiBpcyBhIFByZXZpZXcgZmVhdHVyZS5cbmltcG9ydCB7IFRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQgfSBmcm9tIFwiLi4vVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdFwiO1xuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvblRyYW5zbGF0aW9uUmVzdWx0IGV4dGVuZHMgVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdCB7XG4gICAgY29uc3RydWN0b3IocGFydGljaXBhbnRJZCwgdHJhbnNsYXRpb25zLCBvcmlnaW5hbExhbmd1YWdlLCByZXN1bHRJZCwgcmVhc29uLCB0ZXh0LCBkdXJhdGlvbiwgb2Zmc2V0LCBlcnJvckRldGFpbHMsIGpzb24sIHByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIodHJhbnNsYXRpb25zLCByZXN1bHRJZCwgcmVhc29uLCB0ZXh0LCBkdXJhdGlvbiwgb2Zmc2V0LCBlcnJvckRldGFpbHMsIGpzb24sIHByb3BlcnRpZXMpO1xuICAgICAgICB0aGlzLnByaXZJZCA9IHBhcnRpY2lwYW50SWQ7XG4gICAgICAgIHRoaXMucHJpdk9yaWdMYW5nID0gb3JpZ2luYWxMYW5ndWFnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgcGFydGljaXBhbnQgdGhpcyByZXN1bHQgaXMgZm9yLlxuICAgICAqL1xuICAgIGdldCBwYXJ0aWNpcGFudElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBvcmlnaW5hbCBsYW5ndWFnZSB0aGlzIHJlc3VsdCB3YXMgaW4uXG4gICAgICovXG4gICAgZ2V0IG9yaWdpbmFsTGFuZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdk9yaWdMYW5nO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29udmVyc2F0aW9uVHJhbnNsYXRpb25SZXN1bHQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8vIE11bHRpLWRldmljZSBDb252ZXJzYXRpb24gaXMgYSBQcmV2aWV3IGZlYXR1cmUuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5pbXBvcnQgeyBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLCBTZXJ2aWNlUHJvcGVydGllc1Byb3BlcnR5TmFtZSwgfSBmcm9tIFwiLi4vLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25UcmFuc2xhdG9yQ29ubmVjdGlvbkZhY3RvcnkgfSBmcm9tIFwiLi4vLi4vY29tbW9uLnNwZWVjaC9UcmFuc2NyaXB0aW9uL0NvbnZlcnNhdGlvblRyYW5zbGF0b3JDb25uZWN0aW9uRmFjdG9yeVwiO1xuaW1wb3J0IHsgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyB9IGZyb20gXCIuLi8uLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4uL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgQXVkaW9Db25maWcsIENhbmNlbGxhdGlvbkVycm9yQ29kZSwgQ2FuY2VsbGF0aW9uUmVhc29uLCBQcm9mYW5pdHlPcHRpb24sIFByb3BlcnR5Q29sbGVjdGlvbiwgUHJvcGVydHlJZCwgU2VydmljZVByb3BlcnR5Q2hhbm5lbCwgU3BlZWNoVHJhbnNsYXRpb25Db25maWcsIFRyYW5zbGF0aW9uUmVjb2duaXplciB9IGZyb20gXCIuLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25JbXBsIH0gZnJvbSBcIi4vQ29udmVyc2F0aW9uXCI7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25Db21tb24sIENvbnZlcnNhdGlvblRyYW5zbGF0aW9uQ2FuY2VsZWRFdmVudEFyZ3MgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG5leHBvcnQgdmFyIFNwZWVjaFN0YXRlO1xuKGZ1bmN0aW9uIChTcGVlY2hTdGF0ZSkge1xuICAgIFNwZWVjaFN0YXRlW1NwZWVjaFN0YXRlW1wiSW5hY3RpdmVcIl0gPSAwXSA9IFwiSW5hY3RpdmVcIjtcbiAgICBTcGVlY2hTdGF0ZVtTcGVlY2hTdGF0ZVtcIkNvbm5lY3RpbmdcIl0gPSAxXSA9IFwiQ29ubmVjdGluZ1wiO1xuICAgIFNwZWVjaFN0YXRlW1NwZWVjaFN0YXRlW1wiQ29ubmVjdGVkXCJdID0gMl0gPSBcIkNvbm5lY3RlZFwiO1xufSkoU3BlZWNoU3RhdGUgfHwgKFNwZWVjaFN0YXRlID0ge30pKTtcbi8vIGNoaWxkIGNsYXNzIG9mIFRyYW5zbGF0aW9uUmVjb2duaXplciBtZWFudCBvbmx5IGZvciB1c2Ugd2l0aCBDb252ZXJzYXRpb25UcmFuc2xhdG9yXG5jbGFzcyBDb252ZXJzYXRpb25UcmFuc2xhdGlvblJlY29nbml6ZXIgZXh0ZW5kcyBUcmFuc2xhdGlvblJlY29nbml6ZXIge1xuICAgIGNvbnN0cnVjdG9yKHNwZWVjaENvbmZpZywgYXVkaW9Db25maWcsIHRyYW5zbGF0b3IsIGNvbnZHZXR0ZXIpIHtcbiAgICAgICAgc3VwZXIoc3BlZWNoQ29uZmlnLCBhdWRpb0NvbmZpZywgbmV3IENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb25uZWN0aW9uRmFjdG9yeShjb252R2V0dGVyKSk7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFN0YXRlID0gU3BlZWNoU3RhdGUuSW5hY3RpdmU7XG4gICAgICAgIGlmICghIXRyYW5zbGF0b3IpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlRyYW5zbGF0b3IgPSB0cmFuc2xhdG9yO1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uU3RhcnRlZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hTdGF0ZSA9IFNwZWVjaFN0YXRlLkNvbm5lY3RlZDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnNlc3Npb25TdG9wcGVkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFN0YXRlID0gU3BlZWNoU3RhdGUuSW5hY3RpdmU7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5yZWNvZ25pemluZyA9ICh0ciwgZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlRyYW5zbGF0b3IucmVjb2duaXppbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRvci5yZWNvZ25pemluZyh0aGlzLnByaXZUcmFuc2xhdG9yLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1taXN1c2VkLXByb21pc2VzXG4gICAgICAgICAgICB0aGlzLnJlY29nbml6ZWQgPSAodHIsIGUpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYW4gZXJyb3IgY29ubmVjdGluZyB0byB0aGUgY29udmVyc2F0aW9uIHNlcnZpY2UgZnJvbSB0aGUgc3BlZWNoIHNlcnZpY2UgdGhlIGVycm9yIHdpbGwgYmUgcmV0dXJuZWQgaW4gdGhlIEVycm9yRGV0YWlscyBmaWVsZC5cbiAgICAgICAgICAgICAgICBpZiAoKF9hID0gZS5yZXN1bHQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lcnJvckRldGFpbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5jYW5jZWxTcGVlY2goKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogZm9ybWF0IHRoZSBlcnJvciBtZXNzYWdlIGNvbnRhaW5lZCBpbiAnZXJyb3JEZXRhaWxzJ1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpcmVDYW5jZWxFdmVudChlLnJlc3VsdC5lcnJvckRldGFpbHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2VHJhbnNsYXRvci5yZWNvZ25pemVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdG9yLnJlY29nbml6ZWQodGhpcy5wcml2VHJhbnNsYXRvciwgZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW1pc3VzZWQtcHJvbWlzZXNcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsZWQgPSAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlNwZWVjaFN0YXRlICE9PSBTcGVlY2hTdGF0ZS5JbmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5jYW5jZWxTcGVlY2goKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFN0YXRlID0gU3BlZWNoU3RhdGUuSW5hY3RpdmU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgc3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hTdGF0ZTtcbiAgICB9XG4gICAgc2V0IHN0YXRlKG5ld1N0YXRlKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFN0YXRlID0gbmV3U3RhdGU7XG4gICAgfVxuICAgIG9uQ29ubmVjdGlvbigpIHtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoU3RhdGUgPSBTcGVlY2hTdGF0ZS5Db25uZWN0ZWQ7XG4gICAgfVxuICAgIG9uRGlzY29ubmVjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFN0YXRlID0gU3BlZWNoU3RhdGUuSW5hY3RpdmU7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLmNhbmNlbFNwZWVjaCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmlyZSBhIGNhbmNlbCBldmVudFxuICAgICAqIEBwYXJhbSBlcnJvclxuICAgICAqL1xuICAgIGZpcmVDYW5jZWxFdmVudChlcnJvcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2VHJhbnNsYXRvci5jYW5jZWxlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbmNlbEV2ZW50ID0gbmV3IENvbnZlcnNhdGlvblRyYW5zbGF0aW9uQ2FuY2VsZWRFdmVudEFyZ3MoQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBlcnJvciwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLlJ1bnRpbWVFcnJvcik7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRvci5jYW5jZWxlZCh0aGlzLnByaXZUcmFuc2xhdG9yLCBjYW5jZWxFdmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vXG4gICAgICAgIH1cbiAgICB9XG4gICAgY2FuY2VsU3BlZWNoKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKCk7XG4gICAgICAgICAgICAgICAgeWllbGQgKChfYSA9IHRoaXMucHJpdlJlY28pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kaXNjb25uZWN0KCkpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFN0YXRlID0gU3BlZWNoU3RhdGUuSW5hY3RpdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIGlnbm9yZSB0aGUgZXJyb3JcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBKb2luLCBsZWF2ZSBvciBjb25uZWN0IHRvIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uVHJhbnNsYXRvciBleHRlbmRzIENvbnZlcnNhdGlvbkNvbW1vbiB7XG4gICAgY29uc3RydWN0b3IoYXVkaW9Db25maWcpIHtcbiAgICAgICAgc3VwZXIoYXVkaW9Db25maWcpO1xuICAgICAgICB0aGlzLnByaXZFcnJvcnMgPSBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLnJlc3RFcnJvcnM7XG4gICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2SXNTcGVha2luZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZQbGFjZWhvbGRlcktleSA9IFwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDVcIjtcbiAgICAgICAgdGhpcy5wcml2UGxhY2Vob2xkZXJSZWdpb24gPSBcIndlc3R1c1wiO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgIH1cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxuICAgIGdldCBzcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZTtcbiAgICB9XG4gICAgZ2V0IHBhcnRpY2lwYW50cygpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5wcml2Q29udmVyc2F0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucGFydGljaXBhbnRzO1xuICAgIH1cbiAgICBnZXQgY2FuU3BlYWsoKSB7XG4gICAgICAgIC8vIGlzIHRoZXJlIGEgQ29udmVyc2F0aW9uIHdlYnNvY2tldCBhdmFpbGFibGUgYW5kIGhhcyB0aGUgUmVjb2duaXplciBiZWVuIHNldCB1cFxuICAgICAgICBpZiAoIXRoaXMucHJpdkNvbnZlcnNhdGlvbi5pc0Nvbm5lY3RlZCB8fCAhdGhpcy5wcml2Q1RSZWNvZ25pemVyKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaXMgdGhlIHVzZXIgYWxyZWFkeSBzcGVha2luZ1xuICAgICAgICBpZiAodGhpcy5wcml2SXNTcGVha2luZyB8fCB0aGlzLnByaXZDVFJlY29nbml6ZXIuc3RhdGUgPT09IFNwZWVjaFN0YXRlLkNvbm5lY3RlZCB8fCB0aGlzLnByaXZDVFJlY29nbml6ZXIuc3RhdGUgPT09IFNwZWVjaFN0YXRlLkNvbm5lY3RpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpcyB0aGUgdXNlciBtdXRlZFxuICAgICAgICBpZiAodGhpcy5wcml2Q29udmVyc2F0aW9uLmlzTXV0ZWRCeUhvc3QpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgc2V0U2VydmljZVByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRQcm9wZXJ0aWVzID0gSlNPTi5wYXJzZSh0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFNlcnZpY2VQcm9wZXJ0aWVzUHJvcGVydHlOYW1lLCBcInt9XCIpKTtcbiAgICAgICAgY3VycmVudFByb3BlcnRpZXNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShTZXJ2aWNlUHJvcGVydGllc1Byb3BlcnR5TmFtZSwgSlNPTi5zdHJpbmdpZnkoY3VycmVudFByb3BlcnRpZXMpKTtcbiAgICB9XG4gICAgam9pbkNvbnZlcnNhdGlvbkFzeW5jKGNvbnZlcnNhdGlvbiwgbmlja25hbWUsIHBhcmFtMSwgcGFyYW0yLCBwYXJhbTMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udmVyc2F0aW9uID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoY29udmVyc2F0aW9uLCB0aGlzLnByaXZFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIFwiY29udmVyc2F0aW9uIGlkXCIpKTtcbiAgICAgICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2Uobmlja25hbWUsIHRoaXMucHJpdkVycm9ycy5pbnZhbGlkQXJncy5yZXBsYWNlKFwie2FyZ31cIiwgXCJuaWNrbmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkU3RhcnQpLCBwYXJhbTMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgbGFuZyA9IHBhcmFtMTtcbiAgICAgICAgICAgICAgICBpZiAobGFuZyA9PT0gdW5kZWZpbmVkIHx8IGxhbmcgPT09IG51bGwgfHwgbGFuZyA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICBsYW5nID0gQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5kZWZhdWx0TGFuZ3VhZ2VDb2RlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgYSBwbGFjZWhvbGRlciBjb25maWdcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZyA9IFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnLmZyb21TdWJzY3JpcHRpb24odGhpcy5wcml2UGxhY2Vob2xkZXJLZXksIHRoaXMucHJpdlBsYWNlaG9sZGVyUmVnaW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5zZXRQcm9mYW5pdHkoUHJvZmFuaXR5T3B0aW9uLk1hc2tlZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoVHJhbnNsYXRpb25Db25maWcuYWRkVGFyZ2V0TGFuZ3VhZ2UobGFuZyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoVHJhbnNsYXRpb25Db25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZV0sIGxhbmcpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWRbUHJvcGVydHlJZC5Db252ZXJzYXRpb25UcmFuc2xhdG9yX05hbWVdLCBuaWNrbmFtZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcGVydHlJZHNUb0NvcHkgPSBbXG4gICAgICAgICAgICAgICAgICAgIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSG9zdCxcbiAgICAgICAgICAgICAgICAgICAgUHJvcGVydHlJZC5Db252ZXJzYXRpb25UcmFuc2xhdG9yX0hvc3QsXG4gICAgICAgICAgICAgICAgICAgIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnQsXG4gICAgICAgICAgICAgICAgICAgIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlIb3N0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5UG9ydCxcbiAgICAgICAgICAgICAgICAgICAgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVVzZXJOYW1lLFxuICAgICAgICAgICAgICAgICAgICBcIkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfTXVsdGlDaGFubmVsQXVkaW9cIixcbiAgICAgICAgICAgICAgICAgICAgXCJDb252ZXJzYXRpb25UcmFuc2xhdG9yX1JlZ2lvblwiXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHByb3Agb2YgcHJvcGVydHlJZHNUb0NvcHkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KHByb3ApO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHR5cGVvZiBwcm9wID09PSBcInN0cmluZ1wiID8gcHJvcCA6IFByb3BlcnR5SWRbcHJvcF07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5zZXRQcm9wZXJ0eShrZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UHJvcGVydGllcyA9IEpTT04ucGFyc2UodGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShTZXJ2aWNlUHJvcGVydGllc1Byb3BlcnR5TmFtZSwgXCJ7fVwiKSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwcm9wIG9mIE9iamVjdC5rZXlzKGN1cnJlbnRQcm9wZXJ0aWVzKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5zZXRTZXJ2aWNlUHJvcGVydHkocHJvcCwgY3VycmVudFByb3BlcnRpZXNbcHJvcF0sIFNlcnZpY2VQcm9wZXJ0eUNoYW5uZWwuVXJpUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBqb2luIHRoZSBjb252ZXJzYXRpb25cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb24gPSBuZXcgQ29udmVyc2F0aW9uSW1wbCh0aGlzLnByaXZTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uLmNvbnZlcnNhdGlvblRyYW5zbGF0b3IgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbi5qb2luQ29udmVyc2F0aW9uQXN5bmMoY29udmVyc2F0aW9uLCBuaWNrbmFtZSwgbGFuZywgKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkQ29ubmVjdCksIHBhcmFtMyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoVHJhbnNsYXRpb25Db25maWcuYXV0aG9yaXphdGlvblRva2VuID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb24ucm9vbS5pc0hvc3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29ubmVjdCB0byB0aGUgd3NcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uLnN0YXJ0Q29udmVyc2F0aW9uQXN5bmMoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2FsbGJhY2socGFyYW0yLCBwYXJhbTMpO1xuICAgICAgICAgICAgICAgICAgICB9KSwgKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgcGFyYW0zKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0pLCAoKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIHBhcmFtMyk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGNvbnZlcnNhdGlvbiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGNvbnZlcnNhdGlvbiwgdGhpcy5wcml2RXJyb3JzLmludmFsaWRBcmdzLnJlcGxhY2UoXCJ7YXJnfVwiLCBcImNvbnZlcnNhdGlvbiBpZFwiKSk7XG4gICAgICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKG5pY2tuYW1lLCB0aGlzLnByaXZFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIFwibmlja25hbWVcIikpO1xuICAgICAgICAgICAgICAgIC8vIHNhdmUgdGhlIG5pY2tuYW1lXG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfTmFtZSwgbmlja25hbWUpO1xuICAgICAgICAgICAgICAgIC8vIHJlZiB0aGUgY29udmVyc2F0aW9uIG9iamVjdFxuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbiA9IGNvbnZlcnNhdGlvbjtcbiAgICAgICAgICAgICAgICAvLyByZWYgdGhlIGNvbnZlcnNhdGlvbiB0cmFuc2xhdG9yIG9iamVjdFxuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbi5jb252ZXJzYXRpb25UcmFuc2xhdG9yID0gdGhpcztcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb24ucm9vbS5pc0hvc3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvbiwgdGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRDb25uZWN0KTtcbiAgICAgICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZCh0aGlzLnByaXZDb252ZXJzYXRpb24ucm9vbS50b2tlbiwgdGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRDb25uZWN0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZyA9IGNvbnZlcnNhdGlvbi5jb25maWc7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDYWxsYmFjayhwYXJhbTEsIHBhcmFtMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKG5ldyBFcnJvcih0aGlzLnByaXZFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIFwiaW52YWxpZCBjb252ZXJzYXRpb24gdHlwZVwiKSksIHBhcmFtMik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCB0eXBlb2YgcGFyYW0xID09PSBcInN0cmluZ1wiID8gcGFyYW0zIDogcGFyYW0yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBMZWF2ZSB0aGUgY29udmVyc2F0aW9uXG4gICAgICogQHBhcmFtIGNiXG4gICAgICogQHBhcmFtIGVyclxuICAgICAqL1xuICAgIGxlYXZlQ29udmVyc2F0aW9uQXN5bmMoY2IsIGVycikge1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKCgoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyBzdG9wIHRoZSBzcGVlY2ggd2Vic29ja2V0XG4gICAgICAgICAgICB5aWVsZCB0aGlzLmNhbmNlbFNwZWVjaCgpO1xuICAgICAgICAgICAgLy8gc3RvcCB0aGUgd2Vic29ja2V0XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZDb252ZXJzYXRpb24uZW5kQ29udmVyc2F0aW9uSW1wbEFzeW5jKCk7XG4gICAgICAgICAgICAvLyBodHRwcyBkZWxldGUgcmVxdWVzdFxuICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2Q29udmVyc2F0aW9uLmRlbGV0ZUNvbnZlcnNhdGlvbkltcGxBc3luYygpO1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIH0pKSgpLCBjYiwgZXJyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhIHRleHQgbWVzc2FnZVxuICAgICAqIEBwYXJhbSBtZXNzYWdlXG4gICAgICogQHBhcmFtIGNiXG4gICAgICogQHBhcmFtIGVyclxuICAgICAqL1xuICAgIHNlbmRUZXh0TWVzc2FnZUFzeW5jKG1lc3NhZ2UsIGNiLCBlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvbiwgdGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRTZW5kKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShtZXNzYWdlLCB0aGlzLnByaXZFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIG1lc3NhZ2UpKTtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbi5zZW5kVGV4dE1lc3NhZ2VBc3luYyhtZXNzYWdlLCBjYiwgZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnQgc3BlYWtpbmdcbiAgICAgKiBAcGFyYW0gY2JcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICovXG4gICAgc3RhcnRUcmFuc2NyaWJpbmdBc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3MoKCgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQodGhpcy5wcml2Q29udmVyc2F0aW9uLCB0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZFNlbmQpO1xuICAgICAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvbi5yb29tLnRva2VuLCB0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZENvbm5lY3QpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZDVFJlY29nbml6ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmNvbm5lY3RUcmFuc2xhdG9yUmVjb2duaXplcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZCh0aGlzLnByaXZDVFJlY29nbml6ZXIsIHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkU2VuZCk7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNhblNwZWFrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkU2VuZCksIGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuc3RhcnRDb250aW51b3VzUmVjb2duaXRpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZJc1NwZWFraW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdklzU3BlYWtpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmNhbmNlbFNwZWVjaCgpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkoKSwgY2IsIGVycik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3Agc3BlYWtpbmdcbiAgICAgKiBAcGFyYW0gY2JcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICovXG4gICAgc3RvcFRyYW5zY3JpYmluZ0FzeW5jKGNiLCBlcnIpIHtcbiAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcygoKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJpdklzU3BlYWtpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RvcCBzcGVlY2hcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5jYW5jZWxTcGVlY2goKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBzdG9wIHRoZSByZWNvZ25pdGlvbiBidXQgbGVhdmUgdGhlIHdlYnNvY2tldCBvcGVuXG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNTcGVha2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q1RSZWNvZ25pemVyLnN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyhyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5jYW5jZWxTcGVlY2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpKCksIGNiLCBlcnIpO1xuICAgIH1cbiAgICBpc0Rpc3Bvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNEaXNwb3NlZDtcbiAgICB9XG4gICAgZGlzcG9zZShyZWFzb24sIHN1Y2Nlc3MsIGVycikge1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKCgoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rpc3Bvc2VkICYmICF0aGlzLnByaXZJc1NwZWFraW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgdGhpcy5jYW5jZWxTcGVlY2goKTtcbiAgICAgICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoVHJhbnNsYXRpb25Db25maWcuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5wcml2QXVkaW9Db25maWcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbi5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIH0pKSgpLCBzdWNjZXNzLCBlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYW5jZWwgdGhlIHNwZWVjaCB3ZWJzb2NrZXRcbiAgICAgKi9cbiAgICBjYW5jZWxTcGVlY2goKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNTcGVha2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHlpZWxkICgoX2EgPSB0aGlzLnByaXZDVFJlY29nbml6ZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vbkRpc2Nvbm5lY3Rpb24oKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q1RSZWNvZ25pemVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBpZ25vcmUgdGhlIGVycm9yXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25uZWN0IHRvIHRoZSBzcGVlY2ggdHJhbnNsYXRpb24gcmVjb2duaXplci5cbiAgICAgKiBDdXJyZW50bHkgdGhlcmUgaXMgbm8gbGFuZ3VhZ2UgdmFsaWRhdGlvbiBwZXJmb3JtZWQgYmVmb3JlIHNlbmRpbmcgdGhlIFNwZWVjaExhbmd1YWdlIGNvZGUgdG8gdGhlIHNlcnZpY2UuXG4gICAgICogSWYgaXQncyBhbiBpbnZhbGlkIGxhbmd1YWdlIHRoZSByYXcgZXJyb3Igd2lsbCBiZTogJ0Vycm9yIGR1cmluZyBXZWJTb2NrZXQgaGFuZHNoYWtlOiBVbmV4cGVjdGVkIHJlc3BvbnNlIGNvZGU6IDQwMCdcbiAgICAgKiBlLmcuIHBhc3MgaW4gJ2ZyJyBpbnN0ZWFkIG9mICdmci1GUicsIG9yIGEgdGV4dC1vbmx5IGxhbmd1YWdlICdjeSdcbiAgICAgKi9cbiAgICBjb25uZWN0VHJhbnNsYXRvclJlY29nbml6ZXIoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZBdWRpb0NvbmZpZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkF1ZGlvQ29uZmlnID0gQXVkaW9Db25maWcuZnJvbURlZmF1bHRNaWNyb3Bob25lSW5wdXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gY2xlYXIgdGhlIHRlbXAgc3Vic2NyaXB0aW9uIGtleSBpZiBpdCdzIGEgcGFydGljaXBhbnQgam9pbmluZ1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5XSlcbiAgICAgICAgICAgICAgICAgICAgPT09IHRoaXMucHJpdlBsYWNlaG9sZGVyS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXldLCBcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY29udkdldHRlciA9ICgpID0+IHRoaXMucHJpdkNvbnZlcnNhdGlvbjtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDVFJlY29nbml6ZXIgPSBuZXcgQ29udmVyc2F0aW9uVHJhbnNsYXRpb25SZWNvZ25pemVyKHRoaXMucHJpdlNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnLCB0aGlzLnByaXZBdWRpb0NvbmZpZywgdGhpcywgY29udkdldHRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmNhbmNlbFNwZWVjaCgpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHRoZSBzdGFydCBzcGVha2luZyByZXF1ZXN0XG4gICAgICovXG4gICAgc3RhcnRDb250aW51b3VzUmVjb2duaXRpb24oKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByaXZDVFJlY29nbml6ZXIuc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyhyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvblRyYW5zbGF0b3IuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8vIE11bHRpLWRldmljZSBDb252ZXJzYXRpb24gaXMgYSBQcmV2aWV3IGZlYXR1cmUuXG5leHBvcnQgeyBDb252ZXJzYXRpb24sIENvbnZlcnNhdGlvbkltcGwgfSBmcm9tIFwiLi9Db252ZXJzYXRpb25cIjtcbmV4cG9ydCB7IENvbnZlcnNhdGlvbkNvbW1vbiB9IGZyb20gXCIuL0NvbnZlcnNhdGlvbkNvbW1vblwiO1xuZXhwb3J0IHsgQ29udmVyc2F0aW9uRXhwaXJhdGlvbkV2ZW50QXJncyB9IGZyb20gXCIuL0NvbnZlcnNhdGlvbkV4cGlyYXRpb25FdmVudEFyZ3NcIjtcbmV4cG9ydCB7IENvbnZlcnNhdGlvblBhcnRpY2lwYW50c0NoYW5nZWRFdmVudEFyZ3MgfSBmcm9tIFwiLi9Db252ZXJzYXRpb25QYXJ0aWNpcGFudHNDaGFuZ2VkRXZlbnRBcmdzXCI7XG5leHBvcnQgeyBDb252ZXJzYXRpb25UcmFuc2xhdGlvbkNhbmNlbGVkRXZlbnRBcmdzIH0gZnJvbSBcIi4vQ29udmVyc2F0aW9uVHJhbnNsYXRpb25DYW5jZWxlZEV2ZW50QXJnc1wiO1xuZXhwb3J0IHsgQ29udmVyc2F0aW9uVHJhbnNsYXRpb25FdmVudEFyZ3MgfSBmcm9tIFwiLi9Db252ZXJzYXRpb25UcmFuc2xhdGlvbkV2ZW50QXJnc1wiO1xuZXhwb3J0IHsgQ29udmVyc2F0aW9uVHJhbnNsYXRpb25SZXN1bHQgfSBmcm9tIFwiLi9Db252ZXJzYXRpb25UcmFuc2xhdGlvblJlc3VsdFwiO1xuZXhwb3J0IHsgQ29udmVyc2F0aW9uVHJhbnNsYXRvciB9IGZyb20gXCIuL0NvbnZlcnNhdGlvblRyYW5zbGF0b3JcIjtcbmV4cG9ydCB7IENvbnZlcnNhdGlvblRyYW5zY3JpYmVyIH0gZnJvbSBcIi4vQ29udmVyc2F0aW9uVHJhbnNjcmliZXJcIjtcbmV4cG9ydCB7IFBhcnRpY2lwYW50LCBVc2VyIH0gZnJvbSBcIi4vSVBhcnRpY2lwYW50XCI7XG5leHBvcnQgeyBQYXJ0aWNpcGFudENoYW5nZWRSZWFzb24gfSBmcm9tIFwiLi9QYXJ0aWNpcGFudENoYW5nZWRSZWFzb25cIjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXhwb3J0cy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLy8gTXVsdGktZGV2aWNlIENvbnZlcnNhdGlvbiBpcyBhIFByZXZpZXcgZmVhdHVyZS5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5pbXBvcnQgeyBQcm9wZXJ0eUNvbGxlY3Rpb24gfSBmcm9tIFwiLi4vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIFVzZXIge1xuICAgIGNvbnN0cnVjdG9yKHVzZXJJZCkge1xuICAgICAgICB0aGlzLnByaXZVc2VySWQgPSB1c2VySWQ7XG4gICAgfVxuICAgIGdldCB1c2VySWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZVc2VySWQ7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFBhcnRpY2lwYW50IHtcbiAgICBjb25zdHJ1Y3RvcihpZCwgYXZhdGFyLCBkaXNwbGF5TmFtZSwgaXNIb3N0LCBpc011dGVkLCBpc1VzaW5nVHRzLCBwcmVmZXJyZWRMYW5ndWFnZSwgdm9pY2UpIHtcbiAgICAgICAgdGhpcy5wcml2SWQgPSBpZDtcbiAgICAgICAgdGhpcy5wcml2QXZhdGFyID0gYXZhdGFyO1xuICAgICAgICB0aGlzLnByaXZEaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lO1xuICAgICAgICB0aGlzLnByaXZJc0hvc3QgPSBpc0hvc3Q7XG4gICAgICAgIHRoaXMucHJpdklzTXV0ZWQgPSBpc011dGVkO1xuICAgICAgICB0aGlzLnByaXZJc1VzaW5nVHRzID0gaXNVc2luZ1R0cztcbiAgICAgICAgdGhpcy5wcml2UHJlZmVycmVkTGFuZ3VhZ2UgPSBwcmVmZXJyZWRMYW5ndWFnZTtcbiAgICAgICAgdGhpcy5wcml2Vm9pY2UgPSB2b2ljZTtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICB9XG4gICAgZ2V0IGF2YXRhcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF2YXRhcjtcbiAgICB9XG4gICAgZ2V0IGRpc3BsYXlOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RGlzcGxheU5hbWU7XG4gICAgfVxuICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklkO1xuICAgIH1cbiAgICBnZXQgcHJlZmVycmVkTGFuZ3VhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcmVmZXJyZWRMYW5ndWFnZTtcbiAgICB9XG4gICAgZ2V0IGlzSG9zdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklzSG9zdDtcbiAgICB9XG4gICAgZ2V0IGlzTXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc011dGVkO1xuICAgIH1cbiAgICBnZXQgaXNVc2luZ1R0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklzVXNpbmdUdHM7XG4gICAgfVxuICAgIGdldCB2b2ljZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlZvaWNlO1xuICAgIH1cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxuICAgIHN0YXRpYyBGcm9tKGlkLCBsYW5ndWFnZSwgdm9pY2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJ0aWNpcGFudChpZCwgXCJcIiwgaWQsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGxhbmd1YWdlLCB2b2ljZSk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JUGFydGljaXBhbnQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8vIE11bHRpLWRldmljZSBDb252ZXJzYXRpb24gaXMgYSBQcmV2aWV3IGZlYXR1cmUuXG5leHBvcnQgdmFyIFBhcnRpY2lwYW50Q2hhbmdlZFJlYXNvbjtcbihmdW5jdGlvbiAoUGFydGljaXBhbnRDaGFuZ2VkUmVhc29uKSB7XG4gICAgLyoqIFBhcnRpY2lwYW50IGhhcyBqb2luZWQgdGhlIGNvbnZlcnNhdGlvbi4gKi9cbiAgICBQYXJ0aWNpcGFudENoYW5nZWRSZWFzb25bUGFydGljaXBhbnRDaGFuZ2VkUmVhc29uW1wiSm9pbmVkQ29udmVyc2F0aW9uXCJdID0gMF0gPSBcIkpvaW5lZENvbnZlcnNhdGlvblwiO1xuICAgIC8qKiBQYXJ0aWNpcGFudCBoYXMgbGVmdCB0aGUgY29udmVyc2F0aW9uLiBUaGlzIGNvdWxkIGJlIHZvbHVudGFyeSwgb3IgaW52b2x1bnRhcnlcbiAgICAgKiAoZS5nLiB0aGV5IGFyZSBleHBlcmllbmNpbmcgbmV0d29ya2luZyBpc3N1ZXMpLlxuICAgICAqL1xuICAgIFBhcnRpY2lwYW50Q2hhbmdlZFJlYXNvbltQYXJ0aWNpcGFudENoYW5nZWRSZWFzb25bXCJMZWZ0Q29udmVyc2F0aW9uXCJdID0gMV0gPSBcIkxlZnRDb252ZXJzYXRpb25cIjtcbiAgICAvKiogVGhlIHBhcnRpY2lwYW50cycgc3RhdGUgaGFzIGNoYW5nZWQgKGUuZy4gdGhleSBiZWNhbWUgbXV0ZWQsIGNoYW5nZWQgdGhlaXIgbmlja25hbWUpLiAqL1xuICAgIFBhcnRpY2lwYW50Q2hhbmdlZFJlYXNvbltQYXJ0aWNpcGFudENoYW5nZWRSZWFzb25bXCJVcGRhdGVkXCJdID0gMl0gPSBcIlVwZGF0ZWRcIjtcbn0pKFBhcnRpY2lwYW50Q2hhbmdlZFJlYXNvbiB8fCAoUGFydGljaXBhbnRDaGFuZ2VkUmVhc29uID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGFydGljaXBhbnRDaGFuZ2VkUmVhc29uLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZSBwYXlsb2FkIG9mIHNwZWVjaCByZWNvZ25pdGlvbiBjYW5jZWxlZCByZXN1bHQgZXZlbnRzLlxuICogQGNsYXNzIFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJnc1xuICovXG5leHBvcnQgY2xhc3MgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzZXNzaW9uaWQgLSBUaGUgc2Vzc2lvbiBpZC5cbiAgICAgKiBAcGFyYW0ge0NhbmNlbGxhdGlvblJlYXNvbn0gY2FuY2VsbGF0aW9uUmVhc29uIC0gVGhlIGNhbmNlbGxhdGlvbiByZWFzb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yRGV0YWlscyAtIEVycm9yIGRldGFpbHMsIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7VHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdH0gcmVzdWx0IC0gVGhlIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzZXNzaW9uaWQsIGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3JEZXRhaWxzLCBlcnJvckNvZGUsIHJlc3VsdCkge1xuICAgICAgICB0aGlzLnByaXZDYW5jZWxSZWFzb24gPSBjYW5jZWxsYXRpb25SZWFzb247XG4gICAgICAgIHRoaXMucHJpdkVycm9yRGV0YWlscyA9IGVycm9yRGV0YWlscztcbiAgICAgICAgdGhpcy5wcml2UmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICB0aGlzLnByaXZTZXNzaW9uSWQgPSBzZXNzaW9uaWQ7XG4gICAgICAgIHRoaXMucHJpdkVycm9yQ29kZSA9IGVycm9yQ29kZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MucHJvdG90eXBlLnJlc3VsdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7VHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdH0gdGhlIHJlY29nbml0aW9uIHJlc3VsdC5cbiAgICAgKi9cbiAgICBnZXQgcmVzdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIHNlc3Npb24gaWRlbnRpZmllci5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncy5wcm90b3R5cGUuc2Vzc2lvbklkXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBzZXNzaW9uIGlkZW50aWZpZXIuXG4gICAgICovXG4gICAgZ2V0IHNlc3Npb25JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNlc3Npb25JZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHJlYXNvbiB0aGUgcmVjb2duaXRpb24gd2FzIGNhbmNlbGVkLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLnByb3RvdHlwZS5yZWFzb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge0NhbmNlbGxhdGlvblJlYXNvbn0gU3BlY2lmaWVzIHRoZSByZWFzb24gY2FuY2VsZWQuXG4gICAgICovXG4gICAgZ2V0IHJlYXNvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNhbmNlbFJlYXNvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGVycm9yIGNvZGUgaW4gY2FzZSBvZiBhbiB1bnN1Y2Nlc3NmdWwgcmVjb2duaXRpb24uXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjEuMC5cbiAgICAgKiBAcmV0dXJuIEFuIGVycm9yIGNvZGUgdGhhdCByZXByZXNlbnRzIHRoZSBlcnJvciByZWFzb24uXG4gICAgICovXG4gICAgZ2V0IGVycm9yQ29kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkVycm9yQ29kZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW4gY2FzZSBvZiBhbiB1bnN1Y2Nlc3NmdWwgcmVjb2duaXRpb24sIHByb3ZpZGVzIGRldGFpbHMgb2YgdGhlIG9jY3VycmVkIGVycm9yLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLnByb3RvdHlwZS5lcnJvckRldGFpbHNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBlcnJvciBkZXRhaWxzLlxuICAgICAqL1xuICAgIGdldCBlcnJvckRldGFpbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckRldGFpbHM7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFJlY29nbml0aW9uRXZlbnRBcmdzIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBUcmFuc2xhdGlvbiB0ZXh0IHJlc3VsdCBldmVudCBhcmd1bWVudHMuXG4gKiBAY2xhc3MgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkV2ZW50QXJnc1xuICovXG5leHBvcnQgY2xhc3MgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkV2ZW50QXJncyBleHRlbmRzIFJlY29nbml0aW9uRXZlbnRBcmdzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7VHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdH0gcmVzdWx0IC0gVGhlIHRyYW5zbGF0aW9uIHJlY29nbml0aW9uIHJlc3VsdC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2Vzc2lvbklkIC0gVGhlIHNlc3Npb24gaWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVzdWx0LCBvZmZzZXQsIHNlc3Npb25JZCkge1xuICAgICAgICBzdXBlcihvZmZzZXQsIHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdlJlc3VsdCA9IHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml0aW9uRXZlbnRBcmdzLnByb3RvdHlwZS5yZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1RyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHR9IHRoZSByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICovXG4gICAgZ2V0IHJlc3VsdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlc3VsdDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFNwZWVjaFJlY29nbml0aW9uUmVzdWx0IH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBUcmFuc2xhdGlvbiB0ZXh0IHJlc3VsdC5cbiAqIEBjbGFzcyBUcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0XG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0IGV4dGVuZHMgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtUcmFuc2xhdGlvbnN9IHRyYW5zbGF0aW9ucyAtIFRoZSB0cmFuc2xhdGlvbnMuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlc3VsdElkIC0gVGhlIHJlc3VsdCBpZC5cbiAgICAgKiBAcGFyYW0ge1Jlc3VsdFJlYXNvbn0gcmVhc29uIC0gVGhlIHJlYXNvbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFRoZSByZWNvZ25pemVkIHRleHQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGR1cmF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgLSBUaGUgb2Zmc2V0IGludG8gdGhlIHN0cmVhbS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXJyb3JEZXRhaWxzIC0gRXJyb3IgZGV0YWlscywgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGpzb24gLSBBZGRpdGlvbmFsIEpzb24sIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7UHJvcGVydHlDb2xsZWN0aW9ufSBwcm9wZXJ0aWVzIC0gQWRkaXRpb25hbCBwcm9wZXJ0aWVzLCBpZiBwcm92aWRlZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0cmFuc2xhdGlvbnMsIHJlc3VsdElkLCByZWFzb24sIHRleHQsIGR1cmF0aW9uLCBvZmZzZXQsIGVycm9yRGV0YWlscywganNvbiwgcHJvcGVydGllcykge1xuICAgICAgICBzdXBlcihyZXN1bHRJZCwgcmVhc29uLCB0ZXh0LCBkdXJhdGlvbiwgb2Zmc2V0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBlcnJvckRldGFpbHMsIGpzb24sIHByb3BlcnRpZXMpO1xuICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvbnMgPSB0cmFuc2xhdGlvbnM7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tU3BlZWNoUmVjb2duaXRpb25SZXN1bHQocmVzdWx0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdCh1bmRlZmluZWQsIHJlc3VsdC5yZXN1bHRJZCwgcmVzdWx0LnJlYXNvbiwgcmVzdWx0LnRleHQsIHJlc3VsdC5kdXJhdGlvbiwgcmVzdWx0Lm9mZnNldCwgcmVzdWx0LmVycm9yRGV0YWlscywgcmVzdWx0Lmpzb24sIHJlc3VsdC5wcm9wZXJ0aWVzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJlc2VudHMgdGhlIHRyYW5zbGF0aW9uIHJlc3VsdHMuIEVhY2ggaXRlbSBpbiB0aGUgZGljdGlvbmFyeSByZXByZXNlbnRzXG4gICAgICogYSB0cmFuc2xhdGlvbiByZXN1bHQgaW4gb25lIG9mIHRhcmdldCBsYW5ndWFnZXMsIHdoZXJlIHRoZSBrZXkgaXMgdGhlIG5hbWVcbiAgICAgKiBvZiB0aGUgdGFyZ2V0IGxhbmd1YWdlLCBpbiBCQ1AtNDcgZm9ybWF0LCBhbmQgdGhlIHZhbHVlIGlzIHRoZSB0cmFuc2xhdGlvblxuICAgICAqIHRleHQgaW4gdGhlIHNwZWNpZmllZCBsYW5ndWFnZS5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQucHJvdG90eXBlLnRyYW5zbGF0aW9uc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7VHJhbnNsYXRpb25zfSB0aGUgY3VycmVudCB0cmFuc2xhdGlvbiBtYXAgdGhhdCBob2xkcyBhbGwgdHJhbnNsYXRpb25zIHJlcXVlc3RlZC5cbiAgICAgKi9cbiAgICBnZXQgdHJhbnNsYXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VHJhbnNsYXRpb25zO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBSZWNvZ25pdGlvbk1vZGUsIFJlY29nbml6ZXJDb25maWcsIFRyYW5zbGF0aW9uQ29ubmVjdGlvbkZhY3RvcnksIFRyYW5zbGF0aW9uU2VydmljZVJlY29nbml6ZXIgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzIH0gZnJvbSBcIi4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb25uZWN0aW9uIH0gZnJvbSBcIi4vQ29ubmVjdGlvblwiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUlkLCBSZWNvZ25pemVyIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBUcmFuc2xhdGlvbiByZWNvZ25pemVyXG4gKiBAY2xhc3MgVHJhbnNsYXRpb25SZWNvZ25pemVyXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc2xhdGlvblJlY29nbml6ZXIgZXh0ZW5kcyBSZWNvZ25pemVyIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGUgVHJhbnNsYXRpb25SZWNvZ25pemVyLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7U3BlZWNoVHJhbnNsYXRpb25Db25maWd9IHNwZWVjaENvbmZpZyAtIFNldCBvZiBwcm9wZXJ0aWVzIHRvIGNvbmZpZ3VyZSB0aGlzIHJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHtBdWRpb0NvbmZpZ30gYXVkaW9Db25maWcgLSBBbiBvcHRpb25hbCBhdWRpbyBjb25maWcgYXNzb2NpYXRlZCB3aXRoIHRoZSByZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtJQ29ubmVjdGlvbkZhY3Rvcnl9IGNvbm5lY3Rpb25GYWN0b3J5IC0gQW4gb3B0aW9uYWwgY29ubmVjdGlvbiBmYWN0b3J5IHRvIHVzZSB0byBnZW5lcmF0ZSB0aGUgZW5kcG9pbnQgVVJJcywgaGVhZGVycyB0byBzZXQsIGV0Yy4uLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNwZWVjaENvbmZpZywgYXVkaW9Db25maWcsIGNvbm5lY3Rpb25GYWN0b3J5KSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZ0ltcGwgPSBzcGVlY2hDb25maWc7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChjb25maWdJbXBsLCBcInNwZWVjaENvbmZpZ1wiKTtcbiAgICAgICAgc3VwZXIoYXVkaW9Db25maWcsIGNvbmZpZ0ltcGwucHJvcGVydGllcywgY29ubmVjdGlvbkZhY3RvcnkgfHwgbmV3IFRyYW5zbGF0aW9uQ29ubmVjdGlvbkZhY3RvcnkoKSk7XG4gICAgICAgIHRoaXMucHJpdkRpc3Bvc2VkVHJhbnNsYXRpb25SZWNvZ25pemVyID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblZvaWNlLCB1bmRlZmluZWQpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblZvaWNlKSwgUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVm9pY2VdKTtcbiAgICAgICAgfVxuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Ub0xhbmd1YWdlcyksIFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzXSk7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UpLCBQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGxhbmd1YWdlIG5hbWUgdGhhdCB3YXMgc2V0IHdoZW4gdGhlIHJlY29nbml6ZXIgd2FzIGNyZWF0ZWQuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gR2V0cyB0aGUgbGFuZ3VhZ2UgbmFtZSB0aGF0IHdhcyBzZXQgd2hlbiB0aGUgcmVjb2duaXplciB3YXMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBnZXQgc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSgpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZFRyYW5zbGF0aW9uUmVjb2duaXplcik7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRhcmdldCBsYW5ndWFnZXMgZm9yIHRyYW5zbGF0aW9uIHRoYXQgd2VyZSBzZXQgd2hlbiB0aGUgcmVjb2duaXplciB3YXMgY3JlYXRlZC5cbiAgICAgKiBUaGUgbGFuZ3VhZ2UgaXMgc3BlY2lmaWVkIGluIEJDUC00NyBmb3JtYXQuIFRoZSB0cmFuc2xhdGlvbiB3aWxsIHByb3ZpZGUgdHJhbnNsYXRlZCB0ZXh0IGZvciBlYWNoIG9mIGxhbmd1YWdlLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS50YXJnZXRMYW5ndWFnZXNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ1tdfSBHZXRzIHRhcmdldCBsYW5ndWFnZXMgZm9yIHRyYW5zbGF0aW9uIHRoYXQgd2VyZSBzZXQgd2hlbiB0aGUgcmVjb2duaXplciB3YXMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBnZXQgdGFyZ2V0TGFuZ3VhZ2VzKCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkVHJhbnNsYXRpb25SZWNvZ25pemVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVG9MYW5ndWFnZXMpLnNwbGl0KFwiLFwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbmFtZSBvZiBvdXRwdXQgdm9pY2UuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLnZvaWNlTmFtZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgbmFtZSBvZiBvdXRwdXQgdm9pY2UuXG4gICAgICovXG4gICAgZ2V0IHZvaWNlTmFtZSgpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZFRyYW5zbGF0aW9uUmVjb2duaXplcik7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblZvaWNlLCB1bmRlZmluZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMgZGVmaW5lZCBmb3IgdGhpcyBUcmFuc2xhdGlvblJlY29nbml6ZXIuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLnByb3BlcnRpZXNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1Byb3BlcnR5Q29sbGVjdGlvbn0gVGhlIGNvbGxlY3Rpb24gb2YgcHJvcGVydGllcyBhbmQgdGhlaXIgdmFsdWVzIGRlZmluZWQgZm9yIHRoaXMgVHJhbnNsYXRpb25SZWNvZ25pemVyLlxuICAgICAqL1xuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiB1c2VkIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIHNlcnZpY2UuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLmF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqL1xuICAgIGdldCBhdXRob3JpemF0aW9uVG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMvU2V0cyB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiB1c2VkIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIHNlcnZpY2UuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLmF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBBdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqL1xuICAgIHNldCBhdXRob3JpemF0aW9uVG9rZW4odmFsdWUpIHtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4sIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHJlY29nbml0aW9uIGFuZCB0cmFuc2xhdGlvbiwgYW5kIHN0b3BzIGFmdGVyIHRoZSBmaXJzdCB1dHRlcmFuY2UgaXMgcmVjb2duaXplZC5cbiAgICAgKiBUaGUgdGFzayByZXR1cm5zIHRoZSB0cmFuc2xhdGlvbiB0ZXh0IGFzIHJlc3VsdC5cbiAgICAgKiBOb3RlOiByZWNvZ25pemVPbmNlQXN5bmMgcmV0dXJucyB3aGVuIHRoZSBmaXJzdCB1dHRlcmFuY2UgaGFzIGJlZW4gcmVjb2duaXplZCwgc28gaXQgaXMgc3VpdGFibGUgb25seVxuICAgICAqIGZvciBzaW5nbGUgc2hvdCByZWNvZ25pdGlvbiBsaWtlIGNvbW1hbmQgb3IgcXVlcnkuIEZvciBsb25nLXJ1bm5pbmcgcmVjb2duaXRpb24sXG4gICAgICogdXNlIHN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmMoKSBpbnN0ZWFkLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS5yZWNvZ25pemVPbmNlQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgdGhhdCByZWNlaXZlZCB0aGUgcmVzdWx0IHdoZW4gdGhlIHRyYW5zbGF0aW9uIGhhcyBjb21wbGV0ZWQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICByZWNvZ25pemVPbmNlQXN5bmMoY2IsIGVycikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkVHJhbnNsYXRpb25SZWNvZ25pemVyKTtcbiAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyh0aGlzLnJlY29nbml6ZU9uY2VBc3luY0ltcGwoUmVjb2duaXRpb25Nb2RlLkNvbnZlcnNhdGlvbiksIGNiLCBlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgcmVjb2duaXRpb24gYW5kIHRyYW5zbGF0aW9uLCB1bnRpbCBzdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmMoKSBpcyBjYWxsZWQuXG4gICAgICogVXNlciBtdXN0IHN1YnNjcmliZSB0byBldmVudHMgdG8gcmVjZWl2ZSB0cmFuc2xhdGlvbiByZXN1bHRzLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS5zdGFydENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBjYiAtIENhbGxiYWNrIHRoYXQgcmVjZWl2ZWQgdGhlIHRyYW5zbGF0aW9uIGhhcyBzdGFydGVkLlxuICAgICAqIEBwYXJhbSBlcnIgLSBDYWxsYmFjayBpbnZva2VkIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICovXG4gICAgc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5zdGFydENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jSW1wbChSZWNvZ25pdGlvbk1vZGUuQ29udmVyc2F0aW9uKSwgY2IsIGVycik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIGNvbnRpbnVvdXMgcmVjb2duaXRpb24gYW5kIHRyYW5zbGF0aW9uLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS5zdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgdGhhdCByZWNlaXZlZCB0aGUgdHJhbnNsYXRpb24gaGFzIHN0b3BwZWQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBzdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmMoY2IsIGVycikge1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMuc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jSW1wbCgpLCBjYiwgZXJyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogZHluYW1pY2FsbHkgcmVtb3ZlIGEgbGFuZ3VhZ2UgZnJvbSBsaXN0IG9mIHRhcmdldCBsYW5ndWFnZVxuICAgICAqIChjYW4gYmUgdXNlZCB3aGlsZSByZWNvZ25pdGlvbiBpcyBvbmdvaW5nKVxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS5yZW1vdmVUYXJnZXRMYW5ndWFnZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwYXJhbSBsYW5nIC0gbGFuZ3VhZ2UgdG8gYmUgcmVtb3ZlZFxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICByZW1vdmVUYXJnZXRMYW5ndWFnZShsYW5nKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGxhbmcsIFwibGFuZ3VhZ2UgdG8gYmUgcmVtb3ZlZFwiKTtcbiAgICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVG9MYW5ndWFnZXMsIHVuZGVmaW5lZCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgbGFuZ3VhZ2VzID0gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Ub0xhbmd1YWdlcykuc3BsaXQoXCIsXCIpO1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBsYW5ndWFnZXMuaW5kZXhPZihsYW5nKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2VzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Ub0xhbmd1YWdlcywgbGFuZ3VhZ2VzLmpvaW4oXCIsXCIpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxhbmd1YWdlcyhsYW5ndWFnZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGR5bmFtaWNhbGx5IGFkZCBhIGxhbmd1YWdlIHRvIGxpc3Qgb2YgdGFyZ2V0IGxhbmd1YWdlXG4gICAgICogKGNhbiBiZSB1c2VkIHdoaWxlIHJlY29nbml0aW9uIGlzIG9uZ29pbmcpXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLmFkZFRhcmdldExhbmd1YWdlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIGxhbmcgLSBsYW5ndWFnZSB0byBiZSBhZGRlZFxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBhZGRUYXJnZXRMYW5ndWFnZShsYW5nKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGxhbmcsIFwibGFuZ3VhZ2UgdG8gYmUgYWRkZWRcIik7XG4gICAgICAgIGxldCBsYW5ndWFnZXMgPSBbXTtcbiAgICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVG9MYW5ndWFnZXMsIHVuZGVmaW5lZCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGFuZ3VhZ2VzID0gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Ub0xhbmd1YWdlcykuc3BsaXQoXCIsXCIpO1xuICAgICAgICAgICAgaWYgKCFsYW5ndWFnZXMuaW5jbHVkZXMobGFuZykpIHtcbiAgICAgICAgICAgICAgICBsYW5ndWFnZXMucHVzaChsYW5nKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzLCBsYW5ndWFnZXMuam9pbihcIixcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Ub0xhbmd1YWdlcywgbGFuZyk7XG4gICAgICAgICAgICBsYW5ndWFnZXMgPSBbbGFuZ107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVMYW5ndWFnZXMobGFuZ3VhZ2VzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogY2xvc2VzIGFsbCBleHRlcm5hbCByZXNvdXJjZXMgaGVsZCBieSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZShjYiwgZXJyb3JDYikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkVHJhbnNsYXRpb25SZWNvZ25pemVyKTtcbiAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyh0aGlzLmRpc3Bvc2UodHJ1ZSksIGNiLCBlcnJvckNiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogaGFuZGxlcyBDb25uZWN0aW9uRXN0YWJsaXNoZWRFdmVudCBmb3IgY29udmVyc2F0aW9uIHRyYW5zbGF0aW9uIHNjZW5hcmlvcy5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXplci5wcm90b3R5cGUub25Db25uZWN0aW9uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgICBvbkNvbm5lY3Rpb24oKSB7IH1cbiAgICAvKipcbiAgICAgKiBoYW5kbGVzIGRpc2Nvbm5lY3Rpb24gZXZlbnRzIGZvciBjb252ZXJzYXRpb24gdHJhbnNsYXRpb24gc2NlbmFyaW9zLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS5vbkRpc2Nvbm5lY3Rpb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgIG9uRGlzY29ubmVjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsgfSk7XG4gICAgfVxuICAgIGRpc3Bvc2UoZGlzcG9zaW5nKSB7XG4gICAgICAgIGNvbnN0IF9zdXBlciA9IE9iamVjdC5jcmVhdGUobnVsbCwge1xuICAgICAgICAgICAgZGlzcG9zZTogeyBnZXQ6ICgpID0+IHN1cGVyLmRpc3Bvc2UgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZEaXNwb3NlZFRyYW5zbGF0aW9uUmVjb2duaXplcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJpdkRpc3Bvc2VkVHJhbnNsYXRpb25SZWNvZ25pemVyID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChkaXNwb3NpbmcpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgICAgIHlpZWxkIF9zdXBlci5kaXNwb3NlLmNhbGwodGhpcywgZGlzcG9zaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNyZWF0ZVJlY29nbml6ZXJDb25maWcoc3BlZWNoQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVjb2duaXplckNvbmZpZyhzcGVlY2hDb25maWcsIHRoaXMucHJvcGVydGllcyk7XG4gICAgfVxuICAgIGNyZWF0ZVNlcnZpY2VSZWNvZ25pemVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Db25maWcsIHJlY29nbml6ZXJDb25maWcpIHtcbiAgICAgICAgY29uc3QgY29uZmlnSW1wbCA9IGF1ZGlvQ29uZmlnO1xuICAgICAgICByZXR1cm4gbmV3IFRyYW5zbGF0aW9uU2VydmljZVJlY29nbml6ZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBjb25maWdJbXBsLCByZWNvZ25pemVyQ29uZmlnLCB0aGlzKTtcbiAgICB9XG4gICAgdXBkYXRlTGFuZ3VhZ2VzKGxhbmd1YWdlcykge1xuICAgICAgICBjb25zdCBjb25uID0gQ29ubmVjdGlvbi5mcm9tUmVjb2duaXplcih0aGlzKTtcbiAgICAgICAgaWYgKCEhY29ubikge1xuICAgICAgICAgICAgY29ubi5zZXRNZXNzYWdlUHJvcGVydHkoXCJzcGVlY2guY29udGV4dFwiLCBcInRyYW5zbGF0aW9uY29udGV4dFwiLCB7IHRvOiBsYW5ndWFnZXMgfSk7XG4gICAgICAgICAgICBjb25uLnNlbmRNZXNzYWdlQXN5bmMoXCJldmVudFwiLCBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgaWQ6IFwidHJhbnNsYXRpb25cIixcbiAgICAgICAgICAgICAgICBuYW1lOiBcInVwZGF0ZUxhbmd1YWdlXCIsXG4gICAgICAgICAgICAgICAgdG86IGxhbmd1YWdlc1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2xhdGlvblJlY29nbml6ZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFNlc3Npb25FdmVudEFyZ3MgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIFRyYW5zbGF0aW9uIFN5bnRoZXNpcyBldmVudCBhcmd1bWVudHNcbiAqIEBjbGFzcyBUcmFuc2xhdGlvblN5bnRoZXNpc0V2ZW50QXJnc1xuICovXG5leHBvcnQgY2xhc3MgVHJhbnNsYXRpb25TeW50aGVzaXNFdmVudEFyZ3MgZXh0ZW5kcyBTZXNzaW9uRXZlbnRBcmdzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7VHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHR9IHJlc3VsdCAtIFRoZSB0cmFuc2xhdGlvbiBzeW50aGVzaXMgcmVzdWx0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzZXNzaW9uSWQgLSBUaGUgc2Vzc2lvbiBpZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZXN1bHQsIHNlc3Npb25JZCkge1xuICAgICAgICBzdXBlcihzZXNzaW9uSWQpO1xuICAgICAgICB0aGlzLnByaXZSZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgdHJhbnNsYXRpb24gc3ludGhlc2lzIHJlc3VsdC5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uU3ludGhlc2lzRXZlbnRBcmdzLnByb3RvdHlwZS5yZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1RyYW5zbGF0aW9uU3ludGhlc2lzUmVzdWx0fSBTcGVjaWZpZXMgdGhlIHRyYW5zbGF0aW9uIHN5bnRoZXNpcyByZXN1bHQuXG4gICAgICovXG4gICAgZ2V0IHJlc3VsdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlc3VsdDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9uU3ludGhlc2lzRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgdHJhbnNsYXRpb24gc3ludGhlc2lzIHJlc3VsdCwgaS5lLiB0aGUgdm9pY2Ugb3V0cHV0IG9mIHRoZSB0cmFuc2xhdGVkXG4gKiB0ZXh0IGluIHRoZSB0YXJnZXQgbGFuZ3VhZ2UuXG4gKiBAY2xhc3MgVHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHRcbiAqL1xuZXhwb3J0IGNsYXNzIFRyYW5zbGF0aW9uU3ludGhlc2lzUmVzdWx0IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7UmVzdWx0UmVhc29ufSByZWFzb24gLSBUaGUgc3ludGhlc2lzIHJlYXNvbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBhdWRpbyAtIFRoZSBhdWRpbyBkYXRhLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlYXNvbiwgYXVkaW8pIHtcbiAgICAgICAgdGhpcy5wcml2UmVhc29uID0gcmVhc29uO1xuICAgICAgICB0aGlzLnByaXZBdWRpbyA9IGF1ZGlvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2xhdGVkIHRleHQgaW4gdGhlIHRhcmdldCBsYW5ndWFnZS5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uU3ludGhlc2lzUmVzdWx0LnByb3RvdHlwZS5hdWRpb1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7QXJyYXlCdWZmZXJ9IFRyYW5zbGF0ZWQgYXVkaW8gaW4gdGhlIHRhcmdldCBsYW5ndWFnZS5cbiAgICAgKi9cbiAgICBnZXQgYXVkaW8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpbztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHN5bnRoZXNpcyBzdGF0dXMuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdC5wcm90b3R5cGUucmVhc29uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtSZXN1bHRSZWFzb259IFRoZSBzeW50aGVzaXMgc3RhdHVzLlxuICAgICAqL1xuICAgIGdldCByZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUHJvcGVydHlDb2xsZWN0aW9uIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBSZXByZXNlbnRzIGNvbGxlY3Rpb24gb2YgcGFyYW1ldGVycyBhbmQgdGhlaXIgdmFsdWVzLlxuICogQGNsYXNzIFRyYW5zbGF0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgVHJhbnNsYXRpb25zIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gVXNlIGFuIFByb3BlcnR5Q29sbGVjdGlvbiBpbnRlcm5hbGx5LCBqdXN0IHdyYXBwaW5nIGl0IHRvIGhpZGUgdGhlIHwgZW51bSBzeW50YXggaXQgaGFzLlxuICAgICAgICB0aGlzLnByaXZNYXAgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGFuZ3VhZ2VzIGluIHRoZSBvYmplY3QgaW4gYSBTdHJpbmcgYXJyYXkuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvbnMucHJvdG90eXBlLmxhbmd1YWdlc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119IGxhbmd1YWdlcyBpbiB0cmFuc2xhdGlvbnMgb2JqZWN0LlxuICAgICAqL1xuICAgIGdldCBsYW5ndWFnZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZNYXAua2V5cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcGFyYW1ldGVyIHZhbHVlIGluIHR5cGUgU3RyaW5nLiBUaGUgcGFyYW1ldGVyIG11c3QgaGF2ZSB0aGUgc2FtZSB0eXBlIGFzIFN0cmluZy5cbiAgICAgKiBDdXJyZW50bHkgb25seSBTdHJpbmcsIGludCBhbmQgYm9vbCBhcmUgYWxsb3dlZC5cbiAgICAgKiBJZiB0aGUgbmFtZSBpcyBub3QgYXZhaWxhYmxlLCB0aGUgc3BlY2lmaWVkIGRlZmF1bHRWYWx1ZSBpcyByZXR1cm5lZC5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9ucy5wcm90b3R5cGUuZ2V0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBUaGUgcGFyYW1ldGVyIG5hbWUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRlZiAtIFRoZSBkZWZhdWx0IHZhbHVlIHdoaWNoIGlzIHJldHVybmVkIGlmIHRoZSBwYXJhbWV0ZXIgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSB2YWx1ZSBvZiB0aGUgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIGdldChrZXksIGRlZikge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TWFwLmdldFByb3BlcnR5KGtleSwgZGVmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgU3RyaW5nIHZhbHVlIG9mIHRoZSBwYXJhbWV0ZXIgc3BlY2lmaWVkIGJ5IG5hbWUuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvbnMucHJvdG90eXBlLnNldFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVGhlIHBhcmFtZXRlciBuYW1lLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFRoZSB2YWx1ZSBvZiB0aGUgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIHNldChrZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpdk1hcC5zZXRQcm9wZXJ0eShrZXksIHZhbHVlKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9ucy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgVHVyblN0YXR1c1Jlc3BvbnNlUGF5bG9hZCB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL1NlcnZpY2VNZXNzYWdlcy9UdXJuU3RhdHVzUGF5bG9hZFwiO1xuLyoqXG4gKiBEZWZpbmVzIGNvbnRlbnRzIG9mIHJlY2VpdmVkIG1lc3NhZ2UvZXZlbnRzLlxuICogQGNsYXNzIFR1cm5TdGF0dXNSZWNlaXZlZEV2ZW50QXJnc1xuICovXG5leHBvcnQgY2xhc3MgVHVyblN0YXR1c1JlY2VpdmVkRXZlbnRBcmdzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0dXJuU3RhdHVzIC0gVGhlIEpTT04tZW5jb2RlZCB0dXJuIHN0YXR1cyBtZXNzYWdlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHR1cm5TdGF0dXMpIHtcbiAgICAgICAgdGhpcy5wcml2VHVyblN0YXR1cyA9IFR1cm5TdGF0dXNSZXNwb25zZVBheWxvYWQuZnJvbUpTT04odHVyblN0YXR1cyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGludGVyYWN0aW9uIGlkZW50aWZpZXIgYXNzb2NpYXRlZCB3aXRoIHRoaXMgdHVybiBzdGF0dXMgZXZlbnQuXG4gICAgICogQG1lbWJlciBUdXJuU3RhdHVzUmVjZWl2ZWRFdmVudEFyZ3MucHJvdG90eXBlLmludGVyYWN0aW9uSWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge2FueX0gdGhlIHJlY2VpdmVkIGludGVyYWN0aW9uIGlkLlxuICAgICAqL1xuICAgIGdldCBpbnRlcmFjdGlvbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VHVyblN0YXR1cy5pbnRlcmFjdGlvbklkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBjb252ZXJzYXRpb24gaWRlbnRpZmllciBhc3NvY2lhdGVkIHdpdGggdGhpcyB0dXJuIHN0YXR1cyBldmVudC5cbiAgICAgKiBAbWVtYmVyIFR1cm5TdGF0dXNSZWNlaXZlZEV2ZW50QXJncy5wcm90b3R5cGUuY29udmVyc2F0aW9uSWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge2FueX0gdGhlIHJlY2VpdmVkIGNvbnZlcnNhdGlvbiBpZC5cbiAgICAgKi9cbiAgICBnZXQgY29udmVyc2F0aW9uSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUdXJuU3RhdHVzLmNvbnZlcnNhdGlvbklkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSByZWNlaXZlZCB0dXJuIHN0YXR1cyBjb2RlLlxuICAgICAqIEBtZW1iZXIgVHVyblN0YXR1c1JlY2VpdmVkRXZlbnRBcmdzLnByb3RvdHlwZS5zdGF0dXNDb2RlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IHRoZSByZWNlaXZlZCB0dXJuIHN0YXR1cy5cbiAgICAgKi9cbiAgICBnZXQgc3RhdHVzQ29kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlR1cm5TdGF0dXMuc3RhdHVzQ29kZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLXJldHVyblxuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHVyblN0YXR1c1JlY2VpdmVkRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgdGhlIGdlbmRlciBvZiBzeW50aGVzaXMgdm9pY2VzLlxuICogQWRkZWQgaW4gdmVyc2lvbiAxLjIwLjAuXG4gKi9cbmV4cG9ydCB2YXIgU3ludGhlc2lzVm9pY2VHZW5kZXI7XG4oZnVuY3Rpb24gKFN5bnRoZXNpc1ZvaWNlR2VuZGVyKSB7XG4gICAgLyoqIEdlbmRlciB1bmtub3duICovXG4gICAgU3ludGhlc2lzVm9pY2VHZW5kZXJbU3ludGhlc2lzVm9pY2VHZW5kZXJbXCJVbmtub3duXCJdID0gMF0gPSBcIlVua25vd25cIjtcbiAgICAvKiogRmVtYWxlIHZvaWNlICovXG4gICAgU3ludGhlc2lzVm9pY2VHZW5kZXJbU3ludGhlc2lzVm9pY2VHZW5kZXJbXCJGZW1hbGVcIl0gPSAxXSA9IFwiRmVtYWxlXCI7XG4gICAgLyoqIE1hbGUgdm9pY2UgKi9cbiAgICBTeW50aGVzaXNWb2ljZUdlbmRlcltTeW50aGVzaXNWb2ljZUdlbmRlcltcIk1hbGVcIl0gPSAyXSA9IFwiTWFsZVwiO1xufSkoU3ludGhlc2lzVm9pY2VHZW5kZXIgfHwgKFN5bnRoZXNpc1ZvaWNlR2VuZGVyID0ge30pKTtcbmV4cG9ydCB2YXIgU3ludGhlc2lzVm9pY2VUeXBlO1xuKGZ1bmN0aW9uIChTeW50aGVzaXNWb2ljZVR5cGUpIHtcbiAgICBTeW50aGVzaXNWb2ljZVR5cGVbU3ludGhlc2lzVm9pY2VUeXBlW1wiT25saW5lTmV1cmFsXCJdID0gMV0gPSBcIk9ubGluZU5ldXJhbFwiO1xuICAgIFN5bnRoZXNpc1ZvaWNlVHlwZVtTeW50aGVzaXNWb2ljZVR5cGVbXCJPbmxpbmVTdGFuZGFyZFwiXSA9IDJdID0gXCJPbmxpbmVTdGFuZGFyZFwiO1xuICAgIFN5bnRoZXNpc1ZvaWNlVHlwZVtTeW50aGVzaXNWb2ljZVR5cGVbXCJPZmZsaW5lTmV1cmFsXCJdID0gM10gPSBcIk9mZmxpbmVOZXVyYWxcIjtcbiAgICBTeW50aGVzaXNWb2ljZVR5cGVbU3ludGhlc2lzVm9pY2VUeXBlW1wiT2ZmbGluZVN0YW5kYXJkXCJdID0gNF0gPSBcIk9mZmxpbmVTdGFuZGFyZFwiO1xufSkoU3ludGhlc2lzVm9pY2VUeXBlIHx8IChTeW50aGVzaXNWb2ljZVR5cGUgPSB7fSkpO1xuLyoqXG4gKiBJbmZvcm1hdGlvbiBhYm91dCBTcGVlY2ggU3ludGhlc2lzIHZvaWNlXG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMjAuMC5cbiAqIEBjbGFzcyBWb2ljZUluZm9cbiAqL1xuZXhwb3J0IGNsYXNzIFZvaWNlSW5mbyB7XG4gICAgY29uc3RydWN0b3IoanNvbikge1xuICAgICAgICB0aGlzLnByaXZTdHlsZUxpc3QgPSBbXTtcbiAgICAgICAgdGhpcy5wcml2Vm9pY2VQYXRoID0gXCJcIjtcbiAgICAgICAgaWYgKCEhanNvbikge1xuICAgICAgICAgICAgdGhpcy5wcml2TmFtZSA9IGpzb24uTmFtZTtcbiAgICAgICAgICAgIHRoaXMucHJpdkxvY2FsZSA9IGpzb24uTG9jYWxlO1xuICAgICAgICAgICAgdGhpcy5wcml2U2hvcnROYW1lID0ganNvbi5TaG9ydE5hbWU7XG4gICAgICAgICAgICB0aGlzLnByaXZMb2NhbE5hbWUgPSBqc29uLkxvY2FsTmFtZTtcbiAgICAgICAgICAgIHRoaXMucHJpdlZvaWNlVHlwZSA9IGpzb24uVm9pY2VUeXBlLmVuZHNXaXRoKFwiU3RhbmRhcmRcIikgPyBTeW50aGVzaXNWb2ljZVR5cGUuT25saW5lU3RhbmRhcmQgOiBTeW50aGVzaXNWb2ljZVR5cGUuT25saW5lTmV1cmFsO1xuICAgICAgICAgICAgdGhpcy5wcml2R2VuZGVyID0ganNvbi5HZW5kZXIgPT09IFwiTWFsZVwiID8gU3ludGhlc2lzVm9pY2VHZW5kZXIuTWFsZSA6IGpzb24uR2VuZGVyID09PSBcIkZlbWFsZVwiID8gU3ludGhlc2lzVm9pY2VHZW5kZXIuRmVtYWxlIDogU3ludGhlc2lzVm9pY2VHZW5kZXIuVW5rbm93bjtcbiAgICAgICAgICAgIGlmICghIWpzb24uU3R5bGVMaXN0ICYmIEFycmF5LmlzQXJyYXkoanNvbi5TdHlsZUxpc3QpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzdHlsZSBvZiBqc29uLlN0eWxlTGlzdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTdHlsZUxpc3QucHVzaChzdHlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TmFtZTtcbiAgICB9XG4gICAgZ2V0IGxvY2FsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkxvY2FsZTtcbiAgICB9XG4gICAgZ2V0IHNob3J0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNob3J0TmFtZTtcbiAgICB9XG4gICAgZ2V0IGxvY2FsTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkxvY2FsTmFtZTtcbiAgICB9XG4gICAgZ2V0IGdlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkdlbmRlcjtcbiAgICB9XG4gICAgZ2V0IHZvaWNlVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlZvaWNlVHlwZTtcbiAgICB9XG4gICAgZ2V0IHN0eWxlTGlzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlN0eWxlTGlzdDtcbiAgICB9XG4gICAgZ2V0IHZvaWNlUGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlZvaWNlUGF0aDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZvaWNlSW5mby5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBEZWZpbmVzIFZvaWNlIFByb2ZpbGUgY2xhc3MgZm9yIFNwZWFrZXIgUmVjb2duaXRpb25cbiAqIEBjbGFzcyBWb2ljZVByb2ZpbGVcbiAqL1xuZXhwb3J0IGNsYXNzIFZvaWNlUHJvZmlsZSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvZmlsZUlkIC0gcHJvZmlsZUlkIG9mIHRoaXMgVm9pY2UgUHJvZmlsZS5cbiAgICAgKiBAcGFyYW0ge1ZvaWNlUHJvZmlsZVR5cGV9IHByb2ZpbGVUeXBlIC0gcHJvZmlsZVR5cGUgb2YgdGhpcyBWb2ljZSBQcm9maWxlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHByb2ZpbGVJZCwgcHJvZmlsZVR5cGUpIHtcbiAgICAgICAgdGhpcy5wcml2SWQgPSBwcm9maWxlSWQ7XG4gICAgICAgIHRoaXMucHJpdlByb2ZpbGVUeXBlID0gcHJvZmlsZVR5cGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHByb2ZpbGVJZCBvZiB0aGlzIFZvaWNlIFByb2ZpbGUgaW5zdGFuY2VcbiAgICAgKiBAbWVtYmVyIFZvaWNlUHJvZmlsZS5wcm90b3R5cGUucHJvZmlsZUlkXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHByb2ZpbGVJZCBvZiB0aGlzIFZvaWNlIFByb2ZpbGUgaW5zdGFuY2UuXG4gICAgICovXG4gICAgZ2V0IHByb2ZpbGVJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBwcm9maWxlVHlwZSBvZiB0aGlzIFZvaWNlIFByb2ZpbGUgaW5zdGFuY2VcbiAgICAgKiBAbWVtYmVyIFZvaWNlUHJvZmlsZS5wcm90b3R5cGUucHJvZmlsZVR5cGVcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1ZvaWNlUHJvZmlsZVR5cGV9IHByb2ZpbGUgdHlwZSBvZiB0aGlzIFZvaWNlIFByb2ZpbGUgaW5zdGFuY2UuXG4gICAgICovXG4gICAgZ2V0IHByb2ZpbGVUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvZmlsZVR5cGU7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Wb2ljZVByb2ZpbGUuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgQ29udGV4dCwgT1MsIFNwZWFrZXJJZE1lc3NhZ2VBZGFwdGVyLCBTcGVha2VyUmVjb2duaXRpb25Db25maWcgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IFByb3BlcnR5SWQsIFJlc3VsdFJlYXNvbiwgVm9pY2VQcm9maWxlLCBWb2ljZVByb2ZpbGVFbnJvbGxtZW50UmVzdWx0LCBWb2ljZVByb2ZpbGVQaHJhc2VSZXN1bHQsIFZvaWNlUHJvZmlsZVJlc3VsdCwgVm9pY2VQcm9maWxlVHlwZSB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogRGVmaW5lcyBWb2ljZVByb2ZpbGVDbGllbnQgY2xhc3MgZm9yIFNwZWFrZXIgUmVjb2duaXRpb25cbiAqIEhhbmRsZXMgb3BlcmF0aW9ucyBmcm9tIHVzZXIgZm9yIFZvaWNlIFByb2ZpbGUgb3BlcmF0aW9ucyAoZS5nLiBjcmVhdGVQcm9maWxlLCBkZWxldGVQcm9maWxlKVxuICogQGNsYXNzIFZvaWNlUHJvZmlsZUNsaWVudFxuICovXG5leHBvcnQgY2xhc3MgVm9pY2VQcm9maWxlQ2xpZW50IHtcbiAgICAvKipcbiAgICAgKiBWb2ljZVByb2ZpbGVDbGllbnQgY29uc3RydWN0b3IuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtTcGVlY2hDb25maWd9IHNwZWVjaENvbmZpZyAtIEFuIHNldCBvZiBpbml0aWFsIHByb3BlcnRpZXMgZm9yIHRoaXMgc3ludGhlc2l6ZXIgKGF1dGhlbnRpY2F0aW9uIGtleSwgcmVnaW9uLCAmYylcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzcGVlY2hDb25maWcpIHtcbiAgICAgICAgY29uc3Qgc3BlZWNoQ29uZmlnSW1wbCA9IHNwZWVjaENvbmZpZztcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKHNwZWVjaENvbmZpZ0ltcGwsIFwic3BlZWNoQ29uZmlnXCIpO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gc3BlZWNoQ29uZmlnSW1wbC5wcm9wZXJ0aWVzLmNsb25lKCk7XG4gICAgICAgIHRoaXMuaW1wbENsaWVudFNldHVwKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIFZvaWNlUHJvZmlsZUNsaWVudC5cbiAgICAgKiBAbWVtYmVyIFZvaWNlUHJvZmlsZUNsaWVudC5wcm90b3R5cGUucHJvcGVydGllc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7UHJvcGVydHlDb2xsZWN0aW9ufSBUaGUgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMgZGVmaW5lZCBmb3IgdGhpcyBWb2ljZVByb2ZpbGVDbGllbnQuXG4gICAgICovXG4gICAgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBhdXRob3JpemF0aW9uIHRva2VuIHVzZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgc2VydmljZS5cbiAgICAgKiBAbWVtYmVyIFZvaWNlUHJvZmlsZUNsaWVudC5wcm90b3R5cGUuYXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICovXG4gICAgZ2V0IGF1dGhvcml6YXRpb25Ub2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cy9TZXRzIHRoZSBhdXRob3JpemF0aW9uIHRva2VuIHVzZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgc2VydmljZS5cbiAgICAgKiBAbWVtYmVyIFZvaWNlUHJvZmlsZUNsaWVudC5wcm90b3R5cGUuYXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIEF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICovXG4gICAgc2V0IGF1dGhvcml6YXRpb25Ub2tlbih0b2tlbikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodG9rZW4sIFwidG9rZW5cIik7XG4gICAgICAgIHRoaXMucHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCB0b2tlbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHNwZWFrZXIgcmVjb2duaXRpb24gdm9pY2UgcHJvZmlsZVxuICAgICAqIEBtZW1iZXIgVm9pY2VQcm9maWxlQ2xpZW50LnByb3RvdHlwZS5jcmVhdGVQcm9maWxlQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQGFzeW5jXG4gICAgICogQHBhcmFtIHtWb2ljZVByb2ZpbGVUeXBlfSBwcm9maWxlVHlwZSBUeXBlIG9mIFZvaWNlIFByb2ZpbGUgdG8gYmUgY3JlYXRlZFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5nIExhbmd1YWdlIHN0cmluZyAobG9jYWxlKSBmb3IgVm9pY2UgUHJvZmlsZVxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8Vm9pY2VQcm9maWxlPn0gLSBQcm9taXNlIG9mIGEgVm9pY2VQcm9maWxlLlxuICAgICAqL1xuICAgIGNyZWF0ZVByb2ZpbGVBc3luYyhwcm9maWxlVHlwZSwgbGFuZykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geWllbGQgdGhpcy5wcml2QWRhcHRlci5jcmVhdGVQcm9maWxlKHByb2ZpbGVUeXBlLCBsYW5nKTtcbiAgICAgICAgICAgIGlmICghcmVzdWx0Lm9rKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBjcmVhdGVQcm9maWxlQXN5bmMgZmFpbGVkIHdpdGggY29kZTogJHtyZXN1bHQuc3RhdHVzfSwgbWVzc2FnZTogJHtyZXN1bHQuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gcmVzdWx0Lmpzb247XG4gICAgICAgICAgICBjb25zdCBwcm9maWxlID0gbmV3IFZvaWNlUHJvZmlsZShyZXNwb25zZS5wcm9maWxlSWQsIHByb2ZpbGVUeXBlKTtcbiAgICAgICAgICAgIHJldHVybiBwcm9maWxlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGN1cnJlbnQgaW5mb3JtYXRpb24gb2YgYSB2b2ljZSBwcm9maWxlXG4gICAgICogQG1lbWJlciBWb2ljZVByb2ZpbGVDbGllbnQucHJvdG90eXBlLnJldHJpZXZlRW5yb2xsbWVudFJlc3VsdEFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBhc3luY1xuICAgICAqIEBwYXJhbSB7Vm9pY2VQcm9maWxlfSBwcm9maWxlIFZvaWNlIFByb2ZpbGUgdG8gcmV0cmlldmUgaW5mbyBmb3JcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFZvaWNlUHJvZmlsZUVucm9sbG1lbnRSZXN1bHQ+fSAtIFByb21pc2Ugb2YgYSBWb2ljZVByb2ZpbGVFbnJvbGxtZW50UmVzdWx0LlxuICAgICAqL1xuICAgIHJldHJpZXZlRW5yb2xsbWVudFJlc3VsdEFzeW5jKHByb2ZpbGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIHRoaXMucHJpdkFkYXB0ZXIuZ2V0UHJvZmlsZVN0YXR1cyhwcm9maWxlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVm9pY2VQcm9maWxlRW5yb2xsbWVudFJlc3VsdChyZXN1bHQub2sgPyBSZXN1bHRSZWFzb24uRW5yb2xsZWRWb2ljZVByb2ZpbGUgOiBSZXN1bHRSZWFzb24uQ2FuY2VsZWQsIHJlc3VsdC5kYXRhLCByZXN1bHQuc3RhdHVzVGV4dCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIHZvaWNlIHByb2ZpbGVzIG9uIGFjY291bnQgd2l0aCBnaXZlbiB2b2ljZSBwcm9maWxlIHR5cGVcbiAgICAgKiBAbWVtYmVyIFZvaWNlUHJvZmlsZUNsaWVudC5wcm90b3R5cGUuZ2V0QWxsUHJvZmlsZXNBc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAYXN5bmNcbiAgICAgKiBAcGFyYW0ge1ZvaWNlUHJvZmlsZVR5cGV9IHByb2ZpbGVUeXBlIHByb2ZpbGUgdHlwZSAoaWRlbnRpZmljYXRpb24vdmVyaWZpY2F0aW9uKSBmb3Igd2hpY2ggdG8gbGlzdCBwcm9maWxlc1xuICAgICAqIEByZXR1cm4ge1Byb21pc2U8Vm9pY2VQcm9maWxlRW5yb2xsbWVudFJlc3VsdFtdPn0gLSBQcm9taXNlIG9mIGFuIGFycmF5IG9mIFZvaWNlUHJvZmlsZUVucm9sbG1lbnRSZXN1bHRzLlxuICAgICAqL1xuICAgIGdldEFsbFByb2ZpbGVzQXN5bmMocHJvZmlsZVR5cGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIHRoaXMucHJpdkFkYXB0ZXIuZ2V0UHJvZmlsZXMocHJvZmlsZVR5cGUpO1xuICAgICAgICAgICAgaWYgKHByb2ZpbGVUeXBlID09PSBWb2ljZVByb2ZpbGVUeXBlLlRleHRJbmRlcGVuZGVudElkZW50aWZpY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFZvaWNlUHJvZmlsZUVucm9sbG1lbnRSZXN1bHQuRnJvbUlkZW50aWZpY2F0aW9uUHJvZmlsZUxpc3QocmVzdWx0Lmpzb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFZvaWNlUHJvZmlsZUVucm9sbG1lbnRSZXN1bHQuRnJvbVZlcmlmaWNhdGlvblByb2ZpbGVMaXN0KHJlc3VsdC5qc29uKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB2YWxpZCBhdXRob3JpemF0aW9uIHBocmFzZXMgZm9yIHZvaWNlIHByb2ZpbGUgZW5yb2xsbWVudFxuICAgICAqIEBtZW1iZXIgVm9pY2VQcm9maWxlQ2xpZW50LnByb3RvdHlwZS5nZXRBdXRob3JpemF0aW9uUGhyYXNlc0FzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBhc3luY1xuICAgICAqIEBwYXJhbSB7Vm9pY2VQcm9maWxlVHlwZX0gcHJvZmlsZVR5cGUgUHJvZmlsZSBUeXBlIHRvIGdldCBhY3RpdmF0aW9uIHBocmFzZXMgZm9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmcgTGFuZ3VhZ2Ugc3RyaW5nIChsb2NhbGUpIGZvciBWb2ljZSBQcm9maWxlXG4gICAgICovXG4gICAgZ2V0QWN0aXZhdGlvblBocmFzZXNBc3luYyhwcm9maWxlVHlwZSwgbGFuZykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geWllbGQgdGhpcy5wcml2QWRhcHRlci5nZXRQaHJhc2VzKHByb2ZpbGVUeXBlLCBsYW5nKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVm9pY2VQcm9maWxlUGhyYXNlUmVzdWx0KHJlc3VsdC5vayA/IFJlc3VsdFJlYXNvbi5FbnJvbGxpbmdWb2ljZVByb2ZpbGUgOiBSZXN1bHRSZWFzb24uQ2FuY2VsZWQsIHJlc3VsdC5zdGF0dXNUZXh0LCByZXN1bHQuanNvbik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBzcGVha2VyIHJlY29nbml0aW9uIHZvaWNlIHByb2ZpbGVcbiAgICAgKiBAbWVtYmVyIFZvaWNlUHJvZmlsZUNsaWVudC5wcm90b3R5cGUuZW5yb2xsUHJvZmlsZUFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBhc3luY1xuICAgICAqIEBwYXJhbSB7Vm9pY2VQcm9maWxlfSBwcm9maWxlIFZvaWNlIFByb2ZpbGUgdG8gY3JlYXRlIGVucm9sbG1lbnQgZm9yXG4gICAgICogQHBhcmFtIHtBdWRpb0NvbmZpZ30gYXVkaW9Db25maWcgc291cmNlIGluZm8gZnJvbSB3aGljaCB0byBjcmVhdGUgZW5yb2xsbWVudFxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8Vm9pY2VQcm9maWxlRW5yb2xsbWVudFJlc3VsdD59IC0gUHJvbWlzZSBvZiBhIFZvaWNlUHJvZmlsZUVucm9sbG1lbnRSZXN1bHQuXG4gICAgICovXG4gICAgZW5yb2xsUHJvZmlsZUFzeW5jKHByb2ZpbGUsIGF1ZGlvQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBjb25maWdJbXBsID0gYXVkaW9Db25maWc7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChjb25maWdJbXBsLCBcImF1ZGlvQ29uZmlnXCIpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geWllbGQgdGhpcy5wcml2QWRhcHRlci5jcmVhdGVFbnJvbGxtZW50KHByb2ZpbGUsIGNvbmZpZ0ltcGwpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWb2ljZVByb2ZpbGVFbnJvbGxtZW50UmVzdWx0KHJlc3VsdC5vayA/IFJlc3VsdFJlYXNvbi5FbnJvbGxlZFZvaWNlUHJvZmlsZSA6IFJlc3VsdFJlYXNvbi5DYW5jZWxlZCwgcmVzdWx0LmRhdGEsIHJlc3VsdC5zdGF0dXNUZXh0KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBhIHNwZWFrZXIgcmVjb2duaXRpb24gdm9pY2UgcHJvZmlsZVxuICAgICAqIEBtZW1iZXIgVm9pY2VQcm9maWxlQ2xpZW50LnByb3RvdHlwZS5kZWxldGVQcm9maWxlQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQGFzeW5jXG4gICAgICogQHBhcmFtIHtWb2ljZVByb2ZpbGV9IHByb2ZpbGUgVm9pY2UgUHJvZmlsZSB0byBiZSBkZWxldGVkXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxWb2ljZVByb2ZpbGVSZXN1bHQ+fSAtIFByb21pc2Ugb2YgYSBWb2ljZVByb2ZpbGVSZXN1bHQuXG4gICAgICovXG4gICAgZGVsZXRlUHJvZmlsZUFzeW5jKHByb2ZpbGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIHRoaXMucHJpdkFkYXB0ZXIuZGVsZXRlUHJvZmlsZShwcm9maWxlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFJlc3VsdChyZXN1bHQsIFJlc3VsdFJlYXNvbi5EZWxldGVkVm9pY2VQcm9maWxlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbGwgZW5yb2xsbWVudHMgZm9yIGEgc3BlYWtlciByZWNvZ25pdGlvbiB2b2ljZSBwcm9maWxlXG4gICAgICogQG1lbWJlciBWb2ljZVByb2ZpbGVDbGllbnQucHJvdG90eXBlLnJlc2V0UHJvZmlsZUFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBhc3luY1xuICAgICAqIEBwYXJhbSB7Vm9pY2VQcm9maWxlfSBwcm9maWxlIFZvaWNlIFByb2ZpbGUgdG8gYmUgcmVzZXRcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFZvaWNlUHJvZmlsZVJlc3VsdD59IC0gUHJvbWlzZSBvZiBhIFZvaWNlUHJvZmlsZVJlc3VsdC5cbiAgICAgKi9cbiAgICByZXNldFByb2ZpbGVBc3luYyhwcm9maWxlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB5aWVsZCB0aGlzLnByaXZBZGFwdGVyLnJlc2V0UHJvZmlsZShwcm9maWxlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFJlc3VsdChyZXN1bHQsIFJlc3VsdFJlYXNvbi5SZXNldFZvaWNlUHJvZmlsZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmNsdWRlZCBmb3IgY29tcGF0aWJpbGl0eVxuICAgICAqIEBtZW1iZXIgVm9pY2VQcm9maWxlQ2xpZW50LnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBEb2VzIGNsYXNzIHNldHVwLCBzd2lwZWQgZnJvbSBSZWNvZ25pemVyLlxuICAgIGltcGxDbGllbnRTZXR1cCgpIHtcbiAgICAgICAgbGV0IG9zUGxhdGZvcm0gPSAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikgPyBcIkJyb3dzZXJcIiA6IFwiTm9kZVwiO1xuICAgICAgICBsZXQgb3NOYW1lID0gXCJ1bmtub3duXCI7XG4gICAgICAgIGxldCBvc1ZlcnNpb24gPSBcInVua25vd25cIjtcbiAgICAgICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIG9zUGxhdGZvcm0gPSBvc1BsYXRmb3JtICsgXCIvXCIgKyBuYXZpZ2F0b3IucGxhdGZvcm07XG4gICAgICAgICAgICBvc05hbWUgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICAgICAgICAgICAgb3NWZXJzaW9uID0gbmF2aWdhdG9yLmFwcFZlcnNpb247XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVjb2duaXplckNvbmZpZyA9IG5ldyBTcGVha2VyUmVjb2duaXRpb25Db25maWcobmV3IENvbnRleHQobmV3IE9TKG9zUGxhdGZvcm0sIG9zTmFtZSwgb3NWZXJzaW9uKSksIHRoaXMucHJpdlByb3BlcnRpZXMpO1xuICAgICAgICB0aGlzLnByaXZBZGFwdGVyID0gbmV3IFNwZWFrZXJJZE1lc3NhZ2VBZGFwdGVyKHJlY29nbml6ZXJDb25maWcpO1xuICAgIH1cbiAgICBnZXRSZXN1bHQocmVzdWx0LCBzdWNjZXNzUmVhc29uKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gbmV3IFZvaWNlUHJvZmlsZVJlc3VsdChyZXN1bHQub2sgPyBzdWNjZXNzUmVhc29uIDogUmVzdWx0UmVhc29uLkNhbmNlbGVkLCByZXN1bHQuc3RhdHVzVGV4dCk7XG4gICAgICAgIHJldHVybiAocmVzcG9uc2UpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Vm9pY2VQcm9maWxlQ2xpZW50LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtY2xhc3Nlcy1wZXItZmlsZSAqL1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRGV0YWlsc0Jhc2UsIENhbmNlbGxhdGlvbkVycm9yQ29kZSwgQ2FuY2VsbGF0aW9uUmVhc29uLCBQcm9wZXJ0eUNvbGxlY3Rpb24sIFJlc3VsdFJlYXNvbiB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbmNvbnN0IHBhcnNlID0gKGpzb24pID0+IEpTT04ucGFyc2UoanNvbik7XG4vKipcbiAqIE91dHB1dCBmb3JtYXRcbiAqIEBjbGFzcyBWb2ljZVByb2ZpbGVFbnJvbGxtZW50UmVzdWx0XG4gKi9cbmV4cG9ydCBjbGFzcyBWb2ljZVByb2ZpbGVFbnJvbGxtZW50UmVzdWx0IHtcbiAgICBjb25zdHJ1Y3RvcihyZWFzb24sIGpzb24sIHN0YXR1c1RleHQpIHtcbiAgICAgICAgdGhpcy5wcml2UmVhc29uID0gcmVhc29uO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICBpZiAodGhpcy5wcml2UmVhc29uICE9PSBSZXN1bHRSZWFzb24uQ2FuY2VsZWQpIHtcbiAgICAgICAgICAgIGlmICghIWpzb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZEZXRhaWxzID0gcGFyc2UoanNvbik7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdkRldGFpbHMuZW5yb2xsbWVudFN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSBcImVucm9sbGluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IFJlc3VsdFJlYXNvbi5FbnJvbGxpbmdWb2ljZVByb2ZpbGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2RXJyb3JEZXRhaWxzID0gc3RhdHVzVGV4dDtcbiAgICAgICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBDYW5jZWxsYXRpb25FcnJvckNvZGVbQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLlNlcnZpY2VFcnJvcl0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCByZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgfVxuICAgIGdldCBlbnJvbGxtZW50c0NvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RGV0YWlscy5lbnJvbGxtZW50c0NvdW50O1xuICAgIH1cbiAgICBnZXQgZW5yb2xsbWVudHNMZW5ndGhJblNlYygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkRldGFpbHMuZW5yb2xsbWVudHNMZW5ndGhJblNlYztcbiAgICB9XG4gICAgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzO1xuICAgIH1cbiAgICBnZXQgZW5yb2xsbWVudFJlc3VsdERldGFpbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEZXRhaWxzO1xuICAgIH1cbiAgICBnZXQgZXJyb3JEZXRhaWxzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3JEZXRhaWxzO1xuICAgIH1cbiAgICBzdGF0aWMgRnJvbUlkZW50aWZpY2F0aW9uUHJvZmlsZUxpc3QoanNvbikge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBqc29uLnZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCByZWFzb24gPSBpdGVtLmVucm9sbG1lbnRTdGF0dXMudG9Mb3dlckNhc2UoKSA9PT0gXCJlbnJvbGxpbmdcIiA/XG4gICAgICAgICAgICAgICAgUmVzdWx0UmVhc29uLkVucm9sbGluZ1ZvaWNlUHJvZmlsZSA6IGl0ZW0uZW5yb2xsbWVudFN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSBcImVucm9sbGVkXCIgP1xuICAgICAgICAgICAgICAgIFJlc3VsdFJlYXNvbi5FbnJvbGxlZFZvaWNlUHJvZmlsZSA6IFJlc3VsdFJlYXNvbi5DYW5jZWxlZDtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBWb2ljZVByb2ZpbGVFbnJvbGxtZW50UmVzdWx0KHJlYXNvbiwgbnVsbCwgbnVsbCk7XG4gICAgICAgICAgICByZXN1bHQucHJpdkRldGFpbHMgPSB0aGlzLmdldElkZW50aWZpY2F0aW9uRGV0YWlscyhpdGVtKTtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cbiAgICBzdGF0aWMgRnJvbVZlcmlmaWNhdGlvblByb2ZpbGVMaXN0KGpzb24pIHtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YganNvbi52YWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgcmVhc29uID0gaXRlbS5lbnJvbGxtZW50U3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09IFwiZW5yb2xsaW5nXCIgP1xuICAgICAgICAgICAgICAgIFJlc3VsdFJlYXNvbi5FbnJvbGxpbmdWb2ljZVByb2ZpbGUgOiBpdGVtLmVucm9sbG1lbnRTdGF0dXMudG9Mb3dlckNhc2UoKSA9PT0gXCJlbnJvbGxlZFwiID9cbiAgICAgICAgICAgICAgICBSZXN1bHRSZWFzb24uRW5yb2xsZWRWb2ljZVByb2ZpbGUgOiBSZXN1bHRSZWFzb24uQ2FuY2VsZWQ7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVm9pY2VQcm9maWxlRW5yb2xsbWVudFJlc3VsdChyZWFzb24sIG51bGwsIG51bGwpO1xuICAgICAgICAgICAgcmVzdWx0LnByaXZEZXRhaWxzID0gdGhpcy5nZXRWZXJpZmljYXRpb25EZXRhaWxzKGl0ZW0pO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRJZGVudGlmaWNhdGlvbkRldGFpbHMoanNvbikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXVkaW9MZW5ndGhJblNlYzoganNvbi5hdWRpb0xlbmd0aEluU2VjID8gcGFyc2VGbG9hdChqc29uLmF1ZGlvTGVuZ3RoSW5TZWMpIDogMCxcbiAgICAgICAgICAgIGF1ZGlvU3BlZWNoTGVuZ3RoSW5TZWM6IGpzb24uYXVkaW9TcGVlY2hMZW5ndGhJblNlYyA/IHBhcnNlRmxvYXQoanNvbi5hdWRpb1NwZWVjaExlbmd0aEluU2VjKSA6IDAsXG4gICAgICAgICAgICBlbnJvbGxtZW50U3RhdHVzOiBqc29uLmVucm9sbG1lbnRTdGF0dXMsXG4gICAgICAgICAgICBlbnJvbGxtZW50c0NvdW50OiBqc29uLmVucm9sbG1lbnRzQ291bnQgfHwgMCxcbiAgICAgICAgICAgIGVucm9sbG1lbnRzTGVuZ3RoSW5TZWM6IGpzb24uZW5yb2xsbWVudHNMZW5ndGhJblNlYyA/IHBhcnNlRmxvYXQoanNvbi5lbnJvbGxtZW50c0xlbmd0aEluU2VjKSA6IDAsXG4gICAgICAgICAgICBlbnJvbGxtZW50c1NwZWVjaExlbmd0aEluU2VjOiBqc29uLmVucm9sbG1lbnRzU3BlZWNoTGVuZ3RoSW5TZWMgPyBwYXJzZUZsb2F0KGpzb24uZW5yb2xsbWVudHNTcGVlY2hMZW5ndGhJblNlYykgOiAwLFxuICAgICAgICAgICAgcHJvZmlsZUlkOiBqc29uLnByb2ZpbGVJZCB8fCBqc29uLmlkZW50aWZpY2F0aW9uUHJvZmlsZUlkLFxuICAgICAgICAgICAgcmVtYWluaW5nRW5yb2xsbWVudHNTcGVlY2hMZW5ndGhJblNlYzoganNvbi5yZW1haW5pbmdFbnJvbGxtZW50c1NwZWVjaExlbmd0aEluU2VjID8gcGFyc2VGbG9hdChqc29uLnJlbWFpbmluZ0Vucm9sbG1lbnRzU3BlZWNoTGVuZ3RoSW5TZWMpIDogMFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0VmVyaWZpY2F0aW9uRGV0YWlscyhqc29uKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhdWRpb0xlbmd0aEluU2VjOiBqc29uLmF1ZGlvTGVuZ3RoSW5TZWMgPyBwYXJzZUZsb2F0KGpzb24uYXVkaW9MZW5ndGhJblNlYykgOiAwLFxuICAgICAgICAgICAgYXVkaW9TcGVlY2hMZW5ndGhJblNlYzoganNvbi5hdWRpb1NwZWVjaExlbmd0aEluU2VjID8gcGFyc2VGbG9hdChqc29uLmF1ZGlvU3BlZWNoTGVuZ3RoSW5TZWMpIDogMCxcbiAgICAgICAgICAgIGVucm9sbG1lbnRTdGF0dXM6IGpzb24uZW5yb2xsbWVudFN0YXR1cyxcbiAgICAgICAgICAgIGVucm9sbG1lbnRzQ291bnQ6IGpzb24uZW5yb2xsbWVudHNDb3VudCxcbiAgICAgICAgICAgIGVucm9sbG1lbnRzTGVuZ3RoSW5TZWM6IGpzb24uZW5yb2xsbWVudHNMZW5ndGhJblNlYyA/IHBhcnNlRmxvYXQoanNvbi5lbnJvbGxtZW50c0xlbmd0aEluU2VjKSA6IDAsXG4gICAgICAgICAgICBlbnJvbGxtZW50c1NwZWVjaExlbmd0aEluU2VjOiBqc29uLmVucm9sbG1lbnRzU3BlZWNoTGVuZ3RoSW5TZWMgPyBwYXJzZUZsb2F0KGpzb24uZW5yb2xsbWVudHNTcGVlY2hMZW5ndGhJblNlYykgOiAwLFxuICAgICAgICAgICAgcHJvZmlsZUlkOiBqc29uLnByb2ZpbGVJZCB8fCBqc29uLnZlcmlmaWNhdGlvblByb2ZpbGVJZCxcbiAgICAgICAgICAgIHJlbWFpbmluZ0Vucm9sbG1lbnRzQ291bnQ6IGpzb24ucmVtYWluaW5nRW5yb2xsbWVudHMgfHwganNvbi5yZW1haW5pbmdFbnJvbGxtZW50c0NvdW50LFxuICAgICAgICAgICAgcmVtYWluaW5nRW5yb2xsbWVudHNTcGVlY2hMZW5ndGhJblNlYzoganNvbi5yZW1haW5pbmdFbnJvbGxtZW50c1NwZWVjaExlbmd0aEluU2VjID8gcGFyc2VGbG9hdChqc29uLnJlbWFpbmluZ0Vucm9sbG1lbnRzU3BlZWNoTGVuZ3RoSW5TZWMpIDogMFxuICAgICAgICB9O1xuICAgIH1cbn1cbi8qKlxuICogQGNsYXNzIFZvaWNlUHJvZmlsZUVucm9sbG1lbnRDYW5jZWxsYXRpb25EZXRhaWxzXG4gKi9cbmV4cG9ydCBjbGFzcyBWb2ljZVByb2ZpbGVFbnJvbGxtZW50Q2FuY2VsbGF0aW9uRGV0YWlscyBleHRlbmRzIENhbmNlbGxhdGlvbkRldGFpbHNCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihyZWFzb24sIGVycm9yRGV0YWlscywgZXJyb3JDb2RlKSB7XG4gICAgICAgIHN1cGVyKHJlYXNvbiwgZXJyb3JEZXRhaWxzLCBlcnJvckNvZGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIFZvaWNlUHJvZmlsZUVucm9sbG1lbnRDYW5jZWxsYXRpb25EZXRhaWxzIG9iamVjdCBmb3IgdGhlIGNhbmNlbGVkIFZvaWNlUHJvZmlsZUVucm9sbG1lbnRSZXN1bHQuXG4gICAgICogQG1lbWJlciBWb2ljZVByb2ZpbGVFbnJvbGxtZW50Q2FuY2VsbGF0aW9uRGV0YWlscy5mcm9tUmVzdWx0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7Vm9pY2VQcm9maWxlRW5yb2xsbWVudFJlc3VsdH0gcmVzdWx0IC0gVGhlIHJlc3VsdCB0aGF0IHdhcyBjYW5jZWxlZC5cbiAgICAgKiBAcmV0dXJucyB7Vm9pY2VQcm9maWxlRW5yb2xsbWVudENhbmNlbGxhdGlvbkRldGFpbHN9IFRoZSBjYW5jZWxsYXRpb24gZGV0YWlscyBvYmplY3QgYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVJlc3VsdChyZXN1bHQpIHtcbiAgICAgICAgY29uc3QgcmVhc29uID0gQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yO1xuICAgICAgICBsZXQgZXJyb3JDb2RlID0gQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLk5vRXJyb3I7XG4gICAgICAgIGlmICghIXJlc3VsdC5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBlcnJvckNvZGUgPSBDYW5jZWxsYXRpb25FcnJvckNvZGVbcmVzdWx0LnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBDYW5jZWxsYXRpb25FcnJvckNvZGVbQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLk5vRXJyb3JdKV07IC8vZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgVm9pY2VQcm9maWxlRW5yb2xsbWVudENhbmNlbGxhdGlvbkRldGFpbHMocmVhc29uLCByZXN1bHQuZXJyb3JEZXRhaWxzLCBlcnJvckNvZGUpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Vm9pY2VQcm9maWxlRW5yb2xsbWVudFJlc3VsdC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBWb2ljZVByb2ZpbGVSZXN1bHQgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIE91dHB1dCBmb3JtYXRcbiAqIEBjbGFzcyBWb2ljZVByb2ZpbGVQaHJhc2VSZXN1bHRcbiAqL1xuZXhwb3J0IGNsYXNzIFZvaWNlUHJvZmlsZVBocmFzZVJlc3VsdCBleHRlbmRzIFZvaWNlUHJvZmlsZVJlc3VsdCB7XG4gICAgY29uc3RydWN0b3IocmVhc29uLCBzdGF0dXNUZXh0LCBqc29uKSB7XG4gICAgICAgIHN1cGVyKHJlYXNvbiwgc3RhdHVzVGV4dCk7XG4gICAgICAgIHRoaXMucHJpdlBocmFzZXMgPSBbXTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoanNvbiwgXCJwaHJhc2UgcmVzdWx0IEpTT05cIik7XG4gICAgICAgIGlmICghIWpzb24udmFsdWUgJiYgISFqc29uLnZhbHVlWzBdKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YganNvbi52YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlBocmFzZXMucHVzaChpdGVtLnBhc3NQaHJhc2UgfHwgaXRlbS5hY3RpdmF0aW9uUGhyYXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgcGhyYXNlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlBocmFzZXM7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Wb2ljZVByb2ZpbGVQaHJhc2VSZXN1bHQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5pbXBvcnQgeyBDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IENhbmNlbGxhdGlvbkRldGFpbHNCYXNlLCBDYW5jZWxsYXRpb25FcnJvckNvZGUsIENhbmNlbGxhdGlvblJlYXNvbiwgUHJvcGVydHlDb2xsZWN0aW9uLCBSZXN1bHRSZWFzb24gfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIE91dHB1dCBmb3JtYXRcbiAqIEBjbGFzcyBWb2ljZVByb2ZpbGVSZXN1bHRcbiAqL1xuZXhwb3J0IGNsYXNzIFZvaWNlUHJvZmlsZVJlc3VsdCB7XG4gICAgY29uc3RydWN0b3IocmVhc29uLCBzdGF0dXNUZXh0KSB7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgaWYgKHJlYXNvbiA9PT0gUmVzdWx0UmVhc29uLkNhbmNlbGVkKSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChzdGF0dXNUZXh0LCBcInN0YXR1c1RleHRcIik7XG4gICAgICAgICAgICB0aGlzLnByaXZFcnJvckRldGFpbHMgPSBzdGF0dXNUZXh0O1xuICAgICAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIENhbmNlbGxhdGlvbkVycm9yQ29kZVtDYW5jZWxsYXRpb25FcnJvckNvZGUuU2VydmljZUVycm9yXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHJlYXNvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlYXNvbjtcbiAgICB9XG4gICAgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzO1xuICAgIH1cbiAgICBnZXQgZXJyb3JEZXRhaWxzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3JEZXRhaWxzO1xuICAgIH1cbn1cbi8qKlxuICogQGNsYXNzIFZvaWNlUHJvZmlsZUNhbmNlbGxhdGlvbkRldGFpbHNcbiAqL1xuZXhwb3J0IGNsYXNzIFZvaWNlUHJvZmlsZUNhbmNlbGxhdGlvbkRldGFpbHMgZXh0ZW5kcyBDYW5jZWxsYXRpb25EZXRhaWxzQmFzZSB7XG4gICAgY29uc3RydWN0b3IocmVhc29uLCBlcnJvckRldGFpbHMsIGVycm9yQ29kZSkge1xuICAgICAgICBzdXBlcihyZWFzb24sIGVycm9yRGV0YWlscywgZXJyb3JDb2RlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBWb2ljZVByb2ZpbGVDYW5jZWxsYXRpb25EZXRhaWxzIG9iamVjdCBmb3IgdGhlIGNhbmNlbGVkIFZvaWNlUHJvZmlsZVJlc3VsdC5cbiAgICAgKiBAbWVtYmVyIFZvaWNlUHJvZmlsZUNhbmNlbGxhdGlvbkRldGFpbHMuZnJvbVJlc3VsdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1ZvaWNlUHJvZmlsZVJlc3VsdH0gcmVzdWx0IC0gVGhlIHJlc3VsdCB0aGF0IHdhcyBjYW5jZWxlZC5cbiAgICAgKiBAcmV0dXJucyB7Vm9pY2VQcm9maWxlQ2FuY2VsbGF0aW9uRGV0YWlsc30gVGhlIGNhbmNlbGxhdGlvbiBkZXRhaWxzIG9iamVjdCBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tUmVzdWx0KHJlc3VsdCkge1xuICAgICAgICBjb25zdCByZWFzb24gPSBDYW5jZWxsYXRpb25SZWFzb24uRXJyb3I7XG4gICAgICAgIGxldCBlcnJvckNvZGUgPSBDYW5jZWxsYXRpb25FcnJvckNvZGUuTm9FcnJvcjtcbiAgICAgICAgaWYgKCEhcmVzdWx0LnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGVycm9yQ29kZSA9IENhbmNlbGxhdGlvbkVycm9yQ29kZVtyZXN1bHQucHJvcGVydGllcy5nZXRQcm9wZXJ0eShDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIENhbmNlbGxhdGlvbkVycm9yQ29kZVtDYW5jZWxsYXRpb25FcnJvckNvZGUuTm9FcnJvcl0pXTsgLy9lc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBWb2ljZVByb2ZpbGVDYW5jZWxsYXRpb25EZXRhaWxzKHJlYXNvbiwgcmVzdWx0LmVycm9yRGV0YWlscywgZXJyb3JDb2RlKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZvaWNlUHJvZmlsZVJlc3VsdC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBPdXRwdXQgZm9ybWF0XG4gKiBAY2xhc3MgVm9pY2VQcm9maWxlVHlwZVxuICovXG5leHBvcnQgdmFyIFZvaWNlUHJvZmlsZVR5cGU7XG4oZnVuY3Rpb24gKFZvaWNlUHJvZmlsZVR5cGUpIHtcbiAgICAvKipcbiAgICAgKiBUZXh0IGluZGVwZW5kZW50IHNwZWFrZXIgaWRlbnRpZmljYXRpb25cbiAgICAgKiBAbWVtYmVyIFZvaWNlUHJvZmlsZVR5cGUuVGV4dEluZGVwZW5kZW50SWRlbnRpZmljYXRpb25cbiAgICAgKi9cbiAgICBWb2ljZVByb2ZpbGVUeXBlW1ZvaWNlUHJvZmlsZVR5cGVbXCJUZXh0SW5kZXBlbmRlbnRJZGVudGlmaWNhdGlvblwiXSA9IDBdID0gXCJUZXh0SW5kZXBlbmRlbnRJZGVudGlmaWNhdGlvblwiO1xuICAgIC8qKlxuICAgICAqIFRleHQgZGVwZW5kZW50IHNwZWFrZXIgdmVyaWZpY2F0aW9uXG4gICAgICogQG1lbWJlciBWb2ljZVByb2ZpbGVUeXBlLlRleHREZXBlbmRlbnRWZXJpZmljYXRpb25cbiAgICAgKi9cbiAgICBWb2ljZVByb2ZpbGVUeXBlW1ZvaWNlUHJvZmlsZVR5cGVbXCJUZXh0RGVwZW5kZW50VmVyaWZpY2F0aW9uXCJdID0gMV0gPSBcIlRleHREZXBlbmRlbnRWZXJpZmljYXRpb25cIjtcbiAgICAvKipcbiAgICAgKiBUZXh0IGluZGVwZW5kZW50IHNwZWFrZXIgdmVyaWZpY2F0aW9uXG4gICAgICogQG1lbWJlciBWb2ljZVByb2ZpbGVUeXBlLlRleHRJbmRlcGVuZGVudFZlcmlmaWNhdGlvblxuICAgICAqL1xuICAgIFZvaWNlUHJvZmlsZVR5cGVbVm9pY2VQcm9maWxlVHlwZVtcIlRleHRJbmRlcGVuZGVudFZlcmlmaWNhdGlvblwiXSA9IDJdID0gXCJUZXh0SW5kZXBlbmRlbnRWZXJpZmljYXRpb25cIjtcbn0pKFZvaWNlUHJvZmlsZVR5cGUgfHwgKFZvaWNlUHJvZmlsZVR5cGUgPSB7fSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Wb2ljZVByb2ZpbGVUeXBlLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnXG4vKiBnbG9iYWwgZmV0Y2gsIGJ0b2EsIEhlYWRlcnMgKi9cbmNvbnN0IGNvcmUgPSByZXF1aXJlKCcuL2NvcmUnKVxuXG5jbGFzcyBTdGF0dXNFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IgKHJlcywgLi4ucGFyYW1zKSB7XG4gICAgc3VwZXIoLi4ucGFyYW1zKVxuXG4gICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBTdGF0dXNFcnJvcilcbiAgICB9XG5cbiAgICB0aGlzLm5hbWUgPSAnU3RhdHVzRXJyb3InXG4gICAgdGhpcy5tZXNzYWdlID0gcmVzLnN0YXR1c01lc3NhZ2VcbiAgICB0aGlzLnN0YXR1c0NvZGUgPSByZXMuc3RhdHVzXG4gICAgdGhpcy5yZXMgPSByZXNcbiAgICB0aGlzLmpzb24gPSByZXMuanNvbi5iaW5kKHJlcylcbiAgICB0aGlzLnRleHQgPSByZXMudGV4dC5iaW5kKHJlcylcbiAgICB0aGlzLmFycmF5QnVmZmVyID0gcmVzLmFycmF5QnVmZmVyLmJpbmQocmVzKVxuICAgIGxldCBidWZmZXJcbiAgICBjb25zdCBnZXQgPSAoKSA9PiB7XG4gICAgICBpZiAoIWJ1ZmZlcikgYnVmZmVyID0gdGhpcy5hcnJheUJ1ZmZlcigpXG4gICAgICByZXR1cm4gYnVmZmVyXG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAncmVzcG9uc2VCb2R5JywgeyBnZXQgfSlcbiAgICAvLyBtYXRjaCBOb2RlLmpzIGhlYWRlcnMgb2JqZWN0XG4gICAgdGhpcy5oZWFkZXJzID0ge31cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiByZXMuaGVhZGVycy5lbnRyaWVzKCkpIHtcbiAgICAgIHRoaXMuaGVhZGVyc1trZXkudG9Mb3dlckNhc2UoKV0gPSB2YWx1ZVxuICAgIH1cbiAgfVxufVxuXG5jb25zdCBta3JlcXVlc3QgPSAoc3RhdHVzQ29kZXMsIG1ldGhvZCwgZW5jb2RpbmcsIGhlYWRlcnMsIGJhc2V1cmwpID0+IGFzeW5jIChfdXJsLCBib2R5LCBfaGVhZGVycyA9IHt9KSA9PiB7XG4gIF91cmwgPSBiYXNldXJsICsgKF91cmwgfHwgJycpXG4gIGxldCBwYXJzZWQgPSBuZXcgVVJMKF91cmwpXG5cbiAgaWYgKCFoZWFkZXJzKSBoZWFkZXJzID0ge31cbiAgaWYgKHBhcnNlZC51c2VybmFtZSkge1xuICAgIGhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCYXNpYyAnICsgYnRvYShwYXJzZWQudXNlcm5hbWUgKyAnOicgKyBwYXJzZWQucGFzc3dvcmQpXG4gICAgcGFyc2VkID0gbmV3IFVSTChwYXJzZWQucHJvdG9jb2wgKyAnLy8nICsgcGFyc2VkLmhvc3QgKyBwYXJzZWQucGF0aG5hbWUgKyBwYXJzZWQuc2VhcmNoKVxuICB9XG4gIGlmIChwYXJzZWQucHJvdG9jb2wgIT09ICdodHRwczonICYmIHBhcnNlZC5wcm90b2NvbCAhPT0gJ2h0dHA6Jykge1xuICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBwcm90b2NvbCwgJHtwYXJzZWQucHJvdG9jb2x9YClcbiAgfVxuXG4gIGlmIChib2R5KSB7XG4gICAgaWYgKGJvZHkgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fFxuICAgICAgQXJyYXlCdWZmZXIuaXNWaWV3KGJvZHkpIHx8XG4gICAgICB0eXBlb2YgYm9keSA9PT0gJ3N0cmluZydcbiAgICApIHtcbiAgICAgIC8vIG5vb3BcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBib2R5ID09PSAnb2JqZWN0Jykge1xuICAgICAgYm9keSA9IEpTT04uc3RyaW5naWZ5KGJvZHkpXG4gICAgICBoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gYm9keSB0eXBlLicpXG4gICAgfVxuICB9XG5cbiAgX2hlYWRlcnMgPSBuZXcgSGVhZGVycyh7IC4uLihoZWFkZXJzIHx8IHt9KSwgLi4uX2hlYWRlcnMgfSlcblxuICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2gocGFyc2VkLCB7IG1ldGhvZCwgaGVhZGVyczogX2hlYWRlcnMsIGJvZHkgfSlcbiAgcmVzcC5zdGF0dXNDb2RlID0gcmVzcC5zdGF0dXNcblxuICBpZiAoIXN0YXR1c0NvZGVzLmhhcyhyZXNwLnN0YXR1cykpIHtcbiAgICB0aHJvdyBuZXcgU3RhdHVzRXJyb3IocmVzcClcbiAgfVxuXG4gIGlmIChlbmNvZGluZyA9PT0gJ2pzb24nKSByZXR1cm4gcmVzcC5qc29uKClcbiAgZWxzZSBpZiAoZW5jb2RpbmcgPT09ICdidWZmZXInKSByZXR1cm4gcmVzcC5hcnJheUJ1ZmZlcigpXG4gIGVsc2UgaWYgKGVuY29kaW5nID09PSAnc3RyaW5nJykgcmV0dXJuIHJlc3AudGV4dCgpXG4gIGVsc2UgcmV0dXJuIHJlc3Bcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjb3JlKG1rcmVxdWVzdClcbiIsIid1c2Ugc3RyaWN0J1xuY29uc3QgZW5jb2RpbmdzID0gbmV3IFNldChbJ2pzb24nLCAnYnVmZmVyJywgJ3N0cmluZyddKVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1rcmVxdWVzdCA9PiAoLi4uYXJncykgPT4ge1xuICBjb25zdCBzdGF0dXNDb2RlcyA9IG5ldyBTZXQoKVxuICBsZXQgbWV0aG9kXG4gIGxldCBlbmNvZGluZ1xuICBsZXQgaGVhZGVyc1xuICBsZXQgYmFzZXVybCA9ICcnXG5cbiAgYXJncy5mb3JFYWNoKGFyZyA9PiB7XG4gICAgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAoYXJnLnRvVXBwZXJDYXNlKCkgPT09IGFyZykge1xuICAgICAgICBpZiAobWV0aG9kKSB7XG4gICAgICAgICAgY29uc3QgbXNnID0gYENhbid0IHNldCBtZXRob2QgdG8gJHthcmd9LCBhbHJlYWR5IHNldCB0byAke21ldGhvZH0uYFxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWV0aG9kID0gYXJnXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJnLnN0YXJ0c1dpdGgoJ2h0dHA6JykgfHwgYXJnLnN0YXJ0c1dpdGgoJ2h0dHBzOicpKSB7XG4gICAgICAgIGJhc2V1cmwgPSBhcmdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChlbmNvZGluZ3MuaGFzKGFyZykpIHtcbiAgICAgICAgICBlbmNvZGluZyA9IGFyZ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBlbmNvZGluZywgJHthcmd9YClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcbiAgICAgIHN0YXR1c0NvZGVzLmFkZChhcmcpXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnb2JqZWN0Jykge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSB8fCBhcmcgaW5zdGFuY2VvZiBTZXQpIHtcbiAgICAgICAgYXJnLmZvckVhY2goY29kZSA9PiBzdGF0dXNDb2Rlcy5hZGQoY29kZSkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaGVhZGVycykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHNldCBoZWFkZXJzIHR3aWNlLicpXG4gICAgICAgIH1cbiAgICAgICAgaGVhZGVycyA9IGFyZ1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gdHlwZTogJHt0eXBlb2YgYXJnfWApXG4gICAgfVxuICB9KVxuXG4gIGlmICghbWV0aG9kKSBtZXRob2QgPSAnR0VUJ1xuICBpZiAoc3RhdHVzQ29kZXMuc2l6ZSA9PT0gMCkge1xuICAgIHN0YXR1c0NvZGVzLmFkZCgyMDApXG4gIH1cblxuICByZXR1cm4gbWtyZXF1ZXN0KHN0YXR1c0NvZGVzLCBtZXRob2QsIGVuY29kaW5nLCBoZWFkZXJzLCBiYXNldXJsKVxufVxuIiwiZXhwb3J0IHsgZGVmYXVsdCBhcyB2MSB9IGZyb20gJy4vdjEuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB2MyB9IGZyb20gJy4vdjMuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB2NCB9IGZyb20gJy4vdjQuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB2NSB9IGZyb20gJy4vdjUuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBOSUwgfSBmcm9tICcuL25pbC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHZlcnNpb24gfSBmcm9tICcuL3ZlcnNpb24uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB2YWxpZGF0ZSB9IGZyb20gJy4vdmFsaWRhdGUuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBzdHJpbmdpZnkgfSBmcm9tICcuL3N0cmluZ2lmeS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHBhcnNlIH0gZnJvbSAnLi9wYXJzZS5qcyc7IiwiLypcbiAqIEJyb3dzZXItY29tcGF0aWJsZSBKYXZhU2NyaXB0IE1ENVxuICpcbiAqIE1vZGlmaWNhdGlvbiBvZiBKYXZhU2NyaXB0IE1ENVxuICogaHR0cHM6Ly9naXRodWIuY29tL2JsdWVpbXAvSmF2YVNjcmlwdC1NRDVcbiAqXG4gKiBDb3B5cmlnaHQgMjAxMSwgU2ViYXN0aWFuIFRzY2hhblxuICogaHR0cHM6Ly9ibHVlaW1wLm5ldFxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZTpcbiAqIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXG4gKlxuICogQmFzZWQgb25cbiAqIEEgSmF2YVNjcmlwdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgUlNBIERhdGEgU2VjdXJpdHksIEluYy4gTUQ1IE1lc3NhZ2VcbiAqIERpZ2VzdCBBbGdvcml0aG0sIGFzIGRlZmluZWQgaW4gUkZDIDEzMjEuXG4gKiBWZXJzaW9uIDIuMiBDb3B5cmlnaHQgKEMpIFBhdWwgSm9obnN0b24gMTk5OSAtIDIwMDlcbiAqIE90aGVyIGNvbnRyaWJ1dG9yczogR3JlZyBIb2x0LCBBbmRyZXcgS2VwZXJ0LCBZZG5hciwgTG9zdGluZXRcbiAqIERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBCU0QgTGljZW5zZVxuICogU2VlIGh0dHA6Ly9wYWpob21lLm9yZy51ay9jcnlwdC9tZDUgZm9yIG1vcmUgaW5mby5cbiAqL1xuZnVuY3Rpb24gbWQ1KGJ5dGVzKSB7XG4gIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIG1zZyA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChieXRlcykpOyAvLyBVVEY4IGVzY2FwZVxuXG4gICAgYnl0ZXMgPSBuZXcgVWludDhBcnJheShtc2cubGVuZ3RoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgKytpKSB7XG4gICAgICBieXRlc1tpXSA9IG1zZy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtZDVUb0hleEVuY29kZWRBcnJheSh3b3Jkc1RvTWQ1KGJ5dGVzVG9Xb3JkcyhieXRlcyksIGJ5dGVzLmxlbmd0aCAqIDgpKTtcbn1cbi8qXG4gKiBDb252ZXJ0IGFuIGFycmF5IG9mIGxpdHRsZS1lbmRpYW4gd29yZHMgdG8gYW4gYXJyYXkgb2YgYnl0ZXNcbiAqL1xuXG5cbmZ1bmN0aW9uIG1kNVRvSGV4RW5jb2RlZEFycmF5KGlucHV0KSB7XG4gIHZhciBvdXRwdXQgPSBbXTtcbiAgdmFyIGxlbmd0aDMyID0gaW5wdXQubGVuZ3RoICogMzI7XG4gIHZhciBoZXhUYWIgPSAnMDEyMzQ1Njc4OWFiY2RlZic7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGgzMjsgaSArPSA4KSB7XG4gICAgdmFyIHggPSBpbnB1dFtpID4+IDVdID4+PiBpICUgMzIgJiAweGZmO1xuICAgIHZhciBoZXggPSBwYXJzZUludChoZXhUYWIuY2hhckF0KHggPj4+IDQgJiAweDBmKSArIGhleFRhYi5jaGFyQXQoeCAmIDB4MGYpLCAxNik7XG4gICAgb3V0cHV0LnB1c2goaGV4KTtcbiAgfVxuXG4gIHJldHVybiBvdXRwdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZSBvdXRwdXQgbGVuZ3RoIHdpdGggcGFkZGluZyBhbmQgYml0IGxlbmd0aFxuICovXG5cblxuZnVuY3Rpb24gZ2V0T3V0cHV0TGVuZ3RoKGlucHV0TGVuZ3RoOCkge1xuICByZXR1cm4gKGlucHV0TGVuZ3RoOCArIDY0ID4+PiA5IDw8IDQpICsgMTQgKyAxO1xufVxuLypcbiAqIENhbGN1bGF0ZSB0aGUgTUQ1IG9mIGFuIGFycmF5IG9mIGxpdHRsZS1lbmRpYW4gd29yZHMsIGFuZCBhIGJpdCBsZW5ndGguXG4gKi9cblxuXG5mdW5jdGlvbiB3b3Jkc1RvTWQ1KHgsIGxlbikge1xuICAvKiBhcHBlbmQgcGFkZGluZyAqL1xuICB4W2xlbiA+PiA1XSB8PSAweDgwIDw8IGxlbiAlIDMyO1xuICB4W2dldE91dHB1dExlbmd0aChsZW4pIC0gMV0gPSBsZW47XG4gIHZhciBhID0gMTczMjU4NDE5MztcbiAgdmFyIGIgPSAtMjcxNzMzODc5O1xuICB2YXIgYyA9IC0xNzMyNTg0MTk0O1xuICB2YXIgZCA9IDI3MTczMzg3ODtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyBpICs9IDE2KSB7XG4gICAgdmFyIG9sZGEgPSBhO1xuICAgIHZhciBvbGRiID0gYjtcbiAgICB2YXIgb2xkYyA9IGM7XG4gICAgdmFyIG9sZGQgPSBkO1xuICAgIGEgPSBtZDVmZihhLCBiLCBjLCBkLCB4W2ldLCA3LCAtNjgwODc2OTM2KTtcbiAgICBkID0gbWQ1ZmYoZCwgYSwgYiwgYywgeFtpICsgMV0sIDEyLCAtMzg5NTY0NTg2KTtcbiAgICBjID0gbWQ1ZmYoYywgZCwgYSwgYiwgeFtpICsgMl0sIDE3LCA2MDYxMDU4MTkpO1xuICAgIGIgPSBtZDVmZihiLCBjLCBkLCBhLCB4W2kgKyAzXSwgMjIsIC0xMDQ0NTI1MzMwKTtcbiAgICBhID0gbWQ1ZmYoYSwgYiwgYywgZCwgeFtpICsgNF0sIDcsIC0xNzY0MTg4OTcpO1xuICAgIGQgPSBtZDVmZihkLCBhLCBiLCBjLCB4W2kgKyA1XSwgMTIsIDEyMDAwODA0MjYpO1xuICAgIGMgPSBtZDVmZihjLCBkLCBhLCBiLCB4W2kgKyA2XSwgMTcsIC0xNDczMjMxMzQxKTtcbiAgICBiID0gbWQ1ZmYoYiwgYywgZCwgYSwgeFtpICsgN10sIDIyLCAtNDU3MDU5ODMpO1xuICAgIGEgPSBtZDVmZihhLCBiLCBjLCBkLCB4W2kgKyA4XSwgNywgMTc3MDAzNTQxNik7XG4gICAgZCA9IG1kNWZmKGQsIGEsIGIsIGMsIHhbaSArIDldLCAxMiwgLTE5NTg0MTQ0MTcpO1xuICAgIGMgPSBtZDVmZihjLCBkLCBhLCBiLCB4W2kgKyAxMF0sIDE3LCAtNDIwNjMpO1xuICAgIGIgPSBtZDVmZihiLCBjLCBkLCBhLCB4W2kgKyAxMV0sIDIyLCAtMTk5MDQwNDE2Mik7XG4gICAgYSA9IG1kNWZmKGEsIGIsIGMsIGQsIHhbaSArIDEyXSwgNywgMTgwNDYwMzY4Mik7XG4gICAgZCA9IG1kNWZmKGQsIGEsIGIsIGMsIHhbaSArIDEzXSwgMTIsIC00MDM0MTEwMSk7XG4gICAgYyA9IG1kNWZmKGMsIGQsIGEsIGIsIHhbaSArIDE0XSwgMTcsIC0xNTAyMDAyMjkwKTtcbiAgICBiID0gbWQ1ZmYoYiwgYywgZCwgYSwgeFtpICsgMTVdLCAyMiwgMTIzNjUzNTMyOSk7XG4gICAgYSA9IG1kNWdnKGEsIGIsIGMsIGQsIHhbaSArIDFdLCA1LCAtMTY1Nzk2NTEwKTtcbiAgICBkID0gbWQ1Z2coZCwgYSwgYiwgYywgeFtpICsgNl0sIDksIC0xMDY5NTAxNjMyKTtcbiAgICBjID0gbWQ1Z2coYywgZCwgYSwgYiwgeFtpICsgMTFdLCAxNCwgNjQzNzE3NzEzKTtcbiAgICBiID0gbWQ1Z2coYiwgYywgZCwgYSwgeFtpXSwgMjAsIC0zNzM4OTczMDIpO1xuICAgIGEgPSBtZDVnZyhhLCBiLCBjLCBkLCB4W2kgKyA1XSwgNSwgLTcwMTU1ODY5MSk7XG4gICAgZCA9IG1kNWdnKGQsIGEsIGIsIGMsIHhbaSArIDEwXSwgOSwgMzgwMTYwODMpO1xuICAgIGMgPSBtZDVnZyhjLCBkLCBhLCBiLCB4W2kgKyAxNV0sIDE0LCAtNjYwNDc4MzM1KTtcbiAgICBiID0gbWQ1Z2coYiwgYywgZCwgYSwgeFtpICsgNF0sIDIwLCAtNDA1NTM3ODQ4KTtcbiAgICBhID0gbWQ1Z2coYSwgYiwgYywgZCwgeFtpICsgOV0sIDUsIDU2ODQ0NjQzOCk7XG4gICAgZCA9IG1kNWdnKGQsIGEsIGIsIGMsIHhbaSArIDE0XSwgOSwgLTEwMTk4MDM2OTApO1xuICAgIGMgPSBtZDVnZyhjLCBkLCBhLCBiLCB4W2kgKyAzXSwgMTQsIC0xODczNjM5NjEpO1xuICAgIGIgPSBtZDVnZyhiLCBjLCBkLCBhLCB4W2kgKyA4XSwgMjAsIDExNjM1MzE1MDEpO1xuICAgIGEgPSBtZDVnZyhhLCBiLCBjLCBkLCB4W2kgKyAxM10sIDUsIC0xNDQ0NjgxNDY3KTtcbiAgICBkID0gbWQ1Z2coZCwgYSwgYiwgYywgeFtpICsgMl0sIDksIC01MTQwMzc4NCk7XG4gICAgYyA9IG1kNWdnKGMsIGQsIGEsIGIsIHhbaSArIDddLCAxNCwgMTczNTMyODQ3Myk7XG4gICAgYiA9IG1kNWdnKGIsIGMsIGQsIGEsIHhbaSArIDEyXSwgMjAsIC0xOTI2NjA3NzM0KTtcbiAgICBhID0gbWQ1aGgoYSwgYiwgYywgZCwgeFtpICsgNV0sIDQsIC0zNzg1NTgpO1xuICAgIGQgPSBtZDVoaChkLCBhLCBiLCBjLCB4W2kgKyA4XSwgMTEsIC0yMDIyNTc0NDYzKTtcbiAgICBjID0gbWQ1aGgoYywgZCwgYSwgYiwgeFtpICsgMTFdLCAxNiwgMTgzOTAzMDU2Mik7XG4gICAgYiA9IG1kNWhoKGIsIGMsIGQsIGEsIHhbaSArIDE0XSwgMjMsIC0zNTMwOTU1Nik7XG4gICAgYSA9IG1kNWhoKGEsIGIsIGMsIGQsIHhbaSArIDFdLCA0LCAtMTUzMDk5MjA2MCk7XG4gICAgZCA9IG1kNWhoKGQsIGEsIGIsIGMsIHhbaSArIDRdLCAxMSwgMTI3Mjg5MzM1Myk7XG4gICAgYyA9IG1kNWhoKGMsIGQsIGEsIGIsIHhbaSArIDddLCAxNiwgLTE1NTQ5NzYzMik7XG4gICAgYiA9IG1kNWhoKGIsIGMsIGQsIGEsIHhbaSArIDEwXSwgMjMsIC0xMDk0NzMwNjQwKTtcbiAgICBhID0gbWQ1aGgoYSwgYiwgYywgZCwgeFtpICsgMTNdLCA0LCA2ODEyNzkxNzQpO1xuICAgIGQgPSBtZDVoaChkLCBhLCBiLCBjLCB4W2ldLCAxMSwgLTM1ODUzNzIyMik7XG4gICAgYyA9IG1kNWhoKGMsIGQsIGEsIGIsIHhbaSArIDNdLCAxNiwgLTcyMjUyMTk3OSk7XG4gICAgYiA9IG1kNWhoKGIsIGMsIGQsIGEsIHhbaSArIDZdLCAyMywgNzYwMjkxODkpO1xuICAgIGEgPSBtZDVoaChhLCBiLCBjLCBkLCB4W2kgKyA5XSwgNCwgLTY0MDM2NDQ4Nyk7XG4gICAgZCA9IG1kNWhoKGQsIGEsIGIsIGMsIHhbaSArIDEyXSwgMTEsIC00MjE4MTU4MzUpO1xuICAgIGMgPSBtZDVoaChjLCBkLCBhLCBiLCB4W2kgKyAxNV0sIDE2LCA1MzA3NDI1MjApO1xuICAgIGIgPSBtZDVoaChiLCBjLCBkLCBhLCB4W2kgKyAyXSwgMjMsIC05OTUzMzg2NTEpO1xuICAgIGEgPSBtZDVpaShhLCBiLCBjLCBkLCB4W2ldLCA2LCAtMTk4NjMwODQ0KTtcbiAgICBkID0gbWQ1aWkoZCwgYSwgYiwgYywgeFtpICsgN10sIDEwLCAxMTI2ODkxNDE1KTtcbiAgICBjID0gbWQ1aWkoYywgZCwgYSwgYiwgeFtpICsgMTRdLCAxNSwgLTE0MTYzNTQ5MDUpO1xuICAgIGIgPSBtZDVpaShiLCBjLCBkLCBhLCB4W2kgKyA1XSwgMjEsIC01NzQzNDA1NSk7XG4gICAgYSA9IG1kNWlpKGEsIGIsIGMsIGQsIHhbaSArIDEyXSwgNiwgMTcwMDQ4NTU3MSk7XG4gICAgZCA9IG1kNWlpKGQsIGEsIGIsIGMsIHhbaSArIDNdLCAxMCwgLTE4OTQ5ODY2MDYpO1xuICAgIGMgPSBtZDVpaShjLCBkLCBhLCBiLCB4W2kgKyAxMF0sIDE1LCAtMTA1MTUyMyk7XG4gICAgYiA9IG1kNWlpKGIsIGMsIGQsIGEsIHhbaSArIDFdLCAyMSwgLTIwNTQ5MjI3OTkpO1xuICAgIGEgPSBtZDVpaShhLCBiLCBjLCBkLCB4W2kgKyA4XSwgNiwgMTg3MzMxMzM1OSk7XG4gICAgZCA9IG1kNWlpKGQsIGEsIGIsIGMsIHhbaSArIDE1XSwgMTAsIC0zMDYxMTc0NCk7XG4gICAgYyA9IG1kNWlpKGMsIGQsIGEsIGIsIHhbaSArIDZdLCAxNSwgLTE1NjAxOTgzODApO1xuICAgIGIgPSBtZDVpaShiLCBjLCBkLCBhLCB4W2kgKyAxM10sIDIxLCAxMzA5MTUxNjQ5KTtcbiAgICBhID0gbWQ1aWkoYSwgYiwgYywgZCwgeFtpICsgNF0sIDYsIC0xNDU1MjMwNzApO1xuICAgIGQgPSBtZDVpaShkLCBhLCBiLCBjLCB4W2kgKyAxMV0sIDEwLCAtMTEyMDIxMDM3OSk7XG4gICAgYyA9IG1kNWlpKGMsIGQsIGEsIGIsIHhbaSArIDJdLCAxNSwgNzE4Nzg3MjU5KTtcbiAgICBiID0gbWQ1aWkoYiwgYywgZCwgYSwgeFtpICsgOV0sIDIxLCAtMzQzNDg1NTUxKTtcbiAgICBhID0gc2FmZUFkZChhLCBvbGRhKTtcbiAgICBiID0gc2FmZUFkZChiLCBvbGRiKTtcbiAgICBjID0gc2FmZUFkZChjLCBvbGRjKTtcbiAgICBkID0gc2FmZUFkZChkLCBvbGRkKTtcbiAgfVxuXG4gIHJldHVybiBbYSwgYiwgYywgZF07XG59XG4vKlxuICogQ29udmVydCBhbiBhcnJheSBieXRlcyB0byBhbiBhcnJheSBvZiBsaXR0bGUtZW5kaWFuIHdvcmRzXG4gKiBDaGFyYWN0ZXJzID4yNTUgaGF2ZSB0aGVpciBoaWdoLWJ5dGUgc2lsZW50bHkgaWdub3JlZC5cbiAqL1xuXG5cbmZ1bmN0aW9uIGJ5dGVzVG9Xb3JkcyhpbnB1dCkge1xuICBpZiAoaW5wdXQubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgdmFyIGxlbmd0aDggPSBpbnB1dC5sZW5ndGggKiA4O1xuICB2YXIgb3V0cHV0ID0gbmV3IFVpbnQzMkFycmF5KGdldE91dHB1dExlbmd0aChsZW5ndGg4KSk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg4OyBpICs9IDgpIHtcbiAgICBvdXRwdXRbaSA+PiA1XSB8PSAoaW5wdXRbaSAvIDhdICYgMHhmZikgPDwgaSAlIDMyO1xuICB9XG5cbiAgcmV0dXJuIG91dHB1dDtcbn1cbi8qXG4gKiBBZGQgaW50ZWdlcnMsIHdyYXBwaW5nIGF0IDJeMzIuIFRoaXMgdXNlcyAxNi1iaXQgb3BlcmF0aW9ucyBpbnRlcm5hbGx5XG4gKiB0byB3b3JrIGFyb3VuZCBidWdzIGluIHNvbWUgSlMgaW50ZXJwcmV0ZXJzLlxuICovXG5cblxuZnVuY3Rpb24gc2FmZUFkZCh4LCB5KSB7XG4gIHZhciBsc3cgPSAoeCAmIDB4ZmZmZikgKyAoeSAmIDB4ZmZmZik7XG4gIHZhciBtc3cgPSAoeCA+PiAxNikgKyAoeSA+PiAxNikgKyAobHN3ID4+IDE2KTtcbiAgcmV0dXJuIG1zdyA8PCAxNiB8IGxzdyAmIDB4ZmZmZjtcbn1cbi8qXG4gKiBCaXR3aXNlIHJvdGF0ZSBhIDMyLWJpdCBudW1iZXIgdG8gdGhlIGxlZnQuXG4gKi9cblxuXG5mdW5jdGlvbiBiaXRSb3RhdGVMZWZ0KG51bSwgY250KSB7XG4gIHJldHVybiBudW0gPDwgY250IHwgbnVtID4+PiAzMiAtIGNudDtcbn1cbi8qXG4gKiBUaGVzZSBmdW5jdGlvbnMgaW1wbGVtZW50IHRoZSBmb3VyIGJhc2ljIG9wZXJhdGlvbnMgdGhlIGFsZ29yaXRobSB1c2VzLlxuICovXG5cblxuZnVuY3Rpb24gbWQ1Y21uKHEsIGEsIGIsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIHNhZmVBZGQoYml0Um90YXRlTGVmdChzYWZlQWRkKHNhZmVBZGQoYSwgcSksIHNhZmVBZGQoeCwgdCkpLCBzKSwgYik7XG59XG5cbmZ1bmN0aW9uIG1kNWZmKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIG1kNWNtbihiICYgYyB8IH5iICYgZCwgYSwgYiwgeCwgcywgdCk7XG59XG5cbmZ1bmN0aW9uIG1kNWdnKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIG1kNWNtbihiICYgZCB8IGMgJiB+ZCwgYSwgYiwgeCwgcywgdCk7XG59XG5cbmZ1bmN0aW9uIG1kNWhoKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIG1kNWNtbihiIF4gYyBeIGQsIGEsIGIsIHgsIHMsIHQpO1xufVxuXG5mdW5jdGlvbiBtZDVpaShhLCBiLCBjLCBkLCB4LCBzLCB0KSB7XG4gIHJldHVybiBtZDVjbW4oYyBeIChiIHwgfmQpLCBhLCBiLCB4LCBzLCB0KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbWQ1OyIsImV4cG9ydCBkZWZhdWx0ICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAnOyIsImltcG9ydCB2YWxpZGF0ZSBmcm9tICcuL3ZhbGlkYXRlLmpzJztcblxuZnVuY3Rpb24gcGFyc2UodXVpZCkge1xuICBpZiAoIXZhbGlkYXRlKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdJbnZhbGlkIFVVSUQnKTtcbiAgfVxuXG4gIHZhciB2O1xuICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMTYpOyAvLyBQYXJzZSAjIyMjIyMjIy0uLi4uLS4uLi4tLi4uLi0uLi4uLi4uLi4uLi5cblxuICBhcnJbMF0gPSAodiA9IHBhcnNlSW50KHV1aWQuc2xpY2UoMCwgOCksIDE2KSkgPj4+IDI0O1xuICBhcnJbMV0gPSB2ID4+PiAxNiAmIDB4ZmY7XG4gIGFyclsyXSA9IHYgPj4+IDggJiAweGZmO1xuICBhcnJbM10gPSB2ICYgMHhmZjsgLy8gUGFyc2UgLi4uLi4uLi4tIyMjIy0uLi4uLS4uLi4tLi4uLi4uLi4uLi4uXG5cbiAgYXJyWzRdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDksIDEzKSwgMTYpKSA+Pj4gODtcbiAgYXJyWzVdID0gdiAmIDB4ZmY7IC8vIFBhcnNlIC4uLi4uLi4uLS4uLi4tIyMjIy0uLi4uLS4uLi4uLi4uLi4uLlxuXG4gIGFycls2XSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSgxNCwgMTgpLCAxNikpID4+PiA4O1xuICBhcnJbN10gPSB2ICYgMHhmZjsgLy8gUGFyc2UgLi4uLi4uLi4tLi4uLi0uLi4uLSMjIyMtLi4uLi4uLi4uLi4uXG5cbiAgYXJyWzhdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDE5LCAyMyksIDE2KSkgPj4+IDg7XG4gIGFycls5XSA9IHYgJiAweGZmOyAvLyBQYXJzZSAuLi4uLi4uLi0uLi4uLS4uLi4tLi4uLi0jIyMjIyMjIyMjIyNcbiAgLy8gKFVzZSBcIi9cIiB0byBhdm9pZCAzMi1iaXQgdHJ1bmNhdGlvbiB3aGVuIGJpdC1zaGlmdGluZyBoaWdoLW9yZGVyIGJ5dGVzKVxuXG4gIGFyclsxMF0gPSAodiA9IHBhcnNlSW50KHV1aWQuc2xpY2UoMjQsIDM2KSwgMTYpKSAvIDB4MTAwMDAwMDAwMDAgJiAweGZmO1xuICBhcnJbMTFdID0gdiAvIDB4MTAwMDAwMDAwICYgMHhmZjtcbiAgYXJyWzEyXSA9IHYgPj4+IDI0ICYgMHhmZjtcbiAgYXJyWzEzXSA9IHYgPj4+IDE2ICYgMHhmZjtcbiAgYXJyWzE0XSA9IHYgPj4+IDggJiAweGZmO1xuICBhcnJbMTVdID0gdiAmIDB4ZmY7XG4gIHJldHVybiBhcnI7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHBhcnNlOyIsImV4cG9ydCBkZWZhdWx0IC9eKD86WzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzEtNV1bMC05YS1mXXszfS1bODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTsiLCIvLyBVbmlxdWUgSUQgY3JlYXRpb24gcmVxdWlyZXMgYSBoaWdoIHF1YWxpdHkgcmFuZG9tICMgZ2VuZXJhdG9yLiBJbiB0aGUgYnJvd3NlciB3ZSB0aGVyZWZvcmVcbi8vIHJlcXVpcmUgdGhlIGNyeXB0byBBUEkgYW5kIGRvIG5vdCBzdXBwb3J0IGJ1aWx0LWluIGZhbGxiYWNrIHRvIGxvd2VyIHF1YWxpdHkgcmFuZG9tIG51bWJlclxuLy8gZ2VuZXJhdG9ycyAobGlrZSBNYXRoLnJhbmRvbSgpKS5cbnZhciBnZXRSYW5kb21WYWx1ZXM7XG52YXIgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBybmcoKSB7XG4gIC8vIGxhenkgbG9hZCBzbyB0aGF0IGVudmlyb25tZW50cyB0aGF0IG5lZWQgdG8gcG9seWZpbGwgaGF2ZSBhIGNoYW5jZSB0byBkbyBzb1xuICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgIC8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0byBpbXBsZW1lbnRhdGlvbi4gQWxzbyxcbiAgICAvLyBmaW5kIHRoZSBjb21wbGV0ZSBpbXBsZW1lbnRhdGlvbiBvZiBjcnlwdG8gKG1zQ3J5cHRvKSBvbiBJRTExLlxuICAgIGdldFJhbmRvbVZhbHVlcyA9IHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0bykgfHwgdHlwZW9mIG1zQ3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzID09PSAnZnVuY3Rpb24nICYmIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKG1zQ3J5cHRvKTtcblxuICAgIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyeXB0by5nZXRSYW5kb21WYWx1ZXMoKSBub3Qgc3VwcG9ydGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkI2dldHJhbmRvbXZhbHVlcy1ub3Qtc3VwcG9ydGVkJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGdldFJhbmRvbVZhbHVlcyhybmRzOCk7XG59IiwiLy8gQWRhcHRlZCBmcm9tIENocmlzIFZlbmVzcycgU0hBMSBjb2RlIGF0XG4vLyBodHRwOi8vd3d3Lm1vdmFibGUtdHlwZS5jby51ay9zY3JpcHRzL3NoYTEuaHRtbFxuZnVuY3Rpb24gZihzLCB4LCB5LCB6KSB7XG4gIHN3aXRjaCAocykge1xuICAgIGNhc2UgMDpcbiAgICAgIHJldHVybiB4ICYgeSBeIH54ICYgejtcblxuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiB4IF4geSBeIHo7XG5cbiAgICBjYXNlIDI6XG4gICAgICByZXR1cm4geCAmIHkgXiB4ICYgeiBeIHkgJiB6O1xuXG4gICAgY2FzZSAzOlxuICAgICAgcmV0dXJuIHggXiB5IF4gejtcbiAgfVxufVxuXG5mdW5jdGlvbiBST1RMKHgsIG4pIHtcbiAgcmV0dXJuIHggPDwgbiB8IHggPj4+IDMyIC0gbjtcbn1cblxuZnVuY3Rpb24gc2hhMShieXRlcykge1xuICB2YXIgSyA9IFsweDVhODI3OTk5LCAweDZlZDllYmExLCAweDhmMWJiY2RjLCAweGNhNjJjMWQ2XTtcbiAgdmFyIEggPSBbMHg2NzQ1MjMwMSwgMHhlZmNkYWI4OSwgMHg5OGJhZGNmZSwgMHgxMDMyNTQ3NiwgMHhjM2QyZTFmMF07XG5cbiAgaWYgKHR5cGVvZiBieXRlcyA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgbXNnID0gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGJ5dGVzKSk7IC8vIFVURjggZXNjYXBlXG5cbiAgICBieXRlcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyArK2kpIHtcbiAgICAgIGJ5dGVzLnB1c2gobXNnLmNoYXJDb2RlQXQoaSkpO1xuICAgIH1cbiAgfSBlbHNlIGlmICghQXJyYXkuaXNBcnJheShieXRlcykpIHtcbiAgICAvLyBDb252ZXJ0IEFycmF5LWxpa2UgdG8gQXJyYXlcbiAgICBieXRlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGJ5dGVzKTtcbiAgfVxuXG4gIGJ5dGVzLnB1c2goMHg4MCk7XG4gIHZhciBsID0gYnl0ZXMubGVuZ3RoIC8gNCArIDI7XG4gIHZhciBOID0gTWF0aC5jZWlsKGwgLyAxNik7XG4gIHZhciBNID0gbmV3IEFycmF5KE4pO1xuXG4gIGZvciAodmFyIF9pID0gMDsgX2kgPCBOOyArK19pKSB7XG4gICAgdmFyIGFyciA9IG5ldyBVaW50MzJBcnJheSgxNik7XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IDE2OyArK2opIHtcbiAgICAgIGFycltqXSA9IGJ5dGVzW19pICogNjQgKyBqICogNF0gPDwgMjQgfCBieXRlc1tfaSAqIDY0ICsgaiAqIDQgKyAxXSA8PCAxNiB8IGJ5dGVzW19pICogNjQgKyBqICogNCArIDJdIDw8IDggfCBieXRlc1tfaSAqIDY0ICsgaiAqIDQgKyAzXTtcbiAgICB9XG5cbiAgICBNW19pXSA9IGFycjtcbiAgfVxuXG4gIE1bTiAtIDFdWzE0XSA9IChieXRlcy5sZW5ndGggLSAxKSAqIDggLyBNYXRoLnBvdygyLCAzMik7XG4gIE1bTiAtIDFdWzE0XSA9IE1hdGguZmxvb3IoTVtOIC0gMV1bMTRdKTtcbiAgTVtOIC0gMV1bMTVdID0gKGJ5dGVzLmxlbmd0aCAtIDEpICogOCAmIDB4ZmZmZmZmZmY7XG5cbiAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgTjsgKytfaTIpIHtcbiAgICB2YXIgVyA9IG5ldyBVaW50MzJBcnJheSg4MCk7XG5cbiAgICBmb3IgKHZhciB0ID0gMDsgdCA8IDE2OyArK3QpIHtcbiAgICAgIFdbdF0gPSBNW19pMl1bdF07XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX3QgPSAxNjsgX3QgPCA4MDsgKytfdCkge1xuICAgICAgV1tfdF0gPSBST1RMKFdbX3QgLSAzXSBeIFdbX3QgLSA4XSBeIFdbX3QgLSAxNF0gXiBXW190IC0gMTZdLCAxKTtcbiAgICB9XG5cbiAgICB2YXIgYSA9IEhbMF07XG4gICAgdmFyIGIgPSBIWzFdO1xuICAgIHZhciBjID0gSFsyXTtcbiAgICB2YXIgZCA9IEhbM107XG4gICAgdmFyIGUgPSBIWzRdO1xuXG4gICAgZm9yICh2YXIgX3QyID0gMDsgX3QyIDwgODA7ICsrX3QyKSB7XG4gICAgICB2YXIgcyA9IE1hdGguZmxvb3IoX3QyIC8gMjApO1xuICAgICAgdmFyIFQgPSBST1RMKGEsIDUpICsgZihzLCBiLCBjLCBkKSArIGUgKyBLW3NdICsgV1tfdDJdID4+PiAwO1xuICAgICAgZSA9IGQ7XG4gICAgICBkID0gYztcbiAgICAgIGMgPSBST1RMKGIsIDMwKSA+Pj4gMDtcbiAgICAgIGIgPSBhO1xuICAgICAgYSA9IFQ7XG4gICAgfVxuXG4gICAgSFswXSA9IEhbMF0gKyBhID4+PiAwO1xuICAgIEhbMV0gPSBIWzFdICsgYiA+Pj4gMDtcbiAgICBIWzJdID0gSFsyXSArIGMgPj4+IDA7XG4gICAgSFszXSA9IEhbM10gKyBkID4+PiAwO1xuICAgIEhbNF0gPSBIWzRdICsgZSA+Pj4gMDtcbiAgfVxuXG4gIHJldHVybiBbSFswXSA+PiAyNCAmIDB4ZmYsIEhbMF0gPj4gMTYgJiAweGZmLCBIWzBdID4+IDggJiAweGZmLCBIWzBdICYgMHhmZiwgSFsxXSA+PiAyNCAmIDB4ZmYsIEhbMV0gPj4gMTYgJiAweGZmLCBIWzFdID4+IDggJiAweGZmLCBIWzFdICYgMHhmZiwgSFsyXSA+PiAyNCAmIDB4ZmYsIEhbMl0gPj4gMTYgJiAweGZmLCBIWzJdID4+IDggJiAweGZmLCBIWzJdICYgMHhmZiwgSFszXSA+PiAyNCAmIDB4ZmYsIEhbM10gPj4gMTYgJiAweGZmLCBIWzNdID4+IDggJiAweGZmLCBIWzNdICYgMHhmZiwgSFs0XSA+PiAyNCAmIDB4ZmYsIEhbNF0gPj4gMTYgJiAweGZmLCBIWzRdID4+IDggJiAweGZmLCBIWzRdICYgMHhmZl07XG59XG5cbmV4cG9ydCBkZWZhdWx0IHNoYTE7IiwiaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG5cbnZhciBieXRlVG9IZXggPSBbXTtcblxuZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXgucHVzaCgoaSArIDB4MTAwKS50b1N0cmluZygxNikuc3Vic3RyKDEpKTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KGFycikge1xuICB2YXIgb2Zmc2V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwO1xuICAvLyBOb3RlOiBCZSBjYXJlZnVsIGVkaXRpbmcgdGhpcyBjb2RlISAgSXQncyBiZWVuIHR1bmVkIGZvciBwZXJmb3JtYW5jZVxuICAvLyBhbmQgd29ya3MgaW4gd2F5cyB5b3UgbWF5IG5vdCBleHBlY3QuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQvcHVsbC80MzRcbiAgdmFyIHV1aWQgPSAoYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAzXV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA2XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDddXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA5XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDExXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEzXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE1XV0pLnRvTG93ZXJDYXNlKCk7IC8vIENvbnNpc3RlbmN5IGNoZWNrIGZvciB2YWxpZCBVVUlELiAgSWYgdGhpcyB0aHJvd3MsIGl0J3MgbGlrZWx5IGR1ZSB0byBvbmVcbiAgLy8gb2YgdGhlIGZvbGxvd2luZzpcbiAgLy8gLSBPbmUgb3IgbW9yZSBpbnB1dCBhcnJheSB2YWx1ZXMgZG9uJ3QgbWFwIHRvIGEgaGV4IG9jdGV0IChsZWFkaW5nIHRvXG4gIC8vIFwidW5kZWZpbmVkXCIgaW4gdGhlIHV1aWQpXG4gIC8vIC0gSW52YWxpZCBpbnB1dCB2YWx1ZXMgZm9yIHRoZSBSRkMgYHZlcnNpb25gIG9yIGB2YXJpYW50YCBmaWVsZHNcblxuICBpZiAoIXZhbGlkYXRlKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdTdHJpbmdpZmllZCBVVUlEIGlzIGludmFsaWQnKTtcbiAgfVxuXG4gIHJldHVybiB1dWlkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzdHJpbmdpZnk7IiwiaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgc3RyaW5naWZ5IGZyb20gJy4vc3RyaW5naWZ5LmpzJzsgLy8gKipgdjEoKWAgLSBHZW5lcmF0ZSB0aW1lLWJhc2VkIFVVSUQqKlxuLy9cbi8vIEluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9MaW9zSy9VVUlELmpzXG4vLyBhbmQgaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L3V1aWQuaHRtbFxuXG52YXIgX25vZGVJZDtcblxudmFyIF9jbG9ja3NlcTsgLy8gUHJldmlvdXMgdXVpZCBjcmVhdGlvbiB0aW1lXG5cblxudmFyIF9sYXN0TVNlY3MgPSAwO1xudmFyIF9sYXN0TlNlY3MgPSAwOyAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkIGZvciBBUEkgZGV0YWlsc1xuXG5mdW5jdGlvbiB2MShvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICB2YXIgaSA9IGJ1ZiAmJiBvZmZzZXQgfHwgMDtcbiAgdmFyIGIgPSBidWYgfHwgbmV3IEFycmF5KDE2KTtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBub2RlID0gb3B0aW9ucy5ub2RlIHx8IF9ub2RlSWQ7XG4gIHZhciBjbG9ja3NlcSA9IG9wdGlvbnMuY2xvY2tzZXEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xvY2tzZXEgOiBfY2xvY2tzZXE7IC8vIG5vZGUgYW5kIGNsb2Nrc2VxIG5lZWQgdG8gYmUgaW5pdGlhbGl6ZWQgdG8gcmFuZG9tIHZhbHVlcyBpZiB0aGV5J3JlIG5vdFxuICAvLyBzcGVjaWZpZWQuICBXZSBkbyB0aGlzIGxhemlseSB0byBtaW5pbWl6ZSBpc3N1ZXMgcmVsYXRlZCB0byBpbnN1ZmZpY2llbnRcbiAgLy8gc3lzdGVtIGVudHJvcHkuICBTZWUgIzE4OVxuXG4gIGlmIChub2RlID09IG51bGwgfHwgY2xvY2tzZXEgPT0gbnVsbCkge1xuICAgIHZhciBzZWVkQnl0ZXMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpO1xuXG4gICAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgICAgLy8gUGVyIDQuNSwgY3JlYXRlIGFuZCA0OC1iaXQgbm9kZSBpZCwgKDQ3IHJhbmRvbSBiaXRzICsgbXVsdGljYXN0IGJpdCA9IDEpXG4gICAgICBub2RlID0gX25vZGVJZCA9IFtzZWVkQnl0ZXNbMF0gfCAweDAxLCBzZWVkQnl0ZXNbMV0sIHNlZWRCeXRlc1syXSwgc2VlZEJ5dGVzWzNdLCBzZWVkQnl0ZXNbNF0sIHNlZWRCeXRlc1s1XV07XG4gICAgfVxuXG4gICAgaWYgKGNsb2Nrc2VxID09IG51bGwpIHtcbiAgICAgIC8vIFBlciA0LjIuMiwgcmFuZG9taXplICgxNCBiaXQpIGNsb2Nrc2VxXG4gICAgICBjbG9ja3NlcSA9IF9jbG9ja3NlcSA9IChzZWVkQnl0ZXNbNl0gPDwgOCB8IHNlZWRCeXRlc1s3XSkgJiAweDNmZmY7XG4gICAgfVxuICB9IC8vIFVVSUQgdGltZXN0YW1wcyBhcmUgMTAwIG5hbm8tc2Vjb25kIHVuaXRzIHNpbmNlIHRoZSBHcmVnb3JpYW4gZXBvY2gsXG4gIC8vICgxNTgyLTEwLTE1IDAwOjAwKS4gIEpTTnVtYmVycyBhcmVuJ3QgcHJlY2lzZSBlbm91Z2ggZm9yIHRoaXMsIHNvXG4gIC8vIHRpbWUgaXMgaGFuZGxlZCBpbnRlcm5hbGx5IGFzICdtc2VjcycgKGludGVnZXIgbWlsbGlzZWNvbmRzKSBhbmQgJ25zZWNzJ1xuICAvLyAoMTAwLW5hbm9zZWNvbmRzIG9mZnNldCBmcm9tIG1zZWNzKSBzaW5jZSB1bml4IGVwb2NoLCAxOTcwLTAxLTAxIDAwOjAwLlxuXG5cbiAgdmFyIG1zZWNzID0gb3B0aW9ucy5tc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tc2VjcyA6IERhdGUubm93KCk7IC8vIFBlciA0LjIuMS4yLCB1c2UgY291bnQgb2YgdXVpZCdzIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGN1cnJlbnQgY2xvY2tcbiAgLy8gY3ljbGUgdG8gc2ltdWxhdGUgaGlnaGVyIHJlc29sdXRpb24gY2xvY2tcblxuICB2YXIgbnNlY3MgPSBvcHRpb25zLm5zZWNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5zZWNzIDogX2xhc3ROU2VjcyArIDE7IC8vIFRpbWUgc2luY2UgbGFzdCB1dWlkIGNyZWF0aW9uIChpbiBtc2VjcylcblxuICB2YXIgZHQgPSBtc2VjcyAtIF9sYXN0TVNlY3MgKyAobnNlY3MgLSBfbGFzdE5TZWNzKSAvIDEwMDAwOyAvLyBQZXIgNC4yLjEuMiwgQnVtcCBjbG9ja3NlcSBvbiBjbG9jayByZWdyZXNzaW9uXG5cbiAgaWYgKGR0IDwgMCAmJiBvcHRpb25zLmNsb2Nrc2VxID09PSB1bmRlZmluZWQpIHtcbiAgICBjbG9ja3NlcSA9IGNsb2Nrc2VxICsgMSAmIDB4M2ZmZjtcbiAgfSAvLyBSZXNldCBuc2VjcyBpZiBjbG9jayByZWdyZXNzZXMgKG5ldyBjbG9ja3NlcSkgb3Igd2UndmUgbW92ZWQgb250byBhIG5ld1xuICAvLyB0aW1lIGludGVydmFsXG5cblxuICBpZiAoKGR0IDwgMCB8fCBtc2VjcyA+IF9sYXN0TVNlY3MpICYmIG9wdGlvbnMubnNlY3MgPT09IHVuZGVmaW5lZCkge1xuICAgIG5zZWNzID0gMDtcbiAgfSAvLyBQZXIgNC4yLjEuMiBUaHJvdyBlcnJvciBpZiB0b28gbWFueSB1dWlkcyBhcmUgcmVxdWVzdGVkXG5cblxuICBpZiAobnNlY3MgPj0gMTAwMDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1dWlkLnYxKCk6IENhbid0IGNyZWF0ZSBtb3JlIHRoYW4gMTBNIHV1aWRzL3NlY1wiKTtcbiAgfVxuXG4gIF9sYXN0TVNlY3MgPSBtc2VjcztcbiAgX2xhc3ROU2VjcyA9IG5zZWNzO1xuICBfY2xvY2tzZXEgPSBjbG9ja3NlcTsgLy8gUGVyIDQuMS40IC0gQ29udmVydCBmcm9tIHVuaXggZXBvY2ggdG8gR3JlZ29yaWFuIGVwb2NoXG5cbiAgbXNlY3MgKz0gMTIyMTkyOTI4MDAwMDA7IC8vIGB0aW1lX2xvd2BcblxuICB2YXIgdGwgPSAoKG1zZWNzICYgMHhmZmZmZmZmKSAqIDEwMDAwICsgbnNlY3MpICUgMHgxMDAwMDAwMDA7XG4gIGJbaSsrXSA9IHRsID4+PiAyNCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiAxNiAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdGwgJiAweGZmOyAvLyBgdGltZV9taWRgXG5cbiAgdmFyIHRtaCA9IG1zZWNzIC8gMHgxMDAwMDAwMDAgKiAxMDAwMCAmIDB4ZmZmZmZmZjtcbiAgYltpKytdID0gdG1oID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdG1oICYgMHhmZjsgLy8gYHRpbWVfaGlnaF9hbmRfdmVyc2lvbmBcblxuICBiW2krK10gPSB0bWggPj4+IDI0ICYgMHhmIHwgMHgxMDsgLy8gaW5jbHVkZSB2ZXJzaW9uXG5cbiAgYltpKytdID0gdG1oID4+PiAxNiAmIDB4ZmY7IC8vIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYCAoUGVyIDQuMi4yIC0gaW5jbHVkZSB2YXJpYW50KVxuXG4gIGJbaSsrXSA9IGNsb2Nrc2VxID4+PiA4IHwgMHg4MDsgLy8gYGNsb2NrX3NlcV9sb3dgXG5cbiAgYltpKytdID0gY2xvY2tzZXEgJiAweGZmOyAvLyBgbm9kZWBcblxuICBmb3IgKHZhciBuID0gMDsgbiA8IDY7ICsrbikge1xuICAgIGJbaSArIG5dID0gbm9kZVtuXTtcbiAgfVxuXG4gIHJldHVybiBidWYgfHwgc3RyaW5naWZ5KGIpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2MTsiLCJpbXBvcnQgdjM1IGZyb20gJy4vdjM1LmpzJztcbmltcG9ydCBtZDUgZnJvbSAnLi9tZDUuanMnO1xudmFyIHYzID0gdjM1KCd2MycsIDB4MzAsIG1kNSk7XG5leHBvcnQgZGVmYXVsdCB2MzsiLCJpbXBvcnQgc3RyaW5naWZ5IGZyb20gJy4vc3RyaW5naWZ5LmpzJztcbmltcG9ydCBwYXJzZSBmcm9tICcuL3BhcnNlLmpzJztcblxuZnVuY3Rpb24gc3RyaW5nVG9CeXRlcyhzdHIpIHtcbiAgc3RyID0gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN0cikpOyAvLyBVVEY4IGVzY2FwZVxuXG4gIHZhciBieXRlcyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgYnl0ZXMucHVzaChzdHIuY2hhckNvZGVBdChpKSk7XG4gIH1cblxuICByZXR1cm4gYnl0ZXM7XG59XG5cbmV4cG9ydCB2YXIgRE5TID0gJzZiYTdiODEwLTlkYWQtMTFkMS04MGI0LTAwYzA0ZmQ0MzBjOCc7XG5leHBvcnQgdmFyIFVSTCA9ICc2YmE3YjgxMS05ZGFkLTExZDEtODBiNC0wMGMwNGZkNDMwYzgnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKG5hbWUsIHZlcnNpb24sIGhhc2hmdW5jKSB7XG4gIGZ1bmN0aW9uIGdlbmVyYXRlVVVJRCh2YWx1ZSwgbmFtZXNwYWNlLCBidWYsIG9mZnNldCkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB2YWx1ZSA9IHN0cmluZ1RvQnl0ZXModmFsdWUpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlID09PSAnc3RyaW5nJykge1xuICAgICAgbmFtZXNwYWNlID0gcGFyc2UobmFtZXNwYWNlKTtcbiAgICB9XG5cbiAgICBpZiAobmFtZXNwYWNlLmxlbmd0aCAhPT0gMTYpIHtcbiAgICAgIHRocm93IFR5cGVFcnJvcignTmFtZXNwYWNlIG11c3QgYmUgYXJyYXktbGlrZSAoMTYgaXRlcmFibGUgaW50ZWdlciB2YWx1ZXMsIDAtMjU1KScpO1xuICAgIH0gLy8gQ29tcHV0ZSBoYXNoIG9mIG5hbWVzcGFjZSBhbmQgdmFsdWUsIFBlciA0LjNcbiAgICAvLyBGdXR1cmU6IFVzZSBzcHJlYWQgc3ludGF4IHdoZW4gc3VwcG9ydGVkIG9uIGFsbCBwbGF0Zm9ybXMsIGUuZy4gYGJ5dGVzID1cbiAgICAvLyBoYXNoZnVuYyhbLi4ubmFtZXNwYWNlLCAuLi4gdmFsdWVdKWBcblxuXG4gICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoMTYgKyB2YWx1ZS5sZW5ndGgpO1xuICAgIGJ5dGVzLnNldChuYW1lc3BhY2UpO1xuICAgIGJ5dGVzLnNldCh2YWx1ZSwgbmFtZXNwYWNlLmxlbmd0aCk7XG4gICAgYnl0ZXMgPSBoYXNoZnVuYyhieXRlcyk7XG4gICAgYnl0ZXNbNl0gPSBieXRlc1s2XSAmIDB4MGYgfCB2ZXJzaW9uO1xuICAgIGJ5dGVzWzhdID0gYnl0ZXNbOF0gJiAweDNmIHwgMHg4MDtcblxuICAgIGlmIChidWYpIHtcbiAgICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyArK2kpIHtcbiAgICAgICAgYnVmW29mZnNldCArIGldID0gYnl0ZXNbaV07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBidWY7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0cmluZ2lmeShieXRlcyk7XG4gIH0gLy8gRnVuY3Rpb24jbmFtZSBpcyBub3Qgc2V0dGFibGUgb24gc29tZSBwbGF0Zm9ybXMgKCMyNzApXG5cblxuICB0cnkge1xuICAgIGdlbmVyYXRlVVVJRC5uYW1lID0gbmFtZTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5XG4gIH0gY2F0Y2ggKGVycikge30gLy8gRm9yIENvbW1vbkpTIGRlZmF1bHQgZXhwb3J0IHN1cHBvcnRcblxuXG4gIGdlbmVyYXRlVVVJRC5ETlMgPSBETlM7XG4gIGdlbmVyYXRlVVVJRC5VUkwgPSBVUkw7XG4gIHJldHVybiBnZW5lcmF0ZVVVSUQ7XG59IiwiaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgc3RyaW5naWZ5IGZyb20gJy4vc3RyaW5naWZ5LmpzJztcblxuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTsgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuXG4gIHJuZHNbNl0gPSBybmRzWzZdICYgMHgwZiB8IDB4NDA7XG4gIHJuZHNbOF0gPSBybmRzWzhdICYgMHgzZiB8IDB4ODA7IC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuXG4gIGlmIChidWYpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgYnVmW29mZnNldCArIGldID0gcm5kc1tpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVmO1xuICB9XG5cbiAgcmV0dXJuIHN0cmluZ2lmeShybmRzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdjQ7IiwiaW1wb3J0IHYzNSBmcm9tICcuL3YzNS5qcyc7XG5pbXBvcnQgc2hhMSBmcm9tICcuL3NoYTEuanMnO1xudmFyIHY1ID0gdjM1KCd2NScsIDB4NTAsIHNoYTEpO1xuZXhwb3J0IGRlZmF1bHQgdjU7IiwiaW1wb3J0IFJFR0VYIGZyb20gJy4vcmVnZXguanMnO1xuXG5mdW5jdGlvbiB2YWxpZGF0ZSh1dWlkKSB7XG4gIHJldHVybiB0eXBlb2YgdXVpZCA9PT0gJ3N0cmluZycgJiYgUkVHRVgudGVzdCh1dWlkKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdmFsaWRhdGU7IiwiaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuXG5mdW5jdGlvbiB2ZXJzaW9uKHV1aWQpIHtcbiAgaWYgKCF2YWxpZGF0ZSh1dWlkKSkge1xuICAgIHRocm93IFR5cGVFcnJvcignSW52YWxpZCBVVUlEJyk7XG4gIH1cblxuICByZXR1cm4gcGFyc2VJbnQodXVpZC5zdWJzdHIoMTQsIDEpLCAxNik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHZlcnNpb247IiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTktb25lT2YtMS0xIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9sb2FkZXJzL3N0eWxlUG9zdExvYWRlci5qcyEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9yZWYtLTktb25lT2YtMS0yIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS05LW9uZU9mLTEtMyEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTEtMCEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL2NoYXQudnVlP3Z1ZSZ0eXBlPXN0eWxlJmluZGV4PTAmbGFuZz1zY3NzJlwiKTtcbmlmKGNvbnRlbnQuX19lc01vZHVsZSkgY29udGVudCA9IGNvbnRlbnQuZGVmYXVsdDtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgYWRkID0gcmVxdWlyZShcIiEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzQ2xpZW50LmpzXCIpLmRlZmF1bHRcbnZhciB1cGRhdGUgPSBhZGQoXCI2NGNjYzFmZlwiLCBjb250ZW50LCBmYWxzZSwge1wic291cmNlTWFwXCI6ZmFsc2UsXCJzaGFkb3dNb2RlXCI6ZmFsc2V9KTtcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcbiAvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuIGlmKCFjb250ZW50LmxvY2Fscykge1xuICAgbW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTktb25lT2YtMS0xIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9sb2FkZXJzL3N0eWxlUG9zdExvYWRlci5qcyEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9yZWYtLTktb25lT2YtMS0yIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS05LW9uZU9mLTEtMyEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTEtMCEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL2NoYXQudnVlP3Z1ZSZ0eXBlPXN0eWxlJmluZGV4PTAmbGFuZz1zY3NzJlwiLCBmdW5jdGlvbigpIHtcbiAgICAgdmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS05LW9uZU9mLTEtMSEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvbG9hZGVycy9zdHlsZVBvc3RMb2FkZXIuanMhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cmVmLS05LW9uZU9mLTEtMiEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanM/P3JlZi0tOS1vbmVPZi0xLTMhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS0xLTAhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9jaGF0LnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0wJmxhbmc9c2NzcyZcIik7XG4gICAgIGlmKG5ld0NvbnRlbnQuX19lc01vZHVsZSkgbmV3Q29udGVudCA9IG5ld0NvbnRlbnQuZGVmYXVsdDtcbiAgICAgaWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG4gICAgIHVwZGF0ZShuZXdDb250ZW50KTtcbiAgIH0pO1xuIH1cbiAvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG4gbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59IiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTktb25lT2YtMS0xIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9sb2FkZXJzL3N0eWxlUG9zdExvYWRlci5qcyEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9yZWYtLTktb25lT2YtMS0yIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS05LW9uZU9mLTEtMyEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTEtMCEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL2NoYXQudnVlP3Z1ZSZ0eXBlPXN0eWxlJmluZGV4PTEmbGFuZz1zY3NzJlwiKTtcbmlmKGNvbnRlbnQuX19lc01vZHVsZSkgY29udGVudCA9IGNvbnRlbnQuZGVmYXVsdDtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgYWRkID0gcmVxdWlyZShcIiEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzQ2xpZW50LmpzXCIpLmRlZmF1bHRcbnZhciB1cGRhdGUgPSBhZGQoXCI3ZWU4NDA5ZVwiLCBjb250ZW50LCBmYWxzZSwge1wic291cmNlTWFwXCI6ZmFsc2UsXCJzaGFkb3dNb2RlXCI6ZmFsc2V9KTtcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcbiAvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuIGlmKCFjb250ZW50LmxvY2Fscykge1xuICAgbW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTktb25lT2YtMS0xIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9sb2FkZXJzL3N0eWxlUG9zdExvYWRlci5qcyEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9yZWYtLTktb25lT2YtMS0yIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS05LW9uZU9mLTEtMyEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTEtMCEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL2NoYXQudnVlP3Z1ZSZ0eXBlPXN0eWxlJmluZGV4PTEmbGFuZz1zY3NzJlwiLCBmdW5jdGlvbigpIHtcbiAgICAgdmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS05LW9uZU9mLTEtMSEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvbG9hZGVycy9zdHlsZVBvc3RMb2FkZXIuanMhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cmVmLS05LW9uZU9mLTEtMiEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanM/P3JlZi0tOS1vbmVPZi0xLTMhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS0xLTAhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9jaGF0LnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0xJmxhbmc9c2NzcyZcIik7XG4gICAgIGlmKG5ld0NvbnRlbnQuX19lc01vZHVsZSkgbmV3Q29udGVudCA9IG5ld0NvbnRlbnQuZGVmYXVsdDtcbiAgICAgaWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG4gICAgIHVwZGF0ZShuZXdDb250ZW50KTtcbiAgIH0pO1xuIH1cbiAvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG4gbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59IiwiaW1wb3J0IHJlcXVlc3QgZnJvbSBcIi4vcmVxdWVzdDFcIjtcclxubGV0IGJhc2VVcmwgPSBcIi92MVwiOyAvL+acjeWKoeWZqOaYr3dhdGVy57G777yM5pys5Zyw5rKh5pyJ5YqgXHJcbi8qXHJcbuWkp+ernui1m+awtOayu+eQhuaOkuWQjVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlc3VsdChkYXRhKSB7XHJcbiAgcmV0dXJuIHJlcXVlc3Qoe1xyXG4gICAgdXJsOiBiYXNlVXJsKyBcIi9jaGF0LW1lc3NhZ2VzXCIsXHJcbiAgICBtZXRob2Q6IFwicG9zdFwiLFxyXG4gICAgZGF0YTogZGF0YVxyXG4gIH0pO1xyXG59XHJcbiIsImltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcclxuXHJcbmF4aW9zLmRlZmF1bHRzLmJhc2VVUkwgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIgPyBcIlwiIDogXCJcIjtcclxuLy8g5Yib5bu6YXhpb3Plrp7kvotcclxuY29uc3Qgc2VydmljZSA9IGF4aW9zLmNyZWF0ZSh7XHJcbiAgdGltZW91dDogNTAwMDAsXHJcbiAgcmV0cnk6IDIsIC8vIOivt+axguasoeaVsCxcclxuICByZXRyeUludGVydmFsOiAxMDAwLCAvLyDor7fmsYLotoXml7blkI7vvIwxc+WGjeasoeivt+axglxyXG59KTtcclxuXHJcbnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKFxyXG4gIChjb25maWcpID0+IHtcclxuICAgIGNvbmZpZy5iYXNlVVJMID0gJ2h0dHA6Ly8xMC4yMjEuMjkuNDo0ODA0OSc7IC8v5omT5YyFYXBw5pe255SoXHJcbiAgICBjb25maWcuaGVhZGVyc1tcImF1dGhvcml6YXRpb25cIl0gPSBcIkJlYXJlciBhcHAtMHFBSHJnQzdKWk1JS3lWc0RLdHBGaXJGXCI7XHJcbiAgICAvLyBjb25maWcuaGVhZGVyc1sgJ1gtQWNjZXNzLVRva2VuJyBdID0gc3RvcmUuc3RhdGUudG9rZW47XHJcbiAgICByZXR1cm4gY29uZmlnO1xyXG4gIH0sXHJcbiAgKGVycm9yKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7IC8vIGZvciBkZWJ1Z1xyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICB9XHJcbik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBzZXJ2aWNlO1xyXG4iLCJpbXBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9IGZyb20gXCIuL2NoYXQudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTdhNjdkOWJlJlwiXG5pbXBvcnQgc2NyaXB0IGZyb20gXCIuL2NoYXQudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiXG5leHBvcnQgKiBmcm9tIFwiLi9jaGF0LnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIlxuaW1wb3J0IHN0eWxlMCBmcm9tIFwiLi9jaGF0LnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0wJmxhbmc9c2NzcyZcIlxuaW1wb3J0IHN0eWxlMSBmcm9tIFwiLi9jaGF0LnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0xJmxhbmc9c2NzcyZcIlxuXG5cbi8qIG5vcm1hbGl6ZSBjb21wb25lbnQgKi9cbmltcG9ydCBub3JtYWxpemVyIGZyb20gXCIhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3J1bnRpbWUvY29tcG9uZW50Tm9ybWFsaXplci5qc1wiXG52YXIgY29tcG9uZW50ID0gbm9ybWFsaXplcihcbiAgc2NyaXB0LFxuICByZW5kZXIsXG4gIHN0YXRpY1JlbmRlckZucyxcbiAgZmFsc2UsXG4gIG51bGwsXG4gIG51bGwsXG4gIG51bGxcbiAgXG4pXG5cbi8qIGhvdCByZWxvYWQgKi9cbmlmIChtb2R1bGUuaG90KSB7XG4gIHZhciBhcGkgPSByZXF1aXJlKFwiRDpcXFxcaGVsaXBpbmdXb3JrXFxcXEFQUFxcXFxrbUVudlBvcnRhYmxlXFxcXHdlYmFwcE9TXFxcXG5vZGVfbW9kdWxlc1xcXFx2dWUtaG90LXJlbG9hZC1hcGlcXFxcZGlzdFxcXFxpbmRleC5qc1wiKVxuICBhcGkuaW5zdGFsbChyZXF1aXJlKCd2dWUnKSlcbiAgaWYgKGFwaS5jb21wYXRpYmxlKSB7XG4gICAgbW9kdWxlLmhvdC5hY2NlcHQoKVxuICAgIGlmICghYXBpLmlzUmVjb3JkZWQoJzdhNjdkOWJlJykpIHtcbiAgICAgIGFwaS5jcmVhdGVSZWNvcmQoJzdhNjdkOWJlJywgY29tcG9uZW50Lm9wdGlvbnMpXG4gICAgfSBlbHNlIHtcbiAgICAgIGFwaS5yZWxvYWQoJzdhNjdkOWJlJywgY29tcG9uZW50Lm9wdGlvbnMpXG4gICAgfVxuICAgIG1vZHVsZS5ob3QuYWNjZXB0KFwiLi9jaGF0LnZ1ZT92dWUmdHlwZT10ZW1wbGF0ZSZpZD03YTY3ZDliZSZcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgYXBpLnJlcmVuZGVyKCc3YTY3ZDliZScsIHtcbiAgICAgICAgcmVuZGVyOiByZW5kZXIsXG4gICAgICAgIHN0YXRpY1JlbmRlckZuczogc3RhdGljUmVuZGVyRm5zXG4gICAgICB9KVxuICAgIH0pXG4gIH1cbn1cbmNvbXBvbmVudC5vcHRpb25zLl9fZmlsZSA9IFwic3JjL2NvbXBvbmVudHMvY29tbW9uL3Rlc3QvY2hhdC52dWVcIlxuZXhwb3J0IGRlZmF1bHQgY29tcG9uZW50LmV4cG9ydHMiLCJpbXBvcnQgbW9kIGZyb20gXCItIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P3JlZi0tMTMtMCEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvYmFiZWwtbG9hZGVyL2xpYi9pbmRleC5qcyEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTEtMCEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL2NoYXQudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiOyBleHBvcnQgZGVmYXVsdCBtb2Q7IGV4cG9ydCAqIGZyb20gXCItIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P3JlZi0tMTMtMCEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvYmFiZWwtbG9hZGVyL2xpYi9pbmRleC5qcyEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTEtMCEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL2NoYXQudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiIiwiZXhwb3J0ICogZnJvbSBcIi0hLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvaW5kZXguanM/P3JlZi0tOS1vbmVPZi0xLTAhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanM/P3JlZi0tOS1vbmVPZi0xLTEhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2xvYWRlcnMvc3R5bGVQb3N0TG9hZGVyLmpzIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3JlZi0tOS1vbmVPZi0xLTIhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTktb25lT2YtMS0zIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P3JlZi0tMS0wIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vY2hhdC52dWU/dnVlJnR5cGU9c3R5bGUmaW5kZXg9MCZsYW5nPXNjc3MmXCIiLCJleHBvcnQgKiBmcm9tIFwiLSEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9pbmRleC5qcz8/cmVmLS05LW9uZU9mLTEtMCEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS05LW9uZU9mLTEtMSEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvbG9hZGVycy9zdHlsZVBvc3RMb2FkZXIuanMhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cmVmLS05LW9uZU9mLTEtMiEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanM/P3JlZi0tOS1vbmVPZi0xLTMhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS0xLTAhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9jaGF0LnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0xJmxhbmc9c2NzcyZcIiIsImV4cG9ydCAqIGZyb20gXCItIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/e1xcXCJjYWNoZURpcmVjdG9yeVxcXCI6XFxcIm5vZGVfbW9kdWxlcy8uY2FjaGUvdnVlLWxvYWRlclxcXCIsXFxcImNhY2hlSWRlbnRpZmllclxcXCI6XFxcIjRiYWUwNDgyLXZ1ZS1sb2FkZXItdGVtcGxhdGVcXFwifSEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvbG9hZGVycy90ZW1wbGF0ZUxvYWRlci5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P3JlZi0tMS0wIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vY2hhdC52dWU/dnVlJnR5cGU9dGVtcGxhdGUmaWQ9N2E2N2Q5YmUmXCIiLCIvLyBodHRwczovL2xlYXJuLm1pY3Jvc29mdC5jb20vemgtY24vYXp1cmUvYWktc2VydmljZXMvc3BlZWNoLXNlcnZpY2UvaG93LXRvLXJlY29nbml6ZS1zcGVlY2g/cGl2b3RzPXByb2dyYW1taW5nLWxhbmd1YWdlLWphdmFzY3JpcHQjcmVjb2duaXplLXNwZWVjaC1mcm9tLWEtbWljcm9waG9uZVxyXG5cclxuaW1wb3J0IHsgUmVzdWx0UmVhc29uIH0gZnJvbSAnbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsnO1xyXG5cclxuaW1wb3J0ICogYXMgc3BlZWNoc2RrIGZyb20gJ21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrJztcclxuZXhwb3J0IGNvbnN0IHN0dEZyb21NaWMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBjb25zdCBzcGVlY2hDb25maWcgPSBzcGVlY2hzZGsuU3BlZWNoQ29uZmlnLmZyb21TdWJzY3JpcHRpb24oJzMxOGI3YWQwOTNkYjQzNmM5YjhhYmYzM2M1YThlY2Q1JywgJ2Vhc3Rhc2lhJyk7XHJcbiAgICAgICAgc3BlZWNoQ29uZmlnLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UgPSAnemgtQ04nO1xyXG4gICAgICAgIHNwZWVjaENvbmZpZy5lbmRwb2ludElkID0gJzJiOGQzNTQ5LTg5OWItNDk0Yi04OWM0LTY1ZTRlYWNmM2RlNyc7XHJcblxyXG4gICAgICAgIC8vIOebtOaOpeS9v+eUqCBzcGVlY2gtc2RrIOeahOaMgee7reW9lemfs+i9rOaNouWKn+iDve+8jOS4jemcgOimgeiHquW3seWunueOsOW9lemfs1xyXG4gICAgICAgIGNvbnN0IGF1ZGlvQ29uZmlnID0gc3BlZWNoc2RrLkF1ZGlvQ29uZmlnLmZyb21EZWZhdWx0TWljcm9waG9uZUlucHV0KCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBzcGVlY2hzZGsuU3BlZWNoUmVjb2duaXplcihzcGVlY2hDb25maWcsIGF1ZGlvQ29uZmlnKTtcclxuXHJcbn1cclxuXHJcbi8vIOiHquW3seWunueOsOW9lemfs++8jOeEtuWQjueUqOivu+aWh+S7tueahOaWueW8j+iwg+eUqO+8jOWQjumdouWmguaenOaNouaIkOWFrOWPuOeahOacjeWKoe+8jOWPr+iDvemcgOimgei/meenjeaWueW8j1xyXG5leHBvcnQgY29uc3Qgc3R0RnJvbUZpbGUgPSBmdW5jdGlvbiAoZmlsZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNwZWVjaENvbmZpZyA9IHNwZWVjaHNkay5TcGVlY2hDb25maWcuZnJvbVN1YnNjcmlwdGlvbignMzE4YjdhZDA5M2RiNDM2YzliOGFiZjMzYzVhOGVjZDUnLCAnZWFzdGFzaWEnKTtcclxuICAgICAgICAgICAgICAgIHNwZWVjaENvbmZpZy5zcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlID0gJ3poLUNOJztcclxuICAgICAgICAgICAgICAgIHNwZWVjaENvbmZpZy5lbmRwb2ludElkID0gJzJiOGQzNTQ5LTg5OWItNDk0Yi04OWM0LTY1ZTRlYWNmM2RlNyc7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g5LuO5paH5Lu25a+56LGh6K+75Y+W5paH5Lu25rWB77yM5YaZ5YWlcHVzaCBzdHJlYW1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHB1c2hTdHJlYW0gPSBzcGVlY2hzZGsuQXVkaW9JbnB1dFN0cmVhbS5jcmVhdGVQdXNoU3RyZWFtKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGV2dC50YXJnZXQucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhcnJheUJ1ZmZlcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHVzaFN0cmVhbS53cml0ZShhcnJheUJ1ZmZlcilcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hTdHJlYW0uY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncHVzaFN0cmVhbScsIHB1c2hTdHJlYW0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IGF1ZGlvQ29uZmlnID0gc3BlZWNoc2RrLkF1ZGlvQ29uZmlnLmZyb21XYXZGaWxlSW5wdXQoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvQ29uZmlnID0gc3BlZWNoc2RrLkF1ZGlvQ29uZmlnLmZyb21TdHJlYW1JbnB1dChwdXNoU3RyZWFtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2F1ZGlvQ29uZmlnJywgYXVkaW9Db25maWcpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0b2RvIOebruWJjeivu+WPluS4jeWIsOaWh+Wtl++8jCDkuI3noa7lrprmmK/lkKbmmK9wdXNoU3RyZWFtLndyaXRlIOeahOmXrumimOOAguS5n+acieWPr+iDveaYr2NvcmRvdmEtcGx1Z2luLW1lZGlh55qE5paH5Lu25qC85byP5LiN56ym5ZCI77yI6ZyA6KaBMTYga0h6IDE2IOS9jeWNleWjsOmBkyBQQ03vvIlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9sZWFybi5taWNyb3NvZnQuY29tL3poLWNuL2phdmFzY3JpcHQvYXBpL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2F1ZGlvaW5wdXRzdHJlYW0/dmlldz1henVyZS1ub2RlLWxhdGVzdCNtaWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay1hdWRpb2lucHV0c3RyZWFtLWNyZWF0ZXB1c2hzdHJlYW1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUobmV3IHNwZWVjaHNkay5TcGVlY2hSZWNvZ25pemVyKHNwZWVjaENvbmZpZywgYXVkaW9Db25maWcpKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTtcclxuICAgICAgICB9KVxyXG59IiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIl0sInNvdXJjZVJvb3QiOiIifQ==